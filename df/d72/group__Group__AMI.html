<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: AMI functions</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">AMI functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de8/structactions.html">actions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">list of actions registered  <a href="../../dc/de8/structactions.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d3e/structall__events.html">all_events</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d8a/structast__manager__user.html">ast_manager_user</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">user descriptor, as read from the config file.  <a href="../../db/d8a/structast__manager__user.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d94/structeventqent.html">eventqent</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d3c/structfast__originate__helper.html">fast_originate_helper</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">helper function for originate  <a href="../../d2/d3c/structfast__originate__helper.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">list of hooks registered  <a href="../../d5/d26/structmanager__hooks.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/structmansession.html">mansession</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">In case you didn't read that giant block of text above the <a class="el" href="../../df/d05/structmansession__session.html">mansession_session</a> struct, the struct mansession is named this solely to keep the API the same in Asterisk. This structure really represents data that is different from Manager action to Manager action. The <a class="el" href="../../df/d05/structmansession__session.html">mansession_session</a> pointer contained within points to session-specific data.  <a href="../../d2/d8a/structmansession.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d05/structmansession__session.html">mansession_session</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4b/structpermalias.html">permalias</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d63/structusers.html">users</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">list of users found in the config file  <a href="../../d8/d63/structusers.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga8548bdd40d19dc12b6e3709694d5dbd2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga8548bdd40d19dc12b6e3709694d5dbd2">any_manager_listeners</a>(<a class="el" href="../../d3/d0a/structsessions.html">sessions</a>)&#160;&#160;&#160;((<a class="el" href="../../d3/d0a/structsessions.html">sessions</a> &amp;&amp; <a class="el" href="../../d7/d22/astobj2__container_8c.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(<a class="el" href="../../d3/d0a/structsessions.html">sessions</a>)) || !<a class="el" href="../../d4/dc5/extconf_8c.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a>(&amp;<a class="el" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>))</td></tr>
<tr class="separator:ga8548bdd40d19dc12b6e3709694d5dbd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga53925ec1ccff9474e934c4182ec833ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga53925ec1ccff9474e934c4182ec833ef">ASTMAN_APPEND_BUF_INITSIZE</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:ga53925ec1ccff9474e934c4182ec833ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">initial allocated size for the astman_append_buf and astman_send_*_va  <a href="#ga53925ec1ccff9474e934c4182ec833ef">More...</a><br /></td></tr>
<tr class="separator:ga53925ec1ccff9474e934c4182ec833ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c6c0e75254e2641e579bba0068626de"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga9c6c0e75254e2641e579bba0068626de">DEFAULT_REALM</a>&#160;&#160;&#160;&quot;asterisk&quot;</td></tr>
<tr class="separator:ga9c6c0e75254e2641e579bba0068626de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6a246405a298682d5f34f8856b68461"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gac6a246405a298682d5f34f8856b68461">EVENT_FLAG_SHUTDOWN</a>&#160;&#160;&#160;-1</td></tr>
<tr class="memdesc:gac6a246405a298682d5f34f8856b68461"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fake event class used to end sessions at shutdown.  <a href="#gac6a246405a298682d5f34f8856b68461">More...</a><br /></td></tr>
<tr class="separator:gac6a246405a298682d5f34f8856b68461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeac2210b7c1bd030e2766730c0f6f0e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaeac2210b7c1bd030e2766730c0f6f0e6">GET_HEADER_FIRST_MATCH</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:gaeac2210b7c1bd030e2766730c0f6f0e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga085b42ebdf75f324731bbbfc3edc0d8d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga085b42ebdf75f324731bbbfc3edc0d8d">GET_HEADER_LAST_MATCH</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ga085b42ebdf75f324731bbbfc3edc0d8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa0b13360e4e6387c7a73239b67a19d57"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa0b13360e4e6387c7a73239b67a19d57">GET_HEADER_SKIP_EMPTY</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:gaa0b13360e4e6387c7a73239b67a19d57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf5f8f8fba6bc87e2788f8075148eb3ed"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaf5f8f8fba6bc87e2788f8075148eb3ed">MANAGER_EVENT_BUF_INITSIZE</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:gaf5f8f8fba6bc87e2788f8075148eb3ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf6298ba3cc972f7d6b8c42cff93cb8a8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaf6298ba3cc972f7d6b8c42cff93cb8a8">manager_event_sessions</a>(<a class="el" href="../../d3/d0a/structsessions.html">sessions</a>,  category,  <a class="el" href="../../df/d7d/structevent.html">event</a>,  <a class="el" href="../../d5/dde/test__func__file_8c.html#aedde4c44231f9adaad3339ebe693e8d8">contents</a>, ...)&#160;&#160;&#160;<a class="el" href="../../df/d72/group__Group__AMI.html#ga129789bbb3008b50ad8c848f4a70eb52">__manager_event_sessions</a>(<a class="el" href="../../d3/d0a/structsessions.html">sessions</a>, category, <a class="el" href="../../df/d7d/structevent.html">event</a>, 0, <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, __FILE__, __LINE__, __PRETTY_FUNCTION__, <a class="el" href="../../d5/dde/test__func__file_8c.html#aedde4c44231f9adaad3339ebe693e8d8">contents</a> , ## __VA_ARGS__)</td></tr>
<tr class="separator:gaf6298ba3cc972f7d6b8c42cff93cb8a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa7ca48cb0ef2a611f2aa94aeeca70b3b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa7ca48cb0ef2a611f2aa94aeeca70b3b">MAX_AUTH_PERM_STRING</a>&#160;&#160;&#160;150</td></tr>
<tr class="separator:gaa7ca48cb0ef2a611f2aa94aeeca70b3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaacec20eeac5fcdb47de6e5f98bab33df"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaacec20eeac5fcdb47de6e5f98bab33df">MAX_BLACKLIST_CMD_LEN</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:gaacec20eeac5fcdb47de6e5f98bab33df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Descriptor for a manager session, either on the AMI socket or over HTTP.  <a href="#gaacec20eeac5fcdb47de6e5f98bab33df">More...</a><br /></td></tr>
<tr class="separator:gaacec20eeac5fcdb47de6e5f98bab33df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5c707deff4e68c7283f2ed73665e0c77"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga5c707deff4e68c7283f2ed73665e0c77">MAX_VARS</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:ga5c707deff4e68c7283f2ed73665e0c77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d7004574318e8b76738d6a158a447a9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga5d7004574318e8b76738d6a158a447a9">MGR_SHOW_TERMINAL_WIDTH</a>&#160;&#160;&#160;80</td></tr>
<tr class="separator:ga5d7004574318e8b76738d6a158a447a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97955111f384b58ee815bb59f0afa0c5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga97955111f384b58ee815bb59f0afa0c5">MSG_MOREDATA</a>&#160;&#160;&#160;((char *)<a class="el" href="../../df/d72/group__Group__AMI.html#ga26805df02a1c92688ae132f29ac4478a">astman_send_response</a>)</td></tr>
<tr class="separator:ga97955111f384b58ee815bb59f0afa0c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga8d9eefd35c6b7be4f64a4b4dc9d92fd8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga8d9eefd35c6b7be4f64a4b4dc9d92fd8">add_filter_result</a> { <a class="el" href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a11037e5e5ecf59d690cb6db101376995">FILTER_SUCCESS</a>, 
<a class="el" href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8ae465b39e083c5cc742896c9941dc5a6f">FILTER_ALLOC_FAILED</a>, 
<a class="el" href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a49c6dd43bada70d0caac95894f037660">FILTER_COMPILE_FAIL</a>
 }</td></tr>
<tr class="separator:ga8d9eefd35c6b7be4f64a4b4dc9d92fd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6756b9f30781ed8ca8ce938e49ad9d92"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga6756b9f30781ed8ca8ce938e49ad9d92">error_type</a> { <br />
&#160;&#160;<a class="el" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ae16d79bf07a3994731f4ac1a6ece5ec8">UNKNOWN_ACTION</a> = 1, 
<a class="el" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935">UNKNOWN_CATEGORY</a>, 
<a class="el" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac327a21855ab9428a0a4ec3b2bc9e4da">UNSPECIFIED_CATEGORY</a>, 
<a class="el" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e">UNSPECIFIED_ARGUMENT</a>, 
<br />
&#160;&#160;<a class="el" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec">FAILURE_ALLOCATION</a>, 
<a class="el" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a662747e8d918f2d0ee7012d1d19731c9">FAILURE_NEWCAT</a>, 
<a class="el" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92aa8e1a46fc31ba23e18080284f3938d75">FAILURE_DELCAT</a>, 
<a class="el" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a468f85e937d9a9d14172b0239d212125">FAILURE_EMPTYCAT</a>, 
<br />
&#160;&#160;<a class="el" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a60d08c34084a43b06ae50ccd693e0ba9">FAILURE_UPDATE</a>, 
<a class="el" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a873b7dc80f148550a62038a0f860f31d">FAILURE_DELETE</a>, 
<a class="el" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a97ea9672929721f6b45f60f058465bd9">FAILURE_APPEND</a>, 
<a class="el" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac22fdd80fd7df09af8999f6e429e29fb">FAILURE_TEMPLATE</a>
<br />
 }</td></tr>
<tr class="separator:ga6756b9f30781ed8ca8ce938e49ad9d92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9440b5a8f6a5fb7e1667674b1507344"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gae9440b5a8f6a5fb7e1667674b1507344">mansession_message_parsing</a> { <a class="el" href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344a4062487b032b9348705c5ff65d21d777">MESSAGE_OKAY</a>, 
<a class="el" href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344af59be521b8f1a6985f831b7b850a8fc9">MESSAGE_LINE_TOO_LONG</a>
 }</td></tr>
<tr class="separator:gae9440b5a8f6a5fb7e1667674b1507344"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga06f17abfc5db7b42743338b9cb73405e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga06f17abfc5db7b42743338b9cb73405e">__ast_manager_event_multichan</a> (int category, const char *<a class="el" href="../../df/d7d/structevent.html">event</a>, int <a class="el" href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a>, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> **<a class="el" href="../../d6/d75/structchans.html">chans</a>, const char *file, int line, const char *func, const char *fmt,...)</td></tr>
<tr class="separator:ga06f17abfc5db7b42743338b9cb73405e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5106d8afed1eac24399cc5d57ab0c7e6"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga5106d8afed1eac24399cc5d57ab0c7e6">__astman_get_header</a> (const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, char *<a class="el" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, int mode)</td></tr>
<tr class="memdesc:ga5106d8afed1eac24399cc5d57ab0c7e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a matching header value.  <a href="#ga5106d8afed1eac24399cc5d57ab0c7e6">More...</a><br /></td></tr>
<tr class="separator:ga5106d8afed1eac24399cc5d57ab0c7e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2febd1b3a8ac68d84ee6fb3330276c7f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga2febd1b3a8ac68d84ee6fb3330276c7f">__init_astman_append_buf</a> (void)</td></tr>
<tr class="memdesc:ga2febd1b3a8ac68d84ee6fb3330276c7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">thread local buffer for astman_append  <a href="#ga2febd1b3a8ac68d84ee6fb3330276c7f">More...</a><br /></td></tr>
<tr class="separator:ga2febd1b3a8ac68d84ee6fb3330276c7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea9436e4545799a89acf24ea113d0266"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaea9436e4545799a89acf24ea113d0266">__init_manager_event_buf</a> (void)</td></tr>
<tr class="separator:gaea9436e4545799a89acf24ea113d0266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga463ca538d0f8666156e5a35db50d4efc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga463ca538d0f8666156e5a35db50d4efc">__init_userevent_buf</a> (void)</td></tr>
<tr class="separator:ga463ca538d0f8666156e5a35db50d4efc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga129789bbb3008b50ad8c848f4a70eb52"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga129789bbb3008b50ad8c848f4a70eb52">__manager_event_sessions</a> (struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="el" href="../../d3/d0a/structsessions.html">sessions</a>, int category, const char *<a class="el" href="../../df/d7d/structevent.html">event</a>, int <a class="el" href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a>, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> **<a class="el" href="../../d6/d75/structchans.html">chans</a>, const char *file, int line, const char *func, const char *fmt,...)</td></tr>
<tr class="separator:ga129789bbb3008b50ad8c848f4a70eb52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafaa1369a2d928db0f753144acdeb2ed1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gafaa1369a2d928db0f753144acdeb2ed1">__manager_event_sessions_va</a> (struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="el" href="../../d3/d0a/structsessions.html">sessions</a>, int category, const char *<a class="el" href="../../df/d7d/structevent.html">event</a>, int <a class="el" href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a>, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> **<a class="el" href="../../d6/d75/structchans.html">chans</a>, const char *file, int line, const char *func, const char *fmt, va_list ap)</td></tr>
<tr class="separator:gafaa1369a2d928db0f753144acdeb2ed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf4adfeec3f6af24e2ede7e730bee32eb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaf4adfeec3f6af24e2ede7e730bee32eb">acl_change_stasis_cb</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:gaf4adfeec3f6af24e2ede7e730bee32eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga12e82c44fa806bdf33e7e4d92c04f707"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga12e82c44fa806bdf33e7e4d92c04f707">acl_change_stasis_subscribe</a> (void)</td></tr>
<tr class="separator:ga12e82c44fa806bdf33e7e4d92c04f707"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c363bd89e1d8a7c36513fa83f3d08af"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga7c363bd89e1d8a7c36513fa83f3d08af">acl_change_stasis_unsubscribe</a> (void)</td></tr>
<tr class="separator:ga7c363bd89e1d8a7c36513fa83f3d08af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8fdf554febcd2f092aca41a377e4a60b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga8fdf554febcd2f092aca41a377e4a60b">action_aocmessage</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga8fdf554febcd2f092aca41a377e4a60b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2dfc6e6a7c0200c34dbbc6021f10c649"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga2dfc6e6a7c0200c34dbbc6021f10c649">action_atxfer</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga2dfc6e6a7c0200c34dbbc6021f10c649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b7f596668f285bb55c2ba939a20f9d2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga4b7f596668f285bb55c2ba939a20f9d2">action_blind_transfer</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga4b7f596668f285bb55c2ba939a20f9d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa60da5f18e4bd066b5d6c5d334f3ef9a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa60da5f18e4bd066b5d6c5d334f3ef9a">action_cancel_atxfer</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:gaa60da5f18e4bd066b5d6c5d334f3ef9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade12539a3e517752ad60fef428394532"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gade12539a3e517752ad60fef428394532">action_challenge</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:gade12539a3e517752ad60fef428394532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa9472597042ec9ccd8f5d51a61b70b74"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa9472597042ec9ccd8f5d51a61b70b74">action_command</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:gaa9472597042ec9ccd8f5d51a61b70b74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manager command "command" - execute CLI command.  <a href="#gaa9472597042ec9ccd8f5d51a61b70b74">More...</a><br /></td></tr>
<tr class="separator:gaa9472597042ec9ccd8f5d51a61b70b74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3d60a22662da992b5707f7b8830efc05"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga3d60a22662da992b5707f7b8830efc05">action_coresettings</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:ga3d60a22662da992b5707f7b8830efc05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Show PBX core settings information.  <a href="#ga3d60a22662da992b5707f7b8830efc05">More...</a><br /></td></tr>
<tr class="separator:ga3d60a22662da992b5707f7b8830efc05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7dbcf9e4437be66192f797b6b740930"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gad7dbcf9e4437be66192f797b6b740930">action_coreshowchannels</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:gad7dbcf9e4437be66192f797b6b740930"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manager command "CoreShowChannels" - List currently defined channels and some information about them.  <a href="#gad7dbcf9e4437be66192f797b6b740930">More...</a><br /></td></tr>
<tr class="separator:gad7dbcf9e4437be66192f797b6b740930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad91b17071378fe3910cb119a257dab30"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gad91b17071378fe3910cb119a257dab30">action_corestatus</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:gad91b17071378fe3910cb119a257dab30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Show PBX core status information.  <a href="#gad91b17071378fe3910cb119a257dab30">More...</a><br /></td></tr>
<tr class="separator:gad91b17071378fe3910cb119a257dab30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03aa8a5224eadc07dddc34751e1868d0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga03aa8a5224eadc07dddc34751e1868d0">action_createconfig</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga03aa8a5224eadc07dddc34751e1868d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd09f46d9eea259a9a23b2a96fb99d7b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gadd09f46d9eea259a9a23b2a96fb99d7b">action_destroy</a> (void *obj)</td></tr>
<tr class="separator:gadd09f46d9eea259a9a23b2a96fb99d7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga954eccb4f48bd6797ba65a9cada6446a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga954eccb4f48bd6797ba65a9cada6446a">action_events</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga954eccb4f48bd6797ba65a9cada6446a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f3b2b093b498ed27078743ec10c05b7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga5f3b2b093b498ed27078743ec10c05b7">action_extensionstate</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga5f3b2b093b498ed27078743ec10c05b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga410d4aa5e53af4cdcb4ec95a0ae8563e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga410d4aa5e53af4cdcb4ec95a0ae8563e">action_filter</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:ga410d4aa5e53af4cdcb4ec95a0ae8563e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manager command to add an event filter to a manager session.  <a href="#ga410d4aa5e53af4cdcb4ec95a0ae8563e">More...</a><br /></td></tr>
<tr class="separator:ga410d4aa5e53af4cdcb4ec95a0ae8563e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee7a640cdb6c8442d7fc7e7914406e5a"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/dcc/structmanager__action.html">manager_action</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaee7a640cdb6c8442d7fc7e7914406e5a">action_find</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:gaee7a640cdb6c8442d7fc7e7914406e5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga607030674dbfc12f62148d375b4e320f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga607030674dbfc12f62148d375b4e320f">action_getconfig</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga607030674dbfc12f62148d375b4e320f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga22cac49ed9e48c4bed52477e6334278e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga22cac49ed9e48c4bed52477e6334278e">action_getconfigjson</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga22cac49ed9e48c4bed52477e6334278e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga46026a8e1dfda56ac9dc23cd31515def"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga46026a8e1dfda56ac9dc23cd31515def">action_getvar</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga46026a8e1dfda56ac9dc23cd31515def"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b80579f3d94f43d2e7def7add35dc61"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga2b80579f3d94f43d2e7def7add35dc61">action_hangup</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga2b80579f3d94f43d2e7def7add35dc61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga28572e9c3a5f7c565f68eae095454d3c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga28572e9c3a5f7c565f68eae095454d3c">action_listcategories</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga28572e9c3a5f7c565f68eae095454d3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cf03665d072e22c68953f8dadc65690"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga2cf03665d072e22c68953f8dadc65690">action_listcommands</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga2cf03665d072e22c68953f8dadc65690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06c45e1e9264f4a9081b0563e062b0a7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga06c45e1e9264f4a9081b0563e062b0a7">action_loggerrotate</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:ga06c45e1e9264f4a9081b0563e062b0a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manager command "LoggerRotate" - reloads and rotates the logger in the same manner as the CLI command 'logger rotate'.  <a href="#ga06c45e1e9264f4a9081b0563e062b0a7">More...</a><br /></td></tr>
<tr class="separator:ga06c45e1e9264f4a9081b0563e062b0a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga446d7b8021ecd45234cd3053734c9d53"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga446d7b8021ecd45234cd3053734c9d53">action_login</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga446d7b8021ecd45234cd3053734c9d53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70e9f0abcbf6c0aca44ad6e3f941c266"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga70e9f0abcbf6c0aca44ad6e3f941c266">action_logoff</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga70e9f0abcbf6c0aca44ad6e3f941c266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e0bee965191aad897199382d0f36aba"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga1e0bee965191aad897199382d0f36aba">action_mailboxcount</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga1e0bee965191aad897199382d0f36aba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga41ec46957049f65f0409d8d92f21b428"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga41ec46957049f65f0409d8d92f21b428">action_mailboxstatus</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga41ec46957049f65f0409d8d92f21b428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa72169a44884720d85770602ffe6cdb5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa72169a44884720d85770602ffe6cdb5">action_originate</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:gaa72169a44884720d85770602ffe6cdb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea3a1b38ba96480a2f09d7109a69b0fd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaea3a1b38ba96480a2f09d7109a69b0fd">action_ping</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:gaea3a1b38ba96480a2f09d7109a69b0fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9800654edab91105eb77e4ae88417387"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga9800654edab91105eb77e4ae88417387">action_presencestate</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga9800654edab91105eb77e4ae88417387"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97662516a5cd49e552cf9d2e30987aac"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga97662516a5cd49e552cf9d2e30987aac">action_redirect</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:ga97662516a5cd49e552cf9d2e30987aac"><td class="mdescLeft">&#160;</td><td class="mdescRight">action_redirect: The redirect manager command  <a href="#ga97662516a5cd49e552cf9d2e30987aac">More...</a><br /></td></tr>
<tr class="separator:ga97662516a5cd49e552cf9d2e30987aac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8678a44da3d5cf72e6ea38409d2898bb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga8678a44da3d5cf72e6ea38409d2898bb">action_reload</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:ga8678a44da3d5cf72e6ea38409d2898bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a reload event.  <a href="#ga8678a44da3d5cf72e6ea38409d2898bb">More...</a><br /></td></tr>
<tr class="separator:ga8678a44da3d5cf72e6ea38409d2898bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c6842f7ec1925c46db96beaaf8d24b1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga1c6842f7ec1925c46db96beaaf8d24b1">action_sendtext</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga1c6842f7ec1925c46db96beaaf8d24b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0063f7b7d4976f533e64e98503e535aa"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga0063f7b7d4976f533e64e98503e535aa">action_setvar</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga0063f7b7d4976f533e64e98503e535aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad16a64f7db4f1fdc0326f086152ed584"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gad16a64f7db4f1fdc0326f086152ed584">action_status</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:gad16a64f7db4f1fdc0326f086152ed584"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manager "status" command to show channels.  <a href="#gad16a64f7db4f1fdc0326f086152ed584">More...</a><br /></td></tr>
<tr class="separator:gad16a64f7db4f1fdc0326f086152ed584"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2ec80a6f9d335e9240ce5cc6ab49221b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga2ec80a6f9d335e9240ce5cc6ab49221b">action_timeout</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga2ec80a6f9d335e9240ce5cc6ab49221b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga722b7d69a94cb2ececdb88bf67f80667"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga722b7d69a94cb2ececdb88bf67f80667">action_updateconfig</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga722b7d69a94cb2ececdb88bf67f80667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa837605a5558f94ae96ed1b881aa75e7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa837605a5558f94ae96ed1b881aa75e7">action_userevent</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:gaa837605a5558f94ae96ed1b881aa75e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadf9acbde2aab503926610acb110634d6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gadf9acbde2aab503926610acb110634d6">action_waitevent</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:gadf9acbde2aab503926610acb110634d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d71cf4726fe666194a3473e39782abe"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d94/structeventqent.html">eventqent</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga2d71cf4726fe666194a3473e39782abe">advance_event</a> (struct <a class="el" href="../../d9/d94/structeventqent.html">eventqent</a> *e)</td></tr>
<tr class="separator:ga2d71cf4726fe666194a3473e39782abe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20256749d9d7e9dd367c6470336eb041"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga20256749d9d7e9dd367c6470336eb041">AO2_GLOBAL_OBJ_STATIC</a> (mgr_sessions)</td></tr>
<tr class="separator:ga20256749d9d7e9dd367c6470336eb041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab2837580fb6d9dca1a3d32b0dfe8a24a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gab2837580fb6d9dca1a3d32b0dfe8a24a">AO2_GLOBAL_OBJ_STATIC</a> (event_docs)</td></tr>
<tr class="memdesc:gab2837580fb6d9dca1a3d32b0dfe8a24a"><td class="mdescLeft">&#160;</td><td class="mdescRight">A container of event documentation nodes.  <a href="#gab2837580fb6d9dca1a3d32b0dfe8a24a">More...</a><br /></td></tr>
<tr class="separator:gab2837580fb6d9dca1a3d32b0dfe8a24a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaecb636956ea985949db409bb9d6a6d00"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaecb636956ea985949db409bb9d6a6d00">aocmessage_get_unit_entry</a> (const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, struct <a class="el" href="../../df/d18/structast__aoc__unit__entry.html">ast_aoc_unit_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>, unsigned int entry_num)</td></tr>
<tr class="separator:gaecb636956ea985949db409bb9d6a6d00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga42ac3bf839aaa226509162987fcf695d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga42ac3bf839aaa226509162987fcf695d">append_channel_vars</a> (struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **pbuf, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="separator:ga42ac3bf839aaa226509162987fcf695d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae456544c8bf8d684b871f41851f8eab1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gae456544c8bf8d684b871f41851f8eab1">append_event</a> (const char *<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, int category)</td></tr>
<tr class="memdesc:gae456544c8bf8d684b871f41851f8eab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">events are appended to a queue from where they can be dispatched to clients.  <a href="#gae456544c8bf8d684b871f41851f8eab1">More...</a><br /></td></tr>
<tr class="separator:gae456544c8bf8d684b871f41851f8eab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc128abc0bb66879ef7743eea7a5d53f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gacc128abc0bb66879ef7743eea7a5d53f">ast_hook_send_action</a> (struct <a class="el" href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a> *hook, const char *msg)</td></tr>
<tr class="memdesc:gacc128abc0bb66879ef7743eea7a5d53f"><td class="mdescLeft">&#160;</td><td class="mdescRight">access for hooks to send action messages to ami  <a href="#gacc128abc0bb66879ef7743eea7a5d53f">More...</a><br /></td></tr>
<tr class="separator:gacc128abc0bb66879ef7743eea7a5d53f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaab162dbd3271550e8bb515c1e431bd9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaaab162dbd3271550e8bb515c1e431bd9">ast_instring</a> (const char *bigstr, const char *smallstr, const char delim)</td></tr>
<tr class="separator:gaaab162dbd3271550e8bb515c1e431bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1a2e7df8657b820c5a6663b397f23bc9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga1a2e7df8657b820c5a6663b397f23bc9">ast_manager_check_enabled</a> (void)</td></tr>
<tr class="memdesc:ga1a2e7df8657b820c5a6663b397f23bc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if AMI is enabled.  <a href="#ga1a2e7df8657b820c5a6663b397f23bc9">More...</a><br /></td></tr>
<tr class="separator:ga1a2e7df8657b820c5a6663b397f23bc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfa23131c1c93528074761076ca2bc85"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gacfa23131c1c93528074761076ca2bc85">ast_manager_get_message_router</a> (void)</td></tr>
<tr class="memdesc:gacfa23131c1c93528074761076ca2bc85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> for AMI.  <a href="#gacfa23131c1c93528074761076ca2bc85">More...</a><br /></td></tr>
<tr class="separator:gacfa23131c1c93528074761076ca2bc85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga568aa1aff837fc0001279490a6d9b22f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga568aa1aff837fc0001279490a6d9b22f">ast_manager_get_topic</a> (void)</td></tr>
<tr class="memdesc:ga568aa1aff837fc0001279490a6d9b22f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> topic for AMI.  <a href="#ga568aa1aff837fc0001279490a6d9b22f">More...</a><br /></td></tr>
<tr class="separator:ga568aa1aff837fc0001279490a6d9b22f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga546caee8e3d040d0074bc32e96d53b7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga546caee8e3d040d0074bc32e96d53b7d">ast_manager_publish_event</a> (const char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, int class_type, struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *obj)</td></tr>
<tr class="memdesc:ga546caee8e3d040d0074bc32e96d53b7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish an event to AMI.  <a href="#ga546caee8e3d040d0074bc32e96d53b7d">More...</a><br /></td></tr>
<tr class="separator:ga546caee8e3d040d0074bc32e96d53b7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab220bef102a1bf6e96a407d3a5a3e161"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gab220bef102a1bf6e96a407d3a5a3e161">ast_manager_register2</a> (const char *action, int auth, int(*func)(struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m), struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *module, const char *<a class="el" href="../../d9/d5e/func__enum_8c.html#a1539fbb78128c8c72e41d1e9d2c09351">synopsis</a>, const char *description)</td></tr>
<tr class="memdesc:gab220bef102a1bf6e96a407d3a5a3e161"><td class="mdescLeft">&#160;</td><td class="mdescRight">register a new command with manager, including online help. This is the preferred way to register a manager command  <a href="#gab220bef102a1bf6e96a407d3a5a3e161">More...</a><br /></td></tr>
<tr class="separator:gab220bef102a1bf6e96a407d3a5a3e161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b312f4df19fa79a2185f41ff533516b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga9b312f4df19fa79a2185f41ff533516b">ast_manager_register_hook</a> (struct <a class="el" href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a> *hook)</td></tr>
<tr class="memdesc:ga9b312f4df19fa79a2185f41ff533516b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a custom hook to be called when an event is fired.  <a href="#ga9b312f4df19fa79a2185f41ff533516b">More...</a><br /></td></tr>
<tr class="separator:ga9b312f4df19fa79a2185f41ff533516b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f6d4d99712fba3bb1075b0984bc2731"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga1f6d4d99712fba3bb1075b0984bc2731">ast_manager_register_struct</a> (struct <a class="el" href="../../d2/dcc/structmanager__action.html">manager_action</a> *act)</td></tr>
<tr class="separator:ga1f6d4d99712fba3bb1075b0984bc2731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2a7a78b91c9ba54f89c9b5a9e7435027"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga2a7a78b91c9ba54f89c9b5a9e7435027">ast_manager_str_from_json_object</a> (struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *blob, <a class="el" href="../../db/d45/manager_8h.html#a8c8f2d8718ba98dc22b6615489fa2f8e">key_exclusion_cb</a> exclusion_cb)</td></tr>
<tr class="memdesc:ga2a7a78b91c9ba54f89c9b5a9e7435027"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a JSON object into an AMI compatible string.  <a href="#ga2a7a78b91c9ba54f89c9b5a9e7435027">More...</a><br /></td></tr>
<tr class="separator:ga2a7a78b91c9ba54f89c9b5a9e7435027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafadf012f66a9fd7ecf985ec5b9dee101"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a> (const char *action)</td></tr>
<tr class="memdesc:gafadf012f66a9fd7ecf985ec5b9dee101"><td class="mdescLeft">&#160;</td><td class="mdescRight">support functions to register/unregister AMI action handlers,  <a href="#gafadf012f66a9fd7ecf985ec5b9dee101">More...</a><br /></td></tr>
<tr class="separator:gafadf012f66a9fd7ecf985ec5b9dee101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9592be65e0f9c99b7952a5841888757f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga9592be65e0f9c99b7952a5841888757f">ast_manager_unregister_hook</a> (struct <a class="el" href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a> *hook)</td></tr>
<tr class="memdesc:ga9592be65e0f9c99b7952a5841888757f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a custom hook to be called when an event is fired.  <a href="#ga9592be65e0f9c99b7952a5841888757f">More...</a><br /></td></tr>
<tr class="separator:ga9592be65e0f9c99b7952a5841888757f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga22f6d55529c1ca69bc308af9d9ef0bb2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga22f6d55529c1ca69bc308af9d9ef0bb2">ast_webmanager_check_enabled</a> (void)</td></tr>
<tr class="memdesc:ga22f6d55529c1ca69bc308af9d9ef0bb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if AMI/HTTP is enabled.  <a href="#ga22f6d55529c1ca69bc308af9d9ef0bb2">More...</a><br /></td></tr>
<tr class="separator:ga22f6d55529c1ca69bc308af9d9ef0bb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac2d42f7be13c532b6a70d50f1b8983d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const char *fmt,...)</td></tr>
<tr class="separator:gac2d42f7be13c532b6a70d50f1b8983d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81510d243e1eb9c6f919e72183e811a6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga81510d243e1eb9c6f919e72183e811a6">astman_append_headers</a> (struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *params)</td></tr>
<tr class="memdesc:ga81510d243e1eb9c6f919e72183e811a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append additional headers into the message structure from params.  <a href="#ga81510d243e1eb9c6f919e72183e811a6">More...</a><br /></td></tr>
<tr class="separator:ga81510d243e1eb9c6f919e72183e811a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d231019a6733602acb549ee4f82529b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga5d231019a6733602acb549ee4f82529b">astman_append_json</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const char *<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)</td></tr>
<tr class="separator:ga5d231019a6733602acb549ee4f82529b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga960097199ef3da5b50b2b041eae8495d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga960097199ef3da5b50b2b041eae8495d">astman_flush</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>)</td></tr>
<tr class="separator:ga960097199ef3da5b50b2b041eae8495d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b557a85c122f479896a9f598ee49116"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga1b557a85c122f479896a9f598ee49116">astman_free_headers</a> (struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:ga1b557a85c122f479896a9f598ee49116"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free headers inside message structure, but not the message structure itself.  <a href="#ga1b557a85c122f479896a9f598ee49116">More...</a><br /></td></tr>
<tr class="separator:ga1b557a85c122f479896a9f598ee49116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6a9f3498f9afffecfd78c485af41556"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a> (const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, char *<a class="el" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>)</td></tr>
<tr class="memdesc:gac6a9f3498f9afffecfd78c485af41556"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the first matching variable from an array.  <a href="#gac6a9f3498f9afffecfd78c485af41556">More...</a><br /></td></tr>
<tr class="separator:gac6a9f3498f9afffecfd78c485af41556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga21a20a25e6d03f6fd32cdc86fe9b53d1"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga21a20a25e6d03f6fd32cdc86fe9b53d1">astman_get_variables</a> (const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:ga21a20a25e6d03f6fd32cdc86fe9b53d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a linked list of the Variable: headers.  <a href="#ga21a20a25e6d03f6fd32cdc86fe9b53d1">More...</a><br /></td></tr>
<tr class="separator:ga21a20a25e6d03f6fd32cdc86fe9b53d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa97739ea571e22b9dcd231658f6ce044"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa97739ea571e22b9dcd231658f6ce044">astman_get_variables_order</a> (const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, enum <a class="el" href="../../db/d45/manager_8h.html#a5622d5b2d0baf505daf7b2a1e99c1140">variable_orders</a> <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a>)</td></tr>
<tr class="memdesc:gaa97739ea571e22b9dcd231658f6ce044"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a linked list of the Variable: headers with order specified.  <a href="#gaa97739ea571e22b9dcd231658f6ce044">More...</a><br /></td></tr>
<tr class="separator:gaa97739ea571e22b9dcd231658f6ce044"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77315fa8e29950f0c88120501acda0a3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, char *msg)</td></tr>
<tr class="memdesc:ga77315fa8e29950f0c88120501acda0a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send ack in manager transaction.  <a href="#ga77315fa8e29950f0c88120501acda0a3">More...</a><br /></td></tr>
<tr class="separator:ga77315fa8e29950f0c88120501acda0a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga31a02a7d3cc36aa66ebebdedfc574d1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, char *<a class="el" href="../../da/d7c/utils_2frame_8h.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>)</td></tr>
<tr class="memdesc:ga31a02a7d3cc36aa66ebebdedfc574d1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send error in manager transaction.  <a href="#ga31a02a7d3cc36aa66ebebdedfc574d1c">More...</a><br /></td></tr>
<tr class="separator:ga31a02a7d3cc36aa66ebebdedfc574d1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga352d583ea36240124638e5c1db088227"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga352d583ea36240124638e5c1db088227">astman_send_error_va</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, const char *fmt,...)</td></tr>
<tr class="memdesc:ga352d583ea36240124638e5c1db088227"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send error in manager transaction (with va_args support)  <a href="#ga352d583ea36240124638e5c1db088227">More...</a><br /></td></tr>
<tr class="separator:ga352d583ea36240124638e5c1db088227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac9d1d485a1911880e31a3537223b3f9c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gac9d1d485a1911880e31a3537223b3f9c">astman_send_list_complete</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, const char *event_name, int count)</td></tr>
<tr class="separator:gac9d1d485a1911880e31a3537223b3f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf7c909efbfc26d0d9c66786c83b8f69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69">astman_send_list_complete_end</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s)</td></tr>
<tr class="memdesc:gabf7c909efbfc26d0d9c66786c83b8f69"><td class="mdescLeft">&#160;</td><td class="mdescRight">End the list complete event.  <a href="#gabf7c909efbfc26d0d9c66786c83b8f69">More...</a><br /></td></tr>
<tr class="separator:gabf7c909efbfc26d0d9c66786c83b8f69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58c3e3da5d31739cafaee1df6ddf9342"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342">astman_send_list_complete_start</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, const char *event_name, int count)</td></tr>
<tr class="memdesc:ga58c3e3da5d31739cafaee1df6ddf9342"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the list complete event.  <a href="#ga58c3e3da5d31739cafaee1df6ddf9342">More...</a><br /></td></tr>
<tr class="separator:ga58c3e3da5d31739cafaee1df6ddf9342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga63df9fe1c4852999ab438347124a34b8"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga63df9fe1c4852999ab438347124a34b8">astman_send_list_complete_start_common</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, const char *event_name, int count)</td></tr>
<tr class="separator:ga63df9fe1c4852999ab438347124a34b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0ee6ee1f4d200f711e2983bffe770a72"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, char *msg, char *listflag)</td></tr>
<tr class="memdesc:ga0ee6ee1f4d200f711e2983bffe770a72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send ack in manager transaction to begin a list.  <a href="#ga0ee6ee1f4d200f711e2983bffe770a72">More...</a><br /></td></tr>
<tr class="separator:ga0ee6ee1f4d200f711e2983bffe770a72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26805df02a1c92688ae132f29ac4478a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga26805df02a1c92688ae132f29ac4478a">astman_send_response</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, char *resp, char *msg)</td></tr>
<tr class="memdesc:ga26805df02a1c92688ae132f29ac4478a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send response in manager transaction.  <a href="#ga26805df02a1c92688ae132f29ac4478a">More...</a><br /></td></tr>
<tr class="separator:ga26805df02a1c92688ae132f29ac4478a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5ceffcba60b4100c02c4700be76161e4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, char *resp, char *msg, char *listflag)</td></tr>
<tr class="memdesc:ga5ceffcba60b4100c02c4700be76161e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a response with an optional message, and terminate it with an empty line. m is used only to grab the 'ActionID' field.  <a href="#ga5ceffcba60b4100c02c4700be76161e4">More...</a><br /></td></tr>
<tr class="separator:ga5ceffcba60b4100c02c4700be76161e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga740af4550410dae06b748c23ebd0ae24"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga740af4550410dae06b748c23ebd0ae24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0f21735eb8551ed24735a71ea26e13c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gac0f21735eb8551ed24735a71ea26e13c">authenticate</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:gac0f21735eb8551ed24735a71ea26e13c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga57cc8b67a0e4797ab1a608872d51d397"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga57cc8b67a0e4797ab1a608872d51d397">authority_to_str</a> (int authority, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **res)</td></tr>
<tr class="memdesc:ga57cc8b67a0e4797ab1a608872d51d397"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert authority code to a list of options. Note that the EVENT_FLAG_ALL authority will always be returned.  <a href="#ga57cc8b67a0e4797ab1a608872d51d397">More...</a><br /></td></tr>
<tr class="separator:ga57cc8b67a0e4797ab1a608872d51d397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga033f5d6043ef1b5fcb6da1aa6a70f53d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga033f5d6043ef1b5fcb6da1aa6a70f53d">blackfilter_cmp_fn</a> (void *obj, void *arg, void *data, int flags)</td></tr>
<tr class="separator:ga033f5d6043ef1b5fcb6da1aa6a70f53d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8547b9864f771b59843128a2054d7c47"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d05/structmansession__session.html">mansession_session</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga8547b9864f771b59843128a2054d7c47">build_mansession</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="memdesc:ga8547b9864f771b59843128a2054d7c47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate manager session structure and add it to the list of sessions.  <a href="#ga8547b9864f771b59843128a2054d7c47">More...</a><br /></td></tr>
<tr class="separator:ga8547b9864f771b59843128a2054d7c47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9227e0d88226ca4021dadf7d03d63976"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga9227e0d88226ca4021dadf7d03d63976">check_blacklist</a> (const char *cmd)</td></tr>
<tr class="separator:ga9227e0d88226ca4021dadf7d03d63976"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga91820dbca9ccfa57da1a8c3c183a56a4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga91820dbca9ccfa57da1a8c3c183a56a4">check_manager_session_inuse</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:ga91820dbca9ccfa57da1a8c3c183a56a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d7639d606b2516454d130399c840b35"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga2d7639d606b2516454d130399c840b35">destroy_fast_originate_helper</a> (struct <a class="el" href="../../d2/d3c/structfast__originate__helper.html">fast_originate_helper</a> *doomed)</td></tr>
<tr class="separator:ga2d7639d606b2516454d130399c840b35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32ac2419647ed028f30dc1de0f01056e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga32ac2419647ed028f30dc1de0f01056e">do_message</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s)</td></tr>
<tr class="separator:ga32ac2419647ed028f30dc1de0f01056e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60fd6fa59060c7bc3c3082275434a292"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga60fd6fa59060c7bc3c3082275434a292">event_filter_destructor</a> (void *obj)</td></tr>
<tr class="separator:ga60fd6fa59060c7bc3c3082275434a292"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab0df757e83667997fd4b802de7c7c45b"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gab0df757e83667997fd4b802de7c7c45b">fast_originate</a> (void *data)</td></tr>
<tr class="separator:gab0df757e83667997fd4b802de7c7c45b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa497adca1647f8add683cd71799fc015"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa497adca1647f8add683cd71799fc015">function_capable_string_allowed_with_auths</a> (const char *evaluating, int writepermlist)</td></tr>
<tr class="memdesc:gaa497adca1647f8add683cd71799fc015"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if a string which can be used to evaluate functions should be rejected.  <a href="#gaa497adca1647f8add683cd71799fc015">More...</a><br /></td></tr>
<tr class="separator:gaa497adca1647f8add683cd71799fc015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3256471530910751d20fa34e435c7575"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga3256471530910751d20fa34e435c7575">generate_status</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, char **vars, int varc, int all_variables, char *id_text, int *count)</td></tr>
<tr class="separator:ga3256471530910751d20fa34e435c7575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga460510e6866d4785ec6bd0181c443739"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga460510e6866d4785ec6bd0181c443739">get_input</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, char *output)</td></tr>
<tr class="separator:ga460510e6866d4785ec6bd0181c443739"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga14bd65f2096d29973dfd999d71e88eee"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/d8a/structast__manager__user.html">ast_manager_user</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga14bd65f2096d29973dfd999d71e88eee">get_manager_by_name_locked</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:ga14bd65f2096d29973dfd999d71e88eee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad61fbf474f2bcfc8efb7710a6d5d8bcd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gad61fbf474f2bcfc8efb7710a6d5d8bcd">get_perm</a> (const char *instr)</td></tr>
<tr class="separator:gad61fbf474f2bcfc8efb7710a6d5d8bcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf3c7fe7452f69b197b7c4e9a217119c5"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d94/structeventqent.html">eventqent</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaf3c7fe7452f69b197b7c4e9a217119c5">grab_last</a> (void)</td></tr>
<tr class="separator:gaf3c7fe7452f69b197b7c4e9a217119c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae44104439ab29d44fcd84f0361493625"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gae44104439ab29d44fcd84f0361493625">handle_manager_reload</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="memdesc:gae44104439ab29d44fcd84f0361493625"><td class="mdescLeft">&#160;</td><td class="mdescRight">CLI command manager reload.  <a href="#gae44104439ab29d44fcd84f0361493625">More...</a><br /></td></tr>
<tr class="separator:gae44104439ab29d44fcd84f0361493625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac71fa21ee14d825bf98e4a658604c492"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gac71fa21ee14d825bf98e4a658604c492">handle_mandebug</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:gac71fa21ee14d825bf98e4a658604c492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7a69d5366de99cd023fe903f6edee0a8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga7a69d5366de99cd023fe903f6edee0a8">handle_parse_error</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, char *<a class="el" href="../../da/d7c/utils_2frame_8h.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>)</td></tr>
<tr class="separator:ga7a69d5366de99cd023fe903f6edee0a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5226d999bfd60cad437504afd1db054c"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga5226d999bfd60cad437504afd1db054c">handle_showmanager</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ga5226d999bfd60cad437504afd1db054c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0a3fb6c9b8db835d467df360cb34f403"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga0a3fb6c9b8db835d467df360cb34f403">handle_showmanagers</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ga0a3fb6c9b8db835d467df360cb34f403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga689bc5c3cd185f54178b3719a5e834ac"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga689bc5c3cd185f54178b3719a5e834ac">handle_showmancmd</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ga689bc5c3cd185f54178b3719a5e834ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad3ecc04e5e7484463d64fa6d00c2bdd2"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gad3ecc04e5e7484463d64fa6d00c2bdd2">handle_showmancmds</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="memdesc:gad3ecc04e5e7484463d64fa6d00c2bdd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">CLI command manager list commands.  <a href="#gad3ecc04e5e7484463d64fa6d00c2bdd2">More...</a><br /></td></tr>
<tr class="separator:gad3ecc04e5e7484463d64fa6d00c2bdd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26ac9d8e0f9483bd06741753ebcfe6d6"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga26ac9d8e0f9483bd06741753ebcfe6d6">handle_showmanconn</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="memdesc:ga26ac9d8e0f9483bd06741753ebcfe6d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">CLI command manager list connected.  <a href="#ga26ac9d8e0f9483bd06741753ebcfe6d6">More...</a><br /></td></tr>
<tr class="separator:ga26ac9d8e0f9483bd06741753ebcfe6d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4aa0274bed0fc74d53f43cad92c2e263"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga4aa0274bed0fc74d53f43cad92c2e263">handle_showmaneventq</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="memdesc:ga4aa0274bed0fc74d53f43cad92c2e263"><td class="mdescLeft">&#160;</td><td class="mdescRight">CLI command manager list eventq.  <a href="#ga4aa0274bed0fc74d53f43cad92c2e263">More...</a><br /></td></tr>
<tr class="separator:ga4aa0274bed0fc74d53f43cad92c2e263"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5da77ad82c423fcfee5299611ed6d7ce"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../df/d72/group__Group__AMI.html#ga6756b9f30781ed8ca8ce938e49ad9d92">error_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga5da77ad82c423fcfee5299611ed6d7ce">handle_updates</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *cfg, const char *dfn)</td></tr>
<tr class="memdesc:ga5da77ad82c423fcfee5299611ed6d7ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">helper function for action_updateconfig  <a href="#ga5da77ad82c423fcfee5299611ed6d7ce">More...</a><br /></td></tr>
<tr class="separator:ga5da77ad82c423fcfee5299611ed6d7ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6dba42aa414d62585a0a662a5561ec73"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga6dba42aa414d62585a0a662a5561ec73">json_escape</a> (char *<a class="el" href="../../da/d7c/utils_2frame_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, const char *<a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a>)</td></tr>
<tr class="separator:ga6dba42aa414d62585a0a662a5561ec73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga156e867b0f9693ddc7225adf19b6044b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga156e867b0f9693ddc7225adf19b6044b">log_action</a> (const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, const char *action)</td></tr>
<tr class="separator:ga156e867b0f9693ddc7225adf19b6044b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga067ac83735089a590c082f49ab11800c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga067ac83735089a590c082f49ab11800c">man_do_variable_value</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *head, const char *hdr_val)</td></tr>
<tr class="separator:ga067ac83735089a590c082f49ab11800c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2fce7bc082ac5dfa4ea3545b9f34cb66"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../df/d72/group__Group__AMI.html#ga8d9eefd35c6b7be4f64a4b4dc9d92fd8">add_filter_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga2fce7bc082ac5dfa4ea3545b9f34cb66">manager_add_filter</a> (const char *filter_pattern, struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *whitefilters, struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *blackfilters)</td></tr>
<tr class="memdesc:ga2fce7bc082ac5dfa4ea3545b9f34cb66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an event filter to a manager session.  <a href="#ga2fce7bc082ac5dfa4ea3545b9f34cb66">More...</a><br /></td></tr>
<tr class="separator:ga2fce7bc082ac5dfa4ea3545b9f34cb66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3cf68c6aee41a7989e352a9da265890a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga3cf68c6aee41a7989e352a9da265890a">manager_default_msg_cb</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:ga3cf68c6aee41a7989e352a9da265890a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ede61db764903806db0e5334d07c010"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga6ede61db764903806db0e5334d07c010">manager_displayconnects</a> (struct <a class="el" href="../../df/d05/structmansession__session.html">mansession_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>)</td></tr>
<tr class="memdesc:ga6ede61db764903806db0e5334d07c010"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get displayconnects config option.  <a href="#ga6ede61db764903806db0e5334d07c010">More...</a><br /></td></tr>
<tr class="separator:ga6ede61db764903806db0e5334d07c010"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab9ef7d18dc9c448d132687dadcdf8a01"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gab9ef7d18dc9c448d132687dadcdf8a01">manager_generic_msg_cb</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:gab9ef7d18dc9c448d132687dadcdf8a01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7e2a5d3d8ab0739e46d14c8cd369178a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga7e2a5d3d8ab0739e46d14c8cd369178a">manager_json_array_with_key</a> (struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *obj, const char *key, size_t index, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **res, <a class="el" href="../../db/d45/manager_8h.html#a8c8f2d8718ba98dc22b6615489fa2f8e">key_exclusion_cb</a> exclusion_cb)</td></tr>
<tr class="separator:ga7e2a5d3d8ab0739e46d14c8cd369178a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac2fe93293795ad443c10ac77cbcaee14"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gac2fe93293795ad443c10ac77cbcaee14">manager_json_obj_with_key</a> (struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *obj, const char *key, const char *parent_key, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **res, <a class="el" href="../../db/d45/manager_8h.html#a8c8f2d8718ba98dc22b6615489fa2f8e">key_exclusion_cb</a> exclusion_cb)</td></tr>
<tr class="separator:gac2fe93293795ad443c10ac77cbcaee14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f451671d833c6be7e65d2fe89042e1f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga1f451671d833c6be7e65d2fe89042e1f">manager_json_to_ast_str</a> (struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *obj, const char *key, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **res, <a class="el" href="../../db/d45/manager_8h.html#a8c8f2d8718ba98dc22b6615489fa2f8e">key_exclusion_cb</a> exclusion_cb)</td></tr>
<tr class="separator:ga1f451671d833c6be7e65d2fe89042e1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9d8b1e607e3cbb90e48fe541c7b5cf11"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga9d8b1e607e3cbb90e48fe541c7b5cf11">manager_json_value_str_append</a> (struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, const char *key, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **res)</td></tr>
<tr class="separator:ga9d8b1e607e3cbb90e48fe541c7b5cf11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac730b751a77b99e3dd3eb4b1880ba933"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gac730b751a77b99e3dd3eb4b1880ba933">manager_modulecheck</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:gac730b751a77b99e3dd3eb4b1880ba933"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manager function to check if module is loaded.  <a href="#gac730b751a77b99e3dd3eb4b1880ba933">More...</a><br /></td></tr>
<tr class="separator:gac730b751a77b99e3dd3eb4b1880ba933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c11fab0bce951155235b8e7a2013e1d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga7c11fab0bce951155235b8e7a2013e1d">manager_moduleload</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:ga7c11fab0bce951155235b8e7a2013e1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06909116cc55a2b89ea554e74be04ab6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga06909116cc55a2b89ea554e74be04ab6">manager_state_cb</a> (const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, struct <a class="el" href="../../df/d4c/structast__state__cb__info.html">ast_state_cb_info</a> *info, void *data)</td></tr>
<tr class="separator:ga06909116cc55a2b89ea554e74be04ab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e8f2893c887ee3b8acd8ecd151135b0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga3e8f2893c887ee3b8acd8ecd151135b0">mansession_cmp_fn</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:ga3e8f2893c887ee3b8acd8ecd151135b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa418c48f68fe0253bf35346878d7b919"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3">ast_transport</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a> (const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s)</td></tr>
<tr class="separator:gaa418c48f68fe0253bf35346878d7b919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cbbc87c25cdd3f6346961d3ed40b2fb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s)</td></tr>
<tr class="memdesc:ga2cbbc87c25cdd3f6346961d3ed40b2fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock the 'mansession' structure.  <a href="#ga2cbbc87c25cdd3f6346961d3ed40b2fb">More...</a><br /></td></tr>
<tr class="separator:ga2cbbc87c25cdd3f6346961d3ed40b2fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06b330b2a545662f8130f086604660ec"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s)</td></tr>
<tr class="memdesc:ga06b330b2a545662f8130f086604660ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock the 'mansession' structure.  <a href="#ga06b330b2a545662f8130f086604660ec">More...</a><br /></td></tr>
<tr class="separator:ga06b330b2a545662f8130f086604660ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad40bb264275fb647b2044b47ac533dad"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gad40bb264275fb647b2044b47ac533dad">match_filter</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, char *eventdata)</td></tr>
<tr class="separator:gad40bb264275fb647b2044b47ac533dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga12892108a64ff8588dbcd69a4bdf654e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga12892108a64ff8588dbcd69a4bdf654e">print_event_instance</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, struct <a class="el" href="../../d8/d46/structast__xml__doc__item.html">ast_xml_doc_item</a> *instance)</td></tr>
<tr class="separator:ga12892108a64ff8588dbcd69a4bdf654e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab2b9c596c9d6eb5dac8fe5f3d7588f50"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gab2b9c596c9d6eb5dac8fe5f3d7588f50">process_events</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s)</td></tr>
<tr class="separator:gab2b9c596c9d6eb5dac8fe5f3d7588f50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga10113617fccfd71f696509a270385169"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga10113617fccfd71f696509a270385169">process_message</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:ga10113617fccfd71f696509a270385169"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process an AMI message, performing desired action. Return 0 on success, -1 on error that require the session to be destroyed.  <a href="#ga10113617fccfd71f696509a270385169">More...</a><br /></td></tr>
<tr class="separator:ga10113617fccfd71f696509a270385169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0464e7b1c82d29cbe8b3f70bf7ca29c6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga0464e7b1c82d29cbe8b3f70bf7ca29c6">purge_events</a> (void)</td></tr>
<tr class="separator:ga0464e7b1c82d29cbe8b3f70bf7ca29c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa98613bbc66bdf99b8423afcfc4f9b2c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa98613bbc66bdf99b8423afcfc4f9b2c">purge_sessions</a> (int n_max)</td></tr>
<tr class="memdesc:gaa98613bbc66bdf99b8423afcfc4f9b2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">remove at most n_max stale session from the list.  <a href="#gaa98613bbc66bdf99b8423afcfc4f9b2c">More...</a><br /></td></tr>
<tr class="separator:gaa98613bbc66bdf99b8423afcfc4f9b2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1fbdb833cde8f5286f6671033665a2aa"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga1fbdb833cde8f5286f6671033665a2aa">queue_read_action_payload</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const unsigned char *payload, size_t payload_size, enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775">ast_frame_read_action</a> action)</td></tr>
<tr class="memdesc:ga1fbdb833cde8f5286f6671033665a2aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a given read action containing a payload onto a channel.  <a href="#ga1fbdb833cde8f5286f6671033665a2aa">More...</a><br /></td></tr>
<tr class="separator:ga1fbdb833cde8f5286f6671033665a2aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadc51d8d2531d72d735b5f270db27de72"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gadc51d8d2531d72d735b5f270db27de72">queue_sendtext</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *body)</td></tr>
<tr class="memdesc:gadc51d8d2531d72d735b5f270db27de72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a read action to send a text message.  <a href="#gadc51d8d2531d72d735b5f270db27de72">More...</a><br /></td></tr>
<tr class="separator:gadc51d8d2531d72d735b5f270db27de72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa010c027e6c7d2c2082482526a2eed06"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa010c027e6c7d2c2082482526a2eed06">queue_sendtext_data</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *body, const char *content_type)</td></tr>
<tr class="memdesc:gaa010c027e6c7d2c2082482526a2eed06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a read action to send a text data message.  <a href="#gaa010c027e6c7d2c2082482526a2eed06">More...</a><br /></td></tr>
<tr class="separator:gaa010c027e6c7d2c2082482526a2eed06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a> (void)</td></tr>
<tr class="separator:ga7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf35097a12cdbc0424817d9ab324d1a0a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaf35097a12cdbc0424817d9ab324d1a0a">report_auth_success</a> (const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s)</td></tr>
<tr class="separator:gaf35097a12cdbc0424817d9ab324d1a0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga270644a6d4f3d622e763df47b0cbfce8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga270644a6d4f3d622e763df47b0cbfce8">report_failed_acl</a> (const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const char *username)</td></tr>
<tr class="separator:ga270644a6d4f3d622e763df47b0cbfce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga83162fffa402098460159beae8406122"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga83162fffa402098460159beae8406122">report_failed_challenge_response</a> (const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const char *response, const char *expected_response)</td></tr>
<tr class="separator:ga83162fffa402098460159beae8406122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa992b47cf04699542d45129cb603c11f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa992b47cf04699542d45129cb603c11f">report_inval_password</a> (const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const char *username)</td></tr>
<tr class="separator:gaa992b47cf04699542d45129cb603c11f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga16a1493b33939fc5e485953855078109"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga16a1493b33939fc5e485953855078109">report_invalid_user</a> (const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const char *username)</td></tr>
<tr class="separator:ga16a1493b33939fc5e485953855078109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3ee6e147a9a6e5ee1cd6bd91a194c07"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gae3ee6e147a9a6e5ee1cd6bd91a194c07">report_req_bad_format</a> (const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const char *action)</td></tr>
<tr class="separator:gae3ee6e147a9a6e5ee1cd6bd91a194c07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6a02209ea6747897dfd5249fe631105"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa6a02209ea6747897dfd5249fe631105">report_req_not_allowed</a> (const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const char *action)</td></tr>
<tr class="separator:gaa6a02209ea6747897dfd5249fe631105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab68a64554e2df0f2d926faf603848aed"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gab68a64554e2df0f2d926faf603848aed">report_session_limit</a> (const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s)</td></tr>
<tr class="separator:gab68a64554e2df0f2d926faf603848aed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa7c66558ac59bdb0c8d05864aaec9c22"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa7c66558ac59bdb0c8d05864aaec9c22">send_string</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, char *<a class="el" href="../../d5/dba/stringfields_8c.html#a3d4e66c2067ac2d83b7f65a222e5ab54">string</a>)</td></tr>
<tr class="separator:gaa7c66558ac59bdb0c8d05864aaec9c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga556bc46323d87c59cf471a5f48c7d2d5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga556bc46323d87c59cf471a5f48c7d2d5">session_destroy</a> (struct <a class="el" href="../../df/d05/structmansession__session.html">mansession_session</a> *s)</td></tr>
<tr class="separator:ga556bc46323d87c59cf471a5f48c7d2d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d2190ae1fcb37e66c2a445f2fe59ec3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga6d2190ae1fcb37e66c2a445f2fe59ec3">session_destructor</a> (void *obj)</td></tr>
<tr class="separator:ga6d2190ae1fcb37e66c2a445f2fe59ec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa457796588f0d13a7dc02e3db64c2e7d"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa457796588f0d13a7dc02e3db64c2e7d">session_do</a> (void *data)</td></tr>
<tr class="memdesc:gaa457796588f0d13a7dc02e3db64c2e7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The body of the individual manager session. Call <a class="el" href="../../df/d72/group__Group__AMI.html#ga460510e6866d4785ec6bd0181c443739">get_input()</a> to read one line at a time (or be woken up on new events), collect the lines in a message until found an empty line, and execute the request. In any case, deliver events asynchronously through <a class="el" href="../../df/d72/group__Group__AMI.html#gab2b9c596c9d6eb5dac8fe5f3d7588f50">process_events()</a> (called from here if no line is available, or at the end of <a class="el" href="../../df/d72/group__Group__AMI.html#ga10113617fccfd71f696509a270385169" title="Process an AMI message, performing desired action. Return 0 on success, -1 on error that require the ...">process_message()</a>. )  <a href="#gaa457796588f0d13a7dc02e3db64c2e7d">More...</a><br /></td></tr>
<tr class="separator:gaa457796588f0d13a7dc02e3db64c2e7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab7a51272a96fcd2792382b4d0bf254f6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gab7a51272a96fcd2792382b4d0bf254f6">set_eventmask</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const char *eventmask)</td></tr>
<tr class="memdesc:gab7a51272a96fcd2792382b4d0bf254f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rather than braindead on,off this now can also accept a specific int mask value or a ',' delim list of mask strings (the same as manager.conf) -anthm.  <a href="#gab7a51272a96fcd2792382b4d0bf254f6">More...</a><br /></td></tr>
<tr class="separator:gab7a51272a96fcd2792382b4d0bf254f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11ada23da895363223ba26f69d39029a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga11ada23da895363223ba26f69d39029a">strings_to_mask</a> (const char *<a class="el" href="../../d5/dba/stringfields_8c.html#a3d4e66c2067ac2d83b7f65a222e5ab54">string</a>)</td></tr>
<tr class="separator:ga11ada23da895363223ba26f69d39029a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e4938c2cafe6e01553cb952ca1f5e45"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d05/structmansession__session.html">mansession_session</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga5e4938c2cafe6e01553cb952ca1f5e45">unref_mansession</a> (struct <a class="el" href="../../df/d05/structmansession__session.html">mansession_session</a> *s)</td></tr>
<tr class="memdesc:ga5e4938c2cafe6e01553cb952ca1f5e45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unreference manager session object. If no more references, then go ahead and delete it.  <a href="#ga5e4938c2cafe6e01553cb952ca1f5e45">More...</a><br /></td></tr>
<tr class="separator:ga5e4938c2cafe6e01553cb952ca1f5e45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadeb39f5a951b5c08eac6d0b872084fef"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gadeb39f5a951b5c08eac6d0b872084fef">user_authority_to_str</a> (int authority, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **res)</td></tr>
<tr class="memdesc:gadeb39f5a951b5c08eac6d0b872084fef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert authority code to a list of options for a user. This will only display those authority codes that have an explicit match on authority.  <a href="#gadeb39f5a951b5c08eac6d0b872084fef">More...</a><br /></td></tr>
<tr class="separator:gadeb39f5a951b5c08eac6d0b872084fef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga21a9d344c805f9450b254b4fc0f5afcd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga21a9d344c805f9450b254b4fc0f5afcd">whitefilter_cmp_fn</a> (void *obj, void *arg, void *data, int flags)</td></tr>
<tr class="separator:ga21a9d344c805f9450b254b4fc0f5afcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga322eb26fcd507fe69297e038d584db02"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga322eb26fcd507fe69297e038d584db02">acl_change_sub</a></td></tr>
<tr class="separator:ga322eb26fcd507fe69297e038d584db02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee1aba1426a9ecb841129e4fe99c33fd"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/de8/structactions.html">actions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaee1aba1426a9ecb841129e4fe99c33fd">actions</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:gaee1aba1426a9ecb841129e4fe99c33fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5924754cc35adc2fed2f07cb4b0b5200"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/d3e/structall__events.html">all_events</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga5924754cc35adc2fed2f07cb4b0b5200">all_events</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:ga5924754cc35adc2fed2f07cb4b0b5200"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9d6ad22f239563cb0ec69d475299fa87"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga9d6ad22f239563cb0ec69d475299fa87">allowmultiplelogin</a> = 1</td></tr>
<tr class="separator:ga9d6ad22f239563cb0ec69d475299fa87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga66c34a7f788ab4d323b1bee27256906d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga66c34a7f788ab4d323b1bee27256906d">astman_append_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../df/d72/group__Group__AMI.html#ga2febd1b3a8ac68d84ee6fb3330276c7f">__init_astman_append_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:ga66c34a7f788ab4d323b1bee27256906d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f05cdf013e1e5fe03ea2615e681bf58"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga8f05cdf013e1e5fe03ea2615e681bf58">authlimit</a></td></tr>
<tr class="separator:ga8f05cdf013e1e5fe03ea2615e681bf58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac3f1c96b9a666398c7768e67346b0b87"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gac3f1c96b9a666398c7768e67346b0b87">authtimeout</a></td></tr>
<tr class="separator:gac3f1c96b9a666398c7768e67346b0b87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab362ced8cd2bc839a9a1782ae31a9166"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gab362ced8cd2bc839a9a1782ae31a9166">broken_events_action</a> = 0</td></tr>
<tr class="separator:gab362ced8cd2bc839a9a1782ae31a9166"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae263799a76e54f46b173f039ee1053d"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:ga2c50d07b002a16d9ddfa6eb70ac5f977"><td class="memItemLeft" >&#160;&#160;&#160;const char *&#160;&#160;&#160;<a class="el" href="../../d4/d10/manager_8c.html#a2c50d07b002a16d9ddfa6eb70ac5f977">words</a> [<a class="el" href="../../dc/db0/cli_8h.html#ae88634c402fdd8b46fd5d686dad8bfb9">AST_MAX_CMD_LEN</a>]</td></tr>
<tr class="separator:ga2c50d07b002a16d9ddfa6eb70ac5f977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae263799a76e54f46b173f039ee1053d"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaae263799a76e54f46b173f039ee1053d">command_blacklist</a> []</td></tr>
<tr class="separator:gaae263799a76e54f46b173f039ee1053d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3eb98988184ea3f302e9a914eb9641e5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga3eb98988184ea3f302e9a914eb9641e5">displayconnects</a> = 1</td></tr>
<tr class="separator:ga3eb98988184ea3f302e9a914eb9641e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6da807cb7fb332127a4896dd423ed6d"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa6da807cb7fb332127a4896dd423ed6d">global_realm</a> [<a class="el" href="../../d9/d94/network_8h.html#afd80ecbe3170ca4fc85b65cda8659f82">MAXHOSTNAMELEN</a>]</td></tr>
<tr class="separator:gaa6da807cb7fb332127a4896dd423ed6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf28d7a75b43cde09123c9ba1527b34ba"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaf28d7a75b43cde09123c9ba1527b34ba">httptimeout</a> = 60</td></tr>
<tr class="separator:gaf28d7a75b43cde09123c9ba1527b34ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ade0e7490b00414a5d773bc5ceff73e"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga9ade0e7490b00414a5d773bc5ceff73e">manager_channelvars</a></td></tr>
<tr class="separator:ga9ade0e7490b00414a5d773bc5ceff73e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4162d86f823ac8c40424a3ae4f41d5b9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga4162d86f823ac8c40424a3ae4f41d5b9">manager_debug</a> = 0</td></tr>
<tr class="separator:ga4162d86f823ac8c40424a3ae4f41d5b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19fa3d97c06873c9d67de7232cca5247"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga19fa3d97c06873c9d67de7232cca5247">manager_enabled</a> = 0</td></tr>
<tr class="separator:ga19fa3d97c06873c9d67de7232cca5247"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2e585cbfd7440aa94b0eb20ff93f1c3c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga2e585cbfd7440aa94b0eb20ff93f1c3c">manager_event_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../df/d72/group__Group__AMI.html#gaea9436e4545799a89acf24ea113d0266">__init_manager_event_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:ga2e585cbfd7440aa94b0eb20ff93f1c3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac89a15f6b7dee4927d3ee5c8e9de9f69"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gac89a15f6b7dee4927d3ee5c8e9de9f69">manager_hooks</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:gac89a15f6b7dee4927d3ee5c8e9de9f69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadeff73697d2789905f4c3a21671ef6d3"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gadeff73697d2789905f4c3a21671ef6d3">manager_topic</a></td></tr>
<tr class="memdesc:gadeff73697d2789905f4c3a21671ef6d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">A <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> that all topics AMI cares about will be forwarded to.  <a href="#gadeff73697d2789905f4c3a21671ef6d3">More...</a><br /></td></tr>
<tr class="separator:gadeff73697d2789905f4c3a21671ef6d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga844c8a72ece748571e61afa468edabb0"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../de/d4b/structpermalias.html">permalias</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a> []</td></tr>
<tr class="separator:ga844c8a72ece748571e61afa468edabb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f085d5905794e05f39eb6056fcba447"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga8f085d5905794e05f39eb6056fcba447">rtp_topic_forwarder</a></td></tr>
<tr class="memdesc:ga8f085d5905794e05f39eb6056fcba447"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> for forwarding the RTP topic to the AMI topic.  <a href="#ga8f085d5905794e05f39eb6056fcba447">More...</a><br /></td></tr>
<tr class="separator:ga8f085d5905794e05f39eb6056fcba447"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97a54a9ee7d7446e6be8a9371fcd2a19"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga97a54a9ee7d7446e6be8a9371fcd2a19">security_topic_forwarder</a></td></tr>
<tr class="memdesc:ga97a54a9ee7d7446e6be8a9371fcd2a19"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> for forwarding the Security topic to the AMI topic.  <a href="#ga97a54a9ee7d7446e6be8a9371fcd2a19">More...</a><br /></td></tr>
<tr class="separator:ga97a54a9ee7d7446e6be8a9371fcd2a19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a></td></tr>
<tr class="memdesc:ga6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> for all <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> messages.  <a href="#ga6d6d7bdd31cb1b6f84f2e447a7a2c6c2">More...</a><br /></td></tr>
<tr class="separator:ga6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab96bdf674e2ebee782bfde795f93062e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gab96bdf674e2ebee782bfde795f93062e">subscribed</a> = 0</td></tr>
<tr class="separator:gab96bdf674e2ebee782bfde795f93062e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6833175e09cefe8b9dfaa5ead96fb7b6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga6833175e09cefe8b9dfaa5ead96fb7b6">test_suite_forwarder</a></td></tr>
<tr class="memdesc:ga6833175e09cefe8b9dfaa5ead96fb7b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> for forwarding the Test topic to the AMI topic.  <a href="#ga6833175e09cefe8b9dfaa5ead96fb7b6">More...</a><br /></td></tr>
<tr class="separator:ga6833175e09cefe8b9dfaa5ead96fb7b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab8d1a4eb372f1c462aa6cc73468069ab"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gab8d1a4eb372f1c462aa6cc73468069ab">timestampevents</a></td></tr>
<tr class="separator:gab8d1a4eb372f1c462aa6cc73468069ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab771766124f3d865c0f312bd0957bc5f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gab771766124f3d865c0f312bd0957bc5f">unauth_sessions</a> = 0</td></tr>
<tr class="separator:gab771766124f3d865c0f312bd0957bc5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa1e469ecb509cb8dd2b26bde7dd1e1be"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gaa1e469ecb509cb8dd2b26bde7dd1e1be">userevent_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../df/d72/group__Group__AMI.html#ga463ca538d0f8666156e5a35db50d4efc">__init_userevent_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:gaa1e469ecb509cb8dd2b26bde7dd1e1be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8142b26b5d72b53266e247033cfa317d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d63/structusers.html">users</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga8142b26b5d72b53266e247033cfa317d">users</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:ga8142b26b5d72b53266e247033cfa317d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad0b42352088047f7b3f29b4b331b43cd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#gad0b42352088047f7b3f29b4b331b43cd">webmanager_enabled</a> = 0</td></tr>
<tr class="separator:gad0b42352088047f7b3f29b4b331b43cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7a521597aa2f92e42118f262cb911472"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d72/group__Group__AMI.html#ga7a521597aa2f92e42118f262cb911472">STASIS_MESSAGE_TYPE_DEFN</a> (<a class="el" href="../../db/d45/manager_8h.html#a8ae409b5ff584e42c30edcfe5837d85c">ast_manager_get_generic_type</a>)</td></tr>
<tr class="memdesc:ga7a521597aa2f92e42118f262cb911472"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define AMI message types.  <a href="#ga7a521597aa2f92e42118f262cb911472">More...</a><br /></td></tr>
<tr class="separator:ga7a521597aa2f92e42118f262cb911472"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga8548bdd40d19dc12b6e3709694d5dbd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8548bdd40d19dc12b6e3709694d5dbd2">&#9670;&nbsp;</a></span>any_manager_listeners</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define any_manager_listeners</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d3/d0a/structsessions.html">sessions</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="../../d3/d0a/structsessions.html">sessions</a> &amp;&amp; <a class="el" href="../../d7/d22/astobj2__container_8c.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(<a class="el" href="../../d3/d0a/structsessions.html">sessions</a>)) || !<a class="el" href="../../d4/dc5/extconf_8c.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a>(&amp;<a class="el" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01835">1835</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07233">__ast_manager_event_multichan()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01838">manager_default_msg_cb()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01869">manager_generic_msg_cb()</a>.</p>

</div>
</div>
<a id="ga53925ec1ccff9474e934c4182ec833ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga53925ec1ccff9474e934c4182ec833ef">&#9670;&nbsp;</a></span>ASTMAN_APPEND_BUF_INITSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASTMAN_APPEND_BUF_INITSIZE&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initial allocated size for the astman_append_buf and astman_send_*_va </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03066">3066</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03164">astman_send_error_va()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03206">astman_send_list_complete_start_common()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03123">astman_send_response_full()</a>.</p>

</div>
</div>
<a id="ga9c6c0e75254e2641e579bba0068626de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9c6c0e75254e2641e579bba0068626de">&#9670;&nbsp;</a></span>DEFAULT_REALM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_REALM&#160;&#160;&#160;&quot;asterisk&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01483">1483</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09116">manager_set_defaults()</a>.</p>

</div>
</div>
<a id="gac6a246405a298682d5f34f8856b68461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac6a246405a298682d5f34f8856b68461">&#9670;&nbsp;</a></span>EVENT_FLAG_SHUTDOWN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EVENT_FLAG_SHUTDOWN&#160;&#160;&#160;-1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fake event class used to end sessions at shutdown. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01511">1511</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">__manager_event_sessions_va()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02084">authority_to_str()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08956">manager_shutdown()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06227">process_events()</a>.</p>

</div>
</div>
<a id="gaeac2210b7c1bd030e2766730c0f6f0e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeac2210b7c1bd030e2766730c0f6f0e6">&#9670;&nbsp;</a></span>GET_HEADER_FIRST_MATCH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GET_HEADER_FIRST_MATCH&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02766">2766</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>.</p>

</div>
</div>
<a id="ga085b42ebdf75f324731bbbfc3edc0d8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga085b42ebdf75f324731bbbfc3edc0d8d">&#9670;&nbsp;</a></span>GET_HEADER_LAST_MATCH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GET_HEADER_LAST_MATCH&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02767">2767</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l02783">__astman_get_header()</a>.</p>

</div>
</div>
<a id="gaa0b13360e4e6387c7a73239b67a19d57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa0b13360e4e6387c7a73239b67a19d57">&#9670;&nbsp;</a></span>GET_HEADER_SKIP_EMPTY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GET_HEADER_SKIP_EMPTY&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02768">2768</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l02783">__astman_get_header()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>.</p>

</div>
</div>
<a id="gaf5f8f8fba6bc87e2788f8075148eb3ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf5f8f8fba6bc87e2788f8075148eb3ed">&#9670;&nbsp;</a></span>MANAGER_EVENT_BUF_INITSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MANAGER_EVENT_BUF_INITSIZE&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07110">7110</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">__manager_event_sessions_va()</a>.</p>

</div>
</div>
<a id="gaf6298ba3cc972f7d6b8c42cff93cb8a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf6298ba3cc972f7d6b8c42cff93cb8a8">&#9670;&nbsp;</a></span>manager_event_sessions</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define manager_event_sessions</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d3/d0a/structsessions.html">sessions</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">category, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../df/d7d/structevent.html">event</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d5/dde/test__func__file_8c.html#aedde4c44231f9adaad3339ebe693e8d8">contents</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../df/d72/group__Group__AMI.html#ga129789bbb3008b50ad8c848f4a70eb52">__manager_event_sessions</a>(<a class="el" href="../../d3/d0a/structsessions.html">sessions</a>, category, <a class="el" href="../../df/d7d/structevent.html">event</a>, 0, <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, __FILE__, __LINE__, __PRETTY_FUNCTION__, <a class="el" href="../../d5/dde/test__func__file_8c.html#aedde4c44231f9adaad3339ebe693e8d8">contents</a> , ## __VA_ARGS__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01832">1832</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l01838">manager_default_msg_cb()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01869">manager_generic_msg_cb()</a>.</p>

</div>
</div>
<a id="gaa7ca48cb0ef2a611f2aa94aeeca70b3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa7ca48cb0ef2a611f2aa94aeeca70b3b">&#9670;&nbsp;</a></span>MAX_AUTH_PERM_STRING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_AUTH_PERM_STRING&#160;&#160;&#160;150</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum string length of the AMI authority permission string buildable from perms[]. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02043">2043</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">__manager_event_sessions_va()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04324">action_listcommands()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04393">action_login()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02497">handle_showmanager()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02340">handle_showmancmd()</a>.</p>

</div>
</div>
<a id="gaacec20eeac5fcdb47de6e5f98bab33df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaacec20eeac5fcdb47de6e5f98bab33df">&#9670;&nbsp;</a></span>MAX_BLACKLIST_CMD_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_BLACKLIST_CMD_LEN&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Descriptor for a manager session, either on the AMI socket or over HTTP. </p>
<dl class="section note"><dt>Note</dt><dd>AMI session have managerid == 0; the entry is created upon a connect, and destroyed with the socket. HTTP sessions have managerid != 0, the value is used as a search key to lookup sessions (using the mansession_id cookie, or nonce key from Digest Authentication http header). </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01523">1523</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l05259">check_blacklist()</a>.</p>

</div>
</div>
<a id="ga5c707deff4e68c7283f2ed73665e0c77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5c707deff4e68c7283f2ed73665e0c77">&#9670;&nbsp;</a></span>MAX_VARS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_VARS&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01508">1508</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08916">load_channelvars()</a>.</p>

</div>
</div>
<a id="ga5d7004574318e8b76738d6a158a447a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5d7004574318e8b76738d6a158a447a9">&#9670;&nbsp;</a></span>MGR_SHOW_TERMINAL_WIDTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGR_SHOW_TERMINAL_WIDTH&#160;&#160;&#160;80</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01506">1506</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l02613">handle_showmancmds()</a>.</p>

</div>
</div>
<a id="ga97955111f384b58ee815bb59f0afa0c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97955111f384b58ee815bb59f0afa0c5">&#9670;&nbsp;</a></span>MSG_MOREDATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_MOREDATA&#160;&#160;&#160;((char *)<a class="el" href="../../df/d72/group__Group__AMI.html#ga26805df02a1c92688ae132f29ac4478a">astman_send_response</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>NOTE: XXX this comment is unclear and possibly wrong. Callers of <a class="el" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c" title="Send error in manager transaction. ">astman_send_error()</a>, <a class="el" href="../../df/d72/group__Group__AMI.html#ga26805df02a1c92688ae132f29ac4478a" title="Send response in manager transaction. ">astman_send_response()</a> or <a class="el" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3" title="Send ack in manager transaction. ">astman_send_ack()</a> must EITHER hold the session lock <em>or</em> be running in an action callback (in which case s-&gt;session-&gt;busy will be non-zero). In either of these cases, there is no need to lock-protect the session's fd, since no other output will be sent (events will be queued), and no input will be read until either the current action finishes or <a class="el" href="../../df/d72/group__Group__AMI.html#ga460510e6866d4785ec6bd0181c443739">get_input()</a> obtains the session lock.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000072">Todo:</a></b></dt><dd>XXX MSG_MOREDATA should go to a header file. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03114">3114</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l05295">action_command()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03123">astman_send_response_full()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03196">astman_start_ack()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga8d9eefd35c6b7be4f64a4b4dc9d92fd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8d9eefd35c6b7be4f64a4b4dc9d92fd8">&#9670;&nbsp;</a></span>add_filter_result</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../df/d72/group__Group__AMI.html#ga8d9eefd35c6b7be4f64a4b4dc9d92fd8">add_filter_result</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a11037e5e5ecf59d690cb6db101376995"></a>FILTER_SUCCESS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga8d9eefd35c6b7be4f64a4b4dc9d92fd8ae465b39e083c5cc742896c9941dc5a6f"></a>FILTER_ALLOC_FAILED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a49c6dd43bada70d0caac95894f037660"></a>FILTER_COMPILE_FAIL&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01434">1434</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                       {</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a11037e5e5ecf59d690cb6db101376995">FILTER_SUCCESS</a>,</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8ae465b39e083c5cc742896c9941dc5a6f">FILTER_ALLOC_FAILED</a>,</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a49c6dd43bada70d0caac95894f037660">FILTER_COMPILE_FAIL</a>,</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;};</div><div class="ttc" id="group__Group__AMI_html_gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a11037e5e5ecf59d690cb6db101376995"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a11037e5e5ecf59d690cb6db101376995">FILTER_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01435">manager.c:1435</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a49c6dd43bada70d0caac95894f037660"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a49c6dd43bada70d0caac95894f037660">FILTER_COMPILE_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01437">manager.c:1437</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga8d9eefd35c6b7be4f64a4b4dc9d92fd8ae465b39e083c5cc742896c9941dc5a6f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8ae465b39e083c5cc742896c9941dc5a6f">FILTER_ALLOC_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01436">manager.c:1436</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga6756b9f30781ed8ca8ce938e49ad9d92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6756b9f30781ed8ca8ce938e49ad9d92">&#9670;&nbsp;</a></span>error_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../df/d72/group__Group__AMI.html#ga6756b9f30781ed8ca8ce938e49ad9d92">error_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Doxygen group </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga6756b9f30781ed8ca8ce938e49ad9d92ae16d79bf07a3994731f4ac1a6ece5ec8"></a>UNKNOWN_ACTION&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935"></a>UNKNOWN_CATEGORY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga6756b9f30781ed8ca8ce938e49ad9d92ac327a21855ab9428a0a4ec3b2bc9e4da"></a>UNSPECIFIED_CATEGORY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e"></a>UNSPECIFIED_ARGUMENT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec"></a>FAILURE_ALLOCATION&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga6756b9f30781ed8ca8ce938e49ad9d92a662747e8d918f2d0ee7012d1d19731c9"></a>FAILURE_NEWCAT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga6756b9f30781ed8ca8ce938e49ad9d92aa8e1a46fc31ba23e18080284f3938d75"></a>FAILURE_DELCAT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga6756b9f30781ed8ca8ce938e49ad9d92a468f85e937d9a9d14172b0239d212125"></a>FAILURE_EMPTYCAT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga6756b9f30781ed8ca8ce938e49ad9d92a60d08c34084a43b06ae50ccd693e0ba9"></a>FAILURE_UPDATE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga6756b9f30781ed8ca8ce938e49ad9d92a873b7dc80f148550a62038a0f860f31d"></a>FAILURE_DELETE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga6756b9f30781ed8ca8ce938e49ad9d92a97ea9672929721f6b45f60f058465bd9"></a>FAILURE_APPEND&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga6756b9f30781ed8ca8ce938e49ad9d92ac22fdd80fd7df09af8999f6e429e29fb"></a>FAILURE_TEMPLATE&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01419">1419</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                {</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ae16d79bf07a3994731f4ac1a6ece5ec8">UNKNOWN_ACTION</a> = 1,</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935">UNKNOWN_CATEGORY</a>,</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac327a21855ab9428a0a4ec3b2bc9e4da">UNSPECIFIED_CATEGORY</a>,</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e">UNSPECIFIED_ARGUMENT</a>,</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec">FAILURE_ALLOCATION</a>,</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a662747e8d918f2d0ee7012d1d19731c9">FAILURE_NEWCAT</a>,</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92aa8e1a46fc31ba23e18080284f3938d75">FAILURE_DELCAT</a>,</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a468f85e937d9a9d14172b0239d212125">FAILURE_EMPTYCAT</a>,</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a60d08c34084a43b06ae50ccd693e0ba9">FAILURE_UPDATE</a>,</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a873b7dc80f148550a62038a0f860f31d">FAILURE_DELETE</a>,</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a97ea9672929721f6b45f60f058465bd9">FAILURE_APPEND</a>,</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac22fdd80fd7df09af8999f6e429e29fb">FAILURE_TEMPLATE</a></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;};</div><div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92ac22fdd80fd7df09af8999f6e429e29fb"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac22fdd80fd7df09af8999f6e429e29fb">FAILURE_TEMPLATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01431">manager.c:1431</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a468f85e937d9a9d14172b0239d212125"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a468f85e937d9a9d14172b0239d212125">FAILURE_EMPTYCAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01427">manager.c:1427</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92ae16d79bf07a3994731f4ac1a6ece5ec8"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ae16d79bf07a3994731f4ac1a6ece5ec8">UNKNOWN_ACTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01420">manager.c:1420</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935">UNKNOWN_CATEGORY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01421">manager.c:1421</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a662747e8d918f2d0ee7012d1d19731c9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a662747e8d918f2d0ee7012d1d19731c9">FAILURE_NEWCAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01425">manager.c:1425</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a60d08c34084a43b06ae50ccd693e0ba9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a60d08c34084a43b06ae50ccd693e0ba9">FAILURE_UPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01428">manager.c:1428</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a873b7dc80f148550a62038a0f860f31d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a873b7dc80f148550a62038a0f860f31d">FAILURE_DELETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01429">manager.c:1429</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92aa8e1a46fc31ba23e18080284f3938d75"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92aa8e1a46fc31ba23e18080284f3938d75">FAILURE_DELCAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01426">manager.c:1426</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e">UNSPECIFIED_ARGUMENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01423">manager.c:1423</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec">FAILURE_ALLOCATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01424">manager.c:1424</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a97ea9672929721f6b45f60f058465bd9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a97ea9672929721f6b45f60f058465bd9">FAILURE_APPEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01430">manager.c:1430</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92ac327a21855ab9428a0a4ec3b2bc9e4da"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac327a21855ab9428a0a4ec3b2bc9e4da">UNSPECIFIED_CATEGORY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01422">manager.c:1422</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gae9440b5a8f6a5fb7e1667674b1507344"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9440b5a8f6a5fb7e1667674b1507344">&#9670;&nbsp;</a></span>mansession_message_parsing</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../df/d72/group__Group__AMI.html#gae9440b5a8f6a5fb7e1667674b1507344">mansession_message_parsing</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggae9440b5a8f6a5fb7e1667674b1507344a4062487b032b9348705c5ff65d21d777"></a>MESSAGE_OKAY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ggae9440b5a8f6a5fb7e1667674b1507344af59be521b8f1a6985f831b7b850a8fc9"></a>MESSAGE_LINE_TOO_LONG&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01615">1615</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                                {</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344a4062487b032b9348705c5ff65d21d777">MESSAGE_OKAY</a>,</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344af59be521b8f1a6985f831b7b850a8fc9">MESSAGE_LINE_TOO_LONG</a></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;};</div><div class="ttc" id="group__Group__AMI_html_ggae9440b5a8f6a5fb7e1667674b1507344af59be521b8f1a6985f831b7b850a8fc9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344af59be521b8f1a6985f831b7b850a8fc9">MESSAGE_LINE_TOO_LONG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01617">manager.c:1617</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ggae9440b5a8f6a5fb7e1667674b1507344a4062487b032b9348705c5ff65d21d777"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344a4062487b032b9348705c5ff65d21d777">MESSAGE_OKAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01616">manager.c:1616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga06f17abfc5db7b42743338b9cb73405e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06f17abfc5db7b42743338b9cb73405e">&#9670;&nbsp;</a></span>__ast_manager_event_multichan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __ast_manager_event_multichan </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chancount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> **&#160;</td>
          <td class="paramname"><em>chans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>contents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>External routines may send asterisk manager events this way </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">category</td><td>Event category, matches manager authorization </td></tr>
    <tr><td class="paramname">event</td><td>Event name </td></tr>
    <tr><td class="paramname">chancount</td><td>Number of channels in chans parameter </td></tr>
    <tr><td class="paramname">chans</td><td>A pointer to an array of channels involved in the event </td></tr>
    <tr><td class="paramname">file,line,func</td><td></td></tr>
    <tr><td class="paramname">contents</td><td>Format string describing event </td></tr>
    <tr><td class="paramname">...</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07233">7233</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">__manager_event_sessions_va()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01835">any_manager_listeners</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>.</p>
<div class="fragment"><div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;{</div><div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d3/d0a/structsessions.html">sessions</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(mgr_sessions);</div><div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;   va_list ap;</div><div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;</div><div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d72/group__Group__AMI.html#ga8548bdd40d19dc12b6e3709694d5dbd2">any_manager_listeners</a>(sessions)) {</div><div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;      <span class="comment">/* Nobody is listening */</span></div><div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sessions);</div><div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;   }</div><div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;</div><div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;   res = <a class="code" href="../../df/d72/group__Group__AMI.html#gafaa1369a2d928db0f753144acdeb2ed1">__manager_event_sessions_va</a>(sessions, category, <a class="code" href="../../df/d7d/structevent.html">event</a>, <a class="code" href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a>, chans,</div><div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;      <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, func, fmt, ap);</div><div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;   va_end(ap);</div><div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sessions);</div><div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga8548bdd40d19dc12b6e3709694d5dbd2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga8548bdd40d19dc12b6e3709694d5dbd2">any_manager_listeners</a></div><div class="ttdeci">#define any_manager_listeners(sessions)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01835">manager.c:1835</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gafaa1369a2d928db0f753144acdeb2ed1"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gafaa1369a2d928db0f753144acdeb2ed1">__manager_event_sessions_va</a></div><div class="ttdeci">static int __manager_event_sessions_va(struct ao2_container *sessions, int category, const char *event, int chancount, struct ast_channel **chans, const char *file, int line, const char *func, const char *fmt, va_list ap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07112">manager.c:7112</a></div></div>
<div class="ttc" id="channel_8c_html_a5cb129ce1d580dbb22ec9573dcb62f7f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a></div><div class="ttdeci">static int chancount</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00093">channel.c:93</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structsessions_html"><div class="ttname"><a href="../../d3/d0a/structsessions.html">sessions</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d80/chan__skinny_8c_source.html#l01630">chan_skinny.c:1630</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga5106d8afed1eac24399cc5d57ab0c7e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5106d8afed1eac24399cc5d57ab0c7e6">&#9670;&nbsp;</a></span>__astman_get_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* __astman_get_header </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a matching header value. </p>
<p>Generic function to return either the first or the last matching header from a list of variables, possibly skipping empty strings.</p>
<dl class="section note"><dt>Note</dt><dd>At the moment there is only one use of this function in this file, so we make it static.</dd>
<dd>
Never returns NULL. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02783">2783</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00157">ast_skip_blanks()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02767">GET_HEADER_LAST_MATCH</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02768">GET_HEADER_SKIP_EMPTY</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00145">message::hdrcount</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00146">message::headers</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;{</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;   <span class="keywordtype">int</span> x, l = strlen(<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>);</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;   <span class="keywordflow">if</span> (!m) {</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;   }</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>; x++) {</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *h = m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[x];</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, h, l) &amp;&amp; h[l] == <span class="charliteral">&#39;:&#39;</span>) {</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> = h + l + 1;</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;         value = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(value); <span class="comment">/* ignore leading spaces in the value */</span></div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;         <span class="comment">/* found a potential candidate */</span></div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;         <span class="keywordflow">if</span> ((mode &amp; <a class="code" href="../../df/d72/group__Group__AMI.html#gaa0b13360e4e6387c7a73239b67a19d57">GET_HEADER_SKIP_EMPTY</a>) &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(value)) {</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;            <span class="keywordflow">continue</span>;   <span class="comment">/* not interesting */</span></div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;         }</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;         <span class="keywordflow">if</span> (mode &amp; <a class="code" href="../../df/d72/group__Group__AMI.html#ga085b42ebdf75f324731bbbfc3edc0d8d">GET_HEADER_LAST_MATCH</a>) {</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;            result = <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;   <span class="comment">/* record the last match so far */</span></div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;         }</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;      }</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;   }</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga085b42ebdf75f324731bbbfc3edc0d8d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga085b42ebdf75f324731bbbfc3edc0d8d">GET_HEADER_LAST_MATCH</a></div><div class="ttdeci">#define GET_HEADER_LAST_MATCH</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02767">manager.c:2767</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa0b13360e4e6387c7a73239b67a19d57"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa0b13360e4e6387c7a73239b67a19d57">GET_HEADER_SKIP_EMPTY</a></div><div class="ttdeci">#define GET_HEADER_SKIP_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02768">manager.c:2768</a></div></div>
<div class="ttc" id="strings_8h_html_af5693da955fa3bc73bc49c47b601fc7a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a></div><div class="ttdeci">char * ast_skip_blanks(const char *str)</div><div class="ttdoc">Gets a pointer to the first non-whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00157">strings.h:157</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structmessage_html_a81929bcaa1dcfa1abf47977385058cbe"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">message::headers</a></div><div class="ttdeci">const char * headers[AST_MAX_MANHEADERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00146">manager.h:146</a></div></div>
<div class="ttc" id="structmessage_html_a2337374fe8025cb750f52a316166aa6d"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">message::hdrcount</a></div><div class="ttdeci">unsigned int hdrcount</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00145">manager.h:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2febd1b3a8ac68d84ee6fb3330276c7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2febd1b3a8ac68d84ee6fb3330276c7f">&#9670;&nbsp;</a></span>__init_astman_append_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_astman_append_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>thread local buffer for astman_append </p>
<dl class="section note"><dt>Note</dt><dd>This can not be defined within the <a class="el" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append()</a> function because it declares a couple of functions that get used to initialize the thread local storage key. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03061">3061</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="gaea9436e4545799a89acf24ea113d0266"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea9436e4545799a89acf24ea113d0266">&#9670;&nbsp;</a></span>__init_manager_event_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_manager_event_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07109">7109</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>
<div class="fragment"><div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="ga463ca538d0f8666156e5a35db50d4efc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga463ca538d0f8666156e5a35db50d4efc">&#9670;&nbsp;</a></span>__init_userevent_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_userevent_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03063">3063</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="ga129789bbb3008b50ad8c848f4a70eb52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga129789bbb3008b50ad8c848f4a70eb52">&#9670;&nbsp;</a></span>__manager_event_sessions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __manager_event_sessions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td>
          <td class="paramname"><em>sessions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chancount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> **&#160;</td>
          <td class="paramname"><em>chans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07211">7211</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">__manager_event_sessions_va()</a>.</p>
<div class="fragment"><div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;{</div><div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;   va_list ap;</div><div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;</div><div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;   res = <a class="code" href="../../df/d72/group__Group__AMI.html#gafaa1369a2d928db0f753144acdeb2ed1">__manager_event_sessions_va</a>(sessions, category, <a class="code" href="../../df/d7d/structevent.html">event</a>, <a class="code" href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a>, chans,</div><div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;      <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, func, fmt, ap);</div><div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;   va_end(ap);</div><div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gafaa1369a2d928db0f753144acdeb2ed1"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gafaa1369a2d928db0f753144acdeb2ed1">__manager_event_sessions_va</a></div><div class="ttdeci">static int __manager_event_sessions_va(struct ao2_container *sessions, int category, const char *event, int chancount, struct ast_channel **chans, const char *file, int line, const char *func, const char *fmt, va_list ap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07112">manager.c:7112</a></div></div>
<div class="ttc" id="channel_8c_html_a5cb129ce1d580dbb22ec9573dcb62f7f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a></div><div class="ttdeci">static int chancount</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00093">channel.c:93</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gafaa1369a2d928db0f753144acdeb2ed1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafaa1369a2d928db0f753144acdeb2ed1">&#9670;&nbsp;</a></span>__manager_event_sessions_va()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __manager_event_sessions_va </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td>
          <td class="paramname"><em>sessions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chancount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> **&#160;</td>
          <td class="paramname"><em>chans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">7112</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07092">append_channel_vars()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07068">append_event()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00170">ast_config_AST_SYSTEM_NAME</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00451">AST_RWLIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01000">ast_str_append_va()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02084">authority_to_str()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00093">chancount</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01511">EVENT_FLAG_SHUTDOWN</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00112">manager_custom_hook::helper</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01478">manager_debug</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07109">manager_event_buf</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07110">MANAGER_EVENT_BUF_INITSIZE</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02043">MAX_AUTH_PERM_STRING</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01610">mansession_session::notify_lock</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01606">mansession_session::pending_event</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01462">eventqent::seq</a>, <a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01472">timestampevents</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02183">unref_mansession()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01587">mansession_session::waiting_thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07233">__ast_manager_event_multichan()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l07211">__manager_event_sessions()</a>.</p>
<div class="fragment"><div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;{</div><div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *auth = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#gaa7ca48cb0ef2a611f2aa94aeeca70b3b">MAX_AUTH_PERM_STRING</a>);</div><div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *cat_str;</div><div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;   <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;</div><div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;   buf = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../df/d72/group__Group__AMI.html#ga2e585cbfd7440aa94b0eb20ff93f1c3c">manager_event_buf</a>, <a class="code" href="../../df/d72/group__Group__AMI.html#gaf5f8f8fba6bc87e2788f8075148eb3ed">MANAGER_EVENT_BUF_INITSIZE</a>);</div><div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;   <span class="keywordflow">if</span> (!buf) {</div><div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;   }</div><div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;</div><div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;   cat_str = <a class="code" href="../../df/d72/group__Group__AMI.html#ga57cc8b67a0e4797ab1a608872d51d397">authority_to_str</a>(category, &amp;auth);</div><div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;buf, 0,</div><div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;      <span class="stringliteral">&quot;Event: %s\r\n&quot;</span></div><div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;      <span class="stringliteral">&quot;Privilege: %s\r\n&quot;</span>,</div><div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;      <a class="code" href="../../df/d7d/structevent.html">event</a>, cat_str);</div><div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;</div><div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#gab8d1a4eb372f1c462aa6cc73468069ab">timestampevents</a>) {</div><div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;      now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0,</div><div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;         <span class="stringliteral">&quot;Timestamp: %ld.%06lu\r\n&quot;</span>,</div><div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;         (<span class="keywordtype">long</span>)now.tv_sec, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) now.tv_usec);</div><div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;   }</div><div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#ga4162d86f823ac8c40424a3ae4f41d5b9">manager_debug</a>) {</div><div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;      <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/d81/app__sms_8c.html#a8514112da88a5d13451aaf8c9b064017">seq</a>;</div><div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;</div><div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0,</div><div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;         <span class="stringliteral">&quot;SequenceNumber: %d\r\n&quot;</span>,</div><div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;seq, 1));</div><div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0,</div><div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;         <span class="stringliteral">&quot;File: %s\r\n&quot;</span></div><div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;         <span class="stringliteral">&quot;Line: %d\r\n&quot;</span></div><div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;         <span class="stringliteral">&quot;Func: %s\r\n&quot;</span>,</div><div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;         <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, func);</div><div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;   }</div><div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../dd/df2/paths_8h.html#ab9f9346c7a41bdf3720f7b1ed02ec703">ast_config_AST_SYSTEM_NAME</a>)) {</div><div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0,</div><div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;         <span class="stringliteral">&quot;SystemName: %s\r\n&quot;</span>,</div><div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;         <a class="code" href="../../dd/df2/paths_8h.html#ab9f9346c7a41bdf3720f7b1ed02ec703">ast_config_AST_SYSTEM_NAME</a>);</div><div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;   }</div><div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;</div><div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aadcedfc19bc7df38193262ebb8f3c991">ast_str_append_va</a>(&amp;buf, 0, fmt, ap);</div><div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a>; i++) {</div><div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga42ac3bf839aaa226509162987fcf695d">append_channel_vars</a>(&amp;buf, chans[i]);</div><div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;   }</div><div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;</div><div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;</div><div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gae456544c8bf8d684b871f41851f8eab1">append_event</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf), category);</div><div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;</div><div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;   <span class="comment">/* Wake up any sleeping sessions */</span></div><div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;   <span class="keywordflow">if</span> (sessions) {</div><div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d05/structmansession__session.html">mansession_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>;</div><div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;</div><div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;      iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(sessions, 0);</div><div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;      <span class="keywordflow">while</span> ((session = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter))) {</div><div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;         <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">waiting_thread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;            pthread_kill(session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">waiting_thread</a>, SIGURG);</div><div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;            <span class="comment">/* We have an event to process, but the mansession is</span></div><div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;<span class="comment">             * not waiting for it. We still need to indicate that there</span></div><div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;<span class="comment">             * is an event waiting so that get_input processes the pending</span></div><div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;<span class="comment">             * event instead of polling.</span></div><div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;            session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a77d36f7d3efdab912ada2ef54a75cc65">pending_event</a> = 1;</div><div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;         }</div><div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga5e4938c2cafe6e01553cb952ca1f5e45">unref_mansession</a>(session);</div><div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;      }</div><div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;   }</div><div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;</div><div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;   <span class="keywordflow">if</span> (category != <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a246405a298682d5f34f8856b68461">EVENT_FLAG_SHUTDOWN</a> &amp;&amp; !<a class="code" href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a>(&amp;<a class="code" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>)) {</div><div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a> *hook;</div><div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;</div><div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>);</div><div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>, hook, list) {</div><div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;         hook-&gt;<a class="code" href="../../d0/d10/structmanager__custom__hook.html#a563331ff9859f8ff63ed061c4c68d8cd">helper</a>(category, <a class="code" href="../../df/d7d/structevent.html">event</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf));</div><div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;      }</div><div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>);</div><div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;   }</div><div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;</div><div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;}</div><div class="ttc" id="structmansession__session_html_a77d36f7d3efdab912ada2ef54a75cc65"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a77d36f7d3efdab912ada2ef54a75cc65">mansession_session::pending_event</a></div><div class="ttdeci">int pending_event</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01606">manager.c:1606</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa7ca48cb0ef2a611f2aa94aeeca70b3b"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa7ca48cb0ef2a611f2aa94aeeca70b3b">MAX_AUTH_PERM_STRING</a></div><div class="ttdeci">#define MAX_AUTH_PERM_STRING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02043">manager.c:2043</a></div></div>
<div class="ttc" id="structmansession__session_html_a25ce442b0903796547e81a75339b8a1e"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">mansession_session::waiting_thread</a></div><div class="ttdeci">pthread_t waiting_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01587">manager.c:1587</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga57cc8b67a0e4797ab1a608872d51d397"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga57cc8b67a0e4797ab1a608872d51d397">authority_to_str</a></div><div class="ttdeci">static const char * authority_to_str(int authority, struct ast_str **res)</div><div class="ttdoc">Convert authority code to a list of options. Note that the EVENT_FLAG_ALL authority will always be re...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02084">manager.c:2084</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaf5f8f8fba6bc87e2788f8075148eb3ed"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaf5f8f8fba6bc87e2788f8075148eb3ed">MANAGER_EVENT_BUF_INITSIZE</a></div><div class="ttdeci">#define MANAGER_EVENT_BUF_INITSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07110">manager.c:7110</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gae456544c8bf8d684b871f41851f8eab1"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gae456544c8bf8d684b871f41851f8eab1">append_event</a></div><div class="ttdeci">static int append_event(const char *str, int category)</div><div class="ttdoc">events are appended to a queue from where they can be dispatched to clients. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07068">manager.c:7068</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga5e4938c2cafe6e01553cb952ca1f5e45"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5e4938c2cafe6e01553cb952ca1f5e45">unref_mansession</a></div><div class="ttdeci">static struct mansession_session * unref_mansession(struct mansession_session *s)</div><div class="ttdoc">Unreference manager session object. If no more references, then go ahead and delete it...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02183">manager.c:2183</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="paths_8h_html_ab9f9346c7a41bdf3720f7b1ed02ec703"><div class="ttname"><a href="../../dd/df2/paths_8h.html#ab9f9346c7a41bdf3720f7b1ed02ec703">ast_config_AST_SYSTEM_NAME</a></div><div class="ttdeci">const char * ast_config_AST_SYSTEM_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00170">options.c:170</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga42ac3bf839aaa226509162987fcf695d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga42ac3bf839aaa226509162987fcf695d">append_channel_vars</a></div><div class="ttdeci">static void append_channel_vars(struct ast_str **pbuf, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07092">manager.c:7092</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga2e585cbfd7440aa94b0eb20ff93f1c3c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga2e585cbfd7440aa94b0eb20ff93f1c3c">manager_event_buf</a></div><div class="ttdeci">static struct ast_threadstorage manager_event_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07109">manager.c:7109</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structmansession__session_html_a24597b49933903efcf09c635513d8269"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">mansession_session::notify_lock</a></div><div class="ttdeci">ast_mutex_t notify_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01610">manager.c:1610</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gab8d1a4eb372f1c462aa6cc73468069ab"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gab8d1a4eb372f1c462aa6cc73468069ab">timestampevents</a></div><div class="ttdeci">static int timestampevents</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01472">manager.c:1472</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0044f6572f50a89049b3b5272e51b0e7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a></div><div class="ttdeci">#define AST_RWLIST_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00451">linkedlists.h:451</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga4162d86f823ac8c40424a3ae4f41d5b9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga4162d86f823ac8c40424a3ae4f41d5b9">manager_debug</a></div><div class="ttdeci">static int manager_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01478">manager.c:1478</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structmansession__session_html"><div class="ttname"><a href="../../df/d05/structmansession__session.html">mansession_session</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01581">manager.c:1581</a></div></div>
<div class="ttc" id="strings_8h_html_aadcedfc19bc7df38193262ebb8f3c991"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aadcedfc19bc7df38193262ebb8f3c991">ast_str_append_va</a></div><div class="ttdeci">int ast_str_append_va(struct ast_str **buf, ssize_t max_len, const char *fmt, va_list ap)</div><div class="ttdoc">Append to a dynamic string using a va_list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01000">strings.h:1000</a></div></div>
<div class="ttc" id="structmanager__custom__hook_html"><div class="ttname"><a href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00108">manager.h:108</a></div></div>
<div class="ttc" id="app__sms_8c_html_a8514112da88a5d13451aaf8c9b064017"><div class="ttname"><a href="../../d7/d81/app__sms_8c.html#a8514112da88a5d13451aaf8c9b064017">seq</a></div><div class="ttdeci">static volatile unsigned int seq</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d81/app__sms_8c_source.html#l00120">app_sms.c:120</a></div></div>
<div class="ttc" id="channel_8c_html_a5cb129ce1d580dbb22ec9573dcb62f7f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a></div><div class="ttdeci">static int chancount</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00093">channel.c:93</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a246405a298682d5f34f8856b68461"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a246405a298682d5f34f8856b68461">EVENT_FLAG_SHUTDOWN</a></div><div class="ttdeci">#define EVENT_FLAG_SHUTDOWN</div><div class="ttdoc">Fake event class used to end sessions at shutdown. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01511">manager.c:1511</a></div></div>
<div class="ttc" id="structmanager__hooks_html"><div class="ttname"><a href="../../d5/d26/structmanager__hooks.html">manager_hooks</a></div><div class="ttdoc">list of hooks registered </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01668">manager.c:1668</a></div></div>
<div class="ttc" id="structmanager__custom__hook_html_a563331ff9859f8ff63ed061c4c68d8cd"><div class="ttname"><a href="../../d0/d10/structmanager__custom__hook.html#a563331ff9859f8ff63ed061c4c68d8cd">manager_custom_hook::helper</a></div><div class="ttdeci">manager_hook_t helper</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00112">manager.h:112</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaf4adfeec3f6af24e2ede7e730bee32eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf4adfeec3f6af24e2ede7e730bee32eb">&#9670;&nbsp;</a></span>acl_change_stasis_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void acl_change_stasis_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l09637">9637</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d59/acl_8h.html#a1d3de55deab4206400a7df534511fcf7">ast_named_acl_change_type()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l01534">acl_change_stasis_subscribe()</a>.</p>
<div class="fragment"><div class="line"><a name="l09640"></a><span class="lineno"> 9640</span>&#160;{</div><div class="line"><a name="l09641"></a><span class="lineno"> 9641</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message) != <a class="code" href="../../d5/d59/acl_8h.html#a1d3de55deab4206400a7df534511fcf7">ast_named_acl_change_type</a>()) {</div><div class="line"><a name="l09642"></a><span class="lineno"> 9642</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l09643"></a><span class="lineno"> 9643</span>&#160;   }</div><div class="line"><a name="l09644"></a><span class="lineno"> 9644</span>&#160;</div><div class="line"><a name="l09645"></a><span class="lineno"> 9645</span>&#160;   <span class="comment">/* For now, this is going to be performed simply and just execute a forced reload. */</span></div><div class="line"><a name="l09646"></a><span class="lineno"> 9646</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Reloading manager in response to ACL change event.\n&quot;</span>);</div><div class="line"><a name="l09647"></a><span class="lineno"> 9647</span>&#160;   <a class="code" href="../../d4/d10/manager_8c.html#a3986a4fb4a5da67741b41cedefd34049">__init_manager</a>(1, 1);</div><div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="acl_8h_html_a1d3de55deab4206400a7df534511fcf7"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a1d3de55deab4206400a7df534511fcf7">ast_named_acl_change_type</a></div><div class="ttdeci">struct stasis_message_type * ast_named_acl_change_type(void)</div><div class="ttdoc">a stasis_message_type for changes against a named ACL or the set of all named ACLs ...</div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="manager_8c_html_a3986a4fb4a5da67741b41cedefd34049"><div class="ttname"><a href="../../d4/d10/manager_8c.html#a3986a4fb4a5da67741b41cedefd34049">__init_manager</a></div><div class="ttdeci">static int __init_manager(int reload, int by_external_config)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l09144">manager.c:9144</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga12e82c44fa806bdf33e7e4d92c04f707"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga12e82c44fa806bdf33e7e4d92c04f707">&#9670;&nbsp;</a></span>acl_change_stasis_subscribe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void acl_change_stasis_subscribe </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01534">1534</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l09637">acl_change_stasis_cb()</a>, <a class="el" href="../../d5/d59/acl_8h.html#a1d3de55deab4206400a7df534511fcf7">ast_named_acl_change_type()</a>, <a class="el" href="../../d8/d30/main_2security__events_8c_source.html#l00380">ast_security_topic()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01025">stasis_subscription_accept_message_type()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00300">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01079">stasis_subscription_set_filter()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;{</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d72/group__Group__AMI.html#ga322eb26fcd507fe69297e038d584db02">acl_change_sub</a>) {</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga322eb26fcd507fe69297e038d584db02">acl_change_sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../d0/d29/include_2asterisk_2security__events_8h.html#a0db46f92449a8f63b954d776ebead63a">ast_security_topic</a>(),</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gaf4adfeec3f6af24e2ede7e730bee32eb">acl_change_stasis_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#ga322eb26fcd507fe69297e038d584db02">acl_change_sub</a>, <a class="code" href="../../d5/d59/acl_8h.html#a1d3de55deab4206400a7df534511fcf7">ast_named_acl_change_type</a>());</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#ga322eb26fcd507fe69297e038d584db02">acl_change_sub</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;}</div><div class="ttc" id="include_2asterisk_2security__events_8h_html_a0db46f92449a8f63b954d776ebead63a"><div class="ttname"><a href="../../d0/d29/include_2asterisk_2security__events_8h.html#a0db46f92449a8f63b954d776ebead63a">ast_security_topic</a></div><div class="ttdeci">struct stasis_topic * ast_security_topic(void)</div><div class="ttdoc">A stasis_topic which publishes messages for security related issues. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d30/main_2security__events_8c_source.html#l00380">main/security_events.c:380</a></div></div>
<div class="ttc" id="stasis_8h_html_a52b5393bef89d7781c0d039d6489de23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a></div><div class="ttdeci">int stasis_subscription_set_filter(struct stasis_subscription *subscription, enum stasis_subscription_message_filter filter)</div><div class="ttdoc">Set the message type filtering level on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01079">stasis.c:1079</a></div></div>
<div class="ttc" id="acl_8h_html_a1d3de55deab4206400a7df534511fcf7"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a1d3de55deab4206400a7df534511fcf7">ast_named_acl_change_type</a></div><div class="ttdeci">struct stasis_message_type * ast_named_acl_change_type(void)</div><div class="ttdoc">a stasis_message_type for changes against a named ACL or the set of all named ACLs ...</div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga322eb26fcd507fe69297e038d584db02"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga322eb26fcd507fe69297e038d584db02">acl_change_sub</a></div><div class="ttdeci">static struct stasis_subscription * acl_change_sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01487">manager.c:1487</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="stasis_8h_html_a4f248ee5f4791f05d0af8768aaab282b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a></div><div class="ttdeci">int stasis_subscription_accept_message_type(struct stasis_subscription *subscription, const struct stasis_message_type *type)</div><div class="ttdoc">Indicate to a subscription that we are interested in a message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01025">stasis.c:1025</a></div></div>
<div class="ttc" id="stasis_8h_html_a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00300">stasis.h:300</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaf4adfeec3f6af24e2ede7e730bee32eb"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaf4adfeec3f6af24e2ede7e730bee32eb">acl_change_stasis_cb</a></div><div class="ttdeci">static void acl_change_stasis_cb(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l09637">manager.c:9637</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga7c363bd89e1d8a7c36513fa83f3d08af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7c363bd89e1d8a7c36513fa83f3d08af">&#9670;&nbsp;</a></span>acl_change_stasis_unsubscribe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void acl_change_stasis_unsubscribe </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01544">1544</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/df4/stasis_8c_source.html#l01136">stasis_unsubscribe_and_join()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l08956">manager_shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;{</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga322eb26fcd507fe69297e038d584db02">acl_change_sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#ga322eb26fcd507fe69297e038d584db02">acl_change_sub</a>);</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga322eb26fcd507fe69297e038d584db02"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga322eb26fcd507fe69297e038d584db02">acl_change_sub</a></div><div class="ttdeci">static struct stasis_subscription * acl_change_sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01487">manager.c:1487</a></div></div>
<div class="ttc" id="stasis_8h_html_a221d05010106dcde0cc2e2b43c1a8b67"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe_and_join(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription, blocking until the last message is processed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01136">stasis.c:1136</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8fdf554febcd2f092aca41a377e4a60b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8fdf554febcd2f092aca41a377e4a60b">&#9670;&nbsp;</a></span>action_aocmessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_aocmessage </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l05518">5518</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/db3/aoc_8h_source.html#l00180">ast_aoc_unit_entry::amount</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05493">aocmessage_get_unit_entry()</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l00977">ast_aoc_add_unit_entry()</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00057">AST_AOC_BILLING_CALL_DEFLECTION</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00055">AST_AOC_BILLING_CALL_FWD_BUSY</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00056">AST_AOC_BILLING_CALL_FWD_NO_REPLY</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00054">AST_AOC_BILLING_CALL_FWD_UNCONDITIONAL</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00058">AST_AOC_BILLING_CALL_TRANSFER</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00053">AST_AOC_BILLING_CREDIT_CARD</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00050">AST_AOC_BILLING_NA</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00051">AST_AOC_BILLING_NORMAL</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00052">AST_AOC_BILLING_REVERSE_CHARGE</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00072">AST_AOC_CHARGE_CURRENCY</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00071">AST_AOC_CHARGE_FREE</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00070">AST_AOC_CHARGE_NA</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00073">AST_AOC_CHARGE_UNIT</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l00276">ast_aoc_create()</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00065">AST_AOC_D</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l00307">ast_aoc_destroy_decoded()</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l00313">ast_aoc_destroy_encoded()</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00066">AST_AOC_E</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l00650">ast_aoc_encode()</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00040">AST_AOC_MULT_HUNDRED</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00038">AST_AOC_MULT_ONE</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00036">AST_AOC_MULT_ONEHUNDREDTH</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00037">AST_AOC_MULT_ONETENTH</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00035">AST_AOC_MULT_ONETHOUSANDTH</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00039">AST_AOC_MULT_TEN</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00041">AST_AOC_MULT_THOUSAND</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l01040">ast_aoc_set_association_id()</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l01056">ast_aoc_set_association_number()</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l01024">ast_aoc_set_billing_id()</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l00919">ast_aoc_set_currency_info()</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l00907">ast_aoc_set_total_type()</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00084">AST_AOC_SUBTOTAL</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00083">AST_AOC_TOTAL</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01434">ast_channel_get_by_name_prefix()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00305">AST_CONTROL_AOC</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04698">ast_indicate_data()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00182">ast_aoc_unit_entry::type</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00179">ast_aoc_unit_entry::valid_amount</a>, and <a class="el" href="../../d6/db3/aoc_8h_source.html#l00181">ast_aoc_unit_entry::valid_type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;{</div><div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *pchannel = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ChannelPrefix&quot;</span>);</div><div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *msgtype = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;MsgType&quot;</span>);</div><div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *chargetype = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ChargeType&quot;</span>);</div><div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *currencyname = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;CurrencyName&quot;</span>);</div><div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *currencyamount = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;CurrencyAmount&quot;</span>);</div><div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *mult = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;CurrencyMultiplier&quot;</span>);</div><div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *totaltype = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;TotalType&quot;</span>);</div><div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *aocbillingid = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;AOCBillingId&quot;</span>);</div><div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *association_id= <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ChargingAssociationId&quot;</span>);</div><div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *association_num = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ChargingAssociationNumber&quot;</span>);</div><div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *association_plan = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ChargingAssociationPlan&quot;</span>);</div><div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;</div><div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/db3/aoc_8h.html#aa7dc1e0987972e9eb92627a1190eb548">ast_aoc_type</a> _msgtype;</div><div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/db3/aoc_8h.html#a2c726e954f606dc71b37ba93be286ff9">ast_aoc_charge_type</a> _chargetype;</div><div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089">ast_aoc_currency_multiplier</a> _mult = <a class="code" href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089ab55dc209b59be84c7162d3128565ab36">AST_AOC_MULT_ONE</a>;</div><div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/db3/aoc_8h.html#aed3fe8e8d708e8aff42a2ad205813cb7">ast_aoc_total_type</a> _totaltype = <a class="code" href="../../d6/db3/aoc_8h.html#aed3fe8e8d708e8aff42a2ad205813cb7a437decc9f64054294b48742e48089619">AST_AOC_TOTAL</a>;</div><div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1d">ast_aoc_billing_id</a> _billingid = <a class="code" href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1daf2aa1a3d8a87f17ac604cead1964f52f">AST_AOC_BILLING_NA</a>;</div><div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _currencyamount = 0;</div><div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;   <span class="keywordtype">int</span> _association_id = 0;</div><div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _association_plan = 0;</div><div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;</div><div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dca/structast__aoc__decoded.html">ast_aoc_decoded</a> *decoded = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d72/structast__aoc__encoded.html">ast_aoc_encoded</a> *encoded = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;   <span class="keywordtype">size_t</span> encoded_size = 0;</div><div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;</div><div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(channel) &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(pchannel)) {</div><div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Channel and PartialChannel are not specified. Specify at least one of these.&quot;</span>);</div><div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;      <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;   }</div><div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;</div><div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;   <span class="keywordflow">if</span> (!(chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(channel)) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(pchannel)) {</div><div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#a71d89dbc5107b1f851dcbf1686a0d9d9">ast_channel_get_by_name_prefix</a>(pchannel, strlen(pchannel));</div><div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;   }</div><div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;</div><div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such channel&quot;</span>);</div><div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;      <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;   }</div><div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;</div><div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(msgtype) || (strcasecmp(msgtype, <span class="stringliteral">&quot;d&quot;</span>) &amp;&amp; strcasecmp(msgtype, <span class="stringliteral">&quot;e&quot;</span>))) {</div><div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid MsgType&quot;</span>);</div><div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;      <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;   }</div><div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;</div><div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(chargetype)) {</div><div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;ChargeType not specified&quot;</span>);</div><div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;      <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;   }</div><div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;</div><div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;   _msgtype = strcasecmp(msgtype, <span class="stringliteral">&quot;d&quot;</span>) ? <a class="code" href="../../d6/db3/aoc_8h.html#aa7dc1e0987972e9eb92627a1190eb548a98adf1ef32c4d9b775cc595795ac4693">AST_AOC_E</a> : <a class="code" href="../../d6/db3/aoc_8h.html#aa7dc1e0987972e9eb92627a1190eb548a463d1c225066e20d4cc56abee5a5b239">AST_AOC_D</a>;</div><div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;</div><div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(chargetype, <span class="stringliteral">&quot;NA&quot;</span>)) {</div><div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;      _chargetype = <a class="code" href="../../d6/db3/aoc_8h.html#a2c726e954f606dc71b37ba93be286ff9ad60d324867080b1a1ca3b13db29b27c2">AST_AOC_CHARGE_NA</a>;</div><div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(chargetype, <span class="stringliteral">&quot;Free&quot;</span>)) {</div><div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;      _chargetype = <a class="code" href="../../d6/db3/aoc_8h.html#a2c726e954f606dc71b37ba93be286ff9a44da551e5cfa1d51b072685591df0800">AST_AOC_CHARGE_FREE</a>;</div><div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(chargetype, <span class="stringliteral">&quot;Currency&quot;</span>)) {</div><div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;      _chargetype = <a class="code" href="../../d6/db3/aoc_8h.html#a2c726e954f606dc71b37ba93be286ff9a38cfbbe1a40256021b03e1599b1a23ed">AST_AOC_CHARGE_CURRENCY</a>;</div><div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(chargetype, <span class="stringliteral">&quot;Unit&quot;</span>)) {</div><div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;      _chargetype = <a class="code" href="../../d6/db3/aoc_8h.html#a2c726e954f606dc71b37ba93be286ff9a5816131a38e568febf50d316c850c44b">AST_AOC_CHARGE_UNIT</a>;</div><div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid ChargeType&quot;</span>);</div><div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;      <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;   }</div><div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;</div><div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;   <span class="keywordflow">if</span> (_chargetype == <a class="code" href="../../d6/db3/aoc_8h.html#a2c726e954f606dc71b37ba93be286ff9a38cfbbe1a40256021b03e1599b1a23ed">AST_AOC_CHARGE_CURRENCY</a>) {</div><div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;</div><div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(currencyamount) || (sscanf(currencyamount, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;_currencyamount) != 1)) {</div><div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid CurrencyAmount, CurrencyAmount is a required when ChargeType is Currency&quot;</span>);</div><div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;         <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;      }</div><div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;</div><div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(mult)) {</div><div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;ChargeMultiplier unspecified, ChargeMultiplier is required when ChargeType is Currency.&quot;</span>);</div><div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;         <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(mult, <span class="stringliteral">&quot;onethousandth&quot;</span>)) {</div><div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;         _mult = <a class="code" href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089a865002098f4bc4e8e711bd3d2450f6bf">AST_AOC_MULT_ONETHOUSANDTH</a>;</div><div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(mult, <span class="stringliteral">&quot;onehundredth&quot;</span>)) {</div><div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;         _mult = <a class="code" href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089a218074f0220f2224fa4c4cab5281834a">AST_AOC_MULT_ONEHUNDREDTH</a>;</div><div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(mult, <span class="stringliteral">&quot;onetenth&quot;</span>)) {</div><div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;         _mult = <a class="code" href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089a6060df3e95e44802a372af9f0eb5ebaf">AST_AOC_MULT_ONETENTH</a>;</div><div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(mult, <span class="stringliteral">&quot;one&quot;</span>)) {</div><div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;         _mult = <a class="code" href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089ab55dc209b59be84c7162d3128565ab36">AST_AOC_MULT_ONE</a>;</div><div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(mult, <span class="stringliteral">&quot;ten&quot;</span>)) {</div><div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;         _mult = <a class="code" href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089a20055187dd0b3834fe5cc313e1f08965">AST_AOC_MULT_TEN</a>;</div><div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(mult, <span class="stringliteral">&quot;hundred&quot;</span>)) {</div><div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;         _mult = <a class="code" href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089a27a0c84a4d31cb0060200d36100c1c75">AST_AOC_MULT_HUNDRED</a>;</div><div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(mult, <span class="stringliteral">&quot;thousand&quot;</span>)) {</div><div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;         _mult = <a class="code" href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089ab00c5e861fc1c84070bb4af0ae15690b">AST_AOC_MULT_THOUSAND</a>;</div><div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid ChargeMultiplier&quot;</span>);</div><div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;         <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;      }</div><div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;   }</div><div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;</div><div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;   <span class="comment">/* create decoded object and start setting values */</span></div><div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;   <span class="keywordflow">if</span> (!(decoded = <a class="code" href="../../d6/db3/aoc_8h.html#ada9b84ac8130231cee87ba4d33a5dda0">ast_aoc_create</a>(_msgtype, _chargetype, 0))) {</div><div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Message Creation Failed&quot;</span>);</div><div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;         <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;   }</div><div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;</div><div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;   <span class="keywordflow">if</span> (_msgtype == <a class="code" href="../../d6/db3/aoc_8h.html#aa7dc1e0987972e9eb92627a1190eb548a463d1c225066e20d4cc56abee5a5b239">AST_AOC_D</a>) {</div><div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(totaltype) &amp;&amp; !strcasecmp(totaltype, <span class="stringliteral">&quot;subtotal&quot;</span>)) {</div><div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;         _totaltype = <a class="code" href="../../d6/db3/aoc_8h.html#aed3fe8e8d708e8aff42a2ad205813cb7aff4d08a18d17f2ffe60dd21a316ae677">AST_AOC_SUBTOTAL</a>;</div><div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;      }</div><div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;</div><div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(aocbillingid)) {</div><div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;         <span class="comment">/* ignore this is optional */</span></div><div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(aocbillingid, <span class="stringliteral">&quot;Normal&quot;</span>)) {</div><div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;         _billingid = <a class="code" href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da83b02bda7920334b1d7cb85c53be1d50">AST_AOC_BILLING_NORMAL</a>;</div><div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(aocbillingid, <span class="stringliteral">&quot;ReverseCharge&quot;</span>)) {</div><div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;         _billingid = <a class="code" href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1dad1092f5f7da0428ebd4c6ec4ed78d751">AST_AOC_BILLING_REVERSE_CHARGE</a>;</div><div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(aocbillingid, <span class="stringliteral">&quot;CreditCard&quot;</span>)) {</div><div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;         _billingid = <a class="code" href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da91a7d97d8c344b40e9aaadc39c4d9269">AST_AOC_BILLING_CREDIT_CARD</a>;</div><div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid AOC-D AOCBillingId&quot;</span>);</div><div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;         <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;      }</div><div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(aocbillingid)) {</div><div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;         <span class="comment">/* ignore this is optional */</span></div><div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(aocbillingid, <span class="stringliteral">&quot;Normal&quot;</span>)) {</div><div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;         _billingid = <a class="code" href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da83b02bda7920334b1d7cb85c53be1d50">AST_AOC_BILLING_NORMAL</a>;</div><div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(aocbillingid, <span class="stringliteral">&quot;ReverseCharge&quot;</span>)) {</div><div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;         _billingid = <a class="code" href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1dad1092f5f7da0428ebd4c6ec4ed78d751">AST_AOC_BILLING_REVERSE_CHARGE</a>;</div><div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(aocbillingid, <span class="stringliteral">&quot;CreditCard&quot;</span>)) {</div><div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;         _billingid = <a class="code" href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da91a7d97d8c344b40e9aaadc39c4d9269">AST_AOC_BILLING_CREDIT_CARD</a>;</div><div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(aocbillingid, <span class="stringliteral">&quot;CallFwdUnconditional&quot;</span>)) {</div><div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;         _billingid = <a class="code" href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1daceee6b8982426596fe14c3948aa29987">AST_AOC_BILLING_CALL_FWD_UNCONDITIONAL</a>;</div><div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(aocbillingid, <span class="stringliteral">&quot;CallFwdBusy&quot;</span>)) {</div><div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;         _billingid = <a class="code" href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da204aa062b4281ee428f0709259f73116">AST_AOC_BILLING_CALL_FWD_BUSY</a>;</div><div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(aocbillingid, <span class="stringliteral">&quot;CallFwdNoReply&quot;</span>)) {</div><div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;         _billingid = <a class="code" href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da5c049c80395b1353839451a4f6d790e3">AST_AOC_BILLING_CALL_FWD_NO_REPLY</a>;</div><div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(aocbillingid, <span class="stringliteral">&quot;CallDeflection&quot;</span>)) {</div><div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;         _billingid = <a class="code" href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da848e7e562e4048e4b0ea85d176afa76c">AST_AOC_BILLING_CALL_DEFLECTION</a>;</div><div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(aocbillingid, <span class="stringliteral">&quot;CallTransfer&quot;</span>)) {</div><div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;         _billingid = <a class="code" href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da9f62d8ce9119202ffb00eb74d5db7412">AST_AOC_BILLING_CALL_TRANSFER</a>;</div><div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid AOC-E AOCBillingId&quot;</span>);</div><div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;         <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;      }</div><div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;</div><div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(association_id) &amp;&amp; (sscanf(association_id, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;_association_id) != 1)) {</div><div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid ChargingAssociationId&quot;</span>);</div><div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;         <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;      }</div><div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(association_plan) &amp;&amp; (sscanf(association_plan, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;_association_plan) != 1)) {</div><div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid ChargingAssociationPlan&quot;</span>);</div><div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;         <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;      }</div><div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;</div><div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;      <span class="keywordflow">if</span> (_association_id) {</div><div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;         <a class="code" href="../../d6/db3/aoc_8h.html#a8f4901f528a0a8c757a12e94178606e6">ast_aoc_set_association_id</a>(decoded, _association_id);</div><div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(association_num)) {</div><div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;         <a class="code" href="../../d6/db3/aoc_8h.html#a655f2e3693ef15ab3bdfc623807278a7">ast_aoc_set_association_number</a>(decoded, association_num, _association_plan);</div><div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;      }</div><div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;   }</div><div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;</div><div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;   <span class="keywordflow">if</span> (_chargetype == <a class="code" href="../../d6/db3/aoc_8h.html#a2c726e954f606dc71b37ba93be286ff9a38cfbbe1a40256021b03e1599b1a23ed">AST_AOC_CHARGE_CURRENCY</a>) {</div><div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;      <a class="code" href="../../d6/db3/aoc_8h.html#a84cc9357bb1acbc2b24d7e80780e3b9d">ast_aoc_set_currency_info</a>(decoded, _currencyamount, _mult, <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(currencyname) ? <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : currencyname);</div><div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_chargetype == <a class="code" href="../../d6/db3/aoc_8h.html#a2c726e954f606dc71b37ba93be286ff9a5816131a38e568febf50d316c850c44b">AST_AOC_CHARGE_UNIT</a>) {</div><div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d18/structast__aoc__unit__entry.html">ast_aoc_unit_entry</a> <a class="code" href="../../d3/d96/structentry.html">entry</a>;</div><div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;      <span class="keywordtype">int</span> i;</div><div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;</div><div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;      <span class="comment">/* multiple unit entries are possible, lets get them all */</span></div><div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; 32; i++) {</div><div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#gaecb636956ea985949db409bb9d6a6d00">aocmessage_get_unit_entry</a>(m, &amp;<a class="code" href="../../d3/d96/structentry.html">entry</a>, i)) {</div><div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;            <span class="keywordflow">break</span>; <span class="comment">/* that&#39;s the end then */</span></div><div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;         }</div><div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;</div><div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;         <a class="code" href="../../d6/db3/aoc_8h.html#a6e8ab2944e2d6d1f783b3ebcd7b3c272">ast_aoc_add_unit_entry</a>(decoded, <a class="code" href="../../d3/d96/structentry.html">entry</a>.valid_amount, <a class="code" href="../../d3/d96/structentry.html">entry</a>.amount, <a class="code" href="../../d3/d96/structentry.html">entry</a>.valid_type, <a class="code" href="../../d3/d96/structentry.html">entry</a>.type);</div><div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;      }</div><div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;</div><div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;      <span class="comment">/* at least one unit entry is required */</span></div><div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;      <span class="keywordflow">if</span> (!i) {</div><div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid UnitAmount(0), At least one valid unit entry is required when ChargeType is set to Unit&quot;</span>);</div><div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;         <span class="keywordflow">goto</span> aocmessage_cleanup;</div><div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;      }</div><div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;</div><div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;   }</div><div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;</div><div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;   <a class="code" href="../../d6/db3/aoc_8h.html#a82fcf407f11289b3675f0880f2245bfe">ast_aoc_set_billing_id</a>(decoded, _billingid);</div><div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;   <a class="code" href="../../d6/db3/aoc_8h.html#a9dc12343996e18f696da3dcde18fabcb">ast_aoc_set_total_type</a>(decoded, _totaltype);</div><div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;</div><div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;</div><div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;   <span class="keywordflow">if</span> ((encoded = <a class="code" href="../../d6/db3/aoc_8h.html#abbf1344a7eae88ea2cef85c1b0b6c24d">ast_aoc_encode</a>(decoded, &amp;encoded_size, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) &amp;&amp; !<a class="code" href="../../d5/d7b/channel_8h.html#aa8c3522af1bc639cbd5b38f5fdf171fa">ast_indicate_data</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af10845d12981bce4e141a5b0ed431494">AST_CONTROL_AOC</a>, encoded, encoded_size)) {</div><div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;AOC Message successfully queued on channel&quot;</span>);</div><div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Error encoding AOC message, could not queue onto channel&quot;</span>);</div><div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;   }</div><div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;</div><div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;aocmessage_cleanup:</div><div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;</div><div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;   <a class="code" href="../../d6/db3/aoc_8h.html#a33b761090d3debbfd4cdb0c800a13bb2">ast_aoc_destroy_decoded</a>(decoded);</div><div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;   <a class="code" href="../../d6/db3/aoc_8h.html#a8f66f98f015246c294b10dc2c9350612">ast_aoc_destroy_encoded</a>(encoded);</div><div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;</div><div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;   }</div><div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;}</div><div class="ttc" id="aoc_8h_html_a2c726e954f606dc71b37ba93be286ff9a44da551e5cfa1d51b072685591df0800"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a2c726e954f606dc71b37ba93be286ff9a44da551e5cfa1d51b072685591df0800">AST_AOC_CHARGE_FREE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00071">aoc.h:71</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="aoc_8h_html_a49977b1a5a71ee19edfc3f77f448e089ab00c5e861fc1c84070bb4af0ae15690b"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089ab00c5e861fc1c84070bb4af0ae15690b">AST_AOC_MULT_THOUSAND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00041">aoc.h:41</a></div></div>
<div class="ttc" id="aoc_8h_html_a2c726e954f606dc71b37ba93be286ff9a5816131a38e568febf50d316c850c44b"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a2c726e954f606dc71b37ba93be286ff9a5816131a38e568febf50d316c850c44b">AST_AOC_CHARGE_UNIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00073">aoc.h:73</a></div></div>
<div class="ttc" id="aoc_8h_html_a6e8ab2944e2d6d1f783b3ebcd7b3c272"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a6e8ab2944e2d6d1f783b3ebcd7b3c272">ast_aoc_add_unit_entry</a></div><div class="ttdeci">int ast_aoc_add_unit_entry(struct ast_aoc_decoded *decoded, const unsigned int amount_is_present, const unsigned int amount, const unsigned int type_is_present, const unsigned int type)</div><div class="ttdoc">Adds a unit entry into the list of units. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/aoc_8c_source.html#l00977">aoc.c:977</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="aoc_8h_html_a7558fd4fc6c76430875d931bd16b7b1da848e7e562e4048e4b0ea85d176afa76c"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da848e7e562e4048e4b0ea85d176afa76c">AST_AOC_BILLING_CALL_DEFLECTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00057">aoc.h:57</a></div></div>
<div class="ttc" id="aoc_8h_html_a2c726e954f606dc71b37ba93be286ff9ad60d324867080b1a1ca3b13db29b27c2"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a2c726e954f606dc71b37ba93be286ff9ad60d324867080b1a1ca3b13db29b27c2">AST_AOC_CHARGE_NA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00070">aoc.h:70</a></div></div>
<div class="ttc" id="aoc_8h_html_a33b761090d3debbfd4cdb0c800a13bb2"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a33b761090d3debbfd4cdb0c800a13bb2">ast_aoc_destroy_decoded</a></div><div class="ttdeci">void * ast_aoc_destroy_decoded(struct ast_aoc_decoded *decoded)</div><div class="ttdoc">free an ast_aoc_decoded object </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/aoc_8c_source.html#l00307">aoc.c:307</a></div></div>
<div class="ttc" id="channel_8h_html_aa8c3522af1bc639cbd5b38f5fdf171fa"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8c3522af1bc639cbd5b38f5fdf171fa">ast_indicate_data</a></div><div class="ttdeci">int ast_indicate_data(struct ast_channel *chan, int condition, const void *data, size_t datalen)</div><div class="ttdoc">Indicates condition of channel, with payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04698">channel.c:4698</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="aoc_8h_html_a49977b1a5a71ee19edfc3f77f448e089a27a0c84a4d31cb0060200d36100c1c75"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089a27a0c84a4d31cb0060200d36100c1c75">AST_AOC_MULT_HUNDRED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00040">aoc.h:40</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="aoc_8h_html_a49977b1a5a71ee19edfc3f77f448e089"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089">ast_aoc_currency_multiplier</a></div><div class="ttdeci">ast_aoc_currency_multiplier</div><div class="ttdoc">Defines the currency multiplier for an aoc message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00034">aoc.h:34</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="aoc_8h_html_aed3fe8e8d708e8aff42a2ad205813cb7"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#aed3fe8e8d708e8aff42a2ad205813cb7">ast_aoc_total_type</a></div><div class="ttdeci">ast_aoc_total_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00082">aoc.h:82</a></div></div>
<div class="ttc" id="aoc_8h_html_a49977b1a5a71ee19edfc3f77f448e089a865002098f4bc4e8e711bd3d2450f6bf"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089a865002098f4bc4e8e711bd3d2450f6bf">AST_AOC_MULT_ONETHOUSANDTH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00035">aoc.h:35</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaecb636956ea985949db409bb9d6a6d00"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaecb636956ea985949db409bb9d6a6d00">aocmessage_get_unit_entry</a></div><div class="ttdeci">static int aocmessage_get_unit_entry(const struct message *m, struct ast_aoc_unit_entry *entry, unsigned int entry_num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05493">manager.c:5493</a></div></div>
<div class="ttc" id="aoc_8h_html_a49977b1a5a71ee19edfc3f77f448e089ab55dc209b59be84c7162d3128565ab36"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089ab55dc209b59be84c7162d3128565ab36">AST_AOC_MULT_ONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00038">aoc.h:38</a></div></div>
<div class="ttc" id="channel_8h_html_a71d89dbc5107b1f851dcbf1686a0d9d9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a71d89dbc5107b1f851dcbf1686a0d9d9">ast_channel_get_by_name_prefix</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name_prefix(const char *name, size_t name_len)</div><div class="ttdoc">Find a channel by a name prefix. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01434">channel.c:1434</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="aoc_8h_html_a655f2e3693ef15ab3bdfc623807278a7"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a655f2e3693ef15ab3bdfc623807278a7">ast_aoc_set_association_number</a></div><div class="ttdeci">int ast_aoc_set_association_number(struct ast_aoc_decoded *decoded, const char *num, uint8_t plan)</div><div class="ttdoc">set the charging accociation number for an AOC-E message </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/aoc_8c_source.html#l01056">aoc.c:1056</a></div></div>
<div class="ttc" id="aoc_8h_html_a7558fd4fc6c76430875d931bd16b7b1da83b02bda7920334b1d7cb85c53be1d50"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da83b02bda7920334b1d7cb85c53be1d50">AST_AOC_BILLING_NORMAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00051">aoc.h:51</a></div></div>
<div class="ttc" id="aoc_8h_html_abbf1344a7eae88ea2cef85c1b0b6c24d"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#abbf1344a7eae88ea2cef85c1b0b6c24d">ast_aoc_encode</a></div><div class="ttdeci">struct ast_aoc_encoded * ast_aoc_encode(struct ast_aoc_decoded *decoded, size_t *out_size, struct ast_channel *chan)</div><div class="ttdoc">encodes a decoded aoc structure so it can be passed on the wire </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/aoc_8c_source.html#l00650">aoc.c:650</a></div></div>
<div class="ttc" id="aoc_8h_html_a7558fd4fc6c76430875d931bd16b7b1dad1092f5f7da0428ebd4c6ec4ed78d751"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1dad1092f5f7da0428ebd4c6ec4ed78d751">AST_AOC_BILLING_REVERSE_CHARGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00052">aoc.h:52</a></div></div>
<div class="ttc" id="aoc_8h_html_a7558fd4fc6c76430875d931bd16b7b1da5c049c80395b1353839451a4f6d790e3"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da5c049c80395b1353839451a4f6d790e3">AST_AOC_BILLING_CALL_FWD_NO_REPLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00056">aoc.h:56</a></div></div>
<div class="ttc" id="aoc_8h_html_a2c726e954f606dc71b37ba93be286ff9"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a2c726e954f606dc71b37ba93be286ff9">ast_aoc_charge_type</a></div><div class="ttdeci">ast_aoc_charge_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00069">aoc.h:69</a></div></div>
<div class="ttc" id="structast__aoc__encoded_html"><div class="ttname"><a href="../../d8/d72/structast__aoc__encoded.html">ast_aoc_encoded</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/aoc_8c_source.html#l00197">aoc.c:197</a></div></div>
<div class="ttc" id="aoc_8h_html_a7558fd4fc6c76430875d931bd16b7b1da91a7d97d8c344b40e9aaadc39c4d9269"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da91a7d97d8c344b40e9aaadc39c4d9269">AST_AOC_BILLING_CREDIT_CARD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00053">aoc.h:53</a></div></div>
<div class="ttc" id="aoc_8h_html_a7558fd4fc6c76430875d931bd16b7b1daf2aa1a3d8a87f17ac604cead1964f52f"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1daf2aa1a3d8a87f17ac604cead1964f52f">AST_AOC_BILLING_NA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00050">aoc.h:50</a></div></div>
<div class="ttc" id="aoc_8h_html_a82fcf407f11289b3675f0880f2245bfe"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a82fcf407f11289b3675f0880f2245bfe">ast_aoc_set_billing_id</a></div><div class="ttdeci">int ast_aoc_set_billing_id(struct ast_aoc_decoded *decoded, const enum ast_aoc_billing_id id)</div><div class="ttdoc">set the billing id for a AOC-D or AST_AOC_E message </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/aoc_8c_source.html#l01024">aoc.c:1024</a></div></div>
<div class="ttc" id="aoc_8h_html_a49977b1a5a71ee19edfc3f77f448e089a6060df3e95e44802a372af9f0eb5ebaf"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089a6060df3e95e44802a372af9f0eb5ebaf">AST_AOC_MULT_ONETENTH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00037">aoc.h:37</a></div></div>
<div class="ttc" id="aoc_8h_html_aa7dc1e0987972e9eb92627a1190eb548"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#aa7dc1e0987972e9eb92627a1190eb548">ast_aoc_type</a></div><div class="ttdeci">ast_aoc_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00062">aoc.h:62</a></div></div>
<div class="ttc" id="aoc_8h_html_a49977b1a5a71ee19edfc3f77f448e089a20055187dd0b3834fe5cc313e1f08965"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089a20055187dd0b3834fe5cc313e1f08965">AST_AOC_MULT_TEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00039">aoc.h:39</a></div></div>
<div class="ttc" id="aoc_8h_html_a7558fd4fc6c76430875d931bd16b7b1da204aa062b4281ee428f0709259f73116"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da204aa062b4281ee428f0709259f73116">AST_AOC_BILLING_CALL_FWD_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00055">aoc.h:55</a></div></div>
<div class="ttc" id="aoc_8h_html_a9dc12343996e18f696da3dcde18fabcb"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a9dc12343996e18f696da3dcde18fabcb">ast_aoc_set_total_type</a></div><div class="ttdeci">int ast_aoc_set_total_type(struct ast_aoc_decoded *decoded, const enum ast_aoc_total_type type)</div><div class="ttdoc">Sets the type of total for a AOC-D message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/aoc_8c_source.html#l00907">aoc.c:907</a></div></div>
<div class="ttc" id="aoc_8h_html_a8f66f98f015246c294b10dc2c9350612"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a8f66f98f015246c294b10dc2c9350612">ast_aoc_destroy_encoded</a></div><div class="ttdeci">void * ast_aoc_destroy_encoded(struct ast_aoc_encoded *encoded)</div><div class="ttdoc">free an ast_aoc_encoded object </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/aoc_8c_source.html#l00313">aoc.c:313</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af10845d12981bce4e141a5b0ed431494"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af10845d12981bce4e141a5b0ed431494">AST_CONTROL_AOC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00305">include/asterisk/frame.h:305</a></div></div>
<div class="ttc" id="aoc_8h_html_a49977b1a5a71ee19edfc3f77f448e089a218074f0220f2224fa4c4cab5281834a"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a49977b1a5a71ee19edfc3f77f448e089a218074f0220f2224fa4c4cab5281834a">AST_AOC_MULT_ONEHUNDREDTH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00036">aoc.h:36</a></div></div>
<div class="ttc" id="aoc_8h_html_ada9b84ac8130231cee87ba4d33a5dda0"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#ada9b84ac8130231cee87ba4d33a5dda0">ast_aoc_create</a></div><div class="ttdeci">struct ast_aoc_decoded * ast_aoc_create(const enum ast_aoc_type msg_type, const enum ast_aoc_charge_type charge_type, const enum ast_aoc_request requests)</div><div class="ttdoc">creates a ast_aoc_decode object of a specific message type </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/aoc_8c_source.html#l00276">aoc.c:276</a></div></div>
<div class="ttc" id="aoc_8h_html_aed3fe8e8d708e8aff42a2ad205813cb7a437decc9f64054294b48742e48089619"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#aed3fe8e8d708e8aff42a2ad205813cb7a437decc9f64054294b48742e48089619">AST_AOC_TOTAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00083">aoc.h:83</a></div></div>
<div class="ttc" id="aoc_8h_html_a7558fd4fc6c76430875d931bd16b7b1daceee6b8982426596fe14c3948aa29987"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1daceee6b8982426596fe14c3948aa29987">AST_AOC_BILLING_CALL_FWD_UNCONDITIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00054">aoc.h:54</a></div></div>
<div class="ttc" id="aoc_8h_html_a2c726e954f606dc71b37ba93be286ff9a38cfbbe1a40256021b03e1599b1a23ed"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a2c726e954f606dc71b37ba93be286ff9a38cfbbe1a40256021b03e1599b1a23ed">AST_AOC_CHARGE_CURRENCY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00072">aoc.h:72</a></div></div>
<div class="ttc" id="structast__aoc__decoded_html"><div class="ttname"><a href="../../d9/dca/structast__aoc__decoded.html">ast_aoc_decoded</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/aoc_8c_source.html#l00205">aoc.c:205</a></div></div>
<div class="ttc" id="aoc_8h_html_a7558fd4fc6c76430875d931bd16b7b1da9f62d8ce9119202ffb00eb74d5db7412"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1da9f62d8ce9119202ffb00eb74d5db7412">AST_AOC_BILLING_CALL_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00058">aoc.h:58</a></div></div>
<div class="ttc" id="aoc_8h_html_a7558fd4fc6c76430875d931bd16b7b1d"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a7558fd4fc6c76430875d931bd16b7b1d">ast_aoc_billing_id</a></div><div class="ttdeci">ast_aoc_billing_id</div><div class="ttdoc">Defines the billing id options for an aoc message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00049">aoc.h:49</a></div></div>
<div class="ttc" id="aoc_8h_html_aed3fe8e8d708e8aff42a2ad205813cb7aff4d08a18d17f2ffe60dd21a316ae677"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#aed3fe8e8d708e8aff42a2ad205813cb7aff4d08a18d17f2ffe60dd21a316ae677">AST_AOC_SUBTOTAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00084">aoc.h:84</a></div></div>
<div class="ttc" id="aoc_8h_html_aa7dc1e0987972e9eb92627a1190eb548a98adf1ef32c4d9b775cc595795ac4693"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#aa7dc1e0987972e9eb92627a1190eb548a98adf1ef32c4d9b775cc595795ac4693">AST_AOC_E</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00066">aoc.h:66</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="aoc_8h_html_a8f4901f528a0a8c757a12e94178606e6"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a8f4901f528a0a8c757a12e94178606e6">ast_aoc_set_association_id</a></div><div class="ttdeci">int ast_aoc_set_association_id(struct ast_aoc_decoded *decoded, const int id)</div><div class="ttdoc">set the charging association id for an AST_AOC_E message </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/aoc_8c_source.html#l01040">aoc.c:1040</a></div></div>
<div class="ttc" id="structast__aoc__unit__entry_html"><div class="ttname"><a href="../../df/d18/structast__aoc__unit__entry.html">ast_aoc_unit_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00178">aoc.h:178</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="aoc_8h_html_aa7dc1e0987972e9eb92627a1190eb548a463d1c225066e20d4cc56abee5a5b239"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#aa7dc1e0987972e9eb92627a1190eb548a463d1c225066e20d4cc56abee5a5b239">AST_AOC_D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00065">aoc.h:65</a></div></div>
<div class="ttc" id="aoc_8h_html_a84cc9357bb1acbc2b24d7e80780e3b9d"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a84cc9357bb1acbc2b24d7e80780e3b9d">ast_aoc_set_currency_info</a></div><div class="ttdeci">int ast_aoc_set_currency_info(struct ast_aoc_decoded *decoded, const unsigned int amount, const enum ast_aoc_currency_multiplier multiplier, const char *name)</div><div class="ttdoc">Sets the currency values for a AOC-D or AOC-E message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/aoc_8c_source.html#l00919">aoc.c:919</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2dfc6e6a7c0200c34dbbc6021f10c649"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2dfc6e6a7c0200c34dbbc6021f10c649">&#9670;&nbsp;</a></span>action_atxfer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_atxfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l05164">5164</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00231">AST_FEATURE_MAX_LEN</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../de/d71/features__config_8c_source.html#l01233">ast_get_builtin_feature()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01139">ast_queue_frame()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">digit</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;{</div><div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Exten&quot;</span>);</div><div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Context&quot;</span>);</div><div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;   <span class="keywordtype">char</span> feature_code[<a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#a57cae4c5040ce0791d0b4798193fc47f">AST_FEATURE_MAX_LEN</a>];</div><div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>;</div><div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;</div><div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No channel specified&quot;</span>);</div><div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;   }</div><div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(exten)) {</div><div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No extension specified&quot;</span>);</div><div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;   }</div><div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;</div><div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;   <span class="keywordflow">if</span> (!(chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name))) {</div><div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Channel specified does not exist&quot;</span>);</div><div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;   }</div><div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;</div><div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#a9671de8d09fae2ba3954919c2fdc3030">ast_get_builtin_feature</a>(chan, <span class="stringliteral">&quot;atxfer&quot;</span>, feature_code, <span class="keyword">sizeof</span>(feature_code)) ||</div><div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(feature_code)) {</div><div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No attended transfer feature code found&quot;</span>);</div><div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;   }</div><div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;</div><div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(context)) {</div><div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;TRANSFER_CONTEXT&quot;</span>, context);</div><div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;   }</div><div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;</div><div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;   <span class="keywordflow">for</span> (digit = feature_code; *<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>; ++<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>) {</div><div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>, .subclass.integer = *digit };</div><div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(chan, &amp;f);</div><div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;   }</div><div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;</div><div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;   <span class="keywordflow">for</span> (digit = exten; *<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>; ++<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>) {</div><div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>, .subclass.integer = *digit };</div><div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(chan, &amp;f);</div><div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;   }</div><div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;</div><div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;</div><div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Atxfer successfully queued&quot;</span>);</div><div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;</div><div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_a6cbcba5661d55216968cde8fdf913c89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_a9671de8d09fae2ba3954919c2fdc3030"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#a9671de8d09fae2ba3954919c2fdc3030">ast_get_builtin_feature</a></div><div class="ttdeci">int ast_get_builtin_feature(struct ast_channel *chan, const char *feature, char *buf, size_t len)</div><div class="ttdoc">Get the DTMF code for a builtin feature. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01233">features_config.c:1233</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_a57cae4c5040ce0791d0b4798193fc47f"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#a57cae4c5040ce0791d0b4798193fc47f">AST_FEATURE_MAX_LEN</a></div><div class="ttdeci">#define AST_FEATURE_MAX_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00231">include/asterisk/features_config.h:231</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga4b7f596668f285bb55c2ba939a20f9d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4b7f596668f285bb55c2ba939a20f9d2">&#9670;&nbsp;</a></span>action_blind_transfer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_blind_transfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l05118">5118</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d95/bridge_8c_source.html#l04477">ast_bridge_transfer_blind()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l01123">AST_BRIDGE_TRANSFER_FAIL</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l01121">AST_BRIDGE_TRANSFER_INVALID</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l01119">AST_BRIDGE_TRANSFER_NOT_PERMITTED</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l01117">AST_BRIDGE_TRANSFER_SUCCESS</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00344">ast_channel_context()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;{</div><div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Exten&quot;</span>);</div><div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Context&quot;</span>);</div><div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;</div><div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No channel specified&quot;</span>);</div><div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;   }</div><div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;</div><div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(exten)) {</div><div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No extension specified&quot;</span>);</div><div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;   }</div><div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;</div><div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name);</div><div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Channel specified does not exist&quot;</span>);</div><div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;   }</div><div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;</div><div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(context)) {</div><div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;      context = <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan);</div><div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;   }</div><div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;</div><div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d4/d56/bridge_8h.html#a982e0e652b9f03abf1ec584c137791a3">ast_bridge_transfer_blind</a>(1, chan, exten, context, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17a10037a900428dbddb31e85e4481bb4da">AST_BRIDGE_TRANSFER_NOT_PERMITTED</a>:</div><div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Transfer not permitted&quot;</span>);</div><div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17a93e2a5d4517067d0b9a0e39b0cdc5df8">AST_BRIDGE_TRANSFER_INVALID</a>:</div><div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Transfer invalid&quot;</span>);</div><div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17aeebe667b42c8e7993a9f5f4c45e6da25">AST_BRIDGE_TRANSFER_FAIL</a>:</div><div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Transfer failed&quot;</span>);</div><div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17a6b0053a1a47d100ef5f155f068c08934">AST_BRIDGE_TRANSFER_SUCCESS</a>:</div><div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Transfer succeeded&quot;</span>);</div><div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;   }</div><div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;</div><div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="bridge_8h_html_aadbf879fadde4b1bb7832b1390cc8c17a93e2a5d4517067d0b9a0e39b0cdc5df8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17a93e2a5d4517067d0b9a0e39b0cdc5df8">AST_BRIDGE_TRANSFER_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01121">bridge.h:1121</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="bridge_8h_html_aadbf879fadde4b1bb7832b1390cc8c17a6b0053a1a47d100ef5f155f068c08934"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17a6b0053a1a47d100ef5f155f068c08934">AST_BRIDGE_TRANSFER_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01117">bridge.h:1117</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge_8h_html_aadbf879fadde4b1bb7832b1390cc8c17aeebe667b42c8e7993a9f5f4c45e6da25"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17aeebe667b42c8e7993a9f5f4c45e6da25">AST_BRIDGE_TRANSFER_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01123">bridge.h:1123</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="bridge_8h_html_a982e0e652b9f03abf1ec584c137791a3"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a982e0e652b9f03abf1ec584c137791a3">ast_bridge_transfer_blind</a></div><div class="ttdeci">enum ast_transfer_result ast_bridge_transfer_blind(int is_external, struct ast_channel *transferer, const char *exten, const char *context, transfer_channel_cb new_channel_cb, void *user_data)</div><div class="ttdoc">Blind transfer target to the extension and context provided. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l04477">bridge.c:4477</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="bridge_8h_html_aadbf879fadde4b1bb7832b1390cc8c17a10037a900428dbddb31e85e4481bb4da"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17a10037a900428dbddb31e85e4481bb4da">AST_BRIDGE_TRANSFER_NOT_PERMITTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01119">bridge.h:1119</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa60da5f18e4bd066b5d6c5d334f3ef9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa60da5f18e4bd066b5d6c5d334f3ef9a">&#9670;&nbsp;</a></span>action_cancel_atxfer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_cancel_atxfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l05218">5218</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../de/d71/features__config_8c_source.html#l01178">ast_get_chan_features_atxferabort()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01139">ast_queue_frame()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">digit</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;{</div><div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;   <span class="keywordtype">char</span> *feature_code;</div><div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>;</div><div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;</div><div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No channel specified&quot;</span>);</div><div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;   }</div><div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;</div><div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;   <span class="keywordflow">if</span> (!(chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name))) {</div><div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Channel specified does not exist&quot;</span>);</div><div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;   }</div><div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;</div><div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;   feature_code = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#acfe9f988bbf6b3a2d02663e30668277e">ast_get_chan_features_atxferabort</a>(chan);</div><div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;</div><div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;   <span class="keywordflow">if</span> (!feature_code) {</div><div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No disconnect feature code found&quot;</span>);</div><div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;   }</div><div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;</div><div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;   <span class="keywordflow">for</span> (digit = feature_code; *<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>; ++<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>) {</div><div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>, .subclass.integer = *digit };</div><div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(chan, &amp;f);</div><div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;   }</div><div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(feature_code);</div><div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;</div><div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;</div><div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;CancelAtxfer successfully queued&quot;</span>);</div><div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;</div><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_acfe9f988bbf6b3a2d02663e30668277e"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#acfe9f988bbf6b3a2d02663e30668277e">ast_get_chan_features_atxferabort</a></div><div class="ttdeci">char * ast_get_chan_features_atxferabort(struct ast_channel *chan)</div><div class="ttdoc">Get the transfer configuration option atxferabort. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01178">features_config.c:1178</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_a6cbcba5661d55216968cde8fdf913c89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gade12539a3e517752ad60fef428394532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gade12539a3e517752ad60fef428394532">&#9670;&nbsp;</a></span>action_challenge()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_challenge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04442">4442</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03196">astman_start_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01593">mansession_session::challenge</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03251">mansession_lock()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03257">mansession_unlock()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;{</div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *authtype = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;AuthType&quot;</span>);</div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(authtype, <span class="stringliteral">&quot;MD5&quot;</span>)) {</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a26209ae0bf3ca1689131b748bc838a51">challenge</a>)) {</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;         snprintf(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a26209ae0bf3ca1689131b748bc838a51">challenge</a>, <span class="keyword">sizeof</span>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a26209ae0bf3ca1689131b748bc838a51">challenge</a>), <span class="stringliteral">&quot;%ld&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>());</div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;      }</div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a>(s);</div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a>(s, m);</div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Challenge: %s\r\n\r\n&quot;</span>, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a26209ae0bf3ca1689131b748bc838a51">challenge</a>);</div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a>(s);</div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Must specify AuthType&quot;</span>);</div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;   }</div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga06b330b2a545662f8130f086604660ec"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a></div><div class="ttdeci">static void mansession_unlock(struct mansession *s)</div><div class="ttdoc">Unlock the &amp;#39;mansession&amp;#39; structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03257">manager.c:3257</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga740af4550410dae06b748c23ebd0ae24"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a></div><div class="ttdeci">static void astman_start_ack(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03196">manager.c:3196</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga2cbbc87c25cdd3f6346961d3ed40b2fb"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a></div><div class="ttdeci">static void mansession_lock(struct mansession *s)</div><div class="ttdoc">Lock the &amp;#39;mansession&amp;#39; structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03251">manager.c:3251</a></div></div>
<div class="ttc" id="structmansession__session_html_a26209ae0bf3ca1689131b748bc838a51"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a26209ae0bf3ca1689131b748bc838a51">mansession_session::challenge</a></div><div class="ttdeci">char challenge[10]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01593">manager.c:1593</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa9472597042ec9ccd8f5d51a61b70b74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa9472597042ec9ccd8f5d51a61b70b74">&#9670;&nbsp;</a></span>action_command()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_command </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manager command "command" - execute CLI command. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l05295">5295</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03164">astman_send_error_va()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03123">astman_send_response_full()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05259">check_blacklist()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03114">MSG_MOREDATA</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00040">RESULT_SUCCESS</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, and <a class="el" href="../../d5/de5/term_8c_source.html#l00311">term_strip()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;{</div><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *cmd = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Command&quot;</span>);</div><div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *final_buf = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *delim, *output;</div><div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;   <span class="keywordtype">char</span> <span class="keyword">template</span>[] = <span class="stringliteral">&quot;/tmp/ast-ami-XXXXXX&quot;</span>;  <span class="comment">/* template for temporary file */</span></div><div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;   <span class="keywordtype">int</span> fd, ret;</div><div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;   off_t <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;</div><div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cmd)) {</div><div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No command provided&quot;</span>);</div><div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;   }</div><div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;</div><div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#ga9227e0d88226ca4021dadf7d03d63976">check_blacklist</a>(cmd)) {</div><div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Command blacklisted&quot;</span>);</div><div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;   }</div><div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;</div><div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;   <span class="keywordflow">if</span> ((fd = mkstemp(<span class="keyword">template</span>)) &lt; 0) {</div><div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga352d583ea36240124638e5c1db088227">astman_send_error_va</a>(s, m, <span class="stringliteral">&quot;Failed to create temporary file: %s&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;   }</div><div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;</div><div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;   ret = <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9">ast_cli_command</a>(fd, cmd);</div><div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a>(s, m, ret == <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a> ? <span class="stringliteral">&quot;Success&quot;</span> : <span class="stringliteral">&quot;Error&quot;</span>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga97955111f384b58ee815bb59f0afa0c5">MSG_MOREDATA</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;</div><div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;   <span class="comment">/* Determine number of characters available */</span></div><div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;   <span class="keywordflow">if</span> ((len = lseek(fd, 0, SEEK_END)) &lt; 0) {</div><div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Message: Failed to determine number of characters: %s\r\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;      <span class="keywordflow">goto</span> action_command_cleanup;</div><div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;   }</div><div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;</div><div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;   <span class="comment">/* This has a potential to overflow the stack.  Hence, use the heap. */</span></div><div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;   buf = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(len + 1);</div><div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;   final_buf = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(len + 1);</div><div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;</div><div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;   <span class="keywordflow">if</span> (!buf || !final_buf) {</div><div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Message: Memory allocation failure\r\n&quot;</span>);</div><div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;      <span class="keywordflow">goto</span> action_command_cleanup;</div><div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;   }</div><div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;</div><div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;   <span class="keywordflow">if</span> (lseek(fd, 0, SEEK_SET) &lt; 0) {</div><div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Message: Failed to set position on temporary file: %s\r\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;      <span class="keywordflow">goto</span> action_command_cleanup;</div><div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;   }</div><div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;</div><div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;   <span class="keywordflow">if</span> (read(fd, buf, len) &lt; 0) {</div><div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Message: Failed to read from temporary file: %s\r\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;      <span class="keywordflow">goto</span> action_command_cleanup;</div><div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;   }</div><div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;</div><div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;   buf[<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a3a3cbec50cdddbfe0a99732d55fc147d">term_strip</a>(final_buf, buf, len);</div><div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;   final_buf[<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;</div><div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;   <span class="comment">/* Trim trailing newline */</span></div><div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;   <span class="keywordflow">if</span> (len &amp;&amp; final_buf[len - 1] == <span class="charliteral">&#39;\n&#39;</span>) {</div><div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;      final_buf[len - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;   }</div><div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;</div><div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Message: Command output follows\r\n&quot;</span>);</div><div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;</div><div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;   delim = final_buf;</div><div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;   <span class="keywordflow">while</span> ((output = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;delim, <span class="stringliteral">&quot;\n&quot;</span>))) {</div><div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Output: %s\r\n&quot;</span>, output);</div><div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;   }</div><div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;</div><div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;action_command_cleanup:</div><div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;</div><div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;   close(fd);</div><div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;   unlink(<span class="keyword">template</span>);</div><div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;</div><div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(final_buf);</div><div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;</div><div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga9227e0d88226ca4021dadf7d03d63976"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga9227e0d88226ca4021dadf7d03d63976">check_blacklist</a></div><div class="ttdeci">static int check_blacklist(const char *cmd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05259">manager.c:5259</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="term_8h_html_a3a3cbec50cdddbfe0a99732d55fc147d"><div class="ttname"><a href="../../db/d45/term_8h.html#a3a3cbec50cdddbfe0a99732d55fc147d">term_strip</a></div><div class="ttdeci">char * term_strip(char *outbuf, const char *inbuf, int maxout)</div><div class="ttdoc">Remove colorings from a specified string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de5/term_8c_source.html#l00311">term.c:311</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga5ceffcba60b4100c02c4700be76161e4"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a></div><div class="ttdeci">static void astman_send_response_full(struct mansession *s, const struct message *m, char *resp, char *msg, char *listflag)</div><div class="ttdoc">send a response with an optional message, and terminate it with an empty line. m is used only to grab...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03123">manager.c:3123</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga352d583ea36240124638e5c1db088227"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga352d583ea36240124638e5c1db088227">astman_send_error_va</a></div><div class="ttdeci">void astman_send_error_va(struct mansession *s, const struct message *m, const char *fmt,...)</div><div class="ttdoc">Send error in manager transaction (with va_args support) </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03164">manager.c:3164</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9">ast_cli_command</a></div><div class="ttdeci">ast_cli_command</div><div class="ttdoc">calling arguments for new-style handlers. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00151">cli.h:151</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga97955111f384b58ee815bb59f0afa0c5"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga97955111f384b58ee815bb59f0afa0c5">MSG_MOREDATA</a></div><div class="ttdeci">#define MSG_MOREDATA</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03114">manager.c:3114</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga3d60a22662da992b5707f7b8830efc05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3d60a22662da992b5707f7b8830efc05">&#9670;&nbsp;</a></span>action_coresettings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_coresettings </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Show PBX core settings information. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06276">6276</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00057">AMI_VERSION</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02861">ast_cdr_is_enabled()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00071">AST_CLI_YESNO</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00169">ast_config_AST_RUN_GROUP</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00168">ast_config_AST_RUN_USER</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00170">ast_config_AST_SYSTEM_NAME</a>, <a class="el" href="../../d2/d0b/version_8c_source.html#l00016">ast_get_version()</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00079">ast_option_maxcalls</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00081">ast_option_maxfiles</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00077">ast_option_maxload</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03377">ast_realtime_enabled()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01954">ast_webmanager_check_enabled()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;{</div><div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *actionid = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;   <span class="keywordtype">char</span> idText[150];</div><div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;</div><div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(actionid)) {</div><div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;      snprintf(idText, <span class="keyword">sizeof</span>(idText), <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, actionid);</div><div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;      idText[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;   }</div><div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;</div><div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Response: Success\r\n&quot;</span></div><div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;         <span class="stringliteral">&quot;AMIversion: %s\r\n&quot;</span></div><div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;         <span class="stringliteral">&quot;AsteriskVersion: %s\r\n&quot;</span></div><div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;         <span class="stringliteral">&quot;SystemName: %s\r\n&quot;</span></div><div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;         <span class="stringliteral">&quot;CoreMaxCalls: %d\r\n&quot;</span></div><div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;         <span class="stringliteral">&quot;CoreMaxLoadAvg: %f\r\n&quot;</span></div><div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;         <span class="stringliteral">&quot;CoreRunUser: %s\r\n&quot;</span></div><div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;         <span class="stringliteral">&quot;CoreRunGroup: %s\r\n&quot;</span></div><div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;         <span class="stringliteral">&quot;CoreMaxFilehandles: %d\r\n&quot;</span></div><div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;         <span class="stringliteral">&quot;CoreRealTimeEnabled: %s\r\n&quot;</span></div><div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160;         <span class="stringliteral">&quot;CoreCDRenabled: %s\r\n&quot;</span></div><div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;         <span class="stringliteral">&quot;CoreHTTPenabled: %s\r\n&quot;</span></div><div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;         <span class="stringliteral">&quot;\r\n&quot;</span>,</div><div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;         idText,</div><div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;         <a class="code" href="../../db/d45/manager_8h.html#a9aa10c963efd367eaab256f4a05db100">AMI_VERSION</a>,</div><div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;         <a class="code" href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a>(),</div><div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;         <a class="code" href="../../dd/df2/paths_8h.html#ab9f9346c7a41bdf3720f7b1ed02ec703">ast_config_AST_SYSTEM_NAME</a>,</div><div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;         <a class="code" href="../../d6/dd6/group__main__options.html#ga6d3ecf74255f4bfc355ebd1540c316c1">ast_option_maxcalls</a>,</div><div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;         <a class="code" href="../../d6/dd6/group__main__options.html#ga908239c63cc433cbefa4aa6f5efcb830">ast_option_maxload</a>,</div><div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;         <a class="code" href="../../dd/df2/paths_8h.html#a37ae09a4cc0e3b46e7b2a2052bde4965">ast_config_AST_RUN_USER</a>,</div><div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;         <a class="code" href="../../dd/df2/paths_8h.html#a2434757afbc16110ff1c7483f3d7ba51">ast_config_AST_RUN_GROUP</a>,</div><div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;         <a class="code" href="../../d6/dd6/group__main__options.html#ga3fe7b544e835ccfde10b88b76eb0e8ea">ast_option_maxfiles</a>,</div><div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a>(<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6344200b56202a76de8db05af680f3ac">ast_realtime_enabled</a>()),</div><div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a>(<a class="code" href="../../dc/d07/cdr_8h.html#a1819c3aecd7b59e2734810f52b219059">ast_cdr_is_enabled</a>()),</div><div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#ga22f6d55529c1ca69bc308af9d9ef0bb2">ast_webmanager_check_enabled</a>())</div><div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;         );</div><div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;}</div><div class="ttc" id="group__main__options_html_ga3fe7b544e835ccfde10b88b76eb0e8ea"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#ga3fe7b544e835ccfde10b88b76eb0e8ea">ast_option_maxfiles</a></div><div class="ttdeci">int ast_option_maxfiles</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00081">options.c:81</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="ast__version_8h_html_a7765c608aea948584928643ab3963b2a"><div class="ttname"><a href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a></div><div class="ttdeci">const char * ast_get_version(void)</div><div class="ttdoc">Retrieve the Asterisk version string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0b/version_8c_source.html#l00016">version.c:16</a></div></div>
<div class="ttc" id="group__main__options_html_ga908239c63cc433cbefa4aa6f5efcb830"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#ga908239c63cc433cbefa4aa6f5efcb830">ast_option_maxload</a></div><div class="ttdeci">double ast_option_maxload</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00077">options.c:77</a></div></div>
<div class="ttc" id="paths_8h_html_a37ae09a4cc0e3b46e7b2a2052bde4965"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a37ae09a4cc0e3b46e7b2a2052bde4965">ast_config_AST_RUN_USER</a></div><div class="ttdeci">const char * ast_config_AST_RUN_USER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00168">options.c:168</a></div></div>
<div class="ttc" id="group__main__options_html_ga6d3ecf74255f4bfc355ebd1540c316c1"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#ga6d3ecf74255f4bfc355ebd1540c316c1">ast_option_maxcalls</a></div><div class="ttdeci">int ast_option_maxcalls</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00079">options.c:79</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6344200b56202a76de8db05af680f3ac"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6344200b56202a76de8db05af680f3ac">ast_realtime_enabled</a></div><div class="ttdeci">int ast_realtime_enabled(void)</div><div class="ttdoc">Check if there&amp;#39;s any realtime engines loaded. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03377">main/config.c:3377</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga22f6d55529c1ca69bc308af9d9ef0bb2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga22f6d55529c1ca69bc308af9d9ef0bb2">ast_webmanager_check_enabled</a></div><div class="ttdeci">int ast_webmanager_check_enabled(void)</div><div class="ttdoc">Check if AMI/HTTP is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01954">manager.c:1954</a></div></div>
<div class="ttc" id="paths_8h_html_ab9f9346c7a41bdf3720f7b1ed02ec703"><div class="ttname"><a href="../../dd/df2/paths_8h.html#ab9f9346c7a41bdf3720f7b1ed02ec703">ast_config_AST_SYSTEM_NAME</a></div><div class="ttdeci">const char * ast_config_AST_SYSTEM_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00170">options.c:170</a></div></div>
<div class="ttc" id="cdr_8h_html_a1819c3aecd7b59e2734810f52b219059"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a1819c3aecd7b59e2734810f52b219059">ast_cdr_is_enabled</a></div><div class="ttdeci">int ast_cdr_is_enabled(void)</div><div class="ttdoc">Return TRUE if CDR subsystem is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02861">cdr.c:2861</a></div></div>
<div class="ttc" id="paths_8h_html_a2434757afbc16110ff1c7483f3d7ba51"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a2434757afbc16110ff1c7483f3d7ba51">ast_config_AST_RUN_GROUP</a></div><div class="ttdeci">const char * ast_config_AST_RUN_GROUP</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00169">options.c:169</a></div></div>
<div class="ttc" id="manager_8h_html_a9aa10c963efd367eaab256f4a05db100"><div class="ttname"><a href="../../db/d45/manager_8h.html#a9aa10c963efd367eaab256f4a05db100">AMI_VERSION</a></div><div class="ttdeci">#define AMI_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00057">manager.h:57</a></div></div>
<div class="ttc" id="cli_8h_html_a29e703082f8137e165097c41f249e6d1"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a></div><div class="ttdeci">#define AST_CLI_YESNO(x)</div><div class="ttdoc">Return Yes or No depending on the argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00071">cli.h:71</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gad7dbcf9e4437be66192f797b6b740930"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7dbcf9e4437be66192f797b6b740930">&#9670;&nbsp;</a></span>action_coreshowchannels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_coreshowchannels </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manager command "CoreShowChannels" - List currently defined channels and some information about them. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06390">6390</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::appl</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00133">ast_channel_cache_by_name()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l00487">ast_manager_build_channel_state_string_prefix()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03228">astman_send_list_complete()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03201">astman_send_listack()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00150">ast_channel_snapshot::bridge</a>, <a class="el" href="../../de/d52/codec__dahdi_8c.html#aea0622703055b62259903cdab213319b">channels</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00113">ast_channel_snapshot_base::creationtime</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00070">ast_channel_snapshot_dialplan::data</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00151">ast_channel_snapshot::dialplan</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00057">ast_channel_snapshot_bridge::id</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;{</div><div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *actionid = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;   <span class="keywordtype">char</span> idText[256];</div><div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;   <span class="keywordtype">int</span> numchans = 0;</div><div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../de/d52/codec__dahdi_8c.html#aea0622703055b62259903cdab213319b">channels</a>;</div><div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it_chans;</div><div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *cs;</div><div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;</div><div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(actionid)) {</div><div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;      snprintf(idText, <span class="keyword">sizeof</span>(idText), <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, actionid);</div><div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;      idText[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;   }</div><div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;</div><div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;   channels = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gae462040f6444a2a4fc9d2681f49cc99b">ast_channel_cache_by_name</a>();</div><div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;</div><div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a>(s, m, <span class="stringliteral">&quot;Channels will follow&quot;</span>, <span class="stringliteral">&quot;start&quot;</span>);</div><div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;</div><div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;   it_chans = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(channels, 0);</div><div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;   <span class="keywordflow">for</span> (; (cs = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it_chans)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cs, -1)) {</div><div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *built = <a class="code" href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a>(cs, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;      <span class="keywordtype">char</span> durbuf[16] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;</div><div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;      <span class="keywordflow">if</span> (!built) {</div><div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160;      }</div><div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;</div><div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(cs-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a>)) {</div><div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;         <span class="keywordtype">int</span> duration, durh, durm, durs;</div><div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;</div><div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;         duration = (int)(<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), cs-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a>) / 1000);</div><div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;         durh = duration / 3600;</div><div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;         durm = (duration % 3600) / 60;</div><div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;         durs = duration % 60;</div><div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;         snprintf(durbuf, <span class="keyword">sizeof</span>(durbuf), <span class="stringliteral">&quot;%02d:%02d:%02d&quot;</span>, durh, durm, durs);</div><div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;      }</div><div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160;</div><div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s,</div><div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;         <span class="stringliteral">&quot;Event: CoreShowChannel\r\n&quot;</span></div><div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;         <span class="stringliteral">&quot;Application: %s\r\n&quot;</span></div><div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;         <span class="stringliteral">&quot;ApplicationData: %s\r\n&quot;</span></div><div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;         <span class="stringliteral">&quot;Duration: %s\r\n&quot;</span></div><div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160;         <span class="stringliteral">&quot;BridgeId: %s\r\n&quot;</span></div><div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;         <span class="stringliteral">&quot;\r\n&quot;</span>,</div><div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;         idText,</div><div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(built),</div><div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;         cs-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">appl</a>,</div><div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;         cs-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7870f447ef3c43ebf148da15363b25dd">data</a>,</div><div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;         durbuf,</div><div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;         cs-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a9c0a621242a8915244954e5a273c8cf7">bridge</a>-&gt;<a class="code" href="../../da/d20/structast__channel__snapshot__bridge.html#abe9e57df6ac773738500092fe3cf7fca">id</a>);</div><div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;</div><div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;      numchans++;</div><div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;</div><div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(built);</div><div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;   }</div><div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it_chans);</div><div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;</div><div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac9d1d485a1911880e31a3537223b3f9c">astman_send_list_complete</a>(s, m, <span class="stringliteral">&quot;CoreShowChannelsComplete&quot;</span>, numchans);</div><div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;</div><div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(channels, -1);</div><div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;}</div><div class="ttc" id="group__StasisTopicsAndMessages_html_gae462040f6444a2a4fc9d2681f49cc99b"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gae462040f6444a2a4fc9d2681f49cc99b">ast_channel_cache_by_name</a></div><div class="ttdeci">struct ao2_container * ast_channel_cache_by_name(void)</div><div class="ttdoc">Secondary channel cache, indexed by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00133">stasis_channels.c:133</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_a7870f447ef3c43ebf148da15363b25dd"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7870f447ef3c43ebf148da15363b25dd">ast_channel_snapshot_dialplan::data</a></div><div class="ttdeci">const ast_string_field data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="manager_8h_html_ab71472ea55b4114f460a4459e3dcd18b"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a></div><div class="ttdeci">struct ast_str * ast_manager_build_channel_state_string_prefix(const struct ast_channel_snapshot *snapshot, const char *prefix)</div><div class="ttdoc">Generate the AMI message body from a channel snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1c/manager__channels_8c_source.html#l00487">manager_channels.c:487</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_a5be1fb9b43b051b087f6952b6346909a"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">ast_channel_snapshot::dialplan</a></div><div class="ttdeci">struct ast_channel_snapshot_dialplan * dialplan</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00151">stasis_channels.h:151</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_af535fe520577fb6b8795dea539bd0230"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">ast_channel_snapshot_dialplan::appl</a></div><div class="ttdeci">const ast_string_field appl</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a298ce3dfc9b5b8a8351e8ed103aa7e5c"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">ast_channel_snapshot_base::creationtime</a></div><div class="ttdeci">struct timeval creationtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00113">stasis_channels.h:113</a></div></div>
<div class="ttc" id="codec__dahdi_8c_html_aea0622703055b62259903cdab213319b"><div class="ttname"><a href="../../de/d52/codec__dahdi_8c.html#aea0622703055b62259903cdab213319b">channels</a></div><div class="ttdeci">static struct channel_usage channels</div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__channel__snapshot__bridge_html_abe9e57df6ac773738500092fe3cf7fca"><div class="ttname"><a href="../../da/d20/structast__channel__snapshot__bridge.html#abe9e57df6ac773738500092fe3cf7fca">ast_channel_snapshot_bridge::id</a></div><div class="ttdeci">char id[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00057">stasis_channels.h:57</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_a9c0a621242a8915244954e5a273c8cf7"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#a9c0a621242a8915244954e5a273c8cf7">ast_channel_snapshot::bridge</a></div><div class="ttdeci">struct ast_channel_snapshot_bridge * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00150">stasis_channels.h:150</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac9d1d485a1911880e31a3537223b3f9c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac9d1d485a1911880e31a3537223b3f9c">astman_send_list_complete</a></div><div class="ttdeci">static void astman_send_list_complete(struct mansession *s, const struct message *m, const char *event_name, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03228">manager.c:3228</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga0ee6ee1f4d200f711e2983bffe770a72"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a></div><div class="ttdeci">void astman_send_listack(struct mansession *s, const struct message *m, char *msg, char *listflag)</div><div class="ttdoc">Send ack in manager transaction to begin a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03201">manager.c:3201</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gad91b17071378fe3910cb119a257dab30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad91b17071378fe3910cb119a257dab30">&#9670;&nbsp;</a></span>action_corestatus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_corestatus </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Show PBX core status information. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06318">6318</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l00499">ast_active_channels()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00337">ast_lastreloadtime</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l01739">ast_localtime()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00336">ast_startuptime</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l02524">ast_strftime()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;{</div><div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *actionid = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;   <span class="keywordtype">char</span> idText[150];</div><div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;   <span class="keywordtype">char</span> startuptime[150], startupdate[150];</div><div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;   <span class="keywordtype">char</span> reloadtime[150], reloaddate[150];</div><div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> tm;</div><div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;</div><div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(actionid)) {</div><div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;      snprintf(idText, <span class="keyword">sizeof</span>(idText), <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, actionid);</div><div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160;      idText[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;   }</div><div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;</div><div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;<a class="code" href="../../d7/d5b/options_8h.html#acd462f81fa607939af36a9fa33cdbf9d">ast_startuptime</a>, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(startuptime, <span class="keyword">sizeof</span>(startuptime), <span class="stringliteral">&quot;%H:%M:%S&quot;</span>, &amp;tm);</div><div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(startupdate, <span class="keyword">sizeof</span>(startupdate), <span class="stringliteral">&quot;%Y-%m-%d&quot;</span>, &amp;tm);</div><div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;<a class="code" href="../../d7/d5b/options_8h.html#a7cdafc5a121e87659887ffc9abe36760">ast_lastreloadtime</a>, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(reloadtime, <span class="keyword">sizeof</span>(reloadtime), <span class="stringliteral">&quot;%H:%M:%S&quot;</span>, &amp;tm);</div><div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(reloaddate, <span class="keyword">sizeof</span>(reloaddate), <span class="stringliteral">&quot;%Y-%m-%d&quot;</span>, &amp;tm);</div><div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160;</div><div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Response: Success\r\n&quot;</span></div><div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;         <span class="stringliteral">&quot;CoreStartupDate: %s\r\n&quot;</span></div><div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;         <span class="stringliteral">&quot;CoreStartupTime: %s\r\n&quot;</span></div><div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160;         <span class="stringliteral">&quot;CoreReloadDate: %s\r\n&quot;</span></div><div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;         <span class="stringliteral">&quot;CoreReloadTime: %s\r\n&quot;</span></div><div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;         <span class="stringliteral">&quot;CoreCurrentCalls: %d\r\n&quot;</span></div><div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;         <span class="stringliteral">&quot;\r\n&quot;</span>,</div><div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;         idText,</div><div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;         startupdate,</div><div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;         startuptime,</div><div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;         reloaddate,</div><div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;         reloadtime,</div><div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a9704ae96ab849e9e5a20040c13d29705">ast_active_channels</a>()</div><div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;         );</div><div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="localtime_8h_html_ae9fbda728350a9a5b9c09b29214d718e"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a></div><div class="ttdeci">struct ast_tm * ast_localtime(const struct timeval *timep, struct ast_tm *p_tm, const char *zone)</div><div class="ttdoc">Timezone-independent version of localtime_r(3). </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01739">localtime.c:1739</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="options_8h_html_a7cdafc5a121e87659887ffc9abe36760"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a7cdafc5a121e87659887ffc9abe36760">ast_lastreloadtime</a></div><div class="ttdeci">struct timeval ast_lastreloadtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00337">asterisk.c:337</a></div></div>
<div class="ttc" id="localtime_8h_html_aa8e63928b14a347bd3973d680b885f93"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a></div><div class="ttdeci">int ast_strftime(char *buf, size_t len, const char *format, const struct ast_tm *tm)</div><div class="ttdoc">Special version of strftime(3) that handles fractions of a second. Takes the same arguments as strfti...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02524">localtime.c:2524</a></div></div>
<div class="ttc" id="options_8h_html_acd462f81fa607939af36a9fa33cdbf9d"><div class="ttname"><a href="../../d7/d5b/options_8h.html#acd462f81fa607939af36a9fa33cdbf9d">ast_startuptime</a></div><div class="ttdeci">struct timeval ast_startuptime</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00336">asterisk.c:336</a></div></div>
<div class="ttc" id="channel_8h_html_a9704ae96ab849e9e5a20040c13d29705"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9704ae96ab849e9e5a20040c13d29705">ast_active_channels</a></div><div class="ttdeci">int ast_active_channels(void)</div><div class="ttdoc">returns number of active/allocated channels </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00499">channel.c:499</a></div></div>
<div class="ttc" id="structast__tm_html"><div class="ttname"><a href="../../d5/d84/structast__tm.html">ast_tm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/deb/localtime_8h_source.html#l00035">localtime.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga03aa8a5224eadc07dddc34751e1868d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga03aa8a5224eadc07dddc34751e1868d0">&#9670;&nbsp;</a></span>action_createconfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_createconfig </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04188">4188</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dc5/options_8c_source.html#l00151">ast_config_AST_CONFIG_DIR</a>, <a class="el" href="../../db/db2/asterisk_8h_source.html#l00032">AST_FILE_MODE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, and <a class="el" href="../../db/db2/asterisk_8h_source.html#l00040">PATH_MAX</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;{</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;   <span class="keywordtype">int</span> fd;</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *fn = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Filename&quot;</span>);</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *filepath = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>);</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;filepath, 0, <span class="stringliteral">&quot;%s/&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a7d3836e5581e433c9f5edd30300cc187">ast_config_AST_CONFIG_DIR</a>);</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;filepath, 0, <span class="stringliteral">&quot;%s&quot;</span>, fn);</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;   <span class="keywordflow">if</span> ((fd = open(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(filepath), O_CREAT | O_EXCL, <a class="code" href="../../db/db2/asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a>)) != -1) {</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;      close(fd);</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;New configuration file created successfully&quot;</span>);</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;   }</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;}</div><div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="asterisk_8h_html_aa6293b2dae52a2b470494df672a26c42"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a></div><div class="ttdeci">#define AST_FILE_MODE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00032">asterisk.h:32</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="paths_8h_html_a7d3836e5581e433c9f5edd30300cc187"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a7d3836e5581e433c9f5edd30300cc187">ast_config_AST_CONFIG_DIR</a></div><div class="ttdeci">const char * ast_config_AST_CONFIG_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00151">options.c:151</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="asterisk_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00040">asterisk.h:40</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gadd09f46d9eea259a9a23b2a96fb99d7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadd09f46d9eea259a9a23b2a96fb99d7b">&#9670;&nbsp;</a></span>action_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void action_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07372">7372</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00162">manager_action::final_response</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00160">manager_action::list_responses</a>, and <a class="el" href="../../db/d45/manager_8h_source.html#l00158">manager_action::synopsis</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07386">ast_manager_register2()</a>.</p>
<div class="fragment"><div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;{</div><div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dcc/structmanager__action.html">manager_action</a> *doomed = obj;</div><div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160;</div><div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;   <span class="keywordflow">if</span> (doomed-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#aa403beb670a3277f542647cc9aa22137">synopsis</a>) {</div><div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;      <span class="comment">/* The string fields were initialized. */</span></div><div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(doomed);</div><div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;   }</div><div class="line"><a name="l07380"></a><span class="lineno"> 7380</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(doomed-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a8c15417035739fd46675a17c5895afa9">final_response</a>);</div><div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(doomed-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ad620e07ef3ac6fbeb23e5d2ec0484e1d">list_responses</a>);</div><div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160;}</div><div class="ttc" id="structmanager__action_html_ad620e07ef3ac6fbeb23e5d2ec0484e1d"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ad620e07ef3ac6fbeb23e5d2ec0484e1d">manager_action::list_responses</a></div><div class="ttdeci">struct ast_xml_doc_item * list_responses</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00160">manager.h:160</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structmanager__action_html_aa403beb670a3277f542647cc9aa22137"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#aa403beb670a3277f542647cc9aa22137">manager_action::synopsis</a></div><div class="ttdeci">const ast_string_field synopsis</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00158">manager.h:158</a></div></div>
<div class="ttc" id="structmanager__action_html_a8c15417035739fd46675a17c5895afa9"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#a8c15417035739fd46675a17c5895afa9">manager_action::final_response</a></div><div class="ttdeci">struct ast_xml_doc_item * final_response</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00162">manager.h:162</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
<div class="ttc" id="structmanager__action_html"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html">manager_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00149">manager.h:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga954eccb4f48bd6797ba65a9cada6446a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga954eccb4f48bd6797ba65a9cada6446a">&#9670;&nbsp;</a></span>action_events()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_events </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04343">4343</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01474">broken_events_action</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02016">permalias::num</a>, <a class="el" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03266">set_eventmask()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;{</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *mask = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;EventMask&quot;</span>);</div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;   <span class="keywordtype">int</span> res, x;</div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;   <span class="keywordtype">char</span> id_text[256];</div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;</div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;      snprintf(id_text, <span class="keyword">sizeof</span>(id_text), <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;      id_text[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;   }</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;</div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;   res = <a class="code" href="../../df/d72/group__Group__AMI.html#gab7a51272a96fcd2792382b4d0bf254f6">set_eventmask</a>(s, mask);</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#gab362ced8cd2bc839a9a1782ae31a9166">broken_events_action</a>) {</div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;      <span class="comment">/* if this option is set we should not return a response on</span></div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;<span class="comment">       * error, or when all events are set */</span></div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;</div><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;      <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;         <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>); x++) {</div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;            <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>[x].label, <span class="stringliteral">&quot;all&quot;</span>) &amp;&amp; res == <a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>[x].<a class="code" href="../../de/d4b/structpermalias.html#a86cf672daa4e0ad11ad10efc894d19c8">num</a>) {</div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;               <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;            }</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;         }</div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Response: Success\r\n%s&quot;</span></div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;                <span class="stringliteral">&quot;Events: On\r\n\r\n&quot;</span>, id_text);</div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == 0)</div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Response: Success\r\n%s&quot;</span></div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;                <span class="stringliteral">&quot;Events: Off\r\n\r\n&quot;</span>, id_text);</div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;   }</div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;</div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;   <span class="keywordflow">if</span> (res &gt; 0)</div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Response: Success\r\n%s&quot;</span></div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;             <span class="stringliteral">&quot;Events: On\r\n\r\n&quot;</span>, id_text);</div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == 0)</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Response: Success\r\n%s&quot;</span></div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;             <span class="stringliteral">&quot;Events: Off\r\n\r\n&quot;</span>, id_text);</div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid event mask&quot;</span>);</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structpermalias_html_a86cf672daa4e0ad11ad10efc894d19c8"><div class="ttname"><a href="../../de/d4b/structpermalias.html#a86cf672daa4e0ad11ad10efc894d19c8">permalias::num</a></div><div class="ttdeci">int num</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02016">manager.c:2016</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga844c8a72ece748571e61afa468edabb0"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a></div><div class="ttdeci">static const struct permalias perms[]</div></div>
<div class="ttc" id="group__Group__AMI_html_gab7a51272a96fcd2792382b4d0bf254f6"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gab7a51272a96fcd2792382b4d0bf254f6">set_eventmask</a></div><div class="ttdeci">static int set_eventmask(struct mansession *s, const char *eventmask)</div><div class="ttdoc">Rather than braindead on,off this now can also accept a specific int mask value or a &amp;#39;...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03266">manager.c:3266</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gab362ced8cd2bc839a9a1782ae31a9166"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gab362ced8cd2bc839a9a1782ae31a9166">broken_events_action</a></div><div class="ttdeci">static int broken_events_action</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01474">manager.c:1474</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga5f3b2b093b498ed27078743ec10c05b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f3b2b093b498ed27078743ec10c05b7">&#9670;&nbsp;</a></span>action_extensionstate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_extensionstate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l05974">5974</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d94/pbx_8c_source.html#l03170">ast_extension_state()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l03126">ast_extension_state2str()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04141">ast_get_hint()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03196">astman_start_ack()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;{</div><div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Exten&quot;</span>);</div><div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Context&quot;</span>);</div><div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;   <span class="keywordtype">char</span> hint[256];</div><div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;</div><div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(exten)) {</div><div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Extension not specified&quot;</span>);</div><div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;   }</div><div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(context)) {</div><div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;      context = <span class="stringliteral">&quot;default&quot;</span>;</div><div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160;   }</div><div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;   status = <a class="code" href="../../db/de0/pbx_8h.html#aed6cfe76441ef995ab80609020a9990c">ast_extension_state</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, context, exten);</div><div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;   hint[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#ac778ac642def88a06e5d59e11a964c43">ast_get_hint</a>(hint, <span class="keyword">sizeof</span>(hint), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, context, exten);</div><div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a>(s, m);</div><div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Message: Extension Status\r\n&quot;</span></div><div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;      <span class="stringliteral">&quot;Exten: %s\r\n&quot;</span></div><div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;      <span class="stringliteral">&quot;Context: %s\r\n&quot;</span></div><div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;      <span class="stringliteral">&quot;Hint: %s\r\n&quot;</span></div><div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;      <span class="stringliteral">&quot;Status: %d\r\n&quot;</span></div><div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;      <span class="stringliteral">&quot;StatusText: %s\r\n&quot;</span></div><div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;      <span class="stringliteral">&quot;\r\n&quot;</span>,</div><div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;      exten, context, hint, status,</div><div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a3261603753916b98888a5a5fc1d505c3">ast_extension_state2str</a>(status));</div><div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;}</div><div class="ttc" id="pbx_8h_html_ac778ac642def88a06e5d59e11a964c43"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ac778ac642def88a06e5d59e11a964c43">ast_get_hint</a></div><div class="ttdeci">int ast_get_hint(char *hint, int hintsize, char *name, int namesize, struct ast_channel *c, const char *context, const char *exten)</div><div class="ttdoc">If an extension hint exists, return non-zero. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04141">pbx.c:4141</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga740af4550410dae06b748c23ebd0ae24"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a></div><div class="ttdeci">static void astman_start_ack(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03196">manager.c:3196</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="pbx_8h_html_a3261603753916b98888a5a5fc1d505c3"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a3261603753916b98888a5a5fc1d505c3">ast_extension_state2str</a></div><div class="ttdeci">const char * ast_extension_state2str(int extension_state)</div><div class="ttdoc">Return string representation of the state of an extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l03126">pbx.c:3126</a></div></div>
<div class="ttc" id="pbx_8h_html_aed6cfe76441ef995ab80609020a9990c"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aed6cfe76441ef995ab80609020a9990c">ast_extension_state</a></div><div class="ttdeci">int ast_extension_state(struct ast_channel *c, const char *context, const char *exten)</div><div class="ttdoc">Uses hint and devicestate callback to get the state of an extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l03170">pbx.c:3170</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga410d4aa5e53af4cdcb4ec95a0ae8563e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga410d4aa5e53af4cdcb4ec95a0ae8563e">&#9670;&nbsp;</a></span>action_filter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_filter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manager command to add an event filter to a manager session. </p>
<dl class="section see"><dt>See also</dt><dd>For more details look at <a class="el" href="../../df/d72/group__Group__AMI.html#ga2fce7bc082ac5dfa4ea3545b9f34cb66" title="Add an event filter to a manager session. ">manager_add_filter</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06111">6111</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01600">mansession_session::blackfilters</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l00709">filter()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01436">FILTER_ALLOC_FAILED</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01437">FILTER_COMPILE_FAIL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01435">FILTER_SUCCESS</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06162">manager_add_filter()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01599">mansession_session::whitefilters</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;{</div><div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d9/d1e/func__strings_8c.html#af2deb3c7b0d3bdd442bb9ada5fda3d17">filter</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Filter&quot;</span>);</div><div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *operation = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Operation&quot;</span>);</div><div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;</div><div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(operation, <span class="stringliteral">&quot;Add&quot;</span>)) {</div><div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;      res = <a class="code" href="../../df/d72/group__Group__AMI.html#ga2fce7bc082ac5dfa4ea3545b9f34cb66">manager_add_filter</a>(filter, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">whitefilters</a>, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">blackfilters</a>);</div><div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;</div><div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;           <span class="keywordflow">if</span> (res != <a class="code" href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a11037e5e5ecf59d690cb6db101376995">FILTER_SUCCESS</a>) {</div><div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;              <span class="keywordflow">if</span> (res == <a class="code" href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8ae465b39e083c5cc742896c9941dc5a6f">FILTER_ALLOC_FAILED</a>) {</div><div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Internal Error. Failed to allocate regex for filter&quot;</span>);</div><div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;                      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == <a class="code" href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a49c6dd43bada70d0caac95894f037660">FILTER_COMPILE_FAIL</a>) {</div><div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Filter did not compile.  Check the syntax of the filter given.&quot;</span>);</div><div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;                      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;              } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Internal Error. Failed adding filter.&quot;</span>);</div><div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;                      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;                   }</div><div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;      }</div><div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160;</div><div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Success&quot;</span>);</div><div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;   }</div><div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;</div><div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Unknown operation&quot;</span>);</div><div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a11037e5e5ecf59d690cb6db101376995"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a11037e5e5ecf59d690cb6db101376995">FILTER_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01435">manager.c:1435</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="structmansession__session_html_ab5e2ca60735be55e922d5b24f3f83133"><div class="ttname"><a href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">mansession_session::blackfilters</a></div><div class="ttdeci">struct ao2_container * blackfilters</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01600">manager.c:1600</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="structmansession__session_html_a646b71d97b81fea37dbbc9fd33dc5f4a"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">mansession_session::whitefilters</a></div><div class="ttdeci">struct ao2_container * whitefilters</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01599">manager.c:1599</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga2fce7bc082ac5dfa4ea3545b9f34cb66"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga2fce7bc082ac5dfa4ea3545b9f34cb66">manager_add_filter</a></div><div class="ttdeci">static enum add_filter_result manager_add_filter(const char *filter_pattern, struct ao2_container *whitefilters, struct ao2_container *blackfilters)</div><div class="ttdoc">Add an event filter to a manager session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l06162">manager.c:6162</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a49c6dd43bada70d0caac95894f037660"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a49c6dd43bada70d0caac95894f037660">FILTER_COMPILE_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01437">manager.c:1437</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga8d9eefd35c6b7be4f64a4b4dc9d92fd8ae465b39e083c5cc742896c9941dc5a6f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8ae465b39e083c5cc742896c9941dc5a6f">FILTER_ALLOC_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01436">manager.c:1436</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="func__strings_8c_html_af2deb3c7b0d3bdd442bb9ada5fda3d17"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af2deb3c7b0d3bdd442bb9ada5fda3d17">filter</a></div><div class="ttdeci">static int filter(struct ast_channel *chan, const char *cmd, char *parse, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l00709">func_strings.c:709</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaee7a640cdb6c8442d7fc7e7914406e5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaee7a640cdb6c8442d7fc7e7914406e5a">&#9670;&nbsp;</a></span>action_find()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d2/dcc/structmanager__action.html">manager_action</a>* action_find </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01704">1704</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00151">manager_action::action</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, and <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l02937">ast_hook_send_action()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;{</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dcc/structmanager__action.html">manager_action</a> *act;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>, act, list) {</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, act-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>)) {</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(act, +1, <span class="stringliteral">&quot;found action object&quot;</span>);</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      }</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;   }</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;   <span class="keywordflow">return</span> act;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structmanager__action_html_ab1db9bdb9ca2c111e4aef51de082553e"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">manager_action::action</a></div><div class="ttdeci">const char * action</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00151">manager.h:151</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structactions_html"><div class="ttname"><a href="../../dc/de8/structactions.html">actions</a></div><div class="ttdoc">list of actions registered </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01665">manager.c:1665</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structmanager__action_html"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html">manager_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00149">manager.h:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga607030674dbfc12f62148d375b4e320f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga607030674dbfc12f62148d375b4e320f">&#9670;&nbsp;</a></span>action_getconfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_getconfig </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03620">3620</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01335">ast_category_browse_filtered()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01157">ast_category_first()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01028">ast_category_get_name()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01038">ast_category_get_templates()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01033">ast_category_is_template()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03154">ast_config_load2()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00688">ast_str_strlen()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03196">astman_start_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01461">eventqent::category</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00045">CONFIG_FLAG_NOCACHE</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00041">CONFIG_FLAG_WITHCOMMENTS</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00058">CONFIG_STATUS_FILEMISSING</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l00709">filter()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d4f/provision_8c.html#a45e847f4fe454799dfd46a84eca1daf6">templates</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;{</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *fn = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Filename&quot;</span>);</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *category = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Category&quot;</span>);</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d9/d1e/func__strings_8c.html#af2deb3c7b0d3bdd442bb9ada5fda3d17">filter</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Filter&quot;</span>);</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *category_name;</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;   <span class="keywordtype">int</span> catcount = 0;</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;   <span class="keywordtype">int</span> lineno = 0;</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/db2/structast__category.html">ast_category</a> *cur_category = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fabc16a274124ae96d43f8e52e344292c3">CONFIG_FLAG_WITHCOMMENTS</a> | <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee">CONFIG_FLAG_NOCACHE</a> };</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(fn)) {</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Filename not specified&quot;</span>);</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;   }</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;   cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a>(fn, <span class="stringliteral">&quot;manager&quot;</span>, config_flags);</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;   <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a39bacaabcacf47583204c7634e64a2a0">CONFIG_STATUS_FILEMISSING</a>) {</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Config file not found&quot;</span>);</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Config file has invalid format&quot;</span>);</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;   }</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a>(s, m);</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;   <span class="keywordflow">while</span> ((cur_category = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a>(cfg, category, cur_category, filter))) {</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../d8/d4f/provision_8c.html#a45e847f4fe454799dfd46a84eca1daf6">templates</a>;</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;      category_name = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1ac00507f4e5ae91c46f613e5cadae04">ast_category_get_name</a>(cur_category);</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;      lineno = 0;</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Category-%06d: %s\r\n&quot;</span>, catcount, category_name);</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aa5e72d9401477c9775d054babae77e89">ast_category_is_template</a>(cur_category)) {</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;IsTemplate-%06d: %d\r\n&quot;</span>, catcount, 1);</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;      }</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;      <span class="keywordflow">if</span> ((templates = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a54b98eac3831b61f0ec723bc1822405a">ast_category_get_templates</a>(cur_category))</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;         &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(templates) &gt; 0) {</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Templates-%06d: %s\r\n&quot;</span>, catcount, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(templates));</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(templates);</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;      }</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;      <span class="keywordflow">for</span> (v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a39040e0fe9c0bac870c10ad32afbfb17">ast_category_first</a>(cur_category); v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Line-%06d-%06d: %s=%s\r\n&quot;</span>, catcount, lineno++, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;      }</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;      catcount++;</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;   }</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(category) &amp;&amp; catcount == 0) { <span class="comment">/* TODO: actually, a config with no categories doesn&#39;t even get loaded */</span></div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;No categories found\r\n&quot;</span>);</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;   }</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;}</div><div class="ttc" id="include_2asterisk_2config_8h_html_aa5e72d9401477c9775d054babae77e89"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aa5e72d9401477c9775d054babae77e89">ast_category_is_template</a></div><div class="ttdeci">int ast_category_is_template(const struct ast_category *category)</div><div class="ttdoc">Check if category is a template. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01033">main/config.c:1033</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga740af4550410dae06b748c23ebd0ae24"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a></div><div class="ttdeci">static void astman_start_ack(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03196">manager.c:3196</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aab3eac8fa82a86a93c074deb7b77dbc9"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a></div><div class="ttdeci">struct ast_config * ast_config_load2(const char *filename, const char *who_asked, struct ast_flags flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03154">main/config.c:3154</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fabc16a274124ae96d43f8e52e344292c3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fabc16a274124ae96d43f8e52e344292c3">CONFIG_FLAG_WITHCOMMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00041">include/asterisk/config.h:41</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__category_html"><div class="ttname"><a href="../../d7/db2/structast__category.html">ast_category</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00225">main/config.c:225</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a2488abe6cce4868efd018010c663a5fe"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a></div><div class="ttdeci">struct ast_category * ast_category_browse_filtered(struct ast_config *config, const char *category_name, struct ast_category *prev, const char *filter)</div><div class="ttdoc">Browse categories with filters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01335">main/config.c:1335</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a54b98eac3831b61f0ec723bc1822405a"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a54b98eac3831b61f0ec723bc1822405a">ast_category_get_templates</a></div><div class="ttdeci">struct ast_str * ast_category_get_templates(const struct ast_category *category)</div><div class="ttdoc">Return the template names this category inherits from. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01038">main/config.c:1038</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a39040e0fe9c0bac870c10ad32afbfb17"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a39040e0fe9c0bac870c10ad32afbfb17">ast_category_first</a></div><div class="ttdeci">struct ast_variable * ast_category_first(struct ast_category *cat)</div><div class="ttdoc">given a pointer to a category, return the root variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01157">main/config.c:1157</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee">CONFIG_FLAG_NOCACHE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00045">include/asterisk/config.h:45</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="provision_8c_html_a45e847f4fe454799dfd46a84eca1daf6"><div class="ttname"><a href="../../d8/d4f/provision_8c.html#a45e847f4fe454799dfd46a84eca1daf6">templates</a></div><div class="ttdeci">static struct templates templates</div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a39bacaabcacf47583204c7634e64a2a0"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a39bacaabcacf47583204c7634e64a2a0">CONFIG_STATUS_FILEMISSING</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEMISSING</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00058">include/asterisk/config.h:58</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
<div class="ttc" id="func__strings_8c_html_af2deb3c7b0d3bdd442bb9ada5fda3d17"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af2deb3c7b0d3bdd442bb9ada5fda3d17">filter</a></div><div class="ttdeci">static int filter(struct ast_channel *chan, const char *cmd, char *parse, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l00709">func_strings.c:709</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a1ac00507f4e5ae91c46f613e5cadae04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a1ac00507f4e5ae91c46f613e5cadae04">ast_category_get_name</a></div><div class="ttdeci">const char * ast_category_get_name(const struct ast_category *category)</div><div class="ttdoc">Return the name of the category. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01028">main/config.c:1028</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga22cac49ed9e48c4bed52477e6334278e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga22cac49ed9e48c4bed52477e6334278e">&#9670;&nbsp;</a></span>action_getconfigjson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_getconfigjson </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03750">3750</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01335">ast_category_browse_filtered()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01157">ast_category_first()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01028">ast_category_get_name()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01038">ast_category_get_templates()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01033">ast_category_is_template()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03154">ast_config_load2()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00688">ast_str_strlen()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03741">astman_append_json()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03196">astman_start_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01461">eventqent::category</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00045">CONFIG_FLAG_NOCACHE</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00041">CONFIG_FLAG_WITHCOMMENTS</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l00709">filter()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d4f/provision_8c.html#a45e847f4fe454799dfd46a84eca1daf6">templates</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;{</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *fn = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Filename&quot;</span>);</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d9/d1e/func__strings_8c.html#af2deb3c7b0d3bdd442bb9ada5fda3d17">filter</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Filter&quot;</span>);</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *category = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Category&quot;</span>);</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/db2/structast__category.html">ast_category</a> *cur_category = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *category_name;</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;   <span class="keywordtype">int</span> comma1 = 0;</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fabc16a274124ae96d43f8e52e344292c3">CONFIG_FLAG_WITHCOMMENTS</a> | <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee">CONFIG_FLAG_NOCACHE</a> };</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(fn)) {</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Filename not specified&quot;</span>);</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;   }</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;   <span class="keywordflow">if</span> (!(cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a>(fn, <span class="stringliteral">&quot;manager&quot;</span>, config_flags))) {</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Config file not found&quot;</span>);</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Config file has invalid format&quot;</span>);</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;   }</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a>(s, m);</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;JSON: {&quot;</span>);</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;   <span class="keywordflow">while</span> ((cur_category = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a>(cfg, category, cur_category, filter))) {</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;      <span class="keywordtype">int</span> comma2 = 0;</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../d8/d4f/provision_8c.html#a45e847f4fe454799dfd46a84eca1daf6">templates</a>;</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;      category_name = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1ac00507f4e5ae91c46f613e5cadae04">ast_category_get_name</a>(cur_category);</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;%s\&quot;&quot;</span>, comma1 ? <span class="stringliteral">&quot;,&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga5d231019a6733602acb549ee4f82529b">astman_append_json</a>(s, category_name);</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;\&quot;:{&quot;</span>);</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;      comma1 = 1;</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aa5e72d9401477c9775d054babae77e89">ast_category_is_template</a>(cur_category)) {</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;\&quot;istemplate\&quot;:1&quot;</span>);</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;         comma2 = 1;</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;      }</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;      <span class="keywordflow">if</span> ((templates = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a54b98eac3831b61f0ec723bc1822405a">ast_category_get_templates</a>(cur_category))</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;         &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(templates) &gt; 0) {</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;%s&quot;</span>, comma2 ? <span class="stringliteral">&quot;,&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;\&quot;templates\&quot;:\&quot;%s\&quot;&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(templates));</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(templates);</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;         comma2 = 1;</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;      }</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;      <span class="keywordflow">for</span> (v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a39040e0fe9c0bac870c10ad32afbfb17">ast_category_first</a>(cur_category); v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;%s\&quot;&quot;</span>, comma2 ? <span class="stringliteral">&quot;,&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga5d231019a6733602acb549ee4f82529b">astman_append_json</a>(s, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;\&quot;:\&quot;&quot;</span>);</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga5d231019a6733602acb549ee4f82529b">astman_append_json</a>(s, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;\&quot;&quot;</span>);</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;         comma2 = 1;</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;      }</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;}&quot;</span>);</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;   }</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;}\r\n\r\n&quot;</span>);</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;}</div><div class="ttc" id="include_2asterisk_2config_8h_html_aa5e72d9401477c9775d054babae77e89"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aa5e72d9401477c9775d054babae77e89">ast_category_is_template</a></div><div class="ttdeci">int ast_category_is_template(const struct ast_category *category)</div><div class="ttdoc">Check if category is a template. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01033">main/config.c:1033</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga5d231019a6733602acb549ee4f82529b"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5d231019a6733602acb549ee4f82529b">astman_append_json</a></div><div class="ttdeci">static void astman_append_json(struct mansession *s, const char *str)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03741">manager.c:3741</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga740af4550410dae06b748c23ebd0ae24"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a></div><div class="ttdeci">static void astman_start_ack(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03196">manager.c:3196</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aab3eac8fa82a86a93c074deb7b77dbc9"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a></div><div class="ttdeci">struct ast_config * ast_config_load2(const char *filename, const char *who_asked, struct ast_flags flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03154">main/config.c:3154</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fabc16a274124ae96d43f8e52e344292c3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fabc16a274124ae96d43f8e52e344292c3">CONFIG_FLAG_WITHCOMMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00041">include/asterisk/config.h:41</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__category_html"><div class="ttname"><a href="../../d7/db2/structast__category.html">ast_category</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00225">main/config.c:225</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a2488abe6cce4868efd018010c663a5fe"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a></div><div class="ttdeci">struct ast_category * ast_category_browse_filtered(struct ast_config *config, const char *category_name, struct ast_category *prev, const char *filter)</div><div class="ttdoc">Browse categories with filters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01335">main/config.c:1335</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a54b98eac3831b61f0ec723bc1822405a"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a54b98eac3831b61f0ec723bc1822405a">ast_category_get_templates</a></div><div class="ttdeci">struct ast_str * ast_category_get_templates(const struct ast_category *category)</div><div class="ttdoc">Return the template names this category inherits from. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01038">main/config.c:1038</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a39040e0fe9c0bac870c10ad32afbfb17"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a39040e0fe9c0bac870c10ad32afbfb17">ast_category_first</a></div><div class="ttdeci">struct ast_variable * ast_category_first(struct ast_category *cat)</div><div class="ttdoc">given a pointer to a category, return the root variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01157">main/config.c:1157</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee">CONFIG_FLAG_NOCACHE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00045">include/asterisk/config.h:45</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="provision_8c_html_a45e847f4fe454799dfd46a84eca1daf6"><div class="ttname"><a href="../../d8/d4f/provision_8c.html#a45e847f4fe454799dfd46a84eca1daf6">templates</a></div><div class="ttdeci">static struct templates templates</div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
<div class="ttc" id="func__strings_8c_html_af2deb3c7b0d3bdd442bb9ada5fda3d17"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af2deb3c7b0d3bdd442bb9ada5fda3d17">filter</a></div><div class="ttdeci">static int filter(struct ast_channel *chan, const char *cmd, char *parse, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l00709">func_strings.c:709</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a1ac00507f4e5ae91c46f613e5cadae04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a1ac00507f4e5ae91c46f613e5cadae04">ast_category_get_name</a></div><div class="ttdeci">const char * ast_category_get_name(const struct ast_category *category)</div><div class="ttdoc">Return the name of the category. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01028">main/config.c:1028</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga46026a8e1dfda56ac9dc23cd31515def"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga46026a8e1dfda56ac9dc23cd31515def">&#9670;&nbsp;</a></span>action_getvar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_getvar </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04610">4610</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01283">ast_dummy_channel_alloc</a>, <a class="el" href="../../db/d70/pbx__functions_8c_source.html#l00599">ast_func_read()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03196">astman_start_ack()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02046">function_capable_string_allowed_with_auths()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l00235">pbx_retrieve_variable()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01596">mansession_session::writeperm</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;{</div><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *varname = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Variable&quot;</span>);</div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;   <span class="keywordtype">char</span> *varval;</div><div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;   <span class="keywordtype">char</span> workspace[1024];</div><div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;</div><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(varname)) {</div><div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No variable specified&quot;</span>);</div><div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;   }</div><div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;</div><div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;   <span class="comment">/* We don&#39;t want users with insufficient permissions using certain functions. */</span></div><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../df/d72/group__Group__AMI.html#gaa497adca1647f8add683cd71799fc015">function_capable_string_allowed_with_auths</a>(varname, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">writeperm</a>))) {</div><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;GetVar Access Forbidden: Variable&quot;</span>);</div><div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;   }</div><div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;</div><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;      <span class="keywordflow">if</span> (!(c = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name))) {</div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such channel&quot;</span>);</div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;      }</div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;   }</div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;</div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;   workspace[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;   <span class="keywordflow">if</span> (varname[strlen(varname) - 1] == <span class="charliteral">&#39;)&#39;</span>) {</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;      <span class="keywordflow">if</span> (!c) {</div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;         c = <a class="code" href="../../d5/d7b/channel_8h.html#acc0ae2c008f4157736ef290e9ca62572">ast_dummy_channel_alloc</a>();</div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;         <span class="keywordflow">if</span> (c) {</div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#aa4e9618aa036a586af7d7663afd9b507">ast_func_read</a>(c, (<span class="keywordtype">char</span> *) varname, workspace, <span class="keyword">sizeof</span>(workspace));</div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to allocate bogus channel for variable substitution.  Function results may be blank.\n&quot;</span>);</div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#aa4e9618aa036a586af7d7663afd9b507">ast_func_read</a>(c, (<span class="keywordtype">char</span> *) varname, workspace, <span class="keyword">sizeof</span>(workspace));</div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;      }</div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;      varval = workspace;</div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#aaf906a18ba2dcd53c35f59869757521f">pbx_retrieve_variable</a>(c, varname, &amp;varval, workspace, <span class="keyword">sizeof</span>(workspace), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;   }</div><div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;</div><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;   <span class="keywordflow">if</span> (c) {</div><div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;      c = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(c);</div><div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;   }</div><div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;</div><div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a>(s, m);</div><div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Variable: %s\r\nValue: %s\r\n\r\n&quot;</span>, varname, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(varval, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;</div><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;}</div><div class="ttc" id="pbx_8h_html_aa4e9618aa036a586af7d7663afd9b507"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aa4e9618aa036a586af7d7663afd9b507">ast_func_read</a></div><div class="ttdeci">int ast_func_read(struct ast_channel *chan, const char *function, char *workspace, size_t len)</div><div class="ttdoc">executes a read operation on a function </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00599">pbx_functions.c:599</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga740af4550410dae06b748c23ebd0ae24"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a></div><div class="ttdeci">static void astman_start_ack(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03196">manager.c:3196</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="structmansession__session_html_a006a09ed1c51271c4b6f582a2a42ba5f"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">mansession_session::writeperm</a></div><div class="ttdeci">int writeperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01596">manager.c:1596</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_acc0ae2c008f4157736ef290e9ca62572"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acc0ae2c008f4157736ef290e9ca62572">ast_dummy_channel_alloc</a></div><div class="ttdeci">#define ast_dummy_channel_alloc()</div><div class="ttdoc">Create a fake channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01283">channel.h:1283</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="pbx_8h_html_aaf906a18ba2dcd53c35f59869757521f"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aaf906a18ba2dcd53c35f59869757521f">pbx_retrieve_variable</a></div><div class="ttdeci">void pbx_retrieve_variable(struct ast_channel *c, const char *var, char **ret, char *workspace, int workspacelen, struct varshead *headp)</div><div class="ttdoc">Retrieve the value of a builtin variable or variable from the channel variable stack. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l00235">pbx_variables.c:235</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa497adca1647f8add683cd71799fc015"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa497adca1647f8add683cd71799fc015">function_capable_string_allowed_with_auths</a></div><div class="ttdeci">static int function_capable_string_allowed_with_auths(const char *evaluating, int writepermlist)</div><div class="ttdoc">Checks to see if a string which can be used to evaluate functions should be rejected. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02046">manager.c:2046</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2b80579f3d94f43d2e7def7add35dc61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b80579f3d94f43d2e7def7add35dc61">&#9670;&nbsp;</a></span>action_hangup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_hangup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04460">4460</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01408">ast_channel_iterator_all_new()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01360">ast_channel_iterator_destroy()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01422">ast_channel_iterator_next()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00468">ast_channel_softhangup_withcause_locked()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01931">ast_regex_string_to_regex_pattern()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00290">ast_sockaddr_stringify_addr()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03164">astman_send_error_va()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03228">astman_send_list_complete()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03201">astman_send_listack()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01588">mansession_session::managerid</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01592">mansession_session::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;{</div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;   <span class="keywordtype">int</span> causecode = 0; <span class="comment">/* all values &lt;= 0 mean &#39;do not set hangupcause in channel&#39; */</span></div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *name_or_regex = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *cause = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Cause&quot;</span>);</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;   <span class="keywordtype">char</span> idText[256];</div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;   regex_t regexbuf;</div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a> *iter = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *regex_string;</div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;   <span class="keywordtype">int</span> channels_matched = 0;</div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name_or_regex)) {</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No channel specified&quot;</span>);</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;   }</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;      snprintf(idText, <span class="keyword">sizeof</span>(idText), <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;      idText[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;   }</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;</div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cause)) {</div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;      <span class="keywordtype">char</span> *endptr;</div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;      causecode = strtol(cause, &amp;endptr, 10);</div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;      <span class="keywordflow">if</span> (causecode &lt; 0 || causecode &gt; 127 || *endptr != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Invalid &#39;Cause: %s&#39; in manager action Hangup\n&quot;</span>, cause);</div><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;         <span class="comment">/* keep going, better to hangup without cause than to not hang up at all */</span></div><div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;         causecode = 0; <span class="comment">/* do not set channel&#39;s hangupcause */</span></div><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;      }</div><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;   }</div><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;</div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;   <span class="comment">/************************************************/</span></div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;   <span class="comment">/* Regular explicit match channel byname hangup */</span></div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;</div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;   <span class="keywordflow">if</span> (name_or_regex[0] != <span class="charliteral">&#39;/&#39;</span>) {</div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;      <span class="keywordflow">if</span> (!(c = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name_or_regex))) {</div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Request to hangup non-existent channel: %s\n&quot;</span>,</div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;            name_or_regex);</div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such channel&quot;</span>);</div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;      }</div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;</div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;%sManager &#39;%s&#39; from %s, hanging up channel: %s\n&quot;</span>,</div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;         (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24367fd57bd683dd7fdba2db57ce314e">managerid</a> ? <span class="stringliteral">&quot;HTTP &quot;</span> : <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;         s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>,</div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>),</div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c));</div><div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;</div><div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7c3d40097bb8c0da518564d38ab49506">ast_channel_softhangup_withcause_locked</a>(c, causecode);</div><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;      c = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(c);</div><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;</div><div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Channel Hungup&quot;</span>);</div><div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;</div><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;   }</div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;</div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;   <span class="comment">/***********************************************/</span></div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;   <span class="comment">/* find and hangup any channels matching regex */</span></div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;</div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;   regex_string = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(strlen(name_or_regex));</div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;   <span class="keywordflow">if</span> (!regex_string) {</div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Memory Allocation Failure&quot;</span>);</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;   }</div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;   <span class="comment">/* Make &quot;/regex/&quot; into &quot;regex&quot; */</span></div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#af7a2c1bf0a98df4a52ee48a9d9e25510">ast_regex_string_to_regex_pattern</a>(name_or_regex, &amp;regex_string) != 0) {</div><div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Regex format invalid, Channel param should be /regex/&quot;</span>);</div><div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(regex_string);</div><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;   }</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;</div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;   <span class="comment">/* if regex compilation fails, hangup fails */</span></div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;   <span class="keywordflow">if</span> (regcomp(&amp;regexbuf, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(regex_string), REG_EXTENDED | REG_NOSUB)) {</div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga352d583ea36240124638e5c1db088227">astman_send_error_va</a>(s, m, <span class="stringliteral">&quot;Regex compile failed on: %s&quot;</span>, name_or_regex);</div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(regex_string);</div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;   }</div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;</div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a>(s, m, <span class="stringliteral">&quot;Channels hung up will follow&quot;</span>, <span class="stringliteral">&quot;start&quot;</span>);</div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;   iter = <a class="code" href="../../d5/d7b/channel_8h.html#aae1445ed63630123081206e3de5b7b1a">ast_channel_iterator_all_new</a>();</div><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;   <span class="keywordflow">if</span> (iter) {</div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;      <span class="keywordflow">for</span> (; (c = <a class="code" href="../../d5/d7b/channel_8h.html#ab0eadbfdcbdad2c0e8927900ec9b98d5">ast_channel_iterator_next</a>(iter)); <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(c)) {</div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;         <span class="keywordflow">if</span> (regexec(&amp;regexbuf, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c), 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0)) {</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;         }</div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;</div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;%sManager &#39;%s&#39; from %s, hanging up channel: %s\n&quot;</span>,</div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;            (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24367fd57bd683dd7fdba2db57ce314e">managerid</a> ? <span class="stringliteral">&quot;HTTP &quot;</span> : <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;            s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>,</div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>),</div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c));</div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;</div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7c3d40097bb8c0da518564d38ab49506">ast_channel_softhangup_withcause_locked</a>(c, causecode);</div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;         channels_matched++;</div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;</div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s,</div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;            <span class="stringliteral">&quot;Event: ChannelHungup\r\n&quot;</span></div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;            <span class="stringliteral">&quot;Channel: %s\r\n&quot;</span></div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;            <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;            <span class="stringliteral">&quot;\r\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c), idText);</div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;      }</div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a256993c64e12e420aa141c07363db3ef">ast_channel_iterator_destroy</a>(iter);</div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;   }</div><div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;</div><div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;   regfree(&amp;regexbuf);</div><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(regex_string);</div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;</div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac9d1d485a1911880e31a3537223b3f9c">astman_send_list_complete</a>(s, m, <span class="stringliteral">&quot;ChannelsHungupListComplete&quot;</span>, channels_matched);</div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;</div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_a6bf0e68e74c0a9ca9d25251b22e4d64a"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_addr(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00290">netsock2.h:290</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="channel_8h_html_ab0eadbfdcbdad2c0e8927900ec9b98d5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab0eadbfdcbdad2c0e8927900ec9b98d5">ast_channel_iterator_next</a></div><div class="ttdeci">struct ast_channel * ast_channel_iterator_next(struct ast_channel_iterator *i)</div><div class="ttdoc">Get the next channel for a channel iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01422">channel.c:1422</a></div></div>
<div class="ttc" id="structmansession__session_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">mansession_session::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01592">manager.c:1592</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga352d583ea36240124638e5c1db088227"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga352d583ea36240124638e5c1db088227">astman_send_error_va</a></div><div class="ttdeci">void astman_send_error_va(struct mansession *s, const struct message *m, const char *fmt,...)</div><div class="ttdoc">Send error in manager transaction (with va_args support) </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03164">manager.c:3164</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="strings_8h_html_af7a2c1bf0a98df4a52ee48a9d9e25510"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af7a2c1bf0a98df4a52ee48a9d9e25510">ast_regex_string_to_regex_pattern</a></div><div class="ttdeci">int ast_regex_string_to_regex_pattern(const char *regex_string, struct ast_str **regex_pattern)</div><div class="ttdoc">Given a string regex_string in the form of &quot;/regex/&quot;, convert it into the form of &quot;regex&quot;...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01931">main/utils.c:1931</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__channel__iterator_html"><div class="ttname"><a href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01351">channel.c:1351</a></div></div>
<div class="ttc" id="structmansession__session_html_a24367fd57bd683dd7fdba2db57ce314e"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a24367fd57bd683dd7fdba2db57ce314e">mansession_session::managerid</a></div><div class="ttdeci">uint32_t managerid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01588">manager.c:1588</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a256993c64e12e420aa141c07363db3ef"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a256993c64e12e420aa141c07363db3ef">ast_channel_iterator_destroy</a></div><div class="ttdeci">struct ast_channel_iterator * ast_channel_iterator_destroy(struct ast_channel_iterator *i)</div><div class="ttdoc">Destroy a channel iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01360">channel.c:1360</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="channel_8h_html_aae1445ed63630123081206e3de5b7b1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aae1445ed63630123081206e3de5b7b1a">ast_channel_iterator_all_new</a></div><div class="ttdeci">struct ast_channel_iterator * ast_channel_iterator_all_new(void)</div><div class="ttdoc">Create a new channel iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01408">channel.c:1408</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="channel_8h_html_a7c3d40097bb8c0da518564d38ab49506"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7c3d40097bb8c0da518564d38ab49506">ast_channel_softhangup_withcause_locked</a></div><div class="ttdeci">void ast_channel_softhangup_withcause_locked(struct ast_channel *chan, int causecode)</div><div class="ttdoc">Lock the given channel, then request softhangup on the channel with the given causecode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00468">channel.c:468</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac9d1d485a1911880e31a3537223b3f9c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac9d1d485a1911880e31a3537223b3f9c">astman_send_list_complete</a></div><div class="ttdeci">static void astman_send_list_complete(struct mansession *s, const struct message *m, const char *event_name, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03228">manager.c:3228</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga0ee6ee1f4d200f711e2983bffe770a72"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a></div><div class="ttdeci">void astman_send_listack(struct mansession *s, const struct message *m, char *msg, char *listflag)</div><div class="ttdoc">Send ack in manager transaction to begin a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03201">manager.c:3201</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga28572e9c3a5f7c565f68eae095454d3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga28572e9c3a5f7c565f68eae095454d3c">&#9670;&nbsp;</a></span>action_listcategories()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_listcategories </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03682">3682</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01335">ast_category_browse_filtered()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01028">ast_category_get_name()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03154">ast_config_load2()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03196">astman_start_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01461">eventqent::category</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00045">CONFIG_FLAG_NOCACHE</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00041">CONFIG_FLAG_WITHCOMMENTS</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02315">match()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;{</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *fn = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Filename&quot;</span>);</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Match&quot;</span>);</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/db2/structast__category.html">ast_category</a> *category = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fabc16a274124ae96d43f8e52e344292c3">CONFIG_FLAG_WITHCOMMENTS</a> | <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee">CONFIG_FLAG_NOCACHE</a> };</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;   <span class="keywordtype">int</span> catcount = 0;</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(fn)) {</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Filename not specified&quot;</span>);</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;   }</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;   <span class="keywordflow">if</span> (!(cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a>(fn, <span class="stringliteral">&quot;manager&quot;</span>, config_flags))) {</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Config file not found&quot;</span>);</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Config file has invalid format&quot;</span>);</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;   }</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a>(s, m);</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;   <span class="keywordflow">while</span> ((category = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a>(cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, category, match))) {</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Category-%06d: %s\r\n&quot;</span>, catcount, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1ac00507f4e5ae91c46f613e5cadae04">ast_category_get_name</a>(category));</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;      catcount++;</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;   }</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;   <span class="keywordflow">if</span> (catcount == 0) { <span class="comment">/* TODO: actually, a config with no categories doesn&#39;t even get loaded */</span></div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Error: no categories found\r\n&quot;</span>);</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;   }</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga740af4550410dae06b748c23ebd0ae24"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a></div><div class="ttdeci">static void astman_start_ack(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03196">manager.c:3196</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aab3eac8fa82a86a93c074deb7b77dbc9"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a></div><div class="ttdeci">struct ast_config * ast_config_load2(const char *filename, const char *who_asked, struct ast_flags flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03154">main/config.c:3154</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fabc16a274124ae96d43f8e52e344292c3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fabc16a274124ae96d43f8e52e344292c3">CONFIG_FLAG_WITHCOMMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00041">include/asterisk/config.h:41</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a7dd0190efe1c61151a9dbab078bdb263"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a></div><div class="ttdeci">static int match(struct ast_sockaddr *addr, unsigned short callno, unsigned short dcallno, const struct chan_iax2_pvt *cur, int check_dcallno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l02315">chan_iax2.c:2315</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__category_html"><div class="ttname"><a href="../../d7/db2/structast__category.html">ast_category</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00225">main/config.c:225</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a2488abe6cce4868efd018010c663a5fe"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a></div><div class="ttdeci">struct ast_category * ast_category_browse_filtered(struct ast_config *config, const char *category_name, struct ast_category *prev, const char *filter)</div><div class="ttdoc">Browse categories with filters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01335">main/config.c:1335</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee">CONFIG_FLAG_NOCACHE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00045">include/asterisk/config.h:45</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a1ac00507f4e5ae91c46f613e5cadae04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a1ac00507f4e5ae91c46f613e5cadae04">ast_category_get_name</a></div><div class="ttdeci">const char * ast_category_get_name(const struct ast_category *category)</div><div class="ttdoc">Return the name of the category. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01028">main/config.c:1028</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2cf03665d072e22c68953f8dadc65690"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2cf03665d072e22c68953f8dadc65690">&#9670;&nbsp;</a></span>action_listcommands()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_listcommands </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04324">4324</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00151">manager_action::action</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03196">astman_start_ack()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00164">manager_action::authority</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02084">authority_to_str()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02043">MAX_AUTH_PERM_STRING</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00158">manager_action::synopsis</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01596">mansession_session::writeperm</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;{</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dcc/structmanager__action.html">manager_action</a> *cur;</div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *temp = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#gaa7ca48cb0ef2a611f2aa94aeeca70b3b">MAX_AUTH_PERM_STRING</a>);</div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a>(s, m);</div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>, cur, list) {</div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;      <span class="keywordflow">if</span> ((s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">writeperm</a> &amp; cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a321c2ead2a4079cde828f7491c2ef733">authority</a>) || cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a321c2ead2a4079cde828f7491c2ef733">authority</a> == 0) {</div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;%s: %s (Priv: %s)\r\n&quot;</span>,</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;            cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#aa403beb670a3277f542647cc9aa22137">synopsis</a>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga57cc8b67a0e4797ab1a608872d51d397">authority_to_str</a>(cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a321c2ead2a4079cde828f7491c2ef733">authority</a>, &amp;temp));</div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;      }</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;   }</div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;</div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga740af4550410dae06b748c23ebd0ae24"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a></div><div class="ttdeci">static void astman_start_ack(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03196">manager.c:3196</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa7ca48cb0ef2a611f2aa94aeeca70b3b"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa7ca48cb0ef2a611f2aa94aeeca70b3b">MAX_AUTH_PERM_STRING</a></div><div class="ttdeci">#define MAX_AUTH_PERM_STRING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02043">manager.c:2043</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structmanager__action_html_ab1db9bdb9ca2c111e4aef51de082553e"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">manager_action::action</a></div><div class="ttdeci">const char * action</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00151">manager.h:151</a></div></div>
<div class="ttc" id="structmansession__session_html_a006a09ed1c51271c4b6f582a2a42ba5f"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">mansession_session::writeperm</a></div><div class="ttdeci">int writeperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01596">manager.c:1596</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga57cc8b67a0e4797ab1a608872d51d397"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga57cc8b67a0e4797ab1a608872d51d397">authority_to_str</a></div><div class="ttdeci">static const char * authority_to_str(int authority, struct ast_str **res)</div><div class="ttdoc">Convert authority code to a list of options. Note that the EVENT_FLAG_ALL authority will always be re...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02084">manager.c:2084</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structactions_html"><div class="ttname"><a href="../../dc/de8/structactions.html">actions</a></div><div class="ttdoc">list of actions registered </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01665">manager.c:1665</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structmanager__action_html_a321c2ead2a4079cde828f7491c2ef733"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#a321c2ead2a4079cde828f7491c2ef733">manager_action::authority</a></div><div class="ttdeci">int authority</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00164">manager.h:164</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="structmanager__action_html_aa403beb670a3277f542647cc9aa22137"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#aa403beb670a3277f542647cc9aa22137">manager_action::synopsis</a></div><div class="ttdeci">const ast_string_field synopsis</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00158">manager.h:158</a></div></div>
<div class="ttc" id="structmanager__action_html"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html">manager_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00149">manager.h:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga06c45e1e9264f4a9081b0563e062b0a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06c45e1e9264f4a9081b0563e062b0a7">&#9670;&nbsp;</a></span>action_loggerrotate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_loggerrotate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manager command "LoggerRotate" - reloads and rotates the logger in the same manner as the CLI command 'logger rotate'. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06458">6458</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d22/logger_8c_source.html#l01254">ast_logger_rotate()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;{</div><div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/logger_8h.html#a146a5fbbca2bf36ef41ec3170e7ca7af">ast_logger_rotate</a>()) {</div><div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Failed to reload the logger and rotate log files&quot;</span>);</div><div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;   }</div><div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;</div><div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Reloaded the logger and rotated log files&quot;</span>);</div><div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;}</div><div class="ttc" id="logger_8h_html_a146a5fbbca2bf36ef41ec3170e7ca7af"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a146a5fbbca2bf36ef41ec3170e7ca7af">ast_logger_rotate</a></div><div class="ttdeci">int ast_logger_rotate(void)</div><div class="ttdoc">Reload logger while rotating log files. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l01254">logger.c:1254</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga446d7b8021ecd45234cd3053734c9d53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga446d7b8021ecd45234cd3053734c9d53">&#9670;&nbsp;</a></span>action_login()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_login </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04393">4393</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00337">ast_lastreloadtime</a>, <a class="el" href="../../d7/d5b/options_8h_source.html#l00058">AST_OPT_FLAG_FULLY_BOOTED</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00061">ast_options</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00290">ast_sockaddr_stringify_addr()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00336">ast_startuptime</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02298">ast_tvsub()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03505">authenticate()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01594">mansession_session::authenticated</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02084">authority_to_str()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00071">EVENT_FLAG_SYSTEM</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02322">manager_displayconnects()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01588">mansession_session::managerid</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02043">MAX_AUTH_PERM_STRING</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01595">mansession_session::readperm</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01602">mansession_session::send_events</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01486">unauth_sessions</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01592">mansession_session::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;{</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;   <span class="comment">/* still authenticated - don&#39;t process again */</span></div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a>) {</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Already authenticated&quot;</span>);</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;   }</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;</div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#gac0f21735eb8551ed24735a71ea26e13c">authenticate</a>(s, m)) {</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;      sleep(1);</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Authentication failed&quot;</span>);</div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;   }</div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;   s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a> = 1;</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../df/d72/group__Group__AMI.html#gab771766124f3d865c0f312bd0957bc5f">unauth_sessions</a>, -1);</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#ga6ede61db764903806db0e5334d07c010">manager_displayconnects</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>)) {</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;%sManager &#39;%s&#39; logged on from %s\n&quot;</span>, (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24367fd57bd683dd7fdba2db57ce314e">managerid</a> ? <span class="stringliteral">&quot;HTTP &quot;</span> : <span class="stringliteral">&quot;&quot;</span>), s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>, <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>));</div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;   }</div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Authentication accepted&quot;</span>);</div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;   <span class="keywordflow">if</span> ((s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a93274787fdb55a4b0cc204c9d47c2449">send_events</a> &amp; <a class="code" href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a>)</div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;      &amp;&amp; (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#afaabb85e65efc5fed1a5f4d08bf272a4">readperm</a> &amp; <a class="code" href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a>)</div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;      &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343ade4cf3231c69af57ad0527bd46244680">AST_OPT_FLAG_FULLY_BOOTED</a>)) {</div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *auth = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#gaa7ca48cb0ef2a611f2aa94aeeca70b3b">MAX_AUTH_PERM_STRING</a>);</div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *cat_str = <a class="code" href="../../df/d72/group__Group__AMI.html#ga57cc8b67a0e4797ab1a608872d51d397">authority_to_str</a>(<a class="code" href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a>, &amp;auth);</div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;      <span class="keywordtype">long</span> uptime = 0;</div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;      <span class="keywordtype">long</span> lastreloaded = 0;</div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;      <span class="keyword">struct </span>timeval <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;      <span class="keyword">struct </span>timeval curtime = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#acd462f81fa607939af36a9fa33cdbf9d">ast_startuptime</a>.tv_sec) {</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;         <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = <a class="code" href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a>(curtime, <a class="code" href="../../d7/d5b/options_8h.html#acd462f81fa607939af36a9fa33cdbf9d">ast_startuptime</a>);</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;         uptime = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>.tv_sec;</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;      }</div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;</div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a7cdafc5a121e87659887ffc9abe36760">ast_lastreloadtime</a>.tv_sec) {</div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;         <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = <a class="code" href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a>(curtime, <a class="code" href="../../d7/d5b/options_8h.html#a7cdafc5a121e87659887ffc9abe36760">ast_lastreloadtime</a>);</div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;         lastreloaded = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>.tv_sec;</div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;      }</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;</div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Event: FullyBooted\r\n&quot;</span></div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;         <span class="stringliteral">&quot;Privilege: %s\r\n&quot;</span></div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;         <span class="stringliteral">&quot;Uptime: %ld\r\n&quot;</span></div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;         <span class="stringliteral">&quot;LastReload: %ld\r\n&quot;</span></div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;         <span class="stringliteral">&quot;Status: Fully Booted\r\n\r\n&quot;</span>, cat_str, uptime, lastreloaded);</div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;   }</div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_a6bf0e68e74c0a9ca9d25251b22e4d64a"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_addr(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00290">netsock2.h:290</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="structmansession__session_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">mansession_session::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01592">manager.c:1592</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa7ca48cb0ef2a611f2aa94aeeca70b3b"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa7ca48cb0ef2a611f2aa94aeeca70b3b">MAX_AUTH_PERM_STRING</a></div><div class="ttdeci">#define MAX_AUTH_PERM_STRING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02043">manager.c:2043</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac0f21735eb8551ed24735a71ea26e13c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac0f21735eb8551ed24735a71ea26e13c">authenticate</a></div><div class="ttdeci">static int authenticate(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03505">manager.c:3505</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="structmansession__session_html_a29e86d0f6d62ef1edac10a46e4c92095"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">mansession_session::authenticated</a></div><div class="ttdeci">int authenticated</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01594">manager.c:1594</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga57cc8b67a0e4797ab1a608872d51d397"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga57cc8b67a0e4797ab1a608872d51d397">authority_to_str</a></div><div class="ttdeci">static const char * authority_to_str(int authority, struct ast_str **res)</div><div class="ttdoc">Convert authority code to a list of options. Note that the EVENT_FLAG_ALL authority will always be re...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02084">manager.c:2084</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gab771766124f3d865c0f312bd0957bc5f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gab771766124f3d865c0f312bd0957bc5f">unauth_sessions</a></div><div class="ttdeci">static int unauth_sessions</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01486">manager.c:1486</a></div></div>
<div class="ttc" id="structmansession__session_html_afaabb85e65efc5fed1a5f4d08bf272a4"><div class="ttname"><a href="../../df/d05/structmansession__session.html#afaabb85e65efc5fed1a5f4d08bf272a4">mansession_session::readperm</a></div><div class="ttdeci">int readperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01595">manager.c:1595</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="manager_8h_html_a420f0f755e1c3378b45ca7f6f0669ffa"><div class="ttname"><a href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a></div><div class="ttdeci">#define EVENT_FLAG_SYSTEM</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00071">manager.h:71</a></div></div>
<div class="ttc" id="structmansession__session_html_a93274787fdb55a4b0cc204c9d47c2449"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a93274787fdb55a4b0cc204c9d47c2449">mansession_session::send_events</a></div><div class="ttdeci">int send_events</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01602">manager.c:1602</a></div></div>
<div class="ttc" id="options_8h_html_a7cdafc5a121e87659887ffc9abe36760"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a7cdafc5a121e87659887ffc9abe36760">ast_lastreloadtime</a></div><div class="ttdeci">struct timeval ast_lastreloadtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00337">asterisk.c:337</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structmansession__session_html_a24367fd57bd683dd7fdba2db57ce314e"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a24367fd57bd683dd7fdba2db57ce314e">mansession_session::managerid</a></div><div class="ttdeci">uint32_t managerid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01588">manager.c:1588</a></div></div>
<div class="ttc" id="options_8h_html_acd462f81fa607939af36a9fa33cdbf9d"><div class="ttname"><a href="../../d7/d5b/options_8h.html#acd462f81fa607939af36a9fa33cdbf9d">ast_startuptime</a></div><div class="ttdeci">struct timeval ast_startuptime</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00336">asterisk.c:336</a></div></div>
<div class="ttc" id="group__main__options_html_gaa5dba371db31dc4ebecdff7c929ff263"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a></div><div class="ttdeci">struct ast_flags ast_options</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00061">options.c:61</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="time_8h_html_aa13b651c18bc6004cab21ac041d44dd8"><div class="ttname"><a href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a></div><div class="ttdeci">struct timeval ast_tvsub(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the difference of two timevals a - b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02298">extconf.c:2298</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343ade4cf3231c69af57ad0527bd46244680"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343ade4cf3231c69af57ad0527bd46244680">AST_OPT_FLAG_FULLY_BOOTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00058">options.h:58</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga6ede61db764903806db0e5334d07c010"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga6ede61db764903806db0e5334d07c010">manager_displayconnects</a></div><div class="ttdeci">static int manager_displayconnects(struct mansession_session *session)</div><div class="ttdoc">Get displayconnects config option. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02322">manager.c:2322</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga70e9f0abcbf6c0aca44ad6e3f941c266"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga70e9f0abcbf6c0aca44ad6e3f941c266">&#9670;&nbsp;</a></span>action_logoff()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_logoff </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04387">4387</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l03154">astman_send_response()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;{</div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga26805df02a1c92688ae132f29ac4478a">astman_send_response</a>(s, m, <span class="stringliteral">&quot;Goodbye&quot;</span>, <span class="stringliteral">&quot;Thanks for all the fish.&quot;</span>);</div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga26805df02a1c92688ae132f29ac4478a"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga26805df02a1c92688ae132f29ac4478a">astman_send_response</a></div><div class="ttdeci">void astman_send_response(struct mansession *s, const struct message *m, char *resp, char *msg)</div><div class="ttdoc">Send response in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03154">manager.c:3154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1e0bee965191aad897199382d0f36aba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1e0bee965191aad897199382d0f36aba">&#9670;&nbsp;</a></span>action_mailboxcount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_mailboxcount </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l05953">5953</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00692">ast_app_inboxcount2()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03196">astman_start_ack()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">mailbox</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;{</div><div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Mailbox&quot;</span>);</div><div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;   <span class="keywordtype">int</span> newmsgs = 0, oldmsgs = 0, urgentmsgs = 0;;</div><div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;</div><div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(mailbox)) {</div><div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Mailbox not specified&quot;</span>);</div><div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;   }</div><div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ace2a3d783f4f79818e14265ae719f06c">ast_app_inboxcount2</a>(mailbox, &amp;urgentmsgs, &amp;newmsgs, &amp;oldmsgs);</div><div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a>(s, m);</div><div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s,   <span class="stringliteral">&quot;Message: Mailbox Message Count\r\n&quot;</span></div><div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;            <span class="stringliteral">&quot;Mailbox: %s\r\n&quot;</span></div><div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;            <span class="stringliteral">&quot;UrgMessages: %d\r\n&quot;</span></div><div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;            <span class="stringliteral">&quot;NewMessages: %d\r\n&quot;</span></div><div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;            <span class="stringliteral">&quot;OldMessages: %d\r\n&quot;</span></div><div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;            <span class="stringliteral">&quot;\r\n&quot;</span>,</div><div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;            mailbox, urgentmsgs, newmsgs, oldmsgs);</div><div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga740af4550410dae06b748c23ebd0ae24"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a></div><div class="ttdeci">static void astman_start_ack(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03196">manager.c:3196</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6b49cafa2a3d359a2e865992f551874a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a></div><div class="ttdeci">static char mailbox[AST_MAX_MAILBOX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">chan_mgcp.c:204</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ace2a3d783f4f79818e14265ae719f06c"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ace2a3d783f4f79818e14265ae719f06c">ast_app_inboxcount2</a></div><div class="ttdeci">int ast_app_inboxcount2(const char *mailboxes, int *urgentmsgs, int *newmsgs, int *oldmsgs)</div><div class="ttdoc">Determine number of urgent/new/old messages in a mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00692">main/app.c:692</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga41ec46957049f65f0409d8d92f21b428"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga41ec46957049f65f0409d8d92f21b428">&#9670;&nbsp;</a></span>action_mailboxstatus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_mailboxstatus </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l05936">5936</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00655">ast_app_has_voicemail()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03196">astman_start_ack()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">mailbox</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;{</div><div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Mailbox&quot;</span>);</div><div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;</div><div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(mailbox)) {</div><div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Mailbox not specified&quot;</span>);</div><div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;   }</div><div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;   ret = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a76b4d3927cacd1bcd5da9ca8fe375cb6">ast_app_has_voicemail</a>(mailbox, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a>(s, m);</div><div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Message: Mailbox Status\r\n&quot;</span></div><div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;          <span class="stringliteral">&quot;Mailbox: %s\r\n&quot;</span></div><div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;          <span class="stringliteral">&quot;Waiting: %d\r\n\r\n&quot;</span>, mailbox, ret);</div><div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga740af4550410dae06b748c23ebd0ae24"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a></div><div class="ttdeci">static void astman_start_ack(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03196">manager.c:3196</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6b49cafa2a3d359a2e865992f551874a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a></div><div class="ttdeci">static char mailbox[AST_MAX_MAILBOX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">chan_mgcp.c:204</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a76b4d3927cacd1bcd5da9ca8fe375cb6"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a76b4d3927cacd1bcd5da9ca8fe375cb6">ast_app_has_voicemail</a></div><div class="ttdeci">int ast_app_has_voicemail(const char *mailboxes, const char *folder)</div><div class="ttdoc">Determine if a given mailbox has any voicemail If folder is NULL, defaults to &quot;INBOX&quot;. If folder is &quot;INBOX&quot;, includes the number of messages in the &quot;Urgent&quot; folder. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00655">main/app.c:655</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa72169a44884720d85770602ffe6cdb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa72169a44884720d85770602ffe6cdb5">&#9670;&nbsp;</a></span>action_originate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_originate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l05723">5723</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00062">app</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01008">ast_callerid_parse()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04179">ast_exists_extension()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04184">ast_findlabel_extension()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00525">ast_format_cap_remove_by_type()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00320">ast_format_cap_update_by_allow_disallow()</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00148">AST_MAX_PUBLIC_UNIQUEID</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l01153">AST_OUTGOING_WAIT</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08015">ast_pbx_outgoing_app()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l07951">ast_pbx_outgoing_exten()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00563">ast_pthread_create_detached</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00947">ast_shrink_phone_number()</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00550">ast_string_field_build</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l00545">ast_variables_dup()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02906">astman_get_variables()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03164">astman_send_error_va()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05377">fast_originate_helper::cap</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01601">mansession_session::chanvars</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">cid_name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">cid_num</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00048">codecs</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05405">destroy_fast_originate_helper()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05378">fast_originate_helper::early_media</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00071">EVENT_FLAG_SYSTEM</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05413">fast_originate()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">priority</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::priority</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05376">fast_originate_helper::timeout</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00606">ast_assigned_ids::uniqueid</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00607">ast_assigned_ids::uniqueid2</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05395">fast_originate_helper::vars</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01596">mansession_session::writeperm</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;{</div><div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Exten&quot;</span>);</div><div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Context&quot;</span>);</div><div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Priority&quot;</span>);</div><div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Timeout&quot;</span>);</div><div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *callerid = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;CallerID&quot;</span>);</div><div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *account = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Account&quot;</span>);</div><div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/db6/app__mysql_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Application&quot;</span>);</div><div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *appdata = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Data&quot;</span>);</div><div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *async = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Async&quot;</span>);</div><div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Codecs&quot;</span>);</div><div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *early_media = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Earlymedia&quot;</span>);</div><div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> assignedids = {</div><div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;      .<a class="code" href="../../da/de5/structast__assigned__ids.html#af8e97b5c2410839d9826f15f83ac4aa2">uniqueid</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ChannelId&quot;</span>),</div><div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;      .uniqueid2 = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;OtherChannelId&quot;</span>),</div><div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;   };</div><div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *vars = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;   <span class="keywordtype">char</span> *tech, *data;</div><div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;   <span class="keywordtype">char</span> *l = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *n = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;   <span class="keywordtype">int</span> pi = 0;</div><div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;   <span class="keywordtype">int</span> to = 30000;</div><div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;   <span class="keywordtype">int</span> reason = 0;</div><div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256];</div><div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;   <span class="keywordtype">char</span> tmp2[256];</div><div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;   pthread_t th;</div><div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;   <span class="keywordtype">int</span> bridge_early = 0;</div><div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;</div><div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;   <span class="keywordflow">if</span> (!cap) {</div><div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Internal Error. Memory allocation failure.&quot;</span>);</div><div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;   }</div><div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(cap, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>, 0);</div><div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;</div><div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;   <span class="keywordflow">if</span> ((assignedids.<a class="code" href="../../da/de5/structast__assigned__ids.html#af8e97b5c2410839d9826f15f83ac4aa2">uniqueid</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a0b4d23dfd94209395f4feceaa5911e0a">AST_MAX_PUBLIC_UNIQUEID</a> &lt; strlen(assignedids.<a class="code" href="../../da/de5/structast__assigned__ids.html#af8e97b5c2410839d9826f15f83ac4aa2">uniqueid</a>))</div><div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;      || (assignedids.<a class="code" href="../../da/de5/structast__assigned__ids.html#ad386d957fb41c92b9e929fbd2ac7a48c">uniqueid2</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a0b4d23dfd94209395f4feceaa5911e0a">AST_MAX_PUBLIC_UNIQUEID</a> &lt; strlen(assignedids.<a class="code" href="../../da/de5/structast__assigned__ids.html#ad386d957fb41c92b9e929fbd2ac7a48c">uniqueid2</a>))) {</div><div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga352d583ea36240124638e5c1db088227">astman_send_error_va</a>(s, m, <span class="stringliteral">&quot;Uniqueid length exceeds maximum of %d\n&quot;</span>,</div><div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a0b4d23dfd94209395f4feceaa5911e0a">AST_MAX_PUBLIC_UNIQUEID</a>);</div><div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;      res = 0;</div><div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;      <span class="keywordflow">goto</span> fast_orig_cleanup;</div><div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;   }</div><div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;</div><div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Channel not specified&quot;</span>);</div><div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;      res = 0;</div><div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;      <span class="keywordflow">goto</span> fast_orig_cleanup;</div><div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;   }</div><div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(priority) &amp;&amp; (sscanf(priority, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;pi) != 1)) {</div><div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;      <span class="keywordflow">if</span> ((pi = <a class="code" href="../../db/de0/pbx_8h.html#a0be9518646cf9aca4878b313cc02e901">ast_findlabel_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, context, exten, priority, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) &lt; 1) {</div><div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid priority&quot;</span>);</div><div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;         res = 0;</div><div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;         <span class="keywordflow">goto</span> fast_orig_cleanup;</div><div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;      }</div><div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;   }</div><div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(timeout) &amp;&amp; (sscanf(timeout, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;to) != 1)) {</div><div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid timeout&quot;</span>);</div><div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;      res = 0;</div><div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;      <span class="keywordflow">goto</span> fast_orig_cleanup;</div><div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;   }</div><div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp, name, <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;   tech = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;   data = strchr(tmp, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;   <span class="keywordflow">if</span> (!data) {</div><div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid channel&quot;</span>);</div><div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;      res = 0;</div><div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;      <span class="keywordflow">goto</span> fast_orig_cleanup;</div><div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;   }</div><div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;   *data++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp2, callerid, <span class="keyword">sizeof</span>(tmp2));</div><div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;   <a class="code" href="../../de/d47/callerid_8h.html#a39e03ca4e8df3a1d2c75e888d76201df">ast_callerid_parse</a>(tmp2, &amp;n, &amp;l);</div><div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;   <span class="keywordflow">if</span> (n) {</div><div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(n)) {</div><div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;         n = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;      }</div><div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;   }</div><div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;   <span class="keywordflow">if</span> (l) {</div><div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a6a61669b28d0f994e44db5e3baab6ef2">ast_shrink_phone_number</a>(l);</div><div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(l)) {</div><div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;         l = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;      }</div><div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;   }</div><div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(codecs)) {</div><div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a>(cap, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a26c6676e9f2dd9535ea0d5bbd45f98b6">ast_format_cap_update_by_allow_disallow</a>(cap, codecs, 1);</div><div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;   }</div><div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;</div><div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(app) &amp;&amp; s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>) {</div><div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;      <span class="keywordtype">int</span> bad_appdata = 0;</div><div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;      <span class="comment">/* To run the System application (or anything else that goes to</span></div><div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;<span class="comment">       * shell), you must have the additional System privilege */</span></div><div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;      <span class="keywordflow">if</span> (!(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">writeperm</a> &amp; <a class="code" href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a>)</div><div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;         &amp;&amp; (</div><div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;            <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(app, <span class="stringliteral">&quot;system&quot;</span>) ||      <span class="comment">/* System(rm -rf /)</span></div><div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;<span class="comment">                                                 TrySystem(rm -rf /)       */</span></div><div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;            <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(app, <span class="stringliteral">&quot;exec&quot;</span>) ||        <span class="comment">/* Exec(System(rm -rf /))</span></div><div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;<span class="comment">                                                 TryExec(System(rm -rf /)) */</span></div><div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;            <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(app, <span class="stringliteral">&quot;agi&quot;</span>) ||         <span class="comment">/* AGI(/bin/rm,-rf /)</span></div><div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;<span class="comment">                                                 EAGI(/bin/rm,-rf /)       */</span></div><div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;            <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(app, <span class="stringliteral">&quot;mixmonitor&quot;</span>) ||  <span class="comment">/* MixMonitor(blah,,rm -rf)  */</span></div><div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;            <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(app, <span class="stringliteral">&quot;externalivr&quot;</span>) || <span class="comment">/* ExternalIVR(rm -rf)       */</span></div><div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;            <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(app, <span class="stringliteral">&quot;originate&quot;</span>) ||   <span class="comment">/* Originate(Local/1234,app,System,rm -rf) */</span></div><div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;            (strstr(appdata, <span class="stringliteral">&quot;SHELL&quot;</span>) &amp;&amp; (bad_appdata = 1)) ||       <span class="comment">/* NoOp(${SHELL(rm -rf /)})  */</span></div><div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;            (strstr(appdata, <span class="stringliteral">&quot;EVAL&quot;</span>) &amp;&amp; (bad_appdata = 1))           <span class="comment">/* NoOp(${EVAL(${some_var_containing_SHELL})}) */</span></div><div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;            )) {</div><div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;         <span class="keywordtype">char</span> error_buf[64];</div><div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;         snprintf(error_buf, <span class="keyword">sizeof</span>(error_buf), <span class="stringliteral">&quot;Originate Access Forbidden: %s&quot;</span>, bad_appdata ? <span class="stringliteral">&quot;Data&quot;</span> : <span class="stringliteral">&quot;Application&quot;</span>);</div><div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, error_buf);</div><div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;         res = 0;</div><div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;         <span class="keywordflow">goto</span> fast_orig_cleanup;</div><div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;      }</div><div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;   }</div><div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;</div><div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;   <span class="comment">/* Check early if the extension exists. If not, we need to bail out here. */</span></div><div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;   <span class="keywordflow">if</span> (exten &amp;&amp; context &amp;&amp; pi) {</div><div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;      <span class="keywordflow">if</span> (! <a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, context, exten, pi, l)) {</div><div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;         <span class="comment">/* The extension does not exist. */</span></div><div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Extension does not exist.&quot;</span>);</div><div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;         res = 0;</div><div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;         <span class="keywordflow">goto</span> fast_orig_cleanup;</div><div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;      }</div><div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;   }</div><div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;</div><div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;   <span class="comment">/* Allocate requested channel variables */</span></div><div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;   vars = <a class="code" href="../../df/d72/group__Group__AMI.html#ga21a20a25e6d03f6fd32cdc86fe9b53d1">astman_get_variables</a>(m);</div><div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a> &amp;&amp; s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a>) {</div><div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v, *old;</div><div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;      old = vars;</div><div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;      vars = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;</div><div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;      <span class="comment">/* The variables in the AMI originate action are appended at the end of the list, to override any user variables that apply*/</span></div><div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;</div><div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;      vars = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a5cb297844656a440d8ba8553f81e6d4b">ast_variables_dup</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a>);</div><div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;      <span class="keywordflow">if</span> (old) {</div><div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;         <span class="keywordflow">for</span> (v = vars; v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a> );</div><div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;         <span class="keywordflow">if</span> (v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;            v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a> = old; <span class="comment">/* Append originate variables at end of list */</span></div><div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;         }</div><div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;      }</div><div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;   }</div><div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;</div><div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;   <span class="comment">/* For originate async - we can bridge in early media stage */</span></div><div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;   bridge_early = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(early_media);</div><div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;</div><div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(async)) {</div><div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d2/d3c/structfast__originate__helper.html">fast_originate_helper</a> *fast;</div><div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;</div><div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;      fast = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*fast));</div><div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;      <span class="keywordflow">if</span> (!fast || <a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(fast, 252)) {</div><div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(fast);</div><div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(vars);</div><div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;         res = -1;</div><div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;            <a class="code" href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a>(fast, <a class="code" href="../../d2/d3c/structfast__originate__helper.html#ac0b1407c0017cb917a9687f90d16b106">idtext</a>, <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;         }</div><div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(fast, tech, tech);</div><div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(fast, data, data);</div><div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(fast, app, app);</div><div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(fast, appdata, appdata);</div><div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(fast, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>, l);</div><div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(fast, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>, n);</div><div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(fast, context, context);</div><div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(fast, exten, exten);</div><div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(fast, account, account);</div><div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(fast, <a class="code" href="../../d2/d3c/structfast__originate__helper.html#a88ee7e279ede6839297441d1768ec6d1">channelid</a>, assignedids.<a class="code" href="../../da/de5/structast__assigned__ids.html#af8e97b5c2410839d9826f15f83ac4aa2">uniqueid</a>);</div><div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(fast, <a class="code" href="../../d2/d3c/structfast__originate__helper.html#a8c6534ea809fe4fb40a264409bf22e14">otherchannelid</a>, assignedids.<a class="code" href="../../da/de5/structast__assigned__ids.html#ad386d957fb41c92b9e929fbd2ac7a48c">uniqueid2</a>);</div><div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;         fast-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a134fe67053d035e763d6cf99916c1bf8">vars</a> = <a class="code" href="../../d2/d3c/structfast__originate__helper.html#a134fe67053d035e763d6cf99916c1bf8">vars</a>;</div><div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;         fast-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a> = <a class="code" href="../../d2/d3c/structfast__originate__helper.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>;</div><div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;         cap = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">/* transfered originate helper the capabilities structure.  It is now responsible for freeing it. */</span></div><div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;         fast-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = to;</div><div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;         fast-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#ae558fc61c9cbf70fb44ec3fef6136129">early_media</a> = bridge_early;</div><div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;         fast-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a> = pi;</div><div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a>(&amp;th, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/d72/group__Group__AMI.html#gab0df757e83667997fd4b802de7c7c45b">fast_originate</a>, fast)) {</div><div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga2d7639d606b2516454d130399c840b35">destroy_fast_originate_helper</a>(fast);</div><div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;            res = -1;</div><div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;            res = 0;</div><div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;         }</div><div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;      }</div><div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(app)) {</div><div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;      res = <a class="code" href="../../db/de0/pbx_8h.html#a2afffb175879297ed07ec21df02fa6dc">ast_pbx_outgoing_app</a>(tech, cap, data, to, app, appdata, &amp;reason,</div><div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a24a619e5cc5e3f683322295991c57916a90d4fb6299afc301b2bfc05da78eb662">AST_OUTGOING_WAIT</a>, l, n, vars, account, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;            assignedids.<a class="code" href="../../da/de5/structast__assigned__ids.html#af8e97b5c2410839d9826f15f83ac4aa2">uniqueid</a> ? &amp;assignedids : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(vars);</div><div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;      <span class="keywordflow">if</span> (exten &amp;&amp; context &amp;&amp; pi) {</div><div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;         res = <a class="code" href="../../db/de0/pbx_8h.html#a6c3a35983760904213206a8f0a7df9c9">ast_pbx_outgoing_exten</a>(tech, cap, data, to,</div><div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;               context, exten, pi, &amp;reason, <a class="code" href="../../db/de0/pbx_8h.html#a24a619e5cc5e3f683322295991c57916a90d4fb6299afc301b2bfc05da78eb662">AST_OUTGOING_WAIT</a>,</div><div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;               l, n, vars, account, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, bridge_early,</div><div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;               assignedids.<a class="code" href="../../da/de5/structast__assigned__ids.html#af8e97b5c2410839d9826f15f83ac4aa2">uniqueid</a> ? &amp;assignedids : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(vars);</div><div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Originate with &#39;Exten&#39; requires &#39;Context&#39; and &#39;Priority&#39;&quot;</span>);</div><div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(vars);</div><div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;         res = 0;</div><div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;         <span class="keywordflow">goto</span> fast_orig_cleanup;</div><div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;      }</div><div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;   }</div><div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Originate successfully queued&quot;</span>);</div><div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Originate failed&quot;</span>);</div><div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;   }</div><div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;</div><div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;fast_orig_cleanup:</div><div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap);</div><div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;}</div><div class="ttc" id="structfast__originate__helper_html"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html">fast_originate_helper</a></div><div class="ttdoc">helper function for originate </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05375">manager.c:5375</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="pbx_8h_html_a24a619e5cc5e3f683322295991c57916a90d4fb6299afc301b2bfc05da78eb662"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a24a619e5cc5e3f683322295991c57916a90d4fb6299afc301b2bfc05da78eb662">AST_OUTGOING_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01153">pbx.h:1153</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#acec9ce2df15222151ad66fcb1d74eb9f">fast_originate_helper::priority</a></div><div class="ttdeci">int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a493b57f443cc38b3d3df9c1e584d9d82">fast_originate_helper::timeout</a></div><div class="ttdeci">int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05376">manager.c:5376</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a8c6534ea809fe4fb40a264409bf22e14"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a8c6534ea809fe4fb40a264409bf22e14">fast_originate_helper::otherchannelid</a></div><div class="ttdeci">const ast_string_field otherchannelid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="utils_8h_html_a832647380b1f97e7ac1b4492f8816d46"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a></div><div class="ttdeci">#define ast_pthread_create_detached(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00563">utils.h:563</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="structast__assigned__ids_html"><div class="ttname"><a href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a></div><div class="ttdoc">Structure to pass both assignedid values to channel drivers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00605">channel.h:605</a></div></div>
<div class="ttc" id="structmansession__session_html_a006a09ed1c51271c4b6f582a2a42ba5f"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">mansession_session::writeperm</a></div><div class="ttdeci">int writeperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01596">manager.c:1596</a></div></div>
<div class="ttc" id="structast__assigned__ids_html_af8e97b5c2410839d9826f15f83ac4aa2"><div class="ttname"><a href="../../da/de5/structast__assigned__ids.html#af8e97b5c2410839d9826f15f83ac4aa2">ast_assigned_ids::uniqueid</a></div><div class="ttdeci">const char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00606">channel.h:606</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_ae558fc61c9cbf70fb44ec3fef6136129"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#ae558fc61c9cbf70fb44ec3fef6136129">fast_originate_helper::early_media</a></div><div class="ttdeci">int early_media</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05378">manager.c:5378</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a970f3be80cbd08a1591eb8588f3cd54b">fast_originate_helper::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05377">manager.c:5377</a></div></div>
<div class="ttc" id="pbx_8h_html_a6c3a35983760904213206a8f0a7df9c9"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6c3a35983760904213206a8f0a7df9c9">ast_pbx_outgoing_exten</a></div><div class="ttdeci">int ast_pbx_outgoing_exten(const char *type, struct ast_format_cap *cap, const char *addr, int timeout, const char *context, const char *exten, int priority, int *reason, int synchronous, const char *cid_num, const char *cid_name, struct ast_variable *vars, const char *account, struct ast_channel **locked_channel, int early_media, const struct ast_assigned_ids *assignedids)</div><div class="ttdoc">Synchronously or asynchronously make an outbound call and send it to a particular extension...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l07951">pbx.c:7951</a></div></div>
<div class="ttc" id="cdr__beanstalkd_8c_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a></div><div class="ttdeci">static int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">cdr_beanstalkd.c:76</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a29e973bd94bfbaf59d939bd1bc988c32"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a></div><div class="ttdeci">static char cid_num[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">chan_mgcp.c:164</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga352d583ea36240124638e5c1db088227"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga352d583ea36240124638e5c1db088227">astman_send_error_va</a></div><div class="ttdeci">void astman_send_error_va(struct mansession *s, const struct message *m, const char *fmt,...)</div><div class="ttdoc">Send error in manager transaction (with va_args support) </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03164">manager.c:3164</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structmansession__session_html_a06c0918fa1a1aac3d386fca59b12327c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a06c0918fa1a1aac3d386fca59b12327c">mansession_session::chanvars</a></div><div class="ttdeci">struct ast_variable * chanvars</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01601">manager.c:1601</a></div></div>
<div class="ttc" id="format__cap_8h_html_a26c6676e9f2dd9535ea0d5bbd45f98b6"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a26c6676e9f2dd9535ea0d5bbd45f98b6">ast_format_cap_update_by_allow_disallow</a></div><div class="ttdeci">int ast_format_cap_update_by_allow_disallow(struct ast_format_cap *cap, const char *list, int allowing)</div><div class="ttdoc">Parse an &quot;allow&quot; or &quot;deny&quot; list and modify a format capabilities structure accordingly. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00320">format_cap.c:320</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga2d7639d606b2516454d130399c840b35"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga2d7639d606b2516454d130399c840b35">destroy_fast_originate_helper</a></div><div class="ttdeci">static void destroy_fast_originate_helper(struct fast_originate_helper *doomed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05405">manager.c:5405</a></div></div>
<div class="ttc" id="manager_8h_html_a420f0f755e1c3378b45ca7f6f0669ffa"><div class="ttname"><a href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a></div><div class="ttdeci">#define EVENT_FLAG_SYSTEM</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00071">manager.h:71</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="codec_8c_html_a26d06e92c695d54e16beb8070dc5461d"><div class="ttname"><a href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a></div><div class="ttdeci">static struct ao2_container * codecs</div><div class="ttdoc">Registered codecs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00048">codec.c:48</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a134fe67053d035e763d6cf99916c1bf8"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a134fe67053d035e763d6cf99916c1bf8">fast_originate_helper::vars</a></div><div class="ttdeci">struct ast_variable * vars</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05395">manager.c:5395</a></div></div>
<div class="ttc" id="pbx_8h_html_a64a5b8fdc919806135ad427aca9e71b7"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a></div><div class="ttdeci">int ast_exists_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Determine whether an extension exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04179">pbx.c:4179</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dc6fa9191c19396cfaa57113f5b4af2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a></div><div class="ttdeci">void ast_format_cap_remove_by_type(struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Remove all formats matching a specific format type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00525">format_cap.c:525</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="pbx_8h_html_a0be9518646cf9aca4878b313cc02e901"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a0be9518646cf9aca4878b313cc02e901">ast_findlabel_extension</a></div><div class="ttdeci">int ast_findlabel_extension(struct ast_channel *c, const char *context, const char *exten, const char *label, const char *callerid)</div><div class="ttdoc">Find the priority of an extension that has the specified label. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04184">pbx.c:4184</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga21a20a25e6d03f6fd32cdc86fe9b53d1"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga21a20a25e6d03f6fd32cdc86fe9b53d1">astman_get_variables</a></div><div class="ttdeci">struct ast_variable * astman_get_variables(const struct message *m)</div><div class="ttdoc">Get a linked list of the Variable: headers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02906">manager.c:2906</a></div></div>
<div class="ttc" id="pbx_8h_html_a2afffb175879297ed07ec21df02fa6dc"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a2afffb175879297ed07ec21df02fa6dc">ast_pbx_outgoing_app</a></div><div class="ttdeci">int ast_pbx_outgoing_app(const char *type, struct ast_format_cap *cap, const char *addr, int timeout, const char *app, const char *appdata, int *reason, int synchronous, const char *cid_num, const char *cid_name, struct ast_variable *vars, const char *account, struct ast_channel **locked_channel, const struct ast_assigned_ids *assignedids)</div><div class="ttdoc">Synchronously or asynchronously make an outbound call and execute an application on the channel...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08015">pbx.c:8015</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a0d78ab95e54db8c72a64038cfefb5161"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a></div><div class="ttdeci">char * strcasestr(const char *, const char *)</div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="stringfields_8h_html_a8b9f4347fc72720cc5cead952b54abe9"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a></div><div class="ttdeci">#define ast_string_field_build(x, field, fmt, args...)</div><div class="ttdoc">Set a field to a complex (built) value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00550">stringfields.h:550</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ade5a89f9bee15a492c760ec1765a292d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a></div><div class="ttdeci">static char cid_name[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">chan_mgcp.c:165</a></div></div>
<div class="ttc" id="channel_8h_html_a0b4d23dfd94209395f4feceaa5911e0a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0b4d23dfd94209395f4feceaa5911e0a">AST_MAX_PUBLIC_UNIQUEID</a></div><div class="ttdeci">#define AST_MAX_PUBLIC_UNIQUEID</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00148">channel.h:148</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gab0df757e83667997fd4b802de7c7c45b"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gab0df757e83667997fd4b802de7c7c45b">fast_originate</a></div><div class="ttdeci">static void * fast_originate(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05413">manager.c:5413</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a88ee7e279ede6839297441d1768ec6d1"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a88ee7e279ede6839297441d1768ec6d1">fast_originate_helper::channelid</a></div><div class="ttdeci">const ast_string_field channelid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_ac0b1407c0017cb917a9687f90d16b106"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#ac0b1407c0017cb917a9687f90d16b106">fast_originate_helper::idtext</a></div><div class="ttdeci">const ast_string_field idtext</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="callerid_8h_html_a6a61669b28d0f994e44db5e3baab6ef2"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a6a61669b28d0f994e44db5e3baab6ef2">ast_shrink_phone_number</a></div><div class="ttdeci">void ast_shrink_phone_number(char *n)</div><div class="ttdoc">Shrink a phone number in place to just digits (more accurately it just removes ()&amp;#39;s, .&amp;#39;s, and -&amp;#39;s... </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00947">callerid.c:947</a></div></div>
<div class="ttc" id="app__mysql_8c_html_a1d9b1eccfc259a14525ce817482a3f88"><div class="ttname"><a href="../../d0/db6/app__mysql_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a></div><div class="ttdeci">static const char app[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db6/app__mysql_8c_source.html#l00062">app_mysql.c:62</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="structast__assigned__ids_html_ad386d957fb41c92b9e929fbd2ac7a48c"><div class="ttname"><a href="../../da/de5/structast__assigned__ids.html#ad386d957fb41c92b9e929fbd2ac7a48c">ast_assigned_ids::uniqueid2</a></div><div class="ttdeci">const char * uniqueid2</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00607">channel.h:607</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a5cb297844656a440d8ba8553f81e6d4b"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a5cb297844656a440d8ba8553f81e6d4b">ast_variables_dup</a></div><div class="ttdeci">struct ast_variable * ast_variables_dup(struct ast_variable *var)</div><div class="ttdoc">Duplicate variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00545">main/config.c:545</a></div></div>
<div class="ttc" id="callerid_8h_html_a39e03ca4e8df3a1d2c75e888d76201df"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a39e03ca4e8df3a1d2c75e888d76201df">ast_callerid_parse</a></div><div class="ttdeci">int ast_callerid_parse(char *instr, char **name, char **location)</div><div class="ttdoc">Destructively parse inbuf into name and location (or number) </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01008">callerid.c:1008</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaea3a1b38ba96480a2f09d7109a69b0fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea3a1b38ba96480a2f09d7109a69b0fd">&#9670;&nbsp;</a></span>action_ping()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_ping </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03602">3602</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;{</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *actionid = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;   <span class="keyword">struct </span>timeval now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Response: Success\r\n&quot;</span>);</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(actionid)){</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, actionid);</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;   }</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;      s,</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;      <span class="stringliteral">&quot;Ping: Pong\r\n&quot;</span></div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;      <span class="stringliteral">&quot;Timestamp: %ld.%06lu\r\n&quot;</span></div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;      <span class="stringliteral">&quot;\r\n&quot;</span>,</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;      (<span class="keywordtype">long</span>) now.tv_sec, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) now.tv_usec);</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga9800654edab91105eb77e4ae88417387"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9800654edab91105eb77e4ae88417387">&#9670;&nbsp;</a></span>action_presencestate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_presencestate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06004">6004</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dd7/presencestate_8h_source.html#l00039">AST_PRESENCE_INVALID</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00103">ast_presence_state2str()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03164">astman_send_error_va()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03196">astman_start_ack()</a>, <a class="el" href="../../d8/d3a/bridges_8c_source.html#l00178">provider</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;{</div><div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d8/d3a/bridges_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Provider&quot;</span>);</div><div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;   <span class="keywordtype">char</span> *subtype;</div><div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>;</div><div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;</div><div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(provider)) {</div><div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No provider specified&quot;</span>);</div><div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;   }</div><div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;</div><div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;   state = <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a>(provider, &amp;subtype, &amp;message);</div><div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;   <span class="keywordflow">if</span> (state == <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a5b541c7f37468daf2ee6cfe488949adb">AST_PRESENCE_INVALID</a>) {</div><div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga352d583ea36240124638e5c1db088227">astman_send_error_va</a>(s, m, <span class="stringliteral">&quot;Invalid provider %s or provider in invalid state&quot;</span>, provider);</div><div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;   }</div><div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;</div><div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a>(s, m);</div><div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Message: Presence State\r\n&quot;</span></div><div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;                    <span class="stringliteral">&quot;State: %s\r\n&quot;</span>, <a class="code" href="../../d6/dd7/presencestate_8h.html#aec78c2b072d51416200d34bdd06827a7">ast_presence_state2str</a>(state));</div><div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;</div><div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(subtype)) {</div><div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Subtype: %s\r\n&quot;</span>, subtype);</div><div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;   }</div><div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;</div><div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(message)) {</div><div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;      <span class="comment">/* XXX The Message header here is deprecated as it</span></div><div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;<span class="comment">       * duplicates the action response header &#39;Message&#39;.</span></div><div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;<span class="comment">       * Remove it in the next major revision of AMI.</span></div><div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Message: %s\r\n&quot;</span></div><div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;                       <span class="stringliteral">&quot;PresenceMessage: %s\r\n&quot;</span>,</div><div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;                       message, message);</div><div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;   }</div><div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;</div><div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga740af4550410dae06b748c23ebd0ae24"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga740af4550410dae06b748c23ebd0ae24">astman_start_ack</a></div><div class="ttdeci">static void astman_start_ack(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03196">manager.c:3196</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga352d583ea36240124638e5c1db088227"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga352d583ea36240124638e5c1db088227">astman_send_error_va</a></div><div class="ttdeci">void astman_send_error_va(struct mansession *s, const struct message *m, const char *fmt,...)</div><div class="ttdoc">Send error in manager transaction (with va_args support) </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03164">manager.c:3164</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a></div><div class="ttdeci">ast_presence_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00026">presencestate.h:26</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="bridges_8c_html_ab1760b9a6a6c8d063d49ab9b5bcdfa49"><div class="ttname"><a href="../../d8/d3a/bridges_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a></div><div class="ttdeci">static struct prometheus_metrics_provider provider</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3a/bridges_8c_source.html#l00178">bridges.c:178</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1a5b541c7f37468daf2ee6cfe488949adb"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a5b541c7f37468daf2ee6cfe488949adb">AST_PRESENCE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00039">presencestate.h:39</a></div></div>
<div class="ttc" id="presencestate_8h_html_aec78c2b072d51416200d34bdd06827a7"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#aec78c2b072d51416200d34bdd06827a7">ast_presence_state2str</a></div><div class="ttdeci">const char * ast_presence_state2str(enum ast_presence_state state)</div><div class="ttdoc">Convert presence state to text string for output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00103">presencestate.c:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga97662516a5cd49e552cf9d2e30987aac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97662516a5cd49e552cf9d2e30987aac">&#9670;&nbsp;</a></span>action_redirect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_redirect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>action_redirect: The redirect manager command </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04973">4973</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d94/pbx_8c_source.html#l07011">ast_async_goto()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l11235">ast_channel_clear_flag()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10746">ast_channel_is_bridged()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00459">ast_check_hangup_locked()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04184">ast_findlabel_extension()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01036">AST_FLAG_BRIDGE_DUAL_REDIRECT_WAIT</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">priority</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;{</div><div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[256];</div><div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *name2 = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ExtraChannel&quot;</span>);</div><div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Exten&quot;</span>);</div><div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *exten2 = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ExtraExten&quot;</span>);</div><div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Context&quot;</span>);</div><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *context2 = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ExtraContext&quot;</span>);</div><div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Priority&quot;</span>);</div><div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *priority2 = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ExtraPriority&quot;</span>);</div><div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan2;</div><div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;   <span class="keywordtype">int</span> pi = 0;</div><div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;   <span class="keywordtype">int</span> pi2 = 0;</div><div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;   <span class="keywordtype">int</span> chan1_wait = 0;</div><div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;   <span class="keywordtype">int</span> chan2_wait = 0;</div><div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;</div><div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Channel not specified&quot;</span>);</div><div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;   }</div><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;</div><div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(context)) {</div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Context not specified&quot;</span>);</div><div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;   }</div><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(exten)) {</div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Exten not specified&quot;</span>);</div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;   }</div><div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(priority)) {</div><div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Priority not specified&quot;</span>);</div><div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;   }</div><div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;   <span class="keywordflow">if</span> (sscanf(priority, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;pi) != 1) {</div><div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;      pi = <a class="code" href="../../db/de0/pbx_8h.html#a0be9518646cf9aca4878b313cc02e901">ast_findlabel_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, context, exten, priority, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;   }</div><div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;   <span class="keywordflow">if</span> (pi &lt; 1) {</div><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Priority is invalid&quot;</span>);</div><div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;   }</div><div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;</div><div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name2) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(context2)) {</div><div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;      <span class="comment">/* We have an ExtraChannel and an ExtraContext */</span></div><div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(exten2)) {</div><div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;ExtraExten not specified&quot;</span>);</div><div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;      }</div><div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(priority2)) {</div><div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;ExtraPriority not specified&quot;</span>);</div><div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;      }</div><div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;      <span class="keywordflow">if</span> (sscanf(priority2, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;pi2) != 1) {</div><div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;         pi2 = <a class="code" href="../../db/de0/pbx_8h.html#a0be9518646cf9aca4878b313cc02e901">ast_findlabel_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, context2, exten2, priority2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;      }</div><div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;      <span class="keywordflow">if</span> (pi2 &lt; 1) {</div><div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;ExtraPriority is invalid&quot;</span>);</div><div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;      }</div><div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;   }</div><div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;</div><div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name);</div><div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;      snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Channel does not exist: %s&quot;</span>, name);</div><div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, buf);</div><div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;   }</div><div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a>(chan)) {</div><div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Redirect failed, channel not up.&quot;</span>);</div><div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;   }</div><div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;</div><div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name2)) {</div><div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;      <span class="comment">/* Single channel redirect in progress. */</span></div><div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;      res = <a class="code" href="../../db/de0/pbx_8h.html#ae0ba2eb966a9e3376de61d30513f7302">ast_async_goto</a>(chan, context, exten, pi);</div><div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;      <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Redirect successful&quot;</span>);</div><div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Redirect failed&quot;</span>);</div><div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;      }</div><div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;   }</div><div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;</div><div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;   chan2 = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name2);</div><div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;   <span class="keywordflow">if</span> (!chan2) {</div><div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;      snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;ExtraChannel does not exist: %s&quot;</span>, name2);</div><div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, buf);</div><div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;   }</div><div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a>(chan2)) {</div><div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Redirect failed, extra channel not up.&quot;</span>);</div><div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;      chan2 = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan2);</div><div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;   }</div><div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;</div><div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;   <span class="comment">/* Dual channel redirect in progress. */</span></div><div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a>(chan)) {</div><div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a21a03514eb4882151cf8768f6f9cd7ec">AST_FLAG_BRIDGE_DUAL_REDIRECT_WAIT</a>);</div><div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;      chan1_wait = 1;</div><div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;   }</div><div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;</div><div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan2);</div><div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a>(chan2)) {</div><div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan2), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a21a03514eb4882151cf8768f6f9cd7ec">AST_FLAG_BRIDGE_DUAL_REDIRECT_WAIT</a>);</div><div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;      chan2_wait = 1;</div><div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;   }</div><div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan2);</div><div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;</div><div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;   res = <a class="code" href="../../db/de0/pbx_8h.html#ae0ba2eb966a9e3376de61d30513f7302">ast_async_goto</a>(chan, context, exten, pi);</div><div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(context2)) {</div><div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;         res = <a class="code" href="../../db/de0/pbx_8h.html#ae0ba2eb966a9e3376de61d30513f7302">ast_async_goto</a>(chan2, context2, exten2, pi2);</div><div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;         res = <a class="code" href="../../db/de0/pbx_8h.html#ae0ba2eb966a9e3376de61d30513f7302">ast_async_goto</a>(chan2, context, exten, pi);</div><div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;      }</div><div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;      <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Dual Redirect successful&quot;</span>);</div><div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Secondary redirect failed&quot;</span>);</div><div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;      }</div><div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Redirect failed&quot;</span>);</div><div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;   }</div><div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;</div><div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;   <span class="comment">/* Release the bridge wait. */</span></div><div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;   <span class="keywordflow">if</span> (chan1_wait) {</div><div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a21a03514eb4882151cf8768f6f9cd7ec">AST_FLAG_BRIDGE_DUAL_REDIRECT_WAIT</a>);</div><div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;   }</div><div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;   <span class="keywordflow">if</span> (chan2_wait) {</div><div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a>(chan2, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a21a03514eb4882151cf8768f6f9cd7ec">AST_FLAG_BRIDGE_DUAL_REDIRECT_WAIT</a>);</div><div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;   }</div><div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;</div><div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;   chan2 = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan2);</div><div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="channel_8h_html_a723ac44c92b9edb6c1a731e01edacb4a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a></div><div class="ttdeci">int ast_check_hangup_locked(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00459">channel.c:459</a></div></div>
<div class="ttc" id="channel_8h_html_a1d9fcff85d7adbe0bd54f88eb927998c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a></div><div class="ttdeci">void ast_channel_clear_flag(struct ast_channel *chan, unsigned int flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11235">channel.c:11235</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__beanstalkd_8c_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a></div><div class="ttdeci">static int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">cdr_beanstalkd.c:76</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a21a03514eb4882151cf8768f6f9cd7ec"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a21a03514eb4882151cf8768f6f9cd7ec">AST_FLAG_BRIDGE_DUAL_REDIRECT_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01036">channel.h:1036</a></div></div>
<div class="ttc" id="pbx_8h_html_a0be9518646cf9aca4878b313cc02e901"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a0be9518646cf9aca4878b313cc02e901">ast_findlabel_extension</a></div><div class="ttdeci">int ast_findlabel_extension(struct ast_channel *c, const char *context, const char *exten, const char *label, const char *callerid)</div><div class="ttdoc">Find the priority of an extension that has the specified label. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04184">pbx.c:4184</a></div></div>
<div class="ttc" id="channel_8h_html_aa0a52e573af67cb0f29095177128d186"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a></div><div class="ttdeci">int ast_channel_is_bridged(const struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10746">channel.c:10746</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="pbx_8h_html_ae0ba2eb966a9e3376de61d30513f7302"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ae0ba2eb966a9e3376de61d30513f7302">ast_async_goto</a></div><div class="ttdeci">int ast_async_goto(struct ast_channel *chan, const char *context, const char *exten, int priority)</div><div class="ttdoc">Set the channel to next execute the specified dialplan location. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l07011">pbx.c:7011</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8678a44da3d5cf72e6ea38409d2898bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8678a44da3d5cf72e6ea38409d2898bb">&#9670;&nbsp;</a></span>action_reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_reload </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a reload event. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06358">6358</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d96/loader_8c_source.html#l01562">ast_module_reload()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00113">AST_MODULE_RELOAD_ERROR</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00114">AST_MODULE_RELOAD_IN_PROGRESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00112">AST_MODULE_RELOAD_NOT_FOUND</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00116">AST_MODULE_RELOAD_NOT_IMPLEMENTED</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00111">AST_MODULE_RELOAD_QUEUED</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00110">AST_MODULE_RELOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00115">AST_MODULE_RELOAD_UNINITIALIZED</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160;{</div><div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *module = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Module&quot;</span>);</div><div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7">ast_module_reload_result</a> res = <a class="code" href="../../d5/d16/module_8h.html#af9e3b4ae730e43312e00fcbc1707588b">ast_module_reload</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(module, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;</div><div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;   <span class="keywordflow">switch</span> (res) {</div><div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7ac0be7032578c68902708da91e5e7d71a">AST_MODULE_RELOAD_NOT_FOUND</a>:</div><div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such module&quot;</span>);</div><div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7aae470b102da613cbd14c611b36e75b11">AST_MODULE_RELOAD_NOT_IMPLEMENTED</a>:</div><div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Module does not support reload&quot;</span>);</div><div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7aa719b0c0d0c58b358deaf9933a8dd3f6">AST_MODULE_RELOAD_ERROR</a>:</div><div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;An unknown error occurred&quot;</span>);</div><div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7a2a1ae659f41755f987f33586cb43fade">AST_MODULE_RELOAD_IN_PROGRESS</a>:</div><div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;A reload is in progress&quot;</span>);</div><div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7ad06be99930a02b142bf370e2627849be">AST_MODULE_RELOAD_UNINITIALIZED</a>:</div><div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Module not initialized&quot;</span>);</div><div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7a3c7e5ccf0a567b17833b1e60ba387abf">AST_MODULE_RELOAD_QUEUED</a>:</div><div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7a9696155a2eb5969139965fbc5b8a66ed">AST_MODULE_RELOAD_SUCCESS</a>:</div><div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;      <span class="comment">/* Treat a queued request as success */</span></div><div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Module Reloaded&quot;</span>);</div><div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;   }</div><div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;}</div><div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7ad06be99930a02b142bf370e2627849be"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7ad06be99930a02b142bf370e2627849be">AST_MODULE_RELOAD_UNINITIALIZED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00115">module.h:115</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7ac0be7032578c68902708da91e5e7d71a"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7ac0be7032578c68902708da91e5e7d71a">AST_MODULE_RELOAD_NOT_FOUND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00112">module.h:112</a></div></div>
<div class="ttc" id="module_8h_html_af9e3b4ae730e43312e00fcbc1707588b"><div class="ttname"><a href="../../d5/d16/module_8h.html#af9e3b4ae730e43312e00fcbc1707588b">ast_module_reload</a></div><div class="ttdeci">enum ast_module_reload_result ast_module_reload(const char *name)</div><div class="ttdoc">Reload asterisk modules. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d96/loader_8c_source.html#l01562">loader.c:1562</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7">ast_module_reload_result</a></div><div class="ttdeci">ast_module_reload_result</div><div class="ttdoc">Possible return types for ast_module_reload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00109">module.h:109</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7a3c7e5ccf0a567b17833b1e60ba387abf"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7a3c7e5ccf0a567b17833b1e60ba387abf">AST_MODULE_RELOAD_QUEUED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00111">module.h:111</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7a9696155a2eb5969139965fbc5b8a66ed"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7a9696155a2eb5969139965fbc5b8a66ed">AST_MODULE_RELOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00110">module.h:110</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7a2a1ae659f41755f987f33586cb43fade"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7a2a1ae659f41755f987f33586cb43fade">AST_MODULE_RELOAD_IN_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00114">module.h:114</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7aa719b0c0d0c58b358deaf9933a8dd3f6"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7aa719b0c0d0c58b358deaf9933a8dd3f6">AST_MODULE_RELOAD_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00113">module.h:113</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7aae470b102da613cbd14c611b36e75b11"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7aae470b102da613cbd14c611b36e75b11">AST_MODULE_RELOAD_NOT_IMPLEMENTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00116">module.h:116</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1c6842f7ec1925c46db96beaaf8d24b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1c6842f7ec1925c46db96beaaf8d24b1">&#9670;&nbsp;</a></span>action_sendtext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_sendtext </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04930">4930</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04896">queue_sendtext()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l04911">queue_sendtext_data()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;{</div><div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *textmsg = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Message&quot;</span>);</div><div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *content_type = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Content-Type&quot;</span>);</div><div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;</div><div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No channel specified&quot;</span>);</div><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;   }</div><div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;</div><div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(textmsg)) {</div><div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Message specified&quot;</span>);</div><div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;   }</div><div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;</div><div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;   c = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name);</div><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;   <span class="keywordflow">if</span> (!c) {</div><div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such channel&quot;</span>);</div><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;   }</div><div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;</div><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;<span class="comment">    * If the &quot;extra&quot; data is not available, then send using &quot;string&quot; only.</span></div><div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;<span class="comment">    * Doing such maintains backward compatibilities.</span></div><div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;   res = <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(content_type) ? <a class="code" href="../../df/d72/group__Group__AMI.html#gadc51d8d2531d72d735b5f270db27de72">queue_sendtext</a>(c, textmsg) :</div><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gaa010c027e6c7d2c2082482526a2eed06">queue_sendtext_data</a>(c, textmsg, content_type);</div><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;</div><div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(c);</div><div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;</div><div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;   <span class="keywordflow">if</span> (res &gt;= 0) {</div><div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Success&quot;</span>);</div><div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Failure&quot;</span>);</div><div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;   }</div><div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;</div><div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gadc51d8d2531d72d735b5f270db27de72"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gadc51d8d2531d72d735b5f270db27de72">queue_sendtext</a></div><div class="ttdeci">static int queue_sendtext(struct ast_channel *chan, const char *body)</div><div class="ttdoc">Queue a read action to send a text message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l04896">manager.c:4896</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa010c027e6c7d2c2082482526a2eed06"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa010c027e6c7d2c2082482526a2eed06">queue_sendtext_data</a></div><div class="ttdeci">static int queue_sendtext_data(struct ast_channel *chan, const char *body, const char *content_type)</div><div class="ttdoc">Queue a read action to send a text data message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l04911">manager.c:4911</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga0063f7b7d4976f533e64e98503e535aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0063f7b7d4976f533e64e98503e535aa">&#9670;&nbsp;</a></span>action_setvar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_setvar </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04577">4577</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;{</div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *varname = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Variable&quot;</span>);</div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *varval = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Value&quot;</span>);</div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;</div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(varname)) {</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No variable specified&quot;</span>);</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;   }</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;</div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;      <span class="keywordflow">if</span> (!(c = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name))) {</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such channel&quot;</span>);</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;      }</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;   }</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;</div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;   res = <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(c, varname, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(varval, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;</div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;   <span class="keywordflow">if</span> (c) {</div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;      c = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(c);</div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;   }</div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;   <span class="keywordflow">if</span> (res == 0) {</div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Variable Set&quot;</span>);</div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Variable not set&quot;</span>);</div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;   }</div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gad16a64f7db4f1fdc0326f086152ed584"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad16a64f7db4f1fdc0326f086152ed584">&#9670;&nbsp;</a></span>action_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manager "status" command to show channels. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04777">4777</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01408">ast_channel_iterator_all_new()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01360">ast_channel_iterator_destroy()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01422">ast_channel_iterator_next()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03245">astman_send_list_complete_end()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03237">astman_send_list_complete_start()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03201">astman_send_listack()</a>, <a class="el" href="../../de/d52/codec__dahdi_8c.html#aea0622703055b62259903cdab213319b">channels</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02046">function_capable_string_allowed_with_auths()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04662">generate_status()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01596">mansession_session::writeperm</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;{</div><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *chan_variables = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Variables&quot;</span>);</div><div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *all_chan_variables = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;AllVariables&quot;</span>);</div><div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;   <span class="keywordtype">int</span> all_variables = 0;</div><div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;   <span class="keywordtype">char</span> *variables = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(chan_variables, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d52/codec__dahdi_8c.html#aea0622703055b62259903cdab213319b">channels</a> = 0;</div><div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;   <span class="keywordtype">int</span> all = <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name); <span class="comment">/* set if we want all channels */</span></div><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;   <span class="keywordtype">char</span> id_text[256];</div><div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a> *it_chans = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(vars,</div><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(name)[100];</div><div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;   );</div><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;</div><div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(all_chan_variables)) {</div><div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;      all_variables = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(all_chan_variables);</div><div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;   }</div><div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;</div><div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../df/d72/group__Group__AMI.html#gaa497adca1647f8add683cd71799fc015">function_capable_string_allowed_with_auths</a>(variables, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">writeperm</a>))) {</div><div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Status Access Forbidden: Variables&quot;</span>);</div><div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;   }</div><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;</div><div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;   <span class="keywordflow">if</span> (all) {</div><div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;      <span class="keywordflow">if</span> (!(it_chans = <a class="code" href="../../d5/d7b/channel_8h.html#aae1445ed63630123081206e3de5b7b1a">ast_channel_iterator_all_new</a>())) {</div><div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Memory Allocation Failure&quot;</span>);</div><div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;      }</div><div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab0eadbfdcbdad2c0e8927900ec9b98d5">ast_channel_iterator_next</a>(it_chans);</div><div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name);</div><div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;      <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such channel&quot;</span>);</div><div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;      }</div><div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;   }</div><div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;</div><div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a>(s, m, <span class="stringliteral">&quot;Channel status will follow&quot;</span>, <span class="stringliteral">&quot;start&quot;</span>);</div><div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;</div><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;      snprintf(id_text, <span class="keyword">sizeof</span>(id_text), <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;      id_text[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;   }</div><div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;</div><div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(chan_variables)) {</div><div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(vars, variables);</div><div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;   }</div><div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;</div><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;   <span class="comment">/* if we look by name, we break after the first iteration */</span></div><div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;   <span class="keywordflow">for</span> (; chan; all ? chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab0eadbfdcbdad2c0e8927900ec9b98d5">ast_channel_iterator_next</a>(it_chans) : 0) {</div><div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;</div><div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga3256471530910751d20fa34e435c7575">generate_status</a>(s, chan, vars.name, vars.argc, all_variables, id_text, &amp;channels);</div><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;</div><div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;   }</div><div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;</div><div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;   <span class="keywordflow">if</span> (it_chans) {</div><div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a256993c64e12e420aa141c07363db3ef">ast_channel_iterator_destroy</a>(it_chans);</div><div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;   }</div><div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;</div><div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342">astman_send_list_complete_start</a>(s, m, <span class="stringliteral">&quot;StatusComplete&quot;</span>, channels);</div><div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Items: %d\r\n&quot;</span>, channels);</div><div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69">astman_send_list_complete_end</a>(s);</div><div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;</div><div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="channel_8h_html_ab0eadbfdcbdad2c0e8927900ec9b98d5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab0eadbfdcbdad2c0e8927900ec9b98d5">ast_channel_iterator_next</a></div><div class="ttdeci">struct ast_channel * ast_channel_iterator_next(struct ast_channel_iterator *i)</div><div class="ttdoc">Get the next channel for a channel iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01422">channel.c:1422</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga58c3e3da5d31739cafaee1df6ddf9342"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342">astman_send_list_complete_start</a></div><div class="ttdeci">void astman_send_list_complete_start(struct mansession *s, const struct message *m, const char *event_name, int count)</div><div class="ttdoc">Start the list complete event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03237">manager.c:3237</a></div></div>
<div class="ttc" id="structmansession__session_html_a006a09ed1c51271c4b6f582a2a42ba5f"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">mansession_session::writeperm</a></div><div class="ttdeci">int writeperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01596">manager.c:1596</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga3256471530910751d20fa34e435c7575"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga3256471530910751d20fa34e435c7575">generate_status</a></div><div class="ttdeci">static void generate_status(struct mansession *s, struct ast_channel *chan, char **vars, int varc, int all_variables, char *id_text, int *count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l04662">manager.c:4662</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gabf7c909efbfc26d0d9c66786c83b8f69"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69">astman_send_list_complete_end</a></div><div class="ttdeci">void astman_send_list_complete_end(struct mansession *s)</div><div class="ttdoc">End the list complete event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03245">manager.c:3245</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="codec__dahdi_8c_html_aea0622703055b62259903cdab213319b"><div class="ttname"><a href="../../de/d52/codec__dahdi_8c.html#aea0622703055b62259903cdab213319b">channels</a></div><div class="ttdeci">static struct channel_usage channels</div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__channel__iterator_html"><div class="ttname"><a href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01351">channel.c:1351</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa497adca1647f8add683cd71799fc015"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa497adca1647f8add683cd71799fc015">function_capable_string_allowed_with_auths</a></div><div class="ttdeci">static int function_capable_string_allowed_with_auths(const char *evaluating, int writepermlist)</div><div class="ttdoc">Checks to see if a string which can be used to evaluate functions should be rejected. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02046">manager.c:2046</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_a256993c64e12e420aa141c07363db3ef"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a256993c64e12e420aa141c07363db3ef">ast_channel_iterator_destroy</a></div><div class="ttdeci">struct ast_channel_iterator * ast_channel_iterator_destroy(struct ast_channel_iterator *i)</div><div class="ttdoc">Destroy a channel iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01360">channel.c:1360</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="channel_8h_html_aae1445ed63630123081206e3de5b7b1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aae1445ed63630123081206e3de5b7b1a">ast_channel_iterator_all_new</a></div><div class="ttdeci">struct ast_channel_iterator * ast_channel_iterator_all_new(void)</div><div class="ttdoc">Create a new channel iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01408">channel.c:1408</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga0ee6ee1f4d200f711e2983bffe770a72"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a></div><div class="ttdeci">void astman_send_listack(struct mansession *s, const struct message *m, char *msg, char *listflag)</div><div class="ttdoc">Send ack in manager transaction to begin a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03201">manager.c:3201</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2ec80a6f9d335e9240ce5cc6ab49221b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2ec80a6f9d335e9240ce5cc6ab49221b">&#9670;&nbsp;</a></span>action_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_timeout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06044">6044</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00510">ast_channel_setwhentohangup_tv()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, and <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;{</div><div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;   <span class="keywordtype">double</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = atof(<a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Timeout&quot;</span>));</div><div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;   <span class="keyword">struct </span>timeval when = { <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, 0 };</div><div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;</div><div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No channel specified&quot;</span>);</div><div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;   }</div><div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;</div><div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;   <span class="keywordflow">if</span> (!timeout || timeout &lt; 0) {</div><div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No timeout specified&quot;</span>);</div><div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;   }</div><div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;</div><div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;   <span class="keywordflow">if</span> (!(c = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name))) {</div><div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such channel&quot;</span>);</div><div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;   }</div><div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;</div><div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;   when.tv_usec = (timeout - when.tv_sec) * 1000000.0;</div><div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;</div><div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(c);</div><div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ac03c2ec5ac8e7a6ef9c5d92f91880927">ast_channel_setwhentohangup_tv</a>(c, when);</div><div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c);</div><div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;   c = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(c);</div><div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;</div><div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Timeout Set&quot;</span>);</div><div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;</div><div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="channel_8h_html_ac03c2ec5ac8e7a6ef9c5d92f91880927"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac03c2ec5ac8e7a6ef9c5d92f91880927">ast_channel_setwhentohangup_tv</a></div><div class="ttdeci">void ast_channel_setwhentohangup_tv(struct ast_channel *chan, struct timeval offset)</div><div class="ttdoc">Set when to hang a channel up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00510">channel.c:510</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga722b7d69a94cb2ececdb88bf67f80667"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga722b7d69a94cb2ececdb88bf67f80667">&#9670;&nbsp;</a></span>action_updateconfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_updateconfig </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04102">4102</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03154">ast_config_load2()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l02555">ast_config_text_file_save2()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l00385">ast_include_rename()</a>, <a class="el" href="../../d3/d96/loader_8c_source.html#l01562">ast_module_reload()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00045">CONFIG_FLAG_NOCACHE</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00041">CONFIG_FLAG_WITHCOMMENTS</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00053">CONFIG_SAVE_FLAG_NONE</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00055">CONFIG_SAVE_FLAG_PRESERVE_EFFECTIVE_CONTEXT</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01424">FAILURE_ALLOCATION</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01430">FAILURE_APPEND</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01426">FAILURE_DELCAT</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01429">FAILURE_DELETE</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01427">FAILURE_EMPTYCAT</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01425">FAILURE_NEWCAT</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01431">FAILURE_TEMPLATE</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01428">FAILURE_UPDATE</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03819">handle_updates()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01420">UNKNOWN_ACTION</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01421">UNKNOWN_CATEGORY</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01423">UNSPECIFIED_ARGUMENT</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01422">UNSPECIFIED_CATEGORY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;{</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *sfn = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;SrcFilename&quot;</span>);</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *dfn = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;DstFilename&quot;</span>);</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *rld = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Reload&quot;</span>);</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;   <span class="keywordtype">int</span> preserve_effective_context = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8990d27b9ca1ef2a4265bbb34ece23aca6c84eccb1efc098a6bc1946ac3cb9d43">CONFIG_SAVE_FLAG_PRESERVE_EFFECTIVE_CONTEXT</a>;</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *preserve_effective_context_string = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;PreserveEffectiveContext&quot;</span>);</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fabc16a274124ae96d43f8e52e344292c3">CONFIG_FLAG_WITHCOMMENTS</a> | <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee">CONFIG_FLAG_NOCACHE</a> };</div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/d72/group__Group__AMI.html#ga6756b9f30781ed8ca8ce938e49ad9d92">error_type</a> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sfn) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dfn)) {</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Filename not specified&quot;</span>);</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;   }</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;   <span class="keywordflow">if</span> (!(cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a>(sfn, <span class="stringliteral">&quot;manager&quot;</span>, config_flags))) {</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Config file not found&quot;</span>);</div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Config file has invalid format&quot;</span>);</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;   }</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;   result = <a class="code" href="../../df/d72/group__Group__AMI.html#ga5da77ad82c423fcfee5299611ed6d7ce">handle_updates</a>(s, m, cfg, dfn);</div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;   <span class="keywordflow">if</span> (!result) {</div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a008dccc13b0342d21fa91bf5c26bbcba">ast_include_rename</a>(cfg, sfn, dfn); <span class="comment">/* change the include references from dfn to sfn, so things match up */</span></div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(preserve_effective_context_string) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(preserve_effective_context_string)) {</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;         preserve_effective_context = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8990d27b9ca1ef2a4265bbb34ece23aca15ee838ecb8362bba6c429be5930a80d">CONFIG_SAVE_FLAG_NONE</a>;</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;      }</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;      res = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a22ea082c5889a8a74d1110459c372d24">ast_config_text_file_save2</a>(dfn, cfg, <span class="stringliteral">&quot;Manager&quot;</span>, preserve_effective_context);</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;      <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Save of config failed&quot;</span>);</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;      }</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(rld)) {</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(rld)) {</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;            rld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;         }</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;         <a class="code" href="../../d5/d16/module_8h.html#af9e3b4ae730e43312e00fcbc1707588b">ast_module_reload</a>(rld);</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;      }</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;      <span class="keywordflow">switch</span>(result) {</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ae16d79bf07a3994731f4ac1a6ece5ec8">UNKNOWN_ACTION</a>:</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Unknown action command&quot;</span>);</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935">UNKNOWN_CATEGORY</a>:</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Given category does not exist&quot;</span>);</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac327a21855ab9428a0a4ec3b2bc9e4da">UNSPECIFIED_CATEGORY</a>:</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Category not specified&quot;</span>);</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e">UNSPECIFIED_ARGUMENT</a>:</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Problem with category, value, or line (if required)&quot;</span>);</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec">FAILURE_ALLOCATION</a>:</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Memory allocation failure, this should not happen&quot;</span>);</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a662747e8d918f2d0ee7012d1d19731c9">FAILURE_NEWCAT</a>:</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Create category did not complete successfully&quot;</span>);</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92aa8e1a46fc31ba23e18080284f3938d75">FAILURE_DELCAT</a>:</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Delete category did not complete successfully&quot;</span>);</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a468f85e937d9a9d14172b0239d212125">FAILURE_EMPTYCAT</a>:</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Empty category did not complete successfully&quot;</span>);</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a60d08c34084a43b06ae50ccd693e0ba9">FAILURE_UPDATE</a>:</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Update did not complete successfully&quot;</span>);</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a873b7dc80f148550a62038a0f860f31d">FAILURE_DELETE</a>:</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Delete did not complete successfully&quot;</span>);</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a97ea9672929721f6b45f60f058465bd9">FAILURE_APPEND</a>:</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Append did not complete successfully&quot;</span>);</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac22fdd80fd7df09af8999f6e429e29fb">FAILURE_TEMPLATE</a>:</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Template category not found&quot;</span>);</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;      }</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;   }</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92ac22fdd80fd7df09af8999f6e429e29fb"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac22fdd80fd7df09af8999f6e429e29fb">FAILURE_TEMPLATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01431">manager.c:1431</a></div></div>
<div class="ttc" id="module_8h_html_af9e3b4ae730e43312e00fcbc1707588b"><div class="ttname"><a href="../../d5/d16/module_8h.html#af9e3b4ae730e43312e00fcbc1707588b">ast_module_reload</a></div><div class="ttdeci">enum ast_module_reload_result ast_module_reload(const char *name)</div><div class="ttdoc">Reload asterisk modules. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d96/loader_8c_source.html#l01562">loader.c:1562</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a468f85e937d9a9d14172b0239d212125"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a468f85e937d9a9d14172b0239d212125">FAILURE_EMPTYCAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01427">manager.c:1427</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a22ea082c5889a8a74d1110459c372d24"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a22ea082c5889a8a74d1110459c372d24">ast_config_text_file_save2</a></div><div class="ttdeci">int ast_config_text_file_save2(const char *filename, const struct ast_config *cfg, const char *generator, uint32_t flags)</div><div class="ttdoc">Save a config text file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l02555">main/config.c:2555</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92ae16d79bf07a3994731f4ac1a6ece5ec8"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ae16d79bf07a3994731f4ac1a6ece5ec8">UNKNOWN_ACTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01420">manager.c:1420</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga6756b9f30781ed8ca8ce938e49ad9d92"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga6756b9f30781ed8ca8ce938e49ad9d92">error_type</a></div><div class="ttdeci">error_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01419">manager.c:1419</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aab3eac8fa82a86a93c074deb7b77dbc9"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a></div><div class="ttdeci">struct ast_config * ast_config_load2(const char *filename, const char *who_asked, struct ast_flags flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03154">main/config.c:3154</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935">UNKNOWN_CATEGORY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01421">manager.c:1421</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fabc16a274124ae96d43f8e52e344292c3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fabc16a274124ae96d43f8e52e344292c3">CONFIG_FLAG_WITHCOMMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00041">include/asterisk/config.h:41</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a662747e8d918f2d0ee7012d1d19731c9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a662747e8d918f2d0ee7012d1d19731c9">FAILURE_NEWCAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01425">manager.c:1425</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a60d08c34084a43b06ae50ccd693e0ba9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a60d08c34084a43b06ae50ccd693e0ba9">FAILURE_UPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01428">manager.c:1428</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga5da77ad82c423fcfee5299611ed6d7ce"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5da77ad82c423fcfee5299611ed6d7ce">handle_updates</a></div><div class="ttdeci">static enum error_type handle_updates(struct mansession *s, const struct message *m, struct ast_config *cfg, const char *dfn)</div><div class="ttdoc">helper function for action_updateconfig </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03819">manager.c:3819</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8990d27b9ca1ef2a4265bbb34ece23aca6c84eccb1efc098a6bc1946ac3cb9d43"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8990d27b9ca1ef2a4265bbb34ece23aca6c84eccb1efc098a6bc1946ac3cb9d43">CONFIG_SAVE_FLAG_PRESERVE_EFFECTIVE_CONTEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00055">include/asterisk/config.h:55</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a873b7dc80f148550a62038a0f860f31d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a873b7dc80f148550a62038a0f860f31d">FAILURE_DELETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01429">manager.c:1429</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee">CONFIG_FLAG_NOCACHE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00045">include/asterisk/config.h:45</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92aa8e1a46fc31ba23e18080284f3938d75"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92aa8e1a46fc31ba23e18080284f3938d75">FAILURE_DELCAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01426">manager.c:1426</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a008dccc13b0342d21fa91bf5c26bbcba"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a008dccc13b0342d21fa91bf5c26bbcba">ast_include_rename</a></div><div class="ttdeci">void ast_include_rename(struct ast_config *conf, const char *from_file, const char *to_file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00385">main/config.c:385</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e">UNSPECIFIED_ARGUMENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01423">manager.c:1423</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec">FAILURE_ALLOCATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01424">manager.c:1424</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a97ea9672929721f6b45f60f058465bd9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a97ea9672929721f6b45f60f058465bd9">FAILURE_APPEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01430">manager.c:1430</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92ac327a21855ab9428a0a4ec3b2bc9e4da"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac327a21855ab9428a0a4ec3b2bc9e4da">UNSPECIFIED_CATEGORY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01422">manager.c:1422</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8990d27b9ca1ef2a4265bbb34ece23aca15ee838ecb8362bba6c429be5930a80d"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8990d27b9ca1ef2a4265bbb34ece23aca15ee838ecb8362bba6c429be5930a80d">CONFIG_SAVE_FLAG_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00053">include/asterisk/config.h:53</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa837605a5558f94ae96ed1b881aa75e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa837605a5558f94ae96ed1b881aa75e7">&#9670;&nbsp;</a></span>action_userevent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_userevent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06255">6255</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00653">ast_str_reset()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00077">EVENT_FLAG_USER</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00145">message::hdrcount</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00146">message::headers</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00248">manager_event</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03063">userevent_buf</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;{</div><div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">event</span> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;UserEvent&quot;</span>);</div><div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *body = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../df/d72/group__Group__AMI.html#gaa1e469ecb509cb8dd2b26bde7dd1e1be">userevent_buf</a>, 16);</div><div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;</div><div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(body);</div><div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;</div><div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>; x++) {</div><div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;      <span class="keywordflow">if</span> (strncasecmp(<span class="stringliteral">&quot;UserEvent:&quot;</span>, m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[x], strlen(<span class="stringliteral">&quot;UserEvent:&quot;</span>)) &amp;&amp;</div><div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;            strncasecmp(<span class="stringliteral">&quot;Action:&quot;</span>, m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[x], strlen(<span class="stringliteral">&quot;Action:&quot;</span>))) {</div><div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;body, 0, <span class="stringliteral">&quot;%s\r\n&quot;</span>, m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[x]);</div><div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;      }</div><div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;   }</div><div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;</div><div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Event Sent&quot;</span>);</div><div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;   <a class="code" href="../../db/d45/manager_8h.html#a1ef0ee0044dbbeb4c3a5abc6c046b208">manager_event</a>(<a class="code" href="../../db/d45/manager_8h.html#acc12c2bc03dce67ddd1590d67ab11f4d">EVENT_FLAG_USER</a>, <span class="stringliteral">&quot;UserEvent&quot;</span>, <span class="stringliteral">&quot;UserEvent: %s\r\n%s&quot;</span>, <a class="code" href="../../df/d7d/structevent.html">event</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(body));</div><div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gaa1e469ecb509cb8dd2b26bde7dd1e1be"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa1e469ecb509cb8dd2b26bde7dd1e1be">userevent_buf</a></div><div class="ttdeci">static struct ast_threadstorage userevent_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03063">manager.c:3063</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="manager_8h_html_acc12c2bc03dce67ddd1590d67ab11f4d"><div class="ttname"><a href="../../db/d45/manager_8h.html#acc12c2bc03dce67ddd1590d67ab11f4d">EVENT_FLAG_USER</a></div><div class="ttdeci">#define EVENT_FLAG_USER</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00077">manager.h:77</a></div></div>
<div class="ttc" id="strings_8h_html_a8239b9ad10367bfc936e9b60ff7706a8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a></div><div class="ttdeci">void ast_str_reset(struct ast_str *buf)</div><div class="ttdoc">Reset the content of a dynamic string. Useful before a series of ast_str_append. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00653">strings.h:653</a></div></div>
<div class="ttc" id="structmessage_html_a81929bcaa1dcfa1abf47977385058cbe"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">message::headers</a></div><div class="ttdeci">const char * headers[AST_MAX_MANHEADERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00146">manager.h:146</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="manager_8h_html_a1ef0ee0044dbbeb4c3a5abc6c046b208"><div class="ttname"><a href="../../db/d45/manager_8h.html#a1ef0ee0044dbbeb4c3a5abc6c046b208">manager_event</a></div><div class="ttdeci">#define manager_event(category, event, contents,...)</div><div class="ttdoc">External routines may send asterisk manager events this way. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00248">manager.h:248</a></div></div>
<div class="ttc" id="structmessage_html_a2337374fe8025cb750f52a316166aa6d"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">message::hdrcount</a></div><div class="ttdeci">unsigned int hdrcount</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00145">manager.h:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gadf9acbde2aab503926610acb110634d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadf9acbde2aab503926610acb110634d6">&#9670;&nbsp;</a></span>action_waitevent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_waitevent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04206">4206</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l02753">advance_event()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00084">ast_iostream_get_fd()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00440">AST_RWLIST_NEXT</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01519">ast_wait_for_input()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03154">astman_send_response()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01461">eventqent::category</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01603">mansession_session::last_ev</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01588">mansession_session::managerid</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06193">match_filter()</a>, <a class="el" href="../../dc/dc2/f2c_8h_source.html#l00198">max</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01586">mansession_session::needdestroy</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01610">mansession_session::notify_lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01595">mansession_session::readperm</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01602">mansession_session::send_events</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01591">mansession_session::sessiontimeout</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01584">mansession_session::stream</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01587">mansession_session::waiting_thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;{</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *timeouts = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Timeout&quot;</span>);</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = -1;</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;   <span class="keywordtype">int</span> needexit = 0;</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;   <span class="keywordtype">char</span> idText[256];</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;      snprintf(idText, <span class="keyword">sizeof</span>(idText), <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;      idText[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;   }</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(timeouts)) {</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;      sscanf(timeouts, <span class="stringliteral">&quot;%30i&quot;</span>, &amp;timeout);</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;      <span class="keywordflow">if</span> (timeout &lt; -1) {</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;         timeout = -1;</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;      }</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;      <span class="comment">/* XXX maybe put an upper bound, or prevent the use of 0 ? */</span></div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;   }</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">waiting_thread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;      pthread_kill(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">waiting_thread</a>, SIGURG);</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;   }</div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24367fd57bd683dd7fdba2db57ce314e">managerid</a>) { <span class="comment">/* AMI-over-HTTP session */</span></div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;<span class="comment">       * Make sure the timeout is within the expire time of the session,</span></div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;<span class="comment">       * as the client will likely abort the request if it does not see</span></div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;<span class="comment">       * data coming after some amount of time.</span></div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;      time_t now = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#abd03a701558da25801e0ce450d9e39ee">sessiontimeout</a> - now - 10;</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;      <span class="keywordflow">if</span> (max &lt; 0) { <span class="comment">/* We are already late. Strange but possible. */</span></div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;         max = 0;</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;      }</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;      <span class="keywordflow">if</span> (timeout &lt; 0 || timeout &gt; max) {</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;         timeout = <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>;</div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;      }</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;      <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a93274787fdb55a4b0cc204c9d47c2449">send_events</a>) {  <span class="comment">/* make sure we record events */</span></div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;         s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a93274787fdb55a4b0cc204c9d47c2449">send_events</a> = -1;</div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;      }</div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;   }</div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;</div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;   s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">waiting_thread</a> = pthread_self(); <span class="comment">/* let new events wake up this thread */</span></div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Starting waiting for an event!\n&quot;</span>);</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; timeout || timeout &lt; 0; x++) {</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab825707392ccdf6562c396bf1037b7a3">last_ev</a>, eq_next)) {</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;         needexit = 1;</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;      }</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;      <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a68a26c888924e997c3ce5fdb6273bf7f">needdestroy</a>) {</div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;         needexit = 1;</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;      }</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;      <span class="comment">/* We can have multiple HTTP session point to the same mansession entry.</span></div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;<span class="comment">       * The way we deal with it is not very nice: newcomers kick out the previous</span></div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;<span class="comment">       * HTTP session. XXX this needs to be improved.</span></div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;      <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">waiting_thread</a> != pthread_self()) {</div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;         needexit = 1;</div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;      }</div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;      <span class="keywordflow">if</span> (needexit) {</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;      }</div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;      <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24367fd57bd683dd7fdba2db57ce314e">managerid</a> == 0) {   <span class="comment">/* AMI session */</span></div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a60404ef44696316455e79c3a002cc71e">ast_wait_for_input</a>(<a class="code" href="../../dd/d27/iostream_8h.html#a6ebb2730257107d3535fe6cb1285f479">ast_iostream_get_fd</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>), 1000)) {</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;         }</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;      } <span class="keywordflow">else</span> { <span class="comment">/* HTTP session */</span></div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;         sleep(1);</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;      }</div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;   }</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Finished waiting for an event!\n&quot;</span>);</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">waiting_thread</a> == pthread_self()) {</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/d94/structeventqent.html">eventqent</a> *eqe = s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab825707392ccdf6562c396bf1037b7a3">last_ev</a>;</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;      s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">waiting_thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga26805df02a1c92688ae132f29ac4478a">astman_send_response</a>(s, m, <span class="stringliteral">&quot;Success&quot;</span>, <span class="stringliteral">&quot;Waiting for Event completed.&quot;</span>);</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;      <span class="keywordflow">while</span> ((eqe = <a class="code" href="../../df/d72/group__Group__AMI.html#ga2d71cf4726fe666194a3473e39782abe">advance_event</a>(eqe))) {</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;         <span class="keywordflow">if</span> (((s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#afaabb85e65efc5fed1a5f4d08bf272a4">readperm</a> &amp; eqe-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a>) == eqe-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a>)</div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;            &amp;&amp; ((s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a93274787fdb55a4b0cc204c9d47c2449">send_events</a> &amp; eqe-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a>) == eqe-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a>)</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;            &amp;&amp; <a class="code" href="../../df/d72/group__Group__AMI.html#gad40bb264275fb647b2044b47ac533dad">match_filter</a>(s, eqe-&gt;eventdata)) {</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;%s&quot;</span>, eqe-&gt;eventdata);</div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;         }</div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;         s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab825707392ccdf6562c396bf1037b7a3">last_ev</a> = eqe;</div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;      }</div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s,</div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;         <span class="stringliteral">&quot;Event: WaitEventComplete\r\n&quot;</span></div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;         <span class="stringliteral">&quot;\r\n&quot;</span>, idText);</div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Abandoning event request!\n&quot;</span>);</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;   }</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;</div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a5c021d1e034a53d09360da4d95c76220"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a></div><div class="ttdeci">#define AST_RWLIST_NEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00440">linkedlists.h:440</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="structmansession__session_html_a25ce442b0903796547e81a75339b8a1e"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">mansession_session::waiting_thread</a></div><div class="ttdeci">pthread_t waiting_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01587">manager.c:1587</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="structmansession__session_html_ab825707392ccdf6562c396bf1037b7a3"><div class="ttname"><a href="../../df/d05/structmansession__session.html#ab825707392ccdf6562c396bf1037b7a3">mansession_session::last_ev</a></div><div class="ttdeci">struct eventqent * last_ev</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01603">manager.c:1603</a></div></div>
<div class="ttc" id="iostream_8h_html_a6ebb2730257107d3535fe6cb1285f479"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a6ebb2730257107d3535fe6cb1285f479">ast_iostream_get_fd</a></div><div class="ttdeci">int ast_iostream_get_fd(struct ast_iostream *stream)</div><div class="ttdoc">Get an iostream&amp;#39;s file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00084">iostream.c:84</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmansession__session_html_afaabb85e65efc5fed1a5f4d08bf272a4"><div class="ttname"><a href="../../df/d05/structmansession__session.html#afaabb85e65efc5fed1a5f4d08bf272a4">mansession_session::readperm</a></div><div class="ttdeci">int readperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01595">manager.c:1595</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structmansession__session_html_abd03a701558da25801e0ce450d9e39ee"><div class="ttname"><a href="../../df/d05/structmansession__session.html#abd03a701558da25801e0ce450d9e39ee">mansession_session::sessiontimeout</a></div><div class="ttdeci">time_t sessiontimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01591">manager.c:1591</a></div></div>
<div class="ttc" id="structmansession__session_html_a24597b49933903efcf09c635513d8269"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">mansession_session::notify_lock</a></div><div class="ttdeci">ast_mutex_t notify_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01610">manager.c:1610</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="structmansession__session_html_a93274787fdb55a4b0cc204c9d47c2449"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a93274787fdb55a4b0cc204c9d47c2449">mansession_session::send_events</a></div><div class="ttdeci">int send_events</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01602">manager.c:1602</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga2d71cf4726fe666194a3473e39782abe"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga2d71cf4726fe666194a3473e39782abe">advance_event</a></div><div class="ttdeci">static struct eventqent * advance_event(struct eventqent *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02753">manager.c:2753</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga26805df02a1c92688ae132f29ac4478a"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga26805df02a1c92688ae132f29ac4478a">astman_send_response</a></div><div class="ttdeci">void astman_send_response(struct mansession *s, const struct message *m, char *resp, char *msg)</div><div class="ttdoc">Send response in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03154">manager.c:3154</a></div></div>
<div class="ttc" id="structeventqent_html"><div class="ttname"><a href="../../d9/d94/structeventqent.html">eventqent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01459">manager.c:1459</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gad40bb264275fb647b2044b47ac533dad"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gad40bb264275fb647b2044b47ac533dad">match_filter</a></div><div class="ttdeci">static int match_filter(struct mansession *s, char *eventdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l06193">manager.c:6193</a></div></div>
<div class="ttc" id="structmansession__session_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">mansession_session::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01584">manager.c:1584</a></div></div>
<div class="ttc" id="structmansession__session_html_a24367fd57bd683dd7fdba2db57ce314e"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a24367fd57bd683dd7fdba2db57ce314e">mansession_session::managerid</a></div><div class="ttdeci">uint32_t managerid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01588">manager.c:1588</a></div></div>
<div class="ttc" id="structeventqent_html_a60863e080514b398bce285b4d087dcf1"><div class="ttname"><a href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">eventqent::category</a></div><div class="ttdeci">int category</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01461">manager.c:1461</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="utils_8h_html_a60404ef44696316455e79c3a002cc71e"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a60404ef44696316455e79c3a002cc71e">ast_wait_for_input</a></div><div class="ttdeci">int ast_wait_for_input(int fd, int ms)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01519">main/utils.c:1519</a></div></div>
<div class="ttc" id="structmansession__session_html_a68a26c888924e997c3ce5fdb6273bf7f"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a68a26c888924e997c3ce5fdb6273bf7f">mansession_session::needdestroy</a></div><div class="ttdeci">int needdestroy</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01586">manager.c:1586</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2d71cf4726fe666194a3473e39782abe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d71cf4726fe666194a3473e39782abe">&#9670;&nbsp;</a></span>advance_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d9/d94/structeventqent.html">eventqent</a>* advance_event </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d94/structeventqent.html">eventqent</a> *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02753">2753</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00440">AST_RWLIST_NEXT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01460">eventqent::usecount</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04206">action_waitevent()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06227">process_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;{</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d94/structeventqent.html">eventqent</a> *next;</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>);</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;   <span class="keywordflow">if</span> ((next = <a class="code" href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a>(e, eq_next))) {</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;next-&gt;<a class="code" href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">usecount</a>, 1);</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;e-&gt;<a class="code" href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">usecount</a>, -1);</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;   }</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>);</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;   <span class="keywordflow">return</span> next;</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a5c021d1e034a53d09360da4d95c76220"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a></div><div class="ttdeci">#define AST_RWLIST_NEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00440">linkedlists.h:440</a></div></div>
<div class="ttc" id="structall__events_html"><div class="ttname"><a href="../../d2/d3e/structall__events.html">all_events</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01468">manager.c:1468</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structeventqent_html"><div class="ttname"><a href="../../d9/d94/structeventqent.html">eventqent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01459">manager.c:1459</a></div></div>
<div class="ttc" id="structeventqent_html_ab0f2e84f976dc042139d37fd1c28d73b"><div class="ttname"><a href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">eventqent::usecount</a></div><div class="ttdeci">int usecount</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01460">manager.c:1460</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga20256749d9d7e9dd367c6470336eb041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga20256749d9d7e9dd367c6470336eb041">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype">mgr_sessions&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Active manager connection sessions container. </p>

</div>
</div>
<a id="gab2837580fb6d9dca1a3d32b0dfe8a24a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab2837580fb6d9dca1a3d32b0dfe8a24a">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype">event_docs&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A container of event documentation nodes. </p>

</div>
</div>
<a id="gaecb636956ea985949db409bb9d6a6d00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaecb636956ea985949db409bb9d6a6d00">&#9670;&nbsp;</a></span>aocmessage_get_unit_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int aocmessage_get_unit_entry </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d18/structast__aoc__unit__entry.html">ast_aoc_unit_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>entry_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l05493">5493</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/db3/aoc_8h_source.html#l00180">ast_aoc_unit_entry::amount</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00182">ast_aoc_unit_entry::type</a>, <a class="el" href="../../d6/db3/aoc_8h_source.html#l00179">ast_aoc_unit_entry::valid_amount</a>, and <a class="el" href="../../d6/db3/aoc_8h_source.html#l00181">ast_aoc_unit_entry::valid_type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l05518">action_aocmessage()</a>.</p>
<div class="fragment"><div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;{</div><div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *unitamount;</div><div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *unittype;</div><div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(32);</div><div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;</div><div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;   memset(entry, 0, <span class="keyword">sizeof</span>(*entry));</div><div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;</div><div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;str, 0, <span class="stringliteral">&quot;UnitAmount(%u)&quot;</span>, entry_num);</div><div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;   unitamount = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(str));</div><div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;</div><div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;str, 0, <span class="stringliteral">&quot;UnitType(%u)&quot;</span>, entry_num);</div><div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;   unittype = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(str));</div><div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;</div><div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(unitamount) &amp;&amp; (sscanf(unitamount, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;entry-&gt;<a class="code" href="../../df/d18/structast__aoc__unit__entry.html#a3aaa7811b1b3c09c7945b9e090220ea1">amount</a>) == 1)) {</div><div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;      entry-&gt;<a class="code" href="../../df/d18/structast__aoc__unit__entry.html#a7dd39f0ed064eccd86e7b98ee0834b67">valid_amount</a> = 1;</div><div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;   }</div><div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;</div><div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(unittype) &amp;&amp; sscanf(unittype, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;entry-&gt;<a class="code" href="../../df/d18/structast__aoc__unit__entry.html#a4bfea42429249a1f65204f0c0f34704a">type</a>) == 1) {</div><div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;      entry-&gt;<a class="code" href="../../df/d18/structast__aoc__unit__entry.html#a7a39ee49c9364cb0e662f7637a323830">valid_type</a> = 1;</div><div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;   }</div><div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;</div><div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;}</div><div class="ttc" id="structast__aoc__unit__entry_html_a7dd39f0ed064eccd86e7b98ee0834b67"><div class="ttname"><a href="../../df/d18/structast__aoc__unit__entry.html#a7dd39f0ed064eccd86e7b98ee0834b67">ast_aoc_unit_entry::valid_amount</a></div><div class="ttdeci">char valid_amount</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00179">aoc.h:179</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__aoc__unit__entry_html_a4bfea42429249a1f65204f0c0f34704a"><div class="ttname"><a href="../../df/d18/structast__aoc__unit__entry.html#a4bfea42429249a1f65204f0c0f34704a">ast_aoc_unit_entry::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00182">aoc.h:182</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structast__aoc__unit__entry_html_a7a39ee49c9364cb0e662f7637a323830"><div class="ttname"><a href="../../df/d18/structast__aoc__unit__entry.html#a7a39ee49c9364cb0e662f7637a323830">ast_aoc_unit_entry::valid_type</a></div><div class="ttdeci">char valid_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00181">aoc.h:181</a></div></div>
<div class="ttc" id="structast__aoc__unit__entry_html_a3aaa7811b1b3c09c7945b9e090220ea1"><div class="ttname"><a href="../../df/d18/structast__aoc__unit__entry.html#a3aaa7811b1b3c09c7945b9e090220ea1">ast_aoc_unit_entry::amount</a></div><div class="ttdeci">unsigned int amount</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db3/aoc_8h_source.html#l00180">aoc.h:180</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga42ac3bf839aaa226509162987fcf695d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga42ac3bf839aaa226509162987fcf695d">&#9670;&nbsp;</a></span>append_channel_vars()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void append_channel_vars </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>pbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07092">7092</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08085">ast_channel_get_manager_vars()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d9/de7/chanvars_8h_source.html#l00031">ast_var_t::name</a>, <a class="el" href="../../d9/de7/chanvars_8h_source.html#l00030">ast_var_t::value</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">__manager_event_sessions_va()</a>.</p>
<div class="fragment"><div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;{</div><div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *vars;</div><div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;</div><div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;   vars = <a class="code" href="../../d5/d7b/channel_8h.html#a5f72bc09af81d17c4ecebf77cea38508">ast_channel_get_manager_vars</a>(chan);</div><div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;   <span class="keywordflow">if</span> (!vars) {</div><div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;   }</div><div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;</div><div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(vars, var, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>) {</div><div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(pbuf, 0, <span class="stringliteral">&quot;ChanVariable(%s): %s=%s\r\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), var-&gt;<a class="code" href="../../d0/d7d/structast__var__t.html#a2a7f851274ec18e17d38114c39b8511a">name</a>, var-&gt;<a class="code" href="../../d0/d7d/structast__var__t.html#a325611b97f57f55a57b2a7cf3238ef54">value</a>);</div><div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;   }</div><div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(vars, -1);</div><div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;}</div><div class="ttc" id="channel_8h_html_a5f72bc09af81d17c4ecebf77cea38508"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5f72bc09af81d17c4ecebf77cea38508">ast_channel_get_manager_vars</a></div><div class="ttdeci">struct varshead * ast_channel_get_manager_vars(struct ast_channel *chan)</div><div class="ttdoc">Gets the variables for a given channel, as specified by ast_channel_set_manager_vars(). </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08085">channel.c:8085</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__var__t_html_a2a7f851274ec18e17d38114c39b8511a"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a2a7f851274ec18e17d38114c39b8511a">ast_var_t::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00031">chanvars.h:31</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="structast__var__t_html_a325611b97f57f55a57b2a7cf3238ef54"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a325611b97f57f55a57b2a7cf3238ef54">ast_var_t::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00030">chanvars.h:30</a></div></div>
<div class="ttc" id="structvarshead_html"><div class="ttname"><a href="../../dd/de6/structvarshead.html">varshead</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00034">chanvars.h:34</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__var__t_html_a55d5c7988e3164d7310d88c67d97a1db"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a></div><div class="ttdeci">struct ast_var_t::@249 entries</div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gae456544c8bf8d684b871f41851f8eab1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae456544c8bf8d684b871f41851f8eab1">&#9670;&nbsp;</a></span>append_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int append_event </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>category</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>events are appended to a queue from where they can be dispatched to clients. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07068">7068</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00440">AST_RWLIST_NEXT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01461">eventqent::category</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01462">eventqent::seq</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01463">eventqent::tv</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01460">eventqent::usecount</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">__manager_event_sessions_va()</a>.</p>
<div class="fragment"><div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;{</div><div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d94/structeventqent.html">eventqent</a> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*tmp) + strlen(<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>));</div><div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/d81/app__sms_8c.html#a8514112da88a5d13451aaf8c9b064017">seq</a>;   <span class="comment">/* sequence number */</span></div><div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;</div><div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;   <span class="keywordflow">if</span> (!tmp) {</div><div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;   }</div><div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;</div><div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;   <span class="comment">/* need to init all fields, because ast_malloc() does not */</span></div><div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;   tmp-&gt;<a class="code" href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">usecount</a> = 0;</div><div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;   tmp-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a> = <a class="code" href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a>;</div><div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;   tmp-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a1db4845df10d789835dcc97c392a2fe6">seq</a> = <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;seq, 1);</div><div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;   tmp-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a9cf96982557d56650f0f4cd3762f05a0">tv</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a>(tmp, eq_next) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;   strcpy(tmp-&gt;eventdata, <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);</div><div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;</div><div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>);</div><div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>, tmp, eq_next);</div><div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>);</div><div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;</div><div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;}</div><div class="ttc" id="structeventqent_html_a9cf96982557d56650f0f4cd3762f05a0"><div class="ttname"><a href="../../d9/d94/structeventqent.html#a9cf96982557d56650f0f4cd3762f05a0">eventqent::tv</a></div><div class="ttdeci">struct timeval tv</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01463">manager.c:1463</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a5c021d1e034a53d09360da4d95c76220"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a></div><div class="ttdeci">#define AST_RWLIST_NEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00440">linkedlists.h:440</a></div></div>
<div class="ttc" id="structall__events_html"><div class="ttname"><a href="../../d2/d3e/structall__events.html">all_events</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01468">manager.c:1468</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="structeventqent_html"><div class="ttname"><a href="../../d9/d94/structeventqent.html">eventqent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01459">manager.c:1459</a></div></div>
<div class="ttc" id="structeventqent_html_ab0f2e84f976dc042139d37fd1c28d73b"><div class="ttname"><a href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">eventqent::usecount</a></div><div class="ttdeci">int usecount</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01460">manager.c:1460</a></div></div>
<div class="ttc" id="structeventqent_html_a60863e080514b398bce285b4d087dcf1"><div class="ttname"><a href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">eventqent::category</a></div><div class="ttdeci">int category</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01461">manager.c:1461</a></div></div>
<div class="ttc" id="app__sms_8c_html_a8514112da88a5d13451aaf8c9b064017"><div class="ttname"><a href="../../d7/d81/app__sms_8c.html#a8514112da88a5d13451aaf8c9b064017">seq</a></div><div class="ttdeci">static volatile unsigned int seq</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d81/app__sms_8c_source.html#l00120">app_sms.c:120</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="structeventqent_html_a1db4845df10d789835dcc97c392a2fe6"><div class="ttname"><a href="../../d9/d94/structeventqent.html#a1db4845df10d789835dcc97c392a2fe6">eventqent::seq</a></div><div class="ttdeci">unsigned int seq</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01462">manager.c:1462</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gacc128abc0bb66879ef7743eea7a5d53f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc128abc0bb66879ef7743eea7a5d53f">&#9670;&nbsp;</a></span>ast_hook_send_action()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_hook_send_action </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a> *&#160;</td>
          <td class="paramname"><em>hook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>access for hooks to send action messages to ami </p>
<p>Registered hooks can call this function to invoke actions and they will receive responses through registered callback. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02937">2937</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01704">action_find()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00455">ast_module_running_ref</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00469">ast_module_unref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00166">manager_action::func</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00145">message::hdrcount</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00146">message::headers</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01631">mansession::hook</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00167">manager_action::module</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00178">manager_action::registered</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00111">hook_send()</a>.</p>
<div class="fragment"><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;{</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *action;</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;   <span class="keywordtype">int</span> ret = 0;</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dcc/structmanager__action.html">manager_action</a> *act_found;</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8a/structmansession.html">mansession</a> s = {.<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, };</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d9e/structmessage.html">message</a> m = { 0 };</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;   <span class="keywordtype">char</span> *dup_str;</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;   <span class="keywordtype">char</span> *src;</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;   <span class="keywordtype">int</span> x = 0;</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;   <span class="keywordtype">int</span> curlen;</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;   <span class="keywordflow">if</span> (hook == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;   }</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;   <span class="comment">/* Create our own copy of the AMI action msg string. */</span></div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;   src = dup_str = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(msg);</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;   <span class="keywordflow">if</span> (!dup_str) {</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;   }</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;   <span class="comment">/* convert msg string to message struct */</span></div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;   curlen = strlen(src);</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; curlen; x++) {</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;      <span class="keywordtype">int</span> cr;  <span class="comment">/* set if we have \r */</span></div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;      <span class="keywordflow">if</span> (src[x] == <span class="charliteral">&#39;\r&#39;</span> &amp;&amp; x+1 &lt; curlen &amp;&amp; src[x+1] == <span class="charliteral">&#39;\n&#39;</span>)</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;         cr = 2;  <span class="comment">/* Found. Update length to include \r\n */</span></div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (src[x] == <span class="charliteral">&#39;\n&#39;</span>)</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;         cr = 1;  <span class="comment">/* also accept \n only */</span></div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;      <span class="comment">/* don&#39;t keep empty lines */</span></div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;      <span class="keywordflow">if</span> (x &amp;&amp; m.<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a> &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(m.<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>)) {</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;         <span class="comment">/* ... but trim \r\n and terminate the header string */</span></div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;         src[x] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;         m.<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[m.<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>++] = src;</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      }</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;      x += cr;</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;      curlen -= x;      <span class="comment">/* remaining size */</span></div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;      src += x;      <span class="comment">/* update pointer */</span></div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;      x = -1;        <span class="comment">/* reset loop */</span></div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;   }</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;   action = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(&amp;m, <span class="stringliteral">&quot;Action&quot;</span>);</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;   <span class="keywordflow">do</span> {</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(action, <span class="stringliteral">&quot;login&quot;</span>)) {</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;      }</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;      act_found = <a class="code" href="../../df/d72/group__Group__AMI.html#gaee7a640cdb6c8442d7fc7e7914406e5a">action_find</a>(action);</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      <span class="keywordflow">if</span> (!act_found) {</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;      }</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;<span class="comment">       * we have to simulate a session for this action request</span></div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;<span class="comment">       * to be able to pass it down for processing</span></div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;<span class="comment">       * This is necessary to meet the previous design of manager.c</span></div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;      s.<a class="code" href="../../d2/d8a/structmansession.html#a9469556f47f367a9b16433ba1c2247fe">hook</a> = hook;</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;      ret = -1;</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(act_found);</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;      <span class="keywordflow">if</span> (act_found-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#acee2bf9117848b5ffbbebb64a540e19f">registered</a> &amp;&amp; act_found-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab0bef752de7f442d29017ea812092d91">func</a>) {</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d9/df5/structast__module.html">ast_module</a> *mod_ref = <a class="code" href="../../d5/d16/module_8h.html#ad2dd3dce05926913c40b883cc7cff0a8">ast_module_running_ref</a>(act_found-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">module</a>);</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(act_found);</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;         <span class="comment">/* If the action is in a module it must be running. */</span></div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;         <span class="keywordflow">if</span> (!act_found-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">module</a> || mod_ref) {</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;            ret = act_found-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab0bef752de7f442d29017ea812092d91">func</a>(&amp;s, &amp;m);</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;            <a class="code" href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a>(mod_ref);</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;         }</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(act_found);</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;      }</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(act_found, -1, <span class="stringliteral">&quot;done with found action object&quot;</span>);</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;   } <span class="keywordflow">while</span> (0);</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dup_str);</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structast__module_html"><div class="ttname"><a href="../../d9/df5/structast__module.html">ast_module</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d96/loader_8c_source.html#l00293">loader.c:293</a></div></div>
<div class="ttc" id="structmanager__action_html_ab0bef752de7f442d29017ea812092d91"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ab0bef752de7f442d29017ea812092d91">manager_action::func</a></div><div class="ttdeci">int(* func)(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00166">manager.h:166</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaee7a640cdb6c8442d7fc7e7914406e5a"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaee7a640cdb6c8442d7fc7e7914406e5a">action_find</a></div><div class="ttdeci">static struct manager_action * action_find(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01704">manager.c:1704</a></div></div>
<div class="ttc" id="structmanager__action_html_a8637433cfbb88aeb10ce2ed5dcba0eb1"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">manager_action::module</a></div><div class="ttdeci">struct ast_module * module</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00167">manager.h:167</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="module_8h_html_a15896c26e51e8162df5eb9a0124c841f"><div class="ttname"><a href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a></div><div class="ttdeci">#define ast_module_unref(mod)</div><div class="ttdoc">Release a reference to the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00469">module.h:469</a></div></div>
<div class="ttc" id="structmanager__action_html_acee2bf9117848b5ffbbebb64a540e19f"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#acee2bf9117848b5ffbbebb64a540e19f">manager_action::registered</a></div><div class="ttdeci">unsigned int registered</div><div class="ttdoc">TRUE if the AMI action is registered and the callback can be called. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00178">manager.h:178</a></div></div>
<div class="ttc" id="structmansession_html"><div class="ttname"><a href="../../d2/d8a/structmansession.html">mansession</a></div><div class="ttdoc">In case you didn&amp;#39;t read that giant block of text above the mansession_session struct, the struct mansession is named this solely to keep the API the same in Asterisk. This structure really represents data that is different from Manager action to Manager action. The mansession_session pointer contained within points to session-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01625">manager.c:1625</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="module_8h_html_ad2dd3dce05926913c40b883cc7cff0a8"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2dd3dce05926913c40b883cc7cff0a8">ast_module_running_ref</a></div><div class="ttdeci">#define ast_module_running_ref(mod)</div><div class="ttdoc">Hold a reference to the module if it is running. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00455">module.h:455</a></div></div>
<div class="ttc" id="structmessage_html_a81929bcaa1dcfa1abf47977385058cbe"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">message::headers</a></div><div class="ttdeci">const char * headers[AST_MAX_MANHEADERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00146">manager.h:146</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="structmansession_html_a9469556f47f367a9b16433ba1c2247fe"><div class="ttname"><a href="../../d2/d8a/structmansession.html#a9469556f47f367a9b16433ba1c2247fe">mansession::hook</a></div><div class="ttdeci">struct manager_custom_hook * hook</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01631">manager.c:1631</a></div></div>
<div class="ttc" id="structmessage_html_a2337374fe8025cb750f52a316166aa6d"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">message::hdrcount</a></div><div class="ttdeci">unsigned int hdrcount</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00145">manager.h:145</a></div></div>
<div class="ttc" id="structmanager__action_html"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html">manager_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00149">manager.h:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaaab162dbd3271550e8bb515c1e431bd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaab162dbd3271550e8bb515c1e431bd9">&#9670;&nbsp;</a></span>ast_instring()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_instring </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>bigstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>smallstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>delim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tells you if smallstr exists inside bigstr which is delim by delim and uses no buf or stringsep ast_instring("this|that|more","this",'|') == 1;</p>
<p>feel free to move this to app.c -anthm </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02112">2112</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l02131">get_perm()</a>.</p>
<div class="fragment"><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;{</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d85/structval.html">val</a> = bigstr, *next;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;   <span class="keywordflow">do</span> {</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      <span class="keywordflow">if</span> ((next = strchr(val, delim))) {</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;         <span class="keywordflow">if</span> (!strncmp(val, smallstr, (next - val))) {</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;         }</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;         <span class="keywordflow">return</span> !strcmp(smallstr, val);</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;      }</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;   } <span class="keywordflow">while</span> (*(val = (next + 1)));</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;}</div><div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1a2e7df8657b820c5a6663b397f23bc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1a2e7df8657b820c5a6663b397f23bc9">&#9670;&nbsp;</a></span>ast_manager_check_enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_manager_check_enabled </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if AMI is enabled. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01949">1949</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01475">manager_enabled</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00450">handle_show_settings()</a>.</p>
<div class="fragment"><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;{</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d72/group__Group__AMI.html#ga19fa3d97c06873c9d67de7232cca5247">manager_enabled</a>;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga19fa3d97c06873c9d67de7232cca5247"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga19fa3d97c06873c9d67de7232cca5247">manager_enabled</a></div><div class="ttdeci">static int manager_enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01475">manager.c:1475</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gacfa23131c1c93528074761076ca2bc85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacfa23131c1c93528074761076ca2bc85">&#9670;&nbsp;</a></span>ast_manager_get_message_router()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a>* ast_manager_get_message_router </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> for AMI. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td><a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> for AMI </td></tr>
    <tr><td class="paramname">NULL</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01725">1725</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01493">stasis_router</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00681">manager_bridging_init()</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l01308">manager_channels_init()</a>, <a class="el" href="../../d4/d00/manager__mwi_8c_source.html#l00153">manager_mwi_init()</a>, and <a class="el" href="../../dd/d65/manager__system_8c_source.html#l00043">manager_system_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;{</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d72/group__Group__AMI.html#ga6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a></div><div class="ttdeci">static struct stasis_message_router * stasis_router</div><div class="ttdoc">The stasis_message_router for all Stasis Message Bus API messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01493">manager.c:1493</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga568aa1aff837fc0001279490a6d9b22f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga568aa1aff837fc0001279490a6d9b22f">&#9670;&nbsp;</a></span>ast_manager_get_topic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* ast_manager_get_topic </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> topic for AMI. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td><a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> topic for AMI </td></tr>
    <tr><td class="paramname">NULL</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01720">1720</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01490">manager_topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/da6/aoc_8c_source.html#l01835">aoc_publish_blob()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01903">ast_manager_publish_event()</a>, <a class="el" href="../../df/d10/manager__endpoints_8c_source.html#l00046">endpoint_state_cb()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l11324">load_module()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00681">manager_bridging_init()</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l01308">manager_channels_init()</a>, <a class="el" href="../../d4/d00/manager__mwi_8c_source.html#l00153">manager_mwi_init()</a>, <a class="el" href="../../dd/d65/manager__system_8c_source.html#l00043">manager_system_init()</a>, <a class="el" href="../../d3/d96/loader_8c_source.html#l01475">publish_load_message_type()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l02234">queue_publish_member_blob()</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l02095">stasis_app_user_event()</a>.</p>
<div class="fragment"><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;{</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gadeff73697d2789905f4c3a21671ef6d3">manager_topic</a>;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gadeff73697d2789905f4c3a21671ef6d3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gadeff73697d2789905f4c3a21671ef6d3">manager_topic</a></div><div class="ttdeci">static struct stasis_topic * manager_topic</div><div class="ttdoc">A stasis_topic that all topics AMI cares about will be forwarded to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01490">manager.c:1490</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga546caee8e3d040d0074bc32e96d53b7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga546caee8e3d040d0074bc32e96d53b7d">&#9670;&nbsp;</a></span>ast_manager_publish_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_manager_publish_event </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>class_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td>
          <td class="paramname"><em>obj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish an event to AMI. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>The type of AMI event to publish </td></tr>
    <tr><td class="paramname">class_type</td><td>The class on which to publish the event </td></tr>
    <tr><td class="paramname">obj</td><td>The event data to be published.</td></tr>
  </table>
  </dd>
</dl>
<p>Publishes a message to the <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> message bus solely for the consumption of AMI. The message will be of the type provided by ast_manager_get_type, and will be published to the topic provided by <a class="el" href="../../df/d72/group__Group__AMI.html#ga568aa1aff837fc0001279490a6d9b22f">ast_manager_get_topic</a>. As such, the JSON must be constructed as defined by the ast_manager_get_type message. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01903">1903</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00735">ast_json_payload_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../db/d45/manager_8h.html#a8ae409b5ff584e42c30edcfe5837d85c">ast_manager_get_generic_type()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01720">ast_manager_get_topic()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d09/sig__analog_8c_source.html#l02672">analog_publish_channel_alarm_clear()</a>, <a class="el" href="../../d2/d09/sig__analog_8c_source.html#l03999">analog_publish_dnd_state()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l07345">publish_channel_alarm()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l03506">publish_channel_alarm_clear()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l09437">publish_dnd_state()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00939">publish_fully_booted()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21067">publish_qualify_peer_done()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l07331">publish_span_alarm()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l03524">publish_span_alarm_clear()</a>, and <a class="el" href="../../d5/d03/asterisk_8c_source.html#l02004">really_quit()</a>.</p>
<div class="fragment"><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;{</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, event_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de9/structast__json__payload.html">ast_json_payload</a> *, payload, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, <a class="code" href="../../d8/d9e/structmessage.html">message</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;   <span class="keywordflow">if</span> (!obj || !<a class="code" href="../../db/d45/manager_8h.html#a8ae409b5ff584e42c30edcfe5837d85c">ast_manager_get_generic_type</a>()) {</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;   }</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(obj);</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;   event_info = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: i, s: o}&quot;</span>,</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;         <span class="stringliteral">&quot;type&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>,</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;         <span class="stringliteral">&quot;class_type&quot;</span>, class_type,</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;         <span class="stringliteral">&quot;event&quot;</span>, obj);</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;   <span class="keywordflow">if</span> (!event_info) {</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;   }</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;   payload = <a class="code" href="../../d4/d05/json_8h.html#a8ac267a28e7eddf5b10bbb65139406f2">ast_json_payload_create</a>(event_info);</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;   <span class="keywordflow">if</span> (!payload) {</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;   }</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;   <a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../db/d45/manager_8h.html#a8ae409b5ff584e42c30edcfe5837d85c">ast_manager_get_generic_type</a>(), payload);</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9e/structmessage.html">message</a>) {</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;   }</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#ga568aa1aff837fc0001279490a6d9b22f">ast_manager_get_topic</a>(), <a class="code" href="../../d8/d9e/structmessage.html">message</a>);</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="json_8h_html_a8ac267a28e7eddf5b10bbb65139406f2"><div class="ttname"><a href="../../d4/d05/json_8h.html#a8ac267a28e7eddf5b10bbb65139406f2">ast_json_payload_create</a></div><div class="ttdeci">struct ast_json_payload * ast_json_payload_create(struct ast_json *json)</div><div class="ttdoc">Create an ao2 object to pass json blobs as data payloads for stasis. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00735">json.c:735</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structast__json__payload_html"><div class="ttname"><a href="../../d9/de9/structast__json__payload.html">ast_json_payload</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l01024">json.h:1024</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="manager_8h_html_a8ae409b5ff584e42c30edcfe5837d85c"><div class="ttname"><a href="../../db/d45/manager_8h.html#a8ae409b5ff584e42c30edcfe5837d85c">ast_manager_get_generic_type</a></div><div class="ttdeci">struct stasis_message_type * ast_manager_get_generic_type(void)</div><div class="ttdoc">Get the stasis_message_type for generic messages. </div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga568aa1aff837fc0001279490a6d9b22f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga568aa1aff837fc0001279490a6d9b22f">ast_manager_get_topic</a></div><div class="ttdeci">struct stasis_topic * ast_manager_get_topic(void)</div><div class="ttdoc">Get the Stasis Message Bus API topic for AMI. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01720">manager.c:1720</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gab220bef102a1bf6e96a407d3a5a3e161"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab220bef102a1bf6e96a407d3a5a3e161">&#9670;&nbsp;</a></span>ast_manager_register2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_manager_register2 </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>auth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td>
          <td class="paramname"><em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>synopsis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>register a new command with manager, including online help. This is the preferred way to register a manager command </p>
<p>Register a manager command with the manager interface. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07386">7386</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00151">manager_action::action</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07372">action_destroy()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00409">ao2_t_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07329">ast_manager_register_struct()</a>, <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00032">AST_STATIC_DOC</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00031">AST_XML_DOC</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l02075">ast_xmldoc_build_arguments()</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l02250">ast_xmldoc_build_description()</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l02528">ast_xmldoc_build_final_response()</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l02463">ast_xmldoc_build_list_responses()</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l01698">ast_xmldoc_build_seealso()</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l02227">ast_xmldoc_build_synopsis()</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l01253">ast_xmldoc_build_syntax()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00164">manager_action::authority</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00169">manager_action::docsrc</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00162">manager_action::final_response</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00166">manager_action::func</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00160">manager_action::list_responses</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00167">manager_action::module</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;{</div><div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dcc/structmanager__action.html">manager_action</a> *cur;</div><div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;</div><div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;   cur = <a class="code" href="../../d5/da5/astobj2_8h.html#ad57326008c326db88dc36779741622b8">ao2_t_alloc</a>(<span class="keyword">sizeof</span>(*cur), <a class="code" href="../../df/d72/group__Group__AMI.html#gadd09f46d9eea259a9a23b2a96fb99d7b">action_destroy</a>, <a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>);</div><div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160;   <span class="keywordflow">if</span> (!cur) {</div><div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07393"></a><span class="lineno"> 7393</span>&#160;   }</div><div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(cur, 128)) {</div><div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(cur, -1, <span class="stringliteral">&quot;action object creation failed&quot;</span>);</div><div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160;   }</div><div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;</div><div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;   cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a> = <a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>;</div><div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;   cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a321c2ead2a4079cde828f7491c2ef733">authority</a> = auth;</div><div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160;   cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab0bef752de7f442d29017ea812092d91">func</a> = <a class="code" href="../../d2/dcc/structmanager__action.html#ab0bef752de7f442d29017ea812092d91">func</a>;</div><div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;   cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">module</a> = <a class="code" href="../../d2/dcc/structmanager__action.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">module</a>;</div><div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;<span class="preprocessor">#ifdef AST_XML_DOCS</span></div><div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a>) &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d2/dcc/structmanager__action.html#a76f76ee5f847833b202461d55b23c17a">description</a>)) {</div><div class="line"><a name="l07405"></a><span class="lineno"> 7405</span>&#160;      <span class="keywordtype">char</span> *tmpxml;</div><div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160;</div><div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160;      tmpxml = <a class="code" href="../../d1/d99/xmldoc_8h.html#ada5725df0394b62d812bc36d3471b702">ast_xmldoc_build_synopsis</a>(<span class="stringliteral">&quot;manager&quot;</span>, <a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cur, <a class="code" href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a>, tmpxml);</div><div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tmpxml);</div><div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;</div><div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160;      tmpxml = <a class="code" href="../../d1/d99/xmldoc_8h.html#a5c52185fee8531c7e071227b4e5b2ae6">ast_xmldoc_build_syntax</a>(<span class="stringliteral">&quot;manager&quot;</span>, <a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cur, <a class="code" href="../../d2/dcc/structmanager__action.html#ac72ddaf7b92092136fc38629a809c87a">syntax</a>, tmpxml);</div><div class="line"><a name="l07413"></a><span class="lineno"> 7413</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tmpxml);</div><div class="line"><a name="l07414"></a><span class="lineno"> 7414</span>&#160;</div><div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160;      tmpxml = <a class="code" href="../../d1/d99/xmldoc_8h.html#a8f573b7eed021cfcb8c3e7a839c98c73">ast_xmldoc_build_description</a>(<span class="stringliteral">&quot;manager&quot;</span>, <a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cur, <a class="code" href="../../d2/dcc/structmanager__action.html#a76f76ee5f847833b202461d55b23c17a">description</a>, tmpxml);</div><div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tmpxml);</div><div class="line"><a name="l07418"></a><span class="lineno"> 7418</span>&#160;</div><div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;      tmpxml = <a class="code" href="../../d1/d99/xmldoc_8h.html#a5213452e6be61321a64293e54e4b550b">ast_xmldoc_build_seealso</a>(<span class="stringliteral">&quot;manager&quot;</span>, <a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07420"></a><span class="lineno"> 7420</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cur, <a class="code" href="../../d2/dcc/structmanager__action.html#ac07925c5773daffa1e00486fbb9ef495">seealso</a>, tmpxml);</div><div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tmpxml);</div><div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;</div><div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;      tmpxml = <a class="code" href="../../d1/d99/xmldoc_8h.html#a1b4f0eb83fde5ec2ca8357428b10826f">ast_xmldoc_build_arguments</a>(<span class="stringliteral">&quot;manager&quot;</span>, <a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cur, <a class="code" href="../../d2/dcc/structmanager__action.html#ad3d4ea338fb9552532c6828f6c312c57">arguments</a>, tmpxml);</div><div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tmpxml);</div><div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160;</div><div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;      cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a8c15417035739fd46675a17c5895afa9">final_response</a> = <a class="code" href="../../d1/d99/xmldoc_8h.html#a6a08b6e8d15408ee8bbf7313e1cba23d">ast_xmldoc_build_final_response</a>(<span class="stringliteral">&quot;manager&quot;</span>, <a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;      cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ad620e07ef3ac6fbeb23e5d2ec0484e1d">list_responses</a> = <a class="code" href="../../d1/d99/xmldoc_8h.html#a8569403d78e86654662bba47ff576bd5">ast_xmldoc_build_list_responses</a>(<span class="stringliteral">&quot;manager&quot;</span>, <a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;</div><div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160;      cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#aa871ca3c361d229d4e37edf3c6016cc1">docsrc</a> = <a class="code" href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e">AST_XML_DOC</a>;</div><div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;   {</div><div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cur, <a class="code" href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a>, <a class="code" href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a>);</div><div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cur, <a class="code" href="../../d2/dcc/structmanager__action.html#a76f76ee5f847833b202461d55b23c17a">description</a>, <a class="code" href="../../d2/dcc/structmanager__action.html#a76f76ee5f847833b202461d55b23c17a">description</a>);</div><div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160;<span class="preprocessor">#ifdef AST_XML_DOCS</span></div><div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160;      cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#aa871ca3c361d229d4e37edf3c6016cc1">docsrc</a> = <a class="code" href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a7273ed64a1fd4a93692986eac376124a">AST_STATIC_DOC</a>;</div><div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;   }</div><div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#ga1f6d4d99712fba3bb1075b0984bc2731">ast_manager_register_struct</a>(cur)) {</div><div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(cur, -1, <span class="stringliteral">&quot;action object registration failed&quot;</span>);</div><div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160;   }</div><div class="line"><a name="l07444"></a><span class="lineno"> 7444</span>&#160;</div><div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(cur, -1, <span class="stringliteral">&quot;action object registration successful&quot;</span>);</div><div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="app__mysql_8c_html_afbb30cae381f627fb08e1acdac926270"><div class="ttname"><a href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a></div><div class="ttdeci">static const char synopsis[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db6/app__mysql_8c_source.html#l00064">app_mysql.c:64</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a8717a951656993c40bd851ebf50f58e3a7273ed64a1fd4a93692986eac376124a"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a7273ed64a1fd4a93692986eac376124a">AST_STATIC_DOC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00032">xmldoc.h:32</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad57326008c326db88dc36779741622b8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad57326008c326db88dc36779741622b8">ao2_t_alloc</a></div><div class="ttdeci">#define ao2_t_alloc(data_size, destructor_fn, debug_msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00409">astobj2.h:409</a></div></div>
<div class="ttc" id="structmanager__action_html_ab0bef752de7f442d29017ea812092d91"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ab0bef752de7f442d29017ea812092d91">manager_action::func</a></div><div class="ttdeci">int(* func)(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00166">manager.h:166</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a8f573b7eed021cfcb8c3e7a839c98c73"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a8f573b7eed021cfcb8c3e7a839c98c73">ast_xmldoc_build_description</a></div><div class="ttdeci">char * ast_xmldoc_build_description(const char *type, const char *name, const char *module)</div><div class="ttdoc">Generate description documentation from XML. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l02250">xmldoc.c:2250</a></div></div>
<div class="ttc" id="structmanager__action_html_ab1db9bdb9ca2c111e4aef51de082553e"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">manager_action::action</a></div><div class="ttdeci">const char * action</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00151">manager.h:151</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga1f6d4d99712fba3bb1075b0984bc2731"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga1f6d4d99712fba3bb1075b0984bc2731">ast_manager_register_struct</a></div><div class="ttdeci">static int ast_manager_register_struct(struct manager_action *act)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07329">manager.c:7329</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e">AST_XML_DOC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00031">xmldoc.h:31</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmanager__action_html_ad620e07ef3ac6fbeb23e5d2ec0484e1d"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ad620e07ef3ac6fbeb23e5d2ec0484e1d">manager_action::list_responses</a></div><div class="ttdeci">struct ast_xml_doc_item * list_responses</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00160">manager.h:160</a></div></div>
<div class="ttc" id="xmldoc_8h_html_ada5725df0394b62d812bc36d3471b702"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#ada5725df0394b62d812bc36d3471b702">ast_xmldoc_build_synopsis</a></div><div class="ttdeci">char * ast_xmldoc_build_synopsis(const char *type, const char *name, const char *module)</div><div class="ttdoc">Generate synopsis documentation from XML. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l02227">xmldoc.c:2227</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a1b4f0eb83fde5ec2ca8357428b10826f"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a1b4f0eb83fde5ec2ca8357428b10826f">ast_xmldoc_build_arguments</a></div><div class="ttdeci">char * ast_xmldoc_build_arguments(const char *type, const char *name, const char *module)</div><div class="ttdoc">Generate the [arguments] tag based on type of node (&amp;#39;application&amp;#39;, &amp;#39;function&amp;#39; or &amp;#39;agi&amp;#39;) and name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l02075">xmldoc.c:2075</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a6a08b6e8d15408ee8bbf7313e1cba23d"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a6a08b6e8d15408ee8bbf7313e1cba23d">ast_xmldoc_build_final_response</a></div><div class="ttdeci">struct ast_xml_doc_item * ast_xmldoc_build_final_response(const char *type, const char *name, const char *module)</div><div class="ttdoc">Generate the [final response] tag based on type of node (&amp;#39;application&amp;#39;, &amp;#39;function&amp;#39; or &amp;#39;agi&amp;#39;) and name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l02528">xmldoc.c:2528</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a8569403d78e86654662bba47ff576bd5"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a8569403d78e86654662bba47ff576bd5">ast_xmldoc_build_list_responses</a></div><div class="ttdeci">struct ast_xml_doc_item * ast_xmldoc_build_list_responses(const char *type, const char *name, const char *module)</div><div class="ttdoc">Generate the [list responses] tag based on type of node (&amp;#39;application&amp;#39;, &amp;#39;function&amp;#39; or &amp;#39;agi&amp;#39;) and name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l02463">xmldoc.c:2463</a></div></div>
<div class="ttc" id="structmanager__action_html_a8637433cfbb88aeb10ce2ed5dcba0eb1"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">manager_action::module</a></div><div class="ttdeci">struct ast_module * module</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00167">manager.h:167</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structmanager__action_html_aa871ca3c361d229d4e37edf3c6016cc1"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#aa871ca3c361d229d4e37edf3c6016cc1">manager_action::docsrc</a></div><div class="ttdeci">enum ast_doc_src docsrc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00169">manager.h:169</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="structmanager__action_html_a76f76ee5f847833b202461d55b23c17a"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#a76f76ee5f847833b202461d55b23c17a">manager_action::description</a></div><div class="ttdeci">const ast_string_field description</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00158">manager.h:158</a></div></div>
<div class="ttc" id="structmanager__action_html_ad3d4ea338fb9552532c6828f6c312c57"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ad3d4ea338fb9552532c6828f6c312c57">manager_action::arguments</a></div><div class="ttdeci">const ast_string_field arguments</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00158">manager.h:158</a></div></div>
<div class="ttc" id="structmanager__action_html_a321c2ead2a4079cde828f7491c2ef733"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#a321c2ead2a4079cde828f7491c2ef733">manager_action::authority</a></div><div class="ttdeci">int authority</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00164">manager.h:164</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gadd09f46d9eea259a9a23b2a96fb99d7b"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gadd09f46d9eea259a9a23b2a96fb99d7b">action_destroy</a></div><div class="ttdeci">static void action_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07372">manager.c:7372</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a5c52185fee8531c7e071227b4e5b2ae6"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a5c52185fee8531c7e071227b4e5b2ae6">ast_xmldoc_build_syntax</a></div><div class="ttdeci">char * ast_xmldoc_build_syntax(const char *type, const char *name, const char *module)</div><div class="ttdoc">Get the syntax for a specified application or function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l01253">xmldoc.c:1253</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a5213452e6be61321a64293e54e4b550b"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a5213452e6be61321a64293e54e4b550b">ast_xmldoc_build_seealso</a></div><div class="ttdeci">char * ast_xmldoc_build_seealso(const char *type, const char *name, const char *module)</div><div class="ttdoc">Parse the &lt;see-also&gt; node content. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l01698">xmldoc.c:1698</a></div></div>
<div class="ttc" id="structmanager__action_html_a8c15417035739fd46675a17c5895afa9"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#a8c15417035739fd46675a17c5895afa9">manager_action::final_response</a></div><div class="ttdeci">struct ast_xml_doc_item * final_response</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00162">manager.h:162</a></div></div>
<div class="ttc" id="structmanager__action_html_ac07925c5773daffa1e00486fbb9ef495"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ac07925c5773daffa1e00486fbb9ef495">manager_action::seealso</a></div><div class="ttdeci">const ast_string_field seealso</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00158">manager.h:158</a></div></div>
<div class="ttc" id="structmanager__action_html_ac72ddaf7b92092136fc38629a809c87a"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ac72ddaf7b92092136fc38629a809c87a">manager_action::syntax</a></div><div class="ttdeci">const ast_string_field syntax</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00158">manager.h:158</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
<div class="ttc" id="structmanager__action_html"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html">manager_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00149">manager.h:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga9b312f4df19fa79a2185f41ff533516b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b312f4df19fa79a2185f41ff533516b">&#9670;&nbsp;</a></span>ast_manager_register_hook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_manager_register_hook </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a> *&#160;</td>
          <td class="paramname"><em>hook</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a custom hook to be called when an event is fired. </p>
<p>Add a custom hook to be called when an event is fired </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hook</td><td>struct <a class="el" href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a> object to add </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01934">1934</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, and <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00828">create_test_dialplan()</a>, and <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00120">register_hook()</a>.</p>
<div class="fragment"><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;{</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>, hook, list);</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>);</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="structmanager__hooks_html"><div class="ttname"><a href="../../d5/d26/structmanager__hooks.html">manager_hooks</a></div><div class="ttdoc">list of hooks registered </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01668">manager.c:1668</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1f6d4d99712fba3bb1075b0984bc2731"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1f6d4d99712fba3bb1075b0984bc2731">&#9670;&nbsp;</a></span>ast_manager_register_struct()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_manager_register_struct </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dcc/structmanager__action.html">manager_action</a> *&#160;</td>
          <td class="paramname"><em>act</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07329">7329</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00151">manager_action::action</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00701">AST_RWLIST_INSERT_AFTER</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00717">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l00244">ast_category::prev</a>, and <a class="el" href="../../db/d45/manager_8h_source.html#l00178">manager_action::registered</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07386">ast_manager_register2()</a>.</p>
<div class="fragment"><div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;{</div><div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dcc/structmanager__action.html">manager_action</a> *cur, *prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;</div><div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>, cur, list) {</div><div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;      <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;</div><div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;      ret = strcasecmp(cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, act-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>);</div><div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;      <span class="keywordflow">if</span> (ret == 0) {</div><div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Manager: Action &#39;%s&#39; already registered\n&quot;</span>, act-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>);</div><div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;      }</div><div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;      <span class="keywordflow">if</span> (ret &gt; 0) { <span class="comment">/* Insert these alphabetically */</span></div><div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;      }</div><div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;      prev = cur;</div><div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;   }</div><div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;</div><div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(act, +1, <span class="stringliteral">&quot;action object added to list&quot;</span>);</div><div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;   act-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#acee2bf9117848b5ffbbebb64a540e19f">registered</a> = 1;</div><div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;   <span class="keywordflow">if</span> (prev) {</div><div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a5937d72e8b39660a1b824af2042c0e9c">AST_RWLIST_INSERT_AFTER</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>, prev, act, list);</div><div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>, act, list);</div><div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;   }</div><div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;</div><div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Manager registered action %s\n&quot;</span>, act-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>);</div><div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;</div><div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;</div><div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a5937d72e8b39660a1b824af2042c0e9c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a5937d72e8b39660a1b824af2042c0e9c">AST_RWLIST_INSERT_AFTER</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_AFTER</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00701">linkedlists.h:701</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structmanager__action_html_ab1db9bdb9ca2c111e4aef51de082553e"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">manager_action::action</a></div><div class="ttdeci">const char * action</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00151">manager.h:151</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmanager__action_html_acee2bf9117848b5ffbbebb64a540e19f"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#acee2bf9117848b5ffbbebb64a540e19f">manager_action::registered</a></div><div class="ttdeci">unsigned int registered</div><div class="ttdoc">TRUE if the AMI action is registered and the callback can be called. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00178">manager.h:178</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structactions_html"><div class="ttname"><a href="../../dc/de8/structactions.html">actions</a></div><div class="ttdoc">list of actions registered </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01665">manager.c:1665</a></div></div>
<div class="ttc" id="structmanager__action_html"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html">manager_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00149">manager.h:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2a7a78b91c9ba54f89c9b5a9e7435027"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2a7a78b91c9ba54f89c9b5a9e7435027">&#9670;&nbsp;</a></span>ast_manager_str_from_json_object()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a>* ast_manager_str_from_json_object </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td>
          <td class="paramname"><em>blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d45/manager_8h.html#a8c8f2d8718ba98dc22b6615489fa2f8e">key_exclusion_cb</a>&#160;</td>
          <td class="paramname"><em>exclusion_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a JSON object into an AMI compatible string. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">blob</td><td>The JSON blob containing key/value pairs to convert </td></tr>
    <tr><td class="paramname">exclusion_cb</td><td>A <a class="el" href="../../db/d45/manager_8h.html#a8c8f2d8718ba98dc22b6615489fa2f8e">key_exclusion_cb</a> pointer to a function that will exclude keys from the final AMI string</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">A</td><td>malloc'd <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> object. Callers of this function should free the returned <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> object </td></tr>
    <tr><td class="paramname">NULL</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01821">1821</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d98/json_8c_source.html#l00263">ast_json_is_null()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01780">manager_json_to_ast_str()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01421">agi_channel_to_ami()</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l01871">aoc_to_ami()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01869">manager_generic_msg_cb()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02155">multi_user_event_to_ami()</a>, <a class="el" href="../../d4/d00/manager__mwi_8c_source.html#l00055">mwi_app_event_cb()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l01976">queue_channel_to_ami()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l02020">queue_member_to_ami()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l02084">queue_multi_channel_to_ami()</a>.</p>
<div class="fragment"><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;{</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *res = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(1024);</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/json_8h.html#afc96871ba6bc2669c1da4b313dd4a812">ast_json_is_null</a>(blob)) {</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga1f451671d833c6be7e65d2fe89042e1f">manager_json_to_ast_str</a>(blob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;res, exclusion_cb);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;   }</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga1f451671d833c6be7e65d2fe89042e1f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga1f451671d833c6be7e65d2fe89042e1f">manager_json_to_ast_str</a></div><div class="ttdeci">static void manager_json_to_ast_str(struct ast_json *obj, const char *key, struct ast_str **res, key_exclusion_cb exclusion_cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01780">manager.c:1780</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="json_8h_html_afc96871ba6bc2669c1da4b313dd4a812"><div class="ttname"><a href="../../d4/d05/json_8h.html#afc96871ba6bc2669c1da4b313dd4a812">ast_json_is_null</a></div><div class="ttdeci">int ast_json_is_null(const struct ast_json *value)</div><div class="ttdoc">Check if value is JSON null. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00263">json.c:263</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gafadf012f66a9fd7ecf985ec5b9dee101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafadf012f66a9fd7ecf985ec5b9dee101">&#9670;&nbsp;</a></span>ast_manager_unregister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_manager_unregister </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>action</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>support functions to register/unregister AMI action handlers, </p>
<p>Unregister a registered manager command. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07258">7258</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00151">manager_action::action</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, and <a class="el" href="../../db/d45/manager_8h_source.html#l00178">manager_action::registered</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l17540">__unload_module()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02835">ast_res_pjsip_cleanup_options_handling()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02219">ast_res_pjsip_destroy_configuration()</a>, <a class="el" href="../../d5/dcb/config__auth_8c_source.html#l00426">ast_sip_destroy_sorcery_auth()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l01467">ast_sip_destroy_sorcery_location()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l01058">astdb_atexit()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05591">bridge_cleanup()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04788">load_module()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l01122">local_shutdown()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00670">manager_bridging_cleanup()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08956">manager_shutdown()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01704">message_shutdown()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02624">unload_module()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00710">unload_parking_manager()</a>, and <a class="el" href="../../db/d94/pbx_8c_source.html#l08448">unload_pbx()</a>.</p>
<div class="fragment"><div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;{</div><div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dcc/structmanager__action.html">manager_action</a> *cur;</div><div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;</div><div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>, cur, list) {</div><div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>)) {</div><div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(list);</div><div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;      }</div><div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;   }</div><div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;</div><div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;   <span class="keywordflow">if</span> (cur) {</div><div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;<span class="comment">       * We have removed the action object from the container so we</span></div><div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;<span class="comment">       * are no longer in a hurry.</span></div><div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(cur);</div><div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;      cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#acee2bf9117848b5ffbbebb64a540e19f">registered</a> = 0;</div><div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(cur);</div><div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;</div><div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(cur, -1, <span class="stringliteral">&quot;action object removed from list&quot;</span>);</div><div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Manager unregistered action %s\n&quot;</span>, <a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>);</div><div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;   }</div><div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;</div><div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structmanager__action_html_ab1db9bdb9ca2c111e4aef51de082553e"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">manager_action::action</a></div><div class="ttdeci">const char * action</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00151">manager.h:151</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structmanager__action_html_acee2bf9117848b5ffbbebb64a540e19f"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#acee2bf9117848b5ffbbebb64a540e19f">manager_action::registered</a></div><div class="ttdeci">unsigned int registered</div><div class="ttdoc">TRUE if the AMI action is registered and the callback can be called. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00178">manager.h:178</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="structactions_html"><div class="ttname"><a href="../../dc/de8/structactions.html">actions</a></div><div class="ttdoc">list of actions registered </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01665">manager.c:1665</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
<div class="ttc" id="structmanager__action_html"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html">manager_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00149">manager.h:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga9592be65e0f9c99b7952a5841888757f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9592be65e0f9c99b7952a5841888757f">&#9670;&nbsp;</a></span>ast_manager_unregister_hook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_manager_unregister_hook </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a> *&#160;</td>
          <td class="paramname"><em>hook</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a custom hook to be called when an event is fired. </p>
<p>Delete a custom hook to be called when an event is fired </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hook</td><td>struct <a class="el" href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a> object to delete </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01942">1942</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00884">AST_RWLIST_REMOVE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, and <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00120">register_hook()</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00200">unload_module()</a>, and <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00130">unregister_hook()</a>.</p>
<div class="fragment"><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;{</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>);</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a>(&amp;<a class="code" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>, hook, list);</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>);</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structmanager__hooks_html"><div class="ttname"><a href="../../d5/d26/structmanager__hooks.html">manager_hooks</a></div><div class="ttdoc">list of hooks registered </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01668">manager.c:1668</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6091f0518f8b6f443fd9f5150f3ac407"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00884">linkedlists.h:884</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga22f6d55529c1ca69bc308af9d9ef0bb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga22f6d55529c1ca69bc308af9d9ef0bb2">&#9670;&nbsp;</a></span>ast_webmanager_check_enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_webmanager_check_enabled </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if AMI/HTTP is enabled. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01954">1954</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01475">manager_enabled</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01477">webmanager_enabled</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06276">action_coresettings()</a>, and <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00450">handle_show_settings()</a>.</p>
<div class="fragment"><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;{</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;   <span class="keywordflow">return</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#gad0b42352088047f7b3f29b4b331b43cd">webmanager_enabled</a> &amp;&amp; <a class="code" href="../../df/d72/group__Group__AMI.html#ga19fa3d97c06873c9d67de7232cca5247">manager_enabled</a>);</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga19fa3d97c06873c9d67de7232cca5247"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga19fa3d97c06873c9d67de7232cca5247">manager_enabled</a></div><div class="ttdeci">static int manager_enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01475">manager.c:1475</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gad0b42352088047f7b3f29b4b331b43cd"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gad0b42352088047f7b3f29b4b331b43cd">webmanager_enabled</a></div><div class="ttdeci">static int webmanager_enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01477">manager.c:1477</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gac2d42f7be13c532b6a70d50f1b8983d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac2d42f7be13c532b6a70d50f1b8983d2">&#9670;&nbsp;</a></span>astman_append()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void astman_append </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>utility functions for creating AMI replies </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">3080</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00895">AST_DYNSTR_BUILD_FAILED</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00982">ast_str_set_va()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03061">astman_append_buf</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03066">ASTMAN_APPEND_BUF_INITSIZE</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01631">mansession::hook</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03025">send_string()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00160">ast_tcptls_session_instance::stream</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01628">mansession::tcptls_session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l06845">_iax2_show_peers_one()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21181">_sip_show_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20404">_sip_show_peers_one()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04192">_skinny_show_device()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04088">_skinny_show_devices()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04443">_skinny_show_line()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04324">_skinny_show_lines()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02527">action_agents()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04442">action_challenge()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05295">action_command()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03821">action_confbridgelist_item()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03914">action_confbridgelistrooms()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06276">action_coresettings()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06390">action_coreshowchannels()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06318">action_corestatus()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16404">action_dahdishowchannels()</a>, <a class="el" href="../../df/d1d/res__manager__devicestate_8c_source.html#l00073">action_devicestatelist()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04343">action_events()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05974">action_extensionstate()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08383">action_extensionstatelist()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03620">action_getconfig()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03750">action_getconfigjson()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04610">action_getvar()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04460">action_hangup()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03682">action_listcategories()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04324">action_listcommands()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04393">action_login()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05953">action_mailboxcount()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05936">action_mailboxstatus()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05521">action_meetmelist()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05593">action_meetmelistrooms()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03602">action_ping()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06004">action_presencestate()</a>, <a class="el" href="../../d3/d2d/res__manager__presencestate_8c_source.html#l00073">action_presencestatelist()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04777">action_status()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04206">action_waitevent()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02135">ami_outbound_registration_task()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l01133">ami_registrations_aor()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02179">ami_show_outbound_registrations()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04031">ami_subscription_detail()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13227">append_vmu_info_astman()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07477">ast_cli_netstats()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02717">ast_sip_format_contact_ami()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03741">astman_append_json()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03245">astman_send_list_complete_end()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l13729">dahdi_cc_callback()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l09644">do_print()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l00828">format_ami_aor_handler()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l01239">format_ami_aorlist_handler()</a>, <a class="el" href="../../d5/dcb/config__auth_8c_source.html#l00168">format_ami_auth_handler()</a>, <a class="el" href="../../d5/dcb/config__auth_8c_source.html#l00226">format_ami_authlist_handler()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02416">format_ami_contactlist_handler()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01658">format_ami_endpoint()</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l00168">format_ami_endpoint_transport()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01729">format_ami_endpoints()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04090">format_ami_resource_lists()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04662">generate_status()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00397">manager_append_event_parking_lot_data_cb()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00555">manager_bridge_info()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05518">manager_bridge_tech_list()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00908">manager_dbget()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04349">manager_fax_sessions()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04317">manager_fax_sessions_entry()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04213">manager_fax_stats()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07198">manager_iax2_show_netstats()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07369">manager_iax2_show_registry()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l03927">manager_jabber_send()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01500">manager_mixmonitor()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06470">manager_modulecheck()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01406">manager_mute_mixmonitor()</a>, <a class="el" href="../../db/d8e/res__mutestream_8c_source.html#l00170">manager_mutestream()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00309">manager_parking_status_all_lots()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00259">manager_parking_status_single_lot()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l09990">manager_queue_rule_show()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10104">manager_queues_status()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10026">manager_queues_summary()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l06019">manager_show_dialplan()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l05864">manager_show_dialplan_helper()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20178">manager_show_registry()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20939">manager_sip_show_peer()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04287">manager_skinny_show_device()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04573">manager_skinny_show_line()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01565">manager_stop_mixmonitor()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00147">mwi_mailbox_get()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00522">send_bridge_info_item_cb()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00448">send_bridge_list_item_cb()</a>, <a class="el" href="../../df/d91/res__pjsip__endpoint__identifier__ip_8c_source.html#l00620">send_identify_ami_event()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20981">send_manager_peer_status()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06937">session_do()</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01105">spandsp_manager_fax_session()</a>.</p>
<div class="fragment"><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;{</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;   va_list ap;</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;   <span class="keywordflow">if</span> (!(buf = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../df/d72/group__Group__AMI.html#ga66c34a7f788ab4d323b1bee27256906d">astman_append_buf</a>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga53925ec1ccff9474e934c4182ec833ef">ASTMAN_APPEND_BUF_INITSIZE</a>))) {</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;   }</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;   res = <a class="code" href="../../d6/d90/strings_8h.html#a271350c7540474095b75cbea17d4837a">ast_str_set_va</a>(&amp;buf, 0, fmt, ap);</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;   va_end(ap);</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d6/d90/strings_8h.html#a640e110a8e92c1283f2aae76e4649f48a46fbdfa757aef01471bab9679ce4281f">AST_DYNSTR_BUILD_FAILED</a>) {</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;   }</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#a9469556f47f367a9b16433ba1c2247fe">hook</a> || (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a>-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gaa7c66558ac59bdb0c8d05864aaec9c22">send_string</a>(s, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf));</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;No connection stream in astman_append, should not happen\n&quot;</span>);</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;   }</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a271350c7540474095b75cbea17d4837a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a271350c7540474095b75cbea17d4837a">ast_str_set_va</a></div><div class="ttdeci">int ast_str_set_va(struct ast_str **buf, ssize_t max_len, const char *fmt, va_list ap)</div><div class="ttdoc">Set a dynamic string from a va_list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00982">strings.h:982</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga53925ec1ccff9474e934c4182ec833ef"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga53925ec1ccff9474e934c4182ec833ef">ASTMAN_APPEND_BUF_INITSIZE</a></div><div class="ttdeci">#define ASTMAN_APPEND_BUF_INITSIZE</div><div class="ttdoc">initial allocated size for the astman_append_buf and astman_send_*_va </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03066">manager.c:3066</a></div></div>
<div class="ttc" id="structmansession_html_affd6ea965816bd0ac40c18d7b5de8de6"><div class="ttname"><a href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">mansession::tcptls_session</a></div><div class="ttdeci">struct ast_tcptls_session_instance * tcptls_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01628">manager.c:1628</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga66c34a7f788ab4d323b1bee27256906d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga66c34a7f788ab4d323b1bee27256906d">astman_append_buf</a></div><div class="ttdeci">static struct ast_threadstorage astman_append_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03061">manager.c:3061</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="strings_8h_html_a640e110a8e92c1283f2aae76e4649f48a46fbdfa757aef01471bab9679ce4281f"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a640e110a8e92c1283f2aae76e4649f48a46fbdfa757aef01471bab9679ce4281f">AST_DYNSTR_BUILD_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00895">strings.h:895</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa7c66558ac59bdb0c8d05864aaec9c22"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa7c66558ac59bdb0c8d05864aaec9c22">send_string</a></div><div class="ttdeci">static int send_string(struct mansession *s, char *string)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03025">manager.c:3025</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">ast_tcptls_session_instance::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00160">tcptls.h:160</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="structmansession_html_a9469556f47f367a9b16433ba1c2247fe"><div class="ttname"><a href="../../d2/d8a/structmansession.html#a9469556f47f367a9b16433ba1c2247fe">mansession::hook</a></div><div class="ttdeci">struct manager_custom_hook * hook</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01631">manager.c:1631</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga81510d243e1eb9c6f919e72183e811a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga81510d243e1eb9c6f919e72183e811a6">&#9670;&nbsp;</a></span>astman_append_headers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void astman_append_headers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Append additional headers into the message structure from params. </p>
<dl class="section note"><dt>Note</dt><dd>You likely want to initialize m-&gt;hdrcount to 0 before calling this. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02830">2830</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00145">message::hdrcount</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00146">message::headers</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;{</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;   <span class="keywordflow">for</span> (v = params; v &amp;&amp; m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a> &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>); v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>((<span class="keywordtype">char</span>**)&amp;m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>], <span class="stringliteral">&quot;%s: %s&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>) &gt; -1) {</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;         ++m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>;</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;      }</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;   }</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="structmessage_html_a81929bcaa1dcfa1abf47977385058cbe"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">message::headers</a></div><div class="ttdeci">const char * headers[AST_MAX_MANHEADERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00146">manager.h:146</a></div></div>
<div class="ttc" id="structmessage_html_a2337374fe8025cb750f52a316166aa6d"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">message::hdrcount</a></div><div class="ttdeci">unsigned int hdrcount</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00145">manager.h:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga5d231019a6733602acb549ee4f82529b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5d231019a6733602acb549ee4f82529b">&#9670;&nbsp;</a></span>astman_append_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void astman_append_json </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03741">3741</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03721">json_escape()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03750">action_getconfigjson()</a>.</p>
<div class="fragment"><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;{</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;   buf = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(2 * strlen(<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>) + 1);</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga6dba42aa414d62585a0a662a5561ec73">json_escape</a>(buf, <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;%s&quot;</span>, buf);</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga6dba42aa414d62585a0a662a5561ec73"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga6dba42aa414d62585a0a662a5561ec73">json_escape</a></div><div class="ttdeci">static void json_escape(char *out, const char *in)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03721">manager.c:3721</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga960097199ef3da5b50b2b041eae8495d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga960097199ef3da5b50b2b041eae8495d">&#9670;&nbsp;</a></span>astman_flush()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void astman_flush </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03068">3068</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01631">mansession::hook</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03025">send_string()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00160">ast_tcptls_session_instance::stream</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01628">mansession::tcptls_session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03228">astman_send_list_complete()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03237">astman_send_list_complete_start()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03123">astman_send_response_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;{</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#a9469556f47f367a9b16433ba1c2247fe">hook</a> || (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a> &amp;&amp; s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a>-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>)) {</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gaa7c66558ac59bdb0c8d05864aaec9c22">send_string</a>(s, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf));</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;No connection stream in astman_append, should not happen\n&quot;</span>);</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;   }</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;}</div><div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="structmansession_html_affd6ea965816bd0ac40c18d7b5de8de6"><div class="ttname"><a href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">mansession::tcptls_session</a></div><div class="ttdeci">struct ast_tcptls_session_instance * tcptls_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01628">manager.c:1628</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa7c66558ac59bdb0c8d05864aaec9c22"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa7c66558ac59bdb0c8d05864aaec9c22">send_string</a></div><div class="ttdeci">static int send_string(struct mansession *s, char *string)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03025">manager.c:3025</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">ast_tcptls_session_instance::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00160">tcptls.h:160</a></div></div>
<div class="ttc" id="structmansession_html_a9469556f47f367a9b16433ba1c2247fe"><div class="ttname"><a href="../../d2/d8a/structmansession.html#a9469556f47f367a9b16433ba1c2247fe">mansession::hook</a></div><div class="ttdeci">struct manager_custom_hook * hook</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01631">manager.c:1631</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1b557a85c122f479896a9f598ee49116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1b557a85c122f479896a9f598ee49116">&#9670;&nbsp;</a></span>astman_free_headers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void astman_free_headers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free headers inside message structure, but not the message structure itself. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02844">2844</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00145">message::hdrcount</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00146">message::headers</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06852">do_message()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;{</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;   <span class="keywordflow">while</span> (m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>) {</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;      --m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>((<span class="keywordtype">void</span> *) m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>]);</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;      m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>] = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;   }</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structmessage_html_a81929bcaa1dcfa1abf47977385058cbe"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">message::headers</a></div><div class="ttdeci">const char * headers[AST_MAX_MANHEADERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00146">manager.h:146</a></div></div>
<div class="ttc" id="structmessage_html_a2337374fe8025cb750f52a316166aa6d"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">message::hdrcount</a></div><div class="ttdeci">unsigned int hdrcount</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00145">manager.h:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gac6a9f3498f9afffecfd78c485af41556"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac6a9f3498f9afffecfd78c485af41556">&#9670;&nbsp;</a></span>astman_get_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* astman_get_header </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>var</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the first matching variable from an array. </p>
<p>Get header from mananger transaction.</p>
<dl class="section note"><dt>Note</dt><dd>This is the legacy function and is implemented in therms of <a class="el" href="../../df/d72/group__Group__AMI.html#ga5106d8afed1eac24399cc5d57ab0c7e6" title="Return a matching header value. ">__astman_get_header()</a>.</dd>
<dd>
Never returns NULL. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">2820</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l02783">__astman_get_header()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02766">GET_HEADER_FIRST_MATCH</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21084">_sip_qualify_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21181">_sip_show_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20295">_sip_show_peers()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04088">_skinny_show_devices()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04324">_skinny_show_lines()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01709">action_add_agi_cmd()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02605">action_agent_logoff()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02527">action_agents()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05518">action_aocmessage()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05164">action_atxfer()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05118">action_blind_transfer()</a>, <a class="el" href="../../d5/d92/features_8c_source.html#l00757">action_bridge()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05218">action_cancel_atxfer()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04442">action_challenge()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05295">action_command()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04037">action_confbridgekick()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03869">action_confbridgelist()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03914">action_confbridgelistrooms()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04149">action_confbridgesetsinglevideosrc()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04070">action_confbridgestartrecord()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04115">action_confbridgestoprecord()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06276">action_coresettings()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06390">action_coreshowchannels()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06318">action_corestatus()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04188">action_createconfig()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16372">action_dahdidialoffhook()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16307">action_dahdidndoff()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16288">action_dahdidndon()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16404">action_dahdishowchannels()</a>, <a class="el" href="../../df/d1d/res__manager__devicestate_8c_source.html#l00073">action_devicestatelist()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04343">action_events()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05974">action_extensionstate()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08383">action_extensionstatelist()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06111">action_filter()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03620">action_getconfig()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03750">action_getconfigjson()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04610">action_getvar()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04460">action_hangup()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03682">action_listcategories()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04008">action_lock_unlock_helper()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05953">action_mailboxcount()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05936">action_mailboxstatus()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05521">action_meetmelist()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05593">action_meetmelistrooms()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01306">action_messagesend()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03966">action_mute_unmute_helper()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05723">action_originate()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03602">action_ping()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06004">action_presencestate()</a>, <a class="el" href="../../d3/d2d/res__manager__presencestate_8c_source.html#l00073">action_presencestatelist()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04973">action_redirect()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06358">action_reload()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04930">action_sendtext()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04577">action_setvar()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04777">action_status()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06044">action_timeout()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16326">action_transfer()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16349">action_transferhangup()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04102">action_updateconfig()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06255">action_userevent()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04206">action_waitevent()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02091">ami_register()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l01260">ami_show_aors()</a>, <a class="el" href="../../d5/dcb/config__auth_8c_source.html#l00247">ami_show_auths()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02453">ami_show_contacts()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01676">ami_show_endpoint()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01769">ami_show_endpoints()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02179">ami_show_outbound_registrations()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l01190">ami_show_registration_contact_statuses()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l01175">ami_show_registrations()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04112">ami_show_resource_lists()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04062">ami_show_subscriptions_inbound()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04076">ami_show_subscriptions_outbound()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02666">ami_sip_qualify()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02059">ami_unregister()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05493">aocmessage_get_unit_entry()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02937">ast_hook_send_action()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03206">astman_send_list_complete_start_common()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03123">astman_send_response_full()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03505">authenticate()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00892">change_monitor_action()</a>, <a class="el" href="../../d6/dde/app__controlplayback_8c_source.html#l00286">controlplayback_manager()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l13729">dahdi_cc_callback()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00938">do_pause_or_unpause()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05474">handle_manager_bridge_tech_suspend()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03819">handle_updates()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10222">manager_add_queue_member()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00604">manager_bridge_destroy()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00555">manager_bridge_info()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00626">manager_bridge_kick()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05518">manager_bridge_tech_list()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00484">manager_bridges_list()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10517">manager_change_priority_caller_on_queue()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00950">manager_dbdel()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00975">manager_dbdeltree()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00908">manager_dbget()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00883">manager_dbput()</a>, <a class="el" href="../../dd/d9a/pbx__config_8c_source.html#l01195">manager_dialplan_extension_add()</a>, <a class="el" href="../../dd/d9a/pbx__config_8c_source.html#l00502">manager_dialplan_extension_remove()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04143">manager_fax_session()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04349">manager_fax_sessions()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04213">manager_fax_stats()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07267">manager_iax2_show_peer_list()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07245">manager_iax2_show_peers()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07369">manager_iax2_show_registry()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l03927">manager_jabber_send()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13428">manager_list_voicemail_users()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13344">manager_match_mailbox()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01500">manager_mixmonitor()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06470">manager_modulecheck()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06505">manager_moduleload()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01406">manager_mute_mixmonitor()</a>, <a class="el" href="../../db/d8e/res__mutestream_8c_source.html#l00170">manager_mutestream()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l01183">manager_notify()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l01073">manager_optimize_away()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00519">manager_park()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00420">manager_parking_lot_list()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00372">manager_parking_status()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10333">manager_pause_queue_member()</a>, <a class="el" href="../../dc/d37/app__senddtmf_8c_source.html#l00148">manager_play_dtmf()</a>, <a class="el" href="../../d7/d1d/app__mf_8c_source.html#l00682">manager_play_mf()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10358">manager_queue_log_custom()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10491">manager_queue_member_penalty()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10457">manager_queue_member_ringinuse()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10379">manager_queue_reload()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10411">manager_queue_reset()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l09990">manager_queue_rule_show()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10104">manager_queues_status()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10026">manager_queues_summary()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10286">manager_remove_queue_member()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l06019">manager_show_dialplan()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20178">manager_show_registry()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21014">manager_sip_peer_status()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21115">manager_sip_qualify_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20939">manager_sip_show_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20231">manager_sip_show_peers()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15659">manager_sipnotify()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04287">manager_skinny_show_device()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04573">manager_skinny_show_line()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13382">manager_status_voicemail_user()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01565">manager_stop_mixmonitor()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05451">meetmemute()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00244">mwi_mailbox_delete()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00147">mwi_mailbox_get()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00290">mwi_mailbox_update()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02115">sorcery_memory_cache_ami_expire()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02069">sorcery_memory_cache_ami_expire_object()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02230">sorcery_memory_cache_ami_populate()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02199">sorcery_memory_cache_ami_stale()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02146">sorcery_memory_cache_ami_stale_object()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00808">start_monitor_action()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00861">stop_monitor_action()</a>.</p>
<div class="fragment"><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;{</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d72/group__Group__AMI.html#ga5106d8afed1eac24399cc5d57ab0c7e6">__astman_get_header</a>(m, <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, <a class="code" href="../../df/d72/group__Group__AMI.html#gaeac2210b7c1bd030e2766730c0f6f0e6">GET_HEADER_FIRST_MATCH</a>);</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga5106d8afed1eac24399cc5d57ab0c7e6"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5106d8afed1eac24399cc5d57ab0c7e6">__astman_get_header</a></div><div class="ttdeci">static const char * __astman_get_header(const struct message *m, char *var, int mode)</div><div class="ttdoc">Return a matching header value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02783">manager.c:2783</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaeac2210b7c1bd030e2766730c0f6f0e6"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaeac2210b7c1bd030e2766730c0f6f0e6">GET_HEADER_FIRST_MATCH</a></div><div class="ttdeci">#define GET_HEADER_FIRST_MATCH</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02766">manager.c:2766</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga21a20a25e6d03f6fd32cdc86fe9b53d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga21a20a25e6d03f6fd32cdc86fe9b53d1">&#9670;&nbsp;</a></span>astman_get_variables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a>* astman_get_variables </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a linked list of the Variable: headers. </p>
<dl class="section note"><dt>Note</dt><dd>Order of variables is reversed from the order they are specified in the manager message </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02906">2906</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l02911">astman_get_variables_order()</a>, and <a class="el" href="../../db/d45/manager_8h_source.html#l00284">ORDER_REVERSE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l05723">action_originate()</a>.</p>
<div class="fragment"><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;{</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gaa97739ea571e22b9dcd231658f6ce044">astman_get_variables_order</a>(m, <a class="code" href="../../db/d45/manager_8h.html#a5622d5b2d0baf505daf7b2a1e99c1140aacb866340e59acaa596f8d94a8b61daf">ORDER_REVERSE</a>);</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;}</div><div class="ttc" id="manager_8h_html_a5622d5b2d0baf505daf7b2a1e99c1140aacb866340e59acaa596f8d94a8b61daf"><div class="ttname"><a href="../../db/d45/manager_8h.html#a5622d5b2d0baf505daf7b2a1e99c1140aacb866340e59acaa596f8d94a8b61daf">ORDER_REVERSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00284">manager.h:284</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa97739ea571e22b9dcd231658f6ce044"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa97739ea571e22b9dcd231658f6ce044">astman_get_variables_order</a></div><div class="ttdeci">struct ast_variable * astman_get_variables_order(const struct message *m, enum variable_orders order)</div><div class="ttdoc">Get a linked list of the Variable: headers with order specified. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02911">manager.c:2911</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa97739ea571e22b9dcd231658f6ce044"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa97739ea571e22b9dcd231658f6ce044">&#9670;&nbsp;</a></span>astman_get_variables_order()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a>* astman_get_variables_order </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../db/d45/manager_8h.html#a5622d5b2d0baf505daf7b2a1e99c1140">variable_orders</a>&#160;</td>
          <td class="paramname"><em>order</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a linked list of the Variable: headers with order specified. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02911">2911</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l00567">ast_variables_reverse()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00145">message::hdrcount</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00146">message::headers</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02862">man_do_variable_value()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../db/d45/manager_8h_source.html#l00283">ORDER_NATURAL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d6d/message_8c_source.html#l01306">action_messagesend()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02906">astman_get_variables()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l01151">manager_notify_channel()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l01078">manager_notify_endpoint()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l01119">manager_notify_uri()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15659">manager_sipnotify()</a>.</p>
<div class="fragment"><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;{</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;   <span class="keywordtype">int</span> varlen;</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *head = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> var_hdr[] = <span class="stringliteral">&quot;Variable:&quot;</span>;</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;   <span class="comment">/* Process all &quot;Variable:&quot; headers. */</span></div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;   varlen = strlen(var_hdr);</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>; x++) {</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;      <span class="keywordflow">if</span> (strncasecmp(var_hdr, m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[x], varlen)) {</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;      }</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      head = <a class="code" href="../../df/d72/group__Group__AMI.html#ga067ac83735089a590c082f49ab11800c">man_do_variable_value</a>(head, m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[x] + varlen);</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;   }</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d79/analys_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> == <a class="code" href="../../db/d45/manager_8h.html#a5622d5b2d0baf505daf7b2a1e99c1140a68beaf6e96b2e55b9301d1883add4c0a">ORDER_NATURAL</a>) {</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;      head = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a21bd6558b946c31ad5f4eae901051bc5">ast_variables_reverse</a>(head);</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;   }</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;   <span class="keywordflow">return</span> head;</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;}</div><div class="ttc" id="include_2asterisk_2config_8h_html_a21bd6558b946c31ad5f4eae901051bc5"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a21bd6558b946c31ad5f4eae901051bc5">ast_variables_reverse</a></div><div class="ttdeci">struct ast_variable * ast_variables_reverse(struct ast_variable *var)</div><div class="ttdoc">Reverse a variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00567">main/config.c:567</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga067ac83735089a590c082f49ab11800c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga067ac83735089a590c082f49ab11800c">man_do_variable_value</a></div><div class="ttdeci">static struct ast_variable * man_do_variable_value(struct ast_variable *head, const char *hdr_val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02862">manager.c:2862</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="analys_8c_html_aed7ca058008dc3e5ee131e575abed285"><div class="ttname"><a href="../../d2/d79/analys_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a></div><div class="ttdeci">integer order</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d79/analys_8c_source.html#l00066">analys.c:66</a></div></div>
<div class="ttc" id="manager_8h_html_a5622d5b2d0baf505daf7b2a1e99c1140a68beaf6e96b2e55b9301d1883add4c0a"><div class="ttname"><a href="../../db/d45/manager_8h.html#a5622d5b2d0baf505daf7b2a1e99c1140a68beaf6e96b2e55b9301d1883add4c0a">ORDER_NATURAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00283">manager.h:283</a></div></div>
<div class="ttc" id="structmessage_html_a81929bcaa1dcfa1abf47977385058cbe"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">message::headers</a></div><div class="ttdeci">const char * headers[AST_MAX_MANHEADERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00146">manager.h:146</a></div></div>
<div class="ttc" id="structmessage_html_a2337374fe8025cb750f52a316166aa6d"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">message::hdrcount</a></div><div class="ttdeci">unsigned int hdrcount</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00145">manager.h:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga77315fa8e29950f0c88120501acda0a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga77315fa8e29950f0c88120501acda0a3">&#9670;&nbsp;</a></span>astman_send_ack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void astman_send_ack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send ack in manager transaction. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">3191</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l03123">astman_send_response_full()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21084">_sip_qualify_peer()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01709">action_add_agi_cmd()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02605">action_agent_logoff()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05518">action_aocmessage()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05164">action_atxfer()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05118">action_blind_transfer()</a>, <a class="el" href="../../d5/d92/features_8c_source.html#l00757">action_bridge()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05218">action_cancel_atxfer()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04037">action_confbridgekick()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04149">action_confbridgesetsinglevideosrc()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04070">action_confbridgestartrecord()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04115">action_confbridgestoprecord()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04188">action_createconfig()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16372">action_dahdidialoffhook()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16307">action_dahdidndoff()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16288">action_dahdidndon()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l15562">action_dahdirestart()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06111">action_filter()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04460">action_hangup()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04008">action_lock_unlock_helper()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06458">action_loggerrotate()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04393">action_login()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01306">action_messagesend()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03966">action_mute_unmute_helper()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05723">action_originate()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04973">action_redirect()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06358">action_reload()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04930">action_sendtext()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04577">action_setvar()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06044">action_timeout()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16326">action_transfer()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16349">action_transferhangup()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04102">action_updateconfig()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06255">action_userevent()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02091">ami_register()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02666">ami_sip_qualify()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02059">ami_unregister()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00892">change_monitor_action()</a>, <a class="el" href="../../d6/dde/app__controlplayback_8c_source.html#l00286">controlplayback_manager()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l13729">dahdi_cc_callback()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00938">do_pause_or_unpause()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05474">handle_manager_bridge_tech_suspend()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10222">manager_add_queue_member()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00604">manager_bridge_destroy()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00626">manager_bridge_kick()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10517">manager_change_priority_caller_on_queue()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00950">manager_dbdel()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00975">manager_dbdeltree()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00883">manager_dbput()</a>, <a class="el" href="../../dd/d9a/pbx__config_8c_source.html#l01195">manager_dialplan_extension_add()</a>, <a class="el" href="../../dd/d9a/pbx__config_8c_source.html#l00502">manager_dialplan_extension_remove()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04143">manager_fax_session()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04213">manager_fax_stats()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l03927">manager_jabber_send()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13428">manager_list_voicemail_users()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06505">manager_moduleload()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l01151">manager_notify_channel()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l01078">manager_notify_endpoint()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l01119">manager_notify_uri()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l01073">manager_optimize_away()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00473">manager_park_bridged()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00452">manager_park_unbridged()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10333">manager_pause_queue_member()</a>, <a class="el" href="../../dc/d37/app__senddtmf_8c_source.html#l00148">manager_play_dtmf()</a>, <a class="el" href="../../d7/d1d/app__mf_8c_source.html#l00682">manager_play_mf()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10358">manager_queue_log_custom()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10491">manager_queue_member_penalty()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10457">manager_queue_member_ringinuse()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10379">manager_queue_reload()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10411">manager_queue_reset()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10286">manager_remove_queue_member()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15659">manager_sipnotify()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13382">manager_status_voicemail_user()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13375">manager_voicemail_refresh()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05451">meetmemute()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00244">mwi_mailbox_delete()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00290">mwi_mailbox_update()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02115">sorcery_memory_cache_ami_expire()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02069">sorcery_memory_cache_ami_expire_object()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02230">sorcery_memory_cache_ami_populate()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02199">sorcery_memory_cache_ami_stale()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02146">sorcery_memory_cache_ami_stale_object()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00808">start_monitor_action()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00861">stop_monitor_action()</a>.</p>
<div class="fragment"><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;{</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a>(s, m, <span class="stringliteral">&quot;Success&quot;</span>, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga5ceffcba60b4100c02c4700be76161e4"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a></div><div class="ttdeci">static void astman_send_response_full(struct mansession *s, const struct message *m, char *resp, char *msg, char *listflag)</div><div class="ttdoc">send a response with an optional message, and terminate it with an empty line. m is used only to grab...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03123">manager.c:3123</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga31a02a7d3cc36aa66ebebdedfc574d1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga31a02a7d3cc36aa66ebebdedfc574d1c">&#9670;&nbsp;</a></span>astman_send_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void astman_send_error </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send error in manager transaction. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">3159</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l03123">astman_send_response_full()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21084">_sip_qualify_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21181">_sip_show_peer()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01709">action_add_agi_cmd()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02605">action_agent_logoff()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05518">action_aocmessage()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05164">action_atxfer()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05118">action_blind_transfer()</a>, <a class="el" href="../../d5/d92/features_8c_source.html#l00757">action_bridge()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05218">action_cancel_atxfer()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04442">action_challenge()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05295">action_command()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04037">action_confbridgekick()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03869">action_confbridgelist()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03914">action_confbridgelistrooms()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04149">action_confbridgesetsinglevideosrc()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04070">action_confbridgestartrecord()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04115">action_confbridgestoprecord()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04188">action_createconfig()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16372">action_dahdidialoffhook()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16307">action_dahdidndoff()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16288">action_dahdidndon()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l15562">action_dahdirestart()</a>, <a class="el" href="../../df/d1d/res__manager__devicestate_8c_source.html#l00073">action_devicestatelist()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04343">action_events()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05974">action_extensionstate()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08383">action_extensionstatelist()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06111">action_filter()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03620">action_getconfig()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03750">action_getconfigjson()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04610">action_getvar()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04460">action_hangup()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03682">action_listcategories()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04008">action_lock_unlock_helper()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06458">action_loggerrotate()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04393">action_login()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05953">action_mailboxcount()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05936">action_mailboxstatus()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05521">action_meetmelist()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05593">action_meetmelistrooms()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01306">action_messagesend()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03966">action_mute_unmute_helper()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05723">action_originate()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06004">action_presencestate()</a>, <a class="el" href="../../d3/d2d/res__manager__presencestate_8c_source.html#l00073">action_presencestatelist()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04973">action_redirect()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06358">action_reload()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04930">action_sendtext()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04577">action_setvar()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04777">action_status()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06044">action_timeout()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16326">action_transfer()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16349">action_transferhangup()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04102">action_updateconfig()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02091">ami_register()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l01260">ami_show_aors()</a>, <a class="el" href="../../d5/dcb/config__auth_8c_source.html#l00247">ami_show_auths()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02453">ami_show_contacts()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01769">ami_show_endpoints()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02179">ami_show_outbound_registrations()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04112">ami_show_resource_lists()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02666">ami_sip_qualify()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02059">ami_unregister()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00892">change_monitor_action()</a>, <a class="el" href="../../d6/dde/app__controlplayback_8c_source.html#l00286">controlplayback_manager()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l13729">dahdi_cc_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06852">do_message()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00938">do_pause_or_unpause()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05474">handle_manager_bridge_tech_suspend()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06835">handle_parse_error()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10222">manager_add_queue_member()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00604">manager_bridge_destroy()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00555">manager_bridge_info()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00626">manager_bridge_kick()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05518">manager_bridge_tech_list()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00484">manager_bridges_list()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10517">manager_change_priority_caller_on_queue()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00950">manager_dbdel()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00975">manager_dbdeltree()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00908">manager_dbget()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00883">manager_dbput()</a>, <a class="el" href="../../dd/d9a/pbx__config_8c_source.html#l01195">manager_dialplan_extension_add()</a>, <a class="el" href="../../dd/d9a/pbx__config_8c_source.html#l00502">manager_dialplan_extension_remove()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04143">manager_fax_session()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l03927">manager_jabber_send()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01500">manager_mixmonitor()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06470">manager_modulecheck()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06505">manager_moduleload()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01406">manager_mute_mixmonitor()</a>, <a class="el" href="../../db/d8e/res__mutestream_8c_source.html#l00170">manager_mutestream()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l01183">manager_notify()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l01151">manager_notify_channel()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l01078">manager_notify_endpoint()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l01119">manager_notify_uri()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l01073">manager_optimize_away()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00519">manager_park()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00473">manager_park_bridged()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00452">manager_park_unbridged()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00420">manager_parking_lot_list()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00309">manager_parking_status_all_lots()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00259">manager_parking_status_single_lot()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10333">manager_pause_queue_member()</a>, <a class="el" href="../../dc/d37/app__senddtmf_8c_source.html#l00148">manager_play_dtmf()</a>, <a class="el" href="../../d7/d1d/app__mf_8c_source.html#l00682">manager_play_mf()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10358">manager_queue_log_custom()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10491">manager_queue_member_penalty()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10457">manager_queue_member_ringinuse()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10379">manager_queue_reload()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10411">manager_queue_reset()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10286">manager_remove_queue_member()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l06019">manager_show_dialplan()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l05864">manager_show_dialplan_helper()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21014">manager_sip_peer_status()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21115">manager_sip_qualify_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20939">manager_sip_show_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15659">manager_sipnotify()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04287">manager_skinny_show_device()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04573">manager_skinny_show_line()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13382">manager_status_voicemail_user()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01565">manager_stop_mixmonitor()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05451">meetmemute()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00244">mwi_mailbox_delete()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00147">mwi_mailbox_get()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00290">mwi_mailbox_update()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02115">sorcery_memory_cache_ami_expire()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02069">sorcery_memory_cache_ami_expire_object()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02230">sorcery_memory_cache_ami_populate()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02199">sorcery_memory_cache_ami_stale()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02146">sorcery_memory_cache_ami_stale_object()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00808">start_monitor_action()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00861">stop_monitor_action()</a>.</p>
<div class="fragment"><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;{</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a>(s, m, <span class="stringliteral">&quot;Error&quot;</span>, <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga5ceffcba60b4100c02c4700be76161e4"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a></div><div class="ttdeci">static void astman_send_response_full(struct mansession *s, const struct message *m, char *resp, char *msg, char *listflag)</div><div class="ttdoc">send a response with an optional message, and terminate it with an empty line. m is used only to grab...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03123">manager.c:3123</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga352d583ea36240124638e5c1db088227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga352d583ea36240124638e5c1db088227">&#9670;&nbsp;</a></span>astman_send_error_va()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void astman_send_error_va </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send error in manager transaction (with va_args support) </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03164">3164</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00895">AST_DYNSTR_BUILD_FAILED</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00982">ast_str_set_va()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03061">astman_append_buf</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03066">ASTMAN_APPEND_BUF_INITSIZE</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03123">astman_send_response_full()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l05295">action_command()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04460">action_hangup()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05723">action_originate()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06004">action_presencestate()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01676">ami_show_endpoint()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01584">ast_sip_create_ami_event()</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l00168">format_ami_endpoint_transport()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l01078">manager_notify_endpoint()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00244">mwi_mailbox_delete()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00147">mwi_mailbox_get()</a>, and <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00290">mwi_mailbox_update()</a>.</p>
<div class="fragment"><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;{</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;   va_list ap;</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;   <span class="keywordtype">char</span> *msg;</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;   <span class="keywordflow">if</span> (!(buf = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../df/d72/group__Group__AMI.html#ga66c34a7f788ab4d323b1bee27256906d">astman_append_buf</a>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga53925ec1ccff9474e934c4182ec833ef">ASTMAN_APPEND_BUF_INITSIZE</a>))) {</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;   }</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;   res = <a class="code" href="../../d6/d90/strings_8h.html#a271350c7540474095b75cbea17d4837a">ast_str_set_va</a>(&amp;buf, 0, fmt, ap);</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;   va_end(ap);</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d6/d90/strings_8h.html#a640e110a8e92c1283f2aae76e4649f48a46fbdfa757aef01471bab9679ce4281f">AST_DYNSTR_BUILD_FAILED</a>) {</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;   }</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;   <span class="comment">/* astman_append will use the same underlying buffer, so copy the message out</span></div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;<span class="comment">    * before sending the response */</span></div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;   msg = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf);</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;   <span class="keywordflow">if</span> (msg) {</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;      msg = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(msg);</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;   }</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a>(s, m, <span class="stringliteral">&quot;Error&quot;</span>, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a271350c7540474095b75cbea17d4837a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a271350c7540474095b75cbea17d4837a">ast_str_set_va</a></div><div class="ttdeci">int ast_str_set_va(struct ast_str **buf, ssize_t max_len, const char *fmt, va_list ap)</div><div class="ttdoc">Set a dynamic string from a va_list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00982">strings.h:982</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga5ceffcba60b4100c02c4700be76161e4"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a></div><div class="ttdeci">static void astman_send_response_full(struct mansession *s, const struct message *m, char *resp, char *msg, char *listflag)</div><div class="ttdoc">send a response with an optional message, and terminate it with an empty line. m is used only to grab...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03123">manager.c:3123</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga53925ec1ccff9474e934c4182ec833ef"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga53925ec1ccff9474e934c4182ec833ef">ASTMAN_APPEND_BUF_INITSIZE</a></div><div class="ttdeci">#define ASTMAN_APPEND_BUF_INITSIZE</div><div class="ttdoc">initial allocated size for the astman_append_buf and astman_send_*_va </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03066">manager.c:3066</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga66c34a7f788ab4d323b1bee27256906d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga66c34a7f788ab4d323b1bee27256906d">astman_append_buf</a></div><div class="ttdeci">static struct ast_threadstorage astman_append_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03061">manager.c:3061</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="strings_8h_html_a640e110a8e92c1283f2aae76e4649f48a46fbdfa757aef01471bab9679ce4281f"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a640e110a8e92c1283f2aae76e4649f48a46fbdfa757aef01471bab9679ce4281f">AST_DYNSTR_BUILD_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00895">strings.h:895</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gac9d1d485a1911880e31a3537223b3f9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac9d1d485a1911880e31a3537223b3f9c">&#9670;&nbsp;</a></span>astman_send_list_complete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void astman_send_list_complete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>event_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03228">3228</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03068">astman_flush()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03206">astman_send_list_complete_start_common()</a>, and <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06390">action_coreshowchannels()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l04460">action_hangup()</a>.</p>
<div class="fragment"><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;{</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#ga63df9fe1c4852999ab438347124a34b8">astman_send_list_complete_start_common</a>(s, m, event_name, count);</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;   <span class="keywordflow">if</span> (buf) {</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga960097199ef3da5b50b2b041eae8495d">astman_flush</a>(s, buf);</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;   }</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga63df9fe1c4852999ab438347124a34b8"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga63df9fe1c4852999ab438347124a34b8">astman_send_list_complete_start_common</a></div><div class="ttdeci">static struct ast_str * astman_send_list_complete_start_common(struct mansession *s, const struct message *m, const char *event_name, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03206">manager.c:3206</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga960097199ef3da5b50b2b041eae8495d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga960097199ef3da5b50b2b041eae8495d">astman_flush</a></div><div class="ttdeci">static void astman_flush(struct mansession *s, struct ast_str *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03068">manager.c:3068</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gabf7c909efbfc26d0d9c66786c83b8f69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabf7c909efbfc26d0d9c66786c83b8f69">&#9670;&nbsp;</a></span>astman_send_list_complete_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void astman_send_list_complete_end </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>End the list complete event. </p>
<dl class="section since"><dt>Since</dt><dd>13.2.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>- AMI session control struct.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>You need to call <a class="el" href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342" title="Start the list complete event. ">astman_send_list_complete_start()</a> to start the AMI list completion event.</dd>
<dd>
Between calling <a class="el" href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342" title="Start the list complete event. ">astman_send_list_complete_start()</a> and <a class="el" href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69" title="End the list complete event. ">astman_send_list_complete_end()</a> you can add additonal headers using <a class="el" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append()</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03245">3245</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02527">action_agents()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03869">action_confbridgelist()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03914">action_confbridgelistrooms()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16404">action_dahdishowchannels()</a>, <a class="el" href="../../df/d1d/res__manager__devicestate_8c_source.html#l00073">action_devicestatelist()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08383">action_extensionstatelist()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05521">action_meetmelist()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05593">action_meetmelistrooms()</a>, <a class="el" href="../../d3/d2d/res__manager__presencestate_8c_source.html#l00073">action_presencestatelist()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04777">action_status()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l01260">ami_show_aors()</a>, <a class="el" href="../../d5/dcb/config__auth_8c_source.html#l00247">ami_show_auths()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02453">ami_show_contacts()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01676">ami_show_endpoint()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01769">ami_show_endpoints()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02179">ami_show_outbound_registrations()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l01190">ami_show_registration_contact_statuses()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l01175">ami_show_registrations()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04112">ami_show_resource_lists()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04062">ami_show_subscriptions_inbound()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04076">ami_show_subscriptions_outbound()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00555">manager_bridge_info()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05518">manager_bridge_tech_list()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00484">manager_bridges_list()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00908">manager_dbget()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04349">manager_fax_sessions()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07267">manager_iax2_show_peer_list()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07245">manager_iax2_show_peers()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07369">manager_iax2_show_registry()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13428">manager_list_voicemail_users()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00420">manager_parking_lot_list()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00309">manager_parking_status_all_lots()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00259">manager_parking_status_single_lot()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10104">manager_queues_status()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10026">manager_queues_summary()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l06019">manager_show_dialplan()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20178">manager_show_registry()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21014">manager_sip_peer_status()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20231">manager_sip_show_peers()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04159">manager_skinny_show_devices()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04401">manager_skinny_show_lines()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13382">manager_status_voicemail_user()</a>, and <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00147">mwi_mailbox_get()</a>.</p>
<div class="fragment"><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;{</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga58c3e3da5d31739cafaee1df6ddf9342"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58c3e3da5d31739cafaee1df6ddf9342">&#9670;&nbsp;</a></span>astman_send_list_complete_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void astman_send_list_complete_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>event_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the list complete event. </p>
<dl class="section since"><dt>Since</dt><dd>13.2.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>- AMI session control struct. </td></tr>
    <tr><td class="paramname">m</td><td>- AMI action request that started the list. </td></tr>
    <tr><td class="paramname">event_name</td><td>- AMI list complete event name. </td></tr>
    <tr><td class="paramname">count</td><td>- Number of items in the list.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>You need to call <a class="el" href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69" title="End the list complete event. ">astman_send_list_complete_end()</a> to end the AMI list completion event.</dd>
<dd>
Between calling <a class="el" href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342" title="Start the list complete event. ">astman_send_list_complete_start()</a> and <a class="el" href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69" title="End the list complete event. ">astman_send_list_complete_end()</a> you can add additonal headers using <a class="el" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append()</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03237">3237</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l03068">astman_flush()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03206">astman_send_list_complete_start_common()</a>, and <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02527">action_agents()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03869">action_confbridgelist()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03914">action_confbridgelistrooms()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16404">action_dahdishowchannels()</a>, <a class="el" href="../../df/d1d/res__manager__devicestate_8c_source.html#l00073">action_devicestatelist()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08383">action_extensionstatelist()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05521">action_meetmelist()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05593">action_meetmelistrooms()</a>, <a class="el" href="../../d3/d2d/res__manager__presencestate_8c_source.html#l00073">action_presencestatelist()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04777">action_status()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l01260">ami_show_aors()</a>, <a class="el" href="../../d5/dcb/config__auth_8c_source.html#l00247">ami_show_auths()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02453">ami_show_contacts()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01676">ami_show_endpoint()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01769">ami_show_endpoints()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02179">ami_show_outbound_registrations()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l01190">ami_show_registration_contact_statuses()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l01175">ami_show_registrations()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04112">ami_show_resource_lists()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04062">ami_show_subscriptions_inbound()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04076">ami_show_subscriptions_outbound()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00555">manager_bridge_info()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05518">manager_bridge_tech_list()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00484">manager_bridges_list()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00908">manager_dbget()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04349">manager_fax_sessions()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07267">manager_iax2_show_peer_list()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07245">manager_iax2_show_peers()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07369">manager_iax2_show_registry()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13428">manager_list_voicemail_users()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00420">manager_parking_lot_list()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00309">manager_parking_status_all_lots()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00259">manager_parking_status_single_lot()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10104">manager_queues_status()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10026">manager_queues_summary()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l06019">manager_show_dialplan()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20178">manager_show_registry()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21014">manager_sip_peer_status()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20231">manager_sip_show_peers()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04159">manager_skinny_show_devices()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04401">manager_skinny_show_lines()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13382">manager_status_voicemail_user()</a>, and <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00147">mwi_mailbox_get()</a>.</p>
<div class="fragment"><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;{</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#ga63df9fe1c4852999ab438347124a34b8">astman_send_list_complete_start_common</a>(s, m, event_name, count);</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;   <span class="keywordflow">if</span> (buf) {</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga960097199ef3da5b50b2b041eae8495d">astman_flush</a>(s, buf);</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;   }</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga63df9fe1c4852999ab438347124a34b8"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga63df9fe1c4852999ab438347124a34b8">astman_send_list_complete_start_common</a></div><div class="ttdeci">static struct ast_str * astman_send_list_complete_start_common(struct mansession *s, const struct message *m, const char *event_name, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03206">manager.c:3206</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga960097199ef3da5b50b2b041eae8495d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga960097199ef3da5b50b2b041eae8495d">astman_flush</a></div><div class="ttdeci">static void astman_flush(struct mansession *s, struct ast_str *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03068">manager.c:3068</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga63df9fe1c4852999ab438347124a34b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga63df9fe1c4852999ab438347124a34b8">&#9670;&nbsp;</a></span>astman_send_list_complete_start_common()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a>* astman_send_list_complete_start_common </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>event_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03206">3206</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03061">astman_append_buf</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03066">ASTMAN_APPEND_BUF_INITSIZE</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03228">astman_send_list_complete()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03237">astman_send_list_complete_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;{</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;   buf = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../df/d72/group__Group__AMI.html#ga66c34a7f788ab4d323b1bee27256906d">astman_append_buf</a>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga53925ec1ccff9474e934c4182ec833ef">ASTMAN_APPEND_BUF_INITSIZE</a>);</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;   <span class="keywordflow">if</span> (!buf) {</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;   }</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;buf, 0, <span class="stringliteral">&quot;Event: %s\r\n&quot;</span>, event_name);</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;   }</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0,</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;      <span class="stringliteral">&quot;EventList: Complete\r\n&quot;</span></div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;      <span class="stringliteral">&quot;ListItems: %d\r\n&quot;</span>,</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;      count);</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga53925ec1ccff9474e934c4182ec833ef"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga53925ec1ccff9474e934c4182ec833ef">ASTMAN_APPEND_BUF_INITSIZE</a></div><div class="ttdeci">#define ASTMAN_APPEND_BUF_INITSIZE</div><div class="ttdoc">initial allocated size for the astman_append_buf and astman_send_*_va </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03066">manager.c:3066</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga66c34a7f788ab4d323b1bee27256906d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga66c34a7f788ab4d323b1bee27256906d">astman_append_buf</a></div><div class="ttdeci">static struct ast_threadstorage astman_append_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03061">manager.c:3061</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga0ee6ee1f4d200f711e2983bffe770a72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0ee6ee1f4d200f711e2983bffe770a72">&#9670;&nbsp;</a></span>astman_send_listack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void astman_send_listack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>listflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send ack in manager transaction to begin a list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>- AMI session control struct. </td></tr>
    <tr><td class="paramname">m</td><td>- AMI action request that started the list. </td></tr>
    <tr><td class="paramname">msg</td><td>- Message contents describing the list to follow. </td></tr>
    <tr><td class="paramname">listflag</td><td>- Should always be set to "start".</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>You need to call <a class="el" href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342" title="Start the list complete event. ">astman_send_list_complete_start()</a> and <a class="el" href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69" title="End the list complete event. ">astman_send_list_complete_end()</a> to send the AMI list completion event.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03201">3201</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l03123">astman_send_response_full()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02527">action_agents()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03869">action_confbridgelist()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03914">action_confbridgelistrooms()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06390">action_coreshowchannels()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16404">action_dahdishowchannels()</a>, <a class="el" href="../../df/d1d/res__manager__devicestate_8c_source.html#l00073">action_devicestatelist()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08383">action_extensionstatelist()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04460">action_hangup()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05521">action_meetmelist()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05593">action_meetmelistrooms()</a>, <a class="el" href="../../d3/d2d/res__manager__presencestate_8c_source.html#l00073">action_presencestatelist()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04777">action_status()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l01260">ami_show_aors()</a>, <a class="el" href="../../d5/dcb/config__auth_8c_source.html#l00247">ami_show_auths()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02453">ami_show_contacts()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01676">ami_show_endpoint()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01769">ami_show_endpoints()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02179">ami_show_outbound_registrations()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l01190">ami_show_registration_contact_statuses()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l01175">ami_show_registrations()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04112">ami_show_resource_lists()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04062">ami_show_subscriptions_inbound()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04076">ami_show_subscriptions_outbound()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00555">manager_bridge_info()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05518">manager_bridge_tech_list()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00484">manager_bridges_list()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00908">manager_dbget()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l05855">manager_dpsendack()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04349">manager_fax_sessions()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07267">manager_iax2_show_peer_list()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07245">manager_iax2_show_peers()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07369">manager_iax2_show_registry()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13428">manager_list_voicemail_users()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00420">manager_parking_lot_list()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00309">manager_parking_status_all_lots()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00259">manager_parking_status_single_lot()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10104">manager_queues_status()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10026">manager_queues_summary()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20178">manager_show_registry()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21014">manager_sip_peer_status()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20231">manager_sip_show_peers()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04159">manager_skinny_show_devices()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04401">manager_skinny_show_lines()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13382">manager_status_voicemail_user()</a>, and <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00147">mwi_mailbox_get()</a>.</p>
<div class="fragment"><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;{</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a>(s, m, <span class="stringliteral">&quot;Success&quot;</span>, msg, listflag);</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga5ceffcba60b4100c02c4700be76161e4"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a></div><div class="ttdeci">static void astman_send_response_full(struct mansession *s, const struct message *m, char *resp, char *msg, char *listflag)</div><div class="ttdoc">send a response with an optional message, and terminate it with an empty line. m is used only to grab...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03123">manager.c:3123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga26805df02a1c92688ae132f29ac4478a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga26805df02a1c92688ae132f29ac4478a">&#9670;&nbsp;</a></span>astman_send_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void astman_send_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send response in manager transaction. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03154">3154</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l03123">astman_send_response_full()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04387">action_logoff()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l04206">action_waitevent()</a>.</p>
<div class="fragment"><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;{</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a>(s, m, resp, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga5ceffcba60b4100c02c4700be76161e4"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a></div><div class="ttdeci">static void astman_send_response_full(struct mansession *s, const struct message *m, char *resp, char *msg, char *listflag)</div><div class="ttdoc">send a response with an optional message, and terminate it with an empty line. m is used only to grab...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03123">manager.c:3123</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga5ceffcba60b4100c02c4700be76161e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5ceffcba60b4100c02c4700be76161e4">&#9670;&nbsp;</a></span>astman_send_response_full()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void astman_send_response_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>listflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>send a response with an optional message, and terminate it with an empty line. m is used only to grab the 'ActionID' field. </p>
<p>Use the explicit constant MSG_MOREDATA to remove the empty line. XXX MSG_MOREDATA should go to a header file. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03123">3123</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03061">astman_append_buf</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03066">ASTMAN_APPEND_BUF_INITSIZE</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03068">astman_flush()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03114">MSG_MOREDATA</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l05295">action_command()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03164">astman_send_error_va()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03201">astman_send_listack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03154">astman_send_response()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03196">astman_start_ack()</a>.</p>
<div class="fragment"><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;{</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;   buf = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../df/d72/group__Group__AMI.html#ga66c34a7f788ab4d323b1bee27256906d">astman_append_buf</a>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga53925ec1ccff9474e934c4182ec833ef">ASTMAN_APPEND_BUF_INITSIZE</a>);</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;   <span class="keywordflow">if</span> (!buf) {</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;   }</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;buf, 0, <span class="stringliteral">&quot;Response: %s\r\n&quot;</span>, resp);</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;   }</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;   <span class="keywordflow">if</span> (listflag) {</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;      <span class="comment">/* Start, complete, cancelled */</span></div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;EventList: %s\r\n&quot;</span>, listflag);</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;   }</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;   <span class="keywordflow">if</span> (msg != <a class="code" href="../../df/d72/group__Group__AMI.html#ga97955111f384b58ee815bb59f0afa0c5">MSG_MOREDATA</a>) {</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;      <span class="keywordflow">if</span> (msg) {</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;Message: %s\r\n&quot;</span>, msg);</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;      }</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;   }</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga960097199ef3da5b50b2b041eae8495d">astman_flush</a>(s, buf);</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga53925ec1ccff9474e934c4182ec833ef"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga53925ec1ccff9474e934c4182ec833ef">ASTMAN_APPEND_BUF_INITSIZE</a></div><div class="ttdeci">#define ASTMAN_APPEND_BUF_INITSIZE</div><div class="ttdoc">initial allocated size for the astman_append_buf and astman_send_*_va </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03066">manager.c:3066</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga97955111f384b58ee815bb59f0afa0c5"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga97955111f384b58ee815bb59f0afa0c5">MSG_MOREDATA</a></div><div class="ttdeci">#define MSG_MOREDATA</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03114">manager.c:3114</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga66c34a7f788ab4d323b1bee27256906d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga66c34a7f788ab4d323b1bee27256906d">astman_append_buf</a></div><div class="ttdeci">static struct ast_threadstorage astman_append_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03061">manager.c:3061</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga960097199ef3da5b50b2b041eae8495d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga960097199ef3da5b50b2b041eae8495d">astman_flush</a></div><div class="ttdeci">static void astman_flush(struct mansession *s, struct ast_str *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03068">manager.c:3068</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga740af4550410dae06b748c23ebd0ae24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga740af4550410dae06b748c23ebd0ae24">&#9670;&nbsp;</a></span>astman_start_ack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void astman_start_ack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03196">3196</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l03123">astman_send_response_full()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03114">MSG_MOREDATA</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04442">action_challenge()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05974">action_extensionstate()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03620">action_getconfig()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03750">action_getconfigjson()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04610">action_getvar()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03682">action_listcategories()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04324">action_listcommands()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05953">action_mailboxcount()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05936">action_mailboxstatus()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06004">action_presencestate()</a>.</p>
<div class="fragment"><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;{</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a>(s, m, <span class="stringliteral">&quot;Success&quot;</span>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga97955111f384b58ee815bb59f0afa0c5">MSG_MOREDATA</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga5ceffcba60b4100c02c4700be76161e4"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5ceffcba60b4100c02c4700be76161e4">astman_send_response_full</a></div><div class="ttdeci">static void astman_send_response_full(struct mansession *s, const struct message *m, char *resp, char *msg, char *listflag)</div><div class="ttdoc">send a response with an optional message, and terminate it with an empty line. m is used only to grab...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03123">manager.c:3123</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga97955111f384b58ee815bb59f0afa0c5"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga97955111f384b58ee815bb59f0afa0c5">MSG_MOREDATA</a></div><div class="ttdeci">#define MSG_MOREDATA</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03114">manager.c:3114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gac0f21735eb8551ed24735a71ea26e13c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac0f21735eb8551ed24735a71ea26e13c">&#9670;&nbsp;</a></span>authenticate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int authenticate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03505">3505</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01655">ast_manager_user::acl</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01547">ao2_t_link</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00800">ast_apply_acl()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d5/d59/acl_8h_source.html#l00037">AST_SENSE_DENY</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00290">ast_sockaddr_stringify_addr()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l00545">ast_variables_dup()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01600">mansession_session::blackfilters</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01654">ast_manager_user::blackfilters</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01593">mansession_session::challenge</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01601">mansession_session::chanvars</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01657">ast_manager_user::chanvars</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02305">get_manager_by_name_locked()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d7/d6c/md5_8c_source.html#l00120">MD5Final()</a>, <a class="el" href="../../d7/d6c/md5_8c_source.html#l00057">MD5Init()</a>, <a class="el" href="../../d7/d6c/md5_8c_source.html#l00072">MD5Update()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00077">password</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01595">mansession_session::readperm</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01647">ast_manager_user::readperm</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03360">report_auth_success()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03310">report_failed_acl()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03443">report_failed_challenge_response()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03335">report_inval_password()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03285">report_invalid_user()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01646">ast_manager_user::secret</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01589">mansession_session::sessionstart</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01590">mansession_session::sessionstart_tv</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03266">set_eventmask()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01592">mansession_session::username</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01599">mansession_session::whitefilters</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01653">ast_manager_user::whitefilters</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01596">mansession_session::writeperm</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01648">ast_manager_user::writeperm</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01604">mansession_session::writetimeout</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01649">ast_manager_user::writetimeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04393">action_login()</a>.</p>
<div class="fragment"><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;{</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *username = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Username&quot;</span>);</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Secret&quot;</span>);</div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a> = -1;</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d8a/structast__manager__user.html">ast_manager_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;   regex_t *regex_filter;</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> filter_iter;</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(username)) { <span class="comment">/* missing username */</span></div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;   }</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;   <span class="comment">/* locate user in locked state */</span></div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;   <span class="keywordflow">if</span> (!(user = <a class="code" href="../../df/d72/group__Group__AMI.html#ga14bd65f2096d29973dfd999d71e88eee">get_manager_by_name_locked</a>(username))) {</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga16a1493b33939fc5e485953855078109">report_invalid_user</a>(s, username);</div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;%s tried to authenticate with nonexistent user &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>), username);</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#ac53d23749250e5f0d95992b5d9ebc60c">acl</a> &amp;&amp; (<a class="code" href="../../d5/d59/acl_8h.html#a3f0c6ca57c26cab3141b15c4b231188b">ast_apply_acl</a>(user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#ac53d23749250e5f0d95992b5d9ebc60c">acl</a>, &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>, <span class="stringliteral">&quot;Manager User ACL: &quot;</span>) == <a class="code" href="../../d5/d59/acl_8h.html#a764d04fe9485be95771e652dc2c87445abb486b5b819cf3b3951ce0a2e584f065">AST_SENSE_DENY</a>)) {</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga270644a6d4f3d622e763df47b0cbfce8">report_failed_acl</a>(s, username);</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;%s failed to pass IP ACL as &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>), username);</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;AuthType&quot;</span>), <span class="stringliteral">&quot;MD5&quot;</span>)) {</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *key = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Key&quot;</span>);</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(key) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a26209ae0bf3ca1689131b748bc838a51">challenge</a>) &amp;&amp; user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#acf3e6b25218c40455fd7dbce5fd3ee82">secret</a>) {</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;         <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;         <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = 0;</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;         <span class="keywordtype">char</span> md5key[256] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d1/d32/structMD5Context.html">MD5Context</a> <a class="code" href="../../de/d91/func__md5_8c.html#a058fc1589da2b9b0d8e404ba0482c3af">md5</a>;</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> digest[16];</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;         <a class="code" href="../../da/db0/md5_8h.html#a6bdca55813077d1c652a1f63608dac30">MD5Init</a>(&amp;<a class="code" href="../../de/d91/func__md5_8c.html#a058fc1589da2b9b0d8e404ba0482c3af">md5</a>);</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;         <a class="code" href="../../da/db0/md5_8h.html#a2a146d25ee54b589dd79d776522ef742">MD5Update</a>(&amp;<a class="code" href="../../de/d91/func__md5_8c.html#a058fc1589da2b9b0d8e404ba0482c3af">md5</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a26209ae0bf3ca1689131b748bc838a51">challenge</a>, strlen(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a26209ae0bf3ca1689131b748bc838a51">challenge</a>));</div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;         <a class="code" href="../../da/db0/md5_8h.html#a2a146d25ee54b589dd79d776522ef742">MD5Update</a>(&amp;<a class="code" href="../../de/d91/func__md5_8c.html#a058fc1589da2b9b0d8e404ba0482c3af">md5</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#acf3e6b25218c40455fd7dbce5fd3ee82">secret</a>, strlen(user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#acf3e6b25218c40455fd7dbce5fd3ee82">secret</a>));</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;         <a class="code" href="../../da/db0/md5_8h.html#a7132b90c03637ae151c1a8befd7989f2">MD5Final</a>(digest, &amp;<a class="code" href="../../de/d91/func__md5_8c.html#a058fc1589da2b9b0d8e404ba0482c3af">md5</a>);</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;         <span class="keywordflow">for</span> (x = 0; x &lt; 16; x++)</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;            len += sprintf(md5key + len, <span class="stringliteral">&quot;%02hhx&quot;</span>, digest[x]);</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;         <span class="keywordflow">if</span> (!strcmp(md5key, key)) {</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;            error = 0;</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga83162fffa402098460159beae8406122">report_failed_challenge_response</a>(s, key, md5key);</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;         }</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;MD5 authentication is not possible.  challenge: &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a26209ae0bf3ca1689131b748bc838a51">challenge</a>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;      }</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#acf3e6b25218c40455fd7dbce5fd3ee82">secret</a>) {</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;      <span class="keywordflow">if</span> (!strcmp(password, user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#acf3e6b25218c40455fd7dbce5fd3ee82">secret</a>)) {</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;         error = 0;</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gaa992b47cf04699542d45129cb603c11f">report_inval_password</a>(s, username);</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;      }</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;   }</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;   <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;%s failed to authenticate as &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>), username);</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;   }</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;   <span class="comment">/* auth complete */</span></div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;   <span class="comment">/* All of the user parameters are copied to the session so that in the event</span></div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;<span class="comment">   * of a reload and a configuration change, the session parameters are not</span></div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;<span class="comment">   * changed. */</span></div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>, username, <span class="keyword">sizeof</span>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>));</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;   s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#afaabb85e65efc5fed1a5f4d08bf272a4">readperm</a> = user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#afaabb85e65efc5fed1a5f4d08bf272a4">readperm</a>;</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;   s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">writeperm</a> = user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a006a09ed1c51271c4b6f582a2a42ba5f">writeperm</a>;</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;   s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a67c9d5e7f3b13cfc7fe3b4e395c81443">writetimeout</a> = user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a67c9d5e7f3b13cfc7fe3b4e395c81443">writetimeout</a>;</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;   <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a>) {</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;      s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a> = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a5cb297844656a440d8ba8553f81e6d4b">ast_variables_dup</a>(user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a>);</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;   }</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;</div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;   filter_iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a646b71d97b81fea37dbbc9fd33dc5f4a">whitefilters</a>, 0);</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;   <span class="keywordflow">while</span> ((regex_filter = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;filter_iter))) {</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6db9934459f5cdc95cb3af77d55d426e">ao2_t_link</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">whitefilters</a>, regex_filter, <span class="stringliteral">&quot;add white user filter to session&quot;</span>);</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(regex_filter, -1, <span class="stringliteral">&quot;remove iterator ref&quot;</span>);</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;   }</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;filter_iter);</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;</div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;   filter_iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#ab5e2ca60735be55e922d5b24f3f83133">blackfilters</a>, 0);</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;   <span class="keywordflow">while</span> ((regex_filter = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;filter_iter))) {</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6db9934459f5cdc95cb3af77d55d426e">ao2_t_link</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">blackfilters</a>, regex_filter, <span class="stringliteral">&quot;add black user filter to session&quot;</span>);</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(regex_filter, -1, <span class="stringliteral">&quot;remove iterator ref&quot;</span>);</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;   }</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;filter_iter);</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;   s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a6886313a6b114cbcf7cb60676533c405">sessionstart</a> = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;   s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">sessionstart_tv</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gab7a51272a96fcd2792382b4d0bf254f6">set_eventmask</a>(s, <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Events&quot;</span>));</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gaf35097a12cdbc0424817d9ab324d1a0a">report_auth_success</a>(s);</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_a6bf0e68e74c0a9ca9d25251b22e4d64a"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_addr(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00290">netsock2.h:290</a></div></div>
<div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="structast__manager__user_html_ab5e2ca60735be55e922d5b24f3f83133"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#ab5e2ca60735be55e922d5b24f3f83133">ast_manager_user::blackfilters</a></div><div class="ttdeci">struct ao2_container * blackfilters</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01654">manager.c:1654</a></div></div>
<div class="ttc" id="structast__manager__user_html_a646b71d97b81fea37dbbc9fd33dc5f4a"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a646b71d97b81fea37dbbc9fd33dc5f4a">ast_manager_user::whitefilters</a></div><div class="ttdeci">struct ao2_container * whitefilters</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01653">manager.c:1653</a></div></div>
<div class="ttc" id="structmansession__session_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">mansession_session::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01592">manager.c:1592</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga16a1493b33939fc5e485953855078109"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga16a1493b33939fc5e485953855078109">report_invalid_user</a></div><div class="ttdeci">static void report_invalid_user(const struct mansession *s, const char *username)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03285">manager.c:3285</a></div></div>
<div class="ttc" id="structast__manager__user_html_a006a09ed1c51271c4b6f582a2a42ba5f"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a006a09ed1c51271c4b6f582a2a42ba5f">ast_manager_user::writeperm</a></div><div class="ttdeci">int writeperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01648">manager.c:1648</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga14bd65f2096d29973dfd999d71e88eee"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga14bd65f2096d29973dfd999d71e88eee">get_manager_by_name_locked</a></div><div class="ttdeci">static struct ast_manager_user * get_manager_by_name_locked(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02305">manager.c:2305</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="md5_8h_html_a7132b90c03637ae151c1a8befd7989f2"><div class="ttname"><a href="../../da/db0/md5_8h.html#a7132b90c03637ae151c1a8befd7989f2">MD5Final</a></div><div class="ttdeci">void MD5Final(unsigned char digest[16], struct MD5Context *context)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6c/md5_8c_source.html#l00120">md5.c:120</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6db9934459f5cdc95cb3af77d55d426e"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6db9934459f5cdc95cb3af77d55d426e">ao2_t_link</a></div><div class="ttdeci">#define ao2_t_link(container, obj, tag)</div><div class="ttdoc">Add an object to a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01547">astobj2.h:1547</a></div></div>
<div class="ttc" id="structmansession__session_html_a006a09ed1c51271c4b6f582a2a42ba5f"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">mansession_session::writeperm</a></div><div class="ttdeci">int writeperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01596">manager.c:1596</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga83162fffa402098460159beae8406122"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga83162fffa402098460159beae8406122">report_failed_challenge_response</a></div><div class="ttdeci">static void report_failed_challenge_response(const struct mansession *s, const char *response, const char *expected_response)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03443">manager.c:3443</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__manager__user_html"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html">ast_manager_user</a></div><div class="ttdoc">user descriptor, as read from the config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01644">manager.c:1644</a></div></div>
<div class="ttc" id="structmansession__session_html_ab5e2ca60735be55e922d5b24f3f83133"><div class="ttname"><a href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">mansession_session::blackfilters</a></div><div class="ttdeci">struct ao2_container * blackfilters</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01600">manager.c:1600</a></div></div>
<div class="ttc" id="structusers_html"><div class="ttname"><a href="../../d8/d63/structusers.html">users</a></div><div class="ttdoc">list of users found in the config file </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00915">app_voicemail.c:915</a></div></div>
<div class="ttc" id="structmansession__session_html_afaabb85e65efc5fed1a5f4d08bf272a4"><div class="ttname"><a href="../../df/d05/structmansession__session.html#afaabb85e65efc5fed1a5f4d08bf272a4">mansession_session::readperm</a></div><div class="ttdeci">int readperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01595">manager.c:1595</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ab4fdb206838f2974bd15fc2ca1e9d366"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a></div><div class="ttdeci">static struct ast_str * password</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00077">cdr_mysql.c:77</a></div></div>
<div class="ttc" id="md5_8h_html_a6bdca55813077d1c652a1f63608dac30"><div class="ttname"><a href="../../da/db0/md5_8h.html#a6bdca55813077d1c652a1f63608dac30">MD5Init</a></div><div class="ttdeci">void MD5Init(struct MD5Context *context)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6c/md5_8c_source.html#l00057">md5.c:57</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structmansession__session_html_a06c0918fa1a1aac3d386fca59b12327c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a06c0918fa1a1aac3d386fca59b12327c">mansession_session::chanvars</a></div><div class="ttdeci">struct ast_variable * chanvars</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01601">manager.c:1601</a></div></div>
<div class="ttc" id="structmansession__session_html_a67c9d5e7f3b13cfc7fe3b4e395c81443"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a67c9d5e7f3b13cfc7fe3b4e395c81443">mansession_session::writetimeout</a></div><div class="ttdeci">int writetimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01604">manager.c:1604</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmansession__session_html_a646b71d97b81fea37dbbc9fd33dc5f4a"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">mansession_session::whitefilters</a></div><div class="ttdeci">struct ao2_container * whitefilters</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01599">manager.c:1599</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa992b47cf04699542d45129cb603c11f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa992b47cf04699542d45129cb603c11f">report_inval_password</a></div><div class="ttdeci">static void report_inval_password(const struct mansession *s, const char *username)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03335">manager.c:3335</a></div></div>
<div class="ttc" id="structast__manager__user_html_a06c0918fa1a1aac3d386fca59b12327c"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a06c0918fa1a1aac3d386fca59b12327c">ast_manager_user::chanvars</a></div><div class="ttdeci">struct ast_variable * chanvars</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01657">manager.c:1657</a></div></div>
<div class="ttc" id="structmansession__session_html_a54d7a5d4a31deafdc03b710cf95de534"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">mansession_session::sessionstart_tv</a></div><div class="ttdeci">struct timeval sessionstart_tv</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01590">manager.c:1590</a></div></div>
<div class="ttc" id="acl_8h_html_a3f0c6ca57c26cab3141b15c4b231188b"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a3f0c6ca57c26cab3141b15c4b231188b">ast_apply_acl</a></div><div class="ttdeci">enum ast_acl_sense ast_apply_acl(struct ast_acl_list *acl_list, const struct ast_sockaddr *addr, const char *purpose)</div><div class="ttdoc">Apply a set of rules to a given IP address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00800">acl.c:800</a></div></div>
<div class="ttc" id="structast__manager__user_html_ac53d23749250e5f0d95992b5d9ebc60c"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#ac53d23749250e5f0d95992b5d9ebc60c">ast_manager_user::acl</a></div><div class="ttdeci">struct ast_acl_list * acl</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01655">manager.c:1655</a></div></div>
<div class="ttc" id="md5_8h_html_a2a146d25ee54b589dd79d776522ef742"><div class="ttname"><a href="../../da/db0/md5_8h.html#a2a146d25ee54b589dd79d776522ef742">MD5Update</a></div><div class="ttdeci">void MD5Update(struct MD5Context *context, unsigned char const *buf, unsigned len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6c/md5_8c_source.html#l00072">md5.c:72</a></div></div>
<div class="ttc" id="func__md5_8c_html_a058fc1589da2b9b0d8e404ba0482c3af"><div class="ttname"><a href="../../de/d91/func__md5_8c.html#a058fc1589da2b9b0d8e404ba0482c3af">md5</a></div><div class="ttdeci">static int md5(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d91/func__md5_8c_source.html#l00052">func_md5.c:52</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gab7a51272a96fcd2792382b4d0bf254f6"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gab7a51272a96fcd2792382b4d0bf254f6">set_eventmask</a></div><div class="ttdeci">static int set_eventmask(struct mansession *s, const char *eventmask)</div><div class="ttdoc">Rather than braindead on,off this now can also accept a specific int mask value or a &amp;#39;...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03266">manager.c:3266</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga270644a6d4f3d622e763df47b0cbfce8"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga270644a6d4f3d622e763df47b0cbfce8">report_failed_acl</a></div><div class="ttdeci">static void report_failed_acl(const struct mansession *s, const char *username)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03310">manager.c:3310</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structast__manager__user_html_a67c9d5e7f3b13cfc7fe3b4e395c81443"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a67c9d5e7f3b13cfc7fe3b4e395c81443">ast_manager_user::writetimeout</a></div><div class="ttdeci">int writetimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01649">manager.c:1649</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaf35097a12cdbc0424817d9ab324d1a0a"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaf35097a12cdbc0424817d9ab324d1a0a">report_auth_success</a></div><div class="ttdeci">static void report_auth_success(const struct mansession *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03360">manager.c:3360</a></div></div>
<div class="ttc" id="structast__manager__user_html_afaabb85e65efc5fed1a5f4d08bf272a4"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#afaabb85e65efc5fed1a5f4d08bf272a4">ast_manager_user::readperm</a></div><div class="ttdeci">int readperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01647">manager.c:1647</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structMD5Context_html"><div class="ttname"><a href="../../d1/d32/structMD5Context.html">MD5Context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/db0/md5_8h_source.html#l00026">md5.h:26</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__manager__user_html_acf3e6b25218c40455fd7dbce5fd3ee82"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#acf3e6b25218c40455fd7dbce5fd3ee82">ast_manager_user::secret</a></div><div class="ttdeci">char * secret</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01646">manager.c:1646</a></div></div>
<div class="ttc" id="structmansession__session_html_a26209ae0bf3ca1689131b748bc838a51"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a26209ae0bf3ca1689131b748bc838a51">mansession_session::challenge</a></div><div class="ttdeci">char challenge[10]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01593">manager.c:1593</a></div></div>
<div class="ttc" id="acl_8h_html_a764d04fe9485be95771e652dc2c87445abb486b5b819cf3b3951ce0a2e584f065"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a764d04fe9485be95771e652dc2c87445abb486b5b819cf3b3951ce0a2e584f065">AST_SENSE_DENY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d59/acl_8h_source.html#l00037">acl.h:37</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="structmansession__session_html_a6886313a6b114cbcf7cb60676533c405"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a6886313a6b114cbcf7cb60676533c405">mansession_session::sessionstart</a></div><div class="ttdeci">time_t sessionstart</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01589">manager.c:1589</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a5cb297844656a440d8ba8553f81e6d4b"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a5cb297844656a440d8ba8553f81e6d4b">ast_variables_dup</a></div><div class="ttdeci">struct ast_variable * ast_variables_dup(struct ast_variable *var)</div><div class="ttdoc">Duplicate variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00545">main/config.c:545</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga57cc8b67a0e4797ab1a608872d51d397"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga57cc8b67a0e4797ab1a608872d51d397">&#9670;&nbsp;</a></span>authority_to_str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* authority_to_str </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>authority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert authority code to a list of options. Note that the EVENT_FLAG_ALL authority will always be returned. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02084">2084</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00653">ast_str_reset()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00688">ast_str_strlen()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01511">EVENT_FLAG_SHUTDOWN</a>, and <a class="el" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">__manager_event_sessions_va()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04324">action_listcommands()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04393">action_login()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02340">handle_showmancmd()</a>.</p>
<div class="fragment"><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;{</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;   <span class="keywordtype">char</span> *sep = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(*res);</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;   <span class="keywordflow">if</span> (authority != <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a246405a298682d5f34f8856b68461">EVENT_FLAG_SHUTDOWN</a>) {</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>) - 1; i++) {</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;         <span class="keywordflow">if</span> (authority &amp; <a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>[i].num) {</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(res, 0, <span class="stringliteral">&quot;%s%s&quot;</span>, sep, <a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>[i].label);</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;            sep = <span class="stringliteral">&quot;,&quot;</span>;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;         }</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      }</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;   }</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(*res) == 0) {</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <span class="comment">/* replace empty string with something sensible */</span></div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(res, 0, <span class="stringliteral">&quot;&lt;none&gt;&quot;</span>);</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;   }</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(*res);</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga844c8a72ece748571e61afa468edabb0"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a></div><div class="ttdeci">static const struct permalias perms[]</div></div>
<div class="ttc" id="strings_8h_html_a8239b9ad10367bfc936e9b60ff7706a8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a></div><div class="ttdeci">void ast_str_reset(struct ast_str *buf)</div><div class="ttdoc">Reset the content of a dynamic string. Useful before a series of ast_str_append. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00653">strings.h:653</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a246405a298682d5f34f8856b68461"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a246405a298682d5f34f8856b68461">EVENT_FLAG_SHUTDOWN</a></div><div class="ttdeci">#define EVENT_FLAG_SHUTDOWN</div><div class="ttdoc">Fake event class used to end sessions at shutdown. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01511">manager.c:1511</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga033f5d6043ef1b5fcb6da1aa6a70f53d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga033f5d6043ef1b5fcb6da1aa6a70f53d">&#9670;&nbsp;</a></span>blackfilter_cmp_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int blackfilter_cmp_fn </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06092">6092</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01032">CMP_STOP</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06193">match_filter()</a>.</p>
<div class="fragment"><div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;{</div><div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;   regex_t *regex_filter = obj;</div><div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *eventdata = arg;</div><div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;   <span class="keywordtype">int</span> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = data;</div><div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;</div><div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;   <span class="keywordflow">if</span> (!regexec(regex_filter, eventdata, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0)) {</div><div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;      *result = 0;</div><div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>);</div><div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;   }</div><div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;</div><div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;   *result = 1;</div><div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01032">astobj2.h:1032</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8547b9864f771b59843128a2054d7c47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8547b9864f771b59843128a2054d7c47">&#9670;&nbsp;</a></span>build_mansession()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d05/structmansession__session.html">mansession_session</a>* build_mansession </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate manager session structure and add it to the list of sessions. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02229">2229</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01335">ao2_container_alloc_list</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01549">ao2_link</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01600">mansession_session::blackfilters</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01610">mansession_session::notify_lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01602">mansession_session::send_events</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02198">session_destructor()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01587">mansession_session::waiting_thread</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01599">mansession_session::whitefilters</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01604">mansession_session::writetimeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06937">session_do()</a>.</p>
<div class="fragment"><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;{</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d05/structmansession__session.html">mansession_session</a> *newsession;</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;   newsession = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*newsession), <a class="code" href="../../df/d72/group__Group__AMI.html#ga6d2190ae1fcb37e66c2a445f2fe59ec3">session_destructor</a>);</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;   <span class="keywordflow">if</span> (!newsession) {</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;   }</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;   newsession-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">whitefilters</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;   newsession-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">blackfilters</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;   <span class="keywordflow">if</span> (!newsession-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">whitefilters</a> || !newsession-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">blackfilters</a>) {</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(newsession, -1);</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;   }</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;   newsession-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">waiting_thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;   newsession-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a67c9d5e7f3b13cfc7fe3b4e395c81443">writetimeout</a> = 100;</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;   newsession-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a93274787fdb55a4b0cc204c9d47c2449">send_events</a> = -1;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;newsession-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>, addr);</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;newsession-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;   sessions = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(mgr_sessions);</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;   <span class="keywordflow">if</span> (sessions) {</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(sessions, newsession);</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sessions, -1);</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;   }</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;   <span class="keywordflow">return</span> newsession;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="chan__skinny_8c_html_a61aa7b9ad75e714f776c1f82bcc3359f"><div class="ttname"><a href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a></div><div class="ttdeci">static struct sessions sessions</div></div>
<div class="ttc" id="structmansession__session_html_a25ce442b0903796547e81a75339b8a1e"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">mansession_session::waiting_thread</a></div><div class="ttdeci">pthread_t waiting_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01587">manager.c:1587</a></div></div>
<div class="ttc" id="astobj2_8h_html_add41bd9979cb8642f81dd38aa2dfcd6d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a></div><div class="ttdeci">#define ao2_container_alloc_list(ao2_options, container_options, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01335">astobj2.h:1335</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga6d2190ae1fcb37e66c2a445f2fe59ec3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga6d2190ae1fcb37e66c2a445f2fe59ec3">session_destructor</a></div><div class="ttdeci">static void session_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02198">manager.c:2198</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmansession__session_html_ab5e2ca60735be55e922d5b24f3f83133"><div class="ttname"><a href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">mansession_session::blackfilters</a></div><div class="ttdeci">struct ao2_container * blackfilters</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01600">manager.c:1600</a></div></div>
<div class="ttc" id="structmansession__session_html_a67c9d5e7f3b13cfc7fe3b4e395c81443"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a67c9d5e7f3b13cfc7fe3b4e395c81443">mansession_session::writetimeout</a></div><div class="ttdeci">int writetimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01604">manager.c:1604</a></div></div>
<div class="ttc" id="structmansession__session_html_a24597b49933903efcf09c635513d8269"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">mansession_session::notify_lock</a></div><div class="ttdeci">ast_mutex_t notify_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01610">manager.c:1610</a></div></div>
<div class="ttc" id="structmansession__session_html_a646b71d97b81fea37dbbc9fd33dc5f4a"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">mansession_session::whitefilters</a></div><div class="ttdeci">struct ao2_container * whitefilters</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01599">manager.c:1599</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="structmansession__session_html_a93274787fdb55a4b0cc204c9d47c2449"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a93274787fdb55a4b0cc204c9d47c2449">mansession_session::send_events</a></div><div class="ttdeci">int send_events</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01602">manager.c:1602</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structmansession__session_html"><div class="ttname"><a href="../../df/d05/structmansession__session.html">mansession_session</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01581">manager.c:1581</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga9227e0d88226ca4021dadf7d03d63976"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9227e0d88226ca4021dadf7d03d63976">&#9670;&nbsp;</a></span>check_blacklist()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_blacklist </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l05259">5259</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00048">AST_MAX_CMD_LEN</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00219">ast_strip()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../df/d72/group__Group__AMI.html#gaae263799a76e54f46b173f039ee1053d">command_blacklist</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02315">match()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01523">MAX_BLACKLIST_CMD_LEN</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01525">words</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l05295">action_command()</a>.</p>
<div class="fragment"><div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;{</div><div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;   <span class="keywordtype">char</span> *cmd_copy, *cur_cmd;</div><div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;   <span class="keywordtype">char</span> *cmd_words[<a class="code" href="../../dc/db0/cli_8h.html#ae88634c402fdd8b46fd5d686dad8bfb9">AST_MAX_CMD_LEN</a>] = { <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, };</div><div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;</div><div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;   cmd_copy = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(cmd);</div><div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../df/d72/group__Group__AMI.html#gaacec20eeac5fcdb47de6e5f98bab33df">MAX_BLACKLIST_CMD_LEN</a> &amp;&amp; (cur_cmd = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;cmd_copy, <span class="stringliteral">&quot; &quot;</span>)); i++) {</div><div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;      cur_cmd = <a class="code" href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a>(cur_cmd);</div><div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cur_cmd)) {</div><div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;         i--;</div><div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;      }</div><div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;</div><div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;      cmd_words[i] = cur_cmd;</div><div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;   }</div><div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;</div><div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#gaae263799a76e54f46b173f039ee1053d">command_blacklist</a>); i++) {</div><div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;      <span class="keywordtype">int</span> j, <a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a> = 1;</div><div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;</div><div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;      <span class="keywordflow">for</span> (j = 0; <a class="code" href="../../df/d72/group__Group__AMI.html#gaae263799a76e54f46b173f039ee1053d">command_blacklist</a>[i].words[j]; j++) {</div><div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cmd_words[j]) || strcasecmp(cmd_words[j], <a class="code" href="../../df/d72/group__Group__AMI.html#gaae263799a76e54f46b173f039ee1053d">command_blacklist</a>[i].<a class="code" href="../../d4/d10/manager_8c.html#a2c50d07b002a16d9ddfa6eb70ac5f977">words</a>[j])) {</div><div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;            match = 0;</div><div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;         }</div><div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;      }</div><div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;</div><div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;      <span class="keywordflow">if</span> (match) {</div><div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;      }</div><div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;   }</div><div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;</div><div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaae263799a76e54f46b173f039ee1053d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaae263799a76e54f46b173f039ee1053d">command_blacklist</a></div><div class="ttdeci">static const struct @407 command_blacklist[]</div></div>
<div class="ttc" id="chan__iax2_8c_html_a7dd0190efe1c61151a9dbab078bdb263"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a></div><div class="ttdeci">static int match(struct ast_sockaddr *addr, unsigned short callno, unsigned short dcallno, const struct chan_iax2_pvt *cur, int check_dcallno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l02315">chan_iax2.c:2315</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaacec20eeac5fcdb47de6e5f98bab33df"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaacec20eeac5fcdb47de6e5f98bab33df">MAX_BLACKLIST_CMD_LEN</a></div><div class="ttdeci">#define MAX_BLACKLIST_CMD_LEN</div><div class="ttdoc">Descriptor for a manager session, either on the AMI socket or over HTTP. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01523">manager.c:1523</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_ac92713b8d07a45720b2664be70810e55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a></div><div class="ttdeci">char * ast_strip(char *s)</div><div class="ttdoc">Strip leading/trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00219">strings.h:219</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="manager_8c_html_a2c50d07b002a16d9ddfa6eb70ac5f977"><div class="ttname"><a href="../../d4/d10/manager_8c.html#a2c50d07b002a16d9ddfa6eb70ac5f977">words</a></div><div class="ttdeci">const char * words[AST_MAX_CMD_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01525">manager.c:1525</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="cli_8h_html_ae88634c402fdd8b46fd5d686dad8bfb9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae88634c402fdd8b46fd5d686dad8bfb9">AST_MAX_CMD_LEN</a></div><div class="ttdeci">#define AST_MAX_CMD_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00048">cli.h:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga91820dbca9ccfa57da1a8c3c183a56a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga91820dbca9ccfa57da1a8c3c183a56a4">&#9670;&nbsp;</a></span>check_manager_session_inuse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_manager_session_inuse </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02282">2282</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01585">mansession_session::inuse</a>, <a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, <a class="el" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02183">unref_mansession()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;{</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>;</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d05/structmansession__session.html">mansession_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d05/structmansession__session.html#a679cabe3b846f2e363f43d8e57433834">inuse</a> = 0;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;   sessions = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(mgr_sessions);</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;   <span class="keywordflow">if</span> (sessions) {</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      session = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(sessions, (<span class="keywordtype">char</span> *) <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, 0);</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sessions, -1);</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      <span class="keywordflow">if</span> (session) {</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga5e4938c2cafe6e01553cb952ca1f5e45">unref_mansession</a>(session);</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;         inuse = 1;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      }</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;   }</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d05/structmansession__session.html#a679cabe3b846f2e363f43d8e57433834">inuse</a>;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;}</div><div class="ttc" id="chan__skinny_8c_html_a61aa7b9ad75e714f776c1f82bcc3359f"><div class="ttname"><a href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a></div><div class="ttdeci">static struct sessions sessions</div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga5e4938c2cafe6e01553cb952ca1f5e45"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5e4938c2cafe6e01553cb952ca1f5e45">unref_mansession</a></div><div class="ttdeci">static struct mansession_session * unref_mansession(struct mansession_session *s)</div><div class="ttdoc">Unreference manager session object. If no more references, then go ahead and delete it...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02183">manager.c:2183</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structmansession__session_html"><div class="ttname"><a href="../../df/d05/structmansession__session.html">mansession_session</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01581">manager.c:1581</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="structmansession__session_html_a679cabe3b846f2e363f43d8e57433834"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a679cabe3b846f2e363f43d8e57433834">mansession_session::inuse</a></div><div class="ttdeci">int inuse</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01585">manager.c:1585</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2d7639d606b2516454d130399c840b35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d7639d606b2516454d130399c840b35">&#9670;&nbsp;</a></span>destroy_fast_originate_helper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_fast_originate_helper </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d3c/structfast__originate__helper.html">fast_originate_helper</a> *&#160;</td>
          <td class="paramname"><em>doomed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l05405">5405</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05377">fast_originate_helper::cap</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l05395">fast_originate_helper::vars</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l05723">action_originate()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l05413">fast_originate()</a>.</p>
<div class="fragment"><div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;{</div><div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(doomed-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>);</div><div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(doomed-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a134fe67053d035e763d6cf99916c1bf8">vars</a>);</div><div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(doomed);</div><div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(doomed);</div><div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;}</div><div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a970f3be80cbd08a1591eb8588f3cd54b">fast_originate_helper::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05377">manager.c:5377</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a134fe67053d035e763d6cf99916c1bf8"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a134fe67053d035e763d6cf99916c1bf8">fast_originate_helper::vars</a></div><div class="ttdeci">struct ast_variable * vars</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05395">manager.c:5395</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga32ac2419647ed028f30dc1de0f01056e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga32ac2419647ed028f30dc1de0f01056e">&#9670;&nbsp;</a></span>do_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int do_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06852">6852</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00290">ast_sockaddr_stringify_addr()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02844">astman_free_headers()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01594">mansession_session::authenticated</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01605">mansession_session::authstart</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01479">authtimeout</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01470">displayconnects</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06735">get_input()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06835">handle_parse_error()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00145">message::hdrcount</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00146">message::headers</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01597">mansession_session::inbuf</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03251">mansession_lock()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03257">mansession_unlock()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01617">MESSAGE_LINE_TOO_LONG</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01616">MESSAGE_OKAY</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01629">mansession::parsing</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06227">process_events()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06937">session_do()</a>.</p>
<div class="fragment"><div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;{</div><div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d9e/structmessage.html">message</a> m = { 0 };</div><div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;   <span class="keywordtype">char</span> header_buf[<span class="keyword">sizeof</span>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ac56f44f8863e74f246f657bdcf7bdcd1">inbuf</a>)] = { <span class="charliteral">&#39;\0&#39;</span> };</div><div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;   <span class="keywordtype">int</span> hdr_loss;</div><div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;   time_t now;</div><div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;</div><div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;   hdr_loss = 0;</div><div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;      <span class="comment">/* Check if any events are pending and do them if needed */</span></div><div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#gab2b9c596c9d6eb5dac8fe5f3d7588f50">process_events</a>(s)) {</div><div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;         res = -1;</div><div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;      }</div><div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;      res = <a class="code" href="../../df/d72/group__Group__AMI.html#ga460510e6866d4785ec6bd0181c443739">get_input</a>(s, header_buf);</div><div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;      <span class="keywordflow">if</span> (res == 0) {</div><div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;         <span class="comment">/* No input line received. */</span></div><div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;         <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a>) {</div><div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;            <span class="keywordflow">if</span> (time(&amp;now) == -1) {</div><div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;error executing time(): %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;               res = -1;</div><div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;            }</div><div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;</div><div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;            <span class="keywordflow">if</span> (now - s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a6bafd2f5dfdc170245b389db21bd81f8">authstart</a> &gt; <a class="code" href="../../df/d72/group__Group__AMI.html#gac3f1c96b9a666398c7768e67346b0b87">authtimeout</a>) {</div><div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#ga3eb98988184ea3f302e9a914eb9641e5">displayconnects</a>) {</div><div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Client from %s, failed to authenticate in %d seconds\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>), <a class="code" href="../../df/d72/group__Group__AMI.html#gac3f1c96b9a666398c7768e67346b0b87">authtimeout</a>);</div><div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;               }</div><div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;               res = -1;</div><div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;            }</div><div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;         }</div><div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;         <span class="comment">/* Input line received. */</span></div><div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(header_buf)) {</div><div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;            <span class="keywordflow">if</span> (hdr_loss) {</div><div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;               <a class="code" href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a>(s);</div><div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;               <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, &amp;m, <span class="stringliteral">&quot;Too many lines in message or allocation failure&quot;</span>);</div><div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;               <a class="code" href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a>(s);</div><div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;               res = 0;</div><div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;               <span class="keywordflow">switch</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab91b0fdf6f7223e7889b0bafe6c81639">parsing</a>) {</div><div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;               <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344a4062487b032b9348705c5ff65d21d777">MESSAGE_OKAY</a>:</div><div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;                  res = <a class="code" href="../../df/d72/group__Group__AMI.html#ga10113617fccfd71f696509a270385169">process_message</a>(s, &amp;m) ? -1 : 0;</div><div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;               <span class="keywordflow">case</span> <a class="code" href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344af59be521b8f1a6985f831b7b850a8fc9">MESSAGE_LINE_TOO_LONG</a>:</div><div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;                  <a class="code" href="../../df/d72/group__Group__AMI.html#ga7a69d5366de99cd023fe903f6edee0a8">handle_parse_error</a>(s, &amp;m, <span class="stringliteral">&quot;Failed to parse message: line too long&quot;</span>);</div><div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;                  res = 0;</div><div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;               }</div><div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;            }</div><div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m.<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a> &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(m.<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>)) {</div><div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;            m.<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[m.<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>] = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(header_buf);</div><div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;            <span class="keywordflow">if</span> (!m.<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[m.<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>]) {</div><div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;               <span class="comment">/* Allocation failure. */</span></div><div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;               hdr_loss = 1;</div><div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;               ++m.<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>;</div><div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;            }</div><div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;            <span class="comment">/* Too many lines in message. */</span></div><div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;            hdr_loss = 1;</div><div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;         }</div><div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;         <span class="comment">/* Input error. */</span></div><div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;      }</div><div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;   }</div><div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;</div><div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga1b557a85c122f479896a9f598ee49116">astman_free_headers</a>(&amp;m);</div><div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;</div><div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_a6bf0e68e74c0a9ca9d25251b22e4d64a"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_addr(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00290">netsock2.h:290</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga460510e6866d4785ec6bd0181c443739"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga460510e6866d4785ec6bd0181c443739">get_input</a></div><div class="ttdeci">static int get_input(struct mansession *s, char *output)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l06735">manager.c:6735</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga06b330b2a545662f8130f086604660ec"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a></div><div class="ttdeci">static void mansession_unlock(struct mansession *s)</div><div class="ttdoc">Unlock the &amp;#39;mansession&amp;#39; structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03257">manager.c:3257</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga3eb98988184ea3f302e9a914eb9641e5"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga3eb98988184ea3f302e9a914eb9641e5">displayconnects</a></div><div class="ttdeci">static int displayconnects</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01470">manager.c:1470</a></div></div>
<div class="ttc" id="structmansession__session_html_a6bafd2f5dfdc170245b389db21bd81f8"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a6bafd2f5dfdc170245b389db21bd81f8">mansession_session::authstart</a></div><div class="ttdeci">time_t authstart</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01605">manager.c:1605</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac3f1c96b9a666398c7768e67346b0b87"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac3f1c96b9a666398c7768e67346b0b87">authtimeout</a></div><div class="ttdeci">static int authtimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01479">manager.c:1479</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gab2b9c596c9d6eb5dac8fe5f3d7588f50"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gab2b9c596c9d6eb5dac8fe5f3d7588f50">process_events</a></div><div class="ttdeci">static int process_events(struct mansession *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l06227">manager.c:6227</a></div></div>
<div class="ttc" id="structmansession__session_html_a29e86d0f6d62ef1edac10a46e4c92095"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">mansession_session::authenticated</a></div><div class="ttdeci">int authenticated</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01594">manager.c:1594</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga10113617fccfd71f696509a270385169"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga10113617fccfd71f696509a270385169">process_message</a></div><div class="ttdeci">static int process_message(struct mansession *s, const struct message *m)</div><div class="ttdoc">Process an AMI message, performing desired action. Return 0 on success, -1 on error that require the ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l06607">manager.c:6607</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmansession_html_ab91b0fdf6f7223e7889b0bafe6c81639"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab91b0fdf6f7223e7889b0bafe6c81639">mansession::parsing</a></div><div class="ttdeci">enum mansession_message_parsing parsing</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01629">manager.c:1629</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="group__Group__AMI_html_ggae9440b5a8f6a5fb7e1667674b1507344af59be521b8f1a6985f831b7b850a8fc9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344af59be521b8f1a6985f831b7b850a8fc9">MESSAGE_LINE_TOO_LONG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01617">manager.c:1617</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga1b557a85c122f479896a9f598ee49116"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga1b557a85c122f479896a9f598ee49116">astman_free_headers</a></div><div class="ttdeci">static void astman_free_headers(struct message *m)</div><div class="ttdoc">Free headers inside message structure, but not the message structure itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02844">manager.c:2844</a></div></div>
<div class="ttc" id="structmansession__session_html_ac56f44f8863e74f246f657bdcf7bdcd1"><div class="ttname"><a href="../../df/d05/structmansession__session.html#ac56f44f8863e74f246f657bdcf7bdcd1">mansession_session::inbuf</a></div><div class="ttdeci">char inbuf[1025]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01597">manager.c:1597</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga2cbbc87c25cdd3f6346961d3ed40b2fb"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a></div><div class="ttdeci">static void mansession_lock(struct mansession *s)</div><div class="ttdoc">Lock the &amp;#39;mansession&amp;#39; structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03251">manager.c:3251</a></div></div>
<div class="ttc" id="structmessage_html_a81929bcaa1dcfa1abf47977385058cbe"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">message::headers</a></div><div class="ttdeci">const char * headers[AST_MAX_MANHEADERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00146">manager.h:146</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga7a69d5366de99cd023fe903f6edee0a8"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga7a69d5366de99cd023fe903f6edee0a8">handle_parse_error</a></div><div class="ttdeci">static void handle_parse_error(struct mansession *s, struct message *m, char *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l06835">manager.c:6835</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ggae9440b5a8f6a5fb7e1667674b1507344a4062487b032b9348705c5ff65d21d777"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344a4062487b032b9348705c5ff65d21d777">MESSAGE_OKAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01616">manager.c:1616</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="structmessage_html_a2337374fe8025cb750f52a316166aa6d"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">message::hdrcount</a></div><div class="ttdeci">unsigned int hdrcount</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00145">manager.h:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga60fd6fa59060c7bc3c3082275434a292"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga60fd6fa59060c7bc3c3082275434a292">&#9670;&nbsp;</a></span>event_filter_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void event_filter_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02192">2192</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06162">manager_add_filter()</a>.</p>
<div class="fragment"><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;{</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;   regex_t *regex_filter = obj;</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;   regfree(regex_filter);</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="gab0df757e83667997fd4b802de7c7c45b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab0df757e83667997fd4b802de7c7c45b">&#9670;&nbsp;</a></span>fast_originate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* fast_originate </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l05413">5413</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::account</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::app</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::appdata</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00172">AST_CHANNEL_NAME</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00255">ast_manager_event_multichan</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l01153">AST_OUTGOING_WAIT</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08015">ast_pbx_outgoing_app()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l07951">ast_pbx_outgoing_exten()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05377">fast_originate_helper::cap</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::channelid</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::cid_name</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::cid_num</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::context</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::data</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05405">destroy_fast_originate_helper()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05378">fast_originate_helper::early_media</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00072">EVENT_FLAG_CALL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::exten</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::idtext</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">in</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::otherchannelid</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::priority</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05393">fast_originate_helper::tech</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05376">fast_originate_helper::timeout</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00606">ast_assigned_ids::uniqueid</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l05395">fast_originate_helper::vars</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l05723">action_originate()</a>.</p>
<div class="fragment"><div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;{</div><div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d3c/structfast__originate__helper.html">fast_originate_helper</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#aca392a8d3941cd0740aef3ad92545d67">in</a> = <a class="code" href="../../d2/d3c/structfast__originate__helper.html#a7870f447ef3c43ebf148da15363b25dd">data</a>;</div><div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;   <span class="keywordtype">int</span> reason = 0;</div><div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *<a class="code" href="../../d6/d75/structchans.html">chans</a>[1];</div><div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;   <span class="keywordtype">char</span> requested_channel[<a class="code" href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a>];</div><div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> assignedids = {</div><div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;      .<a class="code" href="../../da/de5/structast__assigned__ids.html#af8e97b5c2410839d9826f15f83ac4aa2">uniqueid</a> = in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a88ee7e279ede6839297441d1768ec6d1">channelid</a>,</div><div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;      .uniqueid2 = in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a8c6534ea809fe4fb40a264409bf22e14">otherchannelid</a></div><div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;   };</div><div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;</div><div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a66066052ae6571f5495a4e7f8df6c0bb">app</a>)) {</div><div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;      res = <a class="code" href="../../db/de0/pbx_8h.html#a2afffb175879297ed07ec21df02fa6dc">ast_pbx_outgoing_app</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a6379def8cefd9afdea29d5ed673cf8a0">tech</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a7870f447ef3c43ebf148da15363b25dd">data</a>,</div><div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;         in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a66066052ae6571f5495a4e7f8df6c0bb">app</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a0ca0a0b3e0d6aafb1b2ff7e291f1acb0">appdata</a>, &amp;reason,</div><div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a24a619e5cc5e3f683322295991c57916a90d4fb6299afc301b2bfc05da78eb662">AST_OUTGOING_WAIT</a>,</div><div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a1db41d2bb5281151490fa74f8f8de95d">cid_num</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#acea391ea9b4b2ee61b5b84bce2187f12">cid_name</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;         in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a134fe67053d035e763d6cf99916c1bf8">vars</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a626176754f57f4dc291e44916a5354f8">account</a>, &amp;chan, &amp;assignedids);</div><div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;      res = <a class="code" href="../../db/de0/pbx_8h.html#a6c3a35983760904213206a8f0a7df9c9">ast_pbx_outgoing_exten</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a6379def8cefd9afdea29d5ed673cf8a0">tech</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a7870f447ef3c43ebf148da15363b25dd">data</a>,</div><div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;         in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a7faec841658b88ad0cfbc684853acad3">context</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#aaee31f4cc48985167efcd38ab252dac8">exten</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>, &amp;reason,</div><div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a24a619e5cc5e3f683322295991c57916a90d4fb6299afc301b2bfc05da78eb662">AST_OUTGOING_WAIT</a>,</div><div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a1db41d2bb5281151490fa74f8f8de95d">cid_num</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#acea391ea9b4b2ee61b5b84bce2187f12">cid_name</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;         in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a134fe67053d035e763d6cf99916c1bf8">vars</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a626176754f57f4dc291e44916a5354f8">account</a>, &amp;chan, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#ae558fc61c9cbf70fb44ec3fef6136129">early_media</a>, &amp;assignedids);</div><div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;   }</div><div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;</div><div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;      snprintf(requested_channel, <a class="code" href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a>, <span class="stringliteral">&quot;%s/%s&quot;</span>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a6379def8cefd9afdea29d5ed673cf8a0">tech</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a7870f447ef3c43ebf148da15363b25dd">data</a>);</div><div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;   }</div><div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;   <span class="comment">/* Tell the manager what happened with the channel */</span></div><div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;   chans[0] = chan;</div><div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a66066052ae6571f5495a4e7f8df6c0bb">app</a>)) {</div><div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;      <a class="code" href="../../db/d45/manager_8h.html#aafd542831b3864e77f37396573bc1fd0">ast_manager_event_multichan</a>(<a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <span class="stringliteral">&quot;OriginateResponse&quot;</span>, chan ? 1 : 0, chans,</div><div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;         <span class="stringliteral">&quot;Response: %s\r\n&quot;</span></div><div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;         <span class="stringliteral">&quot;Channel: %s\r\n&quot;</span></div><div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;         <span class="stringliteral">&quot;Application: %s\r\n&quot;</span></div><div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;         <span class="stringliteral">&quot;Data: %s\r\n&quot;</span></div><div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;         <span class="stringliteral">&quot;Reason: %d\r\n&quot;</span></div><div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;         <span class="stringliteral">&quot;Uniqueid: %s\r\n&quot;</span></div><div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;         <span class="stringliteral">&quot;CallerIDNum: %s\r\n&quot;</span></div><div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;         <span class="stringliteral">&quot;CallerIDName: %s\r\n&quot;</span>,</div><div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;         in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#ac0b1407c0017cb917a9687f90d16b106">idtext</a>, res ? <span class="stringliteral">&quot;Failure&quot;</span> : <span class="stringliteral">&quot;Success&quot;</span>,</div><div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;         chan ? <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan) : requested_channel,</div><div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;         in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a66066052ae6571f5495a4e7f8df6c0bb">app</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a0ca0a0b3e0d6aafb1b2ff7e291f1acb0">appdata</a>, reason,</div><div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;         chan ? <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan) : <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a88ee7e279ede6839297441d1768ec6d1">channelid</a>, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>),</div><div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a1db41d2bb5281151490fa74f8f8de95d">cid_num</a>, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>),</div><div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#acea391ea9b4b2ee61b5b84bce2187f12">cid_name</a>, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>)</div><div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;         );</div><div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;      <a class="code" href="../../db/d45/manager_8h.html#aafd542831b3864e77f37396573bc1fd0">ast_manager_event_multichan</a>(<a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <span class="stringliteral">&quot;OriginateResponse&quot;</span>, chan ? 1 : 0, chans,</div><div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;         <span class="stringliteral">&quot;Response: %s\r\n&quot;</span></div><div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;         <span class="stringliteral">&quot;Channel: %s\r\n&quot;</span></div><div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;         <span class="stringliteral">&quot;Context: %s\r\n&quot;</span></div><div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;         <span class="stringliteral">&quot;Exten: %s\r\n&quot;</span></div><div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;         <span class="stringliteral">&quot;Reason: %d\r\n&quot;</span></div><div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;         <span class="stringliteral">&quot;Uniqueid: %s\r\n&quot;</span></div><div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;         <span class="stringliteral">&quot;CallerIDNum: %s\r\n&quot;</span></div><div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;         <span class="stringliteral">&quot;CallerIDName: %s\r\n&quot;</span>,</div><div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;         in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#ac0b1407c0017cb917a9687f90d16b106">idtext</a>, res ? <span class="stringliteral">&quot;Failure&quot;</span> : <span class="stringliteral">&quot;Success&quot;</span>,</div><div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;         chan ? <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan) : requested_channel,</div><div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;         in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a7faec841658b88ad0cfbc684853acad3">context</a>, in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#aaee31f4cc48985167efcd38ab252dac8">exten</a>, reason,</div><div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;         chan ? <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan) : <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a88ee7e279ede6839297441d1768ec6d1">channelid</a>, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>),</div><div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#a1db41d2bb5281151490fa74f8f8de95d">cid_num</a>, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>),</div><div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(in-&gt;<a class="code" href="../../d2/d3c/structfast__originate__helper.html#acea391ea9b4b2ee61b5b84bce2187f12">cid_name</a>, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>)</div><div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;         );</div><div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;   }</div><div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;</div><div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;   <span class="comment">/* Locked and ref&#39;d by ast_pbx_outgoing_exten or ast_pbx_outgoing_app */</span></div><div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;   }</div><div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga2d7639d606b2516454d130399c840b35">destroy_fast_originate_helper</a>(in);</div><div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;}</div><div class="ttc" id="structfast__originate__helper_html"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html">fast_originate_helper</a></div><div class="ttdoc">helper function for originate </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05375">manager.c:5375</a></div></div>
<div class="ttc" id="pbx_8h_html_a24a619e5cc5e3f683322295991c57916a90d4fb6299afc301b2bfc05da78eb662"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a24a619e5cc5e3f683322295991c57916a90d4fb6299afc301b2bfc05da78eb662">AST_OUTGOING_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01153">pbx.h:1153</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#acec9ce2df15222151ad66fcb1d74eb9f">fast_originate_helper::priority</a></div><div class="ttdeci">int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a493b57f443cc38b3d3df9c1e584d9d82">fast_originate_helper::timeout</a></div><div class="ttdeci">int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05376">manager.c:5376</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a8c6534ea809fe4fb40a264409bf22e14"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a8c6534ea809fe4fb40a264409bf22e14">fast_originate_helper::otherchannelid</a></div><div class="ttdeci">const ast_string_field otherchannelid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a6379def8cefd9afdea29d5ed673cf8a0"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a6379def8cefd9afdea29d5ed673cf8a0">fast_originate_helper::tech</a></div><div class="ttdeci">const ast_string_field tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a626176754f57f4dc291e44916a5354f8"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a626176754f57f4dc291e44916a5354f8">fast_originate_helper::account</a></div><div class="ttdeci">const ast_string_field account</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="manager_8h_html_ab5db3cc603d7e798d61cb4cd94fbb4e2"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a></div><div class="ttdeci">#define EVENT_FLAG_CALL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00072">manager.h:72</a></div></div>
<div class="ttc" id="structast__assigned__ids_html"><div class="ttname"><a href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a></div><div class="ttdoc">Structure to pass both assignedid values to channel drivers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00605">channel.h:605</a></div></div>
<div class="ttc" id="structast__assigned__ids_html_af8e97b5c2410839d9826f15f83ac4aa2"><div class="ttname"><a href="../../da/de5/structast__assigned__ids.html#af8e97b5c2410839d9826f15f83ac4aa2">ast_assigned_ids::uniqueid</a></div><div class="ttdeci">const char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00606">channel.h:606</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_ae558fc61c9cbf70fb44ec3fef6136129"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#ae558fc61c9cbf70fb44ec3fef6136129">fast_originate_helper::early_media</a></div><div class="ttdeci">int early_media</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05378">manager.c:5378</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a970f3be80cbd08a1591eb8588f3cd54b">fast_originate_helper::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05377">manager.c:5377</a></div></div>
<div class="ttc" id="pbx_8h_html_a6c3a35983760904213206a8f0a7df9c9"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6c3a35983760904213206a8f0a7df9c9">ast_pbx_outgoing_exten</a></div><div class="ttdeci">int ast_pbx_outgoing_exten(const char *type, struct ast_format_cap *cap, const char *addr, int timeout, const char *context, const char *exten, int priority, int *reason, int synchronous, const char *cid_num, const char *cid_name, struct ast_variable *vars, const char *account, struct ast_channel **locked_channel, int early_media, const struct ast_assigned_ids *assignedids)</div><div class="ttdoc">Synchronously or asynchronously make an outbound call and send it to a particular extension...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l07951">pbx.c:7951</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga2d7639d606b2516454d130399c840b35"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga2d7639d606b2516454d130399c840b35">destroy_fast_originate_helper</a></div><div class="ttdeci">static void destroy_fast_originate_helper(struct fast_originate_helper *doomed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05405">manager.c:5405</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_aca392a8d3941cd0740aef3ad92545d67"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#aca392a8d3941cd0740aef3ad92545d67">in</a></div><div class="ttdeci">FILE * in</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a1db41d2bb5281151490fa74f8f8de95d"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a1db41d2bb5281151490fa74f8f8de95d">fast_originate_helper::cid_num</a></div><div class="ttdeci">const ast_string_field cid_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_aaee31f4cc48985167efcd38ab252dac8"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#aaee31f4cc48985167efcd38ab252dac8">fast_originate_helper::exten</a></div><div class="ttdeci">const ast_string_field exten</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a134fe67053d035e763d6cf99916c1bf8"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a134fe67053d035e763d6cf99916c1bf8">fast_originate_helper::vars</a></div><div class="ttdeci">struct ast_variable * vars</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05395">manager.c:5395</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a0ca0a0b3e0d6aafb1b2ff7e291f1acb0"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a0ca0a0b3e0d6aafb1b2ff7e291f1acb0">fast_originate_helper::appdata</a></div><div class="ttdeci">const ast_string_field appdata</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="pbx_8h_html_a2afffb175879297ed07ec21df02fa6dc"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a2afffb175879297ed07ec21df02fa6dc">ast_pbx_outgoing_app</a></div><div class="ttdeci">int ast_pbx_outgoing_app(const char *type, struct ast_format_cap *cap, const char *addr, int timeout, const char *app, const char *appdata, int *reason, int synchronous, const char *cid_num, const char *cid_name, struct ast_variable *vars, const char *account, struct ast_channel **locked_channel, const struct ast_assigned_ids *assignedids)</div><div class="ttdoc">Synchronously or asynchronously make an outbound call and execute an application on the channel...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08015">pbx.c:8015</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_ab57c278099ea5f8d7cedbb41eba58b56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a></div><div class="ttdeci">#define AST_CHANNEL_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00172">channel.h:172</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_acea391ea9b4b2ee61b5b84bce2187f12"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#acea391ea9b4b2ee61b5b84bce2187f12">fast_originate_helper::cid_name</a></div><div class="ttdeci">const ast_string_field cid_name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a7870f447ef3c43ebf148da15363b25dd"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a7870f447ef3c43ebf148da15363b25dd">fast_originate_helper::data</a></div><div class="ttdeci">const ast_string_field data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a7faec841658b88ad0cfbc684853acad3"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a7faec841658b88ad0cfbc684853acad3">fast_originate_helper::context</a></div><div class="ttdeci">const ast_string_field context</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="structchans_html"><div class="ttname"><a href="../../d6/d75/structchans.html">chans</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00088">astman.c:88</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structfast__originate__helper_html_a66066052ae6571f5495a4e7f8df6c0bb"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a66066052ae6571f5495a4e7f8df6c0bb">fast_originate_helper::app</a></div><div class="ttdeci">const ast_string_field app</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="manager_8h_html_aafd542831b3864e77f37396573bc1fd0"><div class="ttname"><a href="../../db/d45/manager_8h.html#aafd542831b3864e77f37396573bc1fd0">ast_manager_event_multichan</a></div><div class="ttdeci">#define ast_manager_event_multichan(category, event, nchans, chans, contents,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00255">manager.h:255</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_a88ee7e279ede6839297441d1768ec6d1"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#a88ee7e279ede6839297441d1768ec6d1">fast_originate_helper::channelid</a></div><div class="ttdeci">const ast_string_field channelid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
<div class="ttc" id="structfast__originate__helper_html_ac0b1407c0017cb917a9687f90d16b106"><div class="ttname"><a href="../../d2/d3c/structfast__originate__helper.html#ac0b1407c0017cb917a9687f90d16b106">fast_originate_helper::idtext</a></div><div class="ttdeci">const ast_string_field idtext</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l05393">manager.c:5393</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa497adca1647f8add683cd71799fc015"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa497adca1647f8add683cd71799fc015">&#9670;&nbsp;</a></span>function_capable_string_allowed_with_auths()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int function_capable_string_allowed_with_auths </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>evaluating</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>writepermlist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks to see if a string which can be used to evaluate functions should be rejected. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02046">2046</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00071">EVENT_FLAG_SYSTEM</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04610">action_getvar()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l04777">action_status()</a>.</p>
<div class="fragment"><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;{</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   <span class="keywordflow">if</span> (!(writepermlist &amp; <a class="code" href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a>)</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      &amp;&amp; (</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;         strstr(evaluating, <span class="stringliteral">&quot;SHELL&quot;</span>) ||       <span class="comment">/* NoOp(${SHELL(rm -rf /)})  */</span></div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;         strstr(evaluating, <span class="stringliteral">&quot;EVAL&quot;</span>)           <span class="comment">/* NoOp(${EVAL(${some_var_containing_SHELL})}) */</span></div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;      )) {</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;   }</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;}</div><div class="ttc" id="manager_8h_html_a420f0f755e1c3378b45ca7f6f0669ffa"><div class="ttname"><a href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a></div><div class="ttdeci">#define EVENT_FLAG_SYSTEM</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00071">manager.h:71</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga3256471530910751d20fa34e435c7575"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3256471530910751d20fa34e435c7575">&#9670;&nbsp;</a></span>generate_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void generate_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>vars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>varc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>all_variables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>id_text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04662">4662</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00317">ast_channel_appl()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01074">ast_channel_callgroup()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00900">ast_channel_connected_effective_id()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00976">ast_channel_creationtime()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00334">ast_channel_data()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00904">ast_channel_dialed()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10735">ast_channel_get_bridge()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00637">ast_channel_nativeformats()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01082">ast_channel_pickupgroup()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00856">ast_channel_readformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00753">ast_channel_readtrans()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00769">ast_channel_tech()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00932">ast_channel_varshead()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00928">ast_channel_whentohangup()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00761">ast_channel_writetrans()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00736">ast_format_cap_get_names()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00326">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../db/d70/pbx__functions_8c_source.html#l00599">ast_func_read()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l00561">ast_manager_build_channel_state_string()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00928">ast_translate_path_to_str()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00064">ast_tvdiff_sec()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00060">ast_var_name()</a>, <a class="el" href="../../d9/df9/chanvars_8c_source.html#l00080">ast_var_value()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00341">ast_party_id::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l00235">pbx_retrieve_variable()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00265">ast_party_name::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00280">ast_party_name::valid</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04777">action_status()</a>.</p>
<div class="fragment"><div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;{</div><div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;   <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;   <span class="keywordtype">long</span> elapsed_seconds;</div><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, variable_str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *write_transpath = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(256);</div><div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *read_transpath = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(256);</div><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *codec_buf = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> effective_id;</div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, snapshot,</div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan)),</div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, snapshot_str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;</div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;   }</div><div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;</div><div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;   snapshot_str = <a class="code" href="../../db/d45/manager_8h.html#a777cde87d12b331902f862ec44641688">ast_manager_build_channel_state_string</a>(snapshot);</div><div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;   <span class="keywordflow">if</span> (!snapshot_str) {</div><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;   }</div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;</div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;   <span class="keywordflow">if</span> (all_variables) {</div><div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;      variable_str = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(2048);</div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;      variable_str = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(1024);</div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;   }</div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;   <span class="keywordflow">if</span> (!variable_str) {</div><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;   }</div><div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;</div><div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;   now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;   elapsed_seconds = <a class="code" href="../../de/df7/time_8h.html#a39af1febe8b93cb6f7cd59b76fc39e8f">ast_tvdiff_sec</a>(now, <a class="code" href="../../d5/d7b/channel_8h.html#a8873859a4dbc3d0d053d696667e49012">ast_channel_creationtime</a>(chan));</div><div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;</div><div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;   <span class="comment">/* Even if all_variables has been specified, explicitly requested variables</span></div><div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;<span class="comment">    * may be global variables or dialplan functions */</span></div><div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; varc; i++) {</div><div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;      <span class="keywordtype">char</span> valbuf[512], *ret = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;</div><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;      <span class="keywordflow">if</span> (vars[i][strlen(vars[i]) - 1] == <span class="charliteral">&#39;)&#39;</span>) {</div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#aa4e9618aa036a586af7d7663afd9b507">ast_func_read</a>(chan, vars[i], valbuf, <span class="keyword">sizeof</span>(valbuf)) &lt; 0) {</div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;            valbuf[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;         }</div><div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;         ret = valbuf;</div><div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#aaf906a18ba2dcd53c35f59869757521f">pbx_retrieve_variable</a>(chan, vars[i], &amp;ret, valbuf, <span class="keyword">sizeof</span>(valbuf), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;      }</div><div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;</div><div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;variable_str, 0, <span class="stringliteral">&quot;Variable: %s=%s\r\n&quot;</span>, vars[i], ret);</div><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;   }</div><div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;</div><div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;   <span class="comment">/* Walk all channel variables and add them */</span></div><div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;   <span class="keywordflow">if</span> (all_variables) {</div><div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *variables;</div><div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;</div><div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(<a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(chan), variables, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>) {</div><div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;variable_str, 0, <span class="stringliteral">&quot;Variable: %s=%s\r\n&quot;</span>,</div><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;            <a class="code" href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a>(variables), <a class="code" href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a>(variables));</div><div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;      }</div><div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;   }</div><div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;</div><div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;   bridge = <a class="code" href="../../d5/d7b/channel_8h.html#a557663006d52a9cdc11f42602bf48326">ast_channel_get_bridge</a>(chan);</div><div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;   effective_id = <a class="code" href="../../d5/d7b/channel_8h.html#abd6165fa9617e1bb5efee3befa3e963d">ast_channel_connected_effective_id</a>(chan);</div><div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;</div><div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s,</div><div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;      <span class="stringliteral">&quot;Event: Status\r\n&quot;</span></div><div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;      <span class="stringliteral">&quot;Privilege: Call\r\n&quot;</span></div><div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;      <span class="stringliteral">&quot;Type: %s\r\n&quot;</span></div><div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;      <span class="stringliteral">&quot;DNID: %s\r\n&quot;</span></div><div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;      <span class="stringliteral">&quot;EffectiveConnectedLineNum: %s\r\n&quot;</span></div><div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;      <span class="stringliteral">&quot;EffectiveConnectedLineName: %s\r\n&quot;</span></div><div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;      <span class="stringliteral">&quot;TimeToHangup: %ld\r\n&quot;</span></div><div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;      <span class="stringliteral">&quot;BridgeID: %s\r\n&quot;</span></div><div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;      <span class="stringliteral">&quot;Application: %s\r\n&quot;</span></div><div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;      <span class="stringliteral">&quot;Data: %s\r\n&quot;</span></div><div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;      <span class="stringliteral">&quot;Nativeformats: %s\r\n&quot;</span></div><div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;      <span class="stringliteral">&quot;Readformat: %s\r\n&quot;</span></div><div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;      <span class="stringliteral">&quot;Readtrans: %s\r\n&quot;</span></div><div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;      <span class="stringliteral">&quot;Writeformat: %s\r\n&quot;</span></div><div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;      <span class="stringliteral">&quot;Writetrans: %s\r\n&quot;</span></div><div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;      <span class="stringliteral">&quot;Callgroup: %llu\r\n&quot;</span></div><div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;      <span class="stringliteral">&quot;Pickupgroup: %llu\r\n&quot;</span></div><div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;      <span class="stringliteral">&quot;Seconds: %ld\r\n&quot;</span></div><div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;      <span class="stringliteral">&quot;\r\n&quot;</span>,</div><div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(snapshot_str),</div><div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>,</div><div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a>(chan)-&gt;<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(effective_id.number.valid, effective_id.number.str, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>),</div><div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(effective_id.name.valid, effective_id.name.str, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>),</div><div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;      (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d7b/channel_8h.html#ae616309e9eba6a1b009a0466bada50cc">ast_channel_whentohangup</a>(chan)-&gt;tv_sec,</div><div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;      bridge ? bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac8b850ff95f945ad6cfeb2942799800a">ast_channel_appl</a>(chan),</div><div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a531fd832a2f8b0f4156735043a6158e1">ast_channel_data</a>(chan),</div><div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(chan), &amp;codec_buf),</div><div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;      <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(chan)),</div><div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;      <a class="code" href="../../db/d39/translate_8h.html#a33934307055c00738d6166ad82550711">ast_translate_path_to_str</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a6b4548259e61f691c654aed0025e5502">ast_channel_readtrans</a>(chan), &amp;read_transpath),</div><div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;      <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan)),</div><div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;      <a class="code" href="../../db/d39/translate_8h.html#a33934307055c00738d6166ad82550711">ast_translate_path_to_str</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a>(chan), &amp;write_transpath),</div><div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#abd38558261afd18f7c08f05b89625313">ast_channel_callgroup</a>(chan),</div><div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a5812578dedc2371e255eec8503bd50d6">ast_channel_pickupgroup</a>(chan),</div><div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;      (<span class="keywordtype">long</span>)elapsed_seconds,</div><div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(variable_str),</div><div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;      id_text);</div><div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;   ++*count;</div><div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;</div><div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(bridge);</div><div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__party__id_html"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html">ast_party_id</a></div><div class="ttdoc">Information needed to identify an endpoint in a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00339">channel.h:339</a></div></div>
<div class="ttc" id="pbx_8h_html_aa4e9618aa036a586af7d7663afd9b507"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aa4e9618aa036a586af7d7663afd9b507">ast_func_read</a></div><div class="ttdeci">int ast_func_read(struct ast_channel *chan, const char *function, char *workspace, size_t len)</div><div class="ttdoc">executes a read operation on a function </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00599">pbx_functions.c:599</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="chanvars_8h_html_a8e0081172db71c5021d20706c50d959c"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a></div><div class="ttdeci">const char * ast_var_value(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00080">chanvars.c:80</a></div></div>
<div class="ttc" id="chanvars_8h_html_a356a31cd608ec07d3668dcd589be49d8"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a></div><div class="ttdeci">const char * ast_var_name(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00060">chanvars.c:60</a></div></div>
<div class="ttc" id="time_8h_html_a39af1febe8b93cb6f7cd59b76fc39e8f"><div class="ttname"><a href="../../de/df7/time_8h.html#a39af1febe8b93cb6f7cd59b76fc39e8f">ast_tvdiff_sec</a></div><div class="ttdeci">int64_t ast_tvdiff_sec(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in seconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00064">time.h:64</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="format__cap_8h_html_a035f4aa78f172a18311bfa15dd232c6f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a></div><div class="ttdeci">#define AST_FORMAT_CAP_NAMES_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00326">format_cap.h:326</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="channel_8h_html_add6255866ea1651a90cf70d963c4920a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a></div><div class="ttdeci">struct varshead * ast_channel_varshead(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00932">channel_internal_api.c:932</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_a6b4548259e61f691c654aed0025e5502"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6b4548259e61f691c654aed0025e5502">ast_channel_readtrans</a></div><div class="ttdeci">struct ast_trans_pvt * ast_channel_readtrans(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00753">channel_internal_api.c:753</a></div></div>
<div class="ttc" id="channel_8h_html_ae616309e9eba6a1b009a0466bada50cc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae616309e9eba6a1b009a0466bada50cc">ast_channel_whentohangup</a></div><div class="ttdeci">struct timeval * ast_channel_whentohangup(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00928">channel_internal_api.c:928</a></div></div>
<div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="channel_8h_html_a557663006d52a9cdc11f42602bf48326"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a557663006d52a9cdc11f42602bf48326">ast_channel_get_bridge</a></div><div class="ttdeci">struct ast_bridge * ast_channel_get_bridge(const struct ast_channel *chan)</div><div class="ttdoc">Get the bridge associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10735">channel.c:10735</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_ab5c41a2130385cadf78c64cacea7e3f9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a></div><div class="ttdeci">struct ast_trans_pvt * ast_channel_writetrans(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00761">channel_internal_api.c:761</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="manager_8h_html_a777cde87d12b331902f862ec44641688"><div class="ttname"><a href="../../db/d45/manager_8h.html#a777cde87d12b331902f862ec44641688">ast_manager_build_channel_state_string</a></div><div class="ttdeci">struct ast_str * ast_manager_build_channel_state_string(const struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Generate the AMI message body from a channel snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1c/manager__channels_8c_source.html#l00561">manager_channels.c:561</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="channel_8h_html_abd6165fa9617e1bb5efee3befa3e963d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abd6165fa9617e1bb5efee3befa3e963d">ast_channel_connected_effective_id</a></div><div class="ttdeci">struct ast_party_id ast_channel_connected_effective_id(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00900">channel_internal_api.c:900</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="pbx_8h_html_aaf906a18ba2dcd53c35f59869757521f"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aaf906a18ba2dcd53c35f59869757521f">pbx_retrieve_variable</a></div><div class="ttdeci">void pbx_retrieve_variable(struct ast_channel *c, const char *var, char **ret, char *workspace, int workspacelen, struct varshead *headp)</div><div class="ttdoc">Retrieve the value of a builtin variable or variable from the channel variable stack. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l00235">pbx_variables.c:235</a></div></div>
<div class="ttc" id="channel_8h_html_a63732831df3e7a0999b0900ec85c626a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a></div><div class="ttdeci">struct ast_party_dialed * ast_channel_dialed(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00904">channel_internal_api.c:904</a></div></div>
<div class="ttc" id="channel_8h_html_a8873859a4dbc3d0d053d696667e49012"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8873859a4dbc3d0d053d696667e49012">ast_channel_creationtime</a></div><div class="ttdeci">struct timeval ast_channel_creationtime(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00976">channel_internal_api.c:976</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dff925fc9e3bb805b926d18447eb3eb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a></div><div class="ttdeci">const char * ast_format_cap_get_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Get the names of codecs of a set of formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00736">format_cap.c:736</a></div></div>
<div class="ttc" id="channel_8h_html_ac8b850ff95f945ad6cfeb2942799800a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac8b850ff95f945ad6cfeb2942799800a">ast_channel_appl</a></div><div class="ttdeci">const char * ast_channel_appl(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00317">channel_internal_api.c:317</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__var__t_html_a55d5c7988e3164d7310d88c67d97a1db"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a></div><div class="ttdeci">struct ast_var_t::@249 entries</div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="channel_8h_html_a531fd832a2f8b0f4156735043a6158e1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a531fd832a2f8b0f4156735043a6158e1">ast_channel_data</a></div><div class="ttdeci">const char * ast_channel_data(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00334">channel_internal_api.c:334</a></div></div>
<div class="ttc" id="translate_8h_html_a33934307055c00738d6166ad82550711"><div class="ttname"><a href="../../db/d39/translate_8h.html#a33934307055c00738d6166ad82550711">ast_translate_path_to_str</a></div><div class="ttdeci">const char * ast_translate_path_to_str(struct ast_trans_pvt *t, struct ast_str **str)</div><div class="ttdoc">Puts a string representation of the translation path into outbuf. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00928">translate.c:928</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_a5812578dedc2371e255eec8503bd50d6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5812578dedc2371e255eec8503bd50d6">ast_channel_pickupgroup</a></div><div class="ttdeci">ast_group_t ast_channel_pickupgroup(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01082">channel_internal_api.c:1082</a></div></div>
<div class="ttc" id="channel_8h_html_abd38558261afd18f7c08f05b89625313"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abd38558261afd18f7c08f05b89625313">ast_channel_callgroup</a></div><div class="ttdeci">ast_group_t ast_channel_callgroup(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01074">channel_internal_api.c:1074</a></div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
<div class="ttc" id="channel_8h_html_af5dee96d4dcc88a95fce391c22d4d21f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a></div><div class="ttdeci">const struct ast_channel_tech * ast_channel_tech(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00769">channel_internal_api.c:769</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga460510e6866d4785ec6bd0181c443739"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga460510e6866d4785ec6bd0181c443739">&#9670;&nbsp;</a></span>get_input()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_input </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Read one full line (including crlf) from the manager socket. </p><dl class="section note"><dt>Note</dt><dd><pre class="fragment">* \r\n is the only valid terminator for the line.
* (Note that, later, '\0' will be considered as the end-of-line marker,
* so everything between the '\0' and the '\r\n' will not be used).
* Also note that we assume output to have at least "maxlen" space.
* </pre> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06735">6735</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00084">ast_iostream_get_fd()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00273">ast_iostream_read()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00290">ast_sockaddr_stringify_addr()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01519">ast_wait_for_input()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01594">mansession_session::authenticated</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01605">mansession_session::authstart</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01479">authtimeout</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01597">mansession_session::inbuf</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01598">mansession_session::inlen</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01617">MESSAGE_LINE_TOO_LONG</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01610">mansession_session::notify_lock</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01629">mansession::parsing</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01606">mansession_session::pending_event</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01584">mansession_session::stream</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01587">mansession_session::waiting_thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06852">do_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;{</div><div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;   <span class="keywordtype">int</span> res, x;</div><div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;   <span class="keywordtype">int</span> maxlen = <span class="keyword">sizeof</span>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ac56f44f8863e74f246f657bdcf7bdcd1">inbuf</a>) - 1;</div><div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;   <span class="keywordtype">char</span> *src = s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ac56f44f8863e74f246f657bdcf7bdcd1">inbuf</a>;</div><div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = -1;</div><div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;   time_t now;</div><div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;</div><div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;<span class="comment">    * Look for \r\n within the buffer. If found, copy to the output</span></div><div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;<span class="comment">    * buffer and return, trimming the \r\n (not used afterwards).</span></div><div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a7da79056532998c4e37002ac8d9728a6">inlen</a>; x++) {</div><div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;      <span class="keywordtype">int</span> cr;  <span class="comment">/* set if we have \r */</span></div><div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;      <span class="keywordflow">if</span> (src[x] == <span class="charliteral">&#39;\r&#39;</span> &amp;&amp; x+1 &lt; s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a7da79056532998c4e37002ac8d9728a6">inlen</a> &amp;&amp; src[x + 1] == <span class="charliteral">&#39;\n&#39;</span>) {</div><div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;         cr = 2;  <span class="comment">/* Found. Update length to include \r\n */</span></div><div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (src[x] == <span class="charliteral">&#39;\n&#39;</span>) {</div><div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;         cr = 1;  <span class="comment">/* also accept \n only */</span></div><div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;      }</div><div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;      memmove(output, src, x);   <span class="comment">/*... but trim \r\n */</span></div><div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;      output[x] = <span class="charliteral">&#39;\0&#39;</span>;    <span class="comment">/* terminate the string */</span></div><div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;      x += cr;       <span class="comment">/* number of bytes used */</span></div><div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;      s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a7da79056532998c4e37002ac8d9728a6">inlen</a> -= x;       <span class="comment">/* remaining size */</span></div><div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;      memmove(src, src + x, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a7da79056532998c4e37002ac8d9728a6">inlen</a>); <span class="comment">/* remove used bytes */</span></div><div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;   }</div><div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a7da79056532998c4e37002ac8d9728a6">inlen</a> &gt;= maxlen) {</div><div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;      <span class="comment">/* no crlf found, and buffer full - sorry, too long for us</span></div><div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;<span class="comment">       * keep the last character in case we are in the middle of a CRLF. */</span></div><div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Discarding message from %s. Line too long: %.25s...\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>), src);</div><div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;      src[0] = src[s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a7da79056532998c4e37002ac8d9728a6">inlen</a> - 1];</div><div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;      s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a7da79056532998c4e37002ac8d9728a6">inlen</a> = 1;</div><div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;      s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab91b0fdf6f7223e7889b0bafe6c81639">parsing</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344af59be521b8f1a6985f831b7b850a8fc9">MESSAGE_LINE_TOO_LONG</a>;</div><div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;   }</div><div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;   res = 0;</div><div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;   <span class="keywordflow">while</span> (res == 0) {</div><div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;      <span class="comment">/* calculate a timeout if we are not authenticated */</span></div><div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;      <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a>) {</div><div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;         <span class="keywordflow">if</span>(time(&amp;now) == -1) {</div><div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;error executing time(): %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;         }</div><div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;</div><div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;         timeout = (<a class="code" href="../../df/d72/group__Group__AMI.html#gac3f1c96b9a666398c7768e67346b0b87">authtimeout</a> - (now - s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a6bafd2f5dfdc170245b389db21bd81f8">authstart</a>)) * 1000;</div><div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;         <span class="keywordflow">if</span> (timeout &lt; 0) {</div><div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;            <span class="comment">/* we have timed out */</span></div><div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;         }</div><div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;      }</div><div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;</div><div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;      <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a77d36f7d3efdab912ada2ef54a75cc65">pending_event</a>) {</div><div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;         s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a77d36f7d3efdab912ada2ef54a75cc65">pending_event</a> = 0;</div><div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;      }</div><div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;      s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">waiting_thread</a> = pthread_self();</div><div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;</div><div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;      res = <a class="code" href="../../d5/d60/utils_8h.html#a60404ef44696316455e79c3a002cc71e">ast_wait_for_input</a>(<a class="code" href="../../dd/d27/iostream_8h.html#a6ebb2730257107d3535fe6cb1285f479">ast_iostream_get_fd</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>), timeout);</div><div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;</div><div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;      s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">waiting_thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;   }</div><div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;      <span class="comment">/* If we get a signal from some other thread (typically because</span></div><div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;<span class="comment">       * there are new events queued), return 0 to notify the caller.</span></div><div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EINTR || <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EAGAIN) {</div><div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;      }</div><div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;poll() returned error: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;   }</div><div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;</div><div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;   res = <a class="code" href="../../dd/d27/iostream_8h.html#aa009ff0c2d31892c5beb19114f47768b">ast_iostream_read</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>, src + s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a7da79056532998c4e37002ac8d9728a6">inlen</a>, maxlen - s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a7da79056532998c4e37002ac8d9728a6">inlen</a>);</div><div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;   <span class="keywordflow">if</span> (res &lt; 1) {</div><div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;      res = -1;   <span class="comment">/* error return */</span></div><div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;      s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a7da79056532998c4e37002ac8d9728a6">inlen</a> += res;</div><div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;      src[s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a7da79056532998c4e37002ac8d9728a6">inlen</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;      res = 0;</div><div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;   }</div><div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_a6bf0e68e74c0a9ca9d25251b22e4d64a"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_addr(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00290">netsock2.h:290</a></div></div>
<div class="ttc" id="structmansession__session_html_a77d36f7d3efdab912ada2ef54a75cc65"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a77d36f7d3efdab912ada2ef54a75cc65">mansession_session::pending_event</a></div><div class="ttdeci">int pending_event</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01606">manager.c:1606</a></div></div>
<div class="ttc" id="structmansession__session_html_a25ce442b0903796547e81a75339b8a1e"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a25ce442b0903796547e81a75339b8a1e">mansession_session::waiting_thread</a></div><div class="ttdeci">pthread_t waiting_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01587">manager.c:1587</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmansession__session_html_a6bafd2f5dfdc170245b389db21bd81f8"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a6bafd2f5dfdc170245b389db21bd81f8">mansession_session::authstart</a></div><div class="ttdeci">time_t authstart</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01605">manager.c:1605</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac3f1c96b9a666398c7768e67346b0b87"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac3f1c96b9a666398c7768e67346b0b87">authtimeout</a></div><div class="ttdeci">static int authtimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01479">manager.c:1479</a></div></div>
<div class="ttc" id="iostream_8h_html_a6ebb2730257107d3535fe6cb1285f479"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a6ebb2730257107d3535fe6cb1285f479">ast_iostream_get_fd</a></div><div class="ttdeci">int ast_iostream_get_fd(struct ast_iostream *stream)</div><div class="ttdoc">Get an iostream&amp;#39;s file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00084">iostream.c:84</a></div></div>
<div class="ttc" id="structmansession__session_html_a29e86d0f6d62ef1edac10a46e4c92095"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">mansession_session::authenticated</a></div><div class="ttdeci">int authenticated</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01594">manager.c:1594</a></div></div>
<div class="ttc" id="structmansession__session_html_a7da79056532998c4e37002ac8d9728a6"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a7da79056532998c4e37002ac8d9728a6">mansession_session::inlen</a></div><div class="ttdeci">int inlen</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01598">manager.c:1598</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="iostream_8h_html_aa009ff0c2d31892c5beb19114f47768b"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#aa009ff0c2d31892c5beb19114f47768b">ast_iostream_read</a></div><div class="ttdeci">ssize_t ast_iostream_read(struct ast_iostream *stream, void *buffer, size_t count)</div><div class="ttdoc">Read data from an iostream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00273">iostream.c:273</a></div></div>
<div class="ttc" id="structmansession__session_html_a24597b49933903efcf09c635513d8269"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">mansession_session::notify_lock</a></div><div class="ttdeci">ast_mutex_t notify_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01610">manager.c:1610</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structmansession_html_ab91b0fdf6f7223e7889b0bafe6c81639"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab91b0fdf6f7223e7889b0bafe6c81639">mansession::parsing</a></div><div class="ttdeci">enum mansession_message_parsing parsing</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01629">manager.c:1629</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="group__Group__AMI_html_ggae9440b5a8f6a5fb7e1667674b1507344af59be521b8f1a6985f831b7b850a8fc9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344af59be521b8f1a6985f831b7b850a8fc9">MESSAGE_LINE_TOO_LONG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01617">manager.c:1617</a></div></div>
<div class="ttc" id="structmansession__session_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">mansession_session::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01584">manager.c:1584</a></div></div>
<div class="ttc" id="structmansession__session_html_ac56f44f8863e74f246f657bdcf7bdcd1"><div class="ttname"><a href="../../df/d05/structmansession__session.html#ac56f44f8863e74f246f657bdcf7bdcd1">mansession_session::inbuf</a></div><div class="ttdeci">char inbuf[1025]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01597">manager.c:1597</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="utils_8h_html_a60404ef44696316455e79c3a002cc71e"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a60404ef44696316455e79c3a002cc71e">ast_wait_for_input</a></div><div class="ttdeci">int ast_wait_for_input(int fd, int ms)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01519">main/utils.c:1519</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga14bd65f2096d29973dfd999d71e88eee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga14bd65f2096d29973dfd999d71e88eee">&#9670;&nbsp;</a></span>get_manager_by_name_locked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../db/d8a/structast__manager__user.html">ast_manager_user</a>* get_manager_by_name_locked </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>lookup an entry in the list of registered users. must be called with the list lock held. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02305">2305</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d12/res__config__ldap_8c_source.html#l00075">user</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01645">ast_manager_user::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03505">authenticate()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08577">function_amiclient()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02497">handle_showmanager()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02322">manager_displayconnects()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;{</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d8a/structast__manager__user.html">ast_manager_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>, user, list) {</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      }</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;   }</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;}</div><div class="ttc" id="res__config__ldap_8c_html_a930c15eddfe0826ff30e658c9d50b9b4"><div class="ttname"><a href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a></div><div class="ttdeci">static char user[512]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d12/res__config__ldap_8c_source.html#l00075">res_config_ldap.c:75</a></div></div>
<div class="ttc" id="structast__manager__user_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a60b121e87a5e71fe64bae70e1721ac3c">ast_manager_user::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01645">manager.c:1645</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__manager__user_html"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html">ast_manager_user</a></div><div class="ttdoc">user descriptor, as read from the config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01644">manager.c:1644</a></div></div>
<div class="ttc" id="structusers_html"><div class="ttname"><a href="../../d8/d63/structusers.html">users</a></div><div class="ttdoc">list of users found in the config file </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00915">app_voicemail.c:915</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gad61fbf474f2bcfc8efb7710a6d5d8bcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad61fbf474f2bcfc8efb7710a6d5d8bcd">&#9670;&nbsp;</a></span>get_perm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_perm </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>instr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02131">2131</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02112">ast_instring()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02016">permalias::num</a>, and <a class="el" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02152">strings_to_mask()</a>.</p>
<div class="fragment"><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;{</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;   <span class="keywordtype">int</span> x = 0, ret = 0;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;   <span class="keywordflow">if</span> (!instr) {</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;   }</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>); x++) {</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#gaaab162dbd3271550e8bb515c1e431bd9">ast_instring</a>(instr, <a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>[x].label, <span class="charliteral">&#39;,&#39;</span>)) {</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;         ret |= <a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>[x].<a class="code" href="../../de/d4b/structpermalias.html#a86cf672daa4e0ad11ad10efc894d19c8">num</a>;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      }</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;   }</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structpermalias_html_a86cf672daa4e0ad11ad10efc894d19c8"><div class="ttname"><a href="../../de/d4b/structpermalias.html#a86cf672daa4e0ad11ad10efc894d19c8">permalias::num</a></div><div class="ttdeci">int num</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02016">manager.c:2016</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga844c8a72ece748571e61afa468edabb0"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a></div><div class="ttdeci">static const struct permalias perms[]</div></div>
<div class="ttc" id="group__Group__AMI_html_gaaab162dbd3271550e8bb515c1e431bd9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaaab162dbd3271550e8bb515c1e431bd9">ast_instring</a></div><div class="ttdeci">static int ast_instring(const char *bigstr, const char *smallstr, const char delim)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02112">manager.c:2112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaf3c7fe7452f69b197b7c4e9a217119c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf3c7fe7452f69b197b7c4e9a217119c5">&#9670;&nbsp;</a></span>grab_last()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d9/d94/structeventqent.html">eventqent</a>* grab_last </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Grab a reference to the last event, update usecount as needed. Can handle a NULL pointer. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01963">1963</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00430">AST_RWLIST_LAST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01460">eventqent::usecount</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06937">session_do()</a>.</p>
<div class="fragment"><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;{</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d94/structeventqent.html">eventqent</a> *ret;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>);</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;   ret = <a class="code" href="../../df/d90/linkedlists_8h.html#a2aaf5b16690bc48355b4c0cd50bdefff">AST_RWLIST_LAST</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>);</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;   <span class="comment">/* the list is never empty now, but may become so when</span></div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;<span class="comment">    * we optimize it in the future, so be prepared.</span></div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;   <span class="keywordflow">if</span> (ret) {</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;ret-&gt;<a class="code" href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">usecount</a>, 1);</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;   }</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>);</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;}</div><div class="ttc" id="structall__events_html"><div class="ttname"><a href="../../d2/d3e/structall__events.html">all_events</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01468">manager.c:1468</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="structeventqent_html"><div class="ttname"><a href="../../d9/d94/structeventqent.html">eventqent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01459">manager.c:1459</a></div></div>
<div class="ttc" id="structeventqent_html_ab0f2e84f976dc042139d37fd1c28d73b"><div class="ttname"><a href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">eventqent::usecount</a></div><div class="ttdeci">int usecount</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01460">manager.c:1460</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2aaf5b16690bc48355b4c0cd50bdefff"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2aaf5b16690bc48355b4c0cd50bdefff">AST_RWLIST_LAST</a></div><div class="ttdeci">#define AST_RWLIST_LAST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00430">linkedlists.h:430</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gae44104439ab29d44fcd84f0361493625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae44104439ab29d44fcd84f0361493625">&#9670;&nbsp;</a></span>handle_manager_reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_manager_reload </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CLI command manager reload. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02734">2734</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09661">reload_module()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;{</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;manager reload&quot;</span>;</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;         <span class="stringliteral">&quot;Usage: manager reload\n&quot;</span></div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;         <span class="stringliteral">&quot;       Reloads the manager configuration.\n&quot;</span>;</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;   }</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 2) {</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;   }</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a>();</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga7c6ac25ea7536c0bc9ed18cbcf917527"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a></div><div class="ttdeci">static int reload_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l09661">manager.c:9661</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gac71fa21ee14d825bf98e4a658604c492"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac71fa21ee14d825bf98e4a658604c492">&#9670;&nbsp;</a></span>handle_mandebug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_mandebug </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02472">2472</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01478">manager_debug</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;{</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;manager set debug [on|off]&quot;</span>;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> = <span class="stringliteral">&quot;Usage: manager set debug [on|off]\n Show, enable, disable debugging of the manager code.\n&quot;</span>;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;   }</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 3) {</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;manager debug is %s\n&quot;</span>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga4162d86f823ac8c40424a3ae4f41d5b9">manager_debug</a>? <span class="stringliteral">&quot;on&quot;</span> : <span class="stringliteral">&quot;off&quot;</span>);</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 4) {</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;on&quot;</span>)) {</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga4162d86f823ac8c40424a3ae4f41d5b9">manager_debug</a> = 1;</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;off&quot;</span>)) {</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga4162d86f823ac8c40424a3ae4f41d5b9">manager_debug</a> = 0;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;      }</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;   }</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga4162d86f823ac8c40424a3ae4f41d5b9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga4162d86f823ac8c40424a3ae4f41d5b9">manager_debug</a></div><div class="ttdeci">static int manager_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01478">manager.c:1478</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga7a69d5366de99cd023fe903f6edee0a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7a69d5366de99cd023fe903f6edee0a8">&#9670;&nbsp;</a></span>handle_parse_error()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_parse_error </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06835">6835</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03251">mansession_lock()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03257">mansession_unlock()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01616">MESSAGE_OKAY</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01629">mansession::parsing</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06852">do_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;{</div><div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a>(s);</div><div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>);</div><div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;   s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab91b0fdf6f7223e7889b0bafe6c81639">parsing</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344a4062487b032b9348705c5ff65d21d777">MESSAGE_OKAY</a>;</div><div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a>(s);</div><div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga06b330b2a545662f8130f086604660ec"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a></div><div class="ttdeci">static void mansession_unlock(struct mansession *s)</div><div class="ttdoc">Unlock the &amp;#39;mansession&amp;#39; structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03257">manager.c:3257</a></div></div>
<div class="ttc" id="structmansession_html_ab91b0fdf6f7223e7889b0bafe6c81639"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab91b0fdf6f7223e7889b0bafe6c81639">mansession::parsing</a></div><div class="ttdeci">enum mansession_message_parsing parsing</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01629">manager.c:1629</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga2cbbc87c25cdd3f6346961d3ed40b2fb"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a></div><div class="ttdeci">static void mansession_lock(struct mansession *s)</div><div class="ttdoc">Lock the &amp;#39;mansession&amp;#39; structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03251">manager.c:3251</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ggae9440b5a8f6a5fb7e1667674b1507344a4062487b032b9348705c5ff65d21d777"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ggae9440b5a8f6a5fb7e1667674b1507344a4062487b032b9348705c5ff65d21d777">MESSAGE_OKAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01616">manager.c:1616</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga5226d999bfd60cad437504afd1db054c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5226d999bfd60cad437504afd1db054c">&#9670;&nbsp;</a></span>handle_showmanager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_showmanager </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02497">2497</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01655">ast_manager_user::acl</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01651">ast_manager_user::allowmultiplelogin</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00541">ast_acl_list_is_empty()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l01099">ast_acl_output()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l02726">ast_cli_completion_add()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01657">ast_manager_user::chanvars</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01650">ast_manager_user::displayconnects</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02305">get_manager_by_name_locked()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02043">MAX_AUTH_PERM_STRING</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01647">ast_manager_user::readperm</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01646">ast_manager_user::secret</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02060">user_authority_to_str()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01645">ast_manager_user::username</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01648">ast_manager_user::writeperm</a>.</p>
<div class="fragment"><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;{</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d8a/structast__manager__user.html">ast_manager_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;   <span class="keywordtype">int</span> l;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *rauthority = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#gaa7ca48cb0ef2a611f2aa94aeeca70b3b">MAX_AUTH_PERM_STRING</a>);</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *wauthority = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#gaa7ca48cb0ef2a611f2aa94aeeca70b3b">MAX_AUTH_PERM_STRING</a>);</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;manager show user&quot;</span>;</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;         <span class="stringliteral">&quot; Usage: manager show user &lt;user&gt;\n&quot;</span></div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;         <span class="stringliteral">&quot;        Display all information related to the manager user specified.\n&quot;</span>;</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;      l = strlen(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>);</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> != 3) {</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      }</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>, user, list) {</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;         <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>, l)) {</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a>(<a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>))) {</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;            }</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;         }</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;      }</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;   }</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;   }</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;   <span class="keywordflow">if</span> (!(user = <a class="code" href="../../df/d72/group__Group__AMI.html#ga14bd65f2096d29973dfd999d71e88eee">get_manager_by_name_locked</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]))) {</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;There is no manager called %s\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;   }</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>,</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;      <span class="stringliteral">&quot;          username: %s\n&quot;</span></div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;      <span class="stringliteral">&quot;            secret: %s\n&quot;</span></div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      <span class="stringliteral">&quot;               ACL: %s\n&quot;</span></div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;      <span class="stringliteral">&quot;         read perm: %s\n&quot;</span></div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      <span class="stringliteral">&quot;        write perm: %s\n&quot;</span></div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;      <span class="stringliteral">&quot;   displayconnects: %s\n&quot;</span></div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;      <span class="stringliteral">&quot;allowmultiplelogin: %s\n&quot;</span>,</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>, <span class="stringliteral">&quot;(N/A)&quot;</span>),</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;      (user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#acf3e6b25218c40455fd7dbce5fd3ee82">secret</a> ? <span class="stringliteral">&quot;&lt;Set&gt;&quot;</span> : <span class="stringliteral">&quot;(N/A)&quot;</span>),</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;      ((user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#ac53d23749250e5f0d95992b5d9ebc60c">acl</a> &amp;&amp; !<a class="code" href="../../d5/d59/acl_8h.html#aaf71cd7b64f531d2ec068b7680869238">ast_acl_list_is_empty</a>(user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#ac53d23749250e5f0d95992b5d9ebc60c">acl</a>)) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>),</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gadeb39f5a951b5c08eac6d0b872084fef">user_authority_to_str</a>(user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#afaabb85e65efc5fed1a5f4d08bf272a4">readperm</a>, &amp;rauthority),</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gadeb39f5a951b5c08eac6d0b872084fef">user_authority_to_str</a>(user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a006a09ed1c51271c4b6f582a2a42ba5f">writeperm</a>, &amp;wauthority),</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;      (user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a3eb98988184ea3f302e9a914eb9641e5">displayconnects</a> ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>),</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;      (user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a9d6ad22f239563cb0ec69d475299fa87">allowmultiplelogin</a> ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>));</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;         Variables: \n&quot;</span>);</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;      <span class="keywordflow">for</span> (v = user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a> ; v ; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;                 %s = %s\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;      }</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d59/acl_8h.html#aaf71cd7b64f531d2ec068b7680869238">ast_acl_list_is_empty</a>(user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#ac53d23749250e5f0d95992b5d9ebc60c">acl</a>)) {</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;      <a class="code" href="../../d5/d59/acl_8h.html#a56811c70f305d0ce35d66cea9d9fca69">ast_acl_output</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#ac53d23749250e5f0d95992b5d9ebc60c">acl</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;   }</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structast__manager__user_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a60b121e87a5e71fe64bae70e1721ac3c">ast_manager_user::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01645">manager.c:1645</a></div></div>
<div class="ttc" id="structast__manager__user_html_a006a09ed1c51271c4b6f582a2a42ba5f"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a006a09ed1c51271c4b6f582a2a42ba5f">ast_manager_user::writeperm</a></div><div class="ttdeci">int writeperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01648">manager.c:1648</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa7ca48cb0ef2a611f2aa94aeeca70b3b"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa7ca48cb0ef2a611f2aa94aeeca70b3b">MAX_AUTH_PERM_STRING</a></div><div class="ttdeci">#define MAX_AUTH_PERM_STRING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02043">manager.c:2043</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga14bd65f2096d29973dfd999d71e88eee"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga14bd65f2096d29973dfd999d71e88eee">get_manager_by_name_locked</a></div><div class="ttdeci">static struct ast_manager_user * get_manager_by_name_locked(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02305">manager.c:2305</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="acl_8h_html_a56811c70f305d0ce35d66cea9d9fca69"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a56811c70f305d0ce35d66cea9d9fca69">ast_acl_output</a></div><div class="ttdeci">void ast_acl_output(int fd, struct ast_acl_list *acl, const char *prefix)</div><div class="ttdoc">output an ACL to the provided fd </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l01099">acl.c:1099</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__manager__user_html"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html">ast_manager_user</a></div><div class="ttdoc">user descriptor, as read from the config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01644">manager.c:1644</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structusers_html"><div class="ttname"><a href="../../d8/d63/structusers.html">users</a></div><div class="ttdoc">list of users found in the config file </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00915">app_voicemail.c:915</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structast__manager__user_html_a06c0918fa1a1aac3d386fca59b12327c"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a06c0918fa1a1aac3d386fca59b12327c">ast_manager_user::chanvars</a></div><div class="ttdeci">struct ast_variable * chanvars</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01657">manager.c:1657</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="acl_8h_html_aaf71cd7b64f531d2ec068b7680869238"><div class="ttname"><a href="../../d5/d59/acl_8h.html#aaf71cd7b64f531d2ec068b7680869238">ast_acl_list_is_empty</a></div><div class="ttdeci">int ast_acl_list_is_empty(struct ast_acl_list *acl_list)</div><div class="ttdoc">Determines if an ACL is empty or if it contains entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00541">acl.c:541</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="structast__manager__user_html_ac53d23749250e5f0d95992b5d9ebc60c"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#ac53d23749250e5f0d95992b5d9ebc60c">ast_manager_user::acl</a></div><div class="ttdeci">struct ast_acl_list * acl</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01655">manager.c:1655</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gadeb39f5a951b5c08eac6d0b872084fef"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gadeb39f5a951b5c08eac6d0b872084fef">user_authority_to_str</a></div><div class="ttdeci">static const char * user_authority_to_str(int authority, struct ast_str **res)</div><div class="ttdoc">Convert authority code to a list of options for a user. This will only display those authority codes ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02060">manager.c:2060</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__manager__user_html_a9d6ad22f239563cb0ec69d475299fa87"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a9d6ad22f239563cb0ec69d475299fa87">ast_manager_user::allowmultiplelogin</a></div><div class="ttdeci">int allowmultiplelogin</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01651">manager.c:1651</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="structast__manager__user_html_afaabb85e65efc5fed1a5f4d08bf272a4"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#afaabb85e65efc5fed1a5f4d08bf272a4">ast_manager_user::readperm</a></div><div class="ttdeci">int readperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01647">manager.c:1647</a></div></div>
<div class="ttc" id="structast__manager__user_html_a3eb98988184ea3f302e9a914eb9641e5"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a3eb98988184ea3f302e9a914eb9641e5">ast_manager_user::displayconnects</a></div><div class="ttdeci">int displayconnects</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01650">manager.c:1650</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="structast__manager__user_html_acf3e6b25218c40455fd7dbce5fd3ee82"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#acf3e6b25218c40455fd7dbce5fd3ee82">ast_manager_user::secret</a></div><div class="ttdeci">char * secret</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01646">manager.c:1646</a></div></div>
<div class="ttc" id="cli_8h_html_a6f5f6c330757d980065d3f887c62237f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a></div><div class="ttdeci">int ast_cli_completion_add(char *value)</div><div class="ttdoc">Add a result to a request for completion options. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l02726">main/cli.c:2726</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga0a3fb6c9b8db835d467df360cb34f403"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0a3fb6c9b8db835d467df360cb34f403">&#9670;&nbsp;</a></span>handle_showmanagers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_showmanagers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02570">2570</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00451">AST_RWLIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01645">ast_manager_user::username</a>.</p>
<div class="fragment"><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;{</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d8a/structast__manager__user.html">ast_manager_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;   <span class="keywordtype">int</span> count_amu = 0;</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;manager show users&quot;</span>;</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;         <span class="stringliteral">&quot;Usage: manager show users\n&quot;</span></div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;         <span class="stringliteral">&quot;       Prints a listing of all managers that are currently configured on that\n&quot;</span></div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;         <span class="stringliteral">&quot; system.\n&quot;</span>;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;   }</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;   }</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;   <span class="comment">/* If there are no users, print out something along those lines */</span></div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>)) {</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;There are no manager users.\n&quot;</span>);</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;   }</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\nusername\n--------\n&quot;</span>);</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>, user, list) {</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>);</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;      count_amu++;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;   }</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>,<span class="stringliteral">&quot;-------------------\n&quot;</span></div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;            <span class="stringliteral">&quot;%d manager users configured.\n&quot;</span>, count_amu);</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;}</div><div class="ttc" id="structast__manager__user_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a60b121e87a5e71fe64bae70e1721ac3c">ast_manager_user::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01645">manager.c:1645</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__manager__user_html"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html">ast_manager_user</a></div><div class="ttdoc">user descriptor, as read from the config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01644">manager.c:1644</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structusers_html"><div class="ttname"><a href="../../d8/d63/structusers.html">users</a></div><div class="ttdoc">list of users found in the config file </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00915">app_voicemail.c:915</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0044f6572f50a89049b3b5272e51b0e7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a></div><div class="ttdeci">#define AST_RWLIST_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00451">linkedlists.h:451</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga689bc5c3cd185f54178b3719a5e834ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga689bc5c3cd185f54178b3719a5e834ac">&#9670;&nbsp;</a></span>handle_showmancmd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_showmancmd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02340">2340</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00151">manager_action::action</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00158">manager_action::arguments</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l02726">ast_cli_completion_add()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00438">AST_LIST_NEXT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00031">AST_XML_DOC</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l00242">ast_xmldoc_printable()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00164">manager_action::authority</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02084">authority_to_str()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../db/d45/term_8h_source.html#l00057">COLOR_MAGENTA</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00158">manager_action::description</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00169">manager_action::docsrc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00162">manager_action::final_response</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00160">manager_action::list_responses</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02043">MAX_AUTH_PERM_STRING</a>, <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00074">ast_xml_doc_item::name</a>, <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00080">ast_xml_doc_item::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08793">print_event_instance()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00158">manager_action::seealso</a>, <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00064">synopsis</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00158">manager_action::synopsis</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00158">manager_action::syntax</a>, <a class="el" href="../../d5/de5/term_8c_source.html#l00184">term_color()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>
<div class="fragment"><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;{</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dcc/structmanager__action.html">manager_action</a> *cur;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *authority;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   <span class="keywordtype">int</span> num;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;   <span class="keywordtype">int</span> l;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *auth_str;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;<span class="preprocessor">#ifdef AST_XML_DOCS</span></div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;   <span class="keywordtype">char</span> syntax_title[64], description_title[64], synopsis_title[64], seealso_title[64];</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;   <span class="keywordtype">char</span> arguments_title[64], privilege_title[64], final_response_title[64], list_responses_title[64];</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;manager show command&quot;</span>;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;         <span class="stringliteral">&quot;Usage: manager show command &lt;actionname&gt; [&lt;actionname&gt; [&lt;actionname&gt; [...]]]\n&quot;</span></div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;         <span class="stringliteral">&quot;  Shows the detailed description for a specific Asterisk manager interface command.\n&quot;</span>;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;      l = strlen(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>);</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>, cur, list) {</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;         <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, l)) {</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a>(<a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>))) {</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;            }</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;         }</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;      }</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;   }</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 4) {</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;   }</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;   authority = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#gaa7ca48cb0ef2a611f2aa94aeeca70b3b">MAX_AUTH_PERM_STRING</a>);</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="preprocessor">#ifdef AST_XML_DOCS</span></div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;   <span class="comment">/* setup the titles */</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(synopsis_title, <span class="stringliteral">&quot;[Synopsis]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, 40);</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(description_title, <span class="stringliteral">&quot;[Description]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, 40);</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(syntax_title, <span class="stringliteral">&quot;[Syntax]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, 40);</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(seealso_title, <span class="stringliteral">&quot;[See Also]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, 40);</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(arguments_title, <span class="stringliteral">&quot;[Arguments]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, 40);</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(privilege_title, <span class="stringliteral">&quot;[Privilege]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, 40);</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(final_response_title, <span class="stringliteral">&quot;[Final Response]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, 40);</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(list_responses_title, <span class="stringliteral">&quot;[List Responses]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, 40);</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>, cur, list) {</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;      <span class="keywordflow">for</span> (num = 3; num &lt; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a>; num++) {</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[num])) {</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;            auth_str = <a class="code" href="../../df/d72/group__Group__AMI.html#ga57cc8b67a0e4797ab1a608872d51d397">authority_to_str</a>(cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a321c2ead2a4079cde828f7491c2ef733">authority</a>, &amp;authority);</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;<span class="preprocessor">#ifdef AST_XML_DOCS</span></div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;            <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#aa871ca3c361d229d4e37edf3c6016cc1">docsrc</a> == <a class="code" href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e">AST_XML_DOC</a>) {</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;               <span class="keywordtype">char</span> *syntax = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ac72ddaf7b92092136fc38629a809c87a">syntax</a>, <span class="stringliteral">&quot;Not available&quot;</span>), 1);</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;               <span class="keywordtype">char</span> *<a class="code" href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a> = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#aa403beb670a3277f542647cc9aa22137">synopsis</a>, <span class="stringliteral">&quot;Not available&quot;</span>), 1);</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;               <span class="keywordtype">char</span> *description = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a76f76ee5f847833b202461d55b23c17a">description</a>, <span class="stringliteral">&quot;Not available&quot;</span>), 1);</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;               <span class="keywordtype">char</span> *arguments = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ad3d4ea338fb9552532c6828f6c312c57">arguments</a>, <span class="stringliteral">&quot;Not available&quot;</span>), 1);</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;               <span class="keywordtype">char</span> *seealso = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ac07925c5773daffa1e00486fbb9ef495">seealso</a>, <span class="stringliteral">&quot;Not available&quot;</span>), 1);</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;               <span class="keywordtype">char</span> *privilege = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(auth_str, <span class="stringliteral">&quot;Not available&quot;</span>), 1);</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;               <span class="keywordtype">char</span> *responses = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<span class="stringliteral">&quot;None&quot;</span>, 1);</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;               <span class="keywordflow">if</span> (!syntax || !synopsis || !description || !arguments</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                     || !seealso || !privilege || !responses) {</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(syntax);</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(synopsis);</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(description);</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(arguments);</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(seealso);</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(privilege);</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(responses);</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                  <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Allocation failure.\n&quot;</span>);</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                  <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                  <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;               }</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s%s\n\n%s%s\n\n%s%s\n\n%s%s\n\n%s%s\n\n%s%s\n\n%s&quot;</span>,</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                  syntax_title, syntax,</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;                  synopsis_title, synopsis,</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                  description_title, description,</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;                  arguments_title, arguments,</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;                  seealso_title, seealso,</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;                  privilege_title, privilege,</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                  list_responses_title);</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;               <span class="keywordflow">if</span> (!cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ad620e07ef3ac6fbeb23e5d2ec0484e1d">list_responses</a>) {</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;                  <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s\n\n&quot;</span>, responses);</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                  <span class="keyword">struct </span><a class="code" href="../../d8/d46/structast__xml__doc__item.html">ast_xml_doc_item</a> *temp;</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;                  <span class="keywordflow">for</span> (temp = cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ad620e07ef3ac6fbeb23e5d2ec0484e1d">list_responses</a>; temp; temp = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(temp, <a class="code" href="../../d8/d46/structast__xml__doc__item.html#a623575abd8c4c7cdcab02fa4156c3762">next</a>)) {</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;                     <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Event: %s\n&quot;</span>, temp-&gt;<a class="code" href="../../d8/d46/structast__xml__doc__item.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;                     <a class="code" href="../../df/d72/group__Group__AMI.html#ga12892108a64ff8588dbcd69a4bdf654e">print_event_instance</a>(a, temp);</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;                  }</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;               }</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s&quot;</span>, final_response_title);</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;               <span class="keywordflow">if</span> (!cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a8c15417035739fd46675a17c5895afa9">final_response</a>) {</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                  <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s\n\n&quot;</span>, responses);</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;                  <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Event: %s\n&quot;</span>, cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a8c15417035739fd46675a17c5895afa9">final_response</a>-&gt;<a class="code" href="../../d8/d46/structast__xml__doc__item.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;                  <a class="code" href="../../df/d72/group__Group__AMI.html#ga12892108a64ff8588dbcd69a4bdf654e">print_event_instance</a>(a, cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a8c15417035739fd46675a17c5895afa9">final_response</a>);</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;               }</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(syntax);</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(synopsis);</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(description);</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(arguments);</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(seealso);</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(privilege);</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(responses);</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;            } <span class="keywordflow">else</span></div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;            {</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Action: %s\nSynopsis: %s\nPrivilege: %s\n%s\n&quot;</span>,</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;                  cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#aa403beb670a3277f542647cc9aa22137">synopsis</a>,</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;                  auth_str,</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a76f76ee5f847833b202461d55b23c17a">description</a>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;            }</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;         }</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;      }</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;   }</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;}</div><div class="ttc" id="app__mysql_8c_html_afbb30cae381f627fb08e1acdac926270"><div class="ttname"><a href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a></div><div class="ttdeci">static const char synopsis[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db6/app__mysql_8c_source.html#l00064">app_mysql.c:64</a></div></div>
<div class="ttc" id="structast__xml__doc__item_html_a623575abd8c4c7cdcab02fa4156c3762"><div class="ttname"><a href="../../d8/d46/structast__xml__doc__item.html#a623575abd8c4c7cdcab02fa4156c3762">ast_xml_doc_item::next</a></div><div class="ttdeci">struct ast_xml_doc_item * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00080">xmldoc.h:80</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa7ca48cb0ef2a611f2aa94aeeca70b3b"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa7ca48cb0ef2a611f2aa94aeeca70b3b">MAX_AUTH_PERM_STRING</a></div><div class="ttdeci">#define MAX_AUTH_PERM_STRING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02043">manager.c:2043</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structmanager__action_html_ab1db9bdb9ca2c111e4aef51de082553e"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">manager_action::action</a></div><div class="ttdeci">const char * action</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00151">manager.h:151</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ae234825bcb65b88c0554b995ff1b8ba6"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a></div><div class="ttdeci">#define AST_LIST_NEXT(elm, field)</div><div class="ttdoc">Returns the next entry in the list after the given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00438">linkedlists.h:438</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a8717a951656993c40bd851ebf50f58e3a24212840b7b1b0e9c1eebc8cfd89ab3e">AST_XML_DOC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00031">xmldoc.h:31</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga57cc8b67a0e4797ab1a608872d51d397"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga57cc8b67a0e4797ab1a608872d51d397">authority_to_str</a></div><div class="ttdeci">static const char * authority_to_str(int authority, struct ast_str **res)</div><div class="ttdoc">Convert authority code to a list of options. Note that the EVENT_FLAG_ALL authority will always be re...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02084">manager.c:2084</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmanager__action_html_ad620e07ef3ac6fbeb23e5d2ec0484e1d"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ad620e07ef3ac6fbeb23e5d2ec0484e1d">manager_action::list_responses</a></div><div class="ttdeci">struct ast_xml_doc_item * list_responses</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00160">manager.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structmanager__action_html_aa871ca3c361d229d4e37edf3c6016cc1"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#aa871ca3c361d229d4e37edf3c6016cc1">manager_action::docsrc</a></div><div class="ttdeci">enum ast_doc_src docsrc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00169">manager.h:169</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structmanager__action_html_a76f76ee5f847833b202461d55b23c17a"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#a76f76ee5f847833b202461d55b23c17a">manager_action::description</a></div><div class="ttdeci">const ast_string_field description</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00158">manager.h:158</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga12892108a64ff8588dbcd69a4bdf654e"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga12892108a64ff8588dbcd69a4bdf654e">print_event_instance</a></div><div class="ttdeci">static void print_event_instance(struct ast_cli_args *a, struct ast_xml_doc_item *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l08793">manager.c:8793</a></div></div>
<div class="ttc" id="structactions_html"><div class="ttname"><a href="../../dc/de8/structactions.html">actions</a></div><div class="ttdoc">list of actions registered </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01665">manager.c:1665</a></div></div>
<div class="ttc" id="term_8h_html_a7b6c72116c334f40bf7c1e50e793c93b"><div class="ttname"><a href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a></div><div class="ttdeci">char * term_color(char *outbuf, const char *inbuf, int fgcolor, int bgcolor, int maxout)</div><div class="ttdoc">Colorize a specified string by adding terminal color codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de5/term_8c_source.html#l00184">term.c:184</a></div></div>
<div class="ttc" id="structmanager__action_html_ad3d4ea338fb9552532c6828f6c312c57"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ad3d4ea338fb9552532c6828f6c312c57">manager_action::arguments</a></div><div class="ttdeci">const ast_string_field arguments</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00158">manager.h:158</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structmanager__action_html_a321c2ead2a4079cde828f7491c2ef733"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#a321c2ead2a4079cde828f7491c2ef733">manager_action::authority</a></div><div class="ttdeci">int authority</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00164">manager.h:164</a></div></div>
<div class="ttc" id="structast__xml__doc__item_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d8/d46/structast__xml__doc__item.html#ace9168767fc3707cf5f0a7d049682ba3">ast_xml_doc_item::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00074">xmldoc.h:74</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a637de870dfc83d0694f588c5a814ce38"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a></div><div class="ttdeci">char * ast_xmldoc_printable(const char *bwinput, int withcolors)</div><div class="ttdoc">Colorize and put delimiters (instead of tags) to the xmldoc output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l00242">xmldoc.c:242</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__xml__doc__item_html"><div class="ttname"><a href="../../d8/d46/structast__xml__doc__item.html">ast_xml_doc_item</a></div><div class="ttdoc">Struct that contains the XML documentation for a particular item. Note that this is an ao2 ref counte...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00056">xmldoc.h:56</a></div></div>
<div class="ttc" id="structmanager__action_html_aa403beb670a3277f542647cc9aa22137"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#aa403beb670a3277f542647cc9aa22137">manager_action::synopsis</a></div><div class="ttdeci">const ast_string_field synopsis</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00158">manager.h:158</a></div></div>
<div class="ttc" id="cli_8h_html_a6f5f6c330757d980065d3f887c62237f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a></div><div class="ttdeci">int ast_cli_completion_add(char *value)</div><div class="ttdoc">Add a result to a request for completion options. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l02726">main/cli.c:2726</a></div></div>
<div class="ttc" id="structmanager__action_html_a8c15417035739fd46675a17c5895afa9"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#a8c15417035739fd46675a17c5895afa9">manager_action::final_response</a></div><div class="ttdeci">struct ast_xml_doc_item * final_response</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00162">manager.h:162</a></div></div>
<div class="ttc" id="structmanager__action_html_ac07925c5773daffa1e00486fbb9ef495"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ac07925c5773daffa1e00486fbb9ef495">manager_action::seealso</a></div><div class="ttdeci">const ast_string_field seealso</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00158">manager.h:158</a></div></div>
<div class="ttc" id="structmanager__action_html_ac72ddaf7b92092136fc38629a809c87a"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ac72ddaf7b92092136fc38629a809c87a">manager_action::syntax</a></div><div class="ttdeci">const ast_string_field syntax</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00158">manager.h:158</a></div></div>
<div class="ttc" id="term_8h_html_a8deb0beccea721b35bdb1b4f7264fe75"><div class="ttname"><a href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a></div><div class="ttdeci">#define COLOR_MAGENTA</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00057">term.h:57</a></div></div>
<div class="ttc" id="structmanager__action_html"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html">manager_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00149">manager.h:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gad3ecc04e5e7484463d64fa6d00c2bdd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad3ecc04e5e7484463d64fa6d00c2bdd2">&#9670;&nbsp;</a></span>handle_showmancmds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_showmancmds </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CLI command manager list commands. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02613">2613</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00151">manager_action::action</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d4/d10/manager_8c.html#a9eeaf526330f14e1906f9e6f2557364b">HSMC_FORMAT</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01506">MGR_SHOW_TERMINAL_WIDTH</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00158">manager_action::synopsis</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;{</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dcc/structmanager__action.html">manager_action</a> *cur;</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;   <span class="keywordtype">int</span> name_len = 1;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;   <span class="keywordtype">int</span> space_remaining;</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="preprocessor">#define HSMC_FORMAT &quot;  %-*.*s  %-.*s\n&quot;</span></div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;manager show commands&quot;</span>;</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;         <span class="stringliteral">&quot;Usage: manager show commands\n&quot;</span></div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;         <span class="stringliteral">&quot;  Prints a listing of all the available Asterisk manager interface commands.\n&quot;</span>;</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;   }</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>, cur, list) {</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;      <span class="keywordtype">int</span> incoming_len = strlen(cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>);</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;      <span class="keywordflow">if</span> (incoming_len &gt; name_len) {</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;         name_len = incoming_len;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;      }</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;   }</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;   space_remaining = <a class="code" href="../../df/d72/group__Group__AMI.html#ga5d7004574318e8b76738d6a158a447a9">MGR_SHOW_TERMINAL_WIDTH</a> - name_len - 4;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;   <span class="keywordflow">if</span> (space_remaining &lt; 0) {</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;      space_remaining = 0;</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;   }</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d4/d10/manager_8c.html#a9eeaf526330f14e1906f9e6f2557364b">HSMC_FORMAT</a>, name_len, name_len, <span class="stringliteral">&quot;Action&quot;</span>, space_remaining, <span class="stringliteral">&quot;Synopsis&quot;</span>);</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d4/d10/manager_8c.html#a9eeaf526330f14e1906f9e6f2557364b">HSMC_FORMAT</a>, name_len, name_len, <span class="stringliteral">&quot;------&quot;</span>, space_remaining, <span class="stringliteral">&quot;--------&quot;</span>);</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>, cur, list) {</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d4/d10/manager_8c.html#a9eeaf526330f14e1906f9e6f2557364b">HSMC_FORMAT</a>, name_len, name_len, cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>, space_remaining, cur-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#aa403beb670a3277f542647cc9aa22137">synopsis</a>);</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;   }</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dc/de8/structactions.html">actions</a>);</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;}</div><div class="ttc" id="manager_8c_html_a9eeaf526330f14e1906f9e6f2557364b"><div class="ttname"><a href="../../d4/d10/manager_8c.html#a9eeaf526330f14e1906f9e6f2557364b">HSMC_FORMAT</a></div><div class="ttdeci">#define HSMC_FORMAT</div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structmanager__action_html_ab1db9bdb9ca2c111e4aef51de082553e"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">manager_action::action</a></div><div class="ttdeci">const char * action</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00151">manager.h:151</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structactions_html"><div class="ttname"><a href="../../dc/de8/structactions.html">actions</a></div><div class="ttdoc">list of actions registered </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01665">manager.c:1665</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga5d7004574318e8b76738d6a158a447a9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5d7004574318e8b76738d6a158a447a9">MGR_SHOW_TERMINAL_WIDTH</a></div><div class="ttdeci">#define MGR_SHOW_TERMINAL_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01506">manager.c:1506</a></div></div>
<div class="ttc" id="structmanager__action_html_aa403beb670a3277f542647cc9aa22137"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#aa403beb670a3277f542647cc9aa22137">manager_action::synopsis</a></div><div class="ttdeci">const ast_string_field synopsis</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00158">manager.h:158</a></div></div>
<div class="ttc" id="structmanager__action_html"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html">manager_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00149">manager.h:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga26ac9d8e0f9483bd06741753ebcfe6d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga26ac9d8e0f9483bd06741753ebcfe6d6">&#9670;&nbsp;</a></span>handle_showmanconn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_showmanconn </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CLI command manager list connected. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02655">2655</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00084">ast_iostream_get_fd()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00290">ast_sockaddr_stringify_addr()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d4/d10/manager_8c.html#a4f17d74ca1307a629a1d6b237ca02c35">HSMCONN_FORMAT1</a>, <a class="el" href="../../d4/d10/manager_8c.html#afd6ff00e10a26f619b167194999013b5">HSMCONN_FORMAT2</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01585">mansession_session::inuse</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01595">mansession_session::readperm</a>, <a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, <a class="el" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01589">mansession_session::sessionstart</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01584">mansession_session::stream</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02183">unref_mansession()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01592">mansession_session::username</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01596">mansession_session::writeperm</a>.</p>
<div class="fragment"><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;{</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>;</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d05/structmansession__session.html">mansession_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>;</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;   time_t now = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="preprocessor">#define HSMCONN_FORMAT1 &quot;  %-15.15s  %-55.55s  %-10.10s  %-10.10s  %-8.8s  %-8.8s  %-5.5s  %-5.5s\n&quot;</span></div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;<span class="preprocessor">#define HSMCONN_FORMAT2 &quot;  %-15.15s  %-55.55s  %-10d  %-10d  %-8d  %-8d  %-5.5d  %-5.5d\n&quot;</span></div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;manager show connected&quot;</span>;</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;         <span class="stringliteral">&quot;Usage: manager show connected\n&quot;</span></div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;         <span class="stringliteral">&quot;  Prints a listing of the users that are currently connected to the\n&quot;</span></div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;         <span class="stringliteral">&quot;Asterisk manager interface.\n&quot;</span>;</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;   }</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d4/d10/manager_8c.html#a4f17d74ca1307a629a1d6b237ca02c35">HSMCONN_FORMAT1</a>, <span class="stringliteral">&quot;Username&quot;</span>, <span class="stringliteral">&quot;IP Address&quot;</span>, <span class="stringliteral">&quot;Start&quot;</span>, <span class="stringliteral">&quot;Elapsed&quot;</span>, <span class="stringliteral">&quot;FileDes&quot;</span>, <span class="stringliteral">&quot;HttpCnt&quot;</span>, <span class="stringliteral">&quot;Read&quot;</span>, <span class="stringliteral">&quot;Write&quot;</span>);</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;   sessions = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(mgr_sessions);</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;   <span class="keywordflow">if</span> (sessions) {</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;      i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(sessions, 0);</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sessions, -1);</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;      <span class="keywordflow">while</span> ((session = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(session);</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d4/d10/manager_8c.html#afd6ff00e10a26f619b167194999013b5">HSMCONN_FORMAT2</a>, session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>,</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>),</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;            (<span class="keywordtype">int</span>) (session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a6886313a6b114cbcf7cb60676533c405">sessionstart</a>),</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;            (<span class="keywordtype">int</span>) (now - session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a6886313a6b114cbcf7cb60676533c405">sessionstart</a>),</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;            session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a> ? <a class="code" href="../../dd/d27/iostream_8h.html#a6ebb2730257107d3535fe6cb1285f479">ast_iostream_get_fd</a>(session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>) : -1,</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;            session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a679cabe3b846f2e363f43d8e57433834">inuse</a>,</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;            session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#afaabb85e65efc5fed1a5f4d08bf272a4">readperm</a>,</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;            session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">writeperm</a>);</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;         count++;</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(session);</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga5e4938c2cafe6e01553cb952ca1f5e45">unref_mansession</a>(session);</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;      }</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;   }</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%d users connected.\n&quot;</span>, count);</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_a6bf0e68e74c0a9ca9d25251b22e4d64a"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_addr(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00290">netsock2.h:290</a></div></div>
<div class="ttc" id="structmansession__session_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">mansession_session::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01592">manager.c:1592</a></div></div>
<div class="ttc" id="manager_8c_html_a4f17d74ca1307a629a1d6b237ca02c35"><div class="ttname"><a href="../../d4/d10/manager_8c.html#a4f17d74ca1307a629a1d6b237ca02c35">HSMCONN_FORMAT1</a></div><div class="ttdeci">#define HSMCONN_FORMAT1</div></div>
<div class="ttc" id="chan__skinny_8c_html_a61aa7b9ad75e714f776c1f82bcc3359f"><div class="ttname"><a href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a></div><div class="ttdeci">static struct sessions sessions</div></div>
<div class="ttc" id="manager_8c_html_afd6ff00e10a26f619b167194999013b5"><div class="ttname"><a href="../../d4/d10/manager_8c.html#afd6ff00e10a26f619b167194999013b5">HSMCONN_FORMAT2</a></div><div class="ttdeci">#define HSMCONN_FORMAT2</div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="structmansession__session_html_a006a09ed1c51271c4b6f582a2a42ba5f"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">mansession_session::writeperm</a></div><div class="ttdeci">int writeperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01596">manager.c:1596</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="iostream_8h_html_a6ebb2730257107d3535fe6cb1285f479"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a6ebb2730257107d3535fe6cb1285f479">ast_iostream_get_fd</a></div><div class="ttdeci">int ast_iostream_get_fd(struct ast_iostream *stream)</div><div class="ttdoc">Get an iostream&amp;#39;s file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00084">iostream.c:84</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structmansession__session_html_afaabb85e65efc5fed1a5f4d08bf272a4"><div class="ttname"><a href="../../df/d05/structmansession__session.html#afaabb85e65efc5fed1a5f4d08bf272a4">mansession_session::readperm</a></div><div class="ttdeci">int readperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01595">manager.c:1595</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga5e4938c2cafe6e01553cb952ca1f5e45"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5e4938c2cafe6e01553cb952ca1f5e45">unref_mansession</a></div><div class="ttdeci">static struct mansession_session * unref_mansession(struct mansession_session *s)</div><div class="ttdoc">Unreference manager session object. If no more references, then go ahead and delete it...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02183">manager.c:2183</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structmansession__session_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">mansession_session::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01584">manager.c:1584</a></div></div>
<div class="ttc" id="structmansession__session_html"><div class="ttname"><a href="../../df/d05/structmansession__session.html">mansession_session</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01581">manager.c:1581</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="structmansession__session_html_a6886313a6b114cbcf7cb60676533c405"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a6886313a6b114cbcf7cb60676533c405">mansession_session::sessionstart</a></div><div class="ttdeci">time_t sessionstart</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01589">manager.c:1589</a></div></div>
<div class="ttc" id="structmansession__session_html_a679cabe3b846f2e363f43d8e57433834"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a679cabe3b846f2e363f43d8e57433834">mansession_session::inuse</a></div><div class="ttdeci">int inuse</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01585">manager.c:1585</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga4aa0274bed0fc74d53f43cad92c2e263"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4aa0274bed0fc74d53f43cad92c2e263">&#9670;&nbsp;</a></span>handle_showmaneventq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_showmaneventq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CLI command manager list eventq. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02706">2706</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01461">eventqent::category</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09661">reload_module()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01460">eventqent::usecount</a>.</p>
<div class="fragment"><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;{</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d94/structeventqent.html">eventqent</a> *s;</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;manager show eventq&quot;</span>;</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;         <span class="stringliteral">&quot;Usage: manager show eventq\n&quot;</span></div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;         <span class="stringliteral">&quot;  Prints a listing of all events pending in the Asterisk manger\n&quot;</span></div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;         <span class="stringliteral">&quot;event queue.\n&quot;</span>;</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;   }</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>);</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>, s, eq_next) {</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Usecount: %d\n&quot;</span>, s-&gt;<a class="code" href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">usecount</a>);</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Category: %d\n&quot;</span>, s-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a>);</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Event:\n%s&quot;</span>, s-&gt;eventdata);</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;   }</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>);</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;}</div><div class="ttc" id="structall__events_html"><div class="ttname"><a href="../../d2/d3e/structall__events.html">all_events</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01468">manager.c:1468</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structeventqent_html"><div class="ttname"><a href="../../d9/d94/structeventqent.html">eventqent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01459">manager.c:1459</a></div></div>
<div class="ttc" id="structeventqent_html_ab0f2e84f976dc042139d37fd1c28d73b"><div class="ttname"><a href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">eventqent::usecount</a></div><div class="ttdeci">int usecount</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01460">manager.c:1460</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structeventqent_html_a60863e080514b398bce285b4d087dcf1"><div class="ttname"><a href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">eventqent::category</a></div><div class="ttdeci">int category</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01461">manager.c:1461</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga5da77ad82c423fcfee5299611ed6d7ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5da77ad82c423fcfee5299611ed6d7ce">&#9670;&nbsp;</a></span>handle_updates()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../df/d72/group__Group__AMI.html#ga6756b9f30781ed8ca8ce938e49ad9d92">error_type</a> handle_updates </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dfn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>helper function for action_updateconfig </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03819">3819</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00094">ast_begins_with()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02835">ast_category_append()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01335">ast_category_browse_filtered()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01478">ast_category_delete()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02847">ast_category_destroy()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01510">ast_category_empty()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01022">ast_category_get()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01367">ast_category_inherit()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01083">ast_category_insert()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02790">ast_category_new()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l00995">ast_category_new_template()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01362">ast_category_rename()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01656">ast_strsep()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00251">AST_STRSEP_STRIP</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01178">ast_variable_append()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01399">ast_variable_delete()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l00501">ast_variable_insert()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l01444">ast_variable_update()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01461">eventqent::category</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l04629">copy()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01424">FAILURE_ALLOCATION</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01425">FAILURE_NEWCAT</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01431">FAILURE_TEMPLATE</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01428">FAILURE_UPDATE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02315">match()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00096">ast_variable::object</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01420">UNKNOWN_ACTION</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01421">UNKNOWN_CATEGORY</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01423">UNSPECIFIED_ARGUMENT</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01422">UNSPECIFIED_CATEGORY</a>, <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04102">action_updateconfig()</a>.</p>
<div class="fragment"><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;{</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;   <span class="keywordtype">char</span> hdr[40];</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *action, *cat, *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, *<a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>, *line, *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>;</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *str1 = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(16), *str2 = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(16);</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/d72/group__Group__AMI.html#ga6756b9f30781ed8ca8ce938e49ad9d92">error_type</a> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = 0;</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; 100000; x++) {   <span class="comment">/* 100000 = the max number of allowed updates + 1 */</span></div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">object</span> = 0;</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;      <span class="keywordtype">char</span> *dupoptions;</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;      <span class="keywordtype">int</span> allowdups = 0;</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;      <span class="keywordtype">int</span> istemplate = 0;</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;      <span class="keywordtype">int</span> ignoreerror = 0;</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, inherit, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, catfilter, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;      <span class="keywordtype">char</span> *token;</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;      <span class="keywordtype">int</span> foundvar = 0;</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;      <span class="keywordtype">int</span> foundcat = 0;</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d7/db2/structast__category.html">ast_category</a> *category = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;      snprintf(hdr, <span class="keyword">sizeof</span>(hdr), <span class="stringliteral">&quot;Action-%06d&quot;</span>, x);</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;      action = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, hdr);</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(action))     <span class="comment">/* breaks the for loop if no action header */</span></div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;         <span class="keywordflow">break</span>;                     <span class="comment">/* this could cause problems if actions come in misnumbered */</span></div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;      snprintf(hdr, <span class="keyword">sizeof</span>(hdr), <span class="stringliteral">&quot;Cat-%06d&quot;</span>, x);</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;      cat = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, hdr);</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cat)) {      <span class="comment">/* every action needs a category */</span></div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;         result =  <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac327a21855ab9428a0a4ec3b2bc9e4da">UNSPECIFIED_CATEGORY</a>;</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;      }</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;      snprintf(hdr, <span class="keyword">sizeof</span>(hdr), <span class="stringliteral">&quot;Var-%06d&quot;</span>, x);</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;      var = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, hdr);</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;      snprintf(hdr, <span class="keyword">sizeof</span>(hdr), <span class="stringliteral">&quot;Value-%06d&quot;</span>, x);</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;      value = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, hdr);</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(value) &amp;&amp; *value == <span class="charliteral">&#39;&gt;&#39;</span>) {</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;         <span class="keywordtype">object</span> = 1;</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;         value++;</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;      }</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;      snprintf(hdr, <span class="keyword">sizeof</span>(hdr), <span class="stringliteral">&quot;Match-%06d&quot;</span>, x);</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;      match = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, hdr);</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;      snprintf(hdr, <span class="keyword">sizeof</span>(hdr), <span class="stringliteral">&quot;Line-%06d&quot;</span>, x);</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;      line = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, hdr);</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;      snprintf(hdr, <span class="keyword">sizeof</span>(hdr), <span class="stringliteral">&quot;Options-%06d&quot;</span>, x);</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;      options = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, hdr);</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(options)) {</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;         <span class="keywordtype">char</span> <a class="code" href="../../dc/df4/app__voicemail_8c.html#abe15777a07ac747625b018ac01f92531">copy</a>[strlen(options) + 1];</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;         strcpy(copy, options); <span class="comment">/* safe */</span></div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;         dupoptions = <a class="code" href="../../dc/df4/app__voicemail_8c.html#abe15777a07ac747625b018ac01f92531">copy</a>;</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;         <span class="keywordflow">while</span> ((token = <a class="code" href="../../d6/d90/strings_8h.html#aec193d64a6309c72d72e5e523ef6076e">ast_strsep</a>(&amp;dupoptions, <span class="charliteral">&#39;,&#39;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a6b26879ddbe135cabc07822b019b0b17ad5a39d9c273e14503b5edc1c8541ebe2">AST_STRSEP_STRIP</a>))) {</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;            <span class="keywordflow">if</span> (!strcasecmp(<span class="stringliteral">&quot;allowdups&quot;</span>, token)) {</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;               allowdups = 1;</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;            }</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;            <span class="keywordflow">if</span> (!strcasecmp(<span class="stringliteral">&quot;template&quot;</span>, token)) {</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;               istemplate = 1;</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;            }</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;            <span class="keywordflow">if</span> (!strcasecmp(<span class="stringliteral">&quot;ignoreerror&quot;</span>, token)) {</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;               ignoreerror = 1;</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;            }</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a>(token, <span class="stringliteral">&quot;inherit&quot;</span>)) {</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;               <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = <a class="code" href="../../d6/d90/strings_8h.html#aec193d64a6309c72d72e5e523ef6076e">ast_strsep</a>(&amp;token, <span class="charliteral">&#39;=&#39;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a6b26879ddbe135cabc07822b019b0b17ad5a39d9c273e14503b5edc1c8541ebe2">AST_STRSEP_STRIP</a>);</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;               c = <a class="code" href="../../d6/d90/strings_8h.html#aec193d64a6309c72d72e5e523ef6076e">ast_strsep</a>(&amp;token, <span class="charliteral">&#39;=&#39;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a6b26879ddbe135cabc07822b019b0b17ad5a39d9c273e14503b5edc1c8541ebe2">AST_STRSEP_STRIP</a>);</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;               <span class="keywordflow">if</span> (c) {</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;                  inherit = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(c);</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;               }</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;            }</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a>(token, <span class="stringliteral">&quot;catfilter&quot;</span>)) {</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;               <span class="keywordtype">char</span> *c = <a class="code" href="../../d6/d90/strings_8h.html#aec193d64a6309c72d72e5e523ef6076e">ast_strsep</a>(&amp;token, <span class="charliteral">&#39;=&#39;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a6b26879ddbe135cabc07822b019b0b17ad5a39d9c273e14503b5edc1c8541ebe2">AST_STRSEP_STRIP</a>);</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;               c = <a class="code" href="../../d6/d90/strings_8h.html#aec193d64a6309c72d72e5e523ef6076e">ast_strsep</a>(&amp;token, <span class="charliteral">&#39;=&#39;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a6b26879ddbe135cabc07822b019b0b17ad5a39d9c273e14503b5edc1c8541ebe2">AST_STRSEP_STRIP</a>);</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;               <span class="keywordflow">if</span> (c) {</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;                  catfilter = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(c);</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;               }</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;            }</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;         }</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;      }</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(action, <span class="stringliteral">&quot;newcat&quot;</span>)) {</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d7/db2/structast__category.html">ast_category</a> *<span class="keyword">template</span>;</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;         <span class="keywordtype">char</span> *tmpl_name = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;         <span class="keywordflow">if</span> (!allowdups) {</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a976052ba6bdad7e94e60cd4bc1c3f3b2">ast_category_get</a>(cfg, cat, <span class="stringliteral">&quot;TEMPLATES=include&quot;</span>)) {</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;               <span class="keywordflow">if</span> (ignoreerror) {</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;                  result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a662747e8d918f2d0ee7012d1d19731c9">FAILURE_NEWCAT</a>;   <span class="comment">/* already exist */</span></div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;               }</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;            }</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;         }</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;         <span class="keywordflow">if</span> (istemplate) {</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;            category = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aab4c6b70f2b1c373c5d299b8020b5a5d">ast_category_new_template</a>(cat, dfn, -1);</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;            category = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a662135d8d43ad08325882645dc5f8df3">ast_category_new</a>(cat, dfn, -1);</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;         }</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;         <span class="keywordflow">if</span> (!category) {</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec">FAILURE_ALLOCATION</a>;</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;         }</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;</div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;         <span class="keywordflow">if</span> (inherit) {</div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;            <span class="keywordflow">while</span> ((tmpl_name = <a class="code" href="../../d6/d90/strings_8h.html#aec193d64a6309c72d72e5e523ef6076e">ast_strsep</a>(&amp;inherit, <span class="charliteral">&#39;,&#39;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a6b26879ddbe135cabc07822b019b0b17ad5a39d9c273e14503b5edc1c8541ebe2">AST_STRSEP_STRIP</a>))) {</div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;               <span class="keywordflow">if</span> ((<span class="keyword">template</span> = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a976052ba6bdad7e94e60cd4bc1c3f3b2">ast_category_get</a>(cfg, tmpl_name, <span class="stringliteral">&quot;TEMPLATES=restrict&quot;</span>))) {</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a0c11a185ac14ffef84950e9cfdb8e0ee">ast_category_inherit</a>(category, <span class="keyword">template</span>)) {</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;                     result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec">FAILURE_ALLOCATION</a>;</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;                  }</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;                  <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a94ba5ab9fffe6dd755ee95db7ff2432f">ast_category_destroy</a>(category);</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;                  category = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;                  result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac22fdd80fd7df09af8999f6e429e29fb">FAILURE_TEMPLATE</a>; <span class="comment">/* template not found */</span></div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;               }</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;            }</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;         }</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;         <span class="keywordflow">if</span> (category != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(match)) {</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;               <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aa422e1cc73c1ac4db7ed8cd1a0e36e1a">ast_category_append</a>(cfg, category);</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a3e27edf18993cf1250e1a6a08c971d6d">ast_category_insert</a>(cfg, category, match)) {</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;                  <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a94ba5ab9fffe6dd755ee95db7ff2432f">ast_category_destroy</a>(category);</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;                  result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a662747e8d918f2d0ee7012d1d19731c9">FAILURE_NEWCAT</a>;</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;               }</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;            }</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;         }</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(action, <span class="stringliteral">&quot;renamecat&quot;</span>)) {</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(value)) {</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e">UNSPECIFIED_ARGUMENT</a>;</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;         }</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;         foundcat = 0;</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;         <span class="keywordflow">while</span> ((category = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a>(cfg, cat, category, catfilter))) {</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;            <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a2a5612ff8eb3595c1be1df75be4d870f">ast_category_rename</a>(category, value);</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;            foundcat = 1;</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;         }</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;         <span class="keywordflow">if</span> (!foundcat) {</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935">UNKNOWN_CATEGORY</a>;</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;         }</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(action, <span class="stringliteral">&quot;delcat&quot;</span>)) {</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;         foundcat = 0;</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;         <span class="keywordflow">while</span> ((category = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a>(cfg, cat, category, catfilter))) {</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;            category = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aeebe92aa21bea10f5d3f901a357a9806">ast_category_delete</a>(cfg, category);</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;            foundcat = 1;</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;         }</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;         <span class="keywordflow">if</span> (!foundcat &amp;&amp; !ignoreerror) {</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935">UNKNOWN_CATEGORY</a>;</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;         }</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(action, <span class="stringliteral">&quot;emptycat&quot;</span>)) {</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;         foundcat = 0;</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;         <span class="keywordflow">while</span> ((category = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a>(cfg, cat, category, catfilter))) {</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;            <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aa37456e447f230b9aa1a529658c4b1b1">ast_category_empty</a>(category);</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;            foundcat = 1;</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;         }</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;         <span class="keywordflow">if</span> (!foundcat) {</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935">UNKNOWN_CATEGORY</a>;</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;         }</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(action, <span class="stringliteral">&quot;update&quot;</span>)) {</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var)) {</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e">UNSPECIFIED_ARGUMENT</a>;</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;         }</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;         foundcat = 0;</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;         foundvar = 0;</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;         <span class="keywordflow">while</span> ((category = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a>(cfg, cat, category, catfilter))) {</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a61b77e9b543a66af82d7ac7d4d6b4ac8">ast_variable_update</a>(category, var, value, match, <span class="keywordtype">object</span>)) {</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;               foundvar = 1;</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;            }</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;            foundcat = 1;</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;         }</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;         <span class="keywordflow">if</span> (!foundcat) {</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935">UNKNOWN_CATEGORY</a>;</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;         }</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;         <span class="keywordflow">if</span> (!foundvar) {</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a60d08c34084a43b06ae50ccd693e0ba9">FAILURE_UPDATE</a>;</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;         }</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(action, <span class="stringliteral">&quot;delete&quot;</span>)) {</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;         <span class="keywordflow">if</span> ((<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var) &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(line))) {</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e">UNSPECIFIED_ARGUMENT</a>;</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;         }</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;         foundcat = 0;</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;         foundvar = 0;</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;         <span class="keywordflow">while</span> ((category = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a>(cfg, cat, category, catfilter))) {</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a387af9887266a55f3dcbbf3c12d4ccba">ast_variable_delete</a>(category, var, match, line)) {</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;               foundvar = 1;</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;            }</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;            foundcat = 1;</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;         }</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;         <span class="keywordflow">if</span> (!foundcat) {</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935">UNKNOWN_CATEGORY</a>;</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;         }</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;         <span class="keywordflow">if</span> (!foundvar &amp;&amp; !ignoreerror) {</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a60d08c34084a43b06ae50ccd693e0ba9">FAILURE_UPDATE</a>;</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;         }</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(action, <span class="stringliteral">&quot;append&quot;</span>)) {</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var)) {</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e">UNSPECIFIED_ARGUMENT</a>;</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;         }</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;         foundcat = 0;</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;         <span class="keywordflow">while</span> ((category = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a>(cfg, cat, category, catfilter))) {</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;            <span class="keywordflow">if</span> (!(v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(var, value, dfn))) {</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;               result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec">FAILURE_ALLOCATION</a>;</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;            }</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">object</span> || (match &amp;&amp; !strcasecmp(match, <span class="stringliteral">&quot;object&quot;</span>))) {</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;               v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a328cd221e75f4bd92e3ccf406f0d0441">object</a> = 1;</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;            }</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;            <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a57a3200e5b440d7135eaf0450ea559fe">ast_variable_append</a>(category, v);</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;            foundcat = 1;</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;         }</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;         <span class="keywordflow">if</span> (!foundcat) {</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935">UNKNOWN_CATEGORY</a>;</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;         }</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(action, <span class="stringliteral">&quot;insert&quot;</span>)) {</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(line)) {</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e">UNSPECIFIED_ARGUMENT</a>;</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;         }</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;         foundcat = 0;</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;         <span class="keywordflow">while</span> ((category = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a>(cfg, cat, category, catfilter))) {</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;            <span class="keywordflow">if</span> (!(v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(var, value, dfn))) {</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;               result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec">FAILURE_ALLOCATION</a>;</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;            }</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;            <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad12cd7f4f5efe4a460c1aaed0ac488d5">ast_variable_insert</a>(category, v, line);</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;            foundcat = 1;</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;         }</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;         <span class="keywordflow">if</span> (!foundcat) {</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;            result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935">UNKNOWN_CATEGORY</a>;</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;         }</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;      }</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Action-%06d: %s not handled\n&quot;</span>, x, action);</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;         result = <a class="code" href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ae16d79bf07a3994731f4ac1a6ece5ec8">UNKNOWN_ACTION</a>;</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;      }</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;   }</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(str1);</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(str2);</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;}</div><div class="ttc" id="include_2asterisk_2config_8h_html_a662135d8d43ad08325882645dc5f8df3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a662135d8d43ad08325882645dc5f8df3">ast_category_new</a></div><div class="ttdeci">struct ast_category * ast_category_new(const char *name, const char *in_file, int lineno)</div><div class="ttdoc">Create a category. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02790">extconf.c:2790</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad12cd7f4f5efe4a460c1aaed0ac488d5"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad12cd7f4f5efe4a460c1aaed0ac488d5">ast_variable_insert</a></div><div class="ttdeci">void ast_variable_insert(struct ast_category *category, struct ast_variable *variable, const char *line)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00501">main/config.c:501</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a387af9887266a55f3dcbbf3c12d4ccba"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a387af9887266a55f3dcbbf3c12d4ccba">ast_variable_delete</a></div><div class="ttdeci">int ast_variable_delete(struct ast_category *category, const char *variable, const char *match, const char *line)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01399">main/config.c:1399</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aeebe92aa21bea10f5d3f901a357a9806"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aeebe92aa21bea10f5d3f901a357a9806">ast_category_delete</a></div><div class="ttdeci">struct ast_category * ast_category_delete(struct ast_config *cfg, struct ast_category *category)</div><div class="ttdoc">Delete a category. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01478">main/config.c:1478</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92ac22fdd80fd7df09af8999f6e429e29fb"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac22fdd80fd7df09af8999f6e429e29fb">FAILURE_TEMPLATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01431">manager.c:1431</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92ae16d79bf07a3994731f4ac1a6ece5ec8"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ae16d79bf07a3994731f4ac1a6ece5ec8">UNKNOWN_ACTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01420">manager.c:1420</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga6756b9f30781ed8ca8ce938e49ad9d92"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga6756b9f30781ed8ca8ce938e49ad9d92">error_type</a></div><div class="ttdeci">error_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01419">manager.c:1419</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="structast__variable_html_a328cd221e75f4bd92e3ccf406f0d0441"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a328cd221e75f4bd92e3ccf406f0d0441">ast_variable::object</a></div><div class="ttdeci">int object</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00096">include/asterisk/config.h:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a9ead0cc806881cc3bd30af1bf0fd7935">UNKNOWN_CATEGORY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01421">manager.c:1421</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_abe15777a07ac747625b018ac01f92531"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#abe15777a07ac747625b018ac01f92531">copy</a></div><div class="ttdeci">static int copy(char *infile, char *outfile)</div><div class="ttdoc">Utility function to copy a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l04629">app_voicemail.c:4629</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a7dd0190efe1c61151a9dbab078bdb263"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a></div><div class="ttdeci">static int match(struct ast_sockaddr *addr, unsigned short callno, unsigned short dcallno, const struct chan_iax2_pvt *cur, int check_dcallno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l02315">chan_iax2.c:2315</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a94ba5ab9fffe6dd755ee95db7ff2432f"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a94ba5ab9fffe6dd755ee95db7ff2432f">ast_category_destroy</a></div><div class="ttdeci">void ast_category_destroy(struct ast_category *cat)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02847">extconf.c:2847</a></div></div>
<div class="ttc" id="structast__category_html"><div class="ttname"><a href="../../d7/db2/structast__category.html">ast_category</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00225">main/config.c:225</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a2488abe6cce4868efd018010c663a5fe"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a2488abe6cce4868efd018010c663a5fe">ast_category_browse_filtered</a></div><div class="ttdeci">struct ast_category * ast_category_browse_filtered(struct ast_config *config, const char *category_name, struct ast_category *prev, const char *filter)</div><div class="ttdoc">Browse categories with filters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01335">main/config.c:1335</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a0c11a185ac14ffef84950e9cfdb8e0ee"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a0c11a185ac14ffef84950e9cfdb8e0ee">ast_category_inherit</a></div><div class="ttdeci">int ast_category_inherit(struct ast_category *existing, const struct ast_category *base)</div><div class="ttdoc">Applies base (template) to category. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01367">main/config.c:1367</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a662747e8d918f2d0ee7012d1d19731c9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a662747e8d918f2d0ee7012d1d19731c9">FAILURE_NEWCAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01425">manager.c:1425</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a2a5612ff8eb3595c1be1df75be4d870f"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a2a5612ff8eb3595c1be1df75be4d870f">ast_category_rename</a></div><div class="ttdeci">void ast_category_rename(struct ast_category *cat, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01362">main/config.c:1362</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92a60d08c34084a43b06ae50ccd693e0ba9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92a60d08c34084a43b06ae50ccd693e0ba9">FAILURE_UPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01428">manager.c:1428</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="strings_8h_html_aec193d64a6309c72d72e5e523ef6076e"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aec193d64a6309c72d72e5e523ef6076e">ast_strsep</a></div><div class="ttdeci">char * ast_strsep(char **s, const char sep, uint32_t flags)</div><div class="ttdoc">Act like strsep but ignore separators inside quotes. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01656">main/utils.c:1656</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a3e27edf18993cf1250e1a6a08c971d6d"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a3e27edf18993cf1250e1a6a08c971d6d">ast_category_insert</a></div><div class="ttdeci">int ast_category_insert(struct ast_config *config, struct ast_category *cat, const char *match)</div><div class="ttdoc">Inserts new category. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01083">main/config.c:1083</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92acd7357cb5e0f2597cb189f9be397837e">UNSPECIFIED_ARGUMENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01423">manager.c:1423</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a61b77e9b543a66af82d7ac7d4d6b4ac8"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a61b77e9b543a66af82d7ac7d4d6b4ac8">ast_variable_update</a></div><div class="ttdeci">int ast_variable_update(struct ast_category *category, const char *variable, const char *value, const char *match, unsigned int object)</div><div class="ttdoc">Update variable value within a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01444">main/config.c:1444</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ab2a430239583b6fb63f3c055dbf651ec">FAILURE_ALLOCATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01424">manager.c:1424</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a57a3200e5b440d7135eaf0450ea559fe"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a57a3200e5b440d7135eaf0450ea559fe">ast_variable_append</a></div><div class="ttdeci">void ast_variable_append(struct ast_category *category, struct ast_variable *variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01178">extconf.c:1178</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aa422e1cc73c1ac4db7ed8cd1a0e36e1a"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aa422e1cc73c1ac4db7ed8cd1a0e36e1a">ast_category_append</a></div><div class="ttdeci">void ast_category_append(struct ast_config *config, struct ast_category *cat)</div><div class="ttdoc">Appends a category to a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02835">extconf.c:2835</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aab4c6b70f2b1c373c5d299b8020b5a5d"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aab4c6b70f2b1c373c5d299b8020b5a5d">ast_category_new_template</a></div><div class="ttdeci">struct ast_category * ast_category_new_template(const char *name, const char *in_file, int lineno)</div><div class="ttdoc">Create a category making it a template. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00995">main/config.c:995</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga6756b9f30781ed8ca8ce938e49ad9d92ac327a21855ab9428a0a4ec3b2bc9e4da"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga6756b9f30781ed8ca8ce938e49ad9d92ac327a21855ab9428a0a4ec3b2bc9e4da">UNSPECIFIED_CATEGORY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01422">manager.c:1422</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aa37456e447f230b9aa1a529658c4b1b1"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aa37456e447f230b9aa1a529658c4b1b1">ast_category_empty</a></div><div class="ttdeci">int ast_category_empty(struct ast_category *category)</div><div class="ttdoc">Removes and destroys all variables in a category. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01510">main/config.c:1510</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="strings_8h_html_a6b26879ddbe135cabc07822b019b0b17ad5a39d9c273e14503b5edc1c8541ebe2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6b26879ddbe135cabc07822b019b0b17ad5a39d9c273e14503b5edc1c8541ebe2">AST_STRSEP_STRIP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00251">strings.h:251</a></div></div>
<div class="ttc" id="strings_8h_html_ac51fa66c90ce950b248c9ff3e8c4e453"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a></div><div class="ttdeci">static int force_inline attribute_pure ast_begins_with(const char *str, const char *prefix)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00094">strings.h:94</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a976052ba6bdad7e94e60cd4bc1c3f3b2"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a976052ba6bdad7e94e60cd4bc1c3f3b2">ast_category_get</a></div><div class="ttdeci">struct ast_category * ast_category_get(const struct ast_config *config, const char *category_name, const char *filter)</div><div class="ttdoc">Retrieve a category if it exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l01022">main/config.c:1022</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga6dba42aa414d62585a0a662a5561ec73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6dba42aa414d62585a0a662a5561ec73">&#9670;&nbsp;</a></span>json_escape()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void json_escape </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>in</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The amount of space in out must be at least ( 2 * strlen(in) + 1 ) </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03721">3721</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">in</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03741">astman_append_json()</a>.</p>
<div class="fragment"><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;{</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;   <span class="keywordflow">for</span> (; *<a class="code" href="../../d6/d47/utils_2frame_8c.html#aca392a8d3941cd0740aef3ad92545d67">in</a>; <a class="code" href="../../d6/d47/utils_2frame_8c.html#aca392a8d3941cd0740aef3ad92545d67">in</a>++) {</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;      <span class="keywordflow">if</span> (*<a class="code" href="../../d6/d47/utils_2frame_8c.html#aca392a8d3941cd0740aef3ad92545d67">in</a> == <span class="charliteral">&#39;\\&#39;</span> || *<a class="code" href="../../d6/d47/utils_2frame_8c.html#aca392a8d3941cd0740aef3ad92545d67">in</a> == <span class="charliteral">&#39;\&quot;&#39;</span>) {</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;         *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>++ = <span class="charliteral">&#39;\\&#39;</span>;</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;      }</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;      *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>++ = *<a class="code" href="../../d6/d47/utils_2frame_8c.html#aca392a8d3941cd0740aef3ad92545d67">in</a>;</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;   }</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;   *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_aca392a8d3941cd0740aef3ad92545d67"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#aca392a8d3941cd0740aef3ad92545d67">in</a></div><div class="ttdeci">FILE * in</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga156e867b0f9693ddc7225adf19b6044b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga156e867b0f9693ddc7225adf19b6044b">&#9670;&nbsp;</a></span>log_action()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void log_action </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>action</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06568">6568</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00145">message::hdrcount</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00146">message::headers</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01478">manager_debug</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;{</div><div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;</div><div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d72/group__Group__AMI.html#ga4162d86f823ac8c40424a3ae4f41d5b9">manager_debug</a>) {</div><div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;   }</div><div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;</div><div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;   buf = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(256);</div><div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;   <span class="keywordflow">if</span> (!buf) {</div><div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;   }</div><div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;</div><div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">hdrcount</a>; ++x) {</div><div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[x], <span class="stringliteral">&quot;Secret&quot;</span>, 6)) {</div><div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;Secret: &lt;redacted from logging&gt;\n&quot;</span>);</div><div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;%s\n&quot;</span>, m-&gt;<a class="code" href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">headers</a>[x]);</div><div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;      }</div><div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;   }</div><div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;</div><div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;   <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;&lt;--- Examining AMI action: --&gt;\n%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf));</div><div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga4162d86f823ac8c40424a3ae4f41d5b9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga4162d86f823ac8c40424a3ae4f41d5b9">manager_debug</a></div><div class="ttdeci">static int manager_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01478">manager.c:1478</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structmessage_html_a81929bcaa1dcfa1abf47977385058cbe"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a81929bcaa1dcfa1abf47977385058cbe">message::headers</a></div><div class="ttdeci">const char * headers[AST_MAX_MANHEADERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00146">manager.h:146</a></div></div>
<div class="ttc" id="structmessage_html_a2337374fe8025cb750f52a316166aa6d"><div class="ttname"><a href="../../d8/d9e/structmessage.html#a2337374fe8025cb750f52a316166aa6d">message::hdrcount</a></div><div class="ttdeci">unsigned int hdrcount</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00145">manager.h:145</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga067ac83735089a590c082f49ab11800c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga067ac83735089a590c082f49ab11800c">&#9670;&nbsp;</a></span>man_do_variable_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a>* man_do_variable_value </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hdr_val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02862">2862</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00157">ast_skip_blanks()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l02911">astman_get_variables_order()</a>.</p>
<div class="fragment"><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;{</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(vars)[64];</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;   );</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;   hdr_val = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(hdr_val); <span class="comment">/* ignore leading spaces in the value */</span></div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(hdr_val);</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;   <span class="comment">/* Break the header value string into name=val pair items. */</span></div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc) {</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;      <span class="keywordtype">int</span> y;</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;      <span class="comment">/* Process each name=val pair item. */</span></div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;      <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc; y++) {</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *cur;</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;         <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;         <span class="keywordtype">char</span> *<a class="code" href="../../d5/d85/structval.html">val</a>;</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.vars[y]) {</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;         }</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;         var = val = <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.vars[y];</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;         <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;val, <span class="stringliteral">&quot;=&quot;</span>);</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;         <span class="comment">/* XXX We may wish to trim whitespace from the strings. */</span></div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;         <span class="keywordflow">if</span> (!val || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var)) {</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;         }</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;         <span class="comment">/* Create new variable list node and prepend it to the list. */</span></div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;         cur = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(var, val, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;         <span class="keywordflow">if</span> (cur) {</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;            cur-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a> = head;</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;            head = cur;</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;         }</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;      }</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;   }</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;   <span class="keywordflow">return</span> head;</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="strings_8h_html_af5693da955fa3bc73bc49c47b601fc7a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a></div><div class="ttdeci">char * ast_skip_blanks(const char *str)</div><div class="ttdoc">Gets a pointer to the first non-whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00157">strings.h:157</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2fce7bc082ac5dfa4ea3545b9f34cb66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2fce7bc082ac5dfa4ea3545b9f34cb66">&#9670;&nbsp;</a></span>manager_add_filter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../df/d72/group__Group__AMI.html#ga8d9eefd35c6b7be4f64a4b4dc9d92fd8">add_filter_result</a> manager_add_filter </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filter_pattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td>
          <td class="paramname"><em>whitefilters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td>
          <td class="paramname"><em>blackfilters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add an event filter to a manager session. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filter_pattern</td><td>Filter syntax to add, see below for syntax</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FILTER_ALLOC_FAILED Memory allocation failure </dd>
<dd>
FILTER_COMPILE_FAIL If the filter did not compile </dd>
<dd>
FILTER_SUCCESS Success</dd></dl>
<p>Filter will be used to match against each line of a manager event Filter can be any valid regular expression Filter can be a valid regular expression prefixed with !, which will add the filter as a black filter</p>
<p>Examples: </p><div class="fragment"><div class="line">filter_pattern = <span class="stringliteral">&quot;Event: Newchannel&quot;</span></div><div class="line">filter_pattern = <span class="stringliteral">&quot;Event: New.*&quot;</span></div><div class="line">filter_pattern = <span class="stringliteral">&quot;!Channel: DAHDI.*&quot;</span></div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06162">6162</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00409">ao2_t_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01547">ao2_t_link</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02192">event_filter_destructor()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01436">FILTER_ALLOC_FAILED</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01437">FILTER_COMPILE_FAIL</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01435">FILTER_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06111">action_filter()</a>.</p>
<div class="fragment"><div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;                                                                                                                                                     {</div><div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;   regex_t *new_filter = <a class="code" href="../../d5/da5/astobj2_8h.html#ad57326008c326db88dc36779741622b8">ao2_t_alloc</a>(<span class="keyword">sizeof</span>(*new_filter), <a class="code" href="../../df/d72/group__Group__AMI.html#ga60fd6fa59060c7bc3c3082275434a292">event_filter_destructor</a>, <span class="stringliteral">&quot;event_filter allocation&quot;</span>);</div><div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;   <span class="keywordtype">int</span> is_blackfilter;</div><div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;</div><div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;   <span class="keywordflow">if</span> (!new_filter) {</div><div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8ae465b39e083c5cc742896c9941dc5a6f">FILTER_ALLOC_FAILED</a>;</div><div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;   }</div><div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;</div><div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;   <span class="keywordflow">if</span> (filter_pattern[0] == <span class="charliteral">&#39;!&#39;</span>) {</div><div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;      is_blackfilter = 1;</div><div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;      filter_pattern++;</div><div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;      is_blackfilter = 0;</div><div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160;   }</div><div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;</div><div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;   <span class="keywordflow">if</span> (regcomp(new_filter, filter_pattern, REG_EXTENDED | REG_NOSUB)) {</div><div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(new_filter, -1, <span class="stringliteral">&quot;failed to make regex&quot;</span>);</div><div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a49c6dd43bada70d0caac95894f037660">FILTER_COMPILE_FAIL</a>;</div><div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;   }</div><div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;</div><div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;   <span class="keywordflow">if</span> (is_blackfilter) {</div><div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6db9934459f5cdc95cb3af77d55d426e">ao2_t_link</a>(blackfilters, new_filter, <span class="stringliteral">&quot;link new filter into black user container&quot;</span>);</div><div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6db9934459f5cdc95cb3af77d55d426e">ao2_t_link</a>(whitefilters, new_filter, <span class="stringliteral">&quot;link new filter into white user container&quot;</span>);</div><div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;   }</div><div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;</div><div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(new_filter, -1);</div><div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;</div><div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a11037e5e5ecf59d690cb6db101376995">FILTER_SUCCESS</a>;</div><div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad57326008c326db88dc36779741622b8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad57326008c326db88dc36779741622b8">ao2_t_alloc</a></div><div class="ttdeci">#define ao2_t_alloc(data_size, destructor_fn, debug_msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00409">astobj2.h:409</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a11037e5e5ecf59d690cb6db101376995"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a11037e5e5ecf59d690cb6db101376995">FILTER_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01435">manager.c:1435</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6db9934459f5cdc95cb3af77d55d426e"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6db9934459f5cdc95cb3af77d55d426e">ao2_t_link</a></div><div class="ttdeci">#define ao2_t_link(container, obj, tag)</div><div class="ttdoc">Add an object to a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01547">astobj2.h:1547</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a49c6dd43bada70d0caac95894f037660"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8a49c6dd43bada70d0caac95894f037660">FILTER_COMPILE_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01437">manager.c:1437</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga60fd6fa59060c7bc3c3082275434a292"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga60fd6fa59060c7bc3c3082275434a292">event_filter_destructor</a></div><div class="ttdeci">static void event_filter_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02192">manager.c:2192</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gga8d9eefd35c6b7be4f64a4b4dc9d92fd8ae465b39e083c5cc742896c9941dc5a6f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gga8d9eefd35c6b7be4f64a4b4dc9d92fd8ae465b39e083c5cc742896c9941dc5a6f">FILTER_ALLOC_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01436">manager.c:1436</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga3cf68c6aee41a7989e352a9da265890a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3cf68c6aee41a7989e352a9da265890a">&#9670;&nbsp;</a></span>manager_default_msg_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void manager_default_msg_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01838">1838</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01835">any_manager_listeners</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00492">ast_manager_event_blob::event_flags</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00496">ast_manager_event_blob::extra_fields</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00493">ast_manager_event_blob::manager_event</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01832">manager_event_sessions</a>, <a class="el" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00251">stasis_message_can_be_ami()</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00224">stasis_message_to_ami()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09053">manager_subscriptions_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;{</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *ev;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d79/stasis_8h.html#aff3b891ecf151757d9977e167c9a3b07">stasis_message_can_be_ami</a>(message)) {</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      <span class="comment">/* Not an AMI message; disregard */</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;   }</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;   sessions = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(mgr_sessions);</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d72/group__Group__AMI.html#ga8548bdd40d19dc12b6e3709694d5dbd2">any_manager_listeners</a>(sessions)) {</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;      <span class="comment">/* Nobody is listening */</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sessions);</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;   }</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;   ev = <a class="code" href="../../dd/d79/stasis_8h.html#adf8e3a27e9995917eb0bc043acd1316a">stasis_message_to_ami</a>(message);</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;   <span class="keywordflow">if</span> (!ev) {</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      <span class="comment">/* Conversion failure */</span></div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sessions);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;   }</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gaf6298ba3cc972f7d6b8c42cff93cb8a8">manager_event_sessions</a>(sessions, ev-&gt;<a class="code" href="../../dd/d96/structast__manager__event__blob.html#a57602302e7b352ebd03ca187acfcffd4">event_flags</a>, ev-&gt;<a class="code" href="../../dd/d96/structast__manager__event__blob.html#aab469824ac975744e02d0eefe868f82f">manager_event</a>,</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span>, ev-&gt;<a class="code" href="../../dd/d96/structast__manager__event__blob.html#a32dae0134e7c44c45bb610ab1a152521">extra_fields</a>);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ev, -1);</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sessions);</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;}</div><div class="ttc" id="structast__manager__event__blob_html"><div class="ttname"><a href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a></div><div class="ttdoc">Struct containing info for an AMI event to send out. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00491">manager.h:491</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga8548bdd40d19dc12b6e3709694d5dbd2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga8548bdd40d19dc12b6e3709694d5dbd2">any_manager_listeners</a></div><div class="ttdeci">#define any_manager_listeners(sessions)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01835">manager.c:1835</a></div></div>
<div class="ttc" id="structast__manager__event__blob_html_a32dae0134e7c44c45bb610ab1a152521"><div class="ttname"><a href="../../dd/d96/structast__manager__event__blob.html#a32dae0134e7c44c45bb610ab1a152521">ast_manager_event_blob::extra_fields</a></div><div class="ttdeci">const ast_string_field extra_fields</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00496">manager.h:496</a></div></div>
<div class="ttc" id="chan__skinny_8c_html_a61aa7b9ad75e714f776c1f82bcc3359f"><div class="ttname"><a href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a></div><div class="ttdeci">static struct sessions sessions</div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="structast__manager__event__blob_html_aab469824ac975744e02d0eefe868f82f"><div class="ttname"><a href="../../dd/d96/structast__manager__event__blob.html#aab469824ac975744e02d0eefe868f82f">ast_manager_event_blob::manager_event</a></div><div class="ttdeci">const char * manager_event</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00493">manager.h:493</a></div></div>
<div class="ttc" id="stasis_8h_html_adf8e3a27e9995917eb0bc043acd1316a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#adf8e3a27e9995917eb0bc043acd1316a">stasis_message_to_ami</a></div><div class="ttdeci">struct ast_manager_event_blob * stasis_message_to_ami(struct stasis_message *msg)</div><div class="ttdoc">Build the AMI representation of the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00224">stasis_message.c:224</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__manager__event__blob_html_a57602302e7b352ebd03ca187acfcffd4"><div class="ttname"><a href="../../dd/d96/structast__manager__event__blob.html#a57602302e7b352ebd03ca187acfcffd4">ast_manager_event_blob::event_flags</a></div><div class="ttdeci">int event_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00492">manager.h:492</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaf6298ba3cc972f7d6b8c42cff93cb8a8"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaf6298ba3cc972f7d6b8c42cff93cb8a8">manager_event_sessions</a></div><div class="ttdeci">#define manager_event_sessions(sessions, category, event, contents,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01832">manager.c:1832</a></div></div>
<div class="ttc" id="stasis_8h_html_aff3b891ecf151757d9977e167c9a3b07"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aff3b891ecf151757d9977e167c9a3b07">stasis_message_can_be_ami</a></div><div class="ttdeci">int stasis_message_can_be_ami(struct stasis_message *msg)</div><div class="ttdoc">Determine if the given message can be converted to AMI. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00251">stasis_message.c:251</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga6ede61db764903806db0e5334d07c010"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6ede61db764903806db0e5334d07c010">&#9670;&nbsp;</a></span>manager_displayconnects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int manager_displayconnects </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d05/structmansession__session.html">mansession_session</a> *&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get displayconnects config option. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>manager session to get parameter from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>displayconnects config option value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02322">2322</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">a</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01650">ast_manager_user::displayconnects</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02305">get_manager_by_name_locked()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08793">print_event_instance()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01592">mansession_session::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04393">action_login()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07031">purge_sessions()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06937">session_do()</a>.</p>
<div class="fragment"><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;{</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d8a/structast__manager__user.html">ast_manager_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;   <span class="keywordtype">int</span> ret = 0;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;   <span class="keywordflow">if</span> ((user = <a class="code" href="../../df/d72/group__Group__AMI.html#ga14bd65f2096d29973dfd999d71e88eee">get_manager_by_name_locked</a>(session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>))) {</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;      ret = user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a3eb98988184ea3f302e9a914eb9641e5">displayconnects</a>;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;   }</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;}</div><div class="ttc" id="structmansession__session_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">mansession_session::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01592">manager.c:1592</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga14bd65f2096d29973dfd999d71e88eee"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga14bd65f2096d29973dfd999d71e88eee">get_manager_by_name_locked</a></div><div class="ttdeci">static struct ast_manager_user * get_manager_by_name_locked(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02305">manager.c:2305</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__manager__user_html"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html">ast_manager_user</a></div><div class="ttdoc">user descriptor, as read from the config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01644">manager.c:1644</a></div></div>
<div class="ttc" id="structusers_html"><div class="ttname"><a href="../../d8/d63/structusers.html">users</a></div><div class="ttdoc">list of users found in the config file </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00915">app_voicemail.c:915</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__manager__user_html_a3eb98988184ea3f302e9a914eb9641e5"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a3eb98988184ea3f302e9a914eb9641e5">ast_manager_user::displayconnects</a></div><div class="ttdeci">int displayconnects</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01650">manager.c:1650</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gab9ef7d18dc9c448d132687dadcdf8a01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab9ef7d18dc9c448d132687dadcdf8a01">&#9670;&nbsp;</a></span>manager_generic_msg_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void manager_generic_msg_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01869">1869</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01835">any_manager_listeners</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00322">ast_json_integer_get()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00397">ast_json_object_get()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00273">ast_json_string_get()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00279">AST_LOG_WARNING</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01821">ast_manager_str_from_json_object()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d4/d05/json_8h_source.html#l01025">ast_json_payload::json</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01832">manager_event_sessions</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09053">manager_subscriptions_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;{</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/de9/structast__json__payload.html">ast_json_payload</a> *payload;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;   <span class="keywordtype">int</span> class_type;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *<a class="code" href="../../df/d7d/structevent.html">event</a>;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *event_buffer;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;   sessions = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(mgr_sessions);</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d72/group__Group__AMI.html#ga8548bdd40d19dc12b6e3709694d5dbd2">any_manager_listeners</a>(sessions)) {</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      <span class="comment">/* Nobody is listening */</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sessions);</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;   }</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;   payload = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;   class_type = <a class="code" href="../../d4/d05/json_8h.html#ad20fdcbab1ed5c078284a687cced2877">ast_json_integer_get</a>(<a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(payload-&gt;<a class="code" href="../../d9/de9/structast__json__payload.html#a9cf488298469ae63ef947653d7ff9bab">json</a>, <span class="stringliteral">&quot;class_type&quot;</span>));</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;   type = <a class="code" href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a>(<a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(payload-&gt;<a class="code" href="../../d9/de9/structast__json__payload.html#a9cf488298469ae63ef947653d7ff9bab">json</a>, <span class="stringliteral">&quot;type&quot;</span>));</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;   <span class="keyword">event</span> = <a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(payload-&gt;<a class="code" href="../../d9/de9/structast__json__payload.html#a9cf488298469ae63ef947653d7ff9bab">json</a>, <span class="stringliteral">&quot;event&quot;</span>);</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;   event_buffer = <a class="code" href="../../df/d72/group__Group__AMI.html#ga2a7a78b91c9ba54f89c9b5a9e7435027">ast_manager_str_from_json_object</a>(event, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;   <span class="keywordflow">if</span> (!event_buffer) {</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a>, <span class="stringliteral">&quot;Error while creating payload for event %s\n&quot;</span>, type);</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sessions);</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;   }</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gaf6298ba3cc972f7d6b8c42cff93cb8a8">manager_event_sessions</a>(sessions, class_type, type,</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(event_buffer));</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(event_buffer);</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sessions);</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga8548bdd40d19dc12b6e3709694d5dbd2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga8548bdd40d19dc12b6e3709694d5dbd2">any_manager_listeners</a></div><div class="ttdeci">#define any_manager_listeners(sessions)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01835">manager.c:1835</a></div></div>
<div class="ttc" id="chan__skinny_8c_html_a61aa7b9ad75e714f776c1f82bcc3359f"><div class="ttname"><a href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a></div><div class="ttdeci">static struct sessions sessions</div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__json__payload_html"><div class="ttname"><a href="../../d9/de9/structast__json__payload.html">ast_json_payload</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l01024">json.h:1024</a></div></div>
<div class="ttc" id="logger_8h_html_a2878d83e36d91850732bad997524e45e"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a></div><div class="ttdeci">#define AST_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00279">logger.h:279</a></div></div>
<div class="ttc" id="structast__json__payload_html_a9cf488298469ae63ef947653d7ff9bab"><div class="ttname"><a href="../../d9/de9/structast__json__payload.html#a9cf488298469ae63ef947653d7ff9bab">ast_json_payload::json</a></div><div class="ttdeci">struct ast_json * json</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l01025">json.h:1025</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga2a7a78b91c9ba54f89c9b5a9e7435027"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga2a7a78b91c9ba54f89c9b5a9e7435027">ast_manager_str_from_json_object</a></div><div class="ttdeci">struct ast_str * ast_manager_str_from_json_object(struct ast_json *blob, key_exclusion_cb exclusion_cb)</div><div class="ttdoc">Convert a JSON object into an AMI compatible string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01821">manager.c:1821</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="json_8h_html_a6772fcee88746a9d4f6ec6f240b76dd0"><div class="ttname"><a href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a></div><div class="ttdeci">const char * ast_json_string_get(const struct ast_json *string)</div><div class="ttdoc">Get the value of a JSON string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00273">json.c:273</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaf6298ba3cc972f7d6b8c42cff93cb8a8"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaf6298ba3cc972f7d6b8c42cff93cb8a8">manager_event_sessions</a></div><div class="ttdeci">#define manager_event_sessions(sessions, category, event, contents,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01832">manager.c:1832</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="json_8h_html_a53707225c3bf831e263245c6e3800676"><div class="ttname"><a href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a></div><div class="ttdeci">struct ast_json * ast_json_object_get(struct ast_json *object, const char *key)</div><div class="ttdoc">Get a field from a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00397">json.c:397</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="json_8h_html_ad20fdcbab1ed5c078284a687cced2877"><div class="ttname"><a href="../../d4/d05/json_8h.html#ad20fdcbab1ed5c078284a687cced2877">ast_json_integer_get</a></div><div class="ttdeci">intmax_t ast_json_integer_get(const struct ast_json *integer)</div><div class="ttdoc">Get the value from a JSON integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00322">json.c:322</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga7e2a5d3d8ab0739e46d14c8cd369178a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7e2a5d3d8ab0739e46d14c8cd369178a">&#9670;&nbsp;</a></span>manager_json_array_with_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void manager_json_array_with_key </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d45/manager_8h.html#a8c8f2d8718ba98dc22b6615489fa2f8e">key_exclusion_cb</a>&#160;</td>
          <td class="paramname"><em>exclusion_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01755">1755</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01780">manager_json_to_ast_str()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l01780">manager_json_to_ast_str()</a>.</p>
<div class="fragment"><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;{</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *key_str = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(64);</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;key_str, 0, <span class="stringliteral">&quot;%s(%zu)&quot;</span>, key, index);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga1f451671d833c6be7e65d2fe89042e1f">manager_json_to_ast_str</a>(obj, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(key_str),</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            res, exclusion_cb);</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga1f451671d833c6be7e65d2fe89042e1f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga1f451671d833c6be7e65d2fe89042e1f">manager_json_to_ast_str</a></div><div class="ttdeci">static void manager_json_to_ast_str(struct ast_json *obj, const char *key, struct ast_str **res, key_exclusion_cb exclusion_cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01780">manager.c:1780</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gac2fe93293795ad443c10ac77cbcaee14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac2fe93293795ad443c10ac77cbcaee14">&#9670;&nbsp;</a></span>manager_json_obj_with_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void manager_json_obj_with_key </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>parent_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d45/manager_8h.html#a8c8f2d8718ba98dc22b6615489fa2f8e">key_exclusion_cb</a>&#160;</td>
          <td class="paramname"><em>exclusion_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01765">1765</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01780">manager_json_to_ast_str()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l01780">manager_json_to_ast_str()</a>.</p>
<div class="fragment"><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;{</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;   <span class="keywordflow">if</span> (parent_key) {</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *key_str = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(64);</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;key_str, 0, <span class="stringliteral">&quot;%s/%s&quot;</span>, parent_key, key);</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga1f451671d833c6be7e65d2fe89042e1f">manager_json_to_ast_str</a>(obj, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(key_str),</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;               res, exclusion_cb);</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;   }</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga1f451671d833c6be7e65d2fe89042e1f">manager_json_to_ast_str</a>(obj, key, res, exclusion_cb);</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga1f451671d833c6be7e65d2fe89042e1f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga1f451671d833c6be7e65d2fe89042e1f">manager_json_to_ast_str</a></div><div class="ttdeci">static void manager_json_to_ast_str(struct ast_json *obj, const char *key, struct ast_str **res, key_exclusion_cb exclusion_cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01780">manager.c:1780</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1f451671d833c6be7e65d2fe89042e1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1f451671d833c6be7e65d2fe89042e1f">&#9670;&nbsp;</a></span>manager_json_to_ast_str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void manager_json_to_ast_str </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d45/manager_8h.html#a8c8f2d8718ba98dc22b6615489fa2f8e">key_exclusion_cb</a>&#160;</td>
          <td class="paramname"><em>exclusion_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01780">1780</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d05/json_8h_source.html#l00165">AST_JSON_ARRAY</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00360">ast_json_array_get()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00356">ast_json_array_size()</a>, <a class="el" href="../../d4/d05/json_8h_source.html#l00164">AST_JSON_OBJECT</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00429">ast_json_object_iter()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00441">ast_json_object_iter_key()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00437">ast_json_object_iter_next()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00445">ast_json_object_iter_value()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00078">ast_json_typeof()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01755">manager_json_array_with_key()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01765">manager_json_obj_with_key()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01730">manager_json_value_str_append()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l01821">ast_manager_str_from_json_object()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01755">manager_json_array_with_key()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01765">manager_json_obj_with_key()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01730">manager_json_value_str_append()</a>.</p>
<div class="fragment"><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;{</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d77/structast__json__iter.html">ast_json_iter</a> *i;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;   <span class="comment">/* If obj or res is not given, just return */</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;   <span class="keywordflow">if</span> (!obj || !res) {</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;   }</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;   <span class="keywordflow">if</span> (!*res &amp;&amp; !(*res = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(1024))) {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;   }</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;   <span class="keywordflow">if</span> (exclusion_cb &amp;&amp; key &amp;&amp; exclusion_cb(key)) {</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;   }</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/json_8h.html#a29ebd5b57ed7446feeaedda2bf813c76">ast_json_typeof</a>(obj) != <a class="code" href="../../d4/d05/json_8h.html#aa75b709b69e8f05cc4796ccfa8d9d110a46eda9921019c489bb9952624c06e2a8">AST_JSON_OBJECT</a> &amp;&amp;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;       <a class="code" href="../../d4/d05/json_8h.html#a29ebd5b57ed7446feeaedda2bf813c76">ast_json_typeof</a>(obj) != <a class="code" href="../../d4/d05/json_8h.html#aa75b709b69e8f05cc4796ccfa8d9d110a0b94a7db79a79dcc6d9e8263b3690a98">AST_JSON_ARRAY</a>) {</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga9d8b1e607e3cbb90e48fe541c7b5cf11">manager_json_value_str_append</a>(obj, key, res);</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;   }</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/json_8h.html#a29ebd5b57ed7446feeaedda2bf813c76">ast_json_typeof</a>(obj) == <a class="code" href="../../d4/d05/json_8h.html#aa75b709b69e8f05cc4796ccfa8d9d110a0b94a7db79a79dcc6d9e8263b3690a98">AST_JSON_ARRAY</a>) {</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;      <span class="keywordtype">size_t</span> j;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d4/d05/json_8h.html#afa6ea445bb95ea8408059af15173b374">ast_json_array_size</a>(obj); ++j) {</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga7e2a5d3d8ab0739e46d14c8cd369178a">manager_json_array_with_key</a>(<a class="code" href="../../d4/d05/json_8h.html#a34a0e726391c4b59c534b107a3ee3310">ast_json_array_get</a>(obj, j),</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                      key, j, res, exclusion_cb);</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      }</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;   }</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;   <span class="keywordflow">for</span> (i = <a class="code" href="../../d4/d05/json_8h.html#aa4ff5e6cc56531fde9d797e439e40e28">ast_json_object_iter</a>(obj); i;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        i = <a class="code" href="../../d4/d05/json_8h.html#a9b4db2feb727c1b4f28347c31b4d79b7">ast_json_object_iter_next</a>(obj, i)) {</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2fe93293795ad443c10ac77cbcaee14">manager_json_obj_with_key</a>(<a class="code" href="../../d4/d05/json_8h.html#ab3f0d4f9fccd51c964a9501c74669880">ast_json_object_iter_value</a>(i),</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                 <a class="code" href="../../d4/d05/json_8h.html#ada31ff6e981b88be9f99eaa4774c3d32">ast_json_object_iter_key</a>(i),</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                 key, res, exclusion_cb);</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;   }</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;}</div><div class="ttc" id="json_8h_html_aa75b709b69e8f05cc4796ccfa8d9d110a46eda9921019c489bb9952624c06e2a8"><div class="ttname"><a href="../../d4/d05/json_8h.html#aa75b709b69e8f05cc4796ccfa8d9d110a46eda9921019c489bb9952624c06e2a8">AST_JSON_OBJECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l00164">json.h:164</a></div></div>
<div class="ttc" id="structast__json__iter_html"><div class="ttname"><a href="../../d3/d77/structast__json__iter.html">ast_json_iter</a></div><div class="ttdoc">Iterator for JSON object key/values. </div></div>
<div class="ttc" id="json_8h_html_aa4ff5e6cc56531fde9d797e439e40e28"><div class="ttname"><a href="../../d4/d05/json_8h.html#aa4ff5e6cc56531fde9d797e439e40e28">ast_json_object_iter</a></div><div class="ttdeci">struct ast_json_iter * ast_json_object_iter(struct ast_json *object)</div><div class="ttdoc">Get an iterator pointing to the first field in a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00429">json.c:429</a></div></div>
<div class="ttc" id="json_8h_html_ab3f0d4f9fccd51c964a9501c74669880"><div class="ttname"><a href="../../d4/d05/json_8h.html#ab3f0d4f9fccd51c964a9501c74669880">ast_json_object_iter_value</a></div><div class="ttdeci">struct ast_json * ast_json_object_iter_value(struct ast_json_iter *iter)</div><div class="ttdoc">Get the value from an iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00445">json.c:445</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga9d8b1e607e3cbb90e48fe541c7b5cf11"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga9d8b1e607e3cbb90e48fe541c7b5cf11">manager_json_value_str_append</a></div><div class="ttdeci">static void manager_json_value_str_append(struct ast_json *value, const char *key, struct ast_str **res)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01730">manager.c:1730</a></div></div>
<div class="ttc" id="json_8h_html_ada31ff6e981b88be9f99eaa4774c3d32"><div class="ttname"><a href="../../d4/d05/json_8h.html#ada31ff6e981b88be9f99eaa4774c3d32">ast_json_object_iter_key</a></div><div class="ttdeci">const char * ast_json_object_iter_key(struct ast_json_iter *iter)</div><div class="ttdoc">Get the key from an iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00441">json.c:441</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga7e2a5d3d8ab0739e46d14c8cd369178a"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga7e2a5d3d8ab0739e46d14c8cd369178a">manager_json_array_with_key</a></div><div class="ttdeci">static void manager_json_array_with_key(struct ast_json *obj, const char *key, size_t index, struct ast_str **res, key_exclusion_cb exclusion_cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01755">manager.c:1755</a></div></div>
<div class="ttc" id="json_8h_html_aa75b709b69e8f05cc4796ccfa8d9d110a0b94a7db79a79dcc6d9e8263b3690a98"><div class="ttname"><a href="../../d4/d05/json_8h.html#aa75b709b69e8f05cc4796ccfa8d9d110a0b94a7db79a79dcc6d9e8263b3690a98">AST_JSON_ARRAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l00165">json.h:165</a></div></div>
<div class="ttc" id="json_8h_html_a29ebd5b57ed7446feeaedda2bf813c76"><div class="ttname"><a href="../../d4/d05/json_8h.html#a29ebd5b57ed7446feeaedda2bf813c76">ast_json_typeof</a></div><div class="ttdeci">enum ast_json_type ast_json_typeof(const struct ast_json *value)</div><div class="ttdoc">Get the type of value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00078">json.c:78</a></div></div>
<div class="ttc" id="json_8h_html_afa6ea445bb95ea8408059af15173b374"><div class="ttname"><a href="../../d4/d05/json_8h.html#afa6ea445bb95ea8408059af15173b374">ast_json_array_size</a></div><div class="ttdeci">size_t ast_json_array_size(const struct ast_json *array)</div><div class="ttdoc">Get the size of a JSON array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00356">json.c:356</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2fe93293795ad443c10ac77cbcaee14"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2fe93293795ad443c10ac77cbcaee14">manager_json_obj_with_key</a></div><div class="ttdeci">static void manager_json_obj_with_key(struct ast_json *obj, const char *key, const char *parent_key, struct ast_str **res, key_exclusion_cb exclusion_cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01765">manager.c:1765</a></div></div>
<div class="ttc" id="json_8h_html_a34a0e726391c4b59c534b107a3ee3310"><div class="ttname"><a href="../../d4/d05/json_8h.html#a34a0e726391c4b59c534b107a3ee3310">ast_json_array_get</a></div><div class="ttdeci">struct ast_json * ast_json_array_get(const struct ast_json *array, size_t index)</div><div class="ttdoc">Get an element from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00360">json.c:360</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="json_8h_html_a9b4db2feb727c1b4f28347c31b4d79b7"><div class="ttname"><a href="../../d4/d05/json_8h.html#a9b4db2feb727c1b4f28347c31b4d79b7">ast_json_object_iter_next</a></div><div class="ttdeci">struct ast_json_iter * ast_json_object_iter_next(struct ast_json *object, struct ast_json_iter *iter)</div><div class="ttdoc">Get the next iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00437">json.c:437</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga9d8b1e607e3cbb90e48fe541c7b5cf11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9d8b1e607e3cbb90e48fe541c7b5cf11">&#9670;&nbsp;</a></span>manager_json_value_str_append()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void manager_json_value_str_append </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01730">1730</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d05/json_8h_source.html#l00170">AST_JSON_FALSE</a>, <a class="el" href="../../d4/d05/json_8h_source.html#l00167">AST_JSON_INTEGER</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00322">ast_json_integer_get()</a>, <a class="el" href="../../d4/d05/json_8h_source.html#l00166">AST_JSON_STRING</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00273">ast_json_string_get()</a>, <a class="el" href="../../d4/d05/json_8h_source.html#l00169">AST_JSON_TRUE</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00078">ast_json_typeof()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01780">manager_json_to_ast_str()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l01780">manager_json_to_ast_str()</a>.</p>
<div class="fragment"><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;{</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d4/d05/json_8h.html#a29ebd5b57ed7446feeaedda2bf813c76">ast_json_typeof</a>(value)) {</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d05/json_8h.html#aa75b709b69e8f05cc4796ccfa8d9d110a07e50d02cf780dadbf0341d60fbfe2c7">AST_JSON_STRING</a>:</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(res, 0, <span class="stringliteral">&quot;%s: %s\r\n&quot;</span>, key, <a class="code" href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a>(value));</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d05/json_8h.html#aa75b709b69e8f05cc4796ccfa8d9d110abf0021fff98de0d1e3460c4d4add5625">AST_JSON_INTEGER</a>:</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(res, 0, <span class="stringliteral">&quot;%s: %jd\r\n&quot;</span>, key, <a class="code" href="../../d4/d05/json_8h.html#ad20fdcbab1ed5c078284a687cced2877">ast_json_integer_get</a>(value));</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d05/json_8h.html#aa75b709b69e8f05cc4796ccfa8d9d110ae6797350c14c8d420e446232c97d4d67">AST_JSON_TRUE</a>:</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(res, 0, <span class="stringliteral">&quot;%s: True\r\n&quot;</span>, key);</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d05/json_8h.html#aa75b709b69e8f05cc4796ccfa8d9d110a6c4fc9aa144bf07d9b3fa9f1a824263f">AST_JSON_FALSE</a>:</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(res, 0, <span class="stringliteral">&quot;%s: False\r\n&quot;</span>, key);</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(res, 0, <span class="stringliteral">&quot;%s: \r\n&quot;</span>, key);</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;   }</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;}</div><div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="json_8h_html_aa75b709b69e8f05cc4796ccfa8d9d110ae6797350c14c8d420e446232c97d4d67"><div class="ttname"><a href="../../d4/d05/json_8h.html#aa75b709b69e8f05cc4796ccfa8d9d110ae6797350c14c8d420e446232c97d4d67">AST_JSON_TRUE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l00169">json.h:169</a></div></div>
<div class="ttc" id="json_8h_html_a6772fcee88746a9d4f6ec6f240b76dd0"><div class="ttname"><a href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a></div><div class="ttdeci">const char * ast_json_string_get(const struct ast_json *string)</div><div class="ttdoc">Get the value of a JSON string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00273">json.c:273</a></div></div>
<div class="ttc" id="json_8h_html_aa75b709b69e8f05cc4796ccfa8d9d110a07e50d02cf780dadbf0341d60fbfe2c7"><div class="ttname"><a href="../../d4/d05/json_8h.html#aa75b709b69e8f05cc4796ccfa8d9d110a07e50d02cf780dadbf0341d60fbfe2c7">AST_JSON_STRING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l00166">json.h:166</a></div></div>
<div class="ttc" id="json_8h_html_aa75b709b69e8f05cc4796ccfa8d9d110a6c4fc9aa144bf07d9b3fa9f1a824263f"><div class="ttname"><a href="../../d4/d05/json_8h.html#aa75b709b69e8f05cc4796ccfa8d9d110a6c4fc9aa144bf07d9b3fa9f1a824263f">AST_JSON_FALSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l00170">json.h:170</a></div></div>
<div class="ttc" id="json_8h_html_a29ebd5b57ed7446feeaedda2bf813c76"><div class="ttname"><a href="../../d4/d05/json_8h.html#a29ebd5b57ed7446feeaedda2bf813c76">ast_json_typeof</a></div><div class="ttdeci">enum ast_json_type ast_json_typeof(const struct ast_json *value)</div><div class="ttdoc">Get the type of value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00078">json.c:78</a></div></div>
<div class="ttc" id="json_8h_html_aa75b709b69e8f05cc4796ccfa8d9d110abf0021fff98de0d1e3460c4d4add5625"><div class="ttname"><a href="../../d4/d05/json_8h.html#aa75b709b69e8f05cc4796ccfa8d9d110abf0021fff98de0d1e3460c4d4add5625">AST_JSON_INTEGER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l00167">json.h:167</a></div></div>
<div class="ttc" id="json_8h_html_ad20fdcbab1ed5c078284a687cced2877"><div class="ttname"><a href="../../d4/d05/json_8h.html#ad20fdcbab1ed5c078284a687cced2877">ast_json_integer_get</a></div><div class="ttdeci">intmax_t ast_json_integer_get(const struct ast_json *integer)</div><div class="ttdoc">Get the value from a JSON integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00322">json.c:322</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gac730b751a77b99e3dd3eb4b1880ba933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac730b751a77b99e3dd3eb4b1880ba933">&#9670;&nbsp;</a></span>manager_modulecheck()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int manager_modulecheck </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manager function to check if module is loaded. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06470">6470</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/d96/loader_8c_source.html#l02653">ast_module_check()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, and <a class="el" href="../../db/db2/asterisk_8h_source.html#l00040">PATH_MAX</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;{</div><div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *module = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Module&quot;</span>);</div><div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;   <span class="keywordtype">char</span> idText[256];</div><div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;   <span class="keywordtype">char</span> filename[<a class="code" href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];</div><div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;   <span class="keywordtype">char</span> *cut;</div><div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;</div><div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(filename, module, <span class="keyword">sizeof</span>(filename));</div><div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160;   <span class="keywordflow">if</span> ((cut = strchr(filename, <span class="charliteral">&#39;.&#39;</span>))) {</div><div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;      *cut = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;      cut = filename + strlen(filename);</div><div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;   }</div><div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;   snprintf(cut, (<span class="keyword">sizeof</span>(filename) - strlen(filename)) - 1, <span class="stringliteral">&quot;.so&quot;</span>);</div><div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;**** ModuleCheck .so file %s\n&quot;</span>, filename);</div><div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;   res = <a class="code" href="../../d5/d16/module_8h.html#a15f7e2f25f4d0c60de6cca164232a6d4">ast_module_check</a>(filename);</div><div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Module not loaded&quot;</span>);</div><div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;   }</div><div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;</div><div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;      snprintf(idText, <span class="keyword">sizeof</span>(idText), <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;      idText[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;   }</div><div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Response: Success\r\n%s&quot;</span>, idText);</div><div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Version: %s\r\n\r\n&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="module_8h_html_a15f7e2f25f4d0c60de6cca164232a6d4"><div class="ttname"><a href="../../d5/d16/module_8h.html#a15f7e2f25f4d0c60de6cca164232a6d4">ast_module_check</a></div><div class="ttdeci">int ast_module_check(const char *name)</div><div class="ttdoc">Check if module with the name given is loaded. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d96/loader_8c_source.html#l02653">loader.c:2653</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="asterisk_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00040">asterisk.h:40</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga7c11fab0bce951155235b8e7a2013e1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7c11fab0bce951155235b8e7a2013e1d">&#9670;&nbsp;</a></span>manager_moduleload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int manager_moduleload </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06505">6505</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00062">AST_FORCE_SOFT</a>, <a class="el" href="../../d3/d96/loader_8c_source.html#l01819">ast_load_resource()</a>, <a class="el" href="../../d3/d96/loader_8c_source.html#l01562">ast_module_reload()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00113">AST_MODULE_RELOAD_ERROR</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00114">AST_MODULE_RELOAD_IN_PROGRESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00112">AST_MODULE_RELOAD_NOT_FOUND</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00116">AST_MODULE_RELOAD_NOT_IMPLEMENTED</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00111">AST_MODULE_RELOAD_QUEUED</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00110">AST_MODULE_RELOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00115">AST_MODULE_RELOAD_UNINITIALIZED</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d3/d96/loader_8c_source.html#l01229">ast_unload_resource()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160;{</div><div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *module = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Module&quot;</span>);</div><div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *loadtype = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;LoadType&quot;</span>);</div><div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;</div><div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;   <span class="keywordflow">if</span> (!loadtype || strlen(loadtype) == 0) {</div><div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Incomplete ModuleLoad action.&quot;</span>);</div><div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;   }</div><div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;   <span class="keywordflow">if</span> ((!module || strlen(module) == 0) &amp;&amp; strcasecmp(loadtype, <span class="stringliteral">&quot;reload&quot;</span>) != 0) {</div><div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Need module name&quot;</span>);</div><div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;   }</div><div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;</div><div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(loadtype, <span class="stringliteral">&quot;load&quot;</span>)) {</div><div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;      res = <a class="code" href="../../d5/d16/module_8h.html#a841766995d4e10ebb3950b10aab97d9e">ast_load_resource</a>(module);</div><div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;      <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Could not load module.&quot;</span>);</div><div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Module loaded.&quot;</span>);</div><div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;      }</div><div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(loadtype, <span class="stringliteral">&quot;unload&quot;</span>)) {</div><div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;      res = <a class="code" href="../../d5/d16/module_8h.html#a52f6615f305951a0d61adc6e61920c34">ast_unload_resource</a>(module, <a class="code" href="../../d5/d16/module_8h.html#ac034ec04e9dd255a0d39bdfcb73113b9a10bb7955de423b36c75f645de78d2f39">AST_FORCE_SOFT</a>);</div><div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;      <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Could not unload module.&quot;</span>);</div><div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Module unloaded.&quot;</span>);</div><div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;      }</div><div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(loadtype, <span class="stringliteral">&quot;reload&quot;</span>)) {</div><div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;      <span class="comment">/* TODO: Unify the ack/error messages here with action_reload */</span></div><div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(module)) {</div><div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;         <span class="keyword">enum</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7">ast_module_reload_result</a> reload_res = <a class="code" href="../../d5/d16/module_8h.html#af9e3b4ae730e43312e00fcbc1707588b">ast_module_reload</a>(module);</div><div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;</div><div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;         <span class="keywordflow">switch</span> (reload_res) {</div><div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7ac0be7032578c68902708da91e5e7d71a">AST_MODULE_RELOAD_NOT_FOUND</a>:</div><div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such module.&quot;</span>);</div><div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7aae470b102da613cbd14c611b36e75b11">AST_MODULE_RELOAD_NOT_IMPLEMENTED</a>:</div><div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Module does not support reload action.&quot;</span>);</div><div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7aa719b0c0d0c58b358deaf9933a8dd3f6">AST_MODULE_RELOAD_ERROR</a>:</div><div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;An unknown error occurred&quot;</span>);</div><div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7a2a1ae659f41755f987f33586cb43fade">AST_MODULE_RELOAD_IN_PROGRESS</a>:</div><div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;A reload is in progress&quot;</span>);</div><div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7ad06be99930a02b142bf370e2627849be">AST_MODULE_RELOAD_UNINITIALIZED</a>:</div><div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Module not initialized&quot;</span>);</div><div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7a3c7e5ccf0a567b17833b1e60ba387abf">AST_MODULE_RELOAD_QUEUED</a>:</div><div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7a9696155a2eb5969139965fbc5b8a66ed">AST_MODULE_RELOAD_SUCCESS</a>:</div><div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;            <span class="comment">/* Treat a queued request as success */</span></div><div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Module reloaded.&quot;</span>);</div><div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;         }</div><div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;         <a class="code" href="../../d5/d16/module_8h.html#af9e3b4ae730e43312e00fcbc1707588b">ast_module_reload</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);   <span class="comment">/* Reload all modules */</span></div><div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;All modules reloaded&quot;</span>);</div><div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;      }</div><div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Incomplete ModuleLoad action.&quot;</span>);</div><div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;}</div><div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7ad06be99930a02b142bf370e2627849be"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7ad06be99930a02b142bf370e2627849be">AST_MODULE_RELOAD_UNINITIALIZED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00115">module.h:115</a></div></div>
<div class="ttc" id="module_8h_html_a841766995d4e10ebb3950b10aab97d9e"><div class="ttname"><a href="../../d5/d16/module_8h.html#a841766995d4e10ebb3950b10aab97d9e">ast_load_resource</a></div><div class="ttdeci">enum ast_module_load_result ast_load_resource(const char *resource_name)</div><div class="ttdoc">Load a module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d96/loader_8c_source.html#l01819">loader.c:1819</a></div></div>
<div class="ttc" id="module_8h_html_ac034ec04e9dd255a0d39bdfcb73113b9a10bb7955de423b36c75f645de78d2f39"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac034ec04e9dd255a0d39bdfcb73113b9a10bb7955de423b36c75f645de78d2f39">AST_FORCE_SOFT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00062">module.h:62</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7ac0be7032578c68902708da91e5e7d71a"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7ac0be7032578c68902708da91e5e7d71a">AST_MODULE_RELOAD_NOT_FOUND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00112">module.h:112</a></div></div>
<div class="ttc" id="module_8h_html_af9e3b4ae730e43312e00fcbc1707588b"><div class="ttname"><a href="../../d5/d16/module_8h.html#af9e3b4ae730e43312e00fcbc1707588b">ast_module_reload</a></div><div class="ttdeci">enum ast_module_reload_result ast_module_reload(const char *name)</div><div class="ttdoc">Reload asterisk modules. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d96/loader_8c_source.html#l01562">loader.c:1562</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7">ast_module_reload_result</a></div><div class="ttdeci">ast_module_reload_result</div><div class="ttdoc">Possible return types for ast_module_reload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00109">module.h:109</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7a3c7e5ccf0a567b17833b1e60ba387abf"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7a3c7e5ccf0a567b17833b1e60ba387abf">AST_MODULE_RELOAD_QUEUED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00111">module.h:111</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7a9696155a2eb5969139965fbc5b8a66ed"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7a9696155a2eb5969139965fbc5b8a66ed">AST_MODULE_RELOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00110">module.h:110</a></div></div>
<div class="ttc" id="module_8h_html_a52f6615f305951a0d61adc6e61920c34"><div class="ttname"><a href="../../d5/d16/module_8h.html#a52f6615f305951a0d61adc6e61920c34">ast_unload_resource</a></div><div class="ttdeci">int ast_unload_resource(const char *resource_name, enum ast_module_unload_mode)</div><div class="ttdoc">Unload a module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d96/loader_8c_source.html#l01229">loader.c:1229</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7a2a1ae659f41755f987f33586cb43fade"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7a2a1ae659f41755f987f33586cb43fade">AST_MODULE_RELOAD_IN_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00114">module.h:114</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7aa719b0c0d0c58b358deaf9933a8dd3f6"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7aa719b0c0d0c58b358deaf9933a8dd3f6">AST_MODULE_RELOAD_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00113">module.h:113</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7aae470b102da613cbd14c611b36e75b11"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7aae470b102da613cbd14c611b36e75b11">AST_MODULE_RELOAD_NOT_IMPLEMENTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00116">module.h:116</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga06909116cc55a2b89ea554e74be04ab6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06909116cc55a2b89ea554e74be04ab6">&#9670;&nbsp;</a></span>manager_state_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int manager_state_cb </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d4c/structast__state__cb__info.html">ast_state_cb_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07288">7288</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d94/pbx_8c_source.html#l03126">ast_extension_state2str()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04141">ast_get_hint()</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00091">AST_HINT_UPDATE_DEVICE</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00093">AST_HINT_UPDATE_PRESENCE</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00103">ast_presence_state2str()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00072">EVENT_FLAG_CALL</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00104">ast_state_cb_info::exten_state</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00248">manager_event</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00108">ast_state_cb_info::presence_message</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00106">ast_state_cb_info::presence_state</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00107">ast_state_cb_info::presence_subtype</a>, and <a class="el" href="../../db/de0/pbx_8h_source.html#l00103">ast_state_cb_info::reason</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;{</div><div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;   <span class="comment">/* Notify managers of change */</span></div><div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;   <span class="keywordtype">char</span> hint[512];</div><div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;</div><div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;   hint[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#ac778ac642def88a06e5d59e11a964c43">ast_get_hint</a>(hint, <span class="keyword">sizeof</span>(hint), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>);</div><div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;</div><div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;   <span class="keywordflow">switch</span>(info-&gt;<a class="code" href="../../df/d4c/structast__state__cb__info.html#a3a7a902ef9b30b78b595eeee1485090f">reason</a>) {</div><div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/de0/pbx_8h.html#ab077da615e93c9e88ce539bef23f82e6a2e89bd60b1752d920f58a70164607189">AST_HINT_UPDATE_DEVICE</a>:</div><div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;      <a class="code" href="../../db/d45/manager_8h.html#a1ef0ee0044dbbeb4c3a5abc6c046b208">manager_event</a>(<a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <span class="stringliteral">&quot;ExtensionStatus&quot;</span>,</div><div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;         <span class="stringliteral">&quot;Exten: %s\r\n&quot;</span></div><div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;         <span class="stringliteral">&quot;Context: %s\r\n&quot;</span></div><div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;         <span class="stringliteral">&quot;Hint: %s\r\n&quot;</span></div><div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;         <span class="stringliteral">&quot;Status: %d\r\n&quot;</span></div><div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;         <span class="stringliteral">&quot;StatusText: %s\r\n&quot;</span>,</div><div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;         <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>,</div><div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;         <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>,</div><div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;         hint,</div><div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;         info-&gt;<a class="code" href="../../df/d4c/structast__state__cb__info.html#a6f3d8aa9a90b701e81dad4cc4a56be67">exten_state</a>,</div><div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a3261603753916b98888a5a5fc1d505c3">ast_extension_state2str</a>(info-&gt;<a class="code" href="../../df/d4c/structast__state__cb__info.html#a6f3d8aa9a90b701e81dad4cc4a56be67">exten_state</a>));</div><div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/de0/pbx_8h.html#ab077da615e93c9e88ce539bef23f82e6a72b959e4767d5a4c644c6232122f5ad9">AST_HINT_UPDATE_PRESENCE</a>:</div><div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;      <a class="code" href="../../db/d45/manager_8h.html#a1ef0ee0044dbbeb4c3a5abc6c046b208">manager_event</a>(<a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <span class="stringliteral">&quot;PresenceStatus&quot;</span>,</div><div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;         <span class="stringliteral">&quot;Exten: %s\r\n&quot;</span></div><div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;         <span class="stringliteral">&quot;Context: %s\r\n&quot;</span></div><div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;         <span class="stringliteral">&quot;Hint: %s\r\n&quot;</span></div><div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;         <span class="stringliteral">&quot;Status: %s\r\n&quot;</span></div><div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;         <span class="stringliteral">&quot;Subtype: %s\r\n&quot;</span></div><div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;         <span class="stringliteral">&quot;Message: %s\r\n&quot;</span>,</div><div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;         <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>,</div><div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;         <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>,</div><div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;         hint,</div><div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160;         <a class="code" href="../../d6/dd7/presencestate_8h.html#aec78c2b072d51416200d34bdd06827a7">ast_presence_state2str</a>(info-&gt;<a class="code" href="../../df/d4c/structast__state__cb__info.html#adbd2034543f941d4cf84f129faee9a0b">presence_state</a>),</div><div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;         info-&gt;<a class="code" href="../../df/d4c/structast__state__cb__info.html#a662bbfb7890c12ee79a4ef1ea5f42a0c">presence_subtype</a>,</div><div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;         info-&gt;<a class="code" href="../../df/d4c/structast__state__cb__info.html#afb0bd6506905ab8d17df1d8bb3294fc5">presence_message</a>);</div><div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;   }</div><div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;}</div><div class="ttc" id="pbx_8h_html_ac778ac642def88a06e5d59e11a964c43"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ac778ac642def88a06e5d59e11a964c43">ast_get_hint</a></div><div class="ttdeci">int ast_get_hint(char *hint, int hintsize, char *name, int namesize, struct ast_channel *c, const char *context, const char *exten)</div><div class="ttdoc">If an extension hint exists, return non-zero. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04141">pbx.c:4141</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__state__cb__info_html_afb0bd6506905ab8d17df1d8bb3294fc5"><div class="ttname"><a href="../../df/d4c/structast__state__cb__info.html#afb0bd6506905ab8d17df1d8bb3294fc5">ast_state_cb_info::presence_message</a></div><div class="ttdeci">const char * presence_message</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00108">pbx.h:108</a></div></div>
<div class="ttc" id="structast__state__cb__info_html_a3a7a902ef9b30b78b595eeee1485090f"><div class="ttname"><a href="../../df/d4c/structast__state__cb__info.html#a3a7a902ef9b30b78b595eeee1485090f">ast_state_cb_info::reason</a></div><div class="ttdeci">enum ast_state_cb_update_reason reason</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00103">pbx.h:103</a></div></div>
<div class="ttc" id="manager_8h_html_ab5db3cc603d7e798d61cb4cd94fbb4e2"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a></div><div class="ttdeci">#define EVENT_FLAG_CALL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00072">manager.h:72</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__state__cb__info_html_a6f3d8aa9a90b701e81dad4cc4a56be67"><div class="ttname"><a href="../../df/d4c/structast__state__cb__info.html#a6f3d8aa9a90b701e81dad4cc4a56be67">ast_state_cb_info::exten_state</a></div><div class="ttdeci">enum ast_extension_states exten_state</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00104">pbx.h:104</a></div></div>
<div class="ttc" id="structast__state__cb__info_html_adbd2034543f941d4cf84f129faee9a0b"><div class="ttname"><a href="../../df/d4c/structast__state__cb__info.html#adbd2034543f941d4cf84f129faee9a0b">ast_state_cb_info::presence_state</a></div><div class="ttdeci">enum ast_presence_state presence_state</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00106">pbx.h:106</a></div></div>
<div class="ttc" id="pbx_8h_html_a3261603753916b98888a5a5fc1d505c3"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a3261603753916b98888a5a5fc1d505c3">ast_extension_state2str</a></div><div class="ttdeci">const char * ast_extension_state2str(int extension_state)</div><div class="ttdoc">Return string representation of the state of an extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l03126">pbx.c:3126</a></div></div>
<div class="ttc" id="structast__state__cb__info_html_a662bbfb7890c12ee79a4ef1ea5f42a0c"><div class="ttname"><a href="../../df/d4c/structast__state__cb__info.html#a662bbfb7890c12ee79a4ef1ea5f42a0c">ast_state_cb_info::presence_subtype</a></div><div class="ttdeci">const char * presence_subtype</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00107">pbx.h:107</a></div></div>
<div class="ttc" id="pbx_8h_html_ab077da615e93c9e88ce539bef23f82e6a72b959e4767d5a4c644c6232122f5ad9"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ab077da615e93c9e88ce539bef23f82e6a72b959e4767d5a4c644c6232122f5ad9">AST_HINT_UPDATE_PRESENCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00093">pbx.h:93</a></div></div>
<div class="ttc" id="pbx_8h_html_ab077da615e93c9e88ce539bef23f82e6a2e89bd60b1752d920f58a70164607189"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ab077da615e93c9e88ce539bef23f82e6a2e89bd60b1752d920f58a70164607189">AST_HINT_UPDATE_DEVICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00091">pbx.h:91</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="manager_8h_html_a1ef0ee0044dbbeb4c3a5abc6c046b208"><div class="ttname"><a href="../../db/d45/manager_8h.html#a1ef0ee0044dbbeb4c3a5abc6c046b208">manager_event</a></div><div class="ttdeci">#define manager_event(category, event, contents,...)</div><div class="ttdoc">External routines may send asterisk manager events this way. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00248">manager.h:248</a></div></div>
<div class="ttc" id="presencestate_8h_html_aec78c2b072d51416200d34bdd06827a7"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#aec78c2b072d51416200d34bdd06827a7">ast_presence_state2str</a></div><div class="ttdeci">const char * ast_presence_state2str(enum ast_presence_state state)</div><div class="ttdoc">Convert presence state to text string for output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00103">presencestate.c:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga3e8f2893c887ee3b8acd8ecd151135b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3e8f2893c887ee3b8acd8ecd151135b0">&#9670;&nbsp;</a></span>mansession_cmp_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mansession_cmp_fn </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02262">2262</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01592">mansession_session::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;{</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d05/structmansession__session.html">mansession_session</a> *s = obj;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = arg;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;   <span class="keywordflow">return</span> !strcasecmp(s-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>, str) ? <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> : 0;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;}</div><div class="ttc" id="structmansession__session_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">mansession_session::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01592">manager.c:1592</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structmansession__session_html"><div class="ttname"><a href="../../df/d05/structmansession__session.html">mansession_session</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01581">manager.c:1581</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa418c48f68fe0253bf35346878d7b919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa418c48f68fe0253bf35346878d7b919">&#9670;&nbsp;</a></span>mansession_get_transport()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3">ast_transport</a> mansession_get_transport </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03279">3279</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00061">AST_TRANSPORT_TCP</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00062">AST_TRANSPORT_TLS</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00152">ast_tcptls_session_instance::parent</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01628">mansession::tcptls_session</a>, and <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00134">ast_tcptls_session_args::tls_cfg</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03360">report_auth_success()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03310">report_failed_acl()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03443">report_failed_challenge_response()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03335">report_inval_password()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03285">report_invalid_user()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03414">report_req_bad_format()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03385">report_req_not_allowed()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03473">report_session_limit()</a>.</p>
<div class="fragment"><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;{</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;   <span class="keywordflow">return</span> s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a>-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">parent</a>-&gt;<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#aeb4a21e3ae033a326cc9dfd20a7ab074">tls_cfg</a> ? <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3ac5d05bd6daa774e40db98ff06a91bc0a">AST_TRANSPORT_TLS</a> :</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3acd1be5fd1357a3d7f56ec62fc01bdc20">AST_TRANSPORT_TCP</a>;</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;}</div><div class="ttc" id="structast__tcptls__session__instance_html_ac7fc8bed1104b4557f6a183ae1155b75"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">ast_tcptls_session_instance::parent</a></div><div class="ttdeci">struct ast_tcptls_session_args * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00152">tcptls.h:152</a></div></div>
<div class="ttc" id="structmansession_html_affd6ea965816bd0ac40c18d7b5de8de6"><div class="ttname"><a href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">mansession::tcptls_session</a></div><div class="ttdeci">struct ast_tcptls_session_instance * tcptls_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01628">manager.c:1628</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3acd1be5fd1357a3d7f56ec62fc01bdc20"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3acd1be5fd1357a3d7f56ec62fc01bdc20">AST_TRANSPORT_TCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00061">netsock2.h:61</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3ac5d05bd6daa774e40db98ff06a91bc0a"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3ac5d05bd6daa774e40db98ff06a91bc0a">AST_TRANSPORT_TLS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00062">netsock2.h:62</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_aeb4a21e3ae033a326cc9dfd20a7ab074"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#aeb4a21e3ae033a326cc9dfd20a7ab074">ast_tcptls_session_args::tls_cfg</a></div><div class="ttdeci">struct ast_tls_config * tls_cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00134">tcptls.h:134</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2cbbc87c25cdd3f6346961d3ed40b2fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2cbbc87c25cdd3f6346961d3ed40b2fb">&#9670;&nbsp;</a></span>mansession_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mansession_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lock the 'mansession' structure. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03251">3251</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01632">mansession::lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04442">action_challenge()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06852">do_message()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06835">handle_parse_error()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;{</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;}</div><div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="structmansession_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d2/d8a/structmansession.html#adf04f66344e3fb0a6f6a69bf39d19902">mansession::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01632">manager.c:1632</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga06b330b2a545662f8130f086604660ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06b330b2a545662f8130f086604660ec">&#9670;&nbsp;</a></span>mansession_unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mansession_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unlock the 'mansession' structure. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03257">3257</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01632">mansession::lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04442">action_challenge()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06852">do_message()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06835">handle_parse_error()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;{</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;}</div><div class="ttc" id="structmansession_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d2/d8a/structmansession.html#adf04f66344e3fb0a6f6a69bf39d19902">mansession::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01632">manager.c:1632</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gad40bb264275fb647b2044b47ac533dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad40bb264275fb647b2044b47ac533dad">&#9670;&nbsp;</a></span>match_filter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int match_filter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>eventdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06193">6193</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01741">ao2_t_callback_data</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06092">blackfilter_cmp_fn()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01600">mansession_session::blackfilters</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01478">manager_debug</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06078">whitefilter_cmp_fn()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01599">mansession_session::whitefilters</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04206">action_waitevent()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06227">process_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;{</div><div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = 0;</div><div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;</div><div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#ga4162d86f823ac8c40424a3ae4f41d5b9">manager_debug</a>) {</div><div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;&lt;-- Examining AMI event: --&gt;\n%s\n&quot;</span>, eventdata);</div><div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Examining AMI event:\n%s\n&quot;</span>, eventdata);</div><div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;   }</div><div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">whitefilters</a>) &amp;&amp; !<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">blackfilters</a>)) {</div><div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;      <span class="keywordflow">return</span> 1; <span class="comment">/* no filtering means match all */</span></div><div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">whitefilters</a>) &amp;&amp; !<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">blackfilters</a>)) {</div><div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;      <span class="comment">/* white filters only: implied black all filter processed first, then white filters */</span></div><div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ab55d227245c39181ce1a4e4f013cc898">ao2_t_callback_data</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">whitefilters</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga21a9d344c805f9450b254b4fc0f5afcd">whitefilter_cmp_fn</a>, eventdata, &amp;result, <span class="stringliteral">&quot;find filter in session filter container&quot;</span>);</div><div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">whitefilters</a>) &amp;&amp; <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">blackfilters</a>)) {</div><div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;      <span class="comment">/* black filters only: implied white all filter processed first, then black filters */</span></div><div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ab55d227245c39181ce1a4e4f013cc898">ao2_t_callback_data</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">blackfilters</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga033f5d6043ef1b5fcb6da1aa6a70f53d">blackfilter_cmp_fn</a>, eventdata, &amp;result, <span class="stringliteral">&quot;find filter in session filter container&quot;</span>);</div><div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;      <span class="comment">/* white and black filters: implied black all filter processed first, then white filters, and lastly black filters */</span></div><div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ab55d227245c39181ce1a4e4f013cc898">ao2_t_callback_data</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">whitefilters</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga21a9d344c805f9450b254b4fc0f5afcd">whitefilter_cmp_fn</a>, eventdata, &amp;result, <span class="stringliteral">&quot;find filter in session filter container&quot;</span>);</div><div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;      <span class="keywordflow">if</span> (result) {</div><div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;         result = 0;</div><div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#ab55d227245c39181ce1a4e4f013cc898">ao2_t_callback_data</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">blackfilters</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga033f5d6043ef1b5fcb6da1aa6a70f53d">blackfilter_cmp_fn</a>, eventdata, &amp;result, <span class="stringliteral">&quot;find filter in session filter container&quot;</span>);</div><div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;      }</div><div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;   }</div><div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;</div><div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="structmansession__session_html_ab5e2ca60735be55e922d5b24f3f83133"><div class="ttname"><a href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">mansession_session::blackfilters</a></div><div class="ttdeci">struct ao2_container * blackfilters</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01600">manager.c:1600</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmansession__session_html_a646b71d97b81fea37dbbc9fd33dc5f4a"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">mansession_session::whitefilters</a></div><div class="ttdeci">struct ao2_container * whitefilters</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01599">manager.c:1599</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga033f5d6043ef1b5fcb6da1aa6a70f53d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga033f5d6043ef1b5fcb6da1aa6a70f53d">blackfilter_cmp_fn</a></div><div class="ttdeci">static int blackfilter_cmp_fn(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l06092">manager.c:6092</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga4162d86f823ac8c40424a3ae4f41d5b9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga4162d86f823ac8c40424a3ae4f41d5b9">manager_debug</a></div><div class="ttdeci">static int manager_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01478">manager.c:1478</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab55d227245c39181ce1a4e4f013cc898"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab55d227245c39181ce1a4e4f013cc898">ao2_t_callback_data</a></div><div class="ttdeci">#define ao2_t_callback_data(container, flags, cb_fn, arg, data, tag)</div><div class="ttdoc">ao2_callback_data() is a generic function that applies cb_fn() to all objects in a container...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01741">astobj2.h:1741</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga21a9d344c805f9450b254b4fc0f5afcd"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga21a9d344c805f9450b254b4fc0f5afcd">whitefilter_cmp_fn</a></div><div class="ttdeci">static int whitefilter_cmp_fn(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l06078">manager.c:6078</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga12892108a64ff8588dbcd69a4bdf654e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga12892108a64ff8588dbcd69a4bdf654e">&#9670;&nbsp;</a></span>print_event_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void print_event_instance </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d46/structast__xml__doc__item.html">ast_xml_doc_item</a> *&#160;</td>
          <td class="paramname"><em>instance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l08793">8793</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00062">ast_xml_doc_item::arguments</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l00242">ast_xmldoc_printable()</a>, <a class="el" href="../../db/d45/term_8h_source.html#l00057">COLOR_MAGENTA</a>, <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00066">ast_xml_doc_item::description</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00060">ast_xml_doc_item::seealso</a>, <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00064">synopsis</a>, <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00064">ast_xml_doc_item::synopsis</a>, <a class="el" href="../../d1/d99/xmldoc_8h_source.html#l00058">ast_xml_doc_item::syntax</a>, and <a class="el" href="../../d5/de5/term_8c_source.html#l00184">term_color()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08830">handle_manager_show_event()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02340">handle_showmancmd()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02322">manager_displayconnects()</a>.</p>
<div class="fragment"><div class="line"><a name="l08795"></a><span class="lineno"> 8795</span>&#160;{</div><div class="line"><a name="l08796"></a><span class="lineno"> 8796</span>&#160;   <span class="keywordtype">char</span> syntax_title[64], description_title[64], synopsis_title[64], seealso_title[64], arguments_title[64];</div><div class="line"><a name="l08797"></a><span class="lineno"> 8797</span>&#160;</div><div class="line"><a name="l08798"></a><span class="lineno"> 8798</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(synopsis_title, <span class="stringliteral">&quot;[Synopsis]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, 40);</div><div class="line"><a name="l08799"></a><span class="lineno"> 8799</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(description_title, <span class="stringliteral">&quot;[Description]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, 40);</div><div class="line"><a name="l08800"></a><span class="lineno"> 8800</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(syntax_title, <span class="stringliteral">&quot;[Syntax]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, 40);</div><div class="line"><a name="l08801"></a><span class="lineno"> 8801</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(seealso_title, <span class="stringliteral">&quot;[See Also]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, 40);</div><div class="line"><a name="l08802"></a><span class="lineno"> 8802</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(arguments_title, <span class="stringliteral">&quot;[Arguments]\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, 0, 40);</div><div class="line"><a name="l08803"></a><span class="lineno"> 8803</span>&#160;</div><div class="line"><a name="l08804"></a><span class="lineno"> 8804</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(instance-&gt;<a class="code" href="../../d8/d46/structast__xml__doc__item.html#afd4fa183745fe419aadcb64ff25df76f">synopsis</a>))) {</div><div class="line"><a name="l08805"></a><span class="lineno"> 8805</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a> = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(instance-&gt;<a class="code" href="../../d8/d46/structast__xml__doc__item.html#afd4fa183745fe419aadcb64ff25df76f">synopsis</a>), 1);</div><div class="line"><a name="l08806"></a><span class="lineno"> 8806</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s%s\n\n&quot;</span>, synopsis_title, synopsis);</div><div class="line"><a name="l08807"></a><span class="lineno"> 8807</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(synopsis);</div><div class="line"><a name="l08808"></a><span class="lineno"> 8808</span>&#160;   }</div><div class="line"><a name="l08809"></a><span class="lineno"> 8809</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(instance-&gt;<a class="code" href="../../d8/d46/structast__xml__doc__item.html#a01b39be4dd41eeda5dff6bd9835cdebe">syntax</a>))) {</div><div class="line"><a name="l08810"></a><span class="lineno"> 8810</span>&#160;      <span class="keywordtype">char</span> *syntax = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(instance-&gt;<a class="code" href="../../d8/d46/structast__xml__doc__item.html#a01b39be4dd41eeda5dff6bd9835cdebe">syntax</a>), 1);</div><div class="line"><a name="l08811"></a><span class="lineno"> 8811</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s%s\n\n&quot;</span>, syntax_title, syntax);</div><div class="line"><a name="l08812"></a><span class="lineno"> 8812</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(syntax);</div><div class="line"><a name="l08813"></a><span class="lineno"> 8813</span>&#160;   }</div><div class="line"><a name="l08814"></a><span class="lineno"> 8814</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(instance-&gt;<a class="code" href="../../d8/d46/structast__xml__doc__item.html#abf4247f8de03d593ac8e288d354d6aa9">description</a>))) {</div><div class="line"><a name="l08815"></a><span class="lineno"> 8815</span>&#160;      <span class="keywordtype">char</span> *description = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(instance-&gt;<a class="code" href="../../d8/d46/structast__xml__doc__item.html#abf4247f8de03d593ac8e288d354d6aa9">description</a>), 1);</div><div class="line"><a name="l08816"></a><span class="lineno"> 8816</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s%s\n\n&quot;</span>, description_title, description);</div><div class="line"><a name="l08817"></a><span class="lineno"> 8817</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(description);</div><div class="line"><a name="l08818"></a><span class="lineno"> 8818</span>&#160;   }</div><div class="line"><a name="l08819"></a><span class="lineno"> 8819</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(instance-&gt;<a class="code" href="../../d8/d46/structast__xml__doc__item.html#a6b8fc14a9dd623efaf1a93949341bd4e">arguments</a>))) {</div><div class="line"><a name="l08820"></a><span class="lineno"> 8820</span>&#160;      <span class="keywordtype">char</span> *arguments = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(instance-&gt;<a class="code" href="../../d8/d46/structast__xml__doc__item.html#a6b8fc14a9dd623efaf1a93949341bd4e">arguments</a>), 1);</div><div class="line"><a name="l08821"></a><span class="lineno"> 8821</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s%s\n\n&quot;</span>, arguments_title, arguments);</div><div class="line"><a name="l08822"></a><span class="lineno"> 8822</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(arguments);</div><div class="line"><a name="l08823"></a><span class="lineno"> 8823</span>&#160;   }</div><div class="line"><a name="l08824"></a><span class="lineno"> 8824</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(instance-&gt;<a class="code" href="../../d8/d46/structast__xml__doc__item.html#ad9060ce736c45736fb6255a07d555831">seealso</a>))) {</div><div class="line"><a name="l08825"></a><span class="lineno"> 8825</span>&#160;      <span class="keywordtype">char</span> *seealso = <a class="code" href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(instance-&gt;<a class="code" href="../../d8/d46/structast__xml__doc__item.html#ad9060ce736c45736fb6255a07d555831">seealso</a>), 1);</div><div class="line"><a name="l08826"></a><span class="lineno"> 8826</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s%s\n\n&quot;</span>, seealso_title, seealso);</div><div class="line"><a name="l08827"></a><span class="lineno"> 8827</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(seealso);</div><div class="line"><a name="l08828"></a><span class="lineno"> 8828</span>&#160;   }</div><div class="ttc" id="app__mysql_8c_html_afbb30cae381f627fb08e1acdac926270"><div class="ttname"><a href="../../d0/db6/app__mysql_8c.html#afbb30cae381f627fb08e1acdac926270">synopsis</a></div><div class="ttdeci">static const char synopsis[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db6/app__mysql_8c_source.html#l00064">app_mysql.c:64</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__xml__doc__item_html_abf4247f8de03d593ac8e288d354d6aa9"><div class="ttname"><a href="../../d8/d46/structast__xml__doc__item.html#abf4247f8de03d593ac8e288d354d6aa9">ast_xml_doc_item::description</a></div><div class="ttdeci">struct ast_str * description</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00066">xmldoc.h:66</a></div></div>
<div class="ttc" id="term_8h_html_a7b6c72116c334f40bf7c1e50e793c93b"><div class="ttname"><a href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a></div><div class="ttdeci">char * term_color(char *outbuf, const char *inbuf, int fgcolor, int bgcolor, int maxout)</div><div class="ttdoc">Colorize a specified string by adding terminal color codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de5/term_8c_source.html#l00184">term.c:184</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="xmldoc_8h_html_a637de870dfc83d0694f588c5a814ce38"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html#a637de870dfc83d0694f588c5a814ce38">ast_xmldoc_printable</a></div><div class="ttdeci">char * ast_xmldoc_printable(const char *bwinput, int withcolors)</div><div class="ttdoc">Colorize and put delimiters (instead of tags) to the xmldoc output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l00242">xmldoc.c:242</a></div></div>
<div class="ttc" id="structast__xml__doc__item_html_a6b8fc14a9dd623efaf1a93949341bd4e"><div class="ttname"><a href="../../d8/d46/structast__xml__doc__item.html#a6b8fc14a9dd623efaf1a93949341bd4e">ast_xml_doc_item::arguments</a></div><div class="ttdeci">struct ast_str * arguments</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00062">xmldoc.h:62</a></div></div>
<div class="ttc" id="structast__xml__doc__item_html_a01b39be4dd41eeda5dff6bd9835cdebe"><div class="ttname"><a href="../../d8/d46/structast__xml__doc__item.html#a01b39be4dd41eeda5dff6bd9835cdebe">ast_xml_doc_item::syntax</a></div><div class="ttdeci">struct ast_str * syntax</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00058">xmldoc.h:58</a></div></div>
<div class="ttc" id="structast__xml__doc__item_html_ad9060ce736c45736fb6255a07d555831"><div class="ttname"><a href="../../d8/d46/structast__xml__doc__item.html#ad9060ce736c45736fb6255a07d555831">ast_xml_doc_item::seealso</a></div><div class="ttdeci">struct ast_str * seealso</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00060">xmldoc.h:60</a></div></div>
<div class="ttc" id="term_8h_html_a8deb0beccea721b35bdb1b4f7264fe75"><div class="ttname"><a href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a></div><div class="ttdeci">#define COLOR_MAGENTA</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00057">term.h:57</a></div></div>
<div class="ttc" id="structast__xml__doc__item_html_afd4fa183745fe419aadcb64ff25df76f"><div class="ttname"><a href="../../d8/d46/structast__xml__doc__item.html#afd4fa183745fe419aadcb64ff25df76f">ast_xml_doc_item::synopsis</a></div><div class="ttdeci">struct ast_str * synopsis</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d99/xmldoc_8h_source.html#l00064">xmldoc.h:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gab2b9c596c9d6eb5dac8fe5f3d7588f50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab2b9c596c9d6eb5dac8fe5f3d7588f50">&#9670;&nbsp;</a></span>process_events()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int process_events </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Send any applicable events to the client listening on this socket. Wait only for a finite time on each event, and drop all events whether they are successfully sent or not. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06227">6227</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l02753">advance_event()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01594">mansession_session::authenticated</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01461">eventqent::category</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01511">EVENT_FLAG_SHUTDOWN</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01603">mansession_session::last_ev</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06193">match_filter()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01595">mansession_session::readperm</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01602">mansession_session::send_events</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03025">send_string()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01584">mansession_session::stream</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06852">do_message()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;{</div><div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;   <span class="keywordtype">int</span> ret = 0;</div><div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;</div><div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/d94/structeventqent.html">eventqent</a> *eqe = s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab825707392ccdf6562c396bf1037b7a3">last_ev</a>;</div><div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;</div><div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;      <span class="keywordflow">while</span> ((eqe = <a class="code" href="../../df/d72/group__Group__AMI.html#ga2d71cf4726fe666194a3473e39782abe">advance_event</a>(eqe))) {</div><div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;         <span class="keywordflow">if</span> (eqe-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a> == <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a246405a298682d5f34f8856b68461">EVENT_FLAG_SHUTDOWN</a>) {</div><div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Received CloseSession event\n&quot;</span>);</div><div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;            ret = -1;</div><div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;         }</div><div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;         <span class="keywordflow">if</span> (!ret &amp;&amp; s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a> &amp;&amp;</div><div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;             (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#afaabb85e65efc5fed1a5f4d08bf272a4">readperm</a> &amp; eqe-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a>) == eqe-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a> &amp;&amp;</div><div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;             (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a93274787fdb55a4b0cc204c9d47c2449">send_events</a> &amp; eqe-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a>) == eqe-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a>) {</div><div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#gad40bb264275fb647b2044b47ac533dad">match_filter</a>(s, eqe-&gt;eventdata)) {</div><div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#gaa7c66558ac59bdb0c8d05864aaec9c22">send_string</a>(s, eqe-&gt;eventdata) &lt; 0)</div><div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;                     ret = -1;   <span class="comment">/* don&#39;t send more */</span></div><div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;               }</div><div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;         }</div><div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;         s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab825707392ccdf6562c396bf1037b7a3">last_ev</a> = eqe;</div><div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;      }</div><div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;   }</div><div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;}</div><div class="ttc" id="structmansession__session_html_ab825707392ccdf6562c396bf1037b7a3"><div class="ttname"><a href="../../df/d05/structmansession__session.html#ab825707392ccdf6562c396bf1037b7a3">mansession_session::last_ev</a></div><div class="ttdeci">struct eventqent * last_ev</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01603">manager.c:1603</a></div></div>
<div class="ttc" id="structmansession__session_html_a29e86d0f6d62ef1edac10a46e4c92095"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">mansession_session::authenticated</a></div><div class="ttdeci">int authenticated</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01594">manager.c:1594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmansession__session_html_afaabb85e65efc5fed1a5f4d08bf272a4"><div class="ttname"><a href="../../df/d05/structmansession__session.html#afaabb85e65efc5fed1a5f4d08bf272a4">mansession_session::readperm</a></div><div class="ttdeci">int readperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01595">manager.c:1595</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmansession__session_html_a93274787fdb55a4b0cc204c9d47c2449"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a93274787fdb55a4b0cc204c9d47c2449">mansession_session::send_events</a></div><div class="ttdeci">int send_events</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01602">manager.c:1602</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga2d71cf4726fe666194a3473e39782abe"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga2d71cf4726fe666194a3473e39782abe">advance_event</a></div><div class="ttdeci">static struct eventqent * advance_event(struct eventqent *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02753">manager.c:2753</a></div></div>
<div class="ttc" id="structeventqent_html"><div class="ttname"><a href="../../d9/d94/structeventqent.html">eventqent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01459">manager.c:1459</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gad40bb264275fb647b2044b47ac533dad"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gad40bb264275fb647b2044b47ac533dad">match_filter</a></div><div class="ttdeci">static int match_filter(struct mansession *s, char *eventdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l06193">manager.c:6193</a></div></div>
<div class="ttc" id="structmansession__session_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">mansession_session::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01584">manager.c:1584</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa7c66558ac59bdb0c8d05864aaec9c22"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa7c66558ac59bdb0c8d05864aaec9c22">send_string</a></div><div class="ttdeci">static int send_string(struct mansession *s, char *string)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03025">manager.c:3025</a></div></div>
<div class="ttc" id="structeventqent_html_a60863e080514b398bce285b4d087dcf1"><div class="ttname"><a href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">eventqent::category</a></div><div class="ttdeci">int category</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01461">manager.c:1461</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a246405a298682d5f34f8856b68461"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a246405a298682d5f34f8856b68461">EVENT_FLAG_SHUTDOWN</a></div><div class="ttdeci">#define EVENT_FLAG_SHUTDOWN</div><div class="ttdoc">Fake event class used to end sessions at shutdown. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01511">manager.c:1511</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga10113617fccfd71f696509a270385169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga10113617fccfd71f696509a270385169">&#9670;&nbsp;</a></span>process_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int process_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process an AMI message, performing desired action. Return 0 on success, -1 on error that require the session to be destroyed. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">6607</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l02783">__astman_get_header()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00151">manager_action::action</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01704">action_find()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01651">ast_manager_user::allowmultiplelogin</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00455">ast_module_running_ref</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00469">ast_module_unref</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01834">ast_shutting_down()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01594">mansession_session::authenticated</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00164">manager_action::authority</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02282">check_manager_session_inuse()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00166">manager_action::func</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02768">GET_HEADER_SKIP_EMPTY</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02305">get_manager_by_name_locked()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06568">log_action()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03251">mansession_lock()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03257">mansession_unlock()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00167">manager_action::module</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06227">process_events()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00178">manager_action::registered</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03414">report_req_bad_format()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03385">report_req_not_allowed()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03473">report_session_limit()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01596">mansession_session::writeperm</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06852">do_message()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;{</div><div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;   <span class="keywordtype">int</span> ret = 0;</div><div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dcc/structmanager__action.html">manager_action</a> *act_found;</div><div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d8a/structast__manager__user.html">ast_manager_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../db/d8a/structast__manager__user.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>;</div><div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *action;</div><div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;</div><div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;   action = <a class="code" href="../../df/d72/group__Group__AMI.html#ga5106d8afed1eac24399cc5d57ab0c7e6">__astman_get_header</a>(m, <span class="stringliteral">&quot;Action&quot;</span>, <a class="code" href="../../df/d72/group__Group__AMI.html#gaa0b13360e4e6387c7a73239b67a19d57">GET_HEADER_SKIP_EMPTY</a>);</div><div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(action)) {</div><div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gae3ee6e147a9a6e5ee1cd6bd91a194c07">report_req_bad_format</a>(s, <span class="stringliteral">&quot;NONE&quot;</span>);</div><div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a>(s);</div><div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Missing action in request&quot;</span>);</div><div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a>(s);</div><div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;   }</div><div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;</div><div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga156e867b0f9693ddc7225adf19b6044b">log_action</a>(m, action);</div><div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;</div><div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/db2/asterisk_8h.html#a6b112b17aed018d85c397e7591948793">ast_shutting_down</a>()) {</div><div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to process manager action &#39;%s&#39;. Asterisk is shutting down.\n&quot;</span>, action);</div><div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a>(s);</div><div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Asterisk is shutting down&quot;</span>);</div><div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a>(s);</div><div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;   }</div><div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;</div><div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;   <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a></div><div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;      &amp;&amp; strcasecmp(action, <span class="stringliteral">&quot;Login&quot;</span>)</div><div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;      &amp;&amp; strcasecmp(action, <span class="stringliteral">&quot;Logoff&quot;</span>)</div><div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;      &amp;&amp; strcasecmp(action, <span class="stringliteral">&quot;Challenge&quot;</span>)) {</div><div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;      <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a>) {</div><div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gaa6a02209ea6747897dfd5249fe631105">report_req_not_allowed</a>(s, action);</div><div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;      }</div><div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a>(s);</div><div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Permission denied&quot;</span>);</div><div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a>(s);</div><div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;   }</div><div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;</div><div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;   <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a></div><div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;      &amp;&amp; (!strcasecmp(action, <span class="stringliteral">&quot;Login&quot;</span>)</div><div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;         || !strcasecmp(action, <span class="stringliteral">&quot;Challenge&quot;</span>))) {</div><div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;      username = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Username&quot;</span>);</div><div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;</div><div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(username) &amp;&amp; <a class="code" href="../../df/d72/group__Group__AMI.html#ga91820dbca9ccfa57da1a8c3c183a56a4">check_manager_session_inuse</a>(username)) {</div><div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;         user = <a class="code" href="../../df/d72/group__Group__AMI.html#ga14bd65f2096d29973dfd999d71e88eee">get_manager_by_name_locked</a>(username);</div><div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160;         <span class="keywordflow">if</span> (user &amp;&amp; !user-&gt;<a class="code" href="../../db/d8a/structast__manager__user.html#a9d6ad22f239563cb0ec69d475299fa87">allowmultiplelogin</a>) {</div><div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#gab68a64554e2df0f2d926faf603848aed">report_session_limit</a>(s);</div><div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;            sleep(1);</div><div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a>(s);</div><div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Login Already In Use&quot;</span>);</div><div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;            <a class="code" href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a>(s);</div><div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;         }</div><div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d8/d63/structusers.html">users</a>);</div><div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;      }</div><div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;   }</div><div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;</div><div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;   act_found = <a class="code" href="../../df/d72/group__Group__AMI.html#gaee7a640cdb6c8442d7fc7e7914406e5a">action_find</a>(action);</div><div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;   <span class="keywordflow">if</span> (act_found) {</div><div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;      <span class="comment">/* Found the requested AMI action. */</span></div><div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;      <span class="keywordtype">int</span> acted = 0;</div><div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;</div><div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;      <span class="keywordflow">if</span> ((s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">writeperm</a> &amp; act_found-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a321c2ead2a4079cde828f7491c2ef733">authority</a>)</div><div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;         || act_found-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a321c2ead2a4079cde828f7491c2ef733">authority</a> == 0) {</div><div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;         <span class="comment">/* We have the authority to execute the action. */</span></div><div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;         ret = -1;</div><div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(act_found);</div><div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;         <span class="keywordflow">if</span> (act_found-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#acee2bf9117848b5ffbbebb64a540e19f">registered</a> &amp;&amp; act_found-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab0bef752de7f442d29017ea812092d91">func</a>) {</div><div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d9/df5/structast__module.html">ast_module</a> *mod_ref = <a class="code" href="../../d5/d16/module_8h.html#ad2dd3dce05926913c40b883cc7cff0a8">ast_module_running_ref</a>(act_found-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">module</a>);</div><div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;</div><div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(act_found);</div><div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;            <span class="keywordflow">if</span> (mod_ref || !act_found-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">module</a>) {</div><div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Running action &#39;%s&#39;\n&quot;</span>, act_found-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">action</a>);</div><div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;               ret = act_found-&gt;<a class="code" href="../../d2/dcc/structmanager__action.html#ab0bef752de7f442d29017ea812092d91">func</a>(s, m);</div><div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;               acted = 1;</div><div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;               <a class="code" href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a>(mod_ref);</div><div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;            }</div><div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(act_found);</div><div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;         }</div><div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;      }</div><div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;      <span class="keywordflow">if</span> (!acted) {</div><div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;<span class="comment">          * We did not execute the action because access was denied, it</span></div><div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;<span class="comment">          * was no longer registered, or no action was really registered.</span></div><div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;<span class="comment">          * Complain about it and leave.</span></div><div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gaa6a02209ea6747897dfd5249fe631105">report_req_not_allowed</a>(s, action);</div><div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a>(s);</div><div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Permission denied&quot;</span>);</div><div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a>(s);</div><div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;      }</div><div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(act_found, -1, <span class="stringliteral">&quot;done with found action object&quot;</span>);</div><div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[512];</div><div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;</div><div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gae3ee6e147a9a6e5ee1cd6bd91a194c07">report_req_bad_format</a>(s, action);</div><div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;      snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Invalid/unknown command: %s. Use Action: ListCommands to show available commands.&quot;</span>, action);</div><div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a>(s);</div><div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, buf);</div><div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a>(s);</div><div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;   }</div><div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;   <span class="keywordflow">if</span> (ret) {</div><div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;      <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;   }</div><div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;   <span class="comment">/* Once done with our message, deliver any pending events unless the</span></div><div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;<span class="comment">      requester doesn&#39;t want them as part of this response.</span></div><div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;SuppressEvents&quot;</span>))) {</div><div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gab2b9c596c9d6eb5dac8fe5f3d7588f50">process_events</a>(s);</div><div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;      <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;   }</div><div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="structast__manager__user_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a60b121e87a5e71fe64bae70e1721ac3c">ast_manager_user::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01645">manager.c:1645</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga5106d8afed1eac24399cc5d57ab0c7e6"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5106d8afed1eac24399cc5d57ab0c7e6">__astman_get_header</a></div><div class="ttdeci">static const char * __astman_get_header(const struct message *m, char *var, int mode)</div><div class="ttdoc">Return a matching header value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02783">manager.c:2783</a></div></div>
<div class="ttc" id="asterisk_8h_html_a6b112b17aed018d85c397e7591948793"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a6b112b17aed018d85c397e7591948793">ast_shutting_down</a></div><div class="ttdeci">int ast_shutting_down(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01834">asterisk.c:1834</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga06b330b2a545662f8130f086604660ec"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga06b330b2a545662f8130f086604660ec">mansession_unlock</a></div><div class="ttdeci">static void mansession_unlock(struct mansession *s)</div><div class="ttdoc">Unlock the &amp;#39;mansession&amp;#39; structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03257">manager.c:3257</a></div></div>
<div class="ttc" id="structast__module_html"><div class="ttname"><a href="../../d9/df5/structast__module.html">ast_module</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d96/loader_8c_source.html#l00293">loader.c:293</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga14bd65f2096d29973dfd999d71e88eee"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga14bd65f2096d29973dfd999d71e88eee">get_manager_by_name_locked</a></div><div class="ttdeci">static struct ast_manager_user * get_manager_by_name_locked(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02305">manager.c:2305</a></div></div>
<div class="ttc" id="structmanager__action_html_ab0bef752de7f442d29017ea812092d91"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ab0bef752de7f442d29017ea812092d91">manager_action::func</a></div><div class="ttdeci">int(* func)(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00166">manager.h:166</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structmanager__action_html_ab1db9bdb9ca2c111e4aef51de082553e"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#ab1db9bdb9ca2c111e4aef51de082553e">manager_action::action</a></div><div class="ttdeci">const char * action</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00151">manager.h:151</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa6a02209ea6747897dfd5249fe631105"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa6a02209ea6747897dfd5249fe631105">report_req_not_allowed</a></div><div class="ttdeci">static void report_req_not_allowed(const struct mansession *s, const char *action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03385">manager.c:3385</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gab68a64554e2df0f2d926faf603848aed"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gab68a64554e2df0f2d926faf603848aed">report_session_limit</a></div><div class="ttdeci">static void report_session_limit(const struct mansession *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03473">manager.c:3473</a></div></div>
<div class="ttc" id="structmansession__session_html_a006a09ed1c51271c4b6f582a2a42ba5f"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a006a09ed1c51271c4b6f582a2a42ba5f">mansession_session::writeperm</a></div><div class="ttdeci">int writeperm</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01596">manager.c:1596</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gab2b9c596c9d6eb5dac8fe5f3d7588f50"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gab2b9c596c9d6eb5dac8fe5f3d7588f50">process_events</a></div><div class="ttdeci">static int process_events(struct mansession *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l06227">manager.c:6227</a></div></div>
<div class="ttc" id="structmansession__session_html_a29e86d0f6d62ef1edac10a46e4c92095"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">mansession_session::authenticated</a></div><div class="ttdeci">int authenticated</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01594">manager.c:1594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__manager__user_html"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html">ast_manager_user</a></div><div class="ttdoc">user descriptor, as read from the config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01644">manager.c:1644</a></div></div>
<div class="ttc" id="structusers_html"><div class="ttname"><a href="../../d8/d63/structusers.html">users</a></div><div class="ttdoc">list of users found in the config file </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00915">app_voicemail.c:915</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaee7a640cdb6c8442d7fc7e7914406e5a"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaee7a640cdb6c8442d7fc7e7914406e5a">action_find</a></div><div class="ttdeci">static struct manager_action * action_find(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01704">manager.c:1704</a></div></div>
<div class="ttc" id="structmanager__action_html_a8637433cfbb88aeb10ce2ed5dcba0eb1"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">manager_action::module</a></div><div class="ttdeci">struct ast_module * module</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00167">manager.h:167</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Return the first matching variable from an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="module_8h_html_a15896c26e51e8162df5eb9a0124c841f"><div class="ttname"><a href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a></div><div class="ttdeci">#define ast_module_unref(mod)</div><div class="ttdoc">Release a reference to the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00469">module.h:469</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga91820dbca9ccfa57da1a8c3c183a56a4"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga91820dbca9ccfa57da1a8c3c183a56a4">check_manager_session_inuse</a></div><div class="ttdeci">static int check_manager_session_inuse(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02282">manager.c:2282</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmanager__action_html_acee2bf9117848b5ffbbebb64a540e19f"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#acee2bf9117848b5ffbbebb64a540e19f">manager_action::registered</a></div><div class="ttdeci">unsigned int registered</div><div class="ttdoc">TRUE if the AMI action is registered and the callback can be called. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00178">manager.h:178</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa0b13360e4e6387c7a73239b67a19d57"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa0b13360e4e6387c7a73239b67a19d57">GET_HEADER_SKIP_EMPTY</a></div><div class="ttdeci">#define GET_HEADER_SKIP_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02768">manager.c:2768</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga156e867b0f9693ddc7225adf19b6044b"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga156e867b0f9693ddc7225adf19b6044b">log_action</a></div><div class="ttdeci">static void log_action(const struct message *m, const char *action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l06568">manager.c:6568</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__manager__user_html_a9d6ad22f239563cb0ec69d475299fa87"><div class="ttname"><a href="../../db/d8a/structast__manager__user.html#a9d6ad22f239563cb0ec69d475299fa87">ast_manager_user::allowmultiplelogin</a></div><div class="ttdeci">int allowmultiplelogin</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01651">manager.c:1651</a></div></div>
<div class="ttc" id="structmanager__action_html_a321c2ead2a4079cde828f7491c2ef733"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html#a321c2ead2a4079cde828f7491c2ef733">manager_action::authority</a></div><div class="ttdeci">int authority</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00164">manager.h:164</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="module_8h_html_ad2dd3dce05926913c40b883cc7cff0a8"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2dd3dce05926913c40b883cc7cff0a8">ast_module_running_ref</a></div><div class="ttdeci">#define ast_module_running_ref(mod)</div><div class="ttdoc">Hold a reference to the module if it is running. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00455">module.h:455</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga2cbbc87c25cdd3f6346961d3ed40b2fb"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga2cbbc87c25cdd3f6346961d3ed40b2fb">mansession_lock</a></div><div class="ttdeci">static void mansession_lock(struct mansession *s)</div><div class="ttdoc">Lock the &amp;#39;mansession&amp;#39; structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03251">manager.c:3251</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gae3ee6e147a9a6e5ee1cd6bd91a194c07"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gae3ee6e147a9a6e5ee1cd6bd91a194c07">report_req_bad_format</a></div><div class="ttdeci">static void report_req_bad_format(const struct mansession *s, const char *action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03414">manager.c:3414</a></div></div>
<div class="ttc" id="structmanager__action_html"><div class="ttname"><a href="../../d2/dcc/structmanager__action.html">manager_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00149">manager.h:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga0464e7b1c82d29cbe8b3f70bf7ca29c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0464e7b1c82d29cbe8b3f70bf7ca29c6">&#9670;&nbsp;</a></span>purge_events()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void purge_events </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Purge unused events. Remove elements from the head as long as their usecount is 0 and there is a next element. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01983">1983</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00422">AST_RWLIST_FIRST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00440">AST_RWLIST_NEXT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00843">AST_RWLIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00064">ast_tvdiff_sec()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01473">httptimeout</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01463">eventqent::tv</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01460">eventqent::usecount</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08635">purge_old_stuff()</a>.</p>
<div class="fragment"><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;{</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d94/structeventqent.html">eventqent</a> *ev;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;   <span class="keyword">struct </span>timeval now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;   <span class="keywordflow">while</span> ( (ev = <a class="code" href="../../df/d90/linkedlists_8h.html#a64835fe6d570951b2a0404799c3d116f">AST_RWLIST_FIRST</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>)) &amp;&amp;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;       ev-&gt;<a class="code" href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">usecount</a> == 0 &amp;&amp; <a class="code" href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a>(ev, eq_next)) {</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>, eq_next);</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ev);</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;   }</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>, ev, eq_next) {</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;      <span class="comment">/* Never release the last event */</span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a>(ev, eq_next)) {</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;      }</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;      <span class="comment">/* 2.5 times whatever the HTTP timeout is (maximum 2.5 hours) is the maximum time that we will definitely cache an event */</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;      <span class="keywordflow">if</span> (ev-&gt;<a class="code" href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">usecount</a> == 0 &amp;&amp; <a class="code" href="../../de/df7/time_8h.html#a39af1febe8b93cb6f7cd59b76fc39e8f">ast_tvdiff_sec</a>(now, ev-&gt;<a class="code" href="../../d9/d94/structeventqent.html#a9cf96982557d56650f0f4cd3762f05a0">tv</a>) &gt; (<a class="code" href="../../df/d72/group__Group__AMI.html#gaf28d7a75b43cde09123c9ba1527b34ba">httptimeout</a> &gt; 3600 ? 3600 : <a class="code" href="../../df/d72/group__Group__AMI.html#gaf28d7a75b43cde09123c9ba1527b34ba">httptimeout</a>) * 2.5) {</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(eq_next);</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ev);</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      }</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;   }</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/d3e/structall__events.html">all_events</a>);</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;}</div><div class="ttc" id="structeventqent_html_a9cf96982557d56650f0f4cd3762f05a0"><div class="ttname"><a href="../../d9/d94/structeventqent.html#a9cf96982557d56650f0f4cd3762f05a0">eventqent::tv</a></div><div class="ttdeci">struct timeval tv</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01463">manager.c:1463</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a5c021d1e034a53d09360da4d95c76220"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a></div><div class="ttdeci">#define AST_RWLIST_NEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00440">linkedlists.h:440</a></div></div>
<div class="ttc" id="structall__events_html"><div class="ttname"><a href="../../d2/d3e/structall__events.html">all_events</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01468">manager.c:1468</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="time_8h_html_a39af1febe8b93cb6f7cd59b76fc39e8f"><div class="ttname"><a href="../../de/df7/time_8h.html#a39af1febe8b93cb6f7cd59b76fc39e8f">ast_tvdiff_sec</a></div><div class="ttdeci">int64_t ast_tvdiff_sec(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in seconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00064">time.h:64</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaf28d7a75b43cde09123c9ba1527b34ba"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaf28d7a75b43cde09123c9ba1527b34ba">httptimeout</a></div><div class="ttdeci">static int httptimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01473">manager.c:1473</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="structeventqent_html"><div class="ttname"><a href="../../d9/d94/structeventqent.html">eventqent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01459">manager.c:1459</a></div></div>
<div class="ttc" id="structeventqent_html_ab0f2e84f976dc042139d37fd1c28d73b"><div class="ttname"><a href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">eventqent::usecount</a></div><div class="ttdeci">int usecount</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01460">manager.c:1460</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3d3aa4fb3b4ba38ad8d6d255d97e037c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00843">linkedlists.h:843</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a64835fe6d570951b2a0404799c3d116f"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a64835fe6d570951b2a0404799c3d116f">AST_RWLIST_FIRST</a></div><div class="ttdeci">#define AST_RWLIST_FIRST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00422">linkedlists.h:422</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa98613bbc66bdf99b8423afcfc4f9b2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa98613bbc66bdf99b8423afcfc4f9b2c">&#9670;&nbsp;</a></span>purge_sessions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void purge_sessions </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_max</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>remove at most n_max stale session from the list. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07031">7031</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00290">ast_sockaddr_stringify_addr()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01594">mansession_session::authenticated</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01585">mansession_session::inuse</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02322">manager_displayconnects()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02269">session_destroy()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01591">mansession_session::sessiontimeout</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02183">unref_mansession()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01592">mansession_session::username</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00461">VERBOSITY_ATLEAST</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08635">purge_old_stuff()</a>.</p>
<div class="fragment"><div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160;{</div><div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>;</div><div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d05/structmansession__session.html">mansession_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>;</div><div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;   time_t now = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;</div><div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;   sessions = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(mgr_sessions);</div><div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;   <span class="keywordflow">if</span> (!sessions) {</div><div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;   }</div><div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(sessions, 0);</div><div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sessions, -1);</div><div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;   <span class="keywordflow">while</span> ((session = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i)) &amp;&amp; n_max &gt; 0) {</div><div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(session);</div><div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;      <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#abd03a701558da25801e0ce450d9e39ee">sessiontimeout</a> &amp;&amp; (now &gt; session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#abd03a701558da25801e0ce450d9e39ee">sessiontimeout</a>) &amp;&amp; !session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a679cabe3b846f2e363f43d8e57433834">inuse</a>) {</div><div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;         <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a></div><div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;            &amp;&amp; <a class="code" href="../../d1/d8c/logger_8h.html#a7d52159deec8b3179d27fcb4d39c30d2">VERBOSITY_ATLEAST</a>(2)</div><div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;            &amp;&amp; <a class="code" href="../../df/d72/group__Group__AMI.html#ga6ede61db764903806db0e5334d07c010">manager_displayconnects</a>(session)) {</div><div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;HTTP Manager &#39;%s&#39; timed out from %s\n&quot;</span>,</div><div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;               session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>, <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>));</div><div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;         }</div><div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(session);</div><div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga556bc46323d87c59cf471a5f48c7d2d5">session_destroy</a>(session);</div><div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;         n_max--;</div><div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(session);</div><div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga5e4938c2cafe6e01553cb952ca1f5e45">unref_mansession</a>(session);</div><div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;      }</div><div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;   }</div><div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_a6bf0e68e74c0a9ca9d25251b22e4d64a"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_addr(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00290">netsock2.h:290</a></div></div>
<div class="ttc" id="structmansession__session_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">mansession_session::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01592">manager.c:1592</a></div></div>
<div class="ttc" id="chan__skinny_8c_html_a61aa7b9ad75e714f776c1f82bcc3359f"><div class="ttname"><a href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a></div><div class="ttdeci">static struct sessions sessions</div></div>
<div class="ttc" id="logger_8h_html_a7d52159deec8b3179d27fcb4d39c30d2"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a7d52159deec8b3179d27fcb4d39c30d2">VERBOSITY_ATLEAST</a></div><div class="ttdeci">#define VERBOSITY_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00461">logger.h:461</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="structmansession__session_html_a29e86d0f6d62ef1edac10a46e4c92095"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">mansession_session::authenticated</a></div><div class="ttdeci">int authenticated</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01594">manager.c:1594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga5e4938c2cafe6e01553cb952ca1f5e45"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5e4938c2cafe6e01553cb952ca1f5e45">unref_mansession</a></div><div class="ttdeci">static struct mansession_session * unref_mansession(struct mansession_session *s)</div><div class="ttdoc">Unreference manager session object. If no more references, then go ahead and delete it...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02183">manager.c:2183</a></div></div>
<div class="ttc" id="structmansession__session_html_abd03a701558da25801e0ce450d9e39ee"><div class="ttname"><a href="../../df/d05/structmansession__session.html#abd03a701558da25801e0ce450d9e39ee">mansession_session::sessiontimeout</a></div><div class="ttdeci">time_t sessiontimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01591">manager.c:1591</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structmansession__session_html"><div class="ttname"><a href="../../df/d05/structmansession__session.html">mansession_session</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01581">manager.c:1581</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga556bc46323d87c59cf471a5f48c7d2d5"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga556bc46323d87c59cf471a5f48c7d2d5">session_destroy</a></div><div class="ttdeci">static void session_destroy(struct mansession_session *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02269">manager.c:2269</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="structmansession__session_html_a679cabe3b846f2e363f43d8e57433834"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a679cabe3b846f2e363f43d8e57433834">mansession_session::inuse</a></div><div class="ttdeci">int inuse</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01585">manager.c:1585</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga6ede61db764903806db0e5334d07c010"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga6ede61db764903806db0e5334d07c010">manager_displayconnects</a></div><div class="ttdeci">static int manager_displayconnects(struct mansession_session *session)</div><div class="ttdoc">Get displayconnects config option. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02322">manager.c:2322</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1fbdb833cde8f5286f6671033665a2aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1fbdb833cde8f5286f6671033665a2aa">&#9670;&nbsp;</a></span>queue_read_action_payload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int queue_read_action_payload </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>payload_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775">ast_frame_read_action</a>&#160;</td>
          <td class="paramname"><em>action</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queue a given read action containing a payload onto a channel. </p>
<p>This queues a READ_ACTION control frame that contains a given "payload", or data to be triggered and handled on the channel's read side. This ensures the "action" is handled by the channel's media reading thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>The channel to queue the action on </td></tr>
    <tr><td class="paramname">payload</td><td>The read action's payload </td></tr>
    <tr><td class="paramname">payload_size</td><td>The size of the given payload </td></tr>
    <tr><td class="paramname">action</td><td>The type of read action to queue</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error, 0 on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04864">4864</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00304">AST_CONTROL_READ_ACTION</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, and <a class="el" href="../../d4/d28/channel_8c_source.html#l01238">ast_queue_control_data()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04896">queue_sendtext()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l04911">queue_sendtext_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;{</div><div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structast__control__read__action__payload.html">ast_control_read_action_payload</a> *obj;</div><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;   <span class="keywordtype">size_t</span> obj_size;</div><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;</div><div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;   obj_size = <a class="code" href="../../d6/d4b/structast__control__read__action__payload.html#a21fb327bb05e95f14a13ff193882f32b">payload_size</a> + <span class="keyword">sizeof</span>(*obj);</div><div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;</div><div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;   obj = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(obj_size);</div><div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;   <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;   }</div><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;</div><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;   obj-&gt;action = <a class="code" href="../../d6/d4b/structast__control__read__action__payload.html#ade8a15adbed15f8060da2d7004133948">action</a>;</div><div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;   obj-&gt;payload_size = <a class="code" href="../../d6/d4b/structast__control__read__action__payload.html#a21fb327bb05e95f14a13ff193882f32b">payload_size</a>;</div><div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;   memcpy(obj-&gt;payload, <a class="code" href="../../d6/d4b/structast__control__read__action__payload.html#ad2d69e61752c24ad7723c9a89add4a7c">payload</a>, <a class="code" href="../../d6/d4b/structast__control__read__action__payload.html#a21fb327bb05e95f14a13ff193882f32b">payload_size</a>);</div><div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;</div><div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;   res = <a class="code" href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7c6096b70aeb9e6b2b4f9ee5cfccbf7a">AST_CONTROL_READ_ACTION</a>, obj, obj_size);</div><div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;</div><div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(obj);</div><div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;}</div><div class="ttc" id="structast__control__read__action__payload_html"><div class="ttname"><a href="../../d6/d4b/structast__control__read__action__payload.html">ast_control_read_action_payload</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00357">include/asterisk/frame.h:357</a></div></div>
<div class="ttc" id="structast__control__read__action__payload_html_a21fb327bb05e95f14a13ff193882f32b"><div class="ttname"><a href="../../d6/d4b/structast__control__read__action__payload.html#a21fb327bb05e95f14a13ff193882f32b">ast_control_read_action_payload::payload_size</a></div><div class="ttdeci">size_t payload_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00364">include/asterisk/frame.h:364</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="structast__control__read__action__payload_html_ade8a15adbed15f8060da2d7004133948"><div class="ttname"><a href="../../d6/d4b/structast__control__read__action__payload.html#ade8a15adbed15f8060da2d7004133948">ast_control_read_action_payload::action</a></div><div class="ttdeci">enum ast_frame_read_action action</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00361">include/asterisk/frame.h:361</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a7c6096b70aeb9e6b2b4f9ee5cfccbf7a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7c6096b70aeb9e6b2b4f9ee5cfccbf7a">AST_CONTROL_READ_ACTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00304">include/asterisk/frame.h:304</a></div></div>
<div class="ttc" id="channel_8h_html_a7e5e15c22564fd66351d332ad10658b5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a></div><div class="ttdeci">int ast_queue_control_data(struct ast_channel *chan, enum ast_control_frame_type control, const void *data, size_t datalen)</div><div class="ttdoc">Queue a control frame with payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01238">channel.c:1238</a></div></div>
<div class="ttc" id="structast__control__read__action__payload_html_ad2d69e61752c24ad7723c9a89add4a7c"><div class="ttname"><a href="../../d6/d4b/structast__control__read__action__payload.html#ad2d69e61752c24ad7723c9a89add4a7c">ast_control_read_action_payload::payload</a></div><div class="ttdeci">unsigned char payload[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00367">include/asterisk/frame.h:367</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gadc51d8d2531d72d735b5f270db27de72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadc51d8d2531d72d735b5f270db27de72">&#9670;&nbsp;</a></span>queue_sendtext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int queue_sendtext </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queue a read action to send a text message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>The channel to queue the action on </td></tr>
    <tr><td class="paramname">body</td><td>The body of the message</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error, 0 on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04896">4896</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00353">AST_FRAME_READ_ACTION_SEND_TEXT</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l04864">queue_read_action_payload()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04930">action_sendtext()</a>.</p>
<div class="fragment"><div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;{</div><div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d72/group__Group__AMI.html#ga1fbdb833cde8f5286f6671033665a2aa">queue_read_action_payload</a>(chan, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)body,</div><div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;      strlen(body) + 1, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775a4b2dcef6c6da53104278190e521d7b1c">AST_FRAME_READ_ACTION_SEND_TEXT</a>);</div><div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;}</div><div class="ttc" id="include_2asterisk_2frame_8h_html_a2457835b26aa09c41c6ecf633f95f775a4b2dcef6c6da53104278190e521d7b1c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775a4b2dcef6c6da53104278190e521d7b1c">AST_FRAME_READ_ACTION_SEND_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00353">include/asterisk/frame.h:353</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga1fbdb833cde8f5286f6671033665a2aa"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga1fbdb833cde8f5286f6671033665a2aa">queue_read_action_payload</a></div><div class="ttdeci">static int queue_read_action_payload(struct ast_channel *chan, const unsigned char *payload, size_t payload_size, enum ast_frame_read_action action)</div><div class="ttdoc">Queue a given read action containing a payload onto a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l04864">manager.c:4864</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa010c027e6c7d2c2082482526a2eed06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa010c027e6c7d2c2082482526a2eed06">&#9670;&nbsp;</a></span>queue_sendtext_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int queue_sendtext_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>body</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>content_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queue a read action to send a text data message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>The channel to queue the action on </td></tr>
    <tr><td class="paramname">body</td><td>The body of the message </td></tr>
    <tr><td class="paramname">content_type</td><td>The message's content type</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error, 0 on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l04911">4911</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00354">AST_FRAME_READ_ACTION_SEND_TEXT_DATA</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01469">ast_msg_data_alloc2()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01513">ast_msg_data_get_length()</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00447">AST_MSG_DATA_SOURCE_TYPE_UNKNOWN</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l04864">queue_read_action_payload()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04930">action_sendtext()</a>.</p>
<div class="fragment"><div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;{</div><div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *obj;</div><div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;</div><div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;   obj = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gac19d5671ce7ad4db2a7df0d4784d4cd3">ast_msg_data_alloc2</a>(<a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga8e03c05d9a579130cae1af412fb6c580a711186ed6f4afa0cccc12908e40c511d">AST_MSG_DATA_SOURCE_TYPE_UNKNOWN</a>,</div><div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;                     <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, content_type, body);</div><div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;   <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;   }</div><div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;</div><div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;   res = <a class="code" href="../../df/d72/group__Group__AMI.html#ga1fbdb833cde8f5286f6671033665a2aa">queue_read_action_payload</a>(chan, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)obj,</div><div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;      <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gafe0003d5c882180061f9da68d89840c5">ast_msg_data_get_length</a>(obj), <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775a9e8b2eb87931f7565311b556a32e6993">AST_FRAME_READ_ACTION_SEND_TEXT_DATA</a>);</div><div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;</div><div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(obj);</div><div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;}</div><div class="ttc" id="group__ast__msg__data_html_gafe0003d5c882180061f9da68d89840c5"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gafe0003d5c882180061f9da68d89840c5">ast_msg_data_get_length</a></div><div class="ttdeci">size_t ast_msg_data_get_length(struct ast_msg_data *msg)</div><div class="ttdoc">Get length of the structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01513">message.c:1513</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga8e03c05d9a579130cae1af412fb6c580a711186ed6f4afa0cccc12908e40c511d"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga8e03c05d9a579130cae1af412fb6c580a711186ed6f4afa0cccc12908e40c511d">AST_MSG_DATA_SOURCE_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00447">message.h:447</a></div></div>
<div class="ttc" id="structast__msg__data_html"><div class="ttname"><a href="../../d9/d44/structast__msg__data.html">ast_msg_data</a></div><div class="ttdoc">Structure used to transport a message through the frame core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01406">message.c:1406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga1fbdb833cde8f5286f6671033665a2aa"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga1fbdb833cde8f5286f6671033665a2aa">queue_read_action_payload</a></div><div class="ttdeci">static int queue_read_action_payload(struct ast_channel *chan, const unsigned char *payload, size_t payload_size, enum ast_frame_read_action action)</div><div class="ttdoc">Queue a given read action containing a payload onto a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l04864">manager.c:4864</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a2457835b26aa09c41c6ecf633f95f775a9e8b2eb87931f7565311b556a32e6993"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775a9e8b2eb87931f7565311b556a32e6993">AST_FRAME_READ_ACTION_SEND_TEXT_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00354">include/asterisk/frame.h:354</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gac19d5671ce7ad4db2a7df0d4784d4cd3"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gac19d5671ce7ad4db2a7df0d4784d4cd3">ast_msg_data_alloc2</a></div><div class="ttdeci">struct ast_msg_data * ast_msg_data_alloc2(enum ast_msg_data_source_type source_type, const char *to, const char *from, const char *content_type, const char *body)</div><div class="ttdoc">Allocates an ast_msg_data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01469">message.c:1469</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga7c6ac25ea7536c0bc9ed18cbcf917527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7c6ac25ea7536c0bc9ed18cbcf917527">&#9670;&nbsp;</a></span>reload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l09661">9661</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l02734">handle_manager_reload()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02706">handle_showmaneventq()</a>.</p>
<div class="fragment"><div class="line"><a name="l09663"></a><span class="lineno"> 9663</span>&#160;{</div><div class="line"><a name="l09664"></a><span class="lineno"> 9664</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d10/manager_8c.html#a3986a4fb4a5da67741b41cedefd34049">__init_manager</a>(1, 0);</div><div class="ttc" id="manager_8c_html_a3986a4fb4a5da67741b41cedefd34049"><div class="ttname"><a href="../../d4/d10/manager_8c.html#a3986a4fb4a5da67741b41cedefd34049">__init_manager</a></div><div class="ttdeci">static int __init_manager(int reload, int by_external_config)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l09144">manager.c:9144</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaf35097a12cdbc0424817d9ab324d1a0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf35097a12cdbc0424817d9ab324d1a0a">&#9670;&nbsp;</a></span>report_auth_success()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void report_auth_success </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03360">3360</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00139">AST_SEC_EVT</a>, <a class="el" href="../../d8/d30/main_2security__events_8c_source.html#l01171">ast_security_event_report()</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00097">AST_SECURITY_EVENT_SUCCESSFUL_AUTH</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00387">AST_SECURITY_EVENT_SUCCESSFUL_AUTH_VERSION</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00392">ast_security_event_successful_auth::common</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00158">ast_security_event_common::event_type</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00130">ast_tcptls_session_args::local_address</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03279">mansession_get_transport()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00152">ast_tcptls_session_instance::parent</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01590">mansession_session::sessionstart_tv</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01628">mansession::tcptls_session</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01592">mansession_session::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03505">authenticate()</a>.</p>
<div class="fragment"><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;{</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;   <span class="keywordtype">char</span> session_id[32];</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d86/structast__security__event__successful__auth.html">ast_security_event_successful_auth</a> successful_auth = {</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;      .<a class="code" href="../../d6/d86/structast__security__event__successful__auth.html#a5853d232c74e8c3de4a3387c05c07df0">common</a>.<a class="code" href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">event_type</a> = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372caeba3af0716af08bf27b004b5b935d24f">AST_SECURITY_EVENT_SUCCESSFUL_AUTH</a>,</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;      .common.version    = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#adc105808e97bd06ee0b39375c6c2a137">AST_SECURITY_EVENT_SUCCESSFUL_AUTH_VERSION</a>,</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      .common.service    = <span class="stringliteral">&quot;AMI&quot;</span>,</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;      .common.account_id = s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>,</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;      .common.session_tv = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">sessionstart_tv</a>,</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;      .common.local_addr = {</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a>-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">parent</a>-&gt;<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>,</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;      },</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;      .common.remote_addr = {</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>,</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;      },</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;      .common.session_id = session_id,</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;   };</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;   snprintf(session_id, <span class="keyword">sizeof</span>(session_id), <span class="stringliteral">&quot;%p&quot;</span>, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;   <a class="code" href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a>(<a class="code" href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a>(&amp;successful_auth));</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;}</div><div class="ttc" id="structast__security__event__common_html_ab6aa0eb589925a75d104087ce946a0ad"><div class="ttname"><a href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">ast_security_event_common::event_type</a></div><div class="ttdeci">enum ast_security_event_type event_type</div><div class="ttdoc">The security event sub-type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00158">security_events_defs.h:158</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_ac2b6df8229537d9dbb35aaf6bd82372caeba3af0716af08bf27b004b5b935d24f"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372caeba3af0716af08bf27b004b5b935d24f">AST_SECURITY_EVENT_SUCCESSFUL_AUTH</a></div><div class="ttdoc">FYI FWIW, Successful authentication has occurred. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00097">security_events_defs.h:97</a></div></div>
<div class="ttc" id="structmansession__session_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">mansession_session::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01592">manager.c:1592</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa418c48f68fe0253bf35346878d7b919"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a></div><div class="ttdeci">static enum ast_transport mansession_get_transport(const struct mansession *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03279">manager.c:3279</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ac7fc8bed1104b4557f6a183ae1155b75"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">ast_tcptls_session_instance::parent</a></div><div class="ttdeci">struct ast_tcptls_session_args * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00152">tcptls.h:152</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_adc105808e97bd06ee0b39375c6c2a137"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#adc105808e97bd06ee0b39375c6c2a137">AST_SECURITY_EVENT_SUCCESSFUL_AUTH_VERSION</a></div><div class="ttdeci">#define AST_SECURITY_EVENT_SUCCESSFUL_AUTH_VERSION</div><div class="ttdoc">Event descriptor version. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00387">security_events_defs.h:387</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_af08538976e14908080145cb050f39510"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a></div><div class="ttdeci">#define AST_SEC_EVT(e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00139">security_events_defs.h:139</a></div></div>
<div class="ttc" id="structast__security__event__successful__auth_html"><div class="ttname"><a href="../../d6/d86/structast__security__event__successful__auth.html">ast_security_event_successful_auth</a></div><div class="ttdoc">Successful authentication. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00382">security_events_defs.h:382</a></div></div>
<div class="ttc" id="structmansession__session_html_a54d7a5d4a31deafdc03b710cf95de534"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">mansession_session::sessionstart_tv</a></div><div class="ttdeci">struct timeval sessionstart_tv</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01590">manager.c:1590</a></div></div>
<div class="ttc" id="structmansession_html_affd6ea965816bd0ac40c18d7b5de8de6"><div class="ttname"><a href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">mansession::tcptls_session</a></div><div class="ttdeci">struct ast_tcptls_session_instance * tcptls_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01628">manager.c:1628</a></div></div>
<div class="ttc" id="structast__security__event__successful__auth_html_a5853d232c74e8c3de4a3387c05c07df0"><div class="ttname"><a href="../../d6/d86/structast__security__event__successful__auth.html#a5853d232c74e8c3de4a3387c05c07df0">ast_security_event_successful_auth::common</a></div><div class="ttdeci">struct ast_security_event_common common</div><div class="ttdoc">Common security event descriptor elements. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00392">security_events_defs.h:392</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_a6652499b3aff8f317d4c6d1a36c6c740"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">ast_tcptls_session_args::local_address</a></div><div class="ttdeci">struct ast_sockaddr local_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00130">tcptls.h:130</a></div></div>
<div class="ttc" id="include_2asterisk_2security__events_8h_html_ae13dc3d123710d7519588d54c51f8170"><div class="ttname"><a href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a></div><div class="ttdeci">int ast_security_event_report(const struct ast_security_event_common *sec)</div><div class="ttdoc">Report a security event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d30/main_2security__events_8c_source.html#l01171">main/security_events.c:1171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga270644a6d4f3d622e763df47b0cbfce8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga270644a6d4f3d622e763df47b0cbfce8">&#9670;&nbsp;</a></span>report_failed_acl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void report_failed_acl </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>username</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03310">3310</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00139">AST_SEC_EVT</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00048">AST_SECURITY_EVENT_FAILED_ACL</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00208">AST_SECURITY_EVENT_FAILED_ACL_VERSION</a>, <a class="el" href="../../d8/d30/main_2security__events_8c_source.html#l01171">ast_security_event_report()</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00213">ast_security_event_failed_acl::common</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00158">ast_security_event_common::event_type</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00130">ast_tcptls_session_args::local_address</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03279">mansession_get_transport()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00152">ast_tcptls_session_instance::parent</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01590">mansession_session::sessionstart_tv</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01628">mansession::tcptls_session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03505">authenticate()</a>.</p>
<div class="fragment"><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;{</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;   <span class="keywordtype">char</span> session_id[32];</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d53/structast__security__event__failed__acl.html">ast_security_event_failed_acl</a> failed_acl_event = {</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;      .<a class="code" href="../../df/d53/structast__security__event__failed__acl.html#a5853d232c74e8c3de4a3387c05c07df0">common</a>.<a class="code" href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">event_type</a> = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372ca598f4a7e416c29b499f2bbe828a6f036">AST_SECURITY_EVENT_FAILED_ACL</a>,</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;      .common.version    = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#a9eb882bf892c0882de06605a4f6d78b2">AST_SECURITY_EVENT_FAILED_ACL_VERSION</a>,</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;      .common.service    = <span class="stringliteral">&quot;AMI&quot;</span>,</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;      .common.account_id = username,</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;      .common.session_tv = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">sessionstart_tv</a>,</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;      .common.local_addr = {</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a>-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">parent</a>-&gt;<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>,</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;      },</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;      .common.remote_addr = {</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>,</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;      },</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;      .common.session_id = session_id,</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;   };</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;   snprintf(session_id, <span class="keyword">sizeof</span>(session_id), <span class="stringliteral">&quot;%p&quot;</span>, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;   <a class="code" href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a>(<a class="code" href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a>(&amp;failed_acl_event));</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;}</div><div class="ttc" id="structast__security__event__common_html_ab6aa0eb589925a75d104087ce946a0ad"><div class="ttname"><a href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">ast_security_event_common::event_type</a></div><div class="ttdeci">enum ast_security_event_type event_type</div><div class="ttdoc">The security event sub-type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00158">security_events_defs.h:158</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa418c48f68fe0253bf35346878d7b919"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a></div><div class="ttdeci">static enum ast_transport mansession_get_transport(const struct mansession *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03279">manager.c:3279</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ac7fc8bed1104b4557f6a183ae1155b75"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">ast_tcptls_session_instance::parent</a></div><div class="ttdeci">struct ast_tcptls_session_args * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00152">tcptls.h:152</a></div></div>
<div class="ttc" id="structast__security__event__failed__acl_html"><div class="ttname"><a href="../../df/d53/structast__security__event__failed__acl.html">ast_security_event_failed_acl</a></div><div class="ttdoc">Checking against an IP access control list failed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00203">security_events_defs.h:203</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_af08538976e14908080145cb050f39510"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a></div><div class="ttdeci">#define AST_SEC_EVT(e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00139">security_events_defs.h:139</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_a9eb882bf892c0882de06605a4f6d78b2"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#a9eb882bf892c0882de06605a4f6d78b2">AST_SECURITY_EVENT_FAILED_ACL_VERSION</a></div><div class="ttdeci">#define AST_SECURITY_EVENT_FAILED_ACL_VERSION</div><div class="ttdoc">Event descriptor version. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00208">security_events_defs.h:208</a></div></div>
<div class="ttc" id="structmansession__session_html_a54d7a5d4a31deafdc03b710cf95de534"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">mansession_session::sessionstart_tv</a></div><div class="ttdeci">struct timeval sessionstart_tv</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01590">manager.c:1590</a></div></div>
<div class="ttc" id="structast__security__event__failed__acl_html_a5853d232c74e8c3de4a3387c05c07df0"><div class="ttname"><a href="../../df/d53/structast__security__event__failed__acl.html#a5853d232c74e8c3de4a3387c05c07df0">ast_security_event_failed_acl::common</a></div><div class="ttdeci">struct ast_security_event_common common</div><div class="ttdoc">Common security event descriptor elements. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00213">security_events_defs.h:213</a></div></div>
<div class="ttc" id="structmansession_html_affd6ea965816bd0ac40c18d7b5de8de6"><div class="ttname"><a href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">mansession::tcptls_session</a></div><div class="ttdeci">struct ast_tcptls_session_instance * tcptls_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01628">manager.c:1628</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_ac2b6df8229537d9dbb35aaf6bd82372ca598f4a7e416c29b499f2bbe828a6f036"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372ca598f4a7e416c29b499f2bbe828a6f036">AST_SECURITY_EVENT_FAILED_ACL</a></div><div class="ttdoc">Failed ACL. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00048">security_events_defs.h:48</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_a6652499b3aff8f317d4c6d1a36c6c740"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">ast_tcptls_session_args::local_address</a></div><div class="ttdeci">struct ast_sockaddr local_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00130">tcptls.h:130</a></div></div>
<div class="ttc" id="include_2asterisk_2security__events_8h_html_ae13dc3d123710d7519588d54c51f8170"><div class="ttname"><a href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a></div><div class="ttdeci">int ast_security_event_report(const struct ast_security_event_common *sec)</div><div class="ttdoc">Report a security event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d30/main_2security__events_8c_source.html#l01171">main/security_events.c:1171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga83162fffa402098460159beae8406122"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga83162fffa402098460159beae8406122">&#9670;&nbsp;</a></span>report_failed_challenge_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void report_failed_challenge_response </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>expected_response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03443">3443</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00139">AST_SEC_EVT</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00105">AST_SECURITY_EVENT_CHAL_RESP_FAILED</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00429">AST_SECURITY_EVENT_CHAL_RESP_FAILED_VERSION</a>, <a class="el" href="../../d8/d30/main_2security__events_8c_source.html#l01171">ast_security_event_report()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01593">mansession_session::challenge</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00434">ast_security_event_chal_resp_failed::common</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00158">ast_security_event_common::event_type</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00449">ast_security_event_chal_resp_failed::expected_response</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00130">ast_tcptls_session_args::local_address</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03279">mansession_get_transport()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00152">ast_tcptls_session_instance::parent</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00444">ast_security_event_chal_resp_failed::response</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01590">mansession_session::sessionstart_tv</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01628">mansession::tcptls_session</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01592">mansession_session::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03505">authenticate()</a>.</p>
<div class="fragment"><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;{</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;   <span class="keywordtype">char</span> session_id[32];</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d5a/structast__security__event__chal__resp__failed.html">ast_security_event_chal_resp_failed</a> chal_resp_failed = {</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;      .<a class="code" href="../../d3/d5a/structast__security__event__chal__resp__failed.html#a5853d232c74e8c3de4a3387c05c07df0">common</a>.<a class="code" href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">event_type</a> = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372cab2e0e2ff82bce347821f967f1729c3fd">AST_SECURITY_EVENT_CHAL_RESP_FAILED</a>,</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;      .common.version    = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#a00073637bd298c4ceff7c0e257840f96">AST_SECURITY_EVENT_CHAL_RESP_FAILED_VERSION</a>,</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;      .common.service    = <span class="stringliteral">&quot;AMI&quot;</span>,</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;      .common.account_id = s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>,</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;      .common.session_tv = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">sessionstart_tv</a>,</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;      .common.local_addr = {</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a>-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">parent</a>-&gt;<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>,</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;      },</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;      .common.remote_addr = {</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>,</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;      },</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;      .common.session_id = session_id,</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;      .challenge         = s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a26209ae0bf3ca1689131b748bc838a51">challenge</a>,</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;      .response          = <a class="code" href="../../d3/d5a/structast__security__event__chal__resp__failed.html#a3002c92aebac5e2755282e16b2d6e01a">response</a>,</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;      .expected_response = <a class="code" href="../../d3/d5a/structast__security__event__chal__resp__failed.html#a6cb84dee103203abb9b4a415f108a559">expected_response</a>,</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;   };</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;   snprintf(session_id, <span class="keyword">sizeof</span>(session_id), <span class="stringliteral">&quot;%p&quot;</span>, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;   <a class="code" href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a>(<a class="code" href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a>(&amp;chal_resp_failed));</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;}</div><div class="ttc" id="structast__security__event__common_html_ab6aa0eb589925a75d104087ce946a0ad"><div class="ttname"><a href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">ast_security_event_common::event_type</a></div><div class="ttdeci">enum ast_security_event_type event_type</div><div class="ttdoc">The security event sub-type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00158">security_events_defs.h:158</a></div></div>
<div class="ttc" id="structmansession__session_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">mansession_session::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01592">manager.c:1592</a></div></div>
<div class="ttc" id="structast__security__event__chal__resp__failed_html_a6cb84dee103203abb9b4a415f108a559"><div class="ttname"><a href="../../d3/d5a/structast__security__event__chal__resp__failed.html#a6cb84dee103203abb9b4a415f108a559">ast_security_event_chal_resp_failed::expected_response</a></div><div class="ttdeci">const char * expected_response</div><div class="ttdoc">Response expected to be received. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00449">security_events_defs.h:449</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa418c48f68fe0253bf35346878d7b919"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a></div><div class="ttdeci">static enum ast_transport mansession_get_transport(const struct mansession *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03279">manager.c:3279</a></div></div>
<div class="ttc" id="structast__security__event__chal__resp__failed_html"><div class="ttname"><a href="../../d3/d5a/structast__security__event__chal__resp__failed.html">ast_security_event_chal_resp_failed</a></div><div class="ttdoc">An attempt at challenge/response auth failed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00424">security_events_defs.h:424</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ac7fc8bed1104b4557f6a183ae1155b75"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">ast_tcptls_session_instance::parent</a></div><div class="ttdeci">struct ast_tcptls_session_args * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00152">tcptls.h:152</a></div></div>
<div class="ttc" id="structast__security__event__chal__resp__failed_html_a3002c92aebac5e2755282e16b2d6e01a"><div class="ttname"><a href="../../d3/d5a/structast__security__event__chal__resp__failed.html#a3002c92aebac5e2755282e16b2d6e01a">ast_security_event_chal_resp_failed::response</a></div><div class="ttdeci">const char * response</div><div class="ttdoc">Response received. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00444">security_events_defs.h:444</a></div></div>
<div class="ttc" id="structast__security__event__chal__resp__failed_html_a5853d232c74e8c3de4a3387c05c07df0"><div class="ttname"><a href="../../d3/d5a/structast__security__event__chal__resp__failed.html#a5853d232c74e8c3de4a3387c05c07df0">ast_security_event_chal_resp_failed::common</a></div><div class="ttdeci">struct ast_security_event_common common</div><div class="ttdoc">Common security event descriptor elements. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00434">security_events_defs.h:434</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_af08538976e14908080145cb050f39510"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a></div><div class="ttdeci">#define AST_SEC_EVT(e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00139">security_events_defs.h:139</a></div></div>
<div class="ttc" id="structmansession__session_html_a54d7a5d4a31deafdc03b710cf95de534"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">mansession_session::sessionstart_tv</a></div><div class="ttdeci">struct timeval sessionstart_tv</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01590">manager.c:1590</a></div></div>
<div class="ttc" id="structmansession_html_affd6ea965816bd0ac40c18d7b5de8de6"><div class="ttname"><a href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">mansession::tcptls_session</a></div><div class="ttdeci">struct ast_tcptls_session_instance * tcptls_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01628">manager.c:1628</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_ac2b6df8229537d9dbb35aaf6bd82372cab2e0e2ff82bce347821f967f1729c3fd"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372cab2e0e2ff82bce347821f967f1729c3fd">AST_SECURITY_EVENT_CHAL_RESP_FAILED</a></div><div class="ttdoc">An attempt at challenge/response authentication failed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00105">security_events_defs.h:105</a></div></div>
<div class="ttc" id="structmansession__session_html_a26209ae0bf3ca1689131b748bc838a51"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a26209ae0bf3ca1689131b748bc838a51">mansession_session::challenge</a></div><div class="ttdeci">char challenge[10]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01593">manager.c:1593</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_a00073637bd298c4ceff7c0e257840f96"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#a00073637bd298c4ceff7c0e257840f96">AST_SECURITY_EVENT_CHAL_RESP_FAILED_VERSION</a></div><div class="ttdeci">#define AST_SECURITY_EVENT_CHAL_RESP_FAILED_VERSION</div><div class="ttdoc">Event descriptor version. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00429">security_events_defs.h:429</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_a6652499b3aff8f317d4c6d1a36c6c740"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">ast_tcptls_session_args::local_address</a></div><div class="ttdeci">struct ast_sockaddr local_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00130">tcptls.h:130</a></div></div>
<div class="ttc" id="include_2asterisk_2security__events_8h_html_ae13dc3d123710d7519588d54c51f8170"><div class="ttname"><a href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a></div><div class="ttdeci">int ast_security_event_report(const struct ast_security_event_common *sec)</div><div class="ttdoc">Report a security event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d30/main_2security__events_8c_source.html#l01171">main/security_events.c:1171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa992b47cf04699542d45129cb603c11f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa992b47cf04699542d45129cb603c11f">&#9670;&nbsp;</a></span>report_inval_password()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void report_inval_password </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>username</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03335">3335</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00139">AST_SEC_EVT</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00109">AST_SECURITY_EVENT_INVAL_PASSWORD</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00460">AST_SECURITY_EVENT_INVAL_PASSWORD_VERSION</a>, <a class="el" href="../../d8/d30/main_2security__events_8c_source.html#l01171">ast_security_event_report()</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00465">ast_security_event_inval_password::common</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00158">ast_security_event_common::event_type</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00130">ast_tcptls_session_args::local_address</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03279">mansession_get_transport()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00152">ast_tcptls_session_instance::parent</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01590">mansession_session::sessionstart_tv</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01628">mansession::tcptls_session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03505">authenticate()</a>.</p>
<div class="fragment"><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;{</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;   <span class="keywordtype">char</span> session_id[32];</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d90/structast__security__event__inval__password.html">ast_security_event_inval_password</a> inval_password = {</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;      .<a class="code" href="../../d4/d90/structast__security__event__inval__password.html#a5853d232c74e8c3de4a3387c05c07df0">common</a>.<a class="code" href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">event_type</a> = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372ca3fa859b71ad40acfebd95e787cbc373c">AST_SECURITY_EVENT_INVAL_PASSWORD</a>,</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;      .common.version    = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#ab1e2b732608d60725ece87d2a288463d">AST_SECURITY_EVENT_INVAL_PASSWORD_VERSION</a>,</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;      .common.service    = <span class="stringliteral">&quot;AMI&quot;</span>,</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;      .common.account_id = username,</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;      .common.session_tv = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">sessionstart_tv</a>,</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;      .common.local_addr = {</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a>-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">parent</a>-&gt;<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>,</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;      },</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;      .common.remote_addr = {</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>,</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;      },</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;      .common.session_id = session_id,</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;   };</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;   snprintf(session_id, <span class="keyword">sizeof</span>(session_id), <span class="stringliteral">&quot;%p&quot;</span>, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;   <a class="code" href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a>(<a class="code" href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a>(&amp;inval_password));</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;}</div><div class="ttc" id="security__events__defs_8h_html_ac2b6df8229537d9dbb35aaf6bd82372ca3fa859b71ad40acfebd95e787cbc373c"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372ca3fa859b71ad40acfebd95e787cbc373c">AST_SECURITY_EVENT_INVAL_PASSWORD</a></div><div class="ttdoc">An attempt at basic password authentication failed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00109">security_events_defs.h:109</a></div></div>
<div class="ttc" id="structast__security__event__common_html_ab6aa0eb589925a75d104087ce946a0ad"><div class="ttname"><a href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">ast_security_event_common::event_type</a></div><div class="ttdeci">enum ast_security_event_type event_type</div><div class="ttdoc">The security event sub-type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00158">security_events_defs.h:158</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa418c48f68fe0253bf35346878d7b919"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a></div><div class="ttdeci">static enum ast_transport mansession_get_transport(const struct mansession *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03279">manager.c:3279</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ac7fc8bed1104b4557f6a183ae1155b75"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">ast_tcptls_session_instance::parent</a></div><div class="ttdeci">struct ast_tcptls_session_args * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00152">tcptls.h:152</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_af08538976e14908080145cb050f39510"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a></div><div class="ttdeci">#define AST_SEC_EVT(e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00139">security_events_defs.h:139</a></div></div>
<div class="ttc" id="structast__security__event__inval__password_html"><div class="ttname"><a href="../../d4/d90/structast__security__event__inval__password.html">ast_security_event_inval_password</a></div><div class="ttdoc">An attempt at basic password auth failed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00455">security_events_defs.h:455</a></div></div>
<div class="ttc" id="structast__security__event__inval__password_html_a5853d232c74e8c3de4a3387c05c07df0"><div class="ttname"><a href="../../d4/d90/structast__security__event__inval__password.html#a5853d232c74e8c3de4a3387c05c07df0">ast_security_event_inval_password::common</a></div><div class="ttdeci">struct ast_security_event_common common</div><div class="ttdoc">Common security event descriptor elements. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00465">security_events_defs.h:465</a></div></div>
<div class="ttc" id="structmansession__session_html_a54d7a5d4a31deafdc03b710cf95de534"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">mansession_session::sessionstart_tv</a></div><div class="ttdeci">struct timeval sessionstart_tv</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01590">manager.c:1590</a></div></div>
<div class="ttc" id="structmansession_html_affd6ea965816bd0ac40c18d7b5de8de6"><div class="ttname"><a href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">mansession::tcptls_session</a></div><div class="ttdeci">struct ast_tcptls_session_instance * tcptls_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01628">manager.c:1628</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_ab1e2b732608d60725ece87d2a288463d"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#ab1e2b732608d60725ece87d2a288463d">AST_SECURITY_EVENT_INVAL_PASSWORD_VERSION</a></div><div class="ttdeci">#define AST_SECURITY_EVENT_INVAL_PASSWORD_VERSION</div><div class="ttdoc">Event descriptor version. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00460">security_events_defs.h:460</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_a6652499b3aff8f317d4c6d1a36c6c740"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">ast_tcptls_session_args::local_address</a></div><div class="ttdeci">struct ast_sockaddr local_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00130">tcptls.h:130</a></div></div>
<div class="ttc" id="include_2asterisk_2security__events_8h_html_ae13dc3d123710d7519588d54c51f8170"><div class="ttname"><a href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a></div><div class="ttdeci">int ast_security_event_report(const struct ast_security_event_common *sec)</div><div class="ttdoc">Report a security event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d30/main_2security__events_8c_source.html#l01171">main/security_events.c:1171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga16a1493b33939fc5e485953855078109"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga16a1493b33939fc5e485953855078109">&#9670;&nbsp;</a></span>report_invalid_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void report_invalid_user </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>username</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03285">3285</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00139">AST_SEC_EVT</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00056">AST_SECURITY_EVENT_INVAL_ACCT_ID</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00229">AST_SECURITY_EVENT_INVAL_ACCT_ID_VERSION</a>, <a class="el" href="../../d8/d30/main_2security__events_8c_source.html#l01171">ast_security_event_report()</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00234">ast_security_event_inval_acct_id::common</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00158">ast_security_event_common::event_type</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00130">ast_tcptls_session_args::local_address</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03279">mansession_get_transport()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00152">ast_tcptls_session_instance::parent</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01590">mansession_session::sessionstart_tv</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01628">mansession::tcptls_session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03505">authenticate()</a>.</p>
<div class="fragment"><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;{</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;   <span class="keywordtype">char</span> session_id[32];</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dc8/structast__security__event__inval__acct__id.html">ast_security_event_inval_acct_id</a> inval_acct_id = {</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;      .<a class="code" href="../../dd/dc8/structast__security__event__inval__acct__id.html#a5853d232c74e8c3de4a3387c05c07df0">common</a>.<a class="code" href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">event_type</a> = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372caee96f0d4fa24a2f49c4b0374c230d5d7">AST_SECURITY_EVENT_INVAL_ACCT_ID</a>,</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;      .common.version    = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#aba272dad0be48d171bd66fde6f64db37">AST_SECURITY_EVENT_INVAL_ACCT_ID_VERSION</a>,</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;      .common.service    = <span class="stringliteral">&quot;AMI&quot;</span>,</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;      .common.account_id = username,</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;      .common.session_tv = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">sessionstart_tv</a>,</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;      .common.local_addr = {</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a>-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">parent</a>-&gt;<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>,</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;      },</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;      .common.remote_addr = {</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>,</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;      },</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;      .common.session_id = session_id,</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;   };</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;   snprintf(session_id, <span class="keyword">sizeof</span>(session_id), <span class="stringliteral">&quot;%p&quot;</span>, s);</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;   <a class="code" href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a>(<a class="code" href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a>(&amp;inval_acct_id));</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;}</div><div class="ttc" id="structast__security__event__common_html_ab6aa0eb589925a75d104087ce946a0ad"><div class="ttname"><a href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">ast_security_event_common::event_type</a></div><div class="ttdeci">enum ast_security_event_type event_type</div><div class="ttdoc">The security event sub-type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00158">security_events_defs.h:158</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa418c48f68fe0253bf35346878d7b919"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a></div><div class="ttdeci">static enum ast_transport mansession_get_transport(const struct mansession *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03279">manager.c:3279</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ac7fc8bed1104b4557f6a183ae1155b75"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">ast_tcptls_session_instance::parent</a></div><div class="ttdeci">struct ast_tcptls_session_args * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00152">tcptls.h:152</a></div></div>
<div class="ttc" id="structast__security__event__inval__acct__id_html_a5853d232c74e8c3de4a3387c05c07df0"><div class="ttname"><a href="../../dd/dc8/structast__security__event__inval__acct__id.html#a5853d232c74e8c3de4a3387c05c07df0">ast_security_event_inval_acct_id::common</a></div><div class="ttdeci">struct ast_security_event_common common</div><div class="ttdoc">Common security event descriptor elements. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00234">security_events_defs.h:234</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_af08538976e14908080145cb050f39510"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a></div><div class="ttdeci">#define AST_SEC_EVT(e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00139">security_events_defs.h:139</a></div></div>
<div class="ttc" id="structmansession__session_html_a54d7a5d4a31deafdc03b710cf95de534"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">mansession_session::sessionstart_tv</a></div><div class="ttdeci">struct timeval sessionstart_tv</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01590">manager.c:1590</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_aba272dad0be48d171bd66fde6f64db37"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#aba272dad0be48d171bd66fde6f64db37">AST_SECURITY_EVENT_INVAL_ACCT_ID_VERSION</a></div><div class="ttdeci">#define AST_SECURITY_EVENT_INVAL_ACCT_ID_VERSION</div><div class="ttdoc">Event descriptor version. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00229">security_events_defs.h:229</a></div></div>
<div class="ttc" id="structmansession_html_affd6ea965816bd0ac40c18d7b5de8de6"><div class="ttname"><a href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">mansession::tcptls_session</a></div><div class="ttdeci">struct ast_tcptls_session_instance * tcptls_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01628">manager.c:1628</a></div></div>
<div class="ttc" id="structast__security__event__inval__acct__id_html"><div class="ttname"><a href="../../dd/dc8/structast__security__event__inval__acct__id.html">ast_security_event_inval_acct_id</a></div><div class="ttdoc">Invalid account ID specified (invalid username, for example) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00224">security_events_defs.h:224</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_ac2b6df8229537d9dbb35aaf6bd82372caee96f0d4fa24a2f49c4b0374c230d5d7"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372caee96f0d4fa24a2f49c4b0374c230d5d7">AST_SECURITY_EVENT_INVAL_ACCT_ID</a></div><div class="ttdoc">Invalid Account ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00056">security_events_defs.h:56</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_a6652499b3aff8f317d4c6d1a36c6c740"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">ast_tcptls_session_args::local_address</a></div><div class="ttdeci">struct ast_sockaddr local_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00130">tcptls.h:130</a></div></div>
<div class="ttc" id="include_2asterisk_2security__events_8h_html_ae13dc3d123710d7519588d54c51f8170"><div class="ttname"><a href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a></div><div class="ttdeci">int ast_security_event_report(const struct ast_security_event_common *sec)</div><div class="ttdoc">Report a security event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d30/main_2security__events_8c_source.html#l01171">main/security_events.c:1171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gae3ee6e147a9a6e5ee1cd6bd91a194c07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae3ee6e147a9a6e5ee1cd6bd91a194c07">&#9670;&nbsp;</a></span>report_req_bad_format()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void report_req_bad_format </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>action</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03414">3414</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00139">AST_SEC_EVT</a>, <a class="el" href="../../d8/d30/main_2security__events_8c_source.html#l01171">ast_security_event_report()</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00093">AST_SECURITY_EVENT_REQ_BAD_FORMAT</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00361">AST_SECURITY_EVENT_REQ_BAD_FORMAT_VERSION</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00366">ast_security_event_req_bad_format::common</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00158">ast_security_event_common::event_type</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00130">ast_tcptls_session_args::local_address</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03279">mansession_get_transport()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00152">ast_tcptls_session_instance::parent</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00324">ast_security_event_req_not_allowed::request_type</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00371">ast_security_event_req_bad_format::request_type</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01590">mansession_session::sessionstart_tv</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01628">mansession::tcptls_session</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01592">mansession_session::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;{</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;   <span class="keywordtype">char</span> session_id[32];</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;   <span class="keywordtype">char</span> request_type[64];</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dc1/structast__security__event__req__bad__format.html">ast_security_event_req_bad_format</a> req_bad_format = {</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;      .<a class="code" href="../../d1/dc1/structast__security__event__req__bad__format.html#a5853d232c74e8c3de4a3387c05c07df0">common</a>.<a class="code" href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">event_type</a> = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372cab585ccf798297c5ad872cdc8c86da5b5">AST_SECURITY_EVENT_REQ_BAD_FORMAT</a>,</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;      .common.version    = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#a7abc0e2e7315ff4d193e700fa6f1e31e">AST_SECURITY_EVENT_REQ_BAD_FORMAT_VERSION</a>,</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;      .common.service    = <span class="stringliteral">&quot;AMI&quot;</span>,</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;      .common.account_id = s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>,</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;      .common.session_tv = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">sessionstart_tv</a>,</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;      .common.local_addr = {</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a>-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">parent</a>-&gt;<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>,</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;      },</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;      .common.remote_addr = {</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>,</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;      },</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;      .common.session_id = session_id,</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;      .request_type      = <a class="code" href="../../d1/dc1/structast__security__event__req__bad__format.html#afd6258b84dc45cf613b1896565860f70">request_type</a>,</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;   };</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;   snprintf(session_id, <span class="keyword">sizeof</span>(session_id), <span class="stringliteral">&quot;%p&quot;</span>, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;   snprintf(request_type, <span class="keyword">sizeof</span>(request_type), <span class="stringliteral">&quot;Action: %s&quot;</span>, action);</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;   <a class="code" href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a>(<a class="code" href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a>(&amp;req_bad_format));</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;}</div><div class="ttc" id="structast__security__event__common_html_ab6aa0eb589925a75d104087ce946a0ad"><div class="ttname"><a href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">ast_security_event_common::event_type</a></div><div class="ttdeci">enum ast_security_event_type event_type</div><div class="ttdoc">The security event sub-type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00158">security_events_defs.h:158</a></div></div>
<div class="ttc" id="structmansession__session_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">mansession_session::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01592">manager.c:1592</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa418c48f68fe0253bf35346878d7b919"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a></div><div class="ttdeci">static enum ast_transport mansession_get_transport(const struct mansession *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03279">manager.c:3279</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ac7fc8bed1104b4557f6a183ae1155b75"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">ast_tcptls_session_instance::parent</a></div><div class="ttdeci">struct ast_tcptls_session_args * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00152">tcptls.h:152</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="structast__security__event__req__bad__format_html_a5853d232c74e8c3de4a3387c05c07df0"><div class="ttname"><a href="../../d1/dc1/structast__security__event__req__bad__format.html#a5853d232c74e8c3de4a3387c05c07df0">ast_security_event_req_bad_format::common</a></div><div class="ttdeci">struct ast_security_event_common common</div><div class="ttdoc">Common security event descriptor elements. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00366">security_events_defs.h:366</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_af08538976e14908080145cb050f39510"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a></div><div class="ttdeci">#define AST_SEC_EVT(e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00139">security_events_defs.h:139</a></div></div>
<div class="ttc" id="structast__security__event__req__bad__format_html_afd6258b84dc45cf613b1896565860f70"><div class="ttname"><a href="../../d1/dc1/structast__security__event__req__bad__format.html#afd6258b84dc45cf613b1896565860f70">ast_security_event_req_bad_format::request_type</a></div><div class="ttdeci">const char * request_type</div><div class="ttdoc">Request type that was made. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00371">security_events_defs.h:371</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_ac2b6df8229537d9dbb35aaf6bd82372cab585ccf798297c5ad872cdc8c86da5b5"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372cab585ccf798297c5ad872cdc8c86da5b5">AST_SECURITY_EVENT_REQ_BAD_FORMAT</a></div><div class="ttdoc">Request received with bad formatting. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00093">security_events_defs.h:93</a></div></div>
<div class="ttc" id="structmansession__session_html_a54d7a5d4a31deafdc03b710cf95de534"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">mansession_session::sessionstart_tv</a></div><div class="ttdeci">struct timeval sessionstart_tv</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01590">manager.c:1590</a></div></div>
<div class="ttc" id="structmansession_html_affd6ea965816bd0ac40c18d7b5de8de6"><div class="ttname"><a href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">mansession::tcptls_session</a></div><div class="ttdeci">struct ast_tcptls_session_instance * tcptls_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01628">manager.c:1628</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_a7abc0e2e7315ff4d193e700fa6f1e31e"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#a7abc0e2e7315ff4d193e700fa6f1e31e">AST_SECURITY_EVENT_REQ_BAD_FORMAT_VERSION</a></div><div class="ttdeci">#define AST_SECURITY_EVENT_REQ_BAD_FORMAT_VERSION</div><div class="ttdoc">Event descriptor version. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00361">security_events_defs.h:361</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="structast__security__event__req__bad__format_html"><div class="ttname"><a href="../../d1/dc1/structast__security__event__req__bad__format.html">ast_security_event_req_bad_format</a></div><div class="ttdoc">Invalid formatting of request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00356">security_events_defs.h:356</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_a6652499b3aff8f317d4c6d1a36c6c740"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">ast_tcptls_session_args::local_address</a></div><div class="ttdeci">struct ast_sockaddr local_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00130">tcptls.h:130</a></div></div>
<div class="ttc" id="include_2asterisk_2security__events_8h_html_ae13dc3d123710d7519588d54c51f8170"><div class="ttname"><a href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a></div><div class="ttdeci">int ast_security_event_report(const struct ast_security_event_common *sec)</div><div class="ttdoc">Report a security event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d30/main_2security__events_8c_source.html#l01171">main/security_events.c:1171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa6a02209ea6747897dfd5249fe631105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa6a02209ea6747897dfd5249fe631105">&#9670;&nbsp;</a></span>report_req_not_allowed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void report_req_not_allowed </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>action</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03385">3385</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00139">AST_SEC_EVT</a>, <a class="el" href="../../d8/d30/main_2security__events_8c_source.html#l01171">ast_security_event_report()</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00085">AST_SECURITY_EVENT_REQ_NOT_ALLOWED</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00314">AST_SECURITY_EVENT_REQ_NOT_ALLOWED_VERSION</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00319">ast_security_event_req_not_allowed::common</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00158">ast_security_event_common::event_type</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00130">ast_tcptls_session_args::local_address</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03279">mansession_get_transport()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00152">ast_tcptls_session_instance::parent</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00324">ast_security_event_req_not_allowed::request_type</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01590">mansession_session::sessionstart_tv</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01628">mansession::tcptls_session</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01592">mansession_session::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;{</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;   <span class="keywordtype">char</span> session_id[32];</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d1/dc1/structast__security__event__req__bad__format.html#afd6258b84dc45cf613b1896565860f70">request_type</a>[64];</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/dc7/structast__security__event__req__not__allowed.html">ast_security_event_req_not_allowed</a> req_not_allowed = {</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;      .<a class="code" href="../../d0/dc7/structast__security__event__req__not__allowed.html#a5853d232c74e8c3de4a3387c05c07df0">common</a>.<a class="code" href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">event_type</a> = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372ca90d668ad235bcb611b3f5a7143675f7e">AST_SECURITY_EVENT_REQ_NOT_ALLOWED</a>,</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;      .common.version    = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#a6d839ed02640b1090706c4492f81a796">AST_SECURITY_EVENT_REQ_NOT_ALLOWED_VERSION</a>,</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;      .common.service    = <span class="stringliteral">&quot;AMI&quot;</span>,</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;      .common.account_id = s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>,</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;      .common.session_tv = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">sessionstart_tv</a>,</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;      .common.local_addr = {</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a>-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">parent</a>-&gt;<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>,</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;      },</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;      .common.remote_addr = {</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>,</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;      },</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;      .common.session_id = session_id,</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;      .request_type      = <a class="code" href="../../d0/dc7/structast__security__event__req__not__allowed.html#afd6258b84dc45cf613b1896565860f70">request_type</a>,</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;   };</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;   snprintf(session_id, <span class="keyword">sizeof</span>(session_id), <span class="stringliteral">&quot;%p&quot;</span>, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;   snprintf(request_type, <span class="keyword">sizeof</span>(request_type), <span class="stringliteral">&quot;Action: %s&quot;</span>, action);</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;   <a class="code" href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a>(<a class="code" href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a>(&amp;req_not_allowed));</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;}</div><div class="ttc" id="structast__security__event__common_html_ab6aa0eb589925a75d104087ce946a0ad"><div class="ttname"><a href="../../dd/d40/structast__security__event__common.html#ab6aa0eb589925a75d104087ce946a0ad">ast_security_event_common::event_type</a></div><div class="ttdeci">enum ast_security_event_type event_type</div><div class="ttdoc">The security event sub-type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00158">security_events_defs.h:158</a></div></div>
<div class="ttc" id="structmansession__session_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">mansession_session::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01592">manager.c:1592</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa418c48f68fe0253bf35346878d7b919"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a></div><div class="ttdeci">static enum ast_transport mansession_get_transport(const struct mansession *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03279">manager.c:3279</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ac7fc8bed1104b4557f6a183ae1155b75"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">ast_tcptls_session_instance::parent</a></div><div class="ttdeci">struct ast_tcptls_session_args * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00152">tcptls.h:152</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_ac2b6df8229537d9dbb35aaf6bd82372ca90d668ad235bcb611b3f5a7143675f7e"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372ca90d668ad235bcb611b3f5a7143675f7e">AST_SECURITY_EVENT_REQ_NOT_ALLOWED</a></div><div class="ttdoc">A request was made that is not allowed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00085">security_events_defs.h:85</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_af08538976e14908080145cb050f39510"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a></div><div class="ttdeci">#define AST_SEC_EVT(e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00139">security_events_defs.h:139</a></div></div>
<div class="ttc" id="structast__security__event__req__bad__format_html_afd6258b84dc45cf613b1896565860f70"><div class="ttname"><a href="../../d1/dc1/structast__security__event__req__bad__format.html#afd6258b84dc45cf613b1896565860f70">ast_security_event_req_bad_format::request_type</a></div><div class="ttdeci">const char * request_type</div><div class="ttdoc">Request type that was made. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00371">security_events_defs.h:371</a></div></div>
<div class="ttc" id="structmansession__session_html_a54d7a5d4a31deafdc03b710cf95de534"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">mansession_session::sessionstart_tv</a></div><div class="ttdeci">struct timeval sessionstart_tv</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01590">manager.c:1590</a></div></div>
<div class="ttc" id="structmansession_html_affd6ea965816bd0ac40c18d7b5de8de6"><div class="ttname"><a href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">mansession::tcptls_session</a></div><div class="ttdeci">struct ast_tcptls_session_instance * tcptls_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01628">manager.c:1628</a></div></div>
<div class="ttc" id="structast__security__event__req__not__allowed_html_a5853d232c74e8c3de4a3387c05c07df0"><div class="ttname"><a href="../../d0/dc7/structast__security__event__req__not__allowed.html#a5853d232c74e8c3de4a3387c05c07df0">ast_security_event_req_not_allowed::common</a></div><div class="ttdeci">struct ast_security_event_common common</div><div class="ttdoc">Common security event descriptor elements. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00319">security_events_defs.h:319</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_a6652499b3aff8f317d4c6d1a36c6c740"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">ast_tcptls_session_args::local_address</a></div><div class="ttdeci">struct ast_sockaddr local_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00130">tcptls.h:130</a></div></div>
<div class="ttc" id="include_2asterisk_2security__events_8h_html_ae13dc3d123710d7519588d54c51f8170"><div class="ttname"><a href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a></div><div class="ttdeci">int ast_security_event_report(const struct ast_security_event_common *sec)</div><div class="ttdoc">Report a security event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d30/main_2security__events_8c_source.html#l01171">main/security_events.c:1171</a></div></div>
<div class="ttc" id="structast__security__event__req__not__allowed_html"><div class="ttname"><a href="../../d0/dc7/structast__security__event__req__not__allowed.html">ast_security_event_req_not_allowed</a></div><div class="ttdoc">Request denied because it&amp;#39;s not allowed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00309">security_events_defs.h:309</a></div></div>
<div class="ttc" id="structast__security__event__req__not__allowed_html_afd6258b84dc45cf613b1896565860f70"><div class="ttname"><a href="../../d0/dc7/structast__security__event__req__not__allowed.html#afd6258b84dc45cf613b1896565860f70">ast_security_event_req_not_allowed::request_type</a></div><div class="ttdeci">const char * request_type</div><div class="ttdoc">Request type that was made. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00324">security_events_defs.h:324</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_a6d839ed02640b1090706c4492f81a796"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#a6d839ed02640b1090706c4492f81a796">AST_SECURITY_EVENT_REQ_NOT_ALLOWED_VERSION</a></div><div class="ttdeci">#define AST_SECURITY_EVENT_REQ_NOT_ALLOWED_VERSION</div><div class="ttdoc">Event descriptor version. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00314">security_events_defs.h:314</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gab68a64554e2df0f2d926faf603848aed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab68a64554e2df0f2d926faf603848aed">&#9670;&nbsp;</a></span>report_session_limit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void report_session_limit </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03473">3473</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00139">AST_SEC_EVT</a>, <a class="el" href="../../d8/d30/main_2security__events_8c_source.html#l01171">ast_security_event_report()</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00063">AST_SECURITY_EVENT_SESSION_LIMIT</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00245">AST_SECURITY_EVENT_SESSION_LIMIT_VERSION</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00250">ast_security_event_session_limit::common</a>, <a class="el" href="../../d7/dc2/security__events__defs_8h_source.html#l00158">ast_security_event_common::event_type</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00130">ast_tcptls_session_args::local_address</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03279">mansession_get_transport()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00152">ast_tcptls_session_instance::parent</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01590">mansession_session::sessionstart_tv</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01628">mansession::tcptls_session</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01592">mansession_session::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06607">process_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;{</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;   <span class="keywordtype">char</span> session_id[32];</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d64/structast__security__event__session__limit.html">ast_security_event_session_limit</a> <a class="code" href="../../dd/d43/http_8c.html#af9b90c23264e36e6492a2eb8598c9bf0">session_limit</a> = {</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;      .common.event_type = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372ca41e5b6416947030699a9267106bc1a46">AST_SECURITY_EVENT_SESSION_LIMIT</a>,</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;      .common.version    = <a class="code" href="../../d7/dc2/security__events__defs_8h.html#a27d0c312ea7e7e429f26e8e88155da1e">AST_SECURITY_EVENT_SESSION_LIMIT_VERSION</a>,</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;      .common.service    = <span class="stringliteral">&quot;AMI&quot;</span>,</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;      .common.account_id = s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>,</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;      .common.session_tv = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">sessionstart_tv</a>,</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;      .common.local_addr = {</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a>-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">parent</a>-&gt;<a class="code" href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">local_address</a>,</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;      },</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;      .common.remote_addr = {</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;         .addr      = &amp;s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>,</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;         .transport = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a>(s),</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;      },</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;      .common.session_id = session_id,</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;   };</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;   snprintf(session_id, <span class="keyword">sizeof</span>(session_id), <span class="stringliteral">&quot;%p&quot;</span>, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;   <a class="code" href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a>(<a class="code" href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a>(&amp;session_limit));</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;}</div><div class="ttc" id="structmansession__session_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">mansession_session::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01592">manager.c:1592</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa418c48f68fe0253bf35346878d7b919"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa418c48f68fe0253bf35346878d7b919">mansession_get_transport</a></div><div class="ttdeci">static enum ast_transport mansession_get_transport(const struct mansession *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03279">manager.c:3279</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_ac7fc8bed1104b4557f6a183ae1155b75"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#ac7fc8bed1104b4557f6a183ae1155b75">ast_tcptls_session_instance::parent</a></div><div class="ttdeci">struct ast_tcptls_session_args * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00152">tcptls.h:152</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_af08538976e14908080145cb050f39510"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#af08538976e14908080145cb050f39510">AST_SEC_EVT</a></div><div class="ttdeci">#define AST_SEC_EVT(e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00139">security_events_defs.h:139</a></div></div>
<div class="ttc" id="structast__security__event__session__limit_html"><div class="ttname"><a href="../../d7/d64/structast__security__event__session__limit.html">ast_security_event_session_limit</a></div><div class="ttdoc">Request denied because of a session limit. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00240">security_events_defs.h:240</a></div></div>
<div class="ttc" id="structmansession__session_html_a54d7a5d4a31deafdc03b710cf95de534"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a54d7a5d4a31deafdc03b710cf95de534">mansession_session::sessionstart_tv</a></div><div class="ttdeci">struct timeval sessionstart_tv</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01590">manager.c:1590</a></div></div>
<div class="ttc" id="structmansession_html_affd6ea965816bd0ac40c18d7b5de8de6"><div class="ttname"><a href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">mansession::tcptls_session</a></div><div class="ttdeci">struct ast_tcptls_session_instance * tcptls_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01628">manager.c:1628</a></div></div>
<div class="ttc" id="http_8c_html_af9b90c23264e36e6492a2eb8598c9bf0"><div class="ttname"><a href="../../dd/d43/http_8c.html#af9b90c23264e36e6492a2eb8598c9bf0">session_limit</a></div><div class="ttdeci">static int session_limit</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00106">http.c:106</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_ac2b6df8229537d9dbb35aaf6bd82372ca41e5b6416947030699a9267106bc1a46"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#ac2b6df8229537d9dbb35aaf6bd82372ca41e5b6416947030699a9267106bc1a46">AST_SECURITY_EVENT_SESSION_LIMIT</a></div><div class="ttdoc">Session limit reached. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00063">security_events_defs.h:63</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="structast__tcptls__session__args_html_a6652499b3aff8f317d4c6d1a36c6c740"><div class="ttname"><a href="../../da/d2b/structast__tcptls__session__args.html#a6652499b3aff8f317d4c6d1a36c6c740">ast_tcptls_session_args::local_address</a></div><div class="ttdeci">struct ast_sockaddr local_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00130">tcptls.h:130</a></div></div>
<div class="ttc" id="include_2asterisk_2security__events_8h_html_ae13dc3d123710d7519588d54c51f8170"><div class="ttname"><a href="../../d0/d29/include_2asterisk_2security__events_8h.html#ae13dc3d123710d7519588d54c51f8170">ast_security_event_report</a></div><div class="ttdeci">int ast_security_event_report(const struct ast_security_event_common *sec)</div><div class="ttdoc">Report a security event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d30/main_2security__events_8c_source.html#l01171">main/security_events.c:1171</a></div></div>
<div class="ttc" id="security__events__defs_8h_html_a27d0c312ea7e7e429f26e8e88155da1e"><div class="ttname"><a href="../../d7/dc2/security__events__defs_8h.html#a27d0c312ea7e7e429f26e8e88155da1e">AST_SECURITY_EVENT_SESSION_LIMIT_VERSION</a></div><div class="ttdeci">#define AST_SECURITY_EVENT_SESSION_LIMIT_VERSION</div><div class="ttdoc">Event descriptor version. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc2/security__events__defs_8h_source.html#l00245">security_events_defs.h:245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa7c66558ac59bdb0c8d05864aaec9c22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa7c66558ac59bdb0c8d05864aaec9c22">&#9670;&nbsp;</a></span>send_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_string </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>helper function to send a string to the socket. Return -1 on error (e.g. buffer full). </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03025">3025</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00113">ast_iostream_set_timeout_disable()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00121">ast_iostream_set_timeout_inactivity()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00374">ast_iostream_write()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00085">EVENT_FLAG_HOOKRESPONSE</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00112">manager_custom_hook::helper</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01631">mansession::hook</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01584">mansession_session::stream</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01627">mansession::stream</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01630">mansession::write_error</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01604">mansession_session::writetimeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03068">astman_flush()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06227">process_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;{</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d03/structast__iostream.html">ast_iostream</a> *stream;</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, res;</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;   <span class="comment">/* It&#39;s a result from one of the hook&#39;s action invocation */</span></div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#a9469556f47f367a9b16433ba1c2247fe">hook</a>) {</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;<span class="comment">       * to send responses, we&#39;re using the same function</span></div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;<span class="comment">       * as for receiving events. We call the event &quot;HookResponse&quot;</span></div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;      s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#a9469556f47f367a9b16433ba1c2247fe">hook</a>-&gt;<a class="code" href="../../d0/d10/structmanager__custom__hook.html#a563331ff9859f8ff63ed061c4c68d8cd">helper</a>(<a class="code" href="../../db/d45/manager_8h.html#aae40009621df41a713be987266a11696">EVENT_FLAG_HOOKRESPONSE</a>, <span class="stringliteral">&quot;HookResponse&quot;</span>, <span class="keywordtype">string</span>);</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;   }</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;   stream = s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a> ? s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a> : s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>;</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;   len = strlen(<span class="keywordtype">string</span>);</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;   <a class="code" href="../../dd/d27/iostream_8h.html#a385d6e715173db6bc4b703afc05f45df">ast_iostream_set_timeout_inactivity</a>(stream, s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a67c9d5e7f3b13cfc7fe3b4e395c81443">writetimeout</a>);</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;   res = <a class="code" href="../../dd/d27/iostream_8h.html#a6e0bf2afcbc5b330b96378626f9ac5b3">ast_iostream_write</a>(stream, <span class="keywordtype">string</span>, len);</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;   <a class="code" href="../../dd/d27/iostream_8h.html#ace332a00f395eb7d1c93d0ee00bdf6c2">ast_iostream_set_timeout_disable</a>(stream);</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;   <span class="keywordflow">if</span> (res &lt; len) {</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;      s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#a4905d9704cb1eb3ff285e4fb8aa9c68d">write_error</a> = 1;</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;   }</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;}</div><div class="ttc" id="structmansession_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d2/d8a/structmansession.html#a36ac2dd734607a43ed90acb7e9d81ac5">mansession::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01627">manager.c:1627</a></div></div>
<div class="ttc" id="iostream_8h_html_a6e0bf2afcbc5b330b96378626f9ac5b3"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a6e0bf2afcbc5b330b96378626f9ac5b3">ast_iostream_write</a></div><div class="ttdeci">ssize_t ast_iostream_write(struct ast_iostream *stream, const void *buffer, size_t count)</div><div class="ttdoc">Write data to an iostream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00374">iostream.c:374</a></div></div>
<div class="ttc" id="iostream_8h_html_a385d6e715173db6bc4b703afc05f45df"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a385d6e715173db6bc4b703afc05f45df">ast_iostream_set_timeout_inactivity</a></div><div class="ttdeci">void ast_iostream_set_timeout_inactivity(struct ast_iostream *stream, int timeout)</div><div class="ttdoc">Set the iostream inactivity timeout timer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00121">iostream.c:121</a></div></div>
<div class="ttc" id="structmansession__session_html_a67c9d5e7f3b13cfc7fe3b4e395c81443"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a67c9d5e7f3b13cfc7fe3b4e395c81443">mansession_session::writetimeout</a></div><div class="ttdeci">int writetimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01604">manager.c:1604</a></div></div>
<div class="ttc" id="structast__iostream_html"><div class="ttname"><a href="../../de/d03/structast__iostream.html">ast_iostream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00039">iostream.c:39</a></div></div>
<div class="ttc" id="iostream_8h_html_ace332a00f395eb7d1c93d0ee00bdf6c2"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#ace332a00f395eb7d1c93d0ee00bdf6c2">ast_iostream_set_timeout_disable</a></div><div class="ttdeci">void ast_iostream_set_timeout_disable(struct ast_iostream *stream)</div><div class="ttdoc">Disable the iostream timeout timer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00113">iostream.c:113</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="manager_8h_html_aae40009621df41a713be987266a11696"><div class="ttname"><a href="../../db/d45/manager_8h.html#aae40009621df41a713be987266a11696">EVENT_FLAG_HOOKRESPONSE</a></div><div class="ttdeci">#define EVENT_FLAG_HOOKRESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00085">manager.h:85</a></div></div>
<div class="ttc" id="structmansession__session_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">mansession_session::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01584">manager.c:1584</a></div></div>
<div class="ttc" id="structmansession_html_a4905d9704cb1eb3ff285e4fb8aa9c68d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#a4905d9704cb1eb3ff285e4fb8aa9c68d">mansession::write_error</a></div><div class="ttdeci">unsigned int write_error</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01630">manager.c:1630</a></div></div>
<div class="ttc" id="structmanager__custom__hook_html_a563331ff9859f8ff63ed061c4c68d8cd"><div class="ttname"><a href="../../d0/d10/structmanager__custom__hook.html#a563331ff9859f8ff63ed061c4c68d8cd">manager_custom_hook::helper</a></div><div class="ttdeci">manager_hook_t helper</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00112">manager.h:112</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="structmansession_html_a9469556f47f367a9b16433ba1c2247fe"><div class="ttname"><a href="../../d2/d8a/structmansession.html#a9469556f47f367a9b16433ba1c2247fe">mansession::hook</a></div><div class="ttdeci">struct manager_custom_hook * hook</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01631">manager.c:1631</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga556bc46323d87c59cf471a5f48c7d2d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga556bc46323d87c59cf471a5f48c7d2d5">&#9670;&nbsp;</a></span>session_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void session_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d05/structmansession__session.html">mansession_session</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02269">2269</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01598">ao2_unlink</a>, <a class="el" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02183">unref_mansession()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07031">purge_sessions()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06937">session_do()</a>.</p>
<div class="fragment"><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;{</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a>;</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;   sessions = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(mgr_sessions);</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;   <span class="keywordflow">if</span> (sessions) {</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(sessions, s);</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sessions, -1);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;   }</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga5e4938c2cafe6e01553cb952ca1f5e45">unref_mansession</a>(s);</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;}</div><div class="ttc" id="chan__skinny_8c_html_a61aa7b9ad75e714f776c1f82bcc3359f"><div class="ttname"><a href="../../d0/d80/chan__skinny_8c.html#a61aa7b9ad75e714f776c1f82bcc3359f">sessions</a></div><div class="ttdeci">static struct sessions sessions</div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga5e4938c2cafe6e01553cb952ca1f5e45"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga5e4938c2cafe6e01553cb952ca1f5e45">unref_mansession</a></div><div class="ttdeci">static struct mansession_session * unref_mansession(struct mansession_session *s)</div><div class="ttdoc">Unreference manager session object. If no more references, then go ahead and delete it...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02183">manager.c:2183</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga6d2190ae1fcb37e66c2a445f2fe59ec3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6d2190ae1fcb37e66c2a445f2fe59ec3">&#9670;&nbsp;</a></span>session_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void session_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02198">2198</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../d7/d7a/datastore_8c_source.html#l00068">ast_datastore_free()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01600">mansession_session::blackfilters</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01601">mansession_session::chanvars</a>, <a class="el" href="../../df/d05/structmansession__session.html#ac973a08be5923acefc1e920ce302f47b">mansession_session::datastores</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01603">mansession_session::last_ev</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01610">mansession_session::notify_lock</a>, <a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01460">eventqent::usecount</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01599">mansession_session::whitefilters</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l02229">build_mansession()</a>.</p>
<div class="fragment"><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;{</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d05/structmansession__session.html">mansession_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a> = obj;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d94/structeventqent.html">eventqent</a> *eqe = session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab825707392ccdf6562c396bf1037b7a3">last_ev</a>;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;   <span class="comment">/* Get rid of each of the data stores on the session */</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;   <span class="keywordflow">while</span> ((datastore = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ac973a08be5923acefc1e920ce302f47b">datastores</a>, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;      <span class="comment">/* Free the data store */</span></div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;   }</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;   <span class="keywordflow">if</span> (eqe) {</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;eqe-&gt;<a class="code" href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">usecount</a>, -1);</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   }</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a>) {</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a>);</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;   }</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">whitefilters</a>) {</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">whitefilters</a>, -1, <span class="stringliteral">&quot;decrement ref for white container, should be last one&quot;</span>);</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;   }</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">blackfilters</a>) {</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">blackfilters</a>, -1, <span class="stringliteral">&quot;decrement ref for black container, should be last one&quot;</span>);</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;   }</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">notify_lock</a>);</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structmansession__session_html_ac973a08be5923acefc1e920ce302f47b"><div class="ttname"><a href="../../df/d05/structmansession__session.html#ac973a08be5923acefc1e920ce302f47b">mansession_session::datastores</a></div><div class="ttdeci">struct mansession_session::mansession_datastores datastores</div></div>
<div class="ttc" id="structmansession__session_html_ab825707392ccdf6562c396bf1037b7a3"><div class="ttname"><a href="../../df/d05/structmansession__session.html#ab825707392ccdf6562c396bf1037b7a3">mansession_session::last_ev</a></div><div class="ttdeci">struct eventqent * last_ev</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01603">manager.c:1603</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="structmansession__session_html_ab5e2ca60735be55e922d5b24f3f83133"><div class="ttname"><a href="../../df/d05/structmansession__session.html#ab5e2ca60735be55e922d5b24f3f83133">mansession_session::blackfilters</a></div><div class="ttdeci">struct ao2_container * blackfilters</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01600">manager.c:1600</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="datastore_8h_html_aee27286888b30c6448a9bce928040a14"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a></div><div class="ttdeci">int ast_datastore_free(struct ast_datastore *datastore)</div><div class="ttdoc">Free a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00068">datastore.c:68</a></div></div>
<div class="ttc" id="structmansession__session_html_a06c0918fa1a1aac3d386fca59b12327c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a06c0918fa1a1aac3d386fca59b12327c">mansession_session::chanvars</a></div><div class="ttdeci">struct ast_variable * chanvars</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01601">manager.c:1601</a></div></div>
<div class="ttc" id="structmansession__session_html_a24597b49933903efcf09c635513d8269"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a24597b49933903efcf09c635513d8269">mansession_session::notify_lock</a></div><div class="ttdeci">ast_mutex_t notify_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01610">manager.c:1610</a></div></div>
<div class="ttc" id="structmansession__session_html_a646b71d97b81fea37dbbc9fd33dc5f4a"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a646b71d97b81fea37dbbc9fd33dc5f4a">mansession_session::whitefilters</a></div><div class="ttdeci">struct ao2_container * whitefilters</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01599">manager.c:1599</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structeventqent_html"><div class="ttname"><a href="../../d9/d94/structeventqent.html">eventqent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01459">manager.c:1459</a></div></div>
<div class="ttc" id="structeventqent_html_ab0f2e84f976dc042139d37fd1c28d73b"><div class="ttname"><a href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">eventqent::usecount</a></div><div class="ttdeci">int usecount</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01460">manager.c:1460</a></div></div>
<div class="ttc" id="structmansession__session_html"><div class="ttname"><a href="../../df/d05/structmansession__session.html">mansession_session</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01581">manager.c:1581</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa457796588f0d13a7dc02e3db64c2e7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa457796588f0d13a7dc02e3db64c2e7d">&#9670;&nbsp;</a></span>session_do()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* session_do </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The body of the individual manager session. Call <a class="el" href="../../df/d72/group__Group__AMI.html#ga460510e6866d4785ec6bd0181c443739">get_input()</a> to read one line at a time (or be woken up on new events), collect the lines in a message until found an empty line, and execute the request. In any case, deliver events asynchronously through <a class="el" href="../../df/d72/group__Group__AMI.html#gab2b9c596c9d6eb5dac8fe5f3d7588f50">process_events()</a> (called from here if no line is available, or at the end of <a class="el" href="../../df/d72/group__Group__AMI.html#ga10113617fccfd71f696509a270385169" title="Process an AMI message, performing desired action. Return 0 on success, -1 on error that require the ...">process_message()</a>. ) </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06937">6937</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l01583">mansession_session::addr</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00057">AMI_VERSION</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00084">ast_iostream_get_fd()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00103">ast_iostream_nonblock()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00148">ast_iostream_set_exclusive_input()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00113">ast_iostream_set_timeout_disable()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00139">ast_iostream_set_timeout_sequence()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00680">AST_LIST_HEAD_INIT_NOLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00290">ast_sockaddr_stringify_addr()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01594">mansession_session::authenticated</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01480">authlimit</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01605">mansession_session::authstart</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01479">authtimeout</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02229">build_mansession()</a>, <a class="el" href="../../df/d05/structmansession__session.html#ac973a08be5923acefc1e920ce302f47b">mansession_session::datastores</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01470">displayconnects</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06852">do_message()</a>, <a class="el" href="../../dc/dbf/test__amihooks_8c_source.html#l00048">done</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01963">grab_last()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01603">mansession_session::last_ev</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01632">mansession::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02322">manager_displayconnects()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00151">ast_tcptls_session_instance::remote_address</a>, <a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02269">session_destroy()</a>, <a class="el" href="../../d4/ddf/tcptls_8h_source.html#l00160">ast_tcptls_session_instance::stream</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01584">mansession_session::stream</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01627">mansession::stream</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01628">mansession::tcptls_session</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01486">unauth_sessions</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01592">mansession_session::username</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01630">mansession::write_error</a>.</p>
<div class="fragment"><div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;{</div><div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a> *ser = data;</div><div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d05/structmansession__session.html">mansession_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>;</div><div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8a/structmansession.html">mansession</a> s = {</div><div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;      .<a class="code" href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">tcptls_session</a> = data,</div><div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;   };</div><div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;   <span class="keywordtype">int</span> arg = 1;</div><div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> ser_remote_address_tmp;</div><div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;</div><div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../df/d72/group__Group__AMI.html#gab771766124f3d865c0f312bd0957bc5f">unauth_sessions</a>, +1) &gt;= <a class="code" href="../../df/d72/group__Group__AMI.html#ga8f05cdf013e1e5fe03ea2615e681bf58">authlimit</a>) {</div><div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../df/d72/group__Group__AMI.html#gab771766124f3d865c0f312bd0957bc5f">unauth_sessions</a>, -1);</div><div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;   }</div><div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;</div><div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;ser_remote_address_tmp, &amp;ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a9dfcf41ffc851689eea95be7bb1f849a">remote_address</a>);</div><div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;   session = <a class="code" href="../../df/d72/group__Group__AMI.html#ga8547b9864f771b59843128a2054d7c47">build_mansession</a>(&amp;ser_remote_address_tmp);</div><div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;</div><div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;   <span class="keywordflow">if</span> (session == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../df/d72/group__Group__AMI.html#gab771766124f3d865c0f312bd0957bc5f">unauth_sessions</a>, -1);</div><div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;   }</div><div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;</div><div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;   <span class="comment">/* here we set TCP_NODELAY on the socket to disable Nagle&#39;s algorithm.</span></div><div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;<span class="comment">    * This is necessary to prevent delays (caused by buffering) as we</span></div><div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;<span class="comment">    * write to the socket in bits and pieces. */</span></div><div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;   <span class="keywordflow">if</span> (setsockopt(<a class="code" href="../../dd/d27/iostream_8h.html#a6ebb2730257107d3535fe6cb1285f479">ast_iostream_get_fd</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>), IPPROTO_TCP, TCP_NODELAY, (<span class="keywordtype">char</span> *) &amp;arg, <span class="keyword">sizeof</span>(arg)) &lt; 0) {</div><div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to set TCP_NODELAY on manager connection: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;   }</div><div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;   <a class="code" href="../../dd/d27/iostream_8h.html#ab426c2063464fc2e2719f8edd9e03085">ast_iostream_nonblock</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>);</div><div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;</div><div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(session);</div><div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;   <span class="comment">/* Hook to the tail of the event queue */</span></div><div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;   session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ab825707392ccdf6562c396bf1037b7a3">last_ev</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gaf3c7fe7452f69b197b7c4e9a217119c5">grab_last</a>();</div><div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;</div><div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;s.<a class="code" href="../../d2/d8a/structmansession.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;</div><div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;   <span class="comment">/* these fields duplicate those in the &#39;ser&#39; structure */</span></div><div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;   session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a> = s.<a class="code" href="../../d2/d8a/structmansession.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a> = ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>;</div><div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>, &amp;ser_remote_address_tmp);</div><div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;   s.<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a> = <a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>;</div><div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;</div><div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#ac973a08be5923acefc1e920ce302f47b">datastores</a>);</div><div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;</div><div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;   <span class="keywordflow">if</span>(time(&amp;session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a6bafd2f5dfdc170245b389db21bd81f8">authstart</a>) == -1) {</div><div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;error executing time(): %s; disconnecting client\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../df/d72/group__Group__AMI.html#gab771766124f3d865c0f312bd0957bc5f">unauth_sessions</a>, -1);</div><div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(session);</div><div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga556bc46323d87c59cf471a5f48c7d2d5">session_destroy</a>(session);</div><div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;   }</div><div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(session);</div><div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;</div><div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;<span class="comment">    * We cannot let the stream exclusively wait for data to arrive.</span></div><div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;<span class="comment">    * We have to wake up the task to send async events.</span></div><div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;   <a class="code" href="../../dd/d27/iostream_8h.html#a7da9c8f9652decad87fdb8d39c4f06df">ast_iostream_set_exclusive_input</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>, 0);</div><div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;</div><div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;   <a class="code" href="../../dd/d27/iostream_8h.html#aa8aec9f4431f3420f3ffa925e4dc306a">ast_iostream_set_timeout_sequence</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>,</div><div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;      <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../df/d72/group__Group__AMI.html#gac3f1c96b9a666398c7768e67346b0b87">authtimeout</a> * 1000);</div><div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;</div><div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(&amp;s, <span class="stringliteral">&quot;Asterisk Call Manager/%s\r\n&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#a9aa10c963efd367eaab256f4a05db100">AMI_VERSION</a>);   <span class="comment">/* welcome prompt */</span></div><div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;      <span class="keywordflow">if</span> ((res = <a class="code" href="../../df/d72/group__Group__AMI.html#ga32ac2419647ed028f30dc1de0f01056e">do_message</a>(&amp;s)) &lt; 0 || s.<a class="code" href="../../d2/d8a/structmansession.html#a4905d9704cb1eb3ff285e4fb8aa9c68d">write_error</a>) {</div><div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;      }</div><div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;      <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a>) {</div><div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;         <a class="code" href="../../dd/d27/iostream_8h.html#ace332a00f395eb7d1c93d0ee00bdf6c2">ast_iostream_set_timeout_disable</a>(ser-&gt;<a class="code" href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">stream</a>);</div><div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;      }</div><div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;   }</div><div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;   <span class="comment">/* session is over, explain why and terminate */</span></div><div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a>) {</div><div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#ga6ede61db764903806db0e5334d07c010">manager_displayconnects</a>(session)) {</div><div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Manager &#39;%s&#39; logged off from %s\n&quot;</span>, session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">username</a>, <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>));</div><div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;      }</div><div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../df/d72/group__Group__AMI.html#gab771766124f3d865c0f312bd0957bc5f">unauth_sessions</a>, -1);</div><div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#ga3eb98988184ea3f302e9a914eb9641e5">displayconnects</a>) {</div><div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Connect attempt from &#39;%s&#39; unable to authenticate\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;session-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">addr</a>));</div><div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160;      }</div><div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;   }</div><div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;</div><div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga556bc46323d87c59cf471a5f48c7d2d5">session_destroy</a>(session);</div><div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;</div><div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;s.<a class="code" href="../../d2/d8a/structmansession.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>:</div><div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ser, -1);</div><div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;   ser = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;}</div><div class="ttc" id="iostream_8h_html_a7da9c8f9652decad87fdb8d39c4f06df"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a7da9c8f9652decad87fdb8d39c4f06df">ast_iostream_set_exclusive_input</a></div><div class="ttdeci">void ast_iostream_set_exclusive_input(struct ast_iostream *stream, int exclusive_input)</div><div class="ttdoc">Set the iostream if it can exclusively depend upon the set timeouts. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00148">iostream.c:148</a></div></div>
<div class="ttc" id="netsock2_8h_html_a6bf0e68e74c0a9ca9d25251b22e4d64a"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_addr(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00290">netsock2.h:290</a></div></div>
<div class="ttc" id="structmansession_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d2/d8a/structmansession.html#a36ac2dd734607a43ed90acb7e9d81ac5">mansession::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01627">manager.c:1627</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="structmansession__session_html_a60b121e87a5e71fe64bae70e1721ac3c"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a60b121e87a5e71fe64bae70e1721ac3c">mansession_session::username</a></div><div class="ttdeci">char username[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01592">manager.c:1592</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga3eb98988184ea3f302e9a914eb9641e5"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga3eb98988184ea3f302e9a914eb9641e5">displayconnects</a></div><div class="ttdeci">static int displayconnects</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01470">manager.c:1470</a></div></div>
<div class="ttc" id="structmansession__session_html_ac973a08be5923acefc1e920ce302f47b"><div class="ttname"><a href="../../df/d05/structmansession__session.html#ac973a08be5923acefc1e920ce302f47b">mansession_session::datastores</a></div><div class="ttdeci">struct mansession_session::mansession_datastores datastores</div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmansession__session_html_a6bafd2f5dfdc170245b389db21bd81f8"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a6bafd2f5dfdc170245b389db21bd81f8">mansession_session::authstart</a></div><div class="ttdeci">time_t authstart</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01605">manager.c:1605</a></div></div>
<div class="ttc" id="structmansession__session_html_ab825707392ccdf6562c396bf1037b7a3"><div class="ttname"><a href="../../df/d05/structmansession__session.html#ab825707392ccdf6562c396bf1037b7a3">mansession_session::last_ev</a></div><div class="ttdeci">struct eventqent * last_ev</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01603">manager.c:1603</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac3f1c96b9a666398c7768e67346b0b87"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac3f1c96b9a666398c7768e67346b0b87">authtimeout</a></div><div class="ttdeci">static int authtimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01479">manager.c:1479</a></div></div>
<div class="ttc" id="iostream_8h_html_a6ebb2730257107d3535fe6cb1285f479"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#a6ebb2730257107d3535fe6cb1285f479">ast_iostream_get_fd</a></div><div class="ttdeci">int ast_iostream_get_fd(struct ast_iostream *stream)</div><div class="ttdoc">Get an iostream&amp;#39;s file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00084">iostream.c:84</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="structmansession__session_html_a29e86d0f6d62ef1edac10a46e4c92095"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a29e86d0f6d62ef1edac10a46e4c92095">mansession_session::authenticated</a></div><div class="ttdeci">int authenticated</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01594">manager.c:1594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structmansession_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d2/d8a/structmansession.html#adf04f66344e3fb0a6f6a69bf39d19902">mansession::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01632">manager.c:1632</a></div></div>
<div class="ttc" id="structmansession__session_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a10838452c09fae7f0e3de86581d85379">mansession_session::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01583">manager.c:1583</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gab771766124f3d865c0f312bd0957bc5f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gab771766124f3d865c0f312bd0957bc5f">unauth_sessions</a></div><div class="ttdeci">static int unauth_sessions</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01486">manager.c:1486</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a5992b274cfdcacdbc1fa8347fd01ebde"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a></div><div class="ttdeci">int done</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00048">test_amihooks.c:48</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structmansession_html"><div class="ttname"><a href="../../d2/d8a/structmansession.html">mansession</a></div><div class="ttdoc">In case you didn&amp;#39;t read that giant block of text above the mansession_session struct, the struct mansession is named this solely to keep the API the same in Asterisk. This structure really represents data that is different from Manager action to Manager action. The mansession_session pointer contained within points to session-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01625">manager.c:1625</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga8f05cdf013e1e5fe03ea2615e681bf58"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga8f05cdf013e1e5fe03ea2615e681bf58">authlimit</a></div><div class="ttdeci">static int authlimit</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01480">manager.c:1480</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html">ast_tcptls_session_instance</a></div><div class="ttdoc">describes a server instance </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00149">tcptls.h:149</a></div></div>
<div class="ttc" id="manager_8h_html_a9aa10c963efd367eaab256f4a05db100"><div class="ttname"><a href="../../db/d45/manager_8h.html#a9aa10c963efd367eaab256f4a05db100">AMI_VERSION</a></div><div class="ttdeci">#define AMI_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00057">manager.h:57</a></div></div>
<div class="ttc" id="iostream_8h_html_ace332a00f395eb7d1c93d0ee00bdf6c2"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#ace332a00f395eb7d1c93d0ee00bdf6c2">ast_iostream_set_timeout_disable</a></div><div class="ttdeci">void ast_iostream_set_timeout_disable(struct ast_iostream *stream)</div><div class="ttdoc">Disable the iostream timeout timer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00113">iostream.c:113</a></div></div>
<div class="ttc" id="structmansession_html_affd6ea965816bd0ac40c18d7b5de8de6"><div class="ttname"><a href="../../d2/d8a/structmansession.html#affd6ea965816bd0ac40c18d7b5de8de6">mansession::tcptls_session</a></div><div class="ttdeci">struct ast_tcptls_session_instance * tcptls_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01628">manager.c:1628</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="iostream_8h_html_aa8aec9f4431f3420f3ffa925e4dc306a"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#aa8aec9f4431f3420f3ffa925e4dc306a">ast_iostream_set_timeout_sequence</a></div><div class="ttdeci">void ast_iostream_set_timeout_sequence(struct ast_iostream *stream, struct timeval start, int timeout)</div><div class="ttdoc">Set the iostream I/O sequence timeout timer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00139">iostream.c:139</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structmansession__session_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a36ac2dd734607a43ed90acb7e9d81ac5">mansession_session::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01584">manager.c:1584</a></div></div>
<div class="ttc" id="structmansession__session_html"><div class="ttname"><a href="../../df/d05/structmansession__session.html">mansession_session</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01581">manager.c:1581</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a36ac2dd734607a43ed90acb7e9d81ac5"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a36ac2dd734607a43ed90acb7e9d81ac5">ast_tcptls_session_instance::stream</a></div><div class="ttdeci">struct ast_iostream * stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00160">tcptls.h:160</a></div></div>
<div class="ttc" id="structmansession_html_a4905d9704cb1eb3ff285e4fb8aa9c68d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#a4905d9704cb1eb3ff285e4fb8aa9c68d">mansession::write_error</a></div><div class="ttdeci">unsigned int write_error</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01630">manager.c:1630</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0d1f922e093ac18824a7863fe3f5fa27"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT_NOLOCK(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00680">linkedlists.h:680</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga32ac2419647ed028f30dc1de0f01056e"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga32ac2419647ed028f30dc1de0f01056e">do_message</a></div><div class="ttdeci">static int do_message(struct mansession *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l06852">manager.c:6852</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga8547b9864f771b59843128a2054d7c47"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga8547b9864f771b59843128a2054d7c47">build_mansession</a></div><div class="ttdeci">static struct mansession_session * build_mansession(const struct ast_sockaddr *addr)</div><div class="ttdoc">Allocate manager session structure and add it to the list of sessions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02229">manager.c:2229</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaf3c7fe7452f69b197b7c4e9a217119c5"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaf3c7fe7452f69b197b7c4e9a217119c5">grab_last</a></div><div class="ttdeci">static struct eventqent * grab_last(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01963">manager.c:1963</a></div></div>
<div class="ttc" id="iostream_8h_html_ab426c2063464fc2e2719f8edd9e03085"><div class="ttname"><a href="../../dd/d27/iostream_8h.html#ab426c2063464fc2e2719f8edd9e03085">ast_iostream_nonblock</a></div><div class="ttdeci">void ast_iostream_nonblock(struct ast_iostream *stream)</div><div class="ttdoc">Make an iostream non-blocking. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/iostream_8c_source.html#l00103">iostream.c:103</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga556bc46323d87c59cf471a5f48c7d2d5"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga556bc46323d87c59cf471a5f48c7d2d5">session_destroy</a></div><div class="ttdeci">static void session_destroy(struct mansession_session *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02269">manager.c:2269</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga6ede61db764903806db0e5334d07c010"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga6ede61db764903806db0e5334d07c010">manager_displayconnects</a></div><div class="ttdeci">static int manager_displayconnects(struct mansession_session *session)</div><div class="ttdoc">Get displayconnects config option. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02322">manager.c:2322</a></div></div>
<div class="ttc" id="structast__tcptls__session__instance_html_a9dfcf41ffc851689eea95be7bb1f849a"><div class="ttname"><a href="../../d6/d49/structast__tcptls__session__instance.html#a9dfcf41ffc851689eea95be7bb1f849a">ast_tcptls_session_instance::remote_address</a></div><div class="ttdeci">struct ast_sockaddr remote_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/tcptls_8h_source.html#l00151">tcptls.h:151</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gab7a51272a96fcd2792382b4d0bf254f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab7a51272a96fcd2792382b4d0bf254f6">&#9670;&nbsp;</a></span>set_eventmask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int set_eventmask </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>eventmask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rather than braindead on,off this now can also accept a specific int mask value or a ',' delim list of mask strings (the same as manager.conf) -anthm. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03266">3266</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01602">mansession_session::send_events</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01626">mansession::session</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02152">strings_to_mask()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04343">action_events()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03505">authenticate()</a>.</p>
<div class="fragment"><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;{</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;   <span class="keywordtype">int</span> maskint = <a class="code" href="../../df/d72/group__Group__AMI.html#ga11ada23da895363223ba26f69d39029a">strings_to_mask</a>(eventmask);</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;   <span class="keywordflow">if</span> (maskint &gt;= 0) {</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;      s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>-&gt;<a class="code" href="../../df/d05/structmansession__session.html#a93274787fdb55a4b0cc204c9d47c2449">send_events</a> = maskint;</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;   }</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(s-&gt;<a class="code" href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">session</a>);</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;   <span class="keywordflow">return</span> maskint;</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structmansession__session_html_a93274787fdb55a4b0cc204c9d47c2449"><div class="ttname"><a href="../../df/d05/structmansession__session.html#a93274787fdb55a4b0cc204c9d47c2449">mansession_session::send_events</a></div><div class="ttdeci">int send_events</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01602">manager.c:1602</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga11ada23da895363223ba26f69d39029a"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga11ada23da895363223ba26f69d39029a">strings_to_mask</a></div><div class="ttdeci">static int strings_to_mask(const char *string)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02152">manager.c:2152</a></div></div>
<div class="ttc" id="structmansession_html_ab51bd75c585f6401e1e7b7fb4000760d"><div class="ttname"><a href="../../d2/d8a/structmansession.html#ab51bd75c585f6401e1e7b7fb4000760d">mansession::session</a></div><div class="ttdeci">struct mansession_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01626">manager.c:1626</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga7a521597aa2f92e42118f262cb911472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7a521597aa2f92e42118f262cb911472">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d45/manager_8h.html#a8ae409b5ff584e42c30edcfe5837d85c">ast_manager_get_generic_type</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define AMI message types. </p>

</div>
</div>
<a id="ga11ada23da895363223ba26f69d39029a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga11ada23da895363223ba26f69d39029a">&#9670;&nbsp;</a></span>strings_to_mask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int strings_to_mask </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>string</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A number returns itself, false returns 0, true returns all flags, other strings return the flags that are set. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02152">2152</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01968">ast_false()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02131">get_perm()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02016">permalias::num</a>, and <a class="el" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03266">set_eventmask()</a>.</p>
<div class="fragment"><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;{</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *p;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<span class="keywordtype">string</span>)) {</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;   }</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;   <span class="keywordflow">for</span> (p = <span class="keywordtype">string</span>; *p; p++) {</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      <span class="keywordflow">if</span> (*p &lt; &#39;0&#39; || *p &gt; <span class="charliteral">&#39;9&#39;</span>) {</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      }</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;   }</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;   <span class="keywordflow">if</span> (!*p) { <span class="comment">/* all digits */</span></div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      <span class="keywordflow">return</span> atoi(<span class="keywordtype">string</span>);</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;   }</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a>(<span class="keywordtype">string</span>)) {</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;   }</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(<span class="keywordtype">string</span>)) { <span class="comment">/* all permissions */</span></div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;      <span class="keywordtype">int</span> x, ret = 0;</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>); x++) {</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;         ret |= <a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>[x].<a class="code" href="../../de/d4b/structpermalias.html#a86cf672daa4e0ad11ad10efc894d19c8">num</a>;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      }</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;      <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;   }</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d72/group__Group__AMI.html#gad61fbf474f2bcfc8efb7710a6d5d8bcd">get_perm</a>(<span class="keywordtype">string</span>);</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structpermalias_html_a86cf672daa4e0ad11ad10efc894d19c8"><div class="ttname"><a href="../../de/d4b/structpermalias.html#a86cf672daa4e0ad11ad10efc894d19c8">permalias::num</a></div><div class="ttdeci">int num</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02016">manager.c:2016</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gad61fbf474f2bcfc8efb7710a6d5d8bcd"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gad61fbf474f2bcfc8efb7710a6d5d8bcd">get_perm</a></div><div class="ttdeci">static int get_perm(const char *instr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02131">manager.c:2131</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga844c8a72ece748571e61afa468edabb0"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a></div><div class="ttdeci">static const struct permalias perms[]</div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="strings_8h_html_a6c3dc0bad204e9dd9890325c1c861e38"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a></div><div class="ttdeci">int attribute_pure ast_false(const char *val)</div><div class="ttdoc">Make sure something is false. Determine if a string containing a boolean value is &quot;false&quot;...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01968">main/utils.c:1968</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga5e4938c2cafe6e01553cb952ca1f5e45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5e4938c2cafe6e01553cb952ca1f5e45">&#9670;&nbsp;</a></span>unref_mansession()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d05/structmansession__session.html">mansession_session</a>* unref_mansession </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d05/structmansession__session.html">mansession_session</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unreference manager session object. If no more references, then go ahead and delete it. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02183">2183</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01478">manager_debug</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">__manager_event_sessions_va()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07551">astman_is_authed()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07567">astman_verify_session_readpermissions()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07600">astman_verify_session_writepermissions()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02282">check_manager_session_inuse()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07479">find_session()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07518">find_session_by_nonce()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02655">handle_showmanconn()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07031">purge_sessions()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02269">session_destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;{</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;   <span class="keywordtype">int</span> refcount = <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(s, -1);</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d72/group__Group__AMI.html#ga4162d86f823ac8c40424a3ae4f41d5b9">manager_debug</a>) {</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Mansession: %p refcount now %d\n&quot;</span>, s, refcount - 1);</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;   }</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga4162d86f823ac8c40424a3ae4f41d5b9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga4162d86f823ac8c40424a3ae4f41d5b9">manager_debug</a></div><div class="ttdeci">static int manager_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01478">manager.c:1478</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gadeb39f5a951b5c08eac6d0b872084fef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadeb39f5a951b5c08eac6d0b872084fef">&#9670;&nbsp;</a></span>user_authority_to_str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* user_authority_to_str </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>authority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert authority code to a list of options for a user. This will only display those authority codes that have an explicit match on authority. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l02060">2060</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00653">ast_str_reset()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00688">ast_str_strlen()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02016">permalias::num</a>, and <a class="el" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l02497">handle_showmanager()</a>.</p>
<div class="fragment"><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;{</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;   <span class="keywordtype">char</span> *sep = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(*res);</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>) - 1; i++) {</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      <span class="keywordflow">if</span> ((authority &amp; <a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>[i].num) == <a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>[i].<a class="code" href="../../de/d4b/structpermalias.html#a86cf672daa4e0ad11ad10efc894d19c8">num</a>) {</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(res, 0, <span class="stringliteral">&quot;%s%s&quot;</span>, sep, <a class="code" href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a>[i].label);</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;         sep = <span class="stringliteral">&quot;,&quot;</span>;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      }</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;   }</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(*res) == 0) {</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;      <span class="comment">/* replace empty string with something sensible */</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(res, 0, <span class="stringliteral">&quot;&lt;none&gt;&quot;</span>);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;   }</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(*res);</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structpermalias_html_a86cf672daa4e0ad11ad10efc894d19c8"><div class="ttname"><a href="../../de/d4b/structpermalias.html#a86cf672daa4e0ad11ad10efc894d19c8">permalias::num</a></div><div class="ttdeci">int num</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02016">manager.c:2016</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga844c8a72ece748571e61afa468edabb0"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga844c8a72ece748571e61afa468edabb0">perms</a></div><div class="ttdeci">static const struct permalias perms[]</div></div>
<div class="ttc" id="strings_8h_html_a8239b9ad10367bfc936e9b60ff7706a8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a></div><div class="ttdeci">void ast_str_reset(struct ast_str *buf)</div><div class="ttdoc">Reset the content of a dynamic string. Useful before a series of ast_str_append. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00653">strings.h:653</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga21a9d344c805f9450b254b4fc0f5afcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga21a9d344c805f9450b254b4fc0f5afcd">&#9670;&nbsp;</a></span>whitefilter_cmp_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int whitefilter_cmp_fn </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l06078">6078</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01032">CMP_STOP</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06193">match_filter()</a>.</p>
<div class="fragment"><div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;{</div><div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;   regex_t *regex_filter = obj;</div><div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *eventdata = arg;</div><div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;   <span class="keywordtype">int</span> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = data;</div><div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;</div><div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;   <span class="keywordflow">if</span> (!regexec(regex_filter, eventdata, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0)) {</div><div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;      *result = 1;</div><div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>);</div><div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;   }</div><div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;</div><div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01032">astobj2.h:1032</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga322eb26fcd507fe69297e038d584db02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga322eb26fcd507fe69297e038d584db02">&#9670;&nbsp;</a></span>acl_change_sub</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a>* acl_change_sub</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01487">1487</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

</div>
</div>
<a id="gaee1aba1426a9ecb841129e4fe99c33fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaee1aba1426a9ecb841129e4fe99c33fd">&#9670;&nbsp;</a></span>actions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/de8/structactions.html">actions</a>   <a class="el" href="../../dc/de8/structactions.html">actions</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga5924754cc35adc2fed2f07cb4b0b5200"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5924754cc35adc2fed2f07cb4b0b5200">&#9670;&nbsp;</a></span>all_events</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/d3e/structall__events.html">all_events</a>   <a class="el" href="../../d2/d3e/structall__events.html">all_events</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga9d6ad22f239563cb0ec69d475299fa87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9d6ad22f239563cb0ec69d475299fa87">&#9670;&nbsp;</a></span>allowmultiplelogin</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int allowmultiplelogin = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01471">1471</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l08664">handle_manager_show_settings()</a>.</p>

</div>
</div>
<a id="ga66c34a7f788ab4d323b1bee27256906d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga66c34a7f788ab4d323b1bee27256906d">&#9670;&nbsp;</a></span>astman_append_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> astman_append_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../df/d72/group__Group__AMI.html#ga2febd1b3a8ac68d84ee6fb3330276c7f">__init_astman_append_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03061">3061</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03164">astman_send_error_va()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03206">astman_send_list_complete_start_common()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03123">astman_send_response_full()</a>.</p>

</div>
</div>
<a id="ga8f05cdf013e1e5fe03ea2615e681bf58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8f05cdf013e1e5fe03ea2615e681bf58">&#9670;&nbsp;</a></span>authlimit</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int authlimit</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01480">1480</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09116">manager_set_defaults()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06937">session_do()</a>.</p>

</div>
</div>
<a id="gac3f1c96b9a666398c7768e67346b0b87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac3f1c96b9a666398c7768e67346b0b87">&#9670;&nbsp;</a></span>authtimeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int authtimeout</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01479">1479</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06852">do_message()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06735">get_input()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09116">manager_set_defaults()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06937">session_do()</a>.</p>

</div>
</div>
<a id="gab362ced8cd2bc839a9a1782ae31a9166"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab362ced8cd2bc839a9a1782ae31a9166">&#9670;&nbsp;</a></span>broken_events_action</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int broken_events_action = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01474">1474</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04343">action_events()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l09116">manager_set_defaults()</a>.</p>

</div>
</div>
<a id="gaae263799a76e54f46b173f039ee1053d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaae263799a76e54f46b173f039ee1053d">&#9670;&nbsp;</a></span>command_blacklist</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const { ... }   command_blacklist[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   {{ <span class="stringliteral">&quot;module&quot;</span>, <span class="stringliteral">&quot;load&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }},</div><div class="line">   {{ <span class="stringliteral">&quot;module&quot;</span>, <span class="stringliteral">&quot;unload&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }},</div><div class="line">   {{ <span class="stringliteral">&quot;restart&quot;</span>, <span class="stringliteral">&quot;gracefully&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }},</div><div class="line">}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l05259">check_blacklist()</a>.</p>

</div>
</div>
<a id="ga3eb98988184ea3f302e9a914eb9641e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3eb98988184ea3f302e9a914eb9641e5">&#9670;&nbsp;</a></span>displayconnects</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int displayconnects = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01470">1470</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06852">do_message()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08664">handle_manager_show_settings()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09116">manager_set_defaults()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06937">session_do()</a>.</p>

</div>
</div>
<a id="gaa6da807cb7fb332127a4896dd423ed6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa6da807cb7fb332127a4896dd423ed6d">&#9670;&nbsp;</a></span>global_realm</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char global_realm[<a class="el" href="../../d9/d94/network_8h.html#afd80ecbe3170ca4fc85b65cda8659f82">MAXHOSTNAMELEN</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Default realm </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01484">1484</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l09116">manager_set_defaults()</a>.</p>

</div>
</div>
<a id="gaf28d7a75b43cde09123c9ba1527b34ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf28d7a75b43cde09123c9ba1527b34ba">&#9670;&nbsp;</a></span>httptimeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int httptimeout = 60</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01473">1473</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08664">handle_manager_show_settings()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01983">purge_events()</a>.</p>

</div>
</div>
<a id="ga9ade0e7490b00414a5d773bc5ceff73e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9ade0e7490b00414a5d773bc5ceff73e">&#9670;&nbsp;</a></span>manager_channelvars</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* manager_channelvars</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01481">1481</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08664">handle_manager_show_settings()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08916">load_channelvars()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l08956">manager_shutdown()</a>.</p>

</div>
</div>
<a id="ga4162d86f823ac8c40424a3ae4f41d5b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4162d86f823ac8c40424a3ae4f41d5b9">&#9670;&nbsp;</a></span>manager_debug</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int manager_debug = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>enable some debugging code in the manager </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01478">1478</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">__manager_event_sessions_va()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08664">handle_manager_show_settings()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02472">handle_mandebug()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06568">log_action()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09116">manager_set_defaults()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06193">match_filter()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02183">unref_mansession()</a>.</p>

</div>
</div>
<a id="ga19fa3d97c06873c9d67de7232cca5247"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga19fa3d97c06873c9d67de7232cca5247">&#9670;&nbsp;</a></span>manager_enabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int manager_enabled = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01475">1475</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01949">ast_manager_check_enabled()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01954">ast_webmanager_check_enabled()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08664">handle_manager_show_settings()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l09116">manager_set_defaults()</a>.</p>

</div>
</div>
<a id="ga2e585cbfd7440aa94b0eb20ff93f1c3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2e585cbfd7440aa94b0eb20ff93f1c3c">&#9670;&nbsp;</a></span>manager_event_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> manager_event_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../df/d72/group__Group__AMI.html#gaea9436e4545799a89acf24ea113d0266">__init_manager_event_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l07109">7109</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">__manager_event_sessions_va()</a>.</p>

</div>
</div>
<a id="gac89a15f6b7dee4927d3ee5c8e9de9f69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac89a15f6b7dee4927d3ee5c8e9de9f69">&#9670;&nbsp;</a></span>manager_hooks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a>   <a class="el" href="../../d5/d26/structmanager__hooks.html">manager_hooks</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="gadeff73697d2789905f4c3a21671ef6d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadeff73697d2789905f4c3a21671ef6d3">&#9670;&nbsp;</a></span>manager_topic</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* manager_topic</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> that all topics AMI cares about will be forwarded to. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01490">1490</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l01720">ast_manager_get_topic()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l11324">load_module()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00681">manager_bridging_init()</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l01308">manager_channels_init()</a>, <a class="el" href="../../d4/d00/manager__mwi_8c_source.html#l00153">manager_mwi_init()</a>, and <a class="el" href="../../dd/d65/manager__system_8c_source.html#l00043">manager_system_init()</a>.</p>

</div>
</div>
<a id="ga844c8a72ece748571e61afa468edabb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga844c8a72ece748571e61afa468edabb0">&#9670;&nbsp;</a></span>perms</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../de/d4b/structpermalias.html">permalias</a>  perms[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04343">action_events()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02084">authority_to_str()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02131">get_perm()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02152">strings_to_mask()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02060">user_authority_to_str()</a>.</p>

</div>
</div>
<a id="ga8f085d5905794e05f39eb6056fcba447"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8f085d5905794e05f39eb6056fcba447">&#9670;&nbsp;</a></span>rtp_topic_forwarder</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a>* rtp_topic_forwarder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> for forwarding the RTP topic to the AMI topic. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01496">1496</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

</div>
</div>
<a id="ga97a54a9ee7d7446e6be8a9371fcd2a19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97a54a9ee7d7446e6be8a9371fcd2a19">&#9670;&nbsp;</a></span>security_topic_forwarder</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a>* security_topic_forwarder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> for forwarding the Security topic to the AMI topic. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01499">1499</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

</div>
</div>
<a id="ga6d6d7bdd31cb1b6f84f2e447a7a2c6c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6d6d7bdd31cb1b6f84f2e447a7a2c6c2">&#9670;&nbsp;</a></span>stasis_router</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a>* stasis_router</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> for all <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> messages. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01493">1493</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l01725">ast_manager_get_message_router()</a>.</p>

</div>
</div>
<a id="gab96bdf674e2ebee782bfde795f93062e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab96bdf674e2ebee782bfde795f93062e">&#9670;&nbsp;</a></span>subscribed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int subscribed = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01476">1476</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00750">bridge_app_subscribed_involved()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00786">bridge_attended_transfer_handler()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l28575">handle_request_subscribe()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l09086">subscribe_all()</a>.</p>

</div>
</div>
<a id="ga6833175e09cefe8b9dfaa5ead96fb7b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6833175e09cefe8b9dfaa5ead96fb7b6">&#9670;&nbsp;</a></span>test_suite_forwarder</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a>* test_suite_forwarder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> for forwarding the Test topic to the AMI topic. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01503">1503</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

</div>
</div>
<a id="gab8d1a4eb372f1c462aa6cc73468069ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab8d1a4eb372f1c462aa6cc73468069ab">&#9670;&nbsp;</a></span>timestampevents</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int timestampevents</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01472">1472</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">__manager_event_sessions_va()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l08664">handle_manager_show_settings()</a>.</p>

</div>
</div>
<a id="gab771766124f3d865c0f312bd0957bc5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab771766124f3d865c0f312bd0957bc5f">&#9670;&nbsp;</a></span>unauth_sessions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int unauth_sessions = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01486">1486</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04393">action_login()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06937">session_do()</a>.</p>

</div>
</div>
<a id="gaa1e469ecb509cb8dd2b26bde7dd1e1be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa1e469ecb509cb8dd2b26bde7dd1e1be">&#9670;&nbsp;</a></span>userevent_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> userevent_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../df/d72/group__Group__AMI.html#ga463ca538d0f8666156e5a35db50d4efc">__init_userevent_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l03063">3063</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l06255">action_userevent()</a>.</p>

</div>
</div>
<a id="ga8142b26b5d72b53266e247033cfa317d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8142b26b5d72b53266e247033cfa317d">&#9670;&nbsp;</a></span>users</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d63/structusers.html">users</a>   <a class="el" href="../../d8/d63/structusers.html">users</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="gad0b42352088047f7b3f29b4b331b43cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad0b42352088047f7b3f29b4b331b43cd">&#9670;&nbsp;</a></span>webmanager_enabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int webmanager_enabled = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01477">1477</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01954">ast_webmanager_check_enabled()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l08664">handle_manager_show_settings()</a>.</p>

</div>
</div>
<a id="ga2c50d07b002a16d9ddfa6eb70ac5f977"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2c50d07b002a16d9ddfa6eb70ac5f977">&#9670;&nbsp;</a></span>words</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* words[<a class="el" href="../../dc/db0/cli_8h.html#ae88634c402fdd8b46fd5d686dad8bfb9">AST_MAX_CMD_LEN</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01525">1525</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:47:17 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
