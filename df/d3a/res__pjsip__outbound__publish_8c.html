<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_pjsip_outbound_publish.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_pjsip_outbound_publish.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;pjsip.h&gt;</code><br />
<code>#include &lt;pjsip_simple.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../df/dd5/res__pjproject_8h_source.html">asterisk/res_pjproject.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d8c/res__pjsip_8h_source.html">asterisk/res_pjsip.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html">asterisk/res_pjsip_outbound_publish.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d1e/taskprocessor_8h_source.html">asterisk/taskprocessor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d40/threadpool_8h_source.html">asterisk/threadpool.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/db6/datastore_8h_source.html">asterisk/datastore.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d5c/res__pjsip__private_8h_source.html">res_pjsip/include/res_pjsip_private.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_pjsip_outbound_publish.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/def/res__pjsip__outbound__publish_8c__incl.png" border="0" usemap="#res__pjsip__outbound__publish_8c" alt=""/></div>
<map name="res__pjsip__outbound__publish_8c" id="res__pjsip__outbound__publish_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="1357,102,1441,129"/>
<area shape="rect" id="node24" href="../../df/dd5/res__pjproject_8h.html" title="asterisk/res_pjproject.h" alt="" coords="2729,102,2900,129"/>
<area shape="rect" id="node27" href="../../d8/d8c/res__pjsip_8h.html" title="asterisk/res_pjsip.h" alt="" coords="2511,102,2655,129"/>
<area shape="rect" id="node37" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1817,341,1967,367"/>
<area shape="rect" id="node46" href="../../dd/dd4/res__pjsip__outbound__publish_8h.html" title="asterisk/res_pjsip\l_outbound_publish.h" alt="" coords="1549,333,1704,375"/>
<area shape="rect" id="node47" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="491,184,627,211"/>
<area shape="rect" id="node48" href="../../d0/d1e/taskprocessor_8h.html" title="An API for managing task processing threads that can be shared across modules. " alt="" coords="2925,102,3102,129"/>
<area shape="rect" id="node49" href="../../d3/d40/threadpool_8h.html" title="asterisk/threadpool.h" alt="" coords="3127,102,3284,129"/>
<area shape="rect" id="node50" href="../../d7/d5c/res__pjsip__private_8h.html" title="res_pjsip/include/res\l_pjsip_private.h" alt="" coords="645,95,795,136"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="1237,184,1392,211"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="651,184,789,211"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="1417,184,1551,211"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="1405,259,1552,285"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1129,259,1271,285"/>
<area shape="rect" id="node31" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2537,423,2695,449"/>
<area shape="rect" id="node32" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="2969,497,3095,524"/>
<area shape="rect" id="node33" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="2813,259,2960,285"/>
<area shape="rect" id="node34" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1759,423,1910,449"/>
<area shape="rect" id="node35" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="2063,259,2201,285"/>
<area shape="rect" id="node38" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="2973,341,3123,367"/>
<area shape="rect" id="node39" href="../../d8/d25/sorcery_8h.html" title="Sorcery Data Access Layer API. " alt="" coords="3096,184,3229,211"/>
<area shape="rect" id="node40" href="../../db/dc4/dnsmgr_8h.html" title="Background DNS update manager. " alt="" coords="2835,184,2971,211"/>
<area shape="rect" id="node41" href="../../d5/da1/udptl_8h.html" title="UDPTL support for T.38. " alt="" coords="2376,184,2496,211"/>
<area shape="rect" id="node42" href="../../d5/dde/rtp__engine_8h.html" title="Pluggable RTP Architecture. " alt="" coords="2654,184,2810,211"/>
<area shape="rect" id="node43" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="2163,184,2352,211"/>
<area shape="rect" id="node44" href="../../d7/d44/stasis__endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="3085,259,3280,285"/>
<area shape="rect" id="node45" href="../../d8/d95/stream_8h.html" title="Media Stream API. " alt="" coords="3355,341,3490,367"/>
<area shape="rect" id="node36" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="181,341,296,367"/>
</map>
</div>
</div>
<p><a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outbound publish information.  <a href="../../d6/d73/structast__sip__outbound__publish.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outbound publish client state information (persists for lifetime of a publish)  <a href="../../d3/dd9/structast__sip__outbound__publish__client.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outbound publish state information (persists for lifetime of a publish)  <a href="../../dc/d98/structast__sip__outbound__publish__state.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d04/structsip__outbound__publish__message.html">sip_outbound_publish_message</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queued outbound publish message.  <a href="../../d5/d04/structsip__outbound__publish__message.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae46c40b613ed191cac77b861ae4e3547"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae46c40b613ed191cac77b861ae4e3547">ADD_TO_NEW_STATES</a>(__obj)</td></tr>
<tr class="separator:ae46c40b613ed191cac77b861ae4e3547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39fcd37b99a8eafd0aa1c961d8736f88"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a39fcd37b99a8eafd0aa1c961d8736f88">DATASTORE_BUCKETS</a>&#160;&#160;&#160;53</td></tr>
<tr class="separator:a39fcd37b99a8eafd0aa1c961d8736f88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3400efb86c3d3405041a5392c336e4cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a3400efb86c3d3405041a5392c336e4cc">DEFAULT_PUBLISHER_BUCKETS</a>&#160;&#160;&#160;119</td></tr>
<tr class="separator:a3400efb86c3d3405041a5392c336e4cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46aa50c37f5c251756d5564d8c96aa38"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a46aa50c37f5c251756d5564d8c96aa38">DEFAULT_STATE_BUCKETS</a>&#160;&#160;&#160;31</td></tr>
<tr class="memdesc:a46aa50c37f5c251756d5564d8c96aa38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default number of client state container buckets.  <a href="#a46aa50c37f5c251756d5564d8c96aa38">More...</a><br /></td></tr>
<tr class="separator:a46aa50c37f5c251756d5564d8c96aa38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0704fd0d650be3f899c8e6bf4856d09"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ad0704fd0d650be3f899c8e6bf4856d09">DESTROY_CLIENT</a>()</td></tr>
<tr class="separator:ad0704fd0d650be3f899c8e6bf4856d09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a536155006f9be75496538efe377145e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a536155006f9be75496538efe377145e6">MAX_UNLOAD_TIMEOUT_TIME</a>&#160;&#160;&#160;35	/* Seconds */</td></tr>
<tr class="separator:a536155006f9be75496538efe377145e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a253e3df4e474d9f21b13bdb86880a4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a4a253e3df4e474d9f21b13bdb86880a4">AO2_GLOBAL_OBJ_STATIC</a> (current_states)</td></tr>
<tr class="separator:a4a253e3df4e474d9f21b13bdb86880a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eecc698c212de4feee6b504fc8f7ea6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2eecc698c212de4feee6b504fc8f7ea6">AO2_STRING_FIELD_CMP_FN</a> (<a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a>, <a class="el" href="../../d8/dbc/structuser.html">user</a>)</td></tr>
<tr class="separator:a2eecc698c212de4feee6b504fc8f7ea6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64d7c0da58c7df5763ce20145b4ffb93"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a64d7c0da58c7df5763ce20145b4ffb93">AO2_STRING_FIELD_HASH_FN</a> (<a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a>, <a class="el" href="../../d8/dbc/structuser.html">user</a>)</td></tr>
<tr class="separator:a64d7c0da58c7df5763ce20145b4ffb93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0161add0b2a4e7baeb8c5765f22235f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a0161add0b2a4e7baeb8c5765f22235f0">ast_sip_publish_client_add_datastore</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore)</td></tr>
<tr class="memdesc:a0161add0b2a4e7baeb8c5765f22235f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a datastore to a SIP event publisher.  <a href="#a0161add0b2a4e7baeb8c5765f22235f0">More...</a><br /></td></tr>
<tr class="separator:a0161add0b2a4e7baeb8c5765f22235f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b50ad87195f077e1adfd02bd92bfe93"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a8b50ad87195f077e1adfd02bd92bfe93">ast_sip_publish_client_alloc_datastore</a> (const struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> *info, const char *uid)</td></tr>
<tr class="memdesc:a8b50ad87195f077e1adfd02bd92bfe93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alternative for <a class="el" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc()</a>  <a href="#a8b50ad87195f077e1adfd02bd92bfe93">More...</a><br /></td></tr>
<tr class="separator:a8b50ad87195f077e1adfd02bd92bfe93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefd7c57ffa48b8af08a6037348cc8051"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aefd7c57ffa48b8af08a6037348cc8051">ast_sip_publish_client_get</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:aefd7c57ffa48b8af08a6037348cc8051"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a publish client using its name.  <a href="#aefd7c57ffa48b8af08a6037348cc8051">More...</a><br /></td></tr>
<tr class="separator:aefd7c57ffa48b8af08a6037348cc8051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8dca3a60f8f4b4be12867de93989b85"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ac8dca3a60f8f4b4be12867de93989b85">ast_sip_publish_client_get_datastore</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:ac8dca3a60f8f4b4be12867de93989b85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve an event publisher datastore.  <a href="#ac8dca3a60f8f4b4be12867de93989b85">More...</a><br /></td></tr>
<tr class="separator:ac8dca3a60f8f4b4be12867de93989b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a807976be434e855d4a6a404b33868954"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a807976be434e855d4a6a404b33868954">ast_sip_publish_client_get_from_uri</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client)</td></tr>
<tr class="memdesc:a807976be434e855d4a6a404b33868954"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the From URI the client will use.  <a href="#a807976be434e855d4a6a404b33868954">More...</a><br /></td></tr>
<tr class="separator:a807976be434e855d4a6a404b33868954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6841edd064587ba1c1a2111edb051e9"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ac6841edd064587ba1c1a2111edb051e9">ast_sip_publish_client_get_to_uri</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client)</td></tr>
<tr class="memdesc:ac6841edd064587ba1c1a2111edb051e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the To URI the client will use.  <a href="#ac6841edd064587ba1c1a2111edb051e9">More...</a><br /></td></tr>
<tr class="separator:ac6841edd064587ba1c1a2111edb051e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a918109b62bf7506dead242df9686010b"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a918109b62bf7506dead242df9686010b">ast_sip_publish_client_get_user_from_uri</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d8/dbc/structuser.html">user</a>, char *uri, size_t size)</td></tr>
<tr class="memdesc:a918109b62bf7506dead242df9686010b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the From URI the client will use for a specific user.  <a href="#a918109b62bf7506dead242df9686010b">More...</a><br /></td></tr>
<tr class="separator:a918109b62bf7506dead242df9686010b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedc1967055783ff865e4ba43c667f82f"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aedc1967055783ff865e4ba43c667f82f">ast_sip_publish_client_get_user_to_uri</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d8/dbc/structuser.html">user</a>, char *uri, size_t size)</td></tr>
<tr class="memdesc:aedc1967055783ff865e4ba43c667f82f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the To URI the client will use for a specific user.  <a href="#aedc1967055783ff865e4ba43c667f82f">More...</a><br /></td></tr>
<tr class="separator:aedc1967055783ff865e4ba43c667f82f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ef92d9357070459c8d976bde50de446"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a9ef92d9357070459c8d976bde50de446">ast_sip_publish_client_remove</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d8/dbc/structuser.html">user</a>)</td></tr>
<tr class="memdesc:a9ef92d9357070459c8d976bde50de446"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the user from the client (stopping it from publishing)  <a href="#a9ef92d9357070459c8d976bde50de446">More...</a><br /></td></tr>
<tr class="separator:a9ef92d9357070459c8d976bde50de446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0370232b5fce85a4edb5b940f0cc1019"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a0370232b5fce85a4edb5b940f0cc1019">ast_sip_publish_client_remove_datastore</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a0370232b5fce85a4edb5b940f0cc1019"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a publication datastore from an event publisher.  <a href="#a0370232b5fce85a4edb5b940f0cc1019">More...</a><br /></td></tr>
<tr class="separator:a0370232b5fce85a4edb5b940f0cc1019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc13fb50475b59d055cbec2d8ece47c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a4fc13fb50475b59d055cbec2d8ece47c">ast_sip_publish_client_send</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *body)</td></tr>
<tr class="memdesc:a4fc13fb50475b59d055cbec2d8ece47c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an outgoing PUBLISH message using a client.  <a href="#a4fc13fb50475b59d055cbec2d8ece47c">More...</a><br /></td></tr>
<tr class="separator:a4fc13fb50475b59d055cbec2d8ece47c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa296a0da93960abee1c4e84efb6130fc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aa296a0da93960abee1c4e84efb6130fc">ast_sip_publish_client_user_send</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d8/dbc/structuser.html">user</a>, const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *body)</td></tr>
<tr class="memdesc:aa296a0da93960abee1c4e84efb6130fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an outgoing PUBLISH message based on the user.  <a href="#aa296a0da93960abee1c4e84efb6130fc">More...</a><br /></td></tr>
<tr class="separator:aa296a0da93960abee1c4e84efb6130fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8898d2239bd93b0949c090b451a8d196"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a8898d2239bd93b0949c090b451a8d196">ast_sip_register_event_publisher_handler</a> (struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>)</td></tr>
<tr class="memdesc:a8898d2239bd93b0949c090b451a8d196"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an event publisher handler.  <a href="#a8898d2239bd93b0949c090b451a8d196">More...</a><br /></td></tr>
<tr class="separator:a8898d2239bd93b0949c090b451a8d196"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19a9158e2cabc358e93d877e0b8b8b03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a19a9158e2cabc358e93d877e0b8b8b03">ast_sip_unregister_event_publisher_handler</a> (struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>)</td></tr>
<tr class="memdesc:a19a9158e2cabc358e93d877e0b8b8b03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a publish handler.  <a href="#a19a9158e2cabc358e93d877e0b8b8b03">More...</a><br /></td></tr>
<tr class="separator:a19a9158e2cabc358e93d877e0b8b8b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a153641303e986a50fc88970d9ea327d8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a153641303e986a50fc88970d9ea327d8">can_reuse_publish</a> (struct <a class="el" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *existing, struct <a class="el" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *applied)</td></tr>
<tr class="separator:a153641303e986a50fc88970d9ea327d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9c14664cac334ea2c347f263fab4d23"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#af9c14664cac334ea2c347f263fab4d23">cancel_and_unpublish</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="memdesc:af9c14664cac334ea2c347f263fab4d23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function which cancels and un-publishes a no longer used client.  <a href="#af9c14664cac334ea2c347f263fab4d23">More...</a><br /></td></tr>
<tr class="separator:af9c14664cac334ea2c347f263fab4d23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab88f222edffd9d2f7781a4657f93186a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ab88f222edffd9d2f7781a4657f93186a">cancel_publish_refresh</a> (struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher)</td></tr>
<tr class="memdesc:ab88f222edffd9d2f7781a4657f93186a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function which cancels the refresh timer on a publisher.  <a href="#ab88f222edffd9d2f7781a4657f93186a">More...</a><br /></td></tr>
<tr class="separator:ab88f222edffd9d2f7781a4657f93186a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62ccc7ce028b4b702a89df4ed02a38e1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a62ccc7ce028b4b702a89df4ed02a38e1">cancel_refresh_timer_task</a> (void *data)</td></tr>
<tr class="memdesc:a62ccc7ce028b4b702a89df4ed02a38e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task for cancelling a refresh timer.  <a href="#a62ccc7ce028b4b702a89df4ed02a38e1">More...</a><br /></td></tr>
<tr class="separator:a62ccc7ce028b4b702a89df4ed02a38e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f5741b9ac45d75b0697282ba7af8cfd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a1f5741b9ac45d75b0697282ba7af8cfd">current_state_reusable</a> (struct <a class="el" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *<a class="el" href="../../de/d6b/test__stasis__state_8c.html#af03d41f70e6c91defcf6a3a6cc3fc419">publish</a>, struct <a class="el" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *current_state)</td></tr>
<tr class="separator:a1f5741b9ac45d75b0697282ba7af8cfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac60c8c7a11b9aa2b347630c7d08af17d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ac60c8c7a11b9aa2b347630c7d08af17d">datastore_cmp</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:ac60c8c7a11b9aa2b347630c7d08af17d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae586d6908c81e9a59e0e68358c12c9cc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae586d6908c81e9a59e0e68358c12c9cc">datastore_hash</a> (const void *obj, int flags)</td></tr>
<tr class="separator:ae586d6908c81e9a59e0e68358c12c9cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a800f3aeb35d00de4117dbd19674bfa37"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a800f3aeb35d00de4117dbd19674bfa37">explicit_publish_destroy</a> (void *data)</td></tr>
<tr class="separator:a800f3aeb35d00de4117dbd19674bfa37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeea9ed171992fb252a3ae3c70e1e6f15"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeea9ed171992fb252a3ae3c70e1e6f15">find_publisher_handler_for_event_name</a> (const char *event_name)</td></tr>
<tr class="separator:aeea9ed171992fb252a3ae3c70e1e6f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf296052b4732168e00f3d47e78e6595"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#adf296052b4732168e00f3d47e78e6595">get_publishes_and_update_state</a> (void)</td></tr>
<tr class="separator:adf296052b4732168e00f3d47e78e6595"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52f23503e09ad7f6ab7cce9163b21872"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a52f23503e09ad7f6ab7cce9163b21872">outbound_auth_handler</a> (const struct <a class="el" href="../../db/de0/structaco__option.html">aco_option</a> *opt, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="el" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, void *obj)</td></tr>
<tr class="separator:a52f23503e09ad7f6ab7cce9163b21872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d9e0deb1c63f0c64de1f559ff1a0790"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a5d9e0deb1c63f0c64de1f559ff1a0790">outbound_publish_state_cmp</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="memdesc:a5d9e0deb1c63f0c64de1f559ff1a0790"><td class="mdescLeft">&#160;</td><td class="mdescRight">comparator function for client objects  <a href="#a5d9e0deb1c63f0c64de1f559ff1a0790">More...</a><br /></td></tr>
<tr class="separator:a5d9e0deb1c63f0c64de1f559ff1a0790"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33de2738bbd39f7730775f2bf287efcc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a33de2738bbd39f7730775f2bf287efcc">outbound_publish_state_hash</a> (const void *obj, const int flags)</td></tr>
<tr class="memdesc:a33de2738bbd39f7730775f2bf287efcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">hashing function for state objects  <a href="#a33de2738bbd39f7730775f2bf287efcc">More...</a><br /></td></tr>
<tr class="separator:a33de2738bbd39f7730775f2bf287efcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb36f6fc22f2185a5606263a3745a2c8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb36f6fc22f2185a5606263a3745a2c8">publisher_client_send</a> (void *obj, void *arg, void *data, int flags)</td></tr>
<tr class="separator:aeb36f6fc22f2185a5606263a3745a2c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a> (void)</td></tr>
<tr class="separator:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81e2ab9a5fda29080450a9c0a6dc463d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a81e2ab9a5fda29080450a9c0a6dc463d">schedule_publish_refresh</a> (struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher, int expiration)</td></tr>
<tr class="memdesc:a81e2ab9a5fda29080450a9c0a6dc463d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function which sets up the timer to send publication.  <a href="#a81e2ab9a5fda29080450a9c0a6dc463d">More...</a><br /></td></tr>
<tr class="separator:a81e2ab9a5fda29080450a9c0a6dc463d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8b25c3719a93708567156963444c8ae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae8b25c3719a93708567156963444c8ae">send_unpublish_task</a> (void *data)</td></tr>
<tr class="memdesc:ae8b25c3719a93708567156963444c8ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task for sending an unpublish.  <a href="#ae8b25c3719a93708567156963444c8ae">More...</a><br /></td></tr>
<tr class="separator:ae8b25c3719a93708567156963444c8ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb069e78d986661052bfe190ef458f11"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb069e78d986661052bfe190ef458f11">set_transport</a> (struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher, pjsip_tx_data *tdata)</td></tr>
<tr class="separator:aeb069e78d986661052bfe190ef458f11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac28348588c6e5a8ce5d96a538c3afe35"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ac28348588c6e5a8ce5d96a538c3afe35">sip_outbound_publish_alloc</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:ac28348588c6e5a8ce5d96a538c3afe35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocator function for publish information.  <a href="#ac28348588c6e5a8ce5d96a538c3afe35">More...</a><br /></td></tr>
<tr class="separator:ac28348588c6e5a8ce5d96a538c3afe35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94d0c5b3a222207cdfc912d66c6e0115"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a94d0c5b3a222207cdfc912d66c6e0115">sip_outbound_publish_apply</a> (const struct <a class="el" href="../../d2/d88/structast__sorcery.html">ast_sorcery</a> *<a class="el" href="../../d1/dbc/res__pjsip__phoneprov__provider_8c.html#a95eb520bdb1abcd2a70b1432d3ecbf4c">sorcery</a>, void *obj)</td></tr>
<tr class="memdesc:a94d0c5b3a222207cdfc912d66c6e0115"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply function which finds or allocates a state structure.  <a href="#a94d0c5b3a222207cdfc912d66c6e0115">More...</a><br /></td></tr>
<tr class="separator:a94d0c5b3a222207cdfc912d66c6e0115"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d51d184aab52ec62248ed67c3971f54"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a3d51d184aab52ec62248ed67c3971f54">sip_outbound_publish_callback</a> (struct pjsip_publishc_cbparam *param)</td></tr>
<tr class="memdesc:a3d51d184aab52ec62248ed67c3971f54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for publish client responses.  <a href="#a3d51d184aab52ec62248ed67c3971f54">More...</a><br /></td></tr>
<tr class="separator:a3d51d184aab52ec62248ed67c3971f54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe0679d7ecc20ceab17d82221368c5d8"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abe0679d7ecc20ceab17d82221368c5d8">sip_outbound_publish_client_add_publisher</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d8/dbc/structuser.html">user</a>)</td></tr>
<tr class="separator:abe0679d7ecc20ceab17d82221368c5d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf706609c5e5e6be58d94f1d6fc18317"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aaf706609c5e5e6be58d94f1d6fc18317">sip_outbound_publish_client_destroy</a> (void *obj)</td></tr>
<tr class="memdesc:aaf706609c5e5e6be58d94f1d6fc18317"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor function for publish client.  <a href="#aaf706609c5e5e6be58d94f1d6fc18317">More...</a><br /></td></tr>
<tr class="separator:aaf706609c5e5e6be58d94f1d6fc18317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accea5ae19549158c46949a82179df9d3"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#accea5ae19549158c46949a82179df9d3">sip_outbound_publish_client_get_publisher</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d8/dbc/structuser.html">user</a>)</td></tr>
<tr class="separator:accea5ae19549158c46949a82179df9d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a468bb04658c3183f5d2e7acb85819a5e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a468bb04658c3183f5d2e7acb85819a5e">sip_outbound_publish_datastore_destroy</a> (void *obj)</td></tr>
<tr class="separator:a468bb04658c3183f5d2e7acb85819a5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38547a0c927cbefc1fc7261c2a00ae1b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a38547a0c927cbefc1fc7261c2a00ae1b">sip_outbound_publish_destroy</a> (void *obj)</td></tr>
<tr class="memdesc:a38547a0c927cbefc1fc7261c2a00ae1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor function for publish information.  <a href="#a38547a0c927cbefc1fc7261c2a00ae1b">More...</a><br /></td></tr>
<tr class="separator:a38547a0c927cbefc1fc7261c2a00ae1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50dee8c49eaca24fc2c6515ccfab67ee"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a50dee8c49eaca24fc2c6515ccfab67ee">sip_outbound_publish_state_alloc</a> (struct <a class="el" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *<a class="el" href="../../de/d6b/test__stasis__state_8c.html#af03d41f70e6c91defcf6a3a6cc3fc419">publish</a>)</td></tr>
<tr class="memdesc:a50dee8c49eaca24fc2c6515ccfab67ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocator function for publish client.  <a href="#a50dee8c49eaca24fc2c6515ccfab67ee">More...</a><br /></td></tr>
<tr class="separator:a50dee8c49eaca24fc2c6515ccfab67ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2a7a3acaae6e42e948d1c6d7628fd91"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ab2a7a3acaae6e42e948d1c6d7628fd91">sip_outbound_publish_state_destroy</a> (void *obj)</td></tr>
<tr class="memdesc:ab2a7a3acaae6e42e948d1c6d7628fd91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor function for publish state.  <a href="#ab2a7a3acaae6e42e948d1c6d7628fd91">More...</a><br /></td></tr>
<tr class="separator:ab2a7a3acaae6e42e948d1c6d7628fd91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a2485b09b24a61b64b6d5295946f031"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2a2485b09b24a61b64b6d5295946f031">sip_outbound_publish_synchronize</a> (struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *removed)</td></tr>
<tr class="memdesc:a2a2485b09b24a61b64b6d5295946f031"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function which starts or stops publish clients when applicable.  <a href="#a2a2485b09b24a61b64b6d5295946f031">More...</a><br /></td></tr>
<tr class="separator:a2a2485b09b24a61b64b6d5295946f031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d81ebb302cba5650c301fe39cd96df"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ac9d81ebb302cba5650c301fe39cd96df">sip_outbound_publish_timer_cb</a> (pj_timer_heap_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#ae9f993fcad1fd49cb50f4a541101ccb7">timer_heap</a>, struct pj_timer_entry *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:ac9d81ebb302cba5650c301fe39cd96df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish client timer callback function.  <a href="#ac9d81ebb302cba5650c301fe39cd96df">More...</a><br /></td></tr>
<tr class="separator:ac9d81ebb302cba5650c301fe39cd96df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04ff39e187e8a719c5de79ac5ef2fd39"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a04ff39e187e8a719c5de79ac5ef2fd39">sip_outbound_publisher_alloc</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, const char *<a class="el" href="../../d8/dbc/structuser.html">user</a>)</td></tr>
<tr class="separator:a04ff39e187e8a719c5de79ac5ef2fd39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1ec5da6df59a4786d2f05786b3aa4e8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aa1ec5da6df59a4786d2f05786b3aa4e8">sip_outbound_publisher_destroy</a> (void *obj)</td></tr>
<tr class="memdesc:aa1ec5da6df59a4786d2f05786b3aa4e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor function for publish client.  <a href="#aa1ec5da6df59a4786d2f05786b3aa4e8">More...</a><br /></td></tr>
<tr class="separator:aa1ec5da6df59a4786d2f05786b3aa4e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1d49a6c38ba6c32a1f735c4e1ad2e6b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#af1d49a6c38ba6c32a1f735c4e1ad2e6b">sip_outbound_publisher_init</a> (void *data)</td></tr>
<tr class="memdesc:af1d49a6c38ba6c32a1f735c4e1ad2e6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function that allocates a pjsip publish client and configures it.  <a href="#af1d49a6c38ba6c32a1f735c4e1ad2e6b">More...</a><br /></td></tr>
<tr class="separator:af1d49a6c38ba6c32a1f735c4e1ad2e6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab577f467d359e1e8615c1386d5c21cdb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ab577f467d359e1e8615c1386d5c21cdb">sip_outbound_publisher_reinit</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:ab577f467d359e1e8615c1386d5c21cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45f47161cf28f5364142324bac4c562d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a45f47161cf28f5364142324bac4c562d">sip_outbound_publisher_reinit_all</a> (void *data)</td></tr>
<tr class="separator:a45f47161cf28f5364142324bac4c562d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace22489d12cce995e794c9a1e90ccca3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ace22489d12cce995e794c9a1e90ccca3">sip_outbound_publisher_set_uri</a> (pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, const char *uri, const char *<a class="el" href="../../d8/dbc/structuser.html">user</a>, pj_str_t *res_uri)</td></tr>
<tr class="separator:ace22489d12cce995e794c9a1e90ccca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33cd4e95a369591703093d56f2e7c054"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a33cd4e95a369591703093d56f2e7c054">sip_outbound_publisher_set_uris</a> (pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher, pj_str_t *<a class="el" href="../../d6/d80/test__res__prometheus_8c.html#af04e2af06333eeaa204e80f690383b30">server_uri</a>, pj_str_t *to_uri, pj_str_t *from_uri)</td></tr>
<tr class="separator:a33cd4e95a369591703093d56f2e7c054"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12f73c896443f8205a405b0a795d709f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a12f73c896443f8205a405b0a795d709f">sip_publish_state_get</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:a12f73c896443f8205a405b0a795d709f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8faafb2d56128108cc07db574572c16e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a8faafb2d56128108cc07db574572c16e">sip_publisher_service_queue</a> (void *data)</td></tr>
<tr class="separator:a8faafb2d56128108cc07db574572c16e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2018b62163a939da16dde2f65eafb928"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2018b62163a939da16dde2f65eafb928">stop_publishing</a> (struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client, struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>)</td></tr>
<tr class="separator:a2018b62163a939da16dde2f65eafb928"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a73dd176f879a093de29f61e684d881"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a1a73dd176f879a093de29f61e684d881">sub_add_handler</a> (struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>)</td></tr>
<tr class="separator:a1a73dd176f879a093de29f61e684d881"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d9a61cda94a855bb1ae6b0e4f7bbaf5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a8d9a61cda94a855bb1ae6b0e4f7bbaf5">validate_publish_config</a> (struct <a class="el" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *<a class="el" href="../../de/d6b/test__stasis__state_8c.html#af03d41f70e6c91defcf6a3a6cc3fc419">publish</a>)</td></tr>
<tr class="separator:a8d9a61cda94a855bb1ae6b0e4f7bbaf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;PJSIP Outbound Publish Support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .reload = reload_module, .unload = unload_module, .load_pri = AST_MODPRI_CHANNEL_DEPEND, .requires = &quot;res_pjproject,res_pjsip&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25cf316b20bd47aef1b5dbda389d12b9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a25cf316b20bd47aef1b5dbda389d12b9">load_lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="memdesc:a25cf316b20bd47aef1b5dbda389d12b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used for locking while loading/reloading.  <a href="#a25cf316b20bd47aef1b5dbda389d12b9">More...</a><br /></td></tr>
<tr class="separator:a25cf316b20bd47aef1b5dbda389d12b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcc2de32fdf1487d09e70c9af7a942df"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abcc2de32fdf1487d09e70c9af7a942df">new_states</a></td></tr>
<tr class="memdesc:abcc2de32fdf1487d09e70c9af7a942df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used on [re]loads to hold new state data.  <a href="#abcc2de32fdf1487d09e70c9af7a942df">More...</a><br /></td></tr>
<tr class="separator:abcc2de32fdf1487d09e70c9af7a942df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5712e22b675f8412b1a2e49acee9d5ff"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a5712e22b675f8412b1a2e49acee9d5ff">pjsip_max_url_size</a> = PJSIP_MAX_URL_SIZE</td></tr>
<tr class="separator:a5712e22b675f8412b1a2e49acee9d5ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6a4fdc32c11b1cb0e096d27d88442c9"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae6a4fdc32c11b1cb0e096d27d88442c9">publisher_handlers</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:ae6a4fdc32c11b1cb0e096d27d88442c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c3d0057b62bfa5b08fe977478749c24"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d82/structast__serializer__shutdown__group.html">ast_serializer_shutdown_group</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2c3d0057b62bfa5b08fe977478749c24">shutdown_group</a></td></tr>
<tr class="separator:a2c3d0057b62bfa5b08fe977478749c24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae46c40b613ed191cac77b861ae4e3547"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae46c40b613ed191cac77b861ae4e3547">&#9670;&nbsp;</a></span>ADD_TO_NEW_STATES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADD_TO_NEW_STATES</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">__obj</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { <span class="keywordflow">if</span> (__obj) { \</div><div class="line">        ao2_link(<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abcc2de32fdf1487d09e70c9af7a942df">new_states</a>, __obj); \</div><div class="line">        ao2_ref(__obj, -1); } } <span class="keywordflow">while</span> (0)</div><div class="ttc" id="res__pjsip__outbound__publish_8c_html_abcc2de32fdf1487d09e70c9af7a942df"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abcc2de32fdf1487d09e70c9af7a942df">new_states</a></div><div class="ttdeci">static struct ao2_container * new_states</div><div class="ttdoc">Used on [re]loads to hold new state data. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00271">res_pjsip_outbound_publish.c:271</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01545">sip_outbound_publish_apply()</a>.</p>

</div>
</div>
<a id="a39fcd37b99a8eafd0aa1c961d8736f88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39fcd37b99a8eafd0aa1c961d8736f88">&#9670;&nbsp;</a></span>DATASTORE_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DATASTORE_BUCKETS&#160;&#160;&#160;53</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01363">1363</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01423">sip_outbound_publish_state_alloc()</a>.</p>

</div>
</div>
<a id="a3400efb86c3d3405041a5392c336e4cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3400efb86c3d3405041a5392c336e4cc">&#9670;&nbsp;</a></span>DEFAULT_PUBLISHER_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_PUBLISHER_BUCKETS&#160;&#160;&#160;119</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00257">257</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

</div>
</div>
<a id="a46aa50c37f5c251756d5564d8c96aa38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46aa50c37f5c251756d5564d8c96aa38">&#9670;&nbsp;</a></span>DEFAULT_STATE_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_STATE_BUCKETS&#160;&#160;&#160;31</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default number of client state container buckets. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00268">268</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01545">sip_outbound_publish_apply()</a>.</p>

</div>
</div>
<a id="ad0704fd0d650be3f899c8e6bf4856d09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0704fd0d650be3f899c8e6bf4856d09">&#9670;&nbsp;</a></span>DESTROY_CLIENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DESTROY_CLIENT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {           \</div><div class="line">   pjsip_publishc_destroy(publisher-&gt;client); \</div><div class="line">   publisher-&gt;client = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; \</div><div class="line">   ao2_ref(publisher, -1); } <span class="keywordflow">while</span> (0)</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01260">sip_outbound_publish_callback()</a>.</p>

</div>
</div>
<a id="a536155006f9be75496538efe377145e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a536155006f9be75496538efe377145e6">&#9670;&nbsp;</a></span>MAX_UNLOAD_TIMEOUT_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_UNLOAD_TIMEOUT_TIME&#160;&#160;&#160;35	/* Seconds */</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Time needs to be long enough for a transaction to timeout if nothing replies. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00262">262</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01622">unload_module()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01707">1707</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01707">1707</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

</div>
</div>
<a id="a4a253e3df4e474d9f21b13bdb86880a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a253e3df4e474d9f21b13bdb86880a4">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype">current_states&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2eecc698c212de4feee6b504fc8f7ea6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eecc698c212de4feee6b504fc8f7ea6">&#9670;&nbsp;</a></span>AO2_STRING_FIELD_CMP_FN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AO2_STRING_FIELD_CMP_FN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/dbc/structuser.html">user</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a64d7c0da58c7df5763ce20145b4ffb93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64d7c0da58c7df5763ce20145b4ffb93">&#9670;&nbsp;</a></span>AO2_STRING_FIELD_HASH_FN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AO2_STRING_FIELD_HASH_FN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/dbc/structuser.html">user</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01707">1707</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

</div>
</div>
<a id="a0161add0b2a4e7baeb8c5765f22235f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0161add0b2a4e7baeb8c5765f22235f0">&#9670;&nbsp;</a></span>ast_sip_publish_client_add_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_publish_client_add_datastore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *&#160;</td>
          <td class="paramname"><em>datastore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a datastore to a SIP event publisher. </p>
<p>Note that SIP uses reference counted datastores. The datastore passed into this function must have been allocated using <a class="el" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc()</a> or there will be serious problems.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to add the datastore to </td></tr>
    <tr><td class="paramname">datastore</td><td>The datastore to be added to the subscription </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00724">724</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01549">ao2_link</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">ast_sip_outbound_publish_client::datastores</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00071">ast_datastore::info</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/db6/datastore_8h_source.html#l00069">ast_datastore::uid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00322">asterisk_start_devicestate_publishing()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00401">asterisk_start_mwi_publishing()</a>.</p>
<div class="fragment"><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;{</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(datastore != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">info</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a>));</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>, datastore)) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   }</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__datastore_html_a2daadcdbac635c83b7bfc6375b4c9be4"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">ast_datastore::uid</a></div><div class="ttdeci">const char * uid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00069">datastore.h:69</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__datastore_html_a03ea21247b5d39b165343431b44131f1"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">ast_datastore::info</a></div><div class="ttdeci">const struct ast_datastore_info * info</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00071">datastore.h:71</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_outbound_publish_client::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdoc">Publisher datastores set up by handlers. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">res_pjsip_outbound_publish.c:232</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b50ad87195f077e1adfd02bd92bfe93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b50ad87195f077e1adfd02bd92bfe93">&#9670;&nbsp;</a></span>ast_sip_publish_client_alloc_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a>* ast_sip_publish_client_alloc_datastore </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alternative for <a class="el" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc()</a> </p>
<p>There are two major differences between this and <a class="el" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc()</a> 1) This allocates a refcounted object 2) This will fill in a uid if one is not provided</p>
<p>DO NOT call <a class="el" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14" title="Free a data store object. ">ast_datastore_free()</a> on a datastore allocated in this way since that function will attempt to free the datastore rather than play nicely with its refcount.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>Callbacks for datastore </td></tr>
    <tr><td class="paramname">uid</td><td>Identifier for datastore </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failed to allocate datastore </td></tr>
    <tr><td class="paramname">non-NULL</td><td>Newly allocated datastore </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00694">694</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../df/da9/uuid_8c_source.html#l00143">ast_uuid_generate_str()</a>, <a class="el" href="../../dd/d1d/uuid_8h_source.html#l00027">AST_UUID_STR_LEN</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00680">sip_outbound_publish_datastore_destroy()</a>, and <a class="el" href="../../d9/db6/datastore_8h_source.html#l00069">ast_datastore::uid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00322">asterisk_start_devicestate_publishing()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00401">asterisk_start_mwi_publishing()</a>.</p>
<div class="fragment"><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;{</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *, datastore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *uid_ptr = uid;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <span class="keywordtype">char</span> uuid_buf[<a class="code" href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a>];</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <span class="keywordflow">if</span> (!info) {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   datastore = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*datastore), <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a468bb04658c3183f5d2e7acb85819a5e">sip_outbound_publish_datastore_destroy</a>);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   <span class="keywordflow">if</span> (!datastore) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   }</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   datastore-&gt;info = <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(uid)) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="comment">/* They didn&#39;t provide an ID so we&#39;ll provide one ourself */</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      uid_ptr = <a class="code" href="../../dd/d1d/uuid_8h.html#abe6d0b550cd9a54964e7891960d1e5bc">ast_uuid_generate_str</a>(uuid_buf, <span class="keyword">sizeof</span>(uuid_buf));</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   datastore-&gt;uid = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(uid_ptr);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <span class="keywordflow">if</span> (!datastore-&gt;uid) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   }</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(datastore, +1);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   <span class="keywordflow">return</span> datastore;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;}</div><div class="ttc" id="uuid_8h_html_a127408e53d34dca0c589a099fabf1e13"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a></div><div class="ttdeci">#define AST_UUID_STR_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1d/uuid_8h_source.html#l00027">uuid.h:27</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a468bb04658c3183f5d2e7acb85819a5e"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a468bb04658c3183f5d2e7acb85819a5e">sip_outbound_publish_datastore_destroy</a></div><div class="ttdeci">static void sip_outbound_publish_datastore_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00680">res_pjsip_outbound_publish.c:680</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="uuid_8h_html_abe6d0b550cd9a54964e7891960d1e5bc"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html#abe6d0b550cd9a54964e7891960d1e5bc">ast_uuid_generate_str</a></div><div class="ttdeci">char * ast_uuid_generate_str(char *buf, size_t size)</div><div class="ttdoc">Generate a UUID string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/da9/uuid_8c_source.html#l00143">uuid.c:143</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aefd7c57ffa48b8af08a6037348cc8051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefd7c57ffa48b8af08a6037348cc8051">&#9670;&nbsp;</a></span>ast_sip_publish_client_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a>* ast_sip_publish_client_get </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find a publish client using its name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the publish client</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>failure </td></tr>
    <tr><td class="paramname">non-NULL</td><td>success</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The publish client is returned with its reference count increased and must be released using ao2_cleanup. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00528">528</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">ast_sip_outbound_publish_state::client</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00514">sip_publish_state_get()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00559">asterisk_publication_devicestate_refresh()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00650">asterisk_publication_mwi_refresh()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00741">send_refresh_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;{</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *<a class="code" href="../../d4/d88/structstate.html">state</a> = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a12f73c896443f8205a405b0a795d709f">sip_publish_state_get</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   <span class="keywordflow">if</span> (!state) {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>, +1);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(state, -1);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <span class="keywordflow">return</span> state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;}</div><div class="ttc" id="structast__sip__outbound__publish__state_html_a5592324b65dd693db5308f4d96e85edf"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">ast_sip_outbound_publish_state::client</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * client</div><div class="ttdoc">Outbound publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">res_pjsip_outbound_publish.c:242</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a></div><div class="ttdoc">Outbound publish state information (persists for lifetime of a publish) </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00240">res_pjsip_outbound_publish.c:240</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a12f73c896443f8205a405b0a795d709f"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a12f73c896443f8205a405b0a795d709f">sip_publish_state_get</a></div><div class="ttdeci">static struct ast_sip_outbound_publish_state * sip_publish_state_get(const char *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00514">res_pjsip_outbound_publish.c:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8dca3a60f8f4b4be12867de93989b85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8dca3a60f8f4b4be12867de93989b85">&#9670;&nbsp;</a></span>ast_sip_publish_client_get_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d5d/structast__datastore.html">ast_datastore</a>* ast_sip_publish_client_get_datastore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve an event publisher datastore. </p>
<p>The datastore retrieved will have its reference count incremented. When the caller is done with the datastore, the reference counted needs to be decremented using <a class="el" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client from which to retrieve the datastore </td></tr>
    <tr><td class="paramname">name</td><td>The name of the datastore to retrieve </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failed to find the specified datastore </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The specified datastore </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00737">737</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">ast_sip_outbound_publish_client::datastores</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00559">asterisk_publication_devicestate_refresh()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00650">asterisk_publication_mwi_refresh()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00374">asterisk_stop_devicestate_publishing()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00452">asterisk_stop_mwi_publishing()</a>.</p>
<div class="fragment"><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;{</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_outbound_publish_client::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdoc">Publisher datastores set up by handlers. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">res_pjsip_outbound_publish.c:232</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a807976be434e855d4a6a404b33868954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a807976be434e855d4a6a404b33868954">&#9670;&nbsp;</a></span>ast_sip_publish_client_get_from_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_publish_client_get_from_uri </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the From URI the client will use. </p>
<dl class="section since"><dt>Since</dt><dd>14.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to get the From URI</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">From-uri</td><td>on success </td></tr>
    <tr><td class="paramname">Empty-string</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00541">541</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00206">sip_outbound_publisher::client</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::from_uri</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::server_uri</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01085">sip_outbound_publish_client_add_publisher()</a>.</p>
<div class="fragment"><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;{</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a> = client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">server_uri</a>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div><div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_a9f4106ac09bd7c29f7fd3e4165b960ca"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">ast_sip_outbound_publish::server_uri</a></div><div class="ttdeci">const ast_string_field server_uri</div><div class="ttdoc">URI for the entity and server. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aa7c8f021112adf97deb38ba0c3f5595f"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">ast_sip_outbound_publish::from_uri</a></div><div class="ttdeci">const ast_string_field from_uri</div><div class="ttdoc">URI for the From header. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6841edd064587ba1c1a2111edb051e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6841edd064587ba1c1a2111edb051e9">&#9670;&nbsp;</a></span>ast_sip_publish_client_get_to_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_publish_client_get_to_uri </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the To URI the client will use. </p>
<dl class="section since"><dt>Since</dt><dd>14.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to get the To URI</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">From-uri</td><td>on success </td></tr>
    <tr><td class="paramname">Empty-string</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00591">591</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::server_uri</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::to_uri</a>.</p>
<div class="fragment"><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;{</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a> = client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">server_uri</a>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div><div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_a9f4106ac09bd7c29f7fd3e4165b960ca"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">ast_sip_outbound_publish::server_uri</a></div><div class="ttdeci">const ast_string_field server_uri</div><div class="ttdoc">URI for the entity and server. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aefbf78be3e0926162efdb9da3c8ce3ab"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">ast_sip_outbound_publish::to_uri</a></div><div class="ttdeci">const ast_string_field to_uri</div><div class="ttdoc">URI for the To header. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a918109b62bf7506dead242df9686010b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a918109b62bf7506dead242df9686010b">&#9670;&nbsp;</a></span>ast_sip_publish_client_get_user_from_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_publish_client_get_user_from_uri </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the From URI the client will use for a specific user. </p>
<dl class="section since"><dt>Since</dt><dd>14.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to get the From URI of a user </td></tr>
    <tr><td class="paramname">user</td><td>The user to retrieve the From URI for </td></tr>
    <tr><td class="paramname">uri</td><td>A buffer to place the URI into </td></tr>
    <tr><td class="paramname">size</td><td>The size of the buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">From-uri</td><td>on success </td></tr>
    <tr><td class="paramname">Empty-string</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00575">575</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00208">sip_outbound_publisher::from_uri</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">sip_outbound_publish_client_get_publisher()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00619">exten_state_publisher_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;{</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   publisher = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#accea5ae19549158c46949a82179df9d3">sip_outbound_publish_client_get_publisher</a>(client, <a class="code" href="../../d8/dbc/structuser.html">user</a>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keywordflow">if</span> (!publisher) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(uri, publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a06c3771afa0dcaff49f544ee5c4fb588">from_uri</a>, size);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <span class="keywordflow">return</span> uri;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_accea5ae19549158c46949a82179df9d3"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#accea5ae19549158c46949a82179df9d3">sip_outbound_publish_client_get_publisher</a></div><div class="ttdeci">static struct sip_outbound_publisher * sip_outbound_publish_client_get_publisher(struct ast_sip_outbound_publish_client *client, const char *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">res_pjsip_outbound_publish.c:551</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a06c3771afa0dcaff49f544ee5c4fb588"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a06c3771afa0dcaff49f544ee5c4fb588">sip_outbound_publisher::from_uri</a></div><div class="ttdeci">char * from_uri</div><div class="ttdoc">The From URI for this specific publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00208">res_pjsip_outbound_publish.c:208</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aedc1967055783ff865e4ba43c667f82f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedc1967055783ff865e4ba43c667f82f">&#9670;&nbsp;</a></span>ast_sip_publish_client_get_user_to_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_publish_client_get_user_to_uri </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the To URI the client will use for a specific user. </p>
<dl class="section since"><dt>Since</dt><dd>14.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to get the To URI of a user </td></tr>
    <tr><td class="paramname">user</td><td>The user to retrieve the To URI for </td></tr>
    <tr><td class="paramname">uri</td><td>A buffer to place the URI into </td></tr>
    <tr><td class="paramname">size</td><td>The size of the buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">To-uri</td><td>on success </td></tr>
    <tr><td class="paramname">Empty-string</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00598">598</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">sip_outbound_publish_client_get_publisher()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00210">sip_outbound_publisher::to_uri</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00619">exten_state_publisher_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;{</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   publisher = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#accea5ae19549158c46949a82179df9d3">sip_outbound_publish_client_get_publisher</a>(client, <a class="code" href="../../d8/dbc/structuser.html">user</a>);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <span class="keywordflow">if</span> (!publisher) {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(uri, publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac3b3aa4c20470116b0bc804a5df1d9ee">to_uri</a>, size);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <span class="keywordflow">return</span> uri;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ac3b3aa4c20470116b0bc804a5df1d9ee"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ac3b3aa4c20470116b0bc804a5df1d9ee">sip_outbound_publisher::to_uri</a></div><div class="ttdeci">char * to_uri</div><div class="ttdoc">The To URI for this specific publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00210">res_pjsip_outbound_publish.c:210</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_accea5ae19549158c46949a82179df9d3"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#accea5ae19549158c46949a82179df9d3">sip_outbound_publish_client_get_publisher</a></div><div class="ttdeci">static struct sip_outbound_publisher * sip_outbound_publish_client_get_publisher(struct ast_sip_outbound_publish_client *client, const char *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">res_pjsip_outbound_publish.c:551</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ef92d9357070459c8d976bde50de446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ef92d9357070459c8d976bde50de446">&#9670;&nbsp;</a></span>ast_sip_publish_client_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_publish_client_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove the user from the client (stopping it from publishing) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client </td></tr>
    <tr><td class="paramname">user</td><td>The user to remove </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01125">1125</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00255">load_lock</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01043">OBJ_UNLINK</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">ast_sip_outbound_publish_client::publishers</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00597">SCOPED_WRLOCK</a>.</p>
<div class="fragment"><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;{</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a79bf74a5170fe5967176ef1e73002e8b">SCOPED_WRLOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a25cf316b20bd47aef1b5dbda389d12b9">load_lock</a>);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">publishers</a>, <a class="code" href="../../d8/dbc/structuser.html">user</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;}</div><div class="ttc" id="res__pjsip__outbound__publish_8c_html_a25cf316b20bd47aef1b5dbda389d12b9"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a25cf316b20bd47aef1b5dbda389d12b9">load_lock</a></div><div class="ttdeci">static ast_rwlock_t load_lock</div><div class="ttdoc">Used for locking while loading/reloading. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00255">res_pjsip_outbound_publish.c:255</a></div></div>
<div class="ttc" id="lock_8h_html_a79bf74a5170fe5967176ef1e73002e8b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a79bf74a5170fe5967176ef1e73002e8b">SCOPED_WRLOCK</a></div><div class="ttdeci">#define SCOPED_WRLOCK(varname, lock)</div><div class="ttdoc">scoped lock specialization for write locks </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00597">lock.h:597</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01043">astobj2.h:1043</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_adb838b688e98c705b8668af938b5f85a"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">ast_sip_outbound_publish_client::publishers</a></div><div class="ttdeci">struct ao2_container * publishers</div><div class="ttdoc">Container of all the client publishing objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">res_pjsip_outbound_publish.c:234</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0370232b5fce85a4edb5b940f0cc1019"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0370232b5fce85a4edb5b940f0cc1019">&#9670;&nbsp;</a></span>ast_sip_publish_client_remove_datastore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_publish_client_remove_datastore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a publication datastore from an event publisher. </p>
<p>This operation may cause the datastore's <a class="el" href="../../da/dfd/gsm__destroy_8c.html#aafde19f7d36ca163a143579c1b125b6d">free()</a> callback to be called if the reference count reaches zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to remove the datastore from </td></tr>
    <tr><td class="paramname">name</td><td>The name of the datastore to remove </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00743">743</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">ast_sip_outbound_publish_client::datastores</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01043">OBJ_UNLINK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00322">asterisk_start_devicestate_publishing()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00401">asterisk_start_mwi_publishing()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00374">asterisk_stop_devicestate_publishing()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00452">asterisk_stop_mwi_publishing()</a>.</p>
<div class="fragment"><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;{</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01043">astobj2.h:1043</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_outbound_publish_client::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdoc">Publisher datastores set up by handlers. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">res_pjsip_outbound_publish.c:232</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fc13fb50475b59d055cbec2d8ece47c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc13fb50475b59d055cbec2d8ece47c">&#9670;&nbsp;</a></span>ast_sip_publish_client_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_publish_client_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *&#160;</td>
          <td class="paramname"><em>body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an outgoing PUBLISH message using a client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to send from </td></tr>
    <tr><td class="paramname">body</td><td>An optional body to add to the PUBLISH</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>failure </td></tr>
    <tr><td class="paramname">0</td><td>success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00842">842</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01743">ao2_callback_data</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00796">publisher_client_send()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">ast_sip_outbound_publish_client::publishers</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00173">asterisk_publisher_devstate_cb()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00232">asterisk_publisher_mwistate_cb()</a>, and <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00741">send_refresh_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;{</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, client);</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">publishers</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>,</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;           <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb36f6fc22f2185a5606263a3745a2c8">publisher_client_send</a>, (<span class="keywordtype">void</span> *)body, &amp;res);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;}</div><div class="ttc" id="res__pjsip__outbound__publish_8c_html_aeb36f6fc22f2185a5606263a3745a2c8"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb36f6fc22f2185a5606263a3745a2c8">publisher_client_send</a></div><div class="ttdeci">static int publisher_client_send(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00796">res_pjsip_outbound_publish.c:796</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_a63fd831fe48aed32d3ef992ad8e45293"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a></div><div class="ttdeci">#define ao2_callback_data(container, flags, cb_fn, arg, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01743">astobj2.h:1743</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_adb838b688e98c705b8668af938b5f85a"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">ast_sip_outbound_publish_client::publishers</a></div><div class="ttdeci">struct ao2_container * publishers</div><div class="ttdoc">Container of all the client publishing objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">res_pjsip_outbound_publish.c:234</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa296a0da93960abee1c4e84efb6130fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa296a0da93960abee1c4e84efb6130fc">&#9670;&nbsp;</a></span>ast_sip_publish_client_user_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_publish_client_user_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *&#160;</td>
          <td class="paramname"><em>body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an outgoing PUBLISH message based on the user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The publication client to send from </td></tr>
    <tr><td class="paramname">user</td><td>The user to send to </td></tr>
    <tr><td class="paramname">body</td><td>An optional body to add to the PUBLISH</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>failure </td></tr>
    <tr><td class="paramname">0</td><td>success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01109">1109</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00796">publisher_client_send()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">sip_outbound_publish_client_get_publisher()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00619">exten_state_publisher_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;{</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;   publisher = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#accea5ae19549158c46949a82179df9d3">sip_outbound_publish_client_get_publisher</a>(client, <a class="code" href="../../d8/dbc/structuser.html">user</a>);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   <span class="keywordflow">if</span> (!publisher) {</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;   }</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb36f6fc22f2185a5606263a3745a2c8">publisher_client_send</a>(publisher, (<span class="keywordtype">void</span> *)body, &amp;res, 0);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;}</div><div class="ttc" id="res__pjsip__outbound__publish_8c_html_aeb36f6fc22f2185a5606263a3745a2c8"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb36f6fc22f2185a5606263a3745a2c8">publisher_client_send</a></div><div class="ttdeci">static int publisher_client_send(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00796">res_pjsip_outbound_publish.c:796</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_accea5ae19549158c46949a82179df9d3"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#accea5ae19549158c46949a82179df9d3">sip_outbound_publish_client_get_publisher</a></div><div class="ttdeci">static struct sip_outbound_publisher * sip_outbound_publish_client_get_publisher(struct ast_sip_outbound_publish_client *client, const char *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">res_pjsip_outbound_publish.c:551</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8898d2239bd93b0949c090b451a8d196"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8898d2239bd93b0949c090b451a8d196">&#9670;&nbsp;</a></span>ast_sip_register_event_publisher_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_register_event_publisher_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register an event publisher handler. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Handler was registered successfully </td></tr>
    <tr><td class="paramname">non-zero</td><td>Handler was not registered successfully </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00614">614</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00043">ast_sip_event_publisher_handler::event_name</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00350">find_publisher_handler_for_event_name()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00581">SCOPED_LOCK</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">sip_outbound_publish_synchronize()</a>, <a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00054">ast_sip_event_publisher_handler::start_publishing</a>, <a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00064">ast_sip_event_publisher_handler::stop_publishing</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00345">sub_add_handler()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00960">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;{</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *existing;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <span class="keywordflow">if</span> (!handler-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#a37bc14558569a05a854d7b4f7d2d58ce">start_publishing</a> || !handler-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#afd18a36401e176aa953c43a7e8a9c836">stop_publishing</a>) {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Handler does not implement required callbacks. Cannot register\n&quot;</span>);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(handler-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>)) {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No event package specified for event publisher handler. Cannot register\n&quot;</span>);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   existing = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeea9ed171992fb252a3ae3c70e1e6f15">find_publisher_handler_for_event_name</a>(handler-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keywordflow">if</span> (existing) {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register event publisher handler for event %s. &quot;</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="stringliteral">&quot;A handler is already registered\n&quot;</span>, handler-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a1a73dd176f879a093de29f61e684d881">sub_add_handler</a>(handler);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2a2485b09b24a61b64b6d5295946f031">sip_outbound_publish_synchronize</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html_a37bc14558569a05a854d7b4f7d2d58ce"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html#a37bc14558569a05a854d7b4f7d2d58ce">ast_sip_event_publisher_handler::start_publishing</a></div><div class="ttdeci">int(* start_publishing)(struct ast_sip_outbound_publish *configuration, struct ast_sip_outbound_publish_client *client)</div><div class="ttdoc">Called when a publisher should start publishing. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00054">res_pjsip_outbound_publish.h:54</a></div></div>
<div class="ttc" id="structpublisher__handlers_html"><div class="ttname"><a href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00343">res_pjsip_outbound_publish.c:343</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html_afd18a36401e176aa953c43a7e8a9c836"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html#afd18a36401e176aa953c43a7e8a9c836">ast_sip_event_publisher_handler::stop_publishing</a></div><div class="ttdeci">int(* stop_publishing)(struct ast_sip_outbound_publish_client *client)</div><div class="ttdoc">Called when a publisher should stop publishing. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00064">res_pjsip_outbound_publish.h:64</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a></div><div class="ttdoc">Callbacks that event publisher handlers will define. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00041">res_pjsip_outbound_publish.h:41</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html_aeccf279e6fca0e5f8536fdf76c838728"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html#aeccf279e6fca0e5f8536fdf76c838728">ast_sip_event_publisher_handler::event_name</a></div><div class="ttdeci">const char * event_name</div><div class="ttdoc">The name of the event this handler deals with. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00043">res_pjsip_outbound_publish.h:43</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_aeea9ed171992fb252a3ae3c70e1e6f15"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeea9ed171992fb252a3ae3c70e1e6f15">find_publisher_handler_for_event_name</a></div><div class="ttdeci">static struct ast_sip_event_publisher_handler * find_publisher_handler_for_event_name(const char *event_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00350">res_pjsip_outbound_publish.c:350</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a1a73dd176f879a093de29f61e684d881"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a1a73dd176f879a093de29f61e684d881">sub_add_handler</a></div><div class="ttdeci">static void sub_add_handler(struct ast_sip_event_publisher_handler *handler)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00345">res_pjsip_outbound_publish.c:345</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a2a2485b09b24a61b64b6d5295946f031"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2a2485b09b24a61b64b6d5295946f031">sip_outbound_publish_synchronize</a></div><div class="ttdeci">static void sip_outbound_publish_synchronize(struct ast_sip_event_publisher_handler *removed)</div><div class="ttdoc">Helper function which starts or stops publish clients when applicable. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">res_pjsip_outbound_publish.c:470</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a19a9158e2cabc358e93d877e0b8b8b03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19a9158e2cabc358e93d877e0b8b8b03">&#9670;&nbsp;</a></span>ast_sip_unregister_event_publisher_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_unregister_event_publisher_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a publish handler. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00641">641</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00131">sip_outbound_publish_message::next</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00581">SCOPED_LOCK</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">sip_outbound_publish_synchronize()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00862">load_module()</a>, and <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00942">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;{</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *iter;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>, iter, <a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#a1f11c56c9ea6e8e88dddb687ef4b8861">next</a>) {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="keywordflow">if</span> (handler == iter) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#a1f11c56c9ea6e8e88dddb687ef4b8861">next</a>);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2a2485b09b24a61b64b6d5295946f031">sip_outbound_publish_synchronize</a>(handler);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structpublisher__handlers_html"><div class="ttname"><a href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00343">res_pjsip_outbound_publish.c:343</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a></div><div class="ttdoc">Callbacks that event publisher handlers will define. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00041">res_pjsip_outbound_publish.h:41</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html_a1f11c56c9ea6e8e88dddb687ef4b8861"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html#a1f11c56c9ea6e8e88dddb687ef4b8861">ast_sip_event_publisher_handler::next</a></div><div class="ttdeci">struct ast_sip_event_publisher_handler * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00066">res_pjsip_outbound_publish.h:66</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a2a2485b09b24a61b64b6d5295946f031"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2a2485b09b24a61b64b6d5295946f031">sip_outbound_publish_synchronize</a></div><div class="ttdeci">static void sip_outbound_publish_synchronize(struct ast_sip_event_publisher_handler *removed)</div><div class="ttdoc">Helper function which starts or stops publish clients when applicable. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">res_pjsip_outbound_publish.c:470</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a153641303e986a50fc88970d9ea327d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a153641303e986a50fc88970d9ea327d8">&#9670;&nbsp;</a></span>can_reuse_publish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int can_reuse_publish </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *&#160;</td>
          <td class="paramname"><em>existing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *&#160;</td>
          <td class="paramname"><em>applied</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01239">1239</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::event</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::from_uri</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00193">ast_sip_outbound_publish::outbound_auths</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::outbound_proxy</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::server_uri</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::to_uri</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01492">current_state_reusable()</a>.</p>
<div class="fragment"><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;{</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   <span class="keywordflow">if</span> (strcmp(existing-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">server_uri</a>, applied-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">server_uri</a>) || strcmp(existing-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>, applied-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>) ||</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      strcmp(existing-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>, applied-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>) || strcmp(existing-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a8b55fd039a8b14683eae2d3c0a1c86ae">outbound_proxy</a>, applied-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a8b55fd039a8b14683eae2d3c0a1c86ae">outbound_proxy</a>) ||</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      strcmp(existing-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aade3e13866a9674783944ec186ddba57">event</a>, applied-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aade3e13866a9674783944ec186ddba57">event</a>) ||</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;existing-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a045e92a13d3f4b1e0d061b4b6e64f1e1">outbound_auths</a>) != <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;applied-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a045e92a13d3f4b1e0d061b4b6e64f1e1">outbound_auths</a>)) {</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;existing-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a045e92a13d3f4b1e0d061b4b6e64f1e1">outbound_auths</a>); ++i) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;existing-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a045e92a13d3f4b1e0d061b4b6e64f1e1">outbound_auths</a>, i), <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;applied-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a045e92a13d3f4b1e0d061b4b6e64f1e1">outbound_auths</a>, i))) {</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;   }</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;}</div><div class="ttc" id="structast__sip__outbound__publish_html_a045e92a13d3f4b1e0d061b4b6e64f1e1"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#a045e92a13d3f4b1e0d061b4b6e64f1e1">ast_sip_outbound_publish::outbound_auths</a></div><div class="ttdeci">struct ast_sip_auth_vector outbound_auths</div><div class="ttdoc">Configured authentication credentials. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00193">res_pjsip_outbound_publish.c:193</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_a8b55fd039a8b14683eae2d3c0a1c86ae"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#a8b55fd039a8b14683eae2d3c0a1c86ae">ast_sip_outbound_publish::outbound_proxy</a></div><div class="ttdeci">const ast_string_field outbound_proxy</div><div class="ttdoc">Outbound proxy to use. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_a9f4106ac09bd7c29f7fd3e4165b960ca"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">ast_sip_outbound_publish::server_uri</a></div><div class="ttdeci">const ast_string_field server_uri</div><div class="ttdoc">URI for the entity and server. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aade3e13866a9674783944ec186ddba57"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aade3e13866a9674783944ec186ddba57">ast_sip_outbound_publish::event</a></div><div class="ttdeci">const ast_string_field event</div><div class="ttdoc">The event type to publish. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aa7c8f021112adf97deb38ba0c3f5595f"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">ast_sip_outbound_publish::from_uri</a></div><div class="ttdeci">const ast_string_field from_uri</div><div class="ttdoc">URI for the From header. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aefbf78be3e0926162efdb9da3c8ce3ab"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">ast_sip_outbound_publish::to_uri</a></div><div class="ttdeci">const ast_string_field to_uri</div><div class="ttdoc">URI for the To header. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9c14664cac334ea2c347f263fab4d23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9c14664cac334ea2c347f263fab4d23">&#9670;&nbsp;</a></span>cancel_and_unpublish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cancel_and_unpublish </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function which cancels and un-publishes a no longer used client. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01152">1152</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00417">cancel_refresh_timer_task()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00220">sip_outbound_publisher::destroy</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01132">explicit_publish_destroy()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">sip_outbound_publisher::owner</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00440">send_unpublish_task()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00218">sip_outbound_publisher::sending</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00222">sip_outbound_publisher::serializer</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00236">ast_sip_outbound_publish_client::started</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01204">sip_outbound_publish_state_destroy()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">sip_outbound_publish_synchronize()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00455">stop_publishing()</a>.</p>
<div class="fragment"><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;{</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher = obj;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client = publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">owner</a>;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, publisher);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   <span class="keywordflow">if</span> (!client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#ac9fff1bbd83ce5e959fb639570c9c5f5">started</a>) {</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      <span class="comment">/* If the publisher was never started, there&#39;s nothing to unpublish, so just</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">       * destroy the publication and remove its reference to the publisher.</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a800f3aeb35d00de4117dbd19674bfa37">explicit_publish_destroy</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(publisher))) {</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      }</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;   }</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a62ccc7ce028b4b702a89df4ed02a38e1">cancel_refresh_timer_task</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(publisher))) {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not stop refresh timer on outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;         <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>));</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;   }</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;   <span class="comment">/* If nothing is being sent right now send the unpublish - the destroy will happen in the subsequent callback */</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   <span class="keywordflow">if</span> (!publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#aa0d0c718a51ec9df55c3eb060e8970f0">sending</a>) {</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae8b25c3719a93708567156963444c8ae">send_unpublish_task</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(publisher))) {</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not send unpublish message on outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>));</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      }</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ab16498ae4f96c29649dd52ac032e811d">destroy</a> = 1;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;}</div><div class="ttc" id="structast__sip__outbound__publish__client_html_ac9fff1bbd83ce5e959fb639570c9c5f5"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#ac9fff1bbd83ce5e959fb639570c9c5f5">ast_sip_outbound_publish_client::started</a></div><div class="ttdeci">unsigned int started</div><div class="ttdoc">Publishing has been fully started and event type informed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00236">res_pjsip_outbound_publish.c:236</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a800f3aeb35d00de4117dbd19674bfa37"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a800f3aeb35d00de4117dbd19674bfa37">explicit_publish_destroy</a></div><div class="ttdeci">static int explicit_publish_destroy(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01132">res_pjsip_outbound_publish.c:1132</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a></div><div class="ttdoc">Outbound publish client state information (persists for lifetime of a publish) </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00228">res_pjsip_outbound_publish.c:228</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ae8b25c3719a93708567156963444c8ae"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae8b25c3719a93708567156963444c8ae">send_unpublish_task</a></div><div class="ttdeci">static int send_unpublish_task(void *data)</div><div class="ttdoc">Task for sending an unpublish. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00440">res_pjsip_outbound_publish.c:440</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ac23e23ba60f358de78a893d537c0afa4">sip_outbound_publisher::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdoc">Serializer for stuff and things. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00222">res_pjsip_outbound_publish.c:222</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a8d46da4b117d10a2f6987137b2bd93f8"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">sip_outbound_publisher::owner</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * owner</div><div class="ttdoc">The client object that &amp;#39;owns&amp;#39; this client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">res_pjsip_outbound_publish.c:204</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_aa0d0c718a51ec9df55c3eb060e8970f0"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#aa0d0c718a51ec9df55c3eb060e8970f0">sip_outbound_publisher::sending</a></div><div class="ttdeci">struct sip_outbound_publish_message * sending</div><div class="ttdoc">The message currently being sent. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00218">res_pjsip_outbound_publish.c:218</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ab16498ae4f96c29649dd52ac032e811d"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ab16498ae4f96c29649dd52ac032e811d">sip_outbound_publisher::destroy</a></div><div class="ttdeci">unsigned int destroy</div><div class="ttdoc">Publish client should be destroyed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00220">res_pjsip_outbound_publish.c:220</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a62ccc7ce028b4b702a89df4ed02a38e1"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a62ccc7ce028b4b702a89df4ed02a38e1">cancel_refresh_timer_task</a></div><div class="ttdeci">static int cancel_refresh_timer_task(void *data)</div><div class="ttdoc">Task for cancelling a refresh timer. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00417">res_pjsip_outbound_publish.c:417</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab88f222edffd9d2f7781a4657f93186a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab88f222edffd9d2f7781a4657f93186a">&#9670;&nbsp;</a></span>cancel_publish_refresh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cancel_publish_refresh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *&#160;</td>
          <td class="paramname"><em>publisher</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function which cancels the refresh timer on a publisher. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00363">363</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">ast_sip_get_pjsip_endpoint()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00212">sip_outbound_publisher::timer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00417">cancel_refresh_timer_task()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00373">schedule_publish_refresh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;{</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <span class="keywordflow">if</span> (pj_timer_heap_cancel_if_active(pjsip_endpt_get_timer_heap(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>()),</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      &amp;publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#acef2f236d7d6e9e799545af3a9a27a19">timer</a>, 0)) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="comment">/* The timer was successfully cancelled, drop the refcount of the publisher */</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_acef2f236d7d6e9e799545af3a9a27a19"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#acef2f236d7d6e9e799545af3a9a27a19">sip_outbound_publisher::timer</a></div><div class="ttdeci">pj_timer_entry timer</div><div class="ttdoc">Timer entry for refreshing publish. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00212">res_pjsip_outbound_publish.c:212</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a785afb501e315c8a97ad476fb6a8be1d"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a></div><div class="ttdeci">pjsip_endpoint * ast_sip_get_pjsip_endpoint(void)</div><div class="ttdoc">Get a pointer to the PJSIP endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03718">res_pjsip.c:3718</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a62ccc7ce028b4b702a89df4ed02a38e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62ccc7ce028b4b702a89df4ed02a38e1">&#9670;&nbsp;</a></span>cancel_refresh_timer_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cancel_refresh_timer_task </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Task for cancelling a refresh timer. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00417">417</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00363">cancel_publish_refresh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01152">cancel_and_unpublish()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01085">sip_outbound_publish_client_add_publisher()</a>.</p>
<div class="fragment"><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;{</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher = data;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ab88f222edffd9d2f7781a4657f93186a">cancel_publish_refresh</a>(publisher);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ab88f222edffd9d2f7781a4657f93186a"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ab88f222edffd9d2f7781a4657f93186a">cancel_publish_refresh</a></div><div class="ttdeci">static void cancel_publish_refresh(struct sip_outbound_publisher *publisher)</div><div class="ttdoc">Helper function which cancels the refresh timer on a publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00363">res_pjsip_outbound_publish.c:363</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f5741b9ac45d75b0697282ba7af8cfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f5741b9ac45d75b0697282ba7af8cfd">&#9670;&nbsp;</a></span>current_state_reusable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int current_state_reusable </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *&#160;</td>
          <td class="paramname"><em>publish</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *&#160;</td>
          <td class="paramname"><em>current_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01492">1492</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05204">ast_sip_push_task_wait_servant()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01239">can_reuse_publish()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">ast_sip_outbound_publish_state::client</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00195">ast_sip_outbound_publish::multi_user</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">ast_sip_outbound_publish_client::publishers</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01008">sip_outbound_publisher_reinit_all()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01545">sip_outbound_publish_apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;{</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *old_publish;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment">    * Don&#39;t maintain the old state/client objects if the multi_user option changed.</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   <span class="keywordflow">if</span> ((!publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa5133588e2344f0b6eda2f00df1cb66c">multi_user</a> &amp;&amp; current_state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa5133588e2344f0b6eda2f00df1cb66c">multi_user</a>) ||</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;       (publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa5133588e2344f0b6eda2f00df1cb66c">multi_user</a> &amp;&amp; !current_state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa5133588e2344f0b6eda2f00df1cb66c">multi_user</a>)) {</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;   }</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a153641303e986a50fc88970d9ea327d8">can_reuse_publish</a>(current_state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>, publish)) {</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;<span class="comment">       * Something significant has changed in the configuration, so we are</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;<span class="comment">       * unable to use the old state object. The current state needs to go</span></div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<span class="comment">       * away and a new one needs to be created.</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;   }</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;<span class="comment">    * We can reuse the current state object so keep it, but swap out the</span></div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;<span class="comment">    * underlying publish object with the new one.</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;   old_publish = current_state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;   current_state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a> = <a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a45f47161cf28f5364142324bac4c562d">sip_outbound_publisher_reinit_all</a>,</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      current_state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">publishers</a>)) {</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;<span class="comment">       * If the state object fails to re-initialize then swap</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="comment">       * the old publish info back in.</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      current_state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a> = <a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to reinitialize client(s) for outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;         <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(current_state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>));</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;   }</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="comment">    * Since we swapped out the publish object the new one needs a ref</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;<span class="comment">    * while the old one needs to go away.</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(current_state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>, +1);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(old_publish);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;   <span class="comment">/* Tell the caller that the current state object should be used */</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;}</div><div class="ttc" id="res__pjsip__outbound__publish_8c_html_a45f47161cf28f5364142324bac4c562d"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a45f47161cf28f5364142324bac4c562d">sip_outbound_publisher_reinit_all</a></div><div class="ttdeci">static int sip_outbound_publisher_reinit_all(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01008">res_pjsip_outbound_publish.c:1008</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html_a5592324b65dd693db5308f4d96e85edf"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">ast_sip_outbound_publish_state::client</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * client</div><div class="ttdoc">Outbound publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">res_pjsip_outbound_publish.c:242</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_gab8c82412fe0432a91d5c7985cfdf9b59"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a></div><div class="ttdeci">int ast_sip_push_task_wait_servant(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Push a task to SIP servants and wait for it to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05204">res_pjsip.c:5204</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aa5133588e2344f0b6eda2f00df1cb66c"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aa5133588e2344f0b6eda2f00df1cb66c">ast_sip_outbound_publish::multi_user</a></div><div class="ttdeci">unsigned int multi_user</div><div class="ttdoc">The publishing client is used for multiple users when true. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00195">res_pjsip_outbound_publish.c:195</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_adb838b688e98c705b8668af938b5f85a"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">ast_sip_outbound_publish_client::publishers</a></div><div class="ttdeci">struct ao2_container * publishers</div><div class="ttdoc">Container of all the client publishing objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">res_pjsip_outbound_publish.c:234</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a153641303e986a50fc88970d9ea327d8"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a153641303e986a50fc88970d9ea327d8">can_reuse_publish</a></div><div class="ttdeci">static int can_reuse_publish(struct ast_sip_outbound_publish *existing, struct ast_sip_outbound_publish *applied)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01239">res_pjsip_outbound_publish.c:1239</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac60c8c7a11b9aa2b347630c7d08af17d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac60c8c7a11b9aa2b347630c7d08af17d">&#9670;&nbsp;</a></span>datastore_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int datastore_cmp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01387">1387</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>, and <a class="el" href="../../d9/db6/datastore_8h_source.html#l00069">ast_datastore::uid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01423">sip_outbound_publish_state_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;{</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *object_left = obj;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *object_right = arg;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *right_key = arg;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      right_key = object_right-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a>;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      cmp = strcmp(object_left-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a>, right_key);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>:</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        cmp = strncmp(object_left-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a>, right_key, strlen(right_key));</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">       * What arg points to is specific to this traversal callback</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">       * and has no special meaning to astobj2.</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      cmp = 0;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   }</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   <span class="keywordflow">if</span> (cmp) {</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   }</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">    * At this point the traversal callback is identical to a sorted</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment">    * container.</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="structast__datastore_html_a2daadcdbac635c83b7bfc6375b4c9be4"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">ast_datastore::uid</a></div><div class="ttdeci">const char * uid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00069">datastore.h:69</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae586d6908c81e9a59e0e68358c12c9cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae586d6908c81e9a59e0e68358c12c9cc">&#9670;&nbsp;</a></span>datastore_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int datastore_hash </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01365">1365</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01206">ast_str_hash()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, and <a class="el" href="../../d9/db6/datastore_8h_source.html#l00069">ast_datastore::uid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01423">sip_outbound_publish_state_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;{</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      uid = obj;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;      datastore = obj;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      uid = datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a>;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      <span class="comment">/* Hash can only work on something with a full key. */</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   }</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a33ab7fa091d5513d8507d3bd33ef5b55">ast_str_hash</a>(uid);</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="structast__datastore_html_a2daadcdbac635c83b7bfc6375b4c9be4"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">ast_datastore::uid</a></div><div class="ttdeci">const char * uid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00069">datastore.h:69</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
<div class="ttc" id="strings_8h_html_a33ab7fa091d5513d8507d3bd33ef5b55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a33ab7fa091d5513d8507d3bd33ef5b55">ast_str_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01206">strings.h:1206</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a800f3aeb35d00de4117dbd19674bfa37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a800f3aeb35d00de4117dbd19674bfa37">&#9670;&nbsp;</a></span>explicit_publish_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int explicit_publish_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01132">1132</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00206">sip_outbound_publisher::client</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01152">cancel_and_unpublish()</a>.</p>
<div class="fragment"><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;{</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher = data;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">    * If there is no pjsip publishing client then we obviously don&#39;t need</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">    * to destroy it. Also, the ref for the Asterisk publishing client that</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">    * pjsip had would not exist or should already be gone as well.</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   <span class="keywordflow">if</span> (publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>) {</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      pjsip_publishc_destroy(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   }</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a89aa32c5b486e40d8ca97bed4fe724f8"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">sip_outbound_publisher::client</a></div><div class="ttdeci">pjsip_publishc * client</div><div class="ttdoc">Underlying publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00206">res_pjsip_outbound_publish.c:206</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeea9ed171992fb252a3ae3c70e1e6f15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeea9ed171992fb252a3ae3c70e1e6f15">&#9670;&nbsp;</a></span>find_publisher_handler_for_event_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a>* find_publisher_handler_for_event_name </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>event_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00350">350</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00043">ast_sip_event_publisher_handler::event_name</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00131">sip_outbound_publish_message::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00614">ast_sip_register_event_publisher_handler()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">sip_outbound_publish_synchronize()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00455">stop_publishing()</a>.</p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *iter;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>, iter, <a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#a1f11c56c9ea6e8e88dddb687ef4b8861">next</a>) {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">if</span> (!strcmp(iter-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>, <a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>)) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keywordflow">return</span> iter;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div><div class="ttc" id="structpublisher__handlers_html"><div class="ttname"><a href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00343">res_pjsip_outbound_publish.c:343</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a></div><div class="ttdoc">Callbacks that event publisher handlers will define. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00041">res_pjsip_outbound_publish.h:41</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html_aeccf279e6fca0e5f8536fdf76c838728"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html#aeccf279e6fca0e5f8536fdf76c838728">ast_sip_event_publisher_handler::event_name</a></div><div class="ttdeci">const char * event_name</div><div class="ttdoc">The name of the event this handler deals with. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00043">res_pjsip_outbound_publish.h:43</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html_a1f11c56c9ea6e8e88dddb687ef4b8861"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html#a1f11c56c9ea6e8e88dddb687ef4b8861">ast_sip_event_publisher_handler::next</a></div><div class="ttdeci">struct ast_sip_event_publisher_handler * next</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00066">res_pjsip_outbound_publish.h:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adf296052b4732168e00f3d47e78e6595"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf296052b4732168e00f3d47e78e6595">&#9670;&nbsp;</a></span>get_publishes_and_update_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* get_publishes_and_update_state </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00323">323</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00908">ao2_global_obj_replace_unref</a>, <a class="el" href="../../d8/d25/sorcery_8h_source.html#l00123">AST_RETRIEVE_FLAG_ALL</a>, <a class="el" href="../../d8/d25/sorcery_8h_source.html#l00120">AST_RETRIEVE_FLAG_MULTIPLE</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">ast_sip_get_sorcery()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l01897">ast_sorcery_retrieve_by_fields()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l00502">container</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00255">load_lock</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00597">SCOPED_WRLOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">sip_outbound_publish_synchronize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;{</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d0/d60/res__fax_8c.html#a7ea220e4d14b05876af4430e9832ce47">container</a>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a79bf74a5170fe5967176ef1e73002e8b">SCOPED_WRLOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a25cf316b20bd47aef1b5dbda389d12b9">load_lock</a>);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   container = <a class="code" href="../../d8/d25/sorcery_8h.html#aaa9cd237841a70862001f580b23212c9">ast_sorcery_retrieve_by_fields</a>(</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>,</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <a class="code" href="../../d8/d25/sorcery_8h.html#a320e98591a38316a313a3ca83ea8df20a019a4a531b83f4ab0b35a3c788bf8d55">AST_RETRIEVE_FLAG_MULTIPLE</a> | <a class="code" href="../../d8/d25/sorcery_8h.html#a320e98591a38316a313a3ca83ea8df20a643c7c50af2691bb16052509d47b61cd">AST_RETRIEVE_FLAG_ALL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abcc2de32fdf1487d09e70c9af7a942df">new_states</a>) {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d0/d60/res__fax_8c.html#a7ea220e4d14b05876af4430e9832ce47">container</a>;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a>(current_states, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abcc2de32fdf1487d09e70c9af7a942df">new_states</a>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abcc2de32fdf1487d09e70c9af7a942df">new_states</a>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abcc2de32fdf1487d09e70c9af7a942df">new_states</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d60/res__fax_8c.html#a7ea220e4d14b05876af4430e9832ce47">container</a>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div><div class="ttc" id="res__pjsip__outbound__publish_8c_html_a25cf316b20bd47aef1b5dbda389d12b9"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a25cf316b20bd47aef1b5dbda389d12b9">load_lock</a></div><div class="ttdeci">static ast_rwlock_t load_lock</div><div class="ttdoc">Used for locking while loading/reloading. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00255">res_pjsip_outbound_publish.c:255</a></div></div>
<div class="ttc" id="lock_8h_html_a79bf74a5170fe5967176ef1e73002e8b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a79bf74a5170fe5967176ef1e73002e8b">SCOPED_WRLOCK</a></div><div class="ttdeci">#define SCOPED_WRLOCK(varname, lock)</div><div class="ttdoc">scoped lock specialization for write locks </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00597">lock.h:597</a></div></div>
<div class="ttc" id="sorcery_8h_html_a320e98591a38316a313a3ca83ea8df20a643c7c50af2691bb16052509d47b61cd"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a320e98591a38316a313a3ca83ea8df20a643c7c50af2691bb16052509d47b61cd">AST_RETRIEVE_FLAG_ALL</a></div><div class="ttdoc">Perform no matching, return all objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d25/sorcery_8h_source.html#l00123">sorcery.h:123</a></div></div>
<div class="ttc" id="sorcery_8h_html_a320e98591a38316a313a3ca83ea8df20a019a4a531b83f4ab0b35a3c788bf8d55"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a320e98591a38316a313a3ca83ea8df20a019a4a531b83f4ab0b35a3c788bf8d55">AST_RETRIEVE_FLAG_MULTIPLE</a></div><div class="ttdoc">Return all matching objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d25/sorcery_8h_source.html#l00120">sorcery.h:120</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="res__fax_8c_html_a7ea220e4d14b05876af4430e9832ce47"><div class="ttname"><a href="../../d0/d60/res__fax_8c.html#a7ea220e4d14b05876af4430e9832ce47">container</a></div><div class="ttdeci">struct ao2_container * container</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d60/res__fax_8c_source.html#l00502">res_fax.c:502</a></div></div>
<div class="ttc" id="sorcery_8h_html_aaa9cd237841a70862001f580b23212c9"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#aaa9cd237841a70862001f580b23212c9">ast_sorcery_retrieve_by_fields</a></div><div class="ttdeci">void * ast_sorcery_retrieve_by_fields(const struct ast_sorcery *sorcery, const char *type, unsigned int flags, struct ast_variable *fields)</div><div class="ttdoc">Retrieve an object or multiple objects using specific fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l01897">sorcery.c:1897</a></div></div>
<div class="ttc" id="astobj2_8h_html_a3a11e1a1d3e99bed3ea0a7c57a3880d7"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a></div><div class="ttdeci">#define ao2_global_obj_replace_unref(holder, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00908">astobj2.h:908</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a5572d52daf1a841b0f9308df901448c8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a></div><div class="ttdeci">struct ast_sorcery * ast_sip_get_sorcery(void)</div><div class="ttdoc">Get a pointer to the SIP sorcery structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">pjsip_configuration.c:2404</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_abcc2de32fdf1487d09e70c9af7a942df"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abcc2de32fdf1487d09e70c9af7a942df">new_states</a></div><div class="ttdeci">static struct ao2_container * new_states</div><div class="ttdoc">Used on [re]loads to hold new state data. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00271">res_pjsip_outbound_publish.c:271</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01647">1647</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00246">ast_pjproject_get_buildopt()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01229">ast_serializer_shutdown_group_alloc()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">ast_sip_get_pjsip_endpoint()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">ast_sip_get_sorcery()</a>, <a class="el" href="../../d8/d25/sorcery_8h_source.html#l00456">ast_sorcery_apply_config</a>, <a class="el" href="../../d8/d25/sorcery_8h_source.html#l00477">ast_sorcery_apply_default</a>, <a class="el" href="../../d8/d25/sorcery_8h_source.html#l00955">ast_sorcery_object_field_register</a>, <a class="el" href="../../d8/d25/sorcery_8h_source.html#l01005">ast_sorcery_object_field_register_custom</a>, <a class="el" href="../../d8/d25/sorcery_8h_source.html#l00838">ast_sorcery_object_register</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l01442">ast_sorcery_reload_object()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00189">ast_sip_outbound_publish::expiration</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00816">FLDSET</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::from_uri</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00191">ast_sip_outbound_publish::max_auth_attempts</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00195">ast_sip_outbound_publish::multi_user</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00294">OPT_BOOL_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00399">OPT_NOOP_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00435">OPT_STRINGFIELD_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00459">OPT_UINT_T</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01614">outbound_auth_handler()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::outbound_proxy</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00124">pjsip_max_url_size</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00064">server_uri</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00667">sip_outbound_publish_alloc()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01545">sip_outbound_publish_apply()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">sip_outbound_publish_synchronize()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00827">STRFLDSET</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::to_uri</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::transport</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01622">unload_module()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01690">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;{</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;   <span class="comment">/* As of pjproject 2.4.5, PJSIP_MAX_URL_SIZE isn&#39;t exposed yet but we try anyway. */</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   <a class="code" href="../../df/dd5/res__pjproject_8h.html#a92bc257bd72957f8aac77a9fcf64228e">ast_pjproject_get_buildopt</a>(<span class="stringliteral">&quot;PJSIP_MAX_URL_SIZE&quot;</span>, <span class="stringliteral">&quot;%d&quot;</span>, &amp;<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a5712e22b675f8412b1a2e49acee9d5ff">pjsip_max_url_size</a>);</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2c3d0057b62bfa5b08fe977478749c24">shutdown_group</a> = <a class="code" href="../../d3/d40/threadpool_8h.html#a26d6e398621cb8b8d2e1066b0393944a">ast_serializer_shutdown_group_alloc</a>();</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2c3d0057b62bfa5b08fe977478749c24">shutdown_group</a>) {</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;   }</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#a9db9fd1cf5ec967af2ad3a63c27e0233">ast_sorcery_apply_config</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;res_pjsip_outbound_publish&quot;</span>);</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#ad1165cf9d45ed5ffa1555371be9ae770">ast_sorcery_apply_default</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>, <span class="stringliteral">&quot;config&quot;</span>, <span class="stringliteral">&quot;pjsip.conf,criteria=type=outbound-publish&quot;</span>);</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d25/sorcery_8h.html#a5ee86f00f6e2240f74772d59edf0f74a">ast_sorcery_object_register</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ac28348588c6e5a8ce5d96a538c3afe35">sip_outbound_publish_alloc</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a94d0c5b3a222207cdfc912d66c6e0115">sip_outbound_publish_apply</a>)) {</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register &#39;outbound-publish&#39; type with sorcery\n&quot;</span>);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;   }</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#aa7102b6e71e4fa6525b24a6123a2f6d4">ast_sorcery_object_field_register</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>, <span class="stringliteral">&quot;type&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a0df2cc9dc9bf09ee71252c183fe64bd7">OPT_NOOP_T</a>, 0, 0);</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#aa7102b6e71e4fa6525b24a6123a2f6d4">ast_sorcery_object_field_register</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>, <span class="stringliteral">&quot;server_uri&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a>, <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#af04e2af06333eeaa204e80f690383b30">server_uri</a>));</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#aa7102b6e71e4fa6525b24a6123a2f6d4">ast_sorcery_object_field_register</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>, <span class="stringliteral">&quot;from_uri&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a>, from_uri));</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#aa7102b6e71e4fa6525b24a6123a2f6d4">ast_sorcery_object_field_register</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>, <span class="stringliteral">&quot;event&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a>, <a class="code" href="../../df/d7d/structevent.html">event</a>));</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#aa7102b6e71e4fa6525b24a6123a2f6d4">ast_sorcery_object_field_register</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>, <span class="stringliteral">&quot;to_uri&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a>, to_uri));</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#aa7102b6e71e4fa6525b24a6123a2f6d4">ast_sorcery_object_field_register</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>, <span class="stringliteral">&quot;outbound_proxy&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a>, outbound_proxy));</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#aa7102b6e71e4fa6525b24a6123a2f6d4">ast_sorcery_object_field_register</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>, <span class="stringliteral">&quot;expiration&quot;</span>, <span class="stringliteral">&quot;3600&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a>, expiration));</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#aa7102b6e71e4fa6525b24a6123a2f6d4">ast_sorcery_object_field_register</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>, <span class="stringliteral">&quot;max_auth_attempts&quot;</span>, <span class="stringliteral">&quot;5&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a>, max_auth_attempts));</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#aa7102b6e71e4fa6525b24a6123a2f6d4">ast_sorcery_object_field_register</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>, <span class="stringliteral">&quot;transport&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a>, transport));</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#a720c9774873ec35bae0a0160954767e7">ast_sorcery_object_field_register_custom</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>, <span class="stringliteral">&quot;outbound_auth&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a52f23503e09ad7f6ab7cce9163b21872">outbound_auth_handler</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, 0);</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#aa7102b6e71e4fa6525b24a6123a2f6d4">ast_sorcery_object_field_register</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>, <span class="stringliteral">&quot;multi_user&quot;</span>, <span class="stringliteral">&quot;no&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a>, 1, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a>, multi_user));</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#ad98ae6e153f53b0c3c40119acc5e5266">ast_sorcery_reload_object</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>);</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>);</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2a2485b09b24a61b64b6d5295946f031">sip_outbound_publish_synchronize</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>);</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;   pjsip_publishc_init_module(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>());</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ad09fa931f468002152a3cc2d5ce25eae"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a></div><div class="ttdeci">static int unload_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01622">res_pjsip_outbound_publish.c:1622</a></div></div>
<div class="ttc" id="threadpool_8h_html_a26d6e398621cb8b8d2e1066b0393944a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a26d6e398621cb8b8d2e1066b0393944a">ast_serializer_shutdown_group_alloc</a></div><div class="ttdeci">struct ast_serializer_shutdown_group * ast_serializer_shutdown_group_alloc(void)</div><div class="ttdoc">Create a serializer group shutdown control object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l01229">threadpool.c:1229</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a0df2cc9dc9bf09ee71252c183fe64bd7"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a0df2cc9dc9bf09ee71252c183fe64bd7">OPT_NOOP_T</a></div><div class="ttdoc">Type for a default handler that should do nothing. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00399">config_options.h:399</a></div></div>
<div class="ttc" id="structpublisher__handlers_html"><div class="ttname"><a href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00343">res_pjsip_outbound_publish.c:343</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="sorcery_8h_html_a9db9fd1cf5ec967af2ad3a63c27e0233"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a9db9fd1cf5ec967af2ad3a63c27e0233">ast_sorcery_apply_config</a></div><div class="ttdeci">#define ast_sorcery_apply_config(sorcery, name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d25/sorcery_8h_source.html#l00456">sorcery.h:456</a></div></div>
<div class="ttc" id="res__pjproject_8h_html_a92bc257bd72957f8aac77a9fcf64228e"><div class="ttname"><a href="../../df/dd5/res__pjproject_8h.html#a92bc257bd72957f8aac77a9fcf64228e">ast_pjproject_get_buildopt</a></div><div class="ttdeci">int ast_pjproject_get_buildopt(char *option, char *format_string,...)</div><div class="ttdoc">Retrieve a pjproject build option. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/deb/res__pjproject_8c_source.html#l00246">res_pjproject.c:246</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="sorcery_8h_html_a720c9774873ec35bae0a0160954767e7"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a720c9774873ec35bae0a0160954767e7">ast_sorcery_object_field_register_custom</a></div><div class="ttdeci">#define ast_sorcery_object_field_register_custom(sorcery, type, name, default_val, config_handler, sorcery_handler, multiple_handler, flags,...)</div><div class="ttdoc">Register a field within an object with custom handlers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d25/sorcery_8h_source.html#l01005">sorcery.h:1005</a></div></div>
<div class="ttc" id="config__options_8h_html_a5793d5d6ccf2df0b2423eb3274af7802"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a></div><div class="ttdeci">#define FLDSET(type,...)</div><div class="ttdoc">Convert a struct and list of fields to an argument list of field offsets. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00816">config_options.h:816</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a></div><div class="ttdoc">Type for default option handler for unsigned integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00459">config_options.h:459</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ac28348588c6e5a8ce5d96a538c3afe35"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ac28348588c6e5a8ce5d96a538c3afe35">sip_outbound_publish_alloc</a></div><div class="ttdeci">static void * sip_outbound_publish_alloc(const char *name)</div><div class="ttdoc">Allocator function for publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00667">res_pjsip_outbound_publish.c:667</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a5712e22b675f8412b1a2e49acee9d5ff"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a5712e22b675f8412b1a2e49acee9d5ff">pjsip_max_url_size</a></div><div class="ttdeci">static int pjsip_max_url_size</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00124">res_pjsip_outbound_publish.c:124</a></div></div>
<div class="ttc" id="sorcery_8h_html_a5ee86f00f6e2240f74772d59edf0f74a"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a5ee86f00f6e2240f74772d59edf0f74a">ast_sorcery_object_register</a></div><div class="ttdeci">#define ast_sorcery_object_register(sorcery, type, alloc, transform, apply)</div><div class="ttdoc">Register an object type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d25/sorcery_8h_source.html#l00838">sorcery.h:838</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a2c3d0057b62bfa5b08fe977478749c24"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2c3d0057b62bfa5b08fe977478749c24">shutdown_group</a></div><div class="ttdeci">static struct ast_serializer_shutdown_group * shutdown_group</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00265">res_pjsip_outbound_publish.c:265</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a94d0c5b3a222207cdfc912d66c6e0115"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a94d0c5b3a222207cdfc912d66c6e0115">sip_outbound_publish_apply</a></div><div class="ttdeci">static int sip_outbound_publish_apply(const struct ast_sorcery *sorcery, void *obj)</div><div class="ttdoc">Apply function which finds or allocates a state structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01545">res_pjsip_outbound_publish.c:1545</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a52f23503e09ad7f6ab7cce9163b21872"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a52f23503e09ad7f6ab7cce9163b21872">outbound_auth_handler</a></div><div class="ttdeci">static int outbound_auth_handler(const struct aco_option *opt, struct ast_variable *var, void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01614">res_pjsip_outbound_publish.c:1614</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00294">config_options.h:294</a></div></div>
<div class="ttc" id="sorcery_8h_html_ad1165cf9d45ed5ffa1555371be9ae770"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#ad1165cf9d45ed5ffa1555371be9ae770">ast_sorcery_apply_default</a></div><div class="ttdeci">#define ast_sorcery_apply_default(sorcery, type, name, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d25/sorcery_8h_source.html#l00477">sorcery.h:477</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_af04e2af06333eeaa204e80f690383b30"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#af04e2af06333eeaa204e80f690383b30">server_uri</a></div><div class="ttdeci">static char server_uri[512]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00064">test_http_media_cache.c:64</a></div></div>
<div class="ttc" id="config__options_8h_html_a3e5be807d4a10b6da6382a40a0004ace"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a></div><div class="ttdeci">#define STRFLDSET(type,...)</div><div class="ttdoc">Convert a struct and a list of stringfield fields to an argument list of field offsets. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00827">config_options.h:827</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="sorcery_8h_html_aa7102b6e71e4fa6525b24a6123a2f6d4"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#aa7102b6e71e4fa6525b24a6123a2f6d4">ast_sorcery_object_field_register</a></div><div class="ttdeci">#define ast_sorcery_object_field_register(sorcery, type, name, default_val, opt_type, flags,...)</div><div class="ttdoc">Register a field within an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d25/sorcery_8h_source.html#l00955">sorcery.h:955</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a785afb501e315c8a97ad476fb6a8be1d"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a></div><div class="ttdeci">pjsip_endpoint * ast_sip_get_pjsip_endpoint(void)</div><div class="ttdoc">Get a pointer to the PJSIP endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03718">res_pjsip.c:3718</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a2a2485b09b24a61b64b6d5295946f031"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2a2485b09b24a61b64b6d5295946f031">sip_outbound_publish_synchronize</a></div><div class="ttdeci">static void sip_outbound_publish_synchronize(struct ast_sip_event_publisher_handler *removed)</div><div class="ttdoc">Helper function which starts or stops publish clients when applicable. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">res_pjsip_outbound_publish.c:470</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a5572d52daf1a841b0f9308df901448c8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a></div><div class="ttdeci">struct ast_sorcery * ast_sip_get_sorcery(void)</div><div class="ttdoc">Get a pointer to the SIP sorcery structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">pjsip_configuration.c:2404</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a></div><div class="ttdoc">Type for default option handler for stringfields. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00435">config_options.h:435</a></div></div>
<div class="ttc" id="sorcery_8h_html_ad98ae6e153f53b0c3c40119acc5e5266"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#ad98ae6e153f53b0c3c40119acc5e5266">ast_sorcery_reload_object</a></div><div class="ttdeci">void ast_sorcery_reload_object(const struct ast_sorcery *sorcery, const char *type)</div><div class="ttdoc">Inform any wizards of a specific object type to reload persistent objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l01442">sorcery.c:1442</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a52f23503e09ad7f6ab7cce9163b21872"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52f23503e09ad7f6ab7cce9163b21872">&#9670;&nbsp;</a></span>outbound_auth_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int outbound_auth_handler </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../db/de0/structaco__option.html">aco_option</a> *&#160;</td>
          <td class="paramname"><em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01614">1614</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00267">ast_sip_auth_vector_init()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00193">ast_sip_outbound_publish::outbound_auths</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01647">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;{</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a> = obj;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ae2a70501bd77f6a45cfac6cd343dd7fa">ast_sip_auth_vector_init</a>(&amp;publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a045e92a13d3f4b1e0d061b4b6e64f1e1">outbound_auths</a>, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;}</div><div class="ttc" id="res__pjsip_8h_html_ae2a70501bd77f6a45cfac6cd343dd7fa"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ae2a70501bd77f6a45cfac6cd343dd7fa">ast_sip_auth_vector_init</a></div><div class="ttdeci">int ast_sip_auth_vector_init(struct ast_sip_auth_vector *vector, const char *auth_names)</div><div class="ttdoc">Initialize an auth vector with the configured values. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l00267">pjsip_configuration.c:267</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_a045e92a13d3f4b1e0d061b4b6e64f1e1"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#a045e92a13d3f4b1e0d061b4b6e64f1e1">ast_sip_outbound_publish::outbound_auths</a></div><div class="ttdeci">struct ast_sip_auth_vector outbound_auths</div><div class="ttdoc">Configured authentication credentials. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00193">res_pjsip_outbound_publish.c:193</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d9e0deb1c63f0c64de1f559ff1a0790"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d9e0deb1c63f0c64de1f559ff1a0790">&#9670;&nbsp;</a></span>outbound_publish_state_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int outbound_publish_state_cmp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>comparator function for client objects </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00295">295</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00244">ast_sip_outbound_publish_state::id</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01545">sip_outbound_publish_apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *object_left = obj;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *object_right = arg;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *right_key = arg;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      right_key = object_right-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#abe9e57df6ac773738500092fe3cf7fca">id</a>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      cmp = strcmp(object_left-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#abe9e57df6ac773738500092fe3cf7fca">id</a>, right_key);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>:</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="comment">/* Not supported by container. */</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      cmp = 0;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keywordflow">if</span> (cmp) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a></div><div class="ttdoc">Outbound publish state information (persists for lifetime of a publish) </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00240">res_pjsip_outbound_publish.c:240</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html_abe9e57df6ac773738500092fe3cf7fca"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html#abe9e57df6ac773738500092fe3cf7fca">ast_sip_outbound_publish_state::id</a></div><div class="ttdeci">char id[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00244">res_pjsip_outbound_publish.c:244</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a33de2738bbd39f7730775f2bf287efcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33de2738bbd39f7730775f2bf287efcc">&#9670;&nbsp;</a></span>outbound_publish_state_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int outbound_publish_state_hash </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>hashing function for state objects </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00274">274</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01206">ast_str_hash()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01545">sip_outbound_publish_apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;{</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *object;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *key;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      key = obj;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keywordtype">object</span> = obj;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      key = <span class="keywordtype">object</span>-&gt;id;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a33ab7fa091d5513d8507d3bd33ef5b55">ast_str_hash</a>(key);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a></div><div class="ttdoc">Outbound publish state information (persists for lifetime of a publish) </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00240">res_pjsip_outbound_publish.c:240</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
<div class="ttc" id="strings_8h_html_a33ab7fa091d5513d8507d3bd33ef5b55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a33ab7fa091d5513d8507d3bd33ef5b55">ast_str_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01206">strings.h:1206</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb36f6fc22f2185a5606263a3745a2c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb36f6fc22f2185a5606263a3745a2c8">&#9670;&nbsp;</a></span>publisher_client_send()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int publisher_client_send </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00796">796</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00129">sip_outbound_publish_message::body</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00133">sip_outbound_publish_message::body_contents</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02033">ast_sip_body::body_text</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00206">sip_outbound_publisher::client</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html#ae04270ced09248884758bdfcf9f29a50">sip_outbound_publisher::queue</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00222">sip_outbound_publisher::serializer</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00749">sip_publisher_service_queue()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02031">ast_sip_body::subtype</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02029">ast_sip_body::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00842">ast_sip_publish_client_send()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01109">ast_sip_publish_client_user_send()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00373">schedule_publish_refresh()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00401">sip_outbound_publish_timer_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;{</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher = obj;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *body = arg;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d04/structsip__outbound__publish__message.html">sip_outbound_publish_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <span class="keywordtype">size_t</span> type_len = 0, subtype_len = 0, body_text_len = 0;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   <span class="keywordtype">int</span> *res = data;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, publisher);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   *res = -1;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <span class="keywordflow">if</span> (!publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>) {</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   }</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   <span class="comment">/* If a body is present we need more space for the contents of it */</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   <span class="keywordflow">if</span> (body) {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      type_len = strlen(body-&gt;<a class="code" href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>) + 1;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      subtype_len = strlen(body-&gt;<a class="code" href="../../d5/d80/structast__sip__body.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>) + 1;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      body_text_len = strlen(body-&gt;<a class="code" href="../../d5/d80/structast__sip__body.html#a88687b0dd98d5307f1219432b73b8412">body_text</a>) + 1;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   message = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*message) + type_len + subtype_len + body_text_len);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keywordflow">if</span> (!message) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   <span class="keywordflow">if</span> (body) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <span class="keywordtype">char</span> *dst = message-&gt;<a class="code" href="../../d5/d04/structsip__outbound__publish__message.html#a3ab49e057424160e863452702ace2b04">body_contents</a>;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      message-&gt;<a class="code" href="../../d5/d04/structsip__outbound__publish__message.html#a09c482d31d9456a9d78cf63b5334c4fa">body</a>.<a class="code" href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a> = strcpy(dst, body-&gt;<a class="code" href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      dst += type_len;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      message-&gt;<a class="code" href="../../d5/d04/structsip__outbound__publish__message.html#a09c482d31d9456a9d78cf63b5334c4fa">body</a>.<a class="code" href="../../d5/d80/structast__sip__body.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a> = strcpy(dst, body-&gt;<a class="code" href="../../d5/d80/structast__sip__body.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      dst += subtype_len;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      message-&gt;<a class="code" href="../../d5/d04/structsip__outbound__publish__message.html#a09c482d31d9456a9d78cf63b5334c4fa">body</a>.<a class="code" href="../../d5/d80/structast__sip__body.html#a88687b0dd98d5307f1219432b73b8412">body_text</a> = strcpy(dst, body-&gt;<a class="code" href="../../d5/d80/structast__sip__body.html#a88687b0dd98d5307f1219432b73b8412">body_text</a>);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   }</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ae04270ced09248884758bdfcf9f29a50">queue</a>, message, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   *res = <a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a8faafb2d56128108cc07db574572c16e">sip_publisher_service_queue</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(publisher));</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   <span class="keywordflow">if</span> (*res) {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   }</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <span class="keywordflow">return</span> *res;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;}</div><div class="ttc" id="structast__sip__body_html_a88687b0dd98d5307f1219432b73b8412"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#a88687b0dd98d5307f1219432b73b8412">ast_sip_body::body_text</a></div><div class="ttdeci">const char * body_text</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02033">res_pjsip.h:2033</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ae04270ced09248884758bdfcf9f29a50"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ae04270ced09248884758bdfcf9f29a50">sip_outbound_publisher::queue</a></div><div class="ttdeci">struct sip_outbound_publisher::@485 queue</div><div class="ttdoc">Queue of outgoing publish messages to send. </div></div>
<div class="ttc" id="structsip__outbound__publish__message_html_a09c482d31d9456a9d78cf63b5334c4fa"><div class="ttname"><a href="../../d5/d04/structsip__outbound__publish__message.html#a09c482d31d9456a9d78cf63b5334c4fa">sip_outbound_publish_message::body</a></div><div class="ttdeci">struct ast_sip_body body</div><div class="ttdoc">Optional body. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00129">res_pjsip_outbound_publish.c:129</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a8faafb2d56128108cc07db574572c16e"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a8faafb2d56128108cc07db574572c16e">sip_publisher_service_queue</a></div><div class="ttdeci">static int sip_publisher_service_queue(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00749">res_pjsip_outbound_publish.c:749</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structsip__outbound__publish__message_html_a3ab49e057424160e863452702ace2b04"><div class="ttname"><a href="../../d5/d04/structsip__outbound__publish__message.html#a3ab49e057424160e863452702ace2b04">sip_outbound_publish_message::body_contents</a></div><div class="ttdeci">char body_contents[0]</div><div class="ttdoc">Extra space for body contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00133">res_pjsip_outbound_publish.c:133</a></div></div>
<div class="ttc" id="structast__sip__body_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_sip_body::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02029">res_pjsip.h:2029</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ac23e23ba60f358de78a893d537c0afa4">sip_outbound_publisher::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdoc">Serializer for stuff and things. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00222">res_pjsip_outbound_publish.c:222</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a89aa32c5b486e40d8ca97bed4fe724f8"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">sip_outbound_publisher::client</a></div><div class="ttdeci">pjsip_publishc * client</div><div class="ttdoc">Underlying publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00206">res_pjsip_outbound_publish.c:206</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="structast__sip__body_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#abb4ae60bbcbce3616fdd7d4238869c91">ast_sip_body::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02031">res_pjsip.h:2031</a></div></div>
<div class="ttc" id="structsip__outbound__publish__message_html"><div class="ttname"><a href="../../d5/d04/structsip__outbound__publish__message.html">sip_outbound_publish_message</a></div><div class="ttdoc">Queued outbound publish message. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00127">res_pjsip_outbound_publish.c:127</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structast__sip__body_html"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html">ast_sip_body</a></div><div class="ttdoc">SIP body description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02027">res_pjsip.h:2027</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c6ac25ea7536c0bc9ed18cbcf917527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c6ac25ea7536c0bc9ed18cbcf917527">&#9670;&nbsp;</a></span>reload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01690">1690</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00316">AST_MODFLAG_GLOBAL_SYMBOLS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00326">AST_MODPRI_CHANNEL_DEPEND</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">ast_sip_get_sorcery()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l01442">ast_sorcery_reload_object()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01647">load_module()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00741">reload()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">sip_outbound_publish_synchronize()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01622">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;{</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#ad98ae6e153f53b0c3c40119acc5e5266">ast_sorcery_reload_object</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>);</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2a2485b09b24a61b64b6d5295946f031">sip_outbound_publish_synchronize</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>);</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structpublisher__handlers_html"><div class="ttname"><a href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00343">res_pjsip_outbound_publish.c:343</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a2a2485b09b24a61b64b6d5295946f031"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2a2485b09b24a61b64b6d5295946f031">sip_outbound_publish_synchronize</a></div><div class="ttdeci">static void sip_outbound_publish_synchronize(struct ast_sip_event_publisher_handler *removed)</div><div class="ttdoc">Helper function which starts or stops publish clients when applicable. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">res_pjsip_outbound_publish.c:470</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a5572d52daf1a841b0f9308df901448c8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a></div><div class="ttdeci">struct ast_sorcery * ast_sip_get_sorcery(void)</div><div class="ttdoc">Get a pointer to the SIP sorcery structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">pjsip_configuration.c:2404</a></div></div>
<div class="ttc" id="sorcery_8h_html_ad98ae6e153f53b0c3c40119acc5e5266"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#ad98ae6e153f53b0c3c40119acc5e5266">ast_sorcery_reload_object</a></div><div class="ttdeci">void ast_sorcery_reload_object(const struct ast_sorcery *sorcery, const char *type)</div><div class="ttdoc">Inform any wizards of a specific object type to reload persistent objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l01442">sorcery.c:1442</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a81e2ab9a5fda29080450a9c0a6dc463d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81e2ab9a5fda29080450a9c0a6dc463d">&#9670;&nbsp;</a></span>schedule_publish_refresh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void schedule_publish_refresh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *&#160;</td>
          <td class="paramname"><em>publisher</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>expiration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function which sets up the timer to send publication. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00373">373</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">ast_sip_get_pjsip_endpoint()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00363">cancel_publish_refresh()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00189">ast_sip_outbound_publish::expiration</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">sip_outbound_publisher::owner</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00796">publisher_client_send()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00212">sip_outbound_publisher::timer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01260">sip_outbound_publish_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">owner</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   pj_time_val delay = { .sec = 0, };</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ab88f222edffd9d2f7781a4657f93186a">cancel_publish_refresh</a>(publisher);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a1c6e48938c599616c6e893017f183e0a">expiration</a> &gt; 0) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      delay.sec = <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a1c6e48938c599616c6e893017f183e0a">expiration</a> - PJSIP_PUBLISHC_DELAY_BEFORE_REFRESH;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="keywordflow">if</span> (publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a1c6e48938c599616c6e893017f183e0a">expiration</a> &amp;&amp; ((delay.sec &gt; publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a1c6e48938c599616c6e893017f183e0a">expiration</a>) || !delay.sec)) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      delay.sec = publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a1c6e48938c599616c6e893017f183e0a">expiration</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   <span class="keywordflow">if</span> (delay.sec &lt; PJSIP_PUBLISHC_DELAY_BEFORE_REFRESH) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      delay.sec = PJSIP_PUBLISHC_DELAY_BEFORE_REFRESH;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, +1);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   <span class="keywordflow">if</span> (pjsip_endpt_schedule_timer(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), &amp;publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#acef2f236d7d6e9e799545af3a9a27a19">timer</a>, &amp;delay) != PJ_SUCCESS) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to pass timed publish refresh to scheduler\n&quot;</span>);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publish, -1);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_acef2f236d7d6e9e799545af3a9a27a19"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#acef2f236d7d6e9e799545af3a9a27a19">sip_outbound_publisher::timer</a></div><div class="ttdeci">pj_timer_entry timer</div><div class="ttdoc">Timer entry for refreshing publish. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00212">res_pjsip_outbound_publish.c:212</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ab88f222edffd9d2f7781a4657f93186a"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ab88f222edffd9d2f7781a4657f93186a">cancel_publish_refresh</a></div><div class="ttdeci">static void cancel_publish_refresh(struct sip_outbound_publisher *publisher)</div><div class="ttdoc">Helper function which cancels the refresh timer on a publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00363">res_pjsip_outbound_publish.c:363</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a8d46da4b117d10a2f6987137b2bd93f8"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">sip_outbound_publisher::owner</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * owner</div><div class="ttdoc">The client object that &amp;#39;owns&amp;#39; this client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">res_pjsip_outbound_publish.c:204</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a785afb501e315c8a97ad476fb6a8be1d"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a></div><div class="ttdeci">pjsip_endpoint * ast_sip_get_pjsip_endpoint(void)</div><div class="ttdoc">Get a pointer to the PJSIP endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03718">res_pjsip.c:3718</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_a1c6e48938c599616c6e893017f183e0a"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#a1c6e48938c599616c6e893017f183e0a">ast_sip_outbound_publish::expiration</a></div><div class="ttdeci">unsigned int expiration</div><div class="ttdoc">Requested expiration time. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00189">res_pjsip_outbound_publish.c:189</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae8b25c3719a93708567156963444c8ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8b25c3719a93708567156963444c8ae">&#9670;&nbsp;</a></span>send_unpublish_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_unpublish_task </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Task for sending an unpublish. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00440">440</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00206">sip_outbound_publisher::client</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00427">set_transport()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01152">cancel_and_unpublish()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01260">sip_outbound_publish_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;{</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher = data;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   pjsip_tx_data *tdata;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   <span class="keywordflow">if</span> (pjsip_publishc_unpublish(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>, &amp;tdata) == PJ_SUCCESS) {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb069e78d986661052bfe190ef458f11">set_transport</a>(publisher, tdata);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      pjsip_publishc_send(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>, tdata);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a89aa32c5b486e40d8ca97bed4fe724f8"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">sip_outbound_publisher::client</a></div><div class="ttdeci">pjsip_publishc * client</div><div class="ttdoc">Underlying publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00206">res_pjsip_outbound_publish.c:206</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_aeb069e78d986661052bfe190ef458f11"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb069e78d986661052bfe190ef458f11">set_transport</a></div><div class="ttdeci">static void set_transport(struct sip_outbound_publisher *publisher, pjsip_tx_data *tdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00427">res_pjsip_outbound_publish.c:427</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb069e78d986661052bfe190ef458f11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb069e78d986661052bfe190ef458f11">&#9670;&nbsp;</a></span>set_transport()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_transport </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *&#160;</td>
          <td class="paramname"><em>publisher</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00427">427</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03957">ast_sip_set_tpselector_from_transport_name()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03987">ast_sip_tpselector_unref()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">sip_outbound_publisher::owner</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::transport</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00440">send_unpublish_task()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01260">sip_outbound_publish_callback()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00749">sip_publisher_service_queue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">owner</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a44cdbda076f37ba09880ba74d942b606">transport</a>)) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      pjsip_tpselector selector = { .type = PJSIP_TPSELECTOR_NONE, };</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ac94b7c59f69d31b962e42098955f8fa4">ast_sip_set_tpselector_from_transport_name</a>(</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;         publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">owner</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a44cdbda076f37ba09880ba74d942b606">transport</a>, &amp;selector);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      pjsip_tx_data_set_transport(tdata, &amp;selector);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a>(&amp;selector);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div><div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a8d46da4b117d10a2f6987137b2bd93f8"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">sip_outbound_publisher::owner</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * owner</div><div class="ttdoc">The client object that &amp;#39;owns&amp;#39; this client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">res_pjsip_outbound_publish.c:204</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_a44cdbda076f37ba09880ba74d942b606"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#a44cdbda076f37ba09880ba74d942b606">ast_sip_outbound_publish::transport</a></div><div class="ttdeci">const ast_string_field transport</div><div class="ttdoc">Explicit transport to use for publish. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a9e1ef995698ba16cad6608225b8de946"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a></div><div class="ttdeci">void ast_sip_tpselector_unref(pjsip_tpselector *selector)</div><div class="ttdoc">Unreference a pjsip_tpselector. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03987">res_pjsip.c:3987</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ac94b7c59f69d31b962e42098955f8fa4"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ac94b7c59f69d31b962e42098955f8fa4">ast_sip_set_tpselector_from_transport_name</a></div><div class="ttdeci">int ast_sip_set_tpselector_from_transport_name(const char *transport_name, pjsip_tpselector *selector)</div><div class="ttdoc">Sets pjsip_tpselector from ast_sip_transport. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03957">res_pjsip.c:3957</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac28348588c6e5a8ce5d96a538c3afe35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac28348588c6e5a8ce5d96a538c3afe35">&#9670;&nbsp;</a></span>sip_outbound_publish_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* sip_outbound_publish_alloc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocator function for publish information. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00667">667</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l01728">ast_sorcery_generic_alloc()</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00657">sip_outbound_publish_destroy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01647">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;{</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a> = <a class="code" href="../../d8/d25/sorcery_8h.html#a4c03ccef909474831717c93679065508">ast_sorcery_generic_alloc</a>(<span class="keyword">sizeof</span>(*publish),</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a38547a0c927cbefc1fc7261c2a00ae1b">sip_outbound_publish_destroy</a>);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   <span class="keywordflow">if</span> (!publish || <a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(publish, 256)) {</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(publish);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a38547a0c927cbefc1fc7261c2a00ae1b"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a38547a0c927cbefc1fc7261c2a00ae1b">sip_outbound_publish_destroy</a></div><div class="ttdeci">static void sip_outbound_publish_destroy(void *obj)</div><div class="ttdoc">Destructor function for publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00657">res_pjsip_outbound_publish.c:657</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="sorcery_8h_html_a4c03ccef909474831717c93679065508"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a4c03ccef909474831717c93679065508">ast_sorcery_generic_alloc</a></div><div class="ttdeci">void * ast_sorcery_generic_alloc(size_t size, ao2_destructor_fn destructor)</div><div class="ttdoc">Allocate a generic sorcery capable object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l01728">sorcery.c:1728</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a94d0c5b3a222207cdfc912d66c6e0115"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94d0c5b3a222207cdfc912d66c6e0115">&#9670;&nbsp;</a></span>sip_outbound_publish_apply()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sip_outbound_publish_apply </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d88/structast__sorcery.html">ast_sorcery</a> *&#160;</td>
          <td class="paramname"><em>sorcery</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Apply function which finds or allocates a state structure. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01545">1545</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae46c40b613ed191cac77b861ae4e3547">ADD_TO_NEW_STATES</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01310">ao2_container_alloc_hash</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">ast_sip_outbound_publish_state::client</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01492">current_state_reusable()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00268">DEFAULT_STATE_BUCKETS</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00195">ast_sip_outbound_publish::multi_user</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00295">outbound_publish_state_cmp()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00274">outbound_publish_state_hash()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01423">sip_outbound_publish_state_alloc()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00514">sip_publish_state_get()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01461">validate_publish_config()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01647">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;{</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="preprocessor">#define ADD_TO_NEW_STATES(__obj) \</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="preprocessor">   do { if (__obj) { \</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<span class="preprocessor">        ao2_link(new_states, __obj); \</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="preprocessor">        ao2_ref(__obj, -1); } } while (0)</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *applied = obj;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *current_state, *new_state;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="comment">    * New states are being loaded or reloaded. We&#39;ll need to add the new</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="comment">    * object if created/updated, or keep the old object if an error occurs.</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abcc2de32fdf1487d09e70c9af7a942df">new_states</a>) {</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abcc2de32fdf1487d09e70c9af7a942df">new_states</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, 0, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a46aa50c37f5c251756d5564d8c96aa38">DEFAULT_STATE_BUCKETS</a>,</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;         <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a33de2738bbd39f7730775f2bf287efcc">outbound_publish_state_hash</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a5d9e0deb1c63f0c64de1f559ff1a0790">outbound_publish_state_cmp</a>);</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abcc2de32fdf1487d09e70c9af7a942df">new_states</a>) {</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to allocate new states container\n&quot;</span>);</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      }</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   }</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;   <span class="comment">/* If there is current state we&#39;ll want to maintain it if any errors occur */</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;   current_state = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a12f73c896443f8205a405b0a795d709f">sip_publish_state_get</a>(<a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(applied));</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;   <span class="keywordflow">if</span> ((res = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a8d9a61cda94a855bb1ae6b0e4f7bbaf5">validate_publish_config</a>(applied))) {</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae46c40b613ed191cac77b861ae4e3547">ADD_TO_NEW_STATES</a>(current_state);</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;   }</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;   <span class="keywordflow">if</span> (current_state &amp;&amp; (res = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a1f5741b9ac45d75b0697282ba7af8cfd">current_state_reusable</a>(applied, current_state))) {</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="comment">       * The current state object was able to be reused, or an error</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="comment">       * occurred. Either way we keep the current state and be done.</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae46c40b613ed191cac77b861ae4e3547">ADD_TO_NEW_STATES</a>(current_state);</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <span class="keywordflow">return</span> res == 1 ? 0 : -1;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;   }</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment">    * No current state was found or it was unable to be reused. Either way</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="comment">    * we&#39;ll need to create a new state object.</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;   new_state = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a50dee8c49eaca24fc2c6515ccfab67ee">sip_outbound_publish_state_alloc</a>(applied);</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   <span class="keywordflow">if</span> (!new_state) {</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create state for outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;         <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(applied));</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae46c40b613ed191cac77b861ae4e3547">ADD_TO_NEW_STATES</a>(current_state);</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;   };</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;   <span class="keywordflow">if</span> (!applied-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa5133588e2344f0b6eda2f00df1cb66c">multi_user</a> &amp;&amp;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;       !(publisher = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abe0679d7ecc20ceab17d82221368c5d8">sip_outbound_publish_client_add_publisher</a>(new_state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae46c40b613ed191cac77b861ae4e3547">ADD_TO_NEW_STATES</a>(current_state);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(new_state, -1);</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;   }</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(publisher);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae46c40b613ed191cac77b861ae4e3547">ADD_TO_NEW_STATES</a>(new_state);</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(current_state);</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a46aa50c37f5c251756d5564d8c96aa38"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a46aa50c37f5c251756d5564d8c96aa38">DEFAULT_STATE_BUCKETS</a></div><div class="ttdeci">#define DEFAULT_STATE_BUCKETS</div><div class="ttdoc">Default number of client state container buckets. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00268">res_pjsip_outbound_publish.c:268</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html_a5592324b65dd693db5308f4d96e85edf"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">ast_sip_outbound_publish_state::client</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * client</div><div class="ttdoc">Outbound publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">res_pjsip_outbound_publish.c:242</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a></div><div class="ttdoc">Outbound publish state information (persists for lifetime of a publish) </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00240">res_pjsip_outbound_publish.c:240</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a50dee8c49eaca24fc2c6515ccfab67ee"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a50dee8c49eaca24fc2c6515ccfab67ee">sip_outbound_publish_state_alloc</a></div><div class="ttdeci">static struct ast_sip_outbound_publish_state * sip_outbound_publish_state_alloc(struct ast_sip_outbound_publish *publish)</div><div class="ttdoc">Allocator function for publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01423">res_pjsip_outbound_publish.c:1423</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aa5133588e2344f0b6eda2f00df1cb66c"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aa5133588e2344f0b6eda2f00df1cb66c">ast_sip_outbound_publish::multi_user</a></div><div class="ttdeci">unsigned int multi_user</div><div class="ttdoc">The publishing client is used for multiple users when true. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00195">res_pjsip_outbound_publish.c:195</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a1f5741b9ac45d75b0697282ba7af8cfd"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a1f5741b9ac45d75b0697282ba7af8cfd">current_state_reusable</a></div><div class="ttdeci">static int current_state_reusable(struct ast_sip_outbound_publish *publish, struct ast_sip_outbound_publish_state *current_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01492">res_pjsip_outbound_publish.c:1492</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ae46c40b613ed191cac77b861ae4e3547"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae46c40b613ed191cac77b861ae4e3547">ADD_TO_NEW_STATES</a></div><div class="ttdeci">#define ADD_TO_NEW_STATES(__obj)</div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_abe0679d7ecc20ceab17d82221368c5d8"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abe0679d7ecc20ceab17d82221368c5d8">sip_outbound_publish_client_add_publisher</a></div><div class="ttdeci">static struct sip_outbound_publisher * sip_outbound_publish_client_add_publisher(struct ast_sip_outbound_publish_client *client, const char *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01085">res_pjsip_outbound_publish.c:1085</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a33de2738bbd39f7730775f2bf287efcc"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a33de2738bbd39f7730775f2bf287efcc">outbound_publish_state_hash</a></div><div class="ttdeci">static int outbound_publish_state_hash(const void *obj, const int flags)</div><div class="ttdoc">hashing function for state objects </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00274">res_pjsip_outbound_publish.c:274</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a12f73c896443f8205a405b0a795d709f"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a12f73c896443f8205a405b0a795d709f">sip_publish_state_get</a></div><div class="ttdeci">static struct ast_sip_outbound_publish_state * sip_publish_state_get(const char *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00514">res_pjsip_outbound_publish.c:514</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_abcc2de32fdf1487d09e70c9af7a942df"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abcc2de32fdf1487d09e70c9af7a942df">new_states</a></div><div class="ttdeci">static struct ao2_container * new_states</div><div class="ttdoc">Used on [re]loads to hold new state data. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00271">res_pjsip_outbound_publish.c:271</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a8d9a61cda94a855bb1ae6b0e4f7bbaf5"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a8d9a61cda94a855bb1ae6b0e4f7bbaf5">validate_publish_config</a></div><div class="ttdeci">static int validate_publish_config(struct ast_sip_outbound_publish *publish)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01461">res_pjsip_outbound_publish.c:1461</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a5d9e0deb1c63f0c64de1f559ff1a0790"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a5d9e0deb1c63f0c64de1f559ff1a0790">outbound_publish_state_cmp</a></div><div class="ttdeci">static int outbound_publish_state_cmp(void *obj, void *arg, int flags)</div><div class="ttdoc">comparator function for client objects </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00295">res_pjsip_outbound_publish.c:295</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d51d184aab52ec62248ed67c3971f54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d51d184aab52ec62248ed67c3971f54">&#9670;&nbsp;</a></span>sip_outbound_publish_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sip_outbound_publish_callback </td>
          <td>(</td>
          <td class="paramtype">struct pjsip_publishc_cbparam *&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback function for publish client responses. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01260">1260</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03412">ast_sip_create_request_with_auth()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ad0704fd0d650be3f899c8e6bf4856d09">DESTROY_CLIENT</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00373">schedule_publish_refresh()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00440">send_unpublish_task()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00427">set_transport()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00935">sip_outbound_publisher_init()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00749">sip_publisher_service_queue()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00935">sip_outbound_publisher_init()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00889">sip_outbound_publisher_set_uris()</a>.</p>
<div class="fragment"><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;{</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="preprocessor">#define DESTROY_CLIENT() do {          \</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="preprocessor">   pjsip_publishc_destroy(publisher-&gt;client); \</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="preprocessor">   publisher-&gt;client = NULL; \</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="preprocessor">   ao2_ref(publisher, -1); } while (0)</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *, publisher, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(param-&gt;token), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *, <a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(publisher-&gt;owner-&gt;publish), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, publisher);</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   pjsip_tx_data *tdata;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   <span class="keywordflow">if</span> (publisher-&gt;destroy) {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <span class="keywordflow">if</span> (publisher-&gt;sending) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;         publisher-&gt;sending = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(publisher-&gt;serializer, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae8b25c3719a93708567156963444c8ae">send_unpublish_task</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(publisher))) {</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;         }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not send unpublish message on outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>));</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      }</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      <span class="comment">/* Once the destroy is called this callback will not get called any longer, so drop the publisher ref */</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ad0704fd0d650be3f899c8e6bf4856d09">DESTROY_CLIENT</a>();</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;   }</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;   <span class="keywordflow">if</span> (param-&gt;code == 401 || param-&gt;code == 407) {</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      pjsip_transaction *tsx = pjsip_rdata_get_tsx(param-&gt;rdata);</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a4810e8d609e3e1a5dd97faaca36d55ee">ast_sip_create_request_with_auth</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>-&gt;outbound_auths,</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            param-&gt;rdata, tsx-&gt;last_tx, &amp;tdata)) {</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;         <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb069e78d986661052bfe190ef458f11">set_transport</a>(publisher, tdata);</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;         pjsip_publishc_send(publisher-&gt;client, tdata);</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      }</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      publisher-&gt;auth_attempts++;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="keywordflow">if</span> (publisher-&gt;auth_attempts == <a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>-&gt;max_auth_attempts) {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;         <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ad0704fd0d650be3f899c8e6bf4856d09">DESTROY_CLIENT</a>();</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Reached maximum number of PUBLISH authentication attempts on outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>));</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      }</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;   }</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;   publisher-&gt;auth_attempts = 0;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   <span class="keywordflow">if</span> (param-&gt;code == 412) {</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ad0704fd0d650be3f899c8e6bf4856d09">DESTROY_CLIENT</a>();</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#af1d49a6c38ba6c32a1f735c4e1ad2e6b">sip_outbound_publisher_init</a>(publisher)) {</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create a new outbound publish client for &#39;%s&#39; on 412 response\n&quot;</span>,</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>));</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      }</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <span class="comment">/* Setting this to NULL will cause a new PUBLISH to get created and sent for the same underlying body */</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      publisher-&gt;sending = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (param-&gt;code == 423) {</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      <span class="comment">/* Update the expiration with the new expiration time if available */</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      pjsip_expires_hdr *expires;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      expires = pjsip_msg_find_hdr(param-&gt;rdata-&gt;msg_info.msg, PJSIP_H_MIN_EXPIRES, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;      <span class="keywordflow">if</span> (!expires || !expires-&gt;ivalue) {</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;         <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ad0704fd0d650be3f899c8e6bf4856d09">DESTROY_CLIENT</a>();</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Received 423 response on outbound publish &#39;%s&#39; without a Min-Expires header\n&quot;</span>,</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>));</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      }</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      pjsip_publishc_update_expires(publisher-&gt;client, expires-&gt;ivalue);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      publisher-&gt;sending = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (publisher-&gt;sending) {</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      <span class="comment">/* Remove the message currently being sent so that when the queue is serviced another will get sent */</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;publisher-&gt;queue, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(publisher-&gt;sending);</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;      publisher-&gt;sending = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      <span class="keywordflow">if</span> (!param-&gt;rdata) {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;No response received for outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>));</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      }</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   }</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;publisher-&gt;queue)) {</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a81e2ab9a5fda29080450a9c0a6dc463d">schedule_publish_refresh</a>(publisher, param-&gt;expiration);</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;   }</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   <span class="keywordflow">if</span> (!publisher-&gt;client) {</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d04/structsip__outbound__publish__message.html">sip_outbound_publish_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      <span class="keywordflow">while</span> ((message = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;publisher-&gt;queue, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(message);</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      }</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(publisher-&gt;serializer, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a8faafb2d56128108cc07db574572c16e">sip_publisher_service_queue</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(publisher))) {</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      }</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;   }</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;}</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ad0704fd0d650be3f899c8e6bf4856d09"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ad0704fd0d650be3f899c8e6bf4856d09">DESTROY_CLIENT</a></div><div class="ttdeci">#define DESTROY_CLIENT()</div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a8faafb2d56128108cc07db574572c16e"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a8faafb2d56128108cc07db574572c16e">sip_publisher_service_queue</a></div><div class="ttdeci">static int sip_publisher_service_queue(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00749">res_pjsip_outbound_publish.c:749</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ae8b25c3719a93708567156963444c8ae"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae8b25c3719a93708567156963444c8ae">send_unpublish_task</a></div><div class="ttdeci">static int send_unpublish_task(void *data)</div><div class="ttdoc">Task for sending an unpublish. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00440">res_pjsip_outbound_publish.c:440</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a4810e8d609e3e1a5dd97faaca36d55ee"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a4810e8d609e3e1a5dd97faaca36d55ee">ast_sip_create_request_with_auth</a></div><div class="ttdeci">int ast_sip_create_request_with_auth(const struct ast_sip_auth_vector *auths, pjsip_rx_data *challenge, pjsip_tx_data *tdata, pjsip_tx_data **new_request)</div><div class="ttdoc">Create a response to an authentication challenge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03412">res_pjsip.c:3412</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_af1d49a6c38ba6c32a1f735c4e1ad2e6b"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#af1d49a6c38ba6c32a1f735c4e1ad2e6b">sip_outbound_publisher_init</a></div><div class="ttdeci">static int sip_outbound_publisher_init(void *data)</div><div class="ttdoc">Helper function that allocates a pjsip publish client and configures it. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00935">res_pjsip_outbound_publish.c:935</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="structsip__outbound__publish__message_html"><div class="ttname"><a href="../../d5/d04/structsip__outbound__publish__message.html">sip_outbound_publish_message</a></div><div class="ttdoc">Queued outbound publish message. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00127">res_pjsip_outbound_publish.c:127</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a81e2ab9a5fda29080450a9c0a6dc463d"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a81e2ab9a5fda29080450a9c0a6dc463d">schedule_publish_refresh</a></div><div class="ttdeci">static void schedule_publish_refresh(struct sip_outbound_publisher *publisher, int expiration)</div><div class="ttdoc">Helper function which sets up the timer to send publication. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00373">res_pjsip_outbound_publish.c:373</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_aeb069e78d986661052bfe190ef458f11"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb069e78d986661052bfe190ef458f11">set_transport</a></div><div class="ttdeci">static void set_transport(struct sip_outbound_publisher *publisher, pjsip_tx_data *tdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00427">res_pjsip_outbound_publish.c:427</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abe0679d7ecc20ceab17d82221368c5d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe0679d7ecc20ceab17d82221368c5d8">&#9670;&nbsp;</a></span>sip_outbound_publish_client_add_publisher()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> * sip_outbound_publish_client_add_publisher </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01085">1085</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01549">ao2_link</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00417">cancel_refresh_timer_task()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">ast_sip_outbound_publish_client::publishers</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00222">sip_outbound_publisher::serializer</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01033">sip_outbound_publisher_alloc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00541">ast_sip_publish_client_get_from_uri()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">sip_outbound_publish_client_get_publisher()</a>.</p>
<div class="fragment"><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;{</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher =</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a04ff39e187e8a719c5de79ac5ef2fd39">sip_outbound_publisher_alloc</a>(client, <a class="code" href="../../d8/dbc/structuser.html">user</a>);</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <span class="keywordflow">if</span> (!publisher) {</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   }</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">publishers</a>, publisher)) {</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">       * No need to bump the reference here. The task will take care of</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">       * removing the reference.</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a62ccc7ce028b4b702a89df4ed02a38e1">cancel_refresh_timer_task</a>, publisher)) {</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      }</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   <span class="keywordflow">return</span> publisher;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ac23e23ba60f358de78a893d537c0afa4">sip_outbound_publisher::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdoc">Serializer for stuff and things. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00222">res_pjsip_outbound_publish.c:222</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a04ff39e187e8a719c5de79ac5ef2fd39"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a04ff39e187e8a719c5de79ac5ef2fd39">sip_outbound_publisher_alloc</a></div><div class="ttdeci">static struct sip_outbound_publisher * sip_outbound_publisher_alloc(struct ast_sip_outbound_publish_client *client, const char *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01033">res_pjsip_outbound_publish.c:1033</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_adb838b688e98c705b8668af938b5f85a"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">ast_sip_outbound_publish_client::publishers</a></div><div class="ttdeci">struct ao2_container * publishers</div><div class="ttdoc">Container of all the client publishing objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">res_pjsip_outbound_publish.c:234</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a62ccc7ce028b4b702a89df4ed02a38e1"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a62ccc7ce028b4b702a89df4ed02a38e1">cancel_refresh_timer_task</a></div><div class="ttdeci">static int cancel_refresh_timer_task(void *data)</div><div class="ttdoc">Task for cancelling a refresh timer. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00417">res_pjsip_outbound_publish.c:417</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf706609c5e5e6be58d94f1d6fc18317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf706609c5e5e6be58d94f1d6fc18317">&#9670;&nbsp;</a></span>sip_outbound_publish_client_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sip_outbound_publish_client_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor function for publish client. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01188">1188</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">ast_sip_outbound_publish_client::datastores</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01423">sip_outbound_publish_state_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;{</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *client = obj;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">    * The client&#39;s publishers have already been unpublished and destroyed</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">    * by this point, so it is safe to finally remove the reference to the</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment">    * publish object. The client needed to hold a reference to it until</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment">    * the publishers were done with it.</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;}</div><div class="ttc" id="structast__sip__outbound__publish__client_html"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a></div><div class="ttdoc">Outbound publish client state information (persists for lifetime of a publish) </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00228">res_pjsip_outbound_publish.c:228</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_outbound_publish_client::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdoc">Publisher datastores set up by handlers. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">res_pjsip_outbound_publish.c:232</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="accea5ae19549158c46949a82179df9d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accea5ae19549158c46949a82179df9d3">&#9670;&nbsp;</a></span>sip_outbound_publish_client_get_publisher()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a>* sip_outbound_publish_client_get_publisher </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">551</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00234">ast_rwlock_wrlock</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00255">load_lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">ast_sip_outbound_publish_client::publishers</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01085">sip_outbound_publish_client_add_publisher()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00575">ast_sip_publish_client_get_user_from_uri()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00598">ast_sip_publish_client_get_user_to_uri()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01109">ast_sip_publish_client_user_send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;{</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">    * Lock before searching since there could be a race between searching and adding.</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">    * Just use the load_lock since we might need to lock it anyway (if adding) and</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">    * also it simplifies the code (otherwise we&#39;d have to lock the publishers, no-</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">    * lock the search and pass a flag to &#39;add publisher to no-lock the potential link).</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a25cf316b20bd47aef1b5dbda389d12b9">load_lock</a>);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   publisher = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">publishers</a>, <a class="code" href="../../d8/dbc/structuser.html">user</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <span class="keywordflow">if</span> (!publisher) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keywordflow">if</span> (!(publisher = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abe0679d7ecc20ceab17d82221368c5d8">sip_outbound_publish_client_add_publisher</a>(client, <a class="code" href="../../d8/dbc/structuser.html">user</a>))) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a25cf316b20bd47aef1b5dbda389d12b9">load_lock</a>);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a25cf316b20bd47aef1b5dbda389d12b9">load_lock</a>);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <span class="keywordflow">return</span> publisher;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div><div class="ttc" id="res__pjsip__outbound__publish_8c_html_a25cf316b20bd47aef1b5dbda389d12b9"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a25cf316b20bd47aef1b5dbda389d12b9">load_lock</a></div><div class="ttdeci">static ast_rwlock_t load_lock</div><div class="ttdoc">Used for locking while loading/reloading. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00255">res_pjsip_outbound_publish.c:255</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_abe0679d7ecc20ceab17d82221368c5d8"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#abe0679d7ecc20ceab17d82221368c5d8">sip_outbound_publish_client_add_publisher</a></div><div class="ttdeci">static struct sip_outbound_publisher * sip_outbound_publish_client_add_publisher(struct ast_sip_outbound_publish_client *client, const char *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01085">res_pjsip_outbound_publish.c:1085</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="lock_8h_html_a045bd81ceab2de81e42af338ad7cf121"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a></div><div class="ttdeci">#define ast_rwlock_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00234">lock.h:234</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_adb838b688e98c705b8668af938b5f85a"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">ast_sip_outbound_publish_client::publishers</a></div><div class="ttdeci">struct ao2_container * publishers</div><div class="ttdoc">Container of all the client publishing objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">res_pjsip_outbound_publish.c:234</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a468bb04658c3183f5d2e7acb85819a5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a468bb04658c3183f5d2e7acb85819a5e">&#9670;&nbsp;</a></span>sip_outbound_publish_datastore_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sip_outbound_publish_datastore_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00680">680</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00070">ast_datastore::data</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00034">ast_datastore_info::destroy</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00071">ast_datastore::info</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/db6/datastore_8h_source.html#l00069">ast_datastore::uid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00694">ast_sip_publish_client_alloc_datastore()</a>.</p>
<div class="fragment"><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;{</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore = obj;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <span class="comment">/* Using the destroy function (if present) destroy the data */</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="keywordflow">if</span> (datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">info</a>-&gt;<a class="code" href="../../d9/dfb/structast__datastore__info.html#afdad821535486a599c1df88ef7be69bb">destroy</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">info</a>-&gt;<a class="code" href="../../d9/dfb/structast__datastore__info.html#afdad821535486a599c1df88ef7be69bb">destroy</a>(datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>((<span class="keywordtype">void</span> *) datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a>);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;}</div><div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__datastore_html_a2daadcdbac635c83b7bfc6375b4c9be4"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">ast_datastore::uid</a></div><div class="ttdeci">const char * uid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00069">datastore.h:69</a></div></div>
<div class="ttc" id="structast__datastore_html_a03ea21247b5d39b165343431b44131f1"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">ast_datastore::info</a></div><div class="ttdeci">const struct ast_datastore_info * info</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00071">datastore.h:71</a></div></div>
<div class="ttc" id="structast__datastore__info_html_afdad821535486a599c1df88ef7be69bb"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html#afdad821535486a599c1df88ef7be69bb">ast_datastore_info::destroy</a></div><div class="ttdeci">void(* destroy)(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00034">datastore.h:34</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a38547a0c927cbefc1fc7261c2a00ae1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38547a0c927cbefc1fc7261c2a00ae1b">&#9670;&nbsp;</a></span>sip_outbound_publish_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sip_outbound_publish_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor function for publish information. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00657">657</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00249">ast_sip_auth_vector_destroy()</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00193">ast_sip_outbound_publish::outbound_auths</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00667">sip_outbound_publish_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;{</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a> = obj;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ac5342f99fec726a94fb4b713e43eec12">ast_sip_auth_vector_destroy</a>(&amp;publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a045e92a13d3f4b1e0d061b4b6e64f1e1">outbound_auths</a>);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(publish);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;}</div><div class="ttc" id="structast__sip__outbound__publish_html_a045e92a13d3f4b1e0d061b4b6e64f1e1"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#a045e92a13d3f4b1e0d061b4b6e64f1e1">ast_sip_outbound_publish::outbound_auths</a></div><div class="ttdeci">struct ast_sip_auth_vector outbound_auths</div><div class="ttdoc">Configured authentication credentials. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00193">res_pjsip_outbound_publish.c:193</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ac5342f99fec726a94fb4b713e43eec12"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ac5342f99fec726a94fb4b713e43eec12">ast_sip_auth_vector_destroy</a></div><div class="ttdeci">void ast_sip_auth_vector_destroy(struct ast_sip_auth_vector *vector)</div><div class="ttdoc">Free contents of an auth vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l00249">pjsip_configuration.c:249</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a50dee8c49eaca24fc2c6515ccfab67ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50dee8c49eaca24fc2c6515ccfab67ee">&#9670;&nbsp;</a></span>sip_outbound_publish_state_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a>* sip_outbound_publish_state_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *&#160;</td>
          <td class="paramname"><em>publish</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocator function for publish client. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01423">1423</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01310">ao2_container_alloc_hash</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">ast_sip_outbound_publish_state::client</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01363">DATASTORE_BUCKETS</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01387">datastore_cmp()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01365">datastore_hash()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">ast_sip_outbound_publish_client::datastores</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00244">ast_sip_outbound_publish_state::id</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">ast_sip_outbound_publish_client::publishers</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01188">sip_outbound_publish_client_destroy()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01204">sip_outbound_publish_state_destroy()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01545">sip_outbound_publish_apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;{</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(publish);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *<a class="code" href="../../d4/d88/structstate.html">state</a> =</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*state) + strlen(<span class="keywordtype">id</span>) + 1, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ab2a7a3acaae6e42e948d1c6d7628fd91">sip_outbound_publish_state_destroy</a>);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   <span class="keywordflow">if</span> (!state) {</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;   }</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;   state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>), <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aaf706609c5e5e6be58d94f1d6fc18317">sip_outbound_publish_client_destroy</a>);</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   <span class="keywordflow">if</span> (!state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>) {</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(state, -1);</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;   }</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;   state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">datastores</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a39fcd37b99a8eafd0aa1c961d8736f88">DATASTORE_BUCKETS</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae586d6908c81e9a59e0e68358c12c9cc">datastore_hash</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ac60c8c7a11b9aa2b347630c7d08af17d">datastore_cmp</a>);</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;   <span class="keywordflow">if</span> (!state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">datastores</a>) {</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(state, -1);</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;   }</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;   state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">publishers</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a39fcd37b99a8eafd0aa1c961d8736f88">DATASTORE_BUCKETS</a>,</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      sip_outbound_publisher_hash_fn, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, sip_outbound_publisher_cmp_fn);</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;   <span class="keywordflow">if</span> (!state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">publishers</a>) {</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(state, -1);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;   }</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;   state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(publish);</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;   strcpy(state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#abe9e57df6ac773738500092fe3cf7fca">id</a>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ae586d6908c81e9a59e0e68358c12c9cc"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ae586d6908c81e9a59e0e68358c12c9cc">datastore_hash</a></div><div class="ttdeci">static int datastore_hash(const void *obj, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01365">res_pjsip_outbound_publish.c:1365</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ab2a7a3acaae6e42e948d1c6d7628fd91"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ab2a7a3acaae6e42e948d1c6d7628fd91">sip_outbound_publish_state_destroy</a></div><div class="ttdeci">static void sip_outbound_publish_state_destroy(void *obj)</div><div class="ttdoc">Destructor function for publish state. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01204">res_pjsip_outbound_publish.c:1204</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html_a5592324b65dd693db5308f4d96e85edf"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">ast_sip_outbound_publish_state::client</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * client</div><div class="ttdoc">Outbound publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">res_pjsip_outbound_publish.c:242</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a></div><div class="ttdoc">Outbound publish state information (persists for lifetime of a publish) </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00240">res_pjsip_outbound_publish.c:240</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html_abe9e57df6ac773738500092fe3cf7fca"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html#abe9e57df6ac773738500092fe3cf7fca">ast_sip_outbound_publish_state::id</a></div><div class="ttdeci">char id[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00244">res_pjsip_outbound_publish.c:244</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ac60c8c7a11b9aa2b347630c7d08af17d"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ac60c8c7a11b9aa2b347630c7d08af17d">datastore_cmp</a></div><div class="ttdeci">static int datastore_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01387">res_pjsip_outbound_publish.c:1387</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a39fcd37b99a8eafd0aa1c961d8736f88"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a39fcd37b99a8eafd0aa1c961d8736f88">DATASTORE_BUCKETS</a></div><div class="ttdeci">#define DATASTORE_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01363">res_pjsip_outbound_publish.c:1363</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_abc32956d82e246471f4e5edbb3dda759"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#abc32956d82e246471f4e5edbb3dda759">ast_sip_outbound_publish_client::datastores</a></div><div class="ttdeci">struct ao2_container * datastores</div><div class="ttdoc">Publisher datastores set up by handlers. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00232">res_pjsip_outbound_publish.c:232</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_aaf706609c5e5e6be58d94f1d6fc18317"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aaf706609c5e5e6be58d94f1d6fc18317">sip_outbound_publish_client_destroy</a></div><div class="ttdeci">static void sip_outbound_publish_client_destroy(void *obj)</div><div class="ttdoc">Destructor function for publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01188">res_pjsip_outbound_publish.c:1188</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_adb838b688e98c705b8668af938b5f85a"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">ast_sip_outbound_publish_client::publishers</a></div><div class="ttdeci">struct ao2_container * publishers</div><div class="ttdoc">Container of all the client publishing objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">res_pjsip_outbound_publish.c:234</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab2a7a3acaae6e42e948d1c6d7628fd91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2a7a3acaae6e42e948d1c6d7628fd91">&#9670;&nbsp;</a></span>sip_outbound_publish_state_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sip_outbound_publish_state_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor function for publish state. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01204">1204</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01152">cancel_and_unpublish()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">ast_sip_outbound_publish_state::client</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01043">OBJ_UNLINK</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">ast_sip_outbound_publish_client::publishers</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00236">ast_sip_outbound_publish_client::started</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00455">stop_publishing()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01423">sip_outbound_publish_state_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;{</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *<a class="code" href="../../d4/d88/structstate.html">state</a> = obj;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2018b62163a939da16dde2f65eafb928">stop_publishing</a>(state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">    * Since the state is being destroyed the associated client needs to also</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">    * be destroyed. However simply removing the reference to the client will</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">    * not initiate client destruction since the client&#39;s publisher(s) hold a</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment">    * reference to the client object as well. So we need to unpublish the</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">    * the client&#39;s publishers here, which will remove the publisher&#39;s client</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">    * reference during that process.</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment">    * That being said we don&#39;t want to remove the client&#39;s reference to the</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment">    * publish object just yet. We&#39;ll hold off on that until client destruction</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment">    * itself. This is because the publishers need access to the client&#39;s</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment">    * publish object while they are unpublishing.</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">publishers</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#af9c14664cac334ea2c347f263fab4d23">cancel_and_unpublish</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">publishers</a>);</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#ac9fff1bbd83ce5e959fb639570c9c5f5">started</a> = 0;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>);</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;}</div><div class="ttc" id="structast__sip__outbound__publish__client_html_ac9fff1bbd83ce5e959fb639570c9c5f5"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#ac9fff1bbd83ce5e959fb639570c9c5f5">ast_sip_outbound_publish_client::started</a></div><div class="ttdeci">unsigned int started</div><div class="ttdoc">Publishing has been fully started and event type informed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00236">res_pjsip_outbound_publish.c:236</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a2018b62163a939da16dde2f65eafb928"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2018b62163a939da16dde2f65eafb928">stop_publishing</a></div><div class="ttdeci">static void stop_publishing(struct ast_sip_outbound_publish_client *client, struct ast_sip_event_publisher_handler *handler)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00455">res_pjsip_outbound_publish.c:455</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html_a5592324b65dd693db5308f4d96e85edf"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">ast_sip_outbound_publish_state::client</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * client</div><div class="ttdoc">Outbound publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">res_pjsip_outbound_publish.c:242</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01043">astobj2.h:1043</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a></div><div class="ttdoc">Outbound publish state information (persists for lifetime of a publish) </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00240">res_pjsip_outbound_publish.c:240</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_af9c14664cac334ea2c347f263fab4d23"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#af9c14664cac334ea2c347f263fab4d23">cancel_and_unpublish</a></div><div class="ttdeci">static int cancel_and_unpublish(void *obj, void *arg, int flags)</div><div class="ttdoc">Helper function which cancels and un-publishes a no longer used client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01152">res_pjsip_outbound_publish.c:1152</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_adb838b688e98c705b8668af938b5f85a"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">ast_sip_outbound_publish_client::publishers</a></div><div class="ttdeci">struct ao2_container * publishers</div><div class="ttdoc">Container of all the client publishing objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">res_pjsip_outbound_publish.c:234</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a2485b09b24a61b64b6d5295946f031"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a2485b09b24a61b64b6d5295946f031">&#9670;&nbsp;</a></span>sip_outbound_publish_synchronize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sip_outbound_publish_synchronize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *&#160;</td>
          <td class="paramname"><em>removed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function which starts or stops publish clients when applicable. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">470</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01152">cancel_and_unpublish()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">ast_sip_outbound_publish_state::client</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::event</a>, <a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00043">ast_sip_event_publisher_handler::event_name</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00350">find_publisher_handler_for_event_name()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00323">get_publishes_and_update_state()</a>, <a class="el" href="../../da/d03/test__ari_8c_source.html#l00059">handler()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">ast_sip_outbound_publish_client::publishers</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00054">ast_sip_event_publisher_handler::start_publishing</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00236">ast_sip_outbound_publish_client::started</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00455">stop_publishing()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00614">ast_sip_register_event_publisher_handler()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00641">ast_sip_unregister_event_publisher_handler()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01647">load_module()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01690">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;{</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *, publishes, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#adf296052b4732168e00f3d47e78e6595">get_publishes_and_update_state</a>(), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *states;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *<a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <span class="keywordflow">if</span> (!publishes) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   states = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(current_states);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <span class="keywordflow">if</span> (!states) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(states, 0);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <span class="keywordflow">while</span> ((state = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *<a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a> = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeea9ed171992fb252a3ae3c70e1e6f15">find_publisher_handler_for_event_name</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aade3e13866a9674783944ec186ddba57">event</a>);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">if</span> (!state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#ac9fff1bbd83ce5e959fb639570c9c5f5">started</a>) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;         <span class="comment">/* If the publisher client has not yet been started try to start it */</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;         <span class="keywordflow">if</span> (!handler) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Could not find handler for event &#39;%s&#39; for outbound publish client &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                 publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aade3e13866a9674783944ec186ddba57">event</a>, <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(publish));</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (handler-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#a37bc14558569a05a854d7b4f7d2d58ce">start_publishing</a>(publish, state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>)) {</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to start outbound publish with event &#39;%s&#39; for client &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;               publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aade3e13866a9674783944ec186ddba57">event</a>, <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(publish));</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#ac9fff1bbd83ce5e959fb639570c9c5f5">started</a> = 1;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;         }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#ac9fff1bbd83ce5e959fb639570c9c5f5">started</a> &amp;&amp; !handler &amp;&amp; removed &amp;&amp; !strcmp(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aade3e13866a9674783944ec186ddba57">event</a>, removed-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#aeccf279e6fca0e5f8536fdf76c838728">event_name</a>)) {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;         <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2018b62163a939da16dde2f65eafb928">stop_publishing</a>(state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>, removed);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">publishers</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#af9c14664cac334ea2c347f263fab4d23">cancel_and_unpublish</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;         state-&gt;<a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">client</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#ac9fff1bbd83ce5e959fb639570c9c5f5">started</a> = 0;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publish, -1);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(state, -1);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(states, -1);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_ac9fff1bbd83ce5e959fb639570c9c5f5"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#ac9fff1bbd83ce5e959fb639570c9c5f5">ast_sip_outbound_publish_client::started</a></div><div class="ttdeci">unsigned int started</div><div class="ttdoc">Publishing has been fully started and event type informed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00236">res_pjsip_outbound_publish.c:236</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html_a37bc14558569a05a854d7b4f7d2d58ce"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html#a37bc14558569a05a854d7b4f7d2d58ce">ast_sip_event_publisher_handler::start_publishing</a></div><div class="ttdeci">int(* start_publishing)(struct ast_sip_outbound_publish *configuration, struct ast_sip_outbound_publish_client *client)</div><div class="ttdoc">Called when a publisher should start publishing. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00054">res_pjsip_outbound_publish.h:54</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a2018b62163a939da16dde2f65eafb928"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2018b62163a939da16dde2f65eafb928">stop_publishing</a></div><div class="ttdeci">static void stop_publishing(struct ast_sip_outbound_publish_client *client, struct ast_sip_event_publisher_handler *handler)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00455">res_pjsip_outbound_publish.c:455</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html_a5592324b65dd693db5308f4d96e85edf"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html#a5592324b65dd693db5308f4d96e85edf">ast_sip_outbound_publish_state::client</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * client</div><div class="ttdoc">Outbound publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00242">res_pjsip_outbound_publish.c:242</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a></div><div class="ttdoc">Outbound publish state information (persists for lifetime of a publish) </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00240">res_pjsip_outbound_publish.c:240</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a></div><div class="ttdoc">Callbacks that event publisher handlers will define. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00041">res_pjsip_outbound_publish.h:41</a></div></div>
<div class="ttc" id="structast__sip__event__publisher__handler_html_aeccf279e6fca0e5f8536fdf76c838728"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html#aeccf279e6fca0e5f8536fdf76c838728">ast_sip_event_publisher_handler::event_name</a></div><div class="ttdeci">const char * event_name</div><div class="ttdoc">The name of the event this handler deals with. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00043">res_pjsip_outbound_publish.h:43</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_aeea9ed171992fb252a3ae3c70e1e6f15"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeea9ed171992fb252a3ae3c70e1e6f15">find_publisher_handler_for_event_name</a></div><div class="ttdeci">static struct ast_sip_event_publisher_handler * find_publisher_handler_for_event_name(const char *event_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00350">res_pjsip_outbound_publish.c:350</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_af9c14664cac334ea2c347f263fab4d23"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#af9c14664cac334ea2c347f263fab4d23">cancel_and_unpublish</a></div><div class="ttdeci">static int cancel_and_unpublish(void *obj, void *arg, int flags)</div><div class="ttdoc">Helper function which cancels and un-publishes a no longer used client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01152">res_pjsip_outbound_publish.c:1152</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_adf296052b4732168e00f3d47e78e6595"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#adf296052b4732168e00f3d47e78e6595">get_publishes_and_update_state</a></div><div class="ttdeci">static struct ao2_container * get_publishes_and_update_state(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00323">res_pjsip_outbound_publish.c:323</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aade3e13866a9674783944ec186ddba57"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aade3e13866a9674783944ec186ddba57">ast_sip_outbound_publish::event</a></div><div class="ttdeci">const ast_string_field event</div><div class="ttdoc">The event type to publish. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_adb838b688e98c705b8668af938b5f85a"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#adb838b688e98c705b8668af938b5f85a">ast_sip_outbound_publish_client::publishers</a></div><div class="ttdeci">struct ao2_container * publishers</div><div class="ttdoc">Container of all the client publishing objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00234">res_pjsip_outbound_publish.c:234</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="test__ari_8c_html_a695cc202c7a2869aa8202bb20726ea3c"><div class="ttname"><a href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a></div><div class="ttdeci">static void handler(const char *name, int response_code, struct ast_variable *get_params, struct ast_variable *path_vars, struct ast_variable *headers, struct ast_json *body, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/test__ari_8c_source.html#l00059">test_ari.c:59</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9d81ebb302cba5650c301fe39cd96df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9d81ebb302cba5650c301fe39cd96df">&#9670;&nbsp;</a></span>sip_outbound_publish_timer_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sip_outbound_publish_timer_cb </td>
          <td>(</td>
          <td class="paramtype">pj_timer_heap_t *&#160;</td>
          <td class="paramname"><em>timer_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct pj_timer_entry *&#160;</td>
          <td class="paramname"><em>entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publish client timer callback function. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00401">401</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00796">publisher_client_send()</a>, and <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html#ae04270ced09248884758bdfcf9f29a50">sip_outbound_publisher::queue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01033">sip_outbound_publisher_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;{</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher = <a class="code" href="../../d3/d96/structentry.html">entry</a>-&gt;user_data;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(publisher);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ae04270ced09248884758bdfcf9f29a50">queue</a>)) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="comment">/* If there are no outstanding messages send an empty PUBLISH message so our publication doesn&#39;t expire */</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb36f6fc22f2185a5606263a3745a2c8">publisher_client_send</a>(publisher, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;res, 0);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(publisher);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div><div class="ttc" id="res__pjsip__outbound__publish_8c_html_aeb36f6fc22f2185a5606263a3745a2c8"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb36f6fc22f2185a5606263a3745a2c8">publisher_client_send</a></div><div class="ttdeci">static int publisher_client_send(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00796">res_pjsip_outbound_publish.c:796</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ae04270ced09248884758bdfcf9f29a50"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ae04270ced09248884758bdfcf9f29a50">sip_outbound_publisher::queue</a></div><div class="ttdeci">struct sip_outbound_publisher::@485 queue</div><div class="ttdoc">Queue of outgoing publish messages to send. </div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04ff39e187e8a719c5de79ac5ef2fd39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04ff39e187e8a719c5de79ac5ef2fd39">&#9670;&nbsp;</a></span>sip_outbound_publisher_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a>* sip_outbound_publisher_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01033">1033</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05128">ast_sip_create_serializer_group()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05204">ast_sip_push_task_wait_servant()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01295">ast_taskprocessor_build_name()</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00060">AST_TASKPROCESSOR_MAX_NAME</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">sip_outbound_publisher::owner</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00222">sip_outbound_publisher::serializer</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00401">sip_outbound_publish_timer_cb()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01015">sip_outbound_publisher_destroy()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00935">sip_outbound_publisher_init()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00212">sip_outbound_publisher::timer</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00224">sip_outbound_publisher::user</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01085">sip_outbound_publish_client_add_publisher()</a>.</p>
<div class="fragment"><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;{</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   <span class="keywordtype">char</span> tps_name[<a class="code" href="../../d0/d1e/taskprocessor_8h.html#adf4c5a237767eb6db5b1db41ccdfc689">AST_TASKPROCESSOR_MAX_NAME</a> + 1];</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;   publisher = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*publisher) + (<a class="code" href="../../d8/dbc/structuser.html">user</a> ? strlen(<a class="code" href="../../d8/dbc/structuser.html">user</a>) : 0) + 1,</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;               <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aa1ec5da6df59a4786d2f05786b3aa4e8">sip_outbound_publisher_destroy</a>);</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;   <span class="keywordflow">if</span> (!publisher) {</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;   }</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">    * Bump the ref to the client. This essentially creates a circular reference,</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">    * but it is needed in order to make sure the client object doesn&#39;t get pulled</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment">    * out from under us when the publisher stops publishing.</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment">    * The circular reference is alleviated by calling cancel_and_unpublish for</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment">    * each client, from the state&#39;s destructor. By calling it there all references</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">    * to the publishers should go to zero, thus calling the publisher&#39;s destructor.</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">    * This in turn removes the client reference we added here. The state then removes</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">    * its reference to the client, which should take it to zero.</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">owner</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(client);</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;   publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#acef2f236d7d6e9e799545af3a9a27a19">timer</a>.user_data = publisher;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;   publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#acef2f236d7d6e9e799545af3a9a27a19">timer</a>.cb = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ac9d81ebb302cba5650c301fe39cd96df">sip_outbound_publish_timer_cb</a>;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/dbc/structuser.html">user</a>) {</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      strcpy(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a7a4fd796d013e07c873e5a96165aeca2">user</a>, <a class="code" href="../../d8/dbc/structuser.html">user</a>);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      *publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a7a4fd796d013e07c873e5a96165aeca2">user</a> = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   }</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ab47623e207bf2cdd0edfa613d91894e5">ast_taskprocessor_build_name</a>(tps_name, <span class="keyword">sizeof</span>(tps_name), <span class="stringliteral">&quot;pjsip/outpub/%s&quot;</span>,</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>));</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a> = <a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga575cb798179c82d92b24415d3e174b5b">ast_sip_create_serializer_group</a>(tps_name,</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2c3d0057b62bfa5b08fe977478749c24">shutdown_group</a>);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   <span class="keywordflow">if</span> (!publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>) {</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;   }</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#af1d49a6c38ba6c32a1f735c4e1ad2e6b">sip_outbound_publisher_init</a>, publisher)) {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create publisher for outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;         <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>));</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   }</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   <span class="keywordflow">return</span> publisher;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;}</div><div class="ttc" id="taskprocessor_8h_html_ab47623e207bf2cdd0edfa613d91894e5"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ab47623e207bf2cdd0edfa613d91894e5">ast_taskprocessor_build_name</a></div><div class="ttdeci">void ast_taskprocessor_build_name(char *buf, unsigned int size, const char *format,...)</div><div class="ttdoc">Build a taskprocessor name with a sequence number on the end. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01295">taskprocessor.c:1295</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a7a4fd796d013e07c873e5a96165aeca2"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a7a4fd796d013e07c873e5a96165aeca2">sip_outbound_publisher::user</a></div><div class="ttdeci">char user[0]</div><div class="ttdoc">User, if any, associated with the publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00224">res_pjsip_outbound_publish.c:224</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_adf4c5a237767eb6db5b1db41ccdfc689"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#adf4c5a237767eb6db5b1db41ccdfc689">AST_TASKPROCESSOR_MAX_NAME</a></div><div class="ttdeci">#define AST_TASKPROCESSOR_MAX_NAME</div><div class="ttdoc">Suggested maximum taskprocessor name length (less null terminator). </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00060">taskprocessor.h:60</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_gab8c82412fe0432a91d5c7985cfdf9b59"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a></div><div class="ttdeci">int ast_sip_push_task_wait_servant(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Push a task to SIP servants and wait for it to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05204">res_pjsip.c:5204</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga575cb798179c82d92b24415d3e174b5b"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga575cb798179c82d92b24415d3e174b5b">ast_sip_create_serializer_group</a></div><div class="ttdeci">struct ast_taskprocessor * ast_sip_create_serializer_group(const char *name, struct ast_serializer_shutdown_group *shutdown_group)</div><div class="ttdoc">Create a new serializer for SIP tasks. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05128">res_pjsip.c:5128</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_acef2f236d7d6e9e799545af3a9a27a19"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#acef2f236d7d6e9e799545af3a9a27a19">sip_outbound_publisher::timer</a></div><div class="ttdeci">pj_timer_entry timer</div><div class="ttdoc">Timer entry for refreshing publish. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00212">res_pjsip_outbound_publish.c:212</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ac23e23ba60f358de78a893d537c0afa4">sip_outbound_publisher::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdoc">Serializer for stuff and things. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00222">res_pjsip_outbound_publish.c:222</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ac9d81ebb302cba5650c301fe39cd96df"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ac9d81ebb302cba5650c301fe39cd96df">sip_outbound_publish_timer_cb</a></div><div class="ttdeci">static void sip_outbound_publish_timer_cb(pj_timer_heap_t *timer_heap, struct pj_timer_entry *entry)</div><div class="ttdoc">Publish client timer callback function. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00401">res_pjsip_outbound_publish.c:401</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a2c3d0057b62bfa5b08fe977478749c24"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2c3d0057b62bfa5b08fe977478749c24">shutdown_group</a></div><div class="ttdeci">static struct ast_serializer_shutdown_group * shutdown_group</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00265">res_pjsip_outbound_publish.c:265</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_af1d49a6c38ba6c32a1f735c4e1ad2e6b"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#af1d49a6c38ba6c32a1f735c4e1ad2e6b">sip_outbound_publisher_init</a></div><div class="ttdeci">static int sip_outbound_publisher_init(void *data)</div><div class="ttdoc">Helper function that allocates a pjsip publish client and configures it. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00935">res_pjsip_outbound_publish.c:935</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a8d46da4b117d10a2f6987137b2bd93f8"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">sip_outbound_publisher::owner</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * owner</div><div class="ttdoc">The client object that &amp;#39;owns&amp;#39; this client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">res_pjsip_outbound_publish.c:204</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_aa1ec5da6df59a4786d2f05786b3aa4e8"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aa1ec5da6df59a4786d2f05786b3aa4e8">sip_outbound_publisher_destroy</a></div><div class="ttdeci">static void sip_outbound_publisher_destroy(void *obj)</div><div class="ttdoc">Destructor function for publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01015">res_pjsip_outbound_publish.c:1015</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa1ec5da6df59a4786d2f05786b3aa4e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1ec5da6df59a4786d2f05786b3aa4e8">&#9670;&nbsp;</a></span>sip_outbound_publisher_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sip_outbound_publisher_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor function for publish client. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01015">1015</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00208">sip_outbound_publisher::from_uri</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">sip_outbound_publisher::owner</a>, <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html#ae04270ced09248884758bdfcf9f29a50">sip_outbound_publisher::queue</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00222">sip_outbound_publisher::serializer</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00210">sip_outbound_publisher::to_uri</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01033">sip_outbound_publisher_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;{</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher = obj;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d04/structsip__outbound__publish__message.html">sip_outbound_publish_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <span class="comment">/* You might be tempted to think &quot;the publish client isn&#39;t being destroyed&quot; but it actually is - just elsewhere */</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   <span class="keywordflow">while</span> ((message = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ae04270ced09248884758bdfcf9f29a50">queue</a>, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(message);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   }</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">owner</a>);</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a06c3771afa0dcaff49f544ee5c4fb588">from_uri</a>);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac3b3aa4c20470116b0bc804a5df1d9ee">to_uri</a>);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>);</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;}</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ae04270ced09248884758bdfcf9f29a50"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ae04270ced09248884758bdfcf9f29a50">sip_outbound_publisher::queue</a></div><div class="ttdeci">struct sip_outbound_publisher::@485 queue</div><div class="ttdoc">Queue of outgoing publish messages to send. </div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ac3b3aa4c20470116b0bc804a5df1d9ee"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ac3b3aa4c20470116b0bc804a5df1d9ee">sip_outbound_publisher::to_uri</a></div><div class="ttdeci">char * to_uri</div><div class="ttdoc">The To URI for this specific publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00210">res_pjsip_outbound_publish.c:210</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ac23e23ba60f358de78a893d537c0afa4">sip_outbound_publisher::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdoc">Serializer for stuff and things. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00222">res_pjsip_outbound_publish.c:222</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a06c3771afa0dcaff49f544ee5c4fb588"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a06c3771afa0dcaff49f544ee5c4fb588">sip_outbound_publisher::from_uri</a></div><div class="ttdeci">char * from_uri</div><div class="ttdoc">The From URI for this specific publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00208">res_pjsip_outbound_publish.c:208</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a8d46da4b117d10a2f6987137b2bd93f8"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">sip_outbound_publisher::owner</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * owner</div><div class="ttdoc">The client object that &amp;#39;owns&amp;#39; this client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">res_pjsip_outbound_publish.c:204</a></div></div>
<div class="ttc" id="structsip__outbound__publish__message_html"><div class="ttname"><a href="../../d5/d04/structsip__outbound__publish__message.html">sip_outbound_publish_message</a></div><div class="ttdoc">Queued outbound publish message. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00127">res_pjsip_outbound_publish.c:127</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af1d49a6c38ba6c32a1f735c4e1ad2e6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1d49a6c38ba6c32a1f735c4e1ad2e6b">&#9670;&nbsp;</a></span>sip_outbound_publisher_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sip_outbound_publisher_init </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function that allocates a pjsip publish client and configures it. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00935">935</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">ast_sip_get_pjsip_endpoint()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00206">sip_outbound_publisher::client</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00208">sip_outbound_publisher::from_uri</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">sip_outbound_publisher::owner</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00124">pjsip_max_url_size</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00064">server_uri</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01260">sip_outbound_publish_callback()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00889">sip_outbound_publisher_set_uris()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00210">sip_outbound_publisher::to_uri</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01260">sip_outbound_publish_callback()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01033">sip_outbound_publisher_alloc()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01003">sip_outbound_publisher_reinit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;{</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *publisher = data;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *, <a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   pjsip_publishc_opt opt = {</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      .queue_request = PJ_FALSE,</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   };</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   pj_pool_t *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   pj_str_t <a class="code" href="../../df/d7d/structevent.html">event</a>, <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#af04e2af06333eeaa204e80f690383b30">server_uri</a>, <a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac3b3aa4c20470116b0bc804a5df1d9ee">to_uri</a>, <a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a06c3771afa0dcaff49f544ee5c4fb588">from_uri</a>;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <span class="keywordflow">if</span> (publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>) {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   <span class="keywordflow">if</span> (pjsip_publishc_create(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), &amp;opt,</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;              <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(publisher), <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a3d51d184aab52ec62248ed67c3971f54">sip_outbound_publish_callback</a>,</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      &amp;publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>) != PJ_SUCCESS) {</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;   }</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">owner</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>-&gt;outbound_proxy)) {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      pjsip_route_hdr route_set, *route;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t ROUTE_HNAME = { <span class="stringliteral">&quot;Route&quot;</span>, 5 };</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      pj_list_init(&amp;route_set);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="keywordflow">if</span> (!(route = pjsip_parse_hdr(pjsip_publishc_get_pool(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>), &amp;ROUTE_HNAME,</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;         (<span class="keywordtype">char</span>*)<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>-&gt;outbound_proxy, strlen(<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>-&gt;outbound_proxy), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;         pjsip_publishc_destroy(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      }</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      pj_list_insert_nodes_before(&amp;route_set, route);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      pjsip_publishc_set_route_set(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>, &amp;route_set);</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   }</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   pool = pjsip_endpt_create_pool(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), <span class="stringliteral">&quot;URI Validation&quot;</span>,</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a5712e22b675f8412b1a2e49acee9d5ff">pjsip_max_url_size</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a5712e22b675f8412b1a2e49acee9d5ff">pjsip_max_url_size</a>);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not create pool for URI validation on outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;         <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>));</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      pjsip_publishc_destroy(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   }</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a33cd4e95a369591703093d56f2e7c054">sip_outbound_publisher_set_uris</a>(pool, publisher, &amp;server_uri, &amp;from_uri, &amp;to_uri)) {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      pjsip_endpt_release_pool(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), pool);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      pjsip_publishc_destroy(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;   }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   pj_cstr(&amp;event, <a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>-&gt;event);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   <span class="keywordflow">if</span> (pjsip_publishc_init(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>, &amp;event, &amp;server_uri, &amp;from_uri, &amp;to_uri,</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;         <a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>-&gt;expiration) != PJ_SUCCESS) {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize publishing client on outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;         <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>));</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      pjsip_endpt_release_pool(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), pool);</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      pjsip_publishc_destroy(publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">client</a>);</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   }</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;   pjsip_endpt_release_pool(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), pool);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;}</div><div class="ttc" id="res__pjsip__outbound__publish_8c_html_a33cd4e95a369591703093d56f2e7c054"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a33cd4e95a369591703093d56f2e7c054">sip_outbound_publisher_set_uris</a></div><div class="ttdeci">static int sip_outbound_publisher_set_uris(pj_pool_t *pool, struct sip_outbound_publisher *publisher, pj_str_t *server_uri, pj_str_t *to_uri, pj_str_t *from_uri)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00889">res_pjsip_outbound_publish.c:889</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ac3b3aa4c20470116b0bc804a5df1d9ee"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ac3b3aa4c20470116b0bc804a5df1d9ee">sip_outbound_publisher::to_uri</a></div><div class="ttdeci">char * to_uri</div><div class="ttdoc">The To URI for this specific publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00210">res_pjsip_outbound_publish.c:210</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a5712e22b675f8412b1a2e49acee9d5ff"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a5712e22b675f8412b1a2e49acee9d5ff">pjsip_max_url_size</a></div><div class="ttdeci">static int pjsip_max_url_size</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00124">res_pjsip_outbound_publish.c:124</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a06c3771afa0dcaff49f544ee5c4fb588"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a06c3771afa0dcaff49f544ee5c4fb588">sip_outbound_publisher::from_uri</a></div><div class="ttdeci">char * from_uri</div><div class="ttdoc">The From URI for this specific publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00208">res_pjsip_outbound_publish.c:208</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a8d46da4b117d10a2f6987137b2bd93f8"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">sip_outbound_publisher::owner</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * owner</div><div class="ttdoc">The client object that &amp;#39;owns&amp;#39; this client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">res_pjsip_outbound_publish.c:204</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a89aa32c5b486e40d8ca97bed4fe724f8"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a89aa32c5b486e40d8ca97bed4fe724f8">sip_outbound_publisher::client</a></div><div class="ttdeci">pjsip_publishc * client</div><div class="ttdoc">Underlying publish client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00206">res_pjsip_outbound_publish.c:206</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_af04e2af06333eeaa204e80f690383b30"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#af04e2af06333eeaa204e80f690383b30">server_uri</a></div><div class="ttdeci">static char server_uri[512]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00064">test_http_media_cache.c:64</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a785afb501e315c8a97ad476fb6a8be1d"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a></div><div class="ttdeci">pjsip_endpoint * ast_sip_get_pjsip_endpoint(void)</div><div class="ttdoc">Get a pointer to the PJSIP endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03718">res_pjsip.c:3718</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a3d51d184aab52ec62248ed67c3971f54"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a3d51d184aab52ec62248ed67c3971f54">sip_outbound_publish_callback</a></div><div class="ttdeci">static void sip_outbound_publish_callback(struct pjsip_publishc_cbparam *param)</div><div class="ttdoc">Callback function for publish client responses. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01260">res_pjsip_outbound_publish.c:1260</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab577f467d359e1e8615c1386d5c21cdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab577f467d359e1e8615c1386d5c21cdb">&#9670;&nbsp;</a></span>sip_outbound_publisher_reinit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sip_outbound_publisher_reinit </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01003">1003</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00935">sip_outbound_publisher_init()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01008">sip_outbound_publisher_reinit_all()</a>.</p>
<div class="fragment"><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;{</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#af1d49a6c38ba6c32a1f735c4e1ad2e6b">sip_outbound_publisher_init</a>(obj);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;}</div><div class="ttc" id="res__pjsip__outbound__publish_8c_html_af1d49a6c38ba6c32a1f735c4e1ad2e6b"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#af1d49a6c38ba6c32a1f735c4e1ad2e6b">sip_outbound_publisher_init</a></div><div class="ttdeci">static int sip_outbound_publisher_init(void *data)</div><div class="ttdoc">Helper function that allocates a pjsip publish client and configures it. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00935">res_pjsip_outbound_publish.c:935</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a45f47161cf28f5364142324bac4c562d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45f47161cf28f5364142324bac4c562d">&#9670;&nbsp;</a></span>sip_outbound_publisher_reinit_all()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sip_outbound_publisher_reinit_all </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01008">1008</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01003">sip_outbound_publisher_reinit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01492">current_state_reusable()</a>.</p>
<div class="fragment"><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;{</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(data, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ab577f467d359e1e8615c1386d5c21cdb">sip_outbound_publisher_reinit</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ab577f467d359e1e8615c1386d5c21cdb"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ab577f467d359e1e8615c1386d5c21cdb">sip_outbound_publisher_reinit</a></div><div class="ttdeci">static int sip_outbound_publisher_reinit(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01003">res_pjsip_outbound_publish.c:1003</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace22489d12cce995e794c9a1e90ccca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace22489d12cce995e794c9a1e90ccca3">&#9670;&nbsp;</a></span>sip_outbound_publisher_set_uri()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sip_outbound_publisher_set_uri </td>
          <td>(</td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_str_t *&#160;</td>
          <td class="paramname"><em>res_uri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00853">853</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00124">pjsip_max_url_size</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00889">sip_outbound_publisher_set_uris()</a>.</p>
<div class="fragment"><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;{</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   pj_str_t <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   pjsip_uri *parsed;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   pjsip_sip_uri *parsed_uri;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   <span class="keywordtype">int</span> size;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;   pj_strdup2_with_null(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;tmp, uri);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   <span class="keywordflow">if</span> (!(parsed = pjsip_parse_uri(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, tmp.ptr, tmp.slen, 0))) {</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   <span class="keywordflow">if</span> (!(parsed_uri = pjsip_uri_get_uri(parsed))) {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   }</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d8/dbc/structuser.html">user</a>)) {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      pj_strdup2(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;parsed_uri-&gt;user, <a class="code" href="../../d8/dbc/structuser.html">user</a>);</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   }</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   res_uri-&gt;ptr = (<span class="keywordtype">char</span>*) pj_pool_alloc(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a5712e22b675f8412b1a2e49acee9d5ff">pjsip_max_url_size</a>);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   <span class="keywordflow">if</span> (!res_uri-&gt;ptr) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   }</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   <span class="keywordflow">if</span> ((size = pjsip_uri_print(PJSIP_URI_IN_OTHER, parsed_uri, res_uri-&gt;ptr,</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a5712e22b675f8412b1a2e49acee9d5ff">pjsip_max_url_size</a> - 1)) &lt;= 0) {</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;   }</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   res_uri-&gt;ptr[size] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;   res_uri-&gt;slen = size;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;}</div><div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a5712e22b675f8412b1a2e49acee9d5ff"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a5712e22b675f8412b1a2e49acee9d5ff">pjsip_max_url_size</a></div><div class="ttdeci">static int pjsip_max_url_size</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00124">res_pjsip_outbound_publish.c:124</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a33cd4e95a369591703093d56f2e7c054"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33cd4e95a369591703093d56f2e7c054">&#9670;&nbsp;</a></span>sip_outbound_publisher_set_uris()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sip_outbound_publisher_set_uris </td>
          <td>(</td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *&#160;</td>
          <td class="paramname"><em>publisher</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_str_t *&#160;</td>
          <td class="paramname"><em>server_uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_str_t *&#160;</td>
          <td class="paramname"><em>to_uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_str_t *&#160;</td>
          <td class="paramname"><em>from_uri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00889">889</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::from_uri</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00208">sip_outbound_publisher::from_uri</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">sip_outbound_publisher::owner</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::server_uri</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01260">sip_outbound_publish_callback()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00853">sip_outbound_publisher_set_uri()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::to_uri</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00210">sip_outbound_publisher::to_uri</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00224">sip_outbound_publisher::user</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00935">sip_outbound_publisher_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;{</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a> = publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">owner</a>-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ace22489d12cce995e794c9a1e90ccca3">sip_outbound_publisher_set_uri</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">server_uri</a>, publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a7a4fd796d013e07c873e5a96165aeca2">user</a>, <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#af04e2af06333eeaa204e80f690383b30">server_uri</a>)) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid server URI &#39;%s&#39; specified on outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;         publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">server_uri</a>, <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(publish));</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;   }</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>)) {</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>-&gt;ptr = <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#af04e2af06333eeaa204e80f690383b30">server_uri</a>-&gt;ptr;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>-&gt;slen = <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#af04e2af06333eeaa204e80f690383b30">server_uri</a>-&gt;slen;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ace22489d12cce995e794c9a1e90ccca3">sip_outbound_publisher_set_uri</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>, publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a7a4fd796d013e07c873e5a96165aeca2">user</a>, <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>)) {</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid to URI &#39;%s&#39; specified on outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;         publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>, <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(publish));</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac3b3aa4c20470116b0bc804a5df1d9ee">to_uri</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>-&gt;ptr);</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   <span class="keywordflow">if</span> (!publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#ac3b3aa4c20470116b0bc804a5df1d9ee">to_uri</a>) {</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   }</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>)) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>-&gt;ptr = <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#af04e2af06333eeaa204e80f690383b30">server_uri</a>-&gt;ptr;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>-&gt;slen = <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#af04e2af06333eeaa204e80f690383b30">server_uri</a>-&gt;slen;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ace22489d12cce995e794c9a1e90ccca3">sip_outbound_publisher_set_uri</a>(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>, publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a7a4fd796d013e07c873e5a96165aeca2">user</a>, <a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>)) {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid from URI &#39;%s&#39; specified on outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;         publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>, <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(publish));</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a06c3771afa0dcaff49f544ee5c4fb588">from_uri</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>-&gt;ptr);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   <span class="keywordflow">if</span> (!publisher-&gt;<a class="code" href="../../dd/dd9/structsip__outbound__publisher.html#a06c3771afa0dcaff49f544ee5c4fb588">from_uri</a>) {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   }</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a7a4fd796d013e07c873e5a96165aeca2"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a7a4fd796d013e07c873e5a96165aeca2">sip_outbound_publisher::user</a></div><div class="ttdeci">char user[0]</div><div class="ttdoc">User, if any, associated with the publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00224">res_pjsip_outbound_publish.c:224</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_ace22489d12cce995e794c9a1e90ccca3"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#ace22489d12cce995e794c9a1e90ccca3">sip_outbound_publisher_set_uri</a></div><div class="ttdeci">static int sip_outbound_publisher_set_uri(pj_pool_t *pool, const char *uri, const char *user, pj_str_t *res_uri)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00853">res_pjsip_outbound_publish.c:853</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_ac3b3aa4c20470116b0bc804a5df1d9ee"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#ac3b3aa4c20470116b0bc804a5df1d9ee">sip_outbound_publisher::to_uri</a></div><div class="ttdeci">char * to_uri</div><div class="ttdoc">The To URI for this specific publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00210">res_pjsip_outbound_publish.c:210</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a06c3771afa0dcaff49f544ee5c4fb588"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a06c3771afa0dcaff49f544ee5c4fb588">sip_outbound_publisher::from_uri</a></div><div class="ttdeci">char * from_uri</div><div class="ttdoc">The From URI for this specific publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00208">res_pjsip_outbound_publish.c:208</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html_a8d46da4b117d10a2f6987137b2bd93f8"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html#a8d46da4b117d10a2f6987137b2bd93f8">sip_outbound_publisher::owner</a></div><div class="ttdeci">struct ast_sip_outbound_publish_client * owner</div><div class="ttdoc">The client object that &amp;#39;owns&amp;#39; this client. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00204">res_pjsip_outbound_publish.c:204</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a></div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00170">res_pjsip_outbound_publish.c:170</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_a9f4106ac09bd7c29f7fd3e4165b960ca"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">ast_sip_outbound_publish::server_uri</a></div><div class="ttdeci">const ast_string_field server_uri</div><div class="ttdoc">URI for the entity and server. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_af04e2af06333eeaa204e80f690383b30"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#af04e2af06333eeaa204e80f690383b30">server_uri</a></div><div class="ttdeci">static char server_uri[512]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00064">test_http_media_cache.c:64</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aa7c8f021112adf97deb38ba0c3f5595f"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">ast_sip_outbound_publish::from_uri</a></div><div class="ttdeci">const ast_string_field from_uri</div><div class="ttdoc">URI for the From header. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aefbf78be3e0926162efdb9da3c8ce3ab"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">ast_sip_outbound_publish::to_uri</a></div><div class="ttdeci">const ast_string_field to_uri</div><div class="ttdoc">URI for the To header. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a12f73c896443f8205a405b0a795d709f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12f73c896443f8205a405b0a795d709f">&#9670;&nbsp;</a></span>sip_publish_state_get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a>* sip_publish_state_get </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00514">514</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00528">ast_sip_publish_client_get()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01545">sip_outbound_publish_apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;{</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *states = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(current_states);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a> *res;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <span class="keywordflow">if</span> (!states) {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   }</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   res = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(states, <span class="keywordtype">id</span>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(states, -1);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__state_html"><div class="ttname"><a href="../../dc/d98/structast__sip__outbound__publish__state.html">ast_sip_outbound_publish_state</a></div><div class="ttdoc">Outbound publish state information (persists for lifetime of a publish) </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00240">res_pjsip_outbound_publish.c:240</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8faafb2d56128108cc07db574572c16e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8faafb2d56128108cc07db574572c16e">&#9670;&nbsp;</a></span>sip_publisher_service_queue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sip_publisher_service_queue </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00749">749</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00420">AST_LIST_FIRST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05091">ast_sip_add_body()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00129">sip_outbound_publish_message::body</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00949">service</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00427">set_transport()</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02031">ast_sip_body::subtype</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02029">ast_sip_body::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00796">publisher_client_send()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01260">sip_outbound_publish_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;{</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a> *, publisher, data, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, publisher);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d04/structsip__outbound__publish__message.html">sip_outbound_publish_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   pjsip_tx_data *tdata;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   pj_status_t <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   <span class="keywordflow">if</span> (publisher-&gt;destroy || publisher-&gt;sending || !(message = <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;publisher-&gt;queue))) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   <span class="keywordflow">if</span> (pjsip_publishc_publish(publisher-&gt;client, PJ_FALSE, &amp;tdata) != PJ_SUCCESS) {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="keywordflow">goto</span> fatal;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   }</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(message-&gt;<a class="code" href="../../d5/d04/structsip__outbound__publish__message.html#a09c482d31d9456a9d78cf63b5334c4fa">body</a>.<a class="code" href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(message-&gt;<a class="code" href="../../d5/d04/structsip__outbound__publish__message.html#a09c482d31d9456a9d78cf63b5334c4fa">body</a>.<a class="code" href="../../d5/d80/structast__sip__body.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>) &amp;&amp;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a9a14851d1f88b087df7237ec180de52e">ast_sip_add_body</a>(tdata, &amp;message-&gt;<a class="code" href="../../d5/d04/structsip__outbound__publish__message.html#a09c482d31d9456a9d78cf63b5334c4fa">body</a>)) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      pjsip_tx_data_dec_ref(tdata);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="keywordflow">goto</span> fatal;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb069e78d986661052bfe190ef458f11">set_transport</a>(publisher, tdata);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   status = pjsip_publishc_send(publisher-&gt;client, tdata);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <span class="keywordflow">if</span> (status == PJ_EBUSY) {</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="comment">/* We attempted to send the message but something else got there first */</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status != PJ_SUCCESS) {</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      <span class="keywordflow">goto</span> fatal;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   }</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   publisher-&gt;sending = message;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;fatal:</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;publisher-&gt;queue, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(message);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>:</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(publisher-&gt;serializer, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a8faafb2d56128108cc07db574572c16e">sip_publisher_service_queue</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(publisher))) {</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(publisher, -1);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;}</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="linkedlists_8h_html_adf1959c5c03a3a706da97ad2f49617e5"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a></div><div class="ttdeci">#define AST_LIST_FIRST(head)</div><div class="ttdoc">Returns the first entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00420">linkedlists.h:420</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a495cc24c1947d49a2b6de488a45c9d72"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a></div><div class="ttdeci">enum ast_cc_service_type service</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00949">chan_sip.c:949</a></div></div>
<div class="ttc" id="structsip__outbound__publish__message_html_a09c482d31d9456a9d78cf63b5334c4fa"><div class="ttname"><a href="../../d5/d04/structsip__outbound__publish__message.html#a09c482d31d9456a9d78cf63b5334c4fa">sip_outbound_publish_message::body</a></div><div class="ttdeci">struct ast_sip_body body</div><div class="ttdoc">Optional body. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00129">res_pjsip_outbound_publish.c:129</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a8faafb2d56128108cc07db574572c16e"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a8faafb2d56128108cc07db574572c16e">sip_publisher_service_queue</a></div><div class="ttdeci">static int sip_publisher_service_queue(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00749">res_pjsip_outbound_publish.c:749</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a9a14851d1f88b087df7237ec180de52e"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a9a14851d1f88b087df7237ec180de52e">ast_sip_add_body</a></div><div class="ttdeci">int ast_sip_add_body(pjsip_tx_data *tdata, const struct ast_sip_body *body)</div><div class="ttdoc">Add a body to an outbound SIP message. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05091">res_pjsip.c:5091</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__sip__body_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_sip_body::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02029">res_pjsip.h:2029</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="structast__sip__body_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#abb4ae60bbcbce3616fdd7d4238869c91">ast_sip_body::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02031">res_pjsip.h:2031</a></div></div>
<div class="ttc" id="structsip__outbound__publish__message_html"><div class="ttname"><a href="../../d5/d04/structsip__outbound__publish__message.html">sip_outbound_publish_message</a></div><div class="ttdoc">Queued outbound publish message. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00127">res_pjsip_outbound_publish.c:127</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structsip__outbound__publisher_html"><div class="ttname"><a href="../../dd/dd9/structsip__outbound__publisher.html">sip_outbound_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00198">res_pjsip_outbound_publish.c:198</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_aeb069e78d986661052bfe190ef458f11"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeb069e78d986661052bfe190ef458f11">set_transport</a></div><div class="ttdeci">static void set_transport(struct sip_outbound_publisher *publisher, pjsip_tx_data *tdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00427">res_pjsip_outbound_publish.c:427</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2018b62163a939da16dde2f65eafb928"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2018b62163a939da16dde2f65eafb928">&#9670;&nbsp;</a></span>stop_publishing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stop_publishing </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dd9/structast__sip__outbound__publish__client.html">ast_sip_outbound_publish_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00455">455</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01152">cancel_and_unpublish()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::event</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00350">find_publisher_handler_for_event_name()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">ast_sip_outbound_publish_client::publish</a>, and <a class="el" href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00064">ast_sip_event_publisher_handler::stop_publishing</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01204">sip_outbound_publish_state_destroy()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">sip_outbound_publish_synchronize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;{</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <span class="keywordflow">if</span> (!handler) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      handler = <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeea9ed171992fb252a3ae3c70e1e6f15">find_publisher_handler_for_event_name</a>(client-&gt;<a class="code" href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">publish</a>-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aade3e13866a9674783944ec186ddba57">event</a>);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keywordflow">if</span> (handler) {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      handler-&gt;<a class="code" href="../../de/d7d/structast__sip__event__publisher__handler.html#afd18a36401e176aa953c43a7e8a9c836">stop_publishing</a>(client);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div><div class="ttc" id="structast__sip__event__publisher__handler_html_afd18a36401e176aa953c43a7e8a9c836"><div class="ttname"><a href="../../de/d7d/structast__sip__event__publisher__handler.html#afd18a36401e176aa953c43a7e8a9c836">ast_sip_event_publisher_handler::stop_publishing</a></div><div class="ttdeci">int(* stop_publishing)(struct ast_sip_outbound_publish_client *client)</div><div class="ttdoc">Called when a publisher should stop publishing. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd4/res__pjsip__outbound__publish_8h_source.html#l00064">res_pjsip_outbound_publish.h:64</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_aeea9ed171992fb252a3ae3c70e1e6f15"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#aeea9ed171992fb252a3ae3c70e1e6f15">find_publisher_handler_for_event_name</a></div><div class="ttdeci">static struct ast_sip_event_publisher_handler * find_publisher_handler_for_event_name(const char *event_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00350">res_pjsip_outbound_publish.c:350</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish__client_html_aceaa60ac7eead8542c88ab531ce8e13c"><div class="ttname"><a href="../../d3/dd9/structast__sip__outbound__publish__client.html#aceaa60ac7eead8542c88ab531ce8e13c">ast_sip_outbound_publish_client::publish</a></div><div class="ttdeci">struct ast_sip_outbound_publish * publish</div><div class="ttdoc">Outbound publish information. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00230">res_pjsip_outbound_publish.c:230</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aade3e13866a9674783944ec186ddba57"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aade3e13866a9674783944ec186ddba57">ast_sip_outbound_publish::event</a></div><div class="ttdeci">const ast_string_field event</div><div class="ttdoc">The event type to publish. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a73dd176f879a093de29f61e684d881"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a73dd176f879a093de29f61e684d881">&#9670;&nbsp;</a></span>sub_add_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sub_add_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d7d/structast__sip__event__publisher__handler.html">ast_sip_event_publisher_handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00345">345</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00131">sip_outbound_publish_message::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00614">ast_sip_register_event_publisher_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;{</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>, handler, <a class="code" href="../../d5/d04/structsip__outbound__publish__message.html#a6f11173d348c4cae260c32a810d56ff7">next</a>);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div><div class="ttc" id="structpublisher__handlers_html"><div class="ttname"><a href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00343">res_pjsip_outbound_publish.c:343</a></div></div>
<div class="ttc" id="structsip__outbound__publish__message_html_a6f11173d348c4cae260c32a810d56ff7"><div class="ttname"><a href="../../d5/d04/structsip__outbound__publish__message.html#a6f11173d348c4cae260c32a810d56ff7">sip_outbound_publish_message::next</a></div><div class="ttdeci">struct sip_outbound_publish_message * next</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00131">res_pjsip_outbound_publish.c:131</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01622">1622</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00865">ao2_global_obj_release</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01241">ast_serializer_shutdown_group_join()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">ast_sip_get_sorcery()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l01061">ast_sorcery_object_unregister()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00262">MAX_UNLOAD_TIMEOUT_TIME</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01647">load_module()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01690">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;{</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;   <span class="keywordtype">int</span> remaining;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#a7956acdd8675b6d55407ea134fb371cc">ast_sorcery_object_unregister</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;outbound-publish&quot;</span>);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a>(current_states);</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;   <span class="comment">/* Wait for publication serializers to get destroyed. */</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Waiting for publication to complete for unload.\n&quot;</span>);</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;   remaining = <a class="code" href="../../d3/d40/threadpool_8h.html#ab8cbf6d9f2f9964fc6225a73cc287441">ast_serializer_shutdown_group_join</a>(<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2c3d0057b62bfa5b08fe977478749c24">shutdown_group</a>, <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a536155006f9be75496538efe377145e6">MAX_UNLOAD_TIMEOUT_TIME</a>);</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;   <span class="keywordflow">if</span> (remaining) {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unload incomplete.  Could not stop %d outbound publications.  Try again later.\n&quot;</span>,</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;         remaining);</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;   }</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Successful shutdown.\n&quot;</span>);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2c3d0057b62bfa5b08fe977478749c24">shutdown_group</a>);</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;   <a class="code" href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2c3d0057b62bfa5b08fe977478749c24">shutdown_group</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="threadpool_8h_html_ab8cbf6d9f2f9964fc6225a73cc287441"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ab8cbf6d9f2f9964fc6225a73cc287441">ast_serializer_shutdown_group_join</a></div><div class="ttdeci">int ast_serializer_shutdown_group_join(struct ast_serializer_shutdown_group *shutdown_group, int timeout)</div><div class="ttdoc">Wait for the serializers in the group to shutdown with timeout. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l01241">threadpool.c:1241</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="sorcery_8h_html_a7956acdd8675b6d55407ea134fb371cc"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a7956acdd8675b6d55407ea134fb371cc">ast_sorcery_object_unregister</a></div><div class="ttdeci">int ast_sorcery_object_unregister(struct ast_sorcery *sorcery, const char *type)</div><div class="ttdoc">Unregister an object type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l01061">sorcery.c:1061</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a2c3d0057b62bfa5b08fe977478749c24"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a2c3d0057b62bfa5b08fe977478749c24">shutdown_group</a></div><div class="ttdeci">static struct ast_serializer_shutdown_group * shutdown_group</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00265">res_pjsip_outbound_publish.c:265</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac0e1cbc7cf050c8b7b8e3a8fee92c50e"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a></div><div class="ttdeci">#define ao2_global_obj_release(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00865">astobj2.h:865</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a5572d52daf1a841b0f9308df901448c8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a></div><div class="ttdeci">struct ast_sorcery * ast_sip_get_sorcery(void)</div><div class="ttdoc">Get a pointer to the SIP sorcery structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">pjsip_configuration.c:2404</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__pjsip__outbound__publish_8c_html_a536155006f9be75496538efe377145e6"><div class="ttname"><a href="../../df/d3a/res__pjsip__outbound__publish_8c.html#a536155006f9be75496538efe377145e6">MAX_UNLOAD_TIMEOUT_TIME</a></div><div class="ttdeci">#define MAX_UNLOAD_TIMEOUT_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00262">res_pjsip_outbound_publish.c:262</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8d9a61cda94a855bb1ae6b0e4f7bbaf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d9a61cda94a855bb1ae6b0e4f7bbaf5">&#9670;&nbsp;</a></span>validate_publish_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int validate_publish_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d73/structast__sip__outbound__publish.html">ast_sip_outbound_publish</a> *&#160;</td>
          <td class="paramname"><em>publish</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01461">1461</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l00525">ast_sip_validate_uri_length()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::event</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::from_uri</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::server_uri</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">ast_sip_outbound_publish::to_uri</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01545">sip_outbound_publish_apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;{</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">server_uri</a>)) {</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No server URI specified on outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;         <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(publish));</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a11c06d062df22e560a693c61da9ffa3c">ast_sip_validate_uri_length</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">server_uri</a>)) {</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Server URI or hostname length exceeds pjproject limit or is not a sip(s) uri: &#39;%s&#39; on outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;         publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">server_uri</a>,</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;         <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(publish));</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aade3e13866a9674783944ec186ddba57">event</a>)) {</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No event type specified for outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;         <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(publish));</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>)</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      &amp;&amp; <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a11c06d062df22e560a693c61da9ffa3c">ast_sip_validate_uri_length</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>)) {</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;From URI or hostname length exceeds pjproject limit or is not a sip(s) uri: &#39;%s&#39; on outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;         publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">from_uri</a>,</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;         <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(publish));</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>)</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      &amp;&amp; <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a11c06d062df22e560a693c61da9ffa3c">ast_sip_validate_uri_length</a>(publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>)) {</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;To URI or hostname length exceeds pjproject limit or is not a sip(s) uri: &#39;%s&#39; on outbound publish &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;         publish-&gt;<a class="code" href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">to_uri</a>,</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;         <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(publish));</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   }</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;}</div><div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_a9f4106ac09bd7c29f7fd3e4165b960ca"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#a9f4106ac09bd7c29f7fd3e4165b960ca">ast_sip_outbound_publish::server_uri</a></div><div class="ttdeci">const ast_string_field server_uri</div><div class="ttdoc">URI for the entity and server. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aade3e13866a9674783944ec186ddba57"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aade3e13866a9674783944ec186ddba57">ast_sip_outbound_publish::event</a></div><div class="ttdeci">const ast_string_field event</div><div class="ttdoc">The event type to publish. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a11c06d062df22e560a693c61da9ffa3c"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a11c06d062df22e560a693c61da9ffa3c">ast_sip_validate_uri_length</a></div><div class="ttdeci">int ast_sip_validate_uri_length(const char *uri)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/location_8c_source.html#l00525">location.c:525</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aa7c8f021112adf97deb38ba0c3f5595f"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aa7c8f021112adf97deb38ba0c3f5595f">ast_sip_outbound_publish::from_uri</a></div><div class="ttdeci">const ast_string_field from_uri</div><div class="ttdoc">URI for the From header. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
<div class="ttc" id="structast__sip__outbound__publish_html_aefbf78be3e0926162efdb9da3c8ce3ab"><div class="ttname"><a href="../../d6/d73/structast__sip__outbound__publish.html#aefbf78be3e0926162efdb9da3c8ce3ab">ast_sip_outbound_publish::to_uri</a></div><div class="ttdeci">const ast_string_field to_uri</div><div class="ttdoc">URI for the To header. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00187">res_pjsip_outbound_publish.c:187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;PJSIP Outbound Publish Support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .reload = reload_module, .unload = unload_module, .load_pri = AST_MODPRI_CHANNEL_DEPEND, .requires = &quot;res_pjproject,res_pjsip&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01707">1707</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01707">1707</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

</div>
</div>
<a id="a25cf316b20bd47aef1b5dbda389d12b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25cf316b20bd47aef1b5dbda389d12b9">&#9670;&nbsp;</a></span>load_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a> load_lock = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used for locking while loading/reloading. </p>
<p>Mutli-user configurations make it so publishers can be dynamically added and removed. Publishers should not be added or removed during a [re]load since it could cause the current_clients container to be out of sync. Thus the reason for this lock. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00255">255</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01125">ast_sip_publish_client_remove()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00323">get_publishes_and_update_state()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00551">sip_outbound_publish_client_get_publisher()</a>.</p>

</div>
</div>
<a id="abcc2de32fdf1487d09e70c9af7a942df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcc2de32fdf1487d09e70c9af7a942df">&#9670;&nbsp;</a></span>new_states</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* new_states</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used on [re]loads to hold new state data. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00271">271</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02508">load_module()</a>.</p>

</div>
</div>
<a id="a5712e22b675f8412b1a2e49acee9d5ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5712e22b675f8412b1a2e49acee9d5ff">&#9670;&nbsp;</a></span>pjsip_max_url_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int pjsip_max_url_size = PJSIP_MAX_URL_SIZE</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00124">124</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01647">load_module()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00935">sip_outbound_publisher_init()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00853">sip_outbound_publisher_set_uri()</a>.</p>

</div>
</div>
<a id="ae6a4fdc32c11b1cb0e096d27d88442c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6a4fdc32c11b1cb0e096d27d88442c9">&#9670;&nbsp;</a></span>publisher_handlers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a>   <a class="el" href="../../d4/d91/structpublisher__handlers.html">publisher_handlers</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2c3d0057b62bfa5b08fe977478749c24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c3d0057b62bfa5b08fe977478749c24">&#9670;&nbsp;</a></span>shutdown_group</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d82/structast__serializer__shutdown__group.html">ast_serializer_shutdown_group</a>* shutdown_group</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Shutdown group to monitor <a class="el" href="../../d8/d03/structsip__outbound__registration__client__state.html" title="Outbound registration client state information (persists for lifetime of regc) ">sip_outbound_registration_client_state</a> serializers. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00265">265</a> of file <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html">res_pjsip_outbound_publish.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:31 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
