<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: test_taskprocessor.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">test_taskprocessor.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>taskprocessor unit tests  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d1e/taskprocessor_8h_source.html">asterisk/taskprocessor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d5f/serializer_8h_source.html">asterisk/serializer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d40/threadpool_8h_source.html">asterisk/threadpool.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_taskprocessor.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d31/test__taskprocessor_8c__incl.png" border="0" usemap="#test__taskprocessor_8c" alt=""/></div>
<map name="test__taskprocessor_8c" id="test__taskprocessor_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="869,80,953,107"/>
<area shape="rect" id="node22" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="1155,80,1268,107"/>
<area shape="rect" id="node27" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="980,304,1115,331"/>
<area shape="rect" id="node28" href="../../d0/d1e/taskprocessor_8h.html" title="An API for managing task processing threads that can be shared across modules. " alt="" coords="1344,80,1521,107"/>
<area shape="rect" id="node29" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1345,229,1481,256"/>
<area shape="rect" id="node30" href="../../dd/d5f/serializer_8h.html" title="asterisk/serializer.h" alt="" coords="1546,80,1690,107"/>
<area shape="rect" id="node31" href="../../d3/d40/threadpool_8h.html" title="asterisk/threadpool.h" alt="" coords="1714,80,1871,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="666,155,821,181"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="787,379,924,405"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="896,155,1031,181"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="670,229,817,256"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="541,453,684,480"/>
<area shape="rect" id="node23" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1117,155,1218,181"/>
<area shape="rect" id="node25" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1190,229,1321,256"/>
<area shape="rect" id="node24" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1021,379,1172,405"/>
<area shape="rect" id="node26" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1299,304,1414,331"/>
</map>
</div>
</div>
<p><a href="../../df/df7/test__taskprocessor_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d7e/structload__task__data.html">load_task_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Relevant data associated with taskprocessor load test.  <a href="../../d5/d7e/structload__task__data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dd9/structtask__data.html">task_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">userdata associated with baseline taskprocessor test  <a href="../../d1/dd9/structtask__data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d1b/structtest__listener__pvt.html">test_listener_pvt</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private data for the test taskprocessor listener.  <a href="../../da/d1b/structtest__listener__pvt.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5424731a2ba7c1532219cd3bfdacc873"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a5424731a2ba7c1532219cd3bfdacc873">HIGH_WATER_MARK</a>&#160;&#160;&#160;6</td></tr>
<tr class="separator:a5424731a2ba7c1532219cd3bfdacc873"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb5d1b4ad16d0ee40f5cd585803d6212"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#afb5d1b4ad16d0ee40f5cd585803d6212">LOW_WATER_MARK</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:afb5d1b4ad16d0ee40f5cd585803d6212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e915ae0cd18328d97bb43f3869edc07"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a9e915ae0cd18328d97bb43f3869edc07">NUM_TASKS</a>&#160;&#160;&#160;20000</td></tr>
<tr class="separator:a9e915ae0cd18328d97bb43f3869edc07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92372d74bbec52f23a1a8705b7132201"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a92372d74bbec52f23a1a8705b7132201">TEST_DATA_ARRAY_SIZE</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:a92372d74bbec52f23a1a8705b7132201"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03a1dd615cda9c7142a55588236b8de1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a03a1dd615cda9c7142a55588236b8de1">AST_TEST_DEFINE</a> (default_taskprocessor)</td></tr>
<tr class="memdesc:a03a1dd615cda9c7142a55588236b8de1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Baseline test for default taskprocessor.  <a href="#a03a1dd615cda9c7142a55588236b8de1">More...</a><br /></td></tr>
<tr class="separator:a03a1dd615cda9c7142a55588236b8de1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1fd52514f79ab72aa60c9a3d3b75752"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#af1fd52514f79ab72aa60c9a3d3b75752">AST_TEST_DEFINE</a> (<a class="el" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a>)</td></tr>
<tr class="memdesc:af1fd52514f79ab72aa60c9a3d3b75752"><td class="mdescLeft">&#160;</td><td class="mdescRight">Baseline test for subsystem alert.  <a href="#af1fd52514f79ab72aa60c9a3d3b75752">More...</a><br /></td></tr>
<tr class="separator:af1fd52514f79ab72aa60c9a3d3b75752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a521d49a58fcae27acf79fc62f6257d49"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a521d49a58fcae27acf79fc62f6257d49">AST_TEST_DEFINE</a> (default_taskprocessor_load)</td></tr>
<tr class="memdesc:a521d49a58fcae27acf79fc62f6257d49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load test for taskprocessor with default listener.  <a href="#a521d49a58fcae27acf79fc62f6257d49">More...</a><br /></td></tr>
<tr class="separator:a521d49a58fcae27acf79fc62f6257d49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f643b9e0a85b14f15409086f290dfbf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a8f643b9e0a85b14f15409086f290dfbf">AST_TEST_DEFINE</a> (taskprocessor_listener)</td></tr>
<tr class="memdesc:a8f643b9e0a85b14f15409086f290dfbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test for a taskprocessor with custom listener.  <a href="#a8f643b9e0a85b14f15409086f290dfbf">More...</a><br /></td></tr>
<tr class="separator:a8f643b9e0a85b14f15409086f290dfbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa774bb0b88a2ba80aea8f67eec4b8d31"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#aa774bb0b88a2ba80aea8f67eec4b8d31">AST_TEST_DEFINE</a> (taskprocessor_shutdown)</td></tr>
<tr class="separator:aa774bb0b88a2ba80aea8f67eec4b8d31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27a71d2ec694b2b6e9602cdda916cd72"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a27a71d2ec694b2b6e9602cdda916cd72">AST_TEST_DEFINE</a> (taskprocessor_push_local)</td></tr>
<tr class="separator:a27a71d2ec694b2b6e9602cdda916cd72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c03845da579f03155eb6516e20d81cc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a6c03845da579f03155eb6516e20d81cc">AST_TEST_DEFINE</a> (serializer_pool)</td></tr>
<tr class="memdesc:a6c03845da579f03155eb6516e20d81cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Baseline test for a serializer pool.  <a href="#a6c03845da579f03155eb6516e20d81cc">More...</a><br /></td></tr>
<tr class="separator:a6c03845da579f03155eb6516e20d81cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4605bce14dbcef58aa8784b55eff8aeb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a4605bce14dbcef58aa8784b55eff8aeb">check_stats</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, const struct <a class="el" href="../../da/d1b/structtest__listener__pvt.html">test_listener_pvt</a> *pvt, int num_pushed, int num_emptied, int num_was_empty)</td></tr>
<tr class="memdesc:a4605bce14dbcef58aa8784b55eff8aeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">helper to ensure that statistics the listener is keeping are what we expect  <a href="#a4605bce14dbcef58aa8784b55eff8aeb">More...</a><br /></td></tr>
<tr class="separator:a4605bce14dbcef58aa8784b55eff8aeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a6c0e5128bbc626df82ada245e04bf2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a0a6c0e5128bbc626df82ada245e04bf2">listener_test_task</a> (void *ignore)</td></tr>
<tr class="memdesc:a0a6c0e5128bbc626df82ada245e04bf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queued task for taskprocessor listener test.  <a href="#a0a6c0e5128bbc626df82ada245e04bf2">More...</a><br /></td></tr>
<tr class="separator:a0a6c0e5128bbc626df82ada245e04bf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5e6253c52f6e8dae40bb36fdcbf3f13"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#ae5e6253c52f6e8dae40bb36fdcbf3f13">load_task</a> (void *data)</td></tr>
<tr class="memdesc:ae5e6253c52f6e8dae40bb36fdcbf3f13"><td class="mdescLeft">&#160;</td><td class="mdescRight">a queued task to be used in the taskprocessor load test  <a href="#ae5e6253c52f6e8dae40bb36fdcbf3f13">More...</a><br /></td></tr>
<tr class="separator:ae5e6253c52f6e8dae40bb36fdcbf3f13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf9fb63ed75f9452595c26defc93771e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#acf9fb63ed75f9452595c26defc93771e">local_task_exe</a> (struct <a class="el" href="../../dc/ded/structast__taskprocessor__local.html">ast_taskprocessor_local</a> *local)</td></tr>
<tr class="separator:acf9fb63ed75f9452595c26defc93771e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab266c6197d908bb717eb91b241d9e12b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#ab266c6197d908bb717eb91b241d9e12b">shutdown_data_create</a> (int dont_wait)</td></tr>
<tr class="separator:ab266c6197d908bb717eb91b241d9e12b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a074553b1e137c994f1518e35e30dac55"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a074553b1e137c994f1518e35e30dac55">shutdown_data_dtor</a> (void *data)</td></tr>
<tr class="separator:a074553b1e137c994f1518e35e30dac55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74b112be1280ce22266afacfe0b8893b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a74b112be1280ce22266afacfe0b8893b">shutdown_has_completed</a> (struct <a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *<a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>)</td></tr>
<tr class="separator:a74b112be1280ce22266afacfe0b8893b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeaabd813fd35e0a491dabf212f34360"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#aaeaabd813fd35e0a491dabf212f34360">shutdown_poke</a> (struct <a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *<a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>)</td></tr>
<tr class="separator:aaeaabd813fd35e0a491dabf212f34360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcc924bbfd9775752cc3da6223352b27"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#abcc924bbfd9775752cc3da6223352b27">shutdown_task_exec</a> (void *data)</td></tr>
<tr class="separator:abcc924bbfd9775752cc3da6223352b27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77de98d59d68146fbda672966d0a4e09"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a77de98d59d68146fbda672966d0a4e09">shutdown_waitfor_completion</a> (struct <a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *<a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>)</td></tr>
<tr class="separator:a77de98d59d68146fbda672966d0a4e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae13fafbef95e744b868d6cf289104903"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#ae13fafbef95e744b868d6cf289104903">shutdown_waitfor_start</a> (struct <a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *<a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>)</td></tr>
<tr class="separator:ae13fafbef95e744b868d6cf289104903"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07d08fd44ac4a9f8e1319ce270f5d56a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a> (void *data)</td></tr>
<tr class="memdesc:a07d08fd44ac4a9f8e1319ce270f5d56a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queued task for baseline test.  <a href="#a07d08fd44ac4a9f8e1319ce270f5d56a">More...</a><br /></td></tr>
<tr class="separator:a07d08fd44ac4a9f8e1319ce270f5d56a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc87b87ea4edf62dd7b26fdd9041787b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/dd9/structtask__data.html">task_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#adc87b87ea4edf62dd7b26fdd9041787b">task_data_create</a> (void)</td></tr>
<tr class="memdesc:adc87b87ea4edf62dd7b26fdd9041787b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="../../d1/dd9/structtask__data.html" title="userdata associated with baseline taskprocessor test ">task_data</a> object.  <a href="#adc87b87ea4edf62dd7b26fdd9041787b">More...</a><br /></td></tr>
<tr class="separator:adc87b87ea4edf62dd7b26fdd9041787b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca013e5a8f2cb1e722e1194374b9bd38"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#aca013e5a8f2cb1e722e1194374b9bd38">task_data_dtor</a> (void *obj)</td></tr>
<tr class="separator:aca013e5a8f2cb1e722e1194374b9bd38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad016183e7e9c88f88c247b23159fd298"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#ad016183e7e9c88f88c247b23159fd298">task_wait</a> (struct <a class="el" href="../../d1/dd9/structtask__data.html">task_data</a> *<a class="el" href="../../d1/dd9/structtask__data.html">task_data</a>)</td></tr>
<tr class="memdesc:ad016183e7e9c88f88c247b23159fd298"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for a task to execute.  <a href="#ad016183e7e9c88f88c247b23159fd298">More...</a><br /></td></tr>
<tr class="separator:ad016183e7e9c88f88c247b23159fd298"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9da6e11d7dabffa090dec1e441e726b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#af9da6e11d7dabffa090dec1e441e726b">test_emptied</a> (struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="memdesc:af9da6e11d7dabffa090dec1e441e726b"><td class="mdescLeft">&#160;</td><td class="mdescRight">test taskprocessor listener's emptied callback.  <a href="#af9da6e11d7dabffa090dec1e441e726b">More...</a><br /></td></tr>
<tr class="separator:af9da6e11d7dabffa090dec1e441e726b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cb39f2eee9c8af6648ddc31b3bbedc6"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a2cb39f2eee9c8af6648ddc31b3bbedc6">test_listener_pvt_alloc</a> (void)</td></tr>
<tr class="memdesc:a2cb39f2eee9c8af6648ddc31b3bbedc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">test taskprocessor listener's alloc callback  <a href="#a2cb39f2eee9c8af6648ddc31b3bbedc6">More...</a><br /></td></tr>
<tr class="separator:a2cb39f2eee9c8af6648ddc31b3bbedc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6d3af6eaca01518ab11d9df91989155"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#ac6d3af6eaca01518ab11d9df91989155">test_shutdown</a> (struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="memdesc:ac6d3af6eaca01518ab11d9df91989155"><td class="mdescLeft">&#160;</td><td class="mdescRight">test taskprocessor listener's shutdown callback.  <a href="#ac6d3af6eaca01518ab11d9df91989155">More...</a><br /></td></tr>
<tr class="separator:ac6d3af6eaca01518ab11d9df91989155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a250b8be05a545762774cd33ca6510803"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a250b8be05a545762774cd33ca6510803">test_start</a> (struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="memdesc:a250b8be05a545762774cd33ca6510803"><td class="mdescLeft">&#160;</td><td class="mdescRight">test taskprocessor listener's start callback  <a href="#a250b8be05a545762774cd33ca6510803">More...</a><br /></td></tr>
<tr class="separator:a250b8be05a545762774cd33ca6510803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45d3adeef10f27c378c55b98c8b9a2a1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a45d3adeef10f27c378c55b98c8b9a2a1">test_task_pushed</a> (struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>, int was_empty)</td></tr>
<tr class="memdesc:a45d3adeef10f27c378c55b98c8b9a2a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">test taskprocessor listener's task_pushed callback  <a href="#a45d3adeef10f27c378c55b98c8b9a2a1">More...</a><br /></td></tr>
<tr class="separator:a45d3adeef10f27c378c55b98c8b9a2a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0041b90fab7718c2319a6f312a55073e"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a0041b90fab7718c2319a6f312a55073e">tps_shutdown_thread</a> (void *data)</td></tr>
<tr class="separator:a0041b90fab7718c2319a6f312a55073e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;taskprocessor <a class="el" href="../../d8/d89/structtest.html">test</a> module&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a927be688814a3e7c472113954a9d4a3b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d7e/structload__task__data.html">load_task_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a></td></tr>
<tr class="separator:a927be688814a3e7c472113954a9d4a3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafb2527c75e25abbb2b0edcbfe437667"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d0/d01/structast__taskprocessor__listener__callbacks.html">ast_taskprocessor_listener_callbacks</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df7/test__taskprocessor_8c.html#aafb2527c75e25abbb2b0edcbfe437667">test_callbacks</a></td></tr>
<tr class="separator:aafb2527c75e25abbb2b0edcbfe437667"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>taskprocessor unit tests </p>
<dl class="section author"><dt>Author</dt><dd>Mark Michelson <a href="#" onclick="location.href='mai'+'lto:'+'mmi'+'ch'+'els'+'on'+'@di'+'gi'+'um.'+'co'+'m'; return false;">mmich<span style="display: none;">.nosp@m.</span>elso<span style="display: none;">.nosp@m.</span>n@dig<span style="display: none;">.nosp@m.</span>ium.<span style="display: none;">.nosp@m.</span>com</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a5424731a2ba7c1532219cd3bfdacc873"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5424731a2ba7c1532219cd3bfdacc873">&#9670;&nbsp;</a></span>HIGH_WATER_MARK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HIGH_WATER_MARK&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00180">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="afb5d1b4ad16d0ee40f5cd585803d6212"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb5d1b4ad16d0ee40f5cd585803d6212">&#9670;&nbsp;</a></span>LOW_WATER_MARK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOW_WATER_MARK&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00180">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="a9e915ae0cd18328d97bb43f3869edc07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e915ae0cd18328d97bb43f3869edc07">&#9670;&nbsp;</a></span>NUM_TASKS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_TASKS&#160;&#160;&#160;20000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00314">314</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00352">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="a92372d74bbec52f23a1a8705b7132201"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92372d74bbec52f23a1a8705b7132201">&#9670;&nbsp;</a></span>TEST_DATA_ARRAY_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEST_DATA_ARRAY_SIZE&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00180">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00990">990</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00990">990</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00990">990</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

</div>
</div>
<a id="a03a1dd615cda9c7142a55588236b8de1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03a1dd615cda9c7142a55588236b8de1">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[1/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">default_taskprocessor&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Baseline test for default taskprocessor. </p>
<p>This test ensures that when a task is added to a taskprocessor that has been allocated with a default listener that the task gets executed as expected </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00132">132</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">ast_taskprocessor_get()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01175">ast_taskprocessor_push()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00088">task()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00064">task_data_create()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00104">task_wait()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00075">TPS_REF_DEFAULT</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *, tps, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> *, <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;default_taskprocessor&quot;</span>;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/taskprocessor/&quot;</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test of default taskproccesor&quot;</span>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;         <span class="stringliteral">&quot;Ensures that a queued task gets executed.&quot;</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   tps = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a>(<span class="stringliteral">&quot;test&quot;</span>, <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a>);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   <span class="keywordflow">if</span> (!tps) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unable to create test taskprocessor\n&quot;</span>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> = <a class="code" href="../../df/df7/test__taskprocessor_8c.html#adc87b87ea4edf62dd7b26fdd9041787b">task_data_create</a>();</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>) {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unable to create task_data\n&quot;</span>);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(tps, <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a>, <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>)) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to queue task\n&quot;</span>);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   res = <a class="code" href="../../df/df7/test__taskprocessor_8c.html#ad016183e7e9c88f88c247b23159fd298">task_wait</a>(<a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   <span class="keywordflow">if</span> (res != 0) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Queued task did not execute!\n&quot;</span>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ac999cc9523590a29dff6acbd9cad24a9"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a></div><div class="ttdeci">struct ast_taskprocessor * ast_taskprocessor_get(const char *name, enum ast_tps_options create)</div><div class="ttdoc">Get a reference to a taskprocessor with the specified name and create the taskprocessor if necessary...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01044">taskprocessor.c:1044</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a></div><div class="ttdoc">return a reference to a taskprocessor, create one if it does not exist </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00075">taskprocessor.h:75</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a07d08fd44ac4a9f8e1319ce270f5d56a"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a></div><div class="ttdeci">static int task(void *data)</div><div class="ttdoc">Queued task for baseline test. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00088">test_taskprocessor.c:88</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_adc87b87ea4edf62dd7b26fdd9041787b"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#adc87b87ea4edf62dd7b26fdd9041787b">task_data_create</a></div><div class="ttdeci">static struct task_data * task_data_create(void)</div><div class="ttdoc">Create a task_data object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00064">test_taskprocessor.c:64</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtask__data_html"><div class="ttname"><a href="../../d1/dd9/structtask__data.html">task_data</a></div><div class="ttdoc">userdata associated with baseline taskprocessor test </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00044">test_taskprocessor.c:44</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_ad016183e7e9c88f88c247b23159fd298"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#ad016183e7e9c88f88c247b23159fd298">task_wait</a></div><div class="ttdeci">static int task_wait(struct task_data *task_data)</div><div class="ttdoc">Wait for a task to execute. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00104">test_taskprocessor.c:104</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a6b2508ba0a6b8f43ae6d3963f3189585"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a></div><div class="ttdeci">int ast_taskprocessor_push(struct ast_taskprocessor *tps, int(*task_exe)(void *datap), void *datap) attribute_warn_unused_result</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01175">taskprocessor.c:1175</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af1fd52514f79ab72aa60c9a3d3b75752"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1fd52514f79ab72aa60c9a3d3b75752">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[2/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Baseline test for subsystem alert. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00180">180</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00819">ast_taskprocessor_alert_get()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00830">ast_taskprocessor_alert_set_levels()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">ast_taskprocessor_get()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00637">ast_taskprocessor_get_subsystem_alert()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01175">ast_taskprocessor_push()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00900">ast_taskprocessor_size()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01185">ast_taskprocessor_suspend()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01196">ast_taskprocessor_unsuspend()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../dc/dce/test__res__pjsip__scheduler_8c_source.html#l00085">data_cleanup()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c.html#a5424731a2ba7c1532219cd3bfdacc873">HIGH_WATER_MARK</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c.html#afb5d1b4ad16d0ee40f5cd585803d6212">LOW_WATER_MARK</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00088">task()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00064">task_data_create()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00104">task_wait()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c.html#a92372d74bbec52f23a1a8705b7132201">TEST_DATA_ARRAY_SIZE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00075">TPS_REF_DEFAULT</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00052">task_data::wait_time</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *, tps, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#define TEST_DATA_ARRAY_SIZE 10</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#define LOW_WATER_MARK 3</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">#define HIGH_WATER_MARK 6</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> *<a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>[(<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a92372d74bbec52f23a1a8705b7132201">TEST_DATA_ARRAY_SIZE</a> + 1)] = { 0 };</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   <span class="keywordtype">long</span> queue_count;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> alert_level;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> subsystem_alert_level;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;subsystem_alert&quot;</span>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/taskprocessor/&quot;</span>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test of subsystem alerts&quot;</span>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;         <span class="stringliteral">&quot;Ensures alerts are generated properly.&quot;</span>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   tps = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a>(<span class="stringliteral">&quot;test_subsystem/test&quot;</span>, <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a>);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keywordflow">if</span> (!tps) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unable to create test taskprocessor\n&quot;</span>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ad4d9150df7126ae11064d38c755d0813">ast_taskprocessor_alert_set_levels</a>(tps, <a class="code" href="../../df/df7/test__taskprocessor_8c.html#afb5d1b4ad16d0ee40f5cd585803d6212">LOW_WATER_MARK</a>, <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a5424731a2ba7c1532219cd3bfdacc873">HIGH_WATER_MARK</a>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#aeea7131da6b62d2e9b5d91c5de529d6c">ast_taskprocessor_suspend</a>(tps);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <span class="keywordflow">for</span> (i = 1; i &lt;= <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a92372d74bbec52f23a1a8705b7132201">TEST_DATA_ARRAY_SIZE</a>; i++) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>[i] = <a class="code" href="../../df/df7/test__taskprocessor_8c.html#adc87b87ea4edf62dd7b26fdd9041787b">task_data_create</a>();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>[i]) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unable to create task_data\n&quot;</span>);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;         res = -1;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../dc/dce/test__res__pjsip__scheduler_8c.html#abbcb88eb51aa14eb1017635c81e191df">data_cleanup</a>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>[i]-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#a64d5d234d9fdb1e2cd789853c79c554e">wait_time</a> = 500;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Pushing task %d\n&quot;</span>, i);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(tps, <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a>, <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>[i])) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to queue task\n&quot;</span>);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;         res = -1;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../dc/dce/test__res__pjsip__scheduler_8c.html#abbcb88eb51aa14eb1017635c81e191df">data_cleanup</a>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      queue_count = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a83d09062fb3c84cf1c84a04174deb2bf">ast_taskprocessor_size</a>(tps);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      alert_level = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a44bed16d2b07a7dc2bbb0134372acfb7">ast_taskprocessor_alert_get</a>();</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      subsystem_alert_level = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#aaee66f3c01dde2a5c3762c0f30581563">ast_taskprocessor_get_subsystem_alert</a>(<span class="stringliteral">&quot;test_subsystem&quot;</span>);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordflow">if</span> (queue_count == <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a5424731a2ba7c1532219cd3bfdacc873">HIGH_WATER_MARK</a>) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;         <span class="keywordflow">if</span> (subsystem_alert_level) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Subsystem alert triggered correctly at %ld\n&quot;</span>, queue_count);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;         }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;         <span class="keywordflow">if</span> (alert_level) {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Global alert triggered correctly at %ld\n&quot;</span>, queue_count);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;         }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (queue_count &lt; <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a5424731a2ba7c1532219cd3bfdacc873">HIGH_WATER_MARK</a>) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;         <span class="keywordflow">if</span> (subsystem_alert_level &gt; 0) {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Subsystem alert triggered unexpectedly at %ld\n&quot;</span>, queue_count);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            res = -1;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;         }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;         <span class="keywordflow">if</span> (alert_level &gt; 0) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Global alert triggered unexpectedly at %ld\n&quot;</span>, queue_count);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            res = -1;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;         }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;         <span class="keywordflow">if</span> (subsystem_alert_level == 0) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Subsystem alert failed to trigger at %ld\n&quot;</span>, queue_count);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            res = -1;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;         }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;         <span class="keywordflow">if</span> (alert_level == 0) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Global alert failed to trigger at %ld\n&quot;</span>, queue_count);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            res = -1;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;         }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a8460a4b877658e3c2a6abbafcfa4c54c">ast_taskprocessor_unsuspend</a>(tps);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   <span class="keywordflow">for</span> (i = 1; i &lt;= <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a92372d74bbec52f23a1a8705b7132201">TEST_DATA_ARRAY_SIZE</a>; i++) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Waiting on task %d\n&quot;</span>, i);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/df7/test__taskprocessor_8c.html#ad016183e7e9c88f88c247b23159fd298">task_wait</a>(<a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>[i])) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Queued task &#39;%d&#39; did not execute!\n&quot;</span>, i);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;         res = -1;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../dc/dce/test__res__pjsip__scheduler_8c.html#abbcb88eb51aa14eb1017635c81e191df">data_cleanup</a>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      queue_count = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a83d09062fb3c84cf1c84a04174deb2bf">ast_taskprocessor_size</a>(tps);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      alert_level = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a44bed16d2b07a7dc2bbb0134372acfb7">ast_taskprocessor_alert_get</a>();</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      subsystem_alert_level = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#aaee66f3c01dde2a5c3762c0f30581563">ast_taskprocessor_get_subsystem_alert</a>(<span class="stringliteral">&quot;test_subsystem&quot;</span>);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">if</span> (queue_count == <a class="code" href="../../df/df7/test__taskprocessor_8c.html#afb5d1b4ad16d0ee40f5cd585803d6212">LOW_WATER_MARK</a>) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;         <span class="keywordflow">if</span> (!subsystem_alert_level) {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Subsystem alert cleared correctly at %ld\n&quot;</span>, queue_count);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;         }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;         <span class="keywordflow">if</span> (!alert_level) {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Global alert cleared correctly at %ld\n&quot;</span>, queue_count);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;         }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (queue_count &gt; <a class="code" href="../../df/df7/test__taskprocessor_8c.html#afb5d1b4ad16d0ee40f5cd585803d6212">LOW_WATER_MARK</a>) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;         <span class="keywordflow">if</span> (subsystem_alert_level == 0) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Subsystem alert cleared unexpectedly at %ld\n&quot;</span>, queue_count);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            res = -1;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;         }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;         <span class="keywordflow">if</span> (alert_level == 0) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Global alert cleared unexpectedly at %ld\n&quot;</span>, queue_count);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            res = -1;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;         }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;         <span class="keywordflow">if</span> (subsystem_alert_level &gt; 0) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Subsystem alert failed to clear at %ld\n&quot;</span>, queue_count);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            res = -1;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;         }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;         <span class="keywordflow">if</span> (alert_level &gt; 0) {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Global alert failed to clear at %ld\n&quot;</span>, queue_count);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            res = -1;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;         }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<a class="code" href="../../dc/dce/test__res__pjsip__scheduler_8c.html#abbcb88eb51aa14eb1017635c81e191df">data_cleanup</a>:</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <span class="keywordflow">for</span> (i = 1; i &lt;= <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a92372d74bbec52f23a1a8705b7132201">TEST_DATA_ARRAY_SIZE</a>; i++) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>[i]);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <span class="keywordflow">return</span> res ? <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a> : <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div><div class="ttc" id="structtask__data_html_a64d5d234d9fdb1e2cd789853c79c554e"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#a64d5d234d9fdb1e2cd789853c79c554e">task_data::wait_time</a></div><div class="ttdeci">unsigned long wait_time</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00052">test_taskprocessor.c:52</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a83d09062fb3c84cf1c84a04174deb2bf"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a83d09062fb3c84cf1c84a04174deb2bf">ast_taskprocessor_size</a></div><div class="ttdeci">long ast_taskprocessor_size(struct ast_taskprocessor *tps)</div><div class="ttdoc">Return the current size of the taskprocessor queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00900">taskprocessor.c:900</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ac999cc9523590a29dff6acbd9cad24a9"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a></div><div class="ttdeci">struct ast_taskprocessor * ast_taskprocessor_get(const char *name, enum ast_tps_options create)</div><div class="ttdoc">Get a reference to a taskprocessor with the specified name and create the taskprocessor if necessary...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01044">taskprocessor.c:1044</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a92372d74bbec52f23a1a8705b7132201"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a92372d74bbec52f23a1a8705b7132201">TEST_DATA_ARRAY_SIZE</a></div><div class="ttdeci">#define TEST_DATA_ARRAY_SIZE</div></div>
<div class="ttc" id="taskprocessor_8h_html_a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a></div><div class="ttdoc">return a reference to a taskprocessor, create one if it does not exist </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00075">taskprocessor.h:75</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ad4d9150df7126ae11064d38c755d0813"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ad4d9150df7126ae11064d38c755d0813">ast_taskprocessor_alert_set_levels</a></div><div class="ttdeci">int ast_taskprocessor_alert_set_levels(struct ast_taskprocessor *tps, long low_water, long high_water)</div><div class="ttdoc">Set the high and low alert water marks of the given taskprocessor queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00830">taskprocessor.c:830</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a07d08fd44ac4a9f8e1319ce270f5d56a"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a></div><div class="ttdeci">static int task(void *data)</div><div class="ttdoc">Queued task for baseline test. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00088">test_taskprocessor.c:88</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_aeea7131da6b62d2e9b5d91c5de529d6c"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#aeea7131da6b62d2e9b5d91c5de529d6c">ast_taskprocessor_suspend</a></div><div class="ttdeci">int ast_taskprocessor_suspend(struct ast_taskprocessor *tps)</div><div class="ttdoc">Indicate the taskprocessor is suspended. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01185">taskprocessor.c:1185</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a5424731a2ba7c1532219cd3bfdacc873"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a5424731a2ba7c1532219cd3bfdacc873">HIGH_WATER_MARK</a></div><div class="ttdeci">#define HIGH_WATER_MARK</div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a8460a4b877658e3c2a6abbafcfa4c54c"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a8460a4b877658e3c2a6abbafcfa4c54c">ast_taskprocessor_unsuspend</a></div><div class="ttdeci">int ast_taskprocessor_unsuspend(struct ast_taskprocessor *tps)</div><div class="ttdoc">Indicate the taskprocessor is unsuspended. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01196">taskprocessor.c:1196</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_adc87b87ea4edf62dd7b26fdd9041787b"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#adc87b87ea4edf62dd7b26fdd9041787b">task_data_create</a></div><div class="ttdeci">static struct task_data * task_data_create(void)</div><div class="ttdoc">Create a task_data object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00064">test_taskprocessor.c:64</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_aaee66f3c01dde2a5c3762c0f30581563"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#aaee66f3c01dde2a5c3762c0f30581563">ast_taskprocessor_get_subsystem_alert</a></div><div class="ttdeci">unsigned int ast_taskprocessor_get_subsystem_alert(const char *subsystem)</div><div class="ttdoc">Get the current taskprocessor high water alert count by sybsystem. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00637">taskprocessor.c:637</a></div></div>
<div class="ttc" id="structtask__data_html"><div class="ttname"><a href="../../d1/dd9/structtask__data.html">task_data</a></div><div class="ttdoc">userdata associated with baseline taskprocessor test </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00044">test_taskprocessor.c:44</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_ad016183e7e9c88f88c247b23159fd298"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#ad016183e7e9c88f88c247b23159fd298">task_wait</a></div><div class="ttdeci">static int task_wait(struct task_data *task_data)</div><div class="ttdoc">Wait for a task to execute. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00104">test_taskprocessor.c:104</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_afb5d1b4ad16d0ee40f5cd585803d6212"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#afb5d1b4ad16d0ee40f5cd585803d6212">LOW_WATER_MARK</a></div><div class="ttdeci">#define LOW_WATER_MARK</div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a6b2508ba0a6b8f43ae6d3963f3189585"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a></div><div class="ttdeci">int ast_taskprocessor_push(struct ast_taskprocessor *tps, int(*task_exe)(void *datap), void *datap) attribute_warn_unused_result</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01175">taskprocessor.c:1175</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a44bed16d2b07a7dc2bbb0134372acfb7"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a44bed16d2b07a7dc2bbb0134372acfb7">ast_taskprocessor_alert_get</a></div><div class="ttdeci">unsigned int ast_taskprocessor_alert_get(void)</div><div class="ttdoc">Get the current taskprocessor high water alert count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00819">taskprocessor.c:819</a></div></div>
<div class="ttc" id="test__res__pjsip__scheduler_8c_html_abbcb88eb51aa14eb1017635c81e191df"><div class="ttname"><a href="../../dc/dce/test__res__pjsip__scheduler_8c.html#abbcb88eb51aa14eb1017635c81e191df">data_cleanup</a></div><div class="ttdeci">static void data_cleanup(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dce/test__res__pjsip__scheduler_8c_source.html#l00085">test_res_pjsip_scheduler.c:85</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a521d49a58fcae27acf79fc62f6257d49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a521d49a58fcae27acf79fc62f6257d49">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[3/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">default_taskprocessor_load&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load test for taskprocessor with default listener. </p>
<p>This test queues a large number of tasks, each with random data associated. The test ensures that all of the tasks are run and that the tasks are executed in the same order that they were queued </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00352">352</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">ast_taskprocessor_get()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01175">ast_taskprocessor_push()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00321">load_task_data::cond</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00336">load_task()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00323">load_task_data::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00314">NUM_TASKS</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00327">load_task_data::task_rand</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00325">load_task_data::tasks_completed</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00075">TPS_REF_DEFAULT</a>.</p>
<div class="fragment"><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;{</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   <span class="keyword">struct </span>timespec ts;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <span class="keywordtype">int</span> timedwait_res;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="keywordtype">int</span> rand_data[<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a9e915ae0cd18328d97bb43f3869edc07">NUM_TASKS</a>];</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;default_taskprocessor_load&quot;</span>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/taskprocessor/&quot;</span>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Load test of default taskproccesor&quot;</span>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;         <span class="stringliteral">&quot;Ensure that a large number of queued tasks are executed in the proper order.&quot;</span>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   tps = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a>(<span class="stringliteral">&quot;test&quot;</span>, <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <span class="keywordflow">if</span> (!tps) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unable to create test taskprocessor\n&quot;</span>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   ts.tv_sec = start.tv_sec + 60;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   ts.tv_nsec = start.tv_usec * 1000;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#a0bbcf6473b4e3035d57b5ddf9a643159">tasks_completed</a> = 0;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a9e915ae0cd18328d97bb43f3869edc07">NUM_TASKS</a>; ++i) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      rand_data[i] = <a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>();</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(tps, <a class="code" href="../../df/df7/test__taskprocessor_8c.html#ae5e6253c52f6e8dae40bb36fdcbf3f13">load_task</a>, &amp;rand_data[i])) {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to queue task\n&quot;</span>);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;         <span class="keywordflow">goto</span> test_end;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#a0bbcf6473b4e3035d57b5ddf9a643159">tasks_completed</a> &lt; NUM_TASKS) {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      timedwait_res = <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, &amp;<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;ts);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="keywordflow">if</span> (timedwait_res == ETIMEDOUT) {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#a0bbcf6473b4e3035d57b5ddf9a643159">tasks_completed</a> != NUM_TASKS) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unexpected number of tasks executed. Expected %d but got %d\n&quot;</span>,</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            NUM_TASKS, <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#a0bbcf6473b4e3035d57b5ddf9a643159">tasks_completed</a>);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keywordflow">goto</span> test_end;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a9e915ae0cd18328d97bb43f3869edc07">NUM_TASKS</a>; ++i) {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">if</span> (rand_data[i] != <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#aeee97a3dc992e84b92e54522f7986cc9">task_rand</a>[i]) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Queued tasks did not execute in order\n&quot;</span>);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;         <span class="keywordflow">goto</span> test_end;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   }</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;test_end:</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   tps = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(tps);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div><div class="ttc" id="test__taskprocessor_8c_html_ae5e6253c52f6e8dae40bb36fdcbf3f13"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#ae5e6253c52f6e8dae40bb36fdcbf3f13">load_task</a></div><div class="ttdeci">static int load_task(void *data)</div><div class="ttdoc">a queued task to be used in the taskprocessor load test </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00336">test_taskprocessor.c:336</a></div></div>
<div class="ttc" id="structload__task__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d5/d7e/structload__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">load_task_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00321">test_taskprocessor.c:321</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ac999cc9523590a29dff6acbd9cad24a9"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a></div><div class="ttdeci">struct ast_taskprocessor * ast_taskprocessor_get(const char *name, enum ast_tps_options create)</div><div class="ttdoc">Get a reference to a taskprocessor with the specified name and create the taskprocessor if necessary...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01044">taskprocessor.c:1044</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a></div><div class="ttdoc">return a reference to a taskprocessor, create one if it does not exist </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00075">taskprocessor.h:75</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
<div class="ttc" id="structload__task__data_html_a0bbcf6473b4e3035d57b5ddf9a643159"><div class="ttname"><a href="../../d5/d7e/structload__task__data.html#a0bbcf6473b4e3035d57b5ddf9a643159">load_task_data::tasks_completed</a></div><div class="ttdeci">int tasks_completed</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00325">test_taskprocessor.c:325</a></div></div>
<div class="ttc" id="structload__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/d7e/structload__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">load_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00323">test_taskprocessor.c:323</a></div></div>
<div class="ttc" id="structload__task__data_html_aeee97a3dc992e84b92e54522f7986cc9"><div class="ttname"><a href="../../d5/d7e/structload__task__data.html#aeee97a3dc992e84b92e54522f7986cc9">load_task_data::task_rand</a></div><div class="ttdeci">int task_rand[NUM_TASKS]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00327">test_taskprocessor.c:327</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a6b2508ba0a6b8f43ae6d3963f3189585"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a></div><div class="ttdeci">int ast_taskprocessor_push(struct ast_taskprocessor *tps, int(*task_exe)(void *datap), void *datap) attribute_warn_unused_result</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01175">taskprocessor.c:1175</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a9e915ae0cd18328d97bb43f3869edc07"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a9e915ae0cd18328d97bb43f3869edc07">NUM_TASKS</a></div><div class="ttdeci">#define NUM_TASKS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00314">test_taskprocessor.c:314</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a927be688814a3e7c472113954a9d4a3b"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a></div><div class="ttdeci">static struct load_task_data load_task_results</div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f643b9e0a85b14f15409086f290dfbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f643b9e0a85b14f15409086f290dfbf">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[4/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">taskprocessor_listener&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test for a taskprocessor with custom listener. </p>
<p>This test pushes tasks to a taskprocessor with a custom listener, executes the taskss, and destroys the taskprocessor.</p>
<p>The test ensures that the listener's callbacks are called when expected and that the data being passed in is accurate. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00555">555</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01083">ast_taskprocessor_create_with_listener()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01212">ast_taskprocessor_execute()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00930">ast_taskprocessor_listener_alloc()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01175">ast_taskprocessor_push()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00523">check_stats()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00507">listener_test_task()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00441">test_listener_pvt::shutdown</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00447">test_listener_pvt_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;{</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d1b/structtest__listener__pvt.html">test_listener_pvt</a> *pvt = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;taskprocessor_listener&quot;</span>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/taskprocessor/&quot;</span>;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test of taskproccesor listeners&quot;</span>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;         <span class="stringliteral">&quot;Ensures that listener callbacks are called when expected.&quot;</span>;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   pvt = <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a2cb39f2eee9c8af6648ddc31b3bbedc6">test_listener_pvt_alloc</a>();</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordflow">if</span> (!pvt) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unable to allocate test taskprocessor listener user data\n&quot;</span>);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   listener = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ad7d5e40a1f7eac54dcad096b90d013bd">ast_taskprocessor_listener_alloc</a>(&amp;<a class="code" href="../../df/df7/test__taskprocessor_8c.html#aafb2527c75e25abbb2b0edcbfe437667">test_callbacks</a>, pvt);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unable to allocate test taskprocessor listener\n&quot;</span>);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordflow">goto</span> test_exit;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   tps = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ab79575eb73e817bd3afe77c87308e8be">ast_taskprocessor_create_with_listener</a>(<span class="stringliteral">&quot;test_listener&quot;</span>, listener);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <span class="keywordflow">if</span> (!tps) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unable to allocate test taskprocessor\n&quot;</span>);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <span class="keywordflow">goto</span> test_exit;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(tps, <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a0a6c0e5128bbc626df82ada245e04bf2">listener_test_task</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to queue task\n&quot;</span>);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="keywordflow">goto</span> test_exit;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a4605bce14dbcef58aa8784b55eff8aeb">check_stats</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, pvt, 1, 0, 1) &lt; 0) {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keywordflow">goto</span> test_exit;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(tps, <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a0a6c0e5128bbc626df82ada245e04bf2">listener_test_task</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to queue task\n&quot;</span>);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="keywordflow">goto</span> test_exit;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a4605bce14dbcef58aa8784b55eff8aeb">check_stats</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, pvt, 2, 0, 1) &lt; 0) {</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="keywordflow">goto</span> test_exit;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   }</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a9318e041c0564532581e864cda8f9426">ast_taskprocessor_execute</a>(tps);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a4605bce14dbcef58aa8784b55eff8aeb">check_stats</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, pvt, 2, 0, 1) &lt; 0) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="keywordflow">goto</span> test_exit;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   }</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a9318e041c0564532581e864cda8f9426">ast_taskprocessor_execute</a>(tps);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a4605bce14dbcef58aa8784b55eff8aeb">check_stats</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, pvt, 2, 1, 1) &lt; 0) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">goto</span> test_exit;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   tps = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(tps);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <span class="keywordflow">if</span> (!pvt-&gt;<a class="code" href="../../da/d1b/structtest__listener__pvt.html#a5161d377a61befc3f8103e794d5cb582">shutdown</a>) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordflow">goto</span> test_exit;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   }</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;test_exit:</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   <span class="comment">/* This is safe even if tps is NULL */</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(tps);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(pvt);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;}</div><div class="ttc" id="structast__taskprocessor__listener_html"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a></div><div class="ttdoc">A listener for taskprocessors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00110">taskprocessor.c:110</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a4605bce14dbcef58aa8784b55eff8aeb"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a4605bce14dbcef58aa8784b55eff8aeb">check_stats</a></div><div class="ttdeci">static int check_stats(struct ast_test *test, const struct test_listener_pvt *pvt, int num_pushed, int num_emptied, int num_was_empty)</div><div class="ttdoc">helper to ensure that statistics the listener is keeping are what we expect </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00523">test_taskprocessor.c:523</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_aafb2527c75e25abbb2b0edcbfe437667"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#aafb2527c75e25abbb2b0edcbfe437667">test_callbacks</a></div><div class="ttdeci">static const struct ast_taskprocessor_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00495">test_taskprocessor.c:495</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a9318e041c0564532581e864cda8f9426"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a9318e041c0564532581e864cda8f9426">ast_taskprocessor_execute</a></div><div class="ttdeci">int ast_taskprocessor_execute(struct ast_taskprocessor *tps)</div><div class="ttdoc">Pop a task off the taskprocessor and execute it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01212">taskprocessor.c:1212</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a0a6c0e5128bbc626df82ada245e04bf2"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a0a6c0e5128bbc626df82ada245e04bf2">listener_test_task</a></div><div class="ttdeci">static int listener_test_task(void *ignore)</div><div class="ttdoc">Queued task for taskprocessor listener test. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00507">test_taskprocessor.c:507</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a2cb39f2eee9c8af6648ddc31b3bbedc6"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a2cb39f2eee9c8af6648ddc31b3bbedc6">test_listener_pvt_alloc</a></div><div class="ttdeci">static void * test_listener_pvt_alloc(void)</div><div class="ttdoc">test taskprocessor listener&amp;#39;s alloc callback </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00447">test_taskprocessor.c:447</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ad7d5e40a1f7eac54dcad096b90d013bd"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ad7d5e40a1f7eac54dcad096b90d013bd">ast_taskprocessor_listener_alloc</a></div><div class="ttdeci">struct ast_taskprocessor_listener * ast_taskprocessor_listener_alloc(const struct ast_taskprocessor_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a taskprocessor listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00930">taskprocessor.c:930</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a6b2508ba0a6b8f43ae6d3963f3189585"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a></div><div class="ttdeci">int ast_taskprocessor_push(struct ast_taskprocessor *tps, int(*task_exe)(void *datap), void *datap) attribute_warn_unused_result</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01175">taskprocessor.c:1175</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ab79575eb73e817bd3afe77c87308e8be"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ab79575eb73e817bd3afe77c87308e8be">ast_taskprocessor_create_with_listener</a></div><div class="ttdeci">struct ast_taskprocessor * ast_taskprocessor_create_with_listener(const char *name, struct ast_taskprocessor_listener *listener)</div><div class="ttdoc">Create a taskprocessor with a custom listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01083">taskprocessor.c:1083</a></div></div>
<div class="ttc" id="structtest__listener__pvt_html_a5161d377a61befc3f8103e794d5cb582"><div class="ttname"><a href="../../da/d1b/structtest__listener__pvt.html#a5161d377a61befc3f8103e794d5cb582">test_listener_pvt::shutdown</a></div><div class="ttdeci">int shutdown</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00441">test_taskprocessor.c:441</a></div></div>
<div class="ttc" id="structtest__listener__pvt_html"><div class="ttname"><a href="../../da/d1b/structtest__listener__pvt.html">test_listener_pvt</a></div><div class="ttdoc">Private data for the test taskprocessor listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00433">test_taskprocessor.c:433</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa774bb0b88a2ba80aea8f67eec4b8d31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa774bb0b88a2ba80aea8f67eec4b8d31">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[5/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">taskprocessor_shutdown&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00749">749</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00559">ast_pthread_create</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">ast_taskprocessor_get()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01175">ast_taskprocessor_push()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00662">shutdown_data_create()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00711">shutdown_has_completed()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00735">shutdown_poke()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00679">shutdown_task_exec()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00693">shutdown_waitfor_completion()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00717">shutdown_waitfor_start()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00075">TPS_REF_DEFAULT</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00742">tps_shutdown_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;{</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *, tps, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *, task1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *, task2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   <span class="keywordtype">int</span> push_res;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   <span class="keywordtype">int</span> wait_res;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <span class="keywordtype">int</span> pthread_res;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   pthread_t shutdown_thread;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;taskprocessor_shutdown&quot;</span>;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/taskprocessor/&quot;</span>;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test of taskproccesor shutdown sequence&quot;</span>;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;         <span class="stringliteral">&quot;Ensures that all tasks run to completion after the taskprocessor has been unref&#39;ed.&quot;</span>;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   tps = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a>(<span class="stringliteral">&quot;test_shutdown&quot;</span>, <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a>);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   task1 = <a class="code" href="../../df/df7/test__taskprocessor_8c.html#ab266c6197d908bb717eb91b241d9e12b">shutdown_data_create</a>(0); <span class="comment">/* task1 waits to be poked */</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   task2 = <a class="code" href="../../df/df7/test__taskprocessor_8c.html#ab266c6197d908bb717eb91b241d9e12b">shutdown_data_create</a>(1); <span class="comment">/* task2 waits for nothing */</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   <span class="keywordflow">if</span> (!tps || !task1 || !task2) {</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Allocation error\n&quot;</span>);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   }</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   push_res = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(tps, <a class="code" href="../../df/df7/test__taskprocessor_8c.html#abcc924bbfd9775752cc3da6223352b27">shutdown_task_exec</a>, task1);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <span class="keywordflow">if</span> (push_res != 0) {</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Could not push task1\n&quot;</span>);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   }</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   push_res = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(tps, <a class="code" href="../../df/df7/test__taskprocessor_8c.html#abcc924bbfd9775752cc3da6223352b27">shutdown_task_exec</a>, task2);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <span class="keywordflow">if</span> (push_res != 0) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Could not push task2\n&quot;</span>);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   }</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   wait_res = <a class="code" href="../../df/df7/test__taskprocessor_8c.html#ae13fafbef95e744b868d6cf289104903">shutdown_waitfor_start</a>(task1);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   <span class="keywordflow">if</span> (!wait_res) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Task1 didn&#39;t start\n&quot;</span>);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   pthread_res = <a class="code" href="../../d5/d60/utils_8h.html#a4781fd54a4ca8c7f0f8a32a6cce503c0">ast_pthread_create</a>(&amp;shutdown_thread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a0041b90fab7718c2319a6f312a55073e">tps_shutdown_thread</a>, tps);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   <span class="keywordflow">if</span> (pthread_res != 0) {</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to create shutdown thread\n&quot;</span>);</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   }</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   tps = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   <span class="comment">/* Wakeup task1; it should complete */</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <a class="code" href="../../df/df7/test__taskprocessor_8c.html#aaeaabd813fd35e0a491dabf212f34360">shutdown_poke</a>(task1);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   wait_res = <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a77de98d59d68146fbda672966d0a4e09">shutdown_waitfor_completion</a>(task1);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   <span class="keywordflow">if</span> (!wait_res) {</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Task1 didn&#39;t complete\n&quot;</span>);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <span class="comment">/* Wait for shutdown to complete */</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   pthread_join(shutdown_thread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   <span class="comment">/* Should have also completed task2 */</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   wait_res = <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a74b112be1280ce22266afacfe0b8893b">shutdown_has_completed</a>(task2);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keywordflow">if</span> (!wait_res) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Task2 didn&#39;t finish\n&quot;</span>);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   }</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div><div class="ttc" id="test__taskprocessor_8c_html_aaeaabd813fd35e0a491dabf212f34360"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#aaeaabd813fd35e0a491dabf212f34360">shutdown_poke</a></div><div class="ttdeci">static void shutdown_poke(struct shutdown_data *shutdown_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00735">test_taskprocessor.c:735</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_abcc924bbfd9775752cc3da6223352b27"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#abcc924bbfd9775752cc3da6223352b27">shutdown_task_exec</a></div><div class="ttdeci">static int shutdown_task_exec(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00679">test_taskprocessor.c:679</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a77de98d59d68146fbda672966d0a4e09"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a77de98d59d68146fbda672966d0a4e09">shutdown_waitfor_completion</a></div><div class="ttdeci">static int shutdown_waitfor_completion(struct shutdown_data *shutdown_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00693">test_taskprocessor.c:693</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ac999cc9523590a29dff6acbd9cad24a9"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a></div><div class="ttdeci">struct ast_taskprocessor * ast_taskprocessor_get(const char *name, enum ast_tps_options create)</div><div class="ttdoc">Get a reference to a taskprocessor with the specified name and create the taskprocessor if necessary...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01044">taskprocessor.c:1044</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a></div><div class="ttdoc">return a reference to a taskprocessor, create one if it does not exist </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00075">taskprocessor.h:75</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a74b112be1280ce22266afacfe0b8893b"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a74b112be1280ce22266afacfe0b8893b">shutdown_has_completed</a></div><div class="ttdeci">static int shutdown_has_completed(struct shutdown_data *shutdown_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00711">test_taskprocessor.c:711</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a0041b90fab7718c2319a6f312a55073e"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a0041b90fab7718c2319a6f312a55073e">tps_shutdown_thread</a></div><div class="ttdeci">static void * tps_shutdown_thread(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00742">test_taskprocessor.c:742</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_ab266c6197d908bb717eb91b241d9e12b"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#ab266c6197d908bb717eb91b241d9e12b">shutdown_data_create</a></div><div class="ttdeci">static struct shutdown_data * shutdown_data_create(int dont_wait)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00662">test_taskprocessor.c:662</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="utils_8h_html_a4781fd54a4ca8c7f0f8a32a6cce503c0"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4781fd54a4ca8c7f0f8a32a6cce503c0">ast_pthread_create</a></div><div class="ttdeci">#define ast_pthread_create(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00559">utils.h:559</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_ae13fafbef95e744b868d6cf289104903"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#ae13fafbef95e744b868d6cf289104903">shutdown_waitfor_start</a></div><div class="ttdeci">static int shutdown_waitfor_start(struct shutdown_data *shutdown_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00717">test_taskprocessor.c:717</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a6b2508ba0a6b8f43ae6d3963f3189585"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a></div><div class="ttdeci">int ast_taskprocessor_push(struct ast_taskprocessor *tps, int(*task_exe)(void *datap), void *datap) attribute_warn_unused_result</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01175">taskprocessor.c:1175</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="structshutdown__data_html"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html">shutdown_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00645">test_taskprocessor.c:645</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a27a71d2ec694b2b6e9602cdda916cd72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27a71d2ec694b2b6e9602cdda916cd72">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[6/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">taskprocessor_push_local&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00837">837</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">ast_taskprocessor_get()</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h.html#a6d7049467cda8b796bff04ce8bba34b5">ast_taskprocessor_push_local()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01101">ast_taskprocessor_set_local()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00826">local_task_exe()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00064">task_data_create()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00104">task_wait()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00075">TPS_REF_DEFAULT</a>.</p>
<div class="fragment"><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;{</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *, tps, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> *, <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   <span class="keywordtype">int</span> local_data;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/taskprocessor/&quot;</span>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test of pushing local data&quot;</span>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;         <span class="stringliteral">&quot;Ensures that local data is passed along.&quot;</span>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   }</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   tps = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a>(<span class="stringliteral">&quot;test&quot;</span>, <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a>);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   <span class="keywordflow">if</span> (!tps) {</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unable to create test taskprocessor\n&quot;</span>);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   }</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> = <a class="code" href="../../df/df7/test__taskprocessor_8c.html#adc87b87ea4edf62dd7b26fdd9041787b">task_data_create</a>();</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>) {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unable to create task_data\n&quot;</span>);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   }</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   local_data = 0;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a208c9f9b930e83c7bdb833c66f13d5e8">ast_taskprocessor_set_local</a>(tps, &amp;local_data);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6d7049467cda8b796bff04ce8bba34b5">ast_taskprocessor_push_local</a>(tps, <a class="code" href="../../df/df7/test__taskprocessor_8c.html#acf9fb63ed75f9452595c26defc93771e">local_task_exe</a>, <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>)) {</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to queue task\n&quot;</span>);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   }</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   res = <a class="code" href="../../df/df7/test__taskprocessor_8c.html#ad016183e7e9c88f88c247b23159fd298">task_wait</a>(<a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;   <span class="keywordflow">if</span> (res != 0) {</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Queued task did not execute!\n&quot;</span>);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;   <span class="keywordflow">if</span> (local_data != 1) {</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>,</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;         <span class="stringliteral">&quot;Queued task did not set local_data!\n&quot;</span>);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   }</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ac999cc9523590a29dff6acbd9cad24a9"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a></div><div class="ttdeci">struct ast_taskprocessor * ast_taskprocessor_get(const char *name, enum ast_tps_options create)</div><div class="ttdoc">Get a reference to a taskprocessor with the specified name and create the taskprocessor if necessary...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01044">taskprocessor.c:1044</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a></div><div class="ttdoc">return a reference to a taskprocessor, create one if it does not exist </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00075">taskprocessor.h:75</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_acf9fb63ed75f9452595c26defc93771e"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#acf9fb63ed75f9452595c26defc93771e">local_task_exe</a></div><div class="ttdeci">static int local_task_exe(struct ast_taskprocessor_local *local)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00826">test_taskprocessor.c:826</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_adc87b87ea4edf62dd7b26fdd9041787b"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#adc87b87ea4edf62dd7b26fdd9041787b">task_data_create</a></div><div class="ttdeci">static struct task_data * task_data_create(void)</div><div class="ttdoc">Create a task_data object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00064">test_taskprocessor.c:64</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a6d7049467cda8b796bff04ce8bba34b5"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6d7049467cda8b796bff04ce8bba34b5">ast_taskprocessor_push_local</a></div><div class="ttdeci">int ast_taskprocessor_push_local(struct ast_taskprocessor *tps, int(*task_exe)(struct ast_taskprocessor_local *local), void *datap) attribute_warn_unused_result</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div></div>
<div class="ttc" id="structtask__data_html"><div class="ttname"><a href="../../d1/dd9/structtask__data.html">task_data</a></div><div class="ttdoc">userdata associated with baseline taskprocessor test </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00044">test_taskprocessor.c:44</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_ad016183e7e9c88f88c247b23159fd298"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#ad016183e7e9c88f88c247b23159fd298">task_wait</a></div><div class="ttdeci">static int task_wait(struct task_data *task_data)</div><div class="ttdoc">Wait for a task to execute. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00104">test_taskprocessor.c:104</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a208c9f9b930e83c7bdb833c66f13d5e8"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a208c9f9b930e83c7bdb833c66f13d5e8">ast_taskprocessor_set_local</a></div><div class="ttdeci">void ast_taskprocessor_set_local(struct ast_taskprocessor *tps, void *local_data)</div><div class="ttdoc">Sets the local data associated with a taskprocessor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01101">taskprocessor.c:1101</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c03845da579f03155eb6516e20d81cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c03845da579f03155eb6516e20d81cc">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[7/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">serializer_pool&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Baseline test for a serializer pool. </p>
<p>This test ensures that when a task is added to a taskprocessor that has been allocated with a default listener that the task gets executed as expected </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00901">901</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00076">ast_serializer_pool_create()</a>, <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00039">ast_serializer_pool_destroy()</a>, <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00127">ast_serializer_pool_get()</a>, <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00122">ast_serializer_pool_name()</a>, <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00156">ast_serializer_pool_set_alerts()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01175">ast_taskprocessor_push()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00088">task()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00064">task_data_create()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00104">task_wait()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l00086">threadpool</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00052">task_data::wait_time</a>.</p>
<div class="fragment"><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;{</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *, <a class="code" href="../../d7/d69/sorcery_8c.html#a6dc11fc8f94173cc1af379b74a096abd">threadpool</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d08/structast__serializer__pool.html">ast_serializer_pool</a> *, serializer_pool, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d5f/serializer_8h.html#ab24a7208f10fe9bed74475a531f8881e">ast_serializer_pool_destroy</a>);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> *, <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      .initial_size = 1,</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      .max_size = 0,</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   };</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   <span class="comment">/* struct ast_taskprocessor *tps; */</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;serializer_pool&quot;</span>;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/taskprocessor/&quot;</span>;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test using a serializer pool&quot;</span>;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;         <span class="stringliteral">&quot;Ensures that a queued task gets executed.&quot;</span>;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d7/d69/sorcery_8c.html#a6dc11fc8f94173cc1af379b74a096abd">threadpool</a> = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<span class="stringliteral">&quot;test&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;options));</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, serializer_pool = <a class="code" href="../../dd/d5f/serializer_8h.html#a59e92ce84852e313b5e3a0dae1ddba4d">ast_serializer_pool_create</a>(</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                    <span class="stringliteral">&quot;test/test&quot;</span>, 5, <a class="code" href="../../d7/d69/sorcery_8c.html#a6dc11fc8f94173cc1af379b74a096abd">threadpool</a>, 2)); <span class="comment">/* 2 second shutdown group time out */</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(<a class="code" href="../../dd/d5f/serializer_8h.html#a9021aba9b9c86fe4f3c652b56a8315a3">ast_serializer_pool_name</a>(serializer_pool), <span class="stringliteral">&quot;test/test&quot;</span>));</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../dd/d5f/serializer_8h.html#a630652ec26cd3d66063fccef05b3240d">ast_serializer_pool_set_alerts</a>(serializer_pool, 5, 0));</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> = <a class="code" href="../../df/df7/test__taskprocessor_8c.html#adc87b87ea4edf62dd7b26fdd9041787b">task_data_create</a>());</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#a64d5d234d9fdb1e2cd789853c79c554e">wait_time</a> = 4000; <span class="comment">/* task takes 4 seconds */</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                    <a class="code" href="../../dd/d5f/serializer_8h.html#a57044062c5e192e675109fa621c1588d">ast_serializer_pool_get</a>(serializer_pool), <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a>, <a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>));</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d5f/serializer_8h.html#ab24a7208f10fe9bed74475a531f8881e">ast_serializer_pool_destroy</a>(serializer_pool)) {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unexpected pool destruction!\n&quot;</span>);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">       * The pool should have timed out, so if it destruction reports success</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">       * we need to fail.</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      serializer_pool = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   }</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../df/df7/test__taskprocessor_8c.html#ad016183e7e9c88f88c247b23159fd298">task_wait</a>(<a class="code" href="../../d1/dd9/structtask__data.html">task_data</a>));</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   <span class="comment">/* The first attempt should have failed. Second try should destroy successfully */</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d5f/serializer_8h.html#ab24a7208f10fe9bed74475a531f8881e">ast_serializer_pool_destroy</a>(serializer_pool)) {</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unable to destroy serializer pool in allotted time!\n&quot;</span>);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">       * If this fails we&#39;ll try again on return to hopefully avoid a memory leak.</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">       * If it again times out a third time, well not much we can do.</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   }</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   <span class="comment">/* Test passed, so set pool to NULL to avoid &quot;re-running&quot; destroy */</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   serializer_pool = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;}</div><div class="ttc" id="structtask__data_html_a64d5d234d9fdb1e2cd789853c79c554e"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#a64d5d234d9fdb1e2cd789853c79c554e">task_data::wait_time</a></div><div class="ttdeci">unsigned long wait_time</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00052">test_taskprocessor.c:52</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="serializer_8h_html_ab24a7208f10fe9bed74475a531f8881e"><div class="ttname"><a href="../../dd/d5f/serializer_8h.html#ab24a7208f10fe9bed74475a531f8881e">ast_serializer_pool_destroy</a></div><div class="ttdeci">int ast_serializer_pool_destroy(struct ast_serializer_pool *pool)</div><div class="ttdoc">Destroy the serializer pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/serializer_8c_source.html#l00039">serializer.c:39</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a07d08fd44ac4a9f8e1319ce270f5d56a"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a></div><div class="ttdeci">static int task(void *data)</div><div class="ttdoc">Queued task for baseline test. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00088">test_taskprocessor.c:88</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="structast__serializer__pool_html"><div class="ttname"><a href="../../d0/d08/structast__serializer__pool.html">ast_serializer_pool</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/serializer_8c_source.html#l00028">serializer.c:28</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="sorcery_8c_html_a6dc11fc8f94173cc1af379b74a096abd"><div class="ttname"><a href="../../d7/d69/sorcery_8c.html#a6dc11fc8f94173cc1af379b74a096abd">threadpool</a></div><div class="ttdeci">static struct ast_threadpool * threadpool</div><div class="ttdoc">Thread pool for observers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l00086">sorcery.c:86</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_adc87b87ea4edf62dd7b26fdd9041787b"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#adc87b87ea4edf62dd7b26fdd9041787b">task_data_create</a></div><div class="ttdeci">static struct task_data * task_data_create(void)</div><div class="ttdoc">Create a task_data object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00064">test_taskprocessor.c:64</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtask__data_html"><div class="ttname"><a href="../../d1/dd9/structtask__data.html">task_data</a></div><div class="ttdoc">userdata associated with baseline taskprocessor test </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00044">test_taskprocessor.c:44</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_ad016183e7e9c88f88c247b23159fd298"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#ad016183e7e9c88f88c247b23159fd298">task_wait</a></div><div class="ttdeci">static int task_wait(struct task_data *task_data)</div><div class="ttdoc">Wait for a task to execute. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00104">test_taskprocessor.c:104</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="serializer_8h_html_a630652ec26cd3d66063fccef05b3240d"><div class="ttname"><a href="../../dd/d5f/serializer_8h.html#a630652ec26cd3d66063fccef05b3240d">ast_serializer_pool_set_alerts</a></div><div class="ttdeci">int ast_serializer_pool_set_alerts(struct ast_serializer_pool *pool, long high, long low)</div><div class="ttdoc">Set taskprocessor alert levels for the serializers in the pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/serializer_8c_source.html#l00156">serializer.c:156</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="serializer_8h_html_a59e92ce84852e313b5e3a0dae1ddba4d"><div class="ttname"><a href="../../dd/d5f/serializer_8h.html#a59e92ce84852e313b5e3a0dae1ddba4d">ast_serializer_pool_create</a></div><div class="ttdeci">struct ast_serializer_pool * ast_serializer_pool_create(const char *name, unsigned int size, struct ast_threadpool *threadpool, int timeout)</div><div class="ttdoc">Create a serializer pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/serializer_8c_source.html#l00076">serializer.c:76</a></div></div>
<div class="ttc" id="serializer_8h_html_a9021aba9b9c86fe4f3c652b56a8315a3"><div class="ttname"><a href="../../dd/d5f/serializer_8h.html#a9021aba9b9c86fe4f3c652b56a8315a3">ast_serializer_pool_name</a></div><div class="ttdeci">const char * ast_serializer_pool_name(const struct ast_serializer_pool *pool)</div><div class="ttdoc">Retrieve the base name of the serializer pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/serializer_8c_source.html#l00122">serializer.c:122</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a6b2508ba0a6b8f43ae6d3963f3189585"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a></div><div class="ttdeci">int ast_taskprocessor_push(struct ast_taskprocessor *tps, int(*task_exe)(void *datap), void *datap) attribute_warn_unused_result</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01175">taskprocessor.c:1175</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="serializer_8h_html_a57044062c5e192e675109fa621c1588d"><div class="ttname"><a href="../../dd/d5f/serializer_8h.html#a57044062c5e192e675109fa621c1588d">ast_serializer_pool_get</a></div><div class="ttdeci">struct ast_taskprocessor * ast_serializer_pool_get(struct ast_serializer_pool *pool)</div><div class="ttdoc">Retrieve a serializer from the pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/serializer_8c_source.html#l00127">serializer.c:127</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4605bce14dbcef58aa8784b55eff8aeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4605bce14dbcef58aa8784b55eff8aeb">&#9670;&nbsp;</a></span>check_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../da/d1b/structtest__listener__pvt.html">test_listener_pvt</a> *&#160;</td>
          <td class="paramname"><em>pvt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_pushed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_emptied</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_was_empty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>helper to ensure that statistics the listener is keeping are what we expect </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">test</td><td>The currently-running test </td></tr>
    <tr><td class="paramname">pvt</td><td>The private data for the taskprocessor listener </td></tr>
    <tr><td class="paramname">num_pushed</td><td>The expected current number of tasks pushed to the processor </td></tr>
    <tr><td class="paramname">num_emptied</td><td>The expected current number of times the taskprocessor has become empty </td></tr>
    <tr><td class="paramname">num_was_empty</td><td>The expected current number of times that tasks were pushed to an empty taskprocessor </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Stats were not as expected </td></tr>
    <tr><td class="paramname">0</td><td>Stats were as expected </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00523">523</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00437">test_listener_pvt::num_emptied</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00435">test_listener_pvt::num_pushed</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00439">test_listener_pvt::num_was_empty</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00555">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;{</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keywordflow">if</span> (pvt-&gt;<a class="code" href="../../da/d1b/structtest__listener__pvt.html#a67be9432325d9d4fdd7fa95d25746297">num_pushed</a> != num_pushed) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unexpected number of tasks pushed. Expected %d but got %d\n&quot;</span>,</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            num_pushed, pvt-&gt;<a class="code" href="../../da/d1b/structtest__listener__pvt.html#a67be9432325d9d4fdd7fa95d25746297">num_pushed</a>);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   <span class="keywordflow">if</span> (pvt-&gt;<a class="code" href="../../da/d1b/structtest__listener__pvt.html#ad103ede7cebe058ecfa88a1508ae86dd">num_emptied</a> != num_emptied) {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unexpected number of empties. Expected %d but got %d\n&quot;</span>,</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            num_emptied, pvt-&gt;<a class="code" href="../../da/d1b/structtest__listener__pvt.html#ad103ede7cebe058ecfa88a1508ae86dd">num_emptied</a>);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   }</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   <span class="keywordflow">if</span> (pvt-&gt;<a class="code" href="../../da/d1b/structtest__listener__pvt.html#aa1de2194769d26763298631f8f557a3e">num_was_empty</a> != num_was_empty) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unexpected number of empties. Expected %d but got %d\n&quot;</span>,</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            num_was_empty, pvt-&gt;<a class="code" href="../../da/d1b/structtest__listener__pvt.html#ad103ede7cebe058ecfa88a1508ae86dd">num_emptied</a>);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   }</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div><div class="ttc" id="structtest__listener__pvt_html_ad103ede7cebe058ecfa88a1508ae86dd"><div class="ttname"><a href="../../da/d1b/structtest__listener__pvt.html#ad103ede7cebe058ecfa88a1508ae86dd">test_listener_pvt::num_emptied</a></div><div class="ttdeci">int num_emptied</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00437">test_taskprocessor.c:437</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="structtest__listener__pvt_html_aa1de2194769d26763298631f8f557a3e"><div class="ttname"><a href="../../da/d1b/structtest__listener__pvt.html#aa1de2194769d26763298631f8f557a3e">test_listener_pvt::num_was_empty</a></div><div class="ttdeci">int num_was_empty</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00439">test_taskprocessor.c:439</a></div></div>
<div class="ttc" id="structtest__listener__pvt_html_a67be9432325d9d4fdd7fa95d25746297"><div class="ttname"><a href="../../da/d1b/structtest__listener__pvt.html#a67be9432325d9d4fdd7fa95d25746297">test_listener_pvt::num_pushed</a></div><div class="ttdeci">int num_pushed</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00435">test_taskprocessor.c:435</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a6c0e5128bbc626df82ada245e04bf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a6c0e5128bbc626df82ada245e04bf2">&#9670;&nbsp;</a></span>listener_test_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int listener_test_task </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ignore</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queued task for taskprocessor listener test. </p>
<p>Does nothing. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00507">507</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00555">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;{</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00978">978</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, and <a class="el" href="../../d8/db9/test_8c_source.html#l00194">ast_test_register()</a>.</p>
<div class="fragment"><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;{</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(default_taskprocessor);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(default_taskprocessor_load);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(<a class="code" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a>);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(taskprocessor_listener);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(taskprocessor_shutdown);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(taskprocessor_push_local);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(serializer_pool);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="structsubsystem__alert_html"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00123">taskprocessor.c:123</a></div></div>
<div class="ttc" id="test_8c_html_a1f590015fdc57f020e4cc2280ce351fa"><div class="ttname"><a href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a></div><div class="ttdeci">int ast_test_register(ast_test_cb_t *cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00194">test.c:194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae5e6253c52f6e8dae40bb36fdcbf3f13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5e6253c52f6e8dae40bb36fdcbf3f13">&#9670;&nbsp;</a></span>load_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_task </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>a queued task to be used in the taskprocessor load test </p>
<p>The task increments the number of tasks executed and puts the passed-in data into the next slot in the array of random data. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00336">336</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00321">load_task_data::cond</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00048">task_data::lock</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00323">load_task_data::lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00327">load_task_data::task_rand</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00325">load_task_data::tasks_completed</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00352">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;{</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   <span class="keywordtype">int</span> *randdata = data;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#aeee97a3dc992e84b92e54522f7986cc9">task_rand</a>[<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#a0bbcf6473b4e3035d57b5ddf9a643159">tasks_completed</a>++] = *randdata;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a>.<a class="code" href="../../d5/d7e/structload__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;}</div><div class="ttc" id="structload__task__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d5/d7e/structload__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">load_task_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00321">test_taskprocessor.c:321</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structload__task__data_html_a0bbcf6473b4e3035d57b5ddf9a643159"><div class="ttname"><a href="../../d5/d7e/structload__task__data.html#a0bbcf6473b4e3035d57b5ddf9a643159">load_task_data::tasks_completed</a></div><div class="ttdeci">int tasks_completed</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00325">test_taskprocessor.c:325</a></div></div>
<div class="ttc" id="structload__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/d7e/structload__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">load_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00323">test_taskprocessor.c:323</a></div></div>
<div class="ttc" id="structload__task__data_html_aeee97a3dc992e84b92e54522f7986cc9"><div class="ttname"><a href="../../d5/d7e/structload__task__data.html#aeee97a3dc992e84b92e54522f7986cc9">load_task_data::task_rand</a></div><div class="ttdeci">int task_rand[NUM_TASKS]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00327">test_taskprocessor.c:327</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a927be688814a3e7c472113954a9d4a3b"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a927be688814a3e7c472113954a9d4a3b">load_task_results</a></div><div class="ttdeci">static struct load_task_data load_task_results</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acf9fb63ed75f9452595c26defc93771e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf9fb63ed75f9452595c26defc93771e">&#9670;&nbsp;</a></span>local_task_exe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int local_task_exe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/ded/structast__taskprocessor__local.html">ast_taskprocessor_local</a> *&#160;</td>
          <td class="paramname"><em>local</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00826">826</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00224">ast_taskprocessor_local::data</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00072">ast_taskprocessor::local_data</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00222">ast_taskprocessor_local::local_data</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00088">task()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00837">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;{</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <span class="keywordtype">int</span> *local_data = local-&gt;<a class="code" href="../../dc/ded/structast__taskprocessor__local.html#afac276564d7aa87eefe4fa4b0694001e">local_data</a>;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> *<a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> = local-&gt;<a class="code" href="../../dc/ded/structast__taskprocessor__local.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;   *local_data = 1;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a>(task_data);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;}</div><div class="ttc" id="test__taskprocessor_8c_html_a07d08fd44ac4a9f8e1319ce270f5d56a"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a></div><div class="ttdeci">static int task(void *data)</div><div class="ttdoc">Queued task for baseline test. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00088">test_taskprocessor.c:88</a></div></div>
<div class="ttc" id="structast__taskprocessor__local_html_afac276564d7aa87eefe4fa4b0694001e"><div class="ttname"><a href="../../dc/ded/structast__taskprocessor__local.html#afac276564d7aa87eefe4fa4b0694001e">ast_taskprocessor_local::local_data</a></div><div class="ttdeci">void * local_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00222">taskprocessor.h:222</a></div></div>
<div class="ttc" id="structtask__data_html"><div class="ttname"><a href="../../d1/dd9/structtask__data.html">task_data</a></div><div class="ttdoc">userdata associated with baseline taskprocessor test </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00044">test_taskprocessor.c:44</a></div></div>
<div class="ttc" id="structast__taskprocessor__local_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../dc/ded/structast__taskprocessor__local.html#a735984d41155bc1032e09bece8f8d66d">ast_taskprocessor_local::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00224">taskprocessor.h:224</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab266c6197d908bb717eb91b241d9e12b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab266c6197d908bb717eb91b241d9e12b">&#9670;&nbsp;</a></span>shutdown_data_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>* shutdown_data_create </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dont_wait</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00662">662</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00646">shutdown_data::in</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00648">shutdown_data::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00647">shutdown_data::out</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00654">shutdown_data_dtor()</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00651">shutdown_data::task_stop_waiting</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00749">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;{</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *, <a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   <a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*<a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>), <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a074553b1e137c994f1518e35e30dac55">shutdown_data_dtor</a>);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>) {</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   }</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;<a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;<a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#aa2a46388613ce261aae4d3907155220a">in</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;<a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   <a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#addc8764c11164184975dc7ecd47b6499">task_stop_waiting</a> = dont_wait;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>, +1);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a>;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div><div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structshutdown__data_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#a35ce10d3b75c96679f8d17b8bf98e937">shutdown_data::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00647">test_taskprocessor.c:647</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a074553b1e137c994f1518e35e30dac55"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a074553b1e137c994f1518e35e30dac55">shutdown_data_dtor</a></div><div class="ttdeci">static void shutdown_data_dtor(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00654">test_taskprocessor.c:654</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structshutdown__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">shutdown_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00648">test_taskprocessor.c:648</a></div></div>
<div class="ttc" id="structshutdown__data_html_aa2a46388613ce261aae4d3907155220a"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#aa2a46388613ce261aae4d3907155220a">shutdown_data::in</a></div><div class="ttdeci">ast_cond_t in</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00646">test_taskprocessor.c:646</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structshutdown__data_html_addc8764c11164184975dc7ecd47b6499"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#addc8764c11164184975dc7ecd47b6499">shutdown_data::task_stop_waiting</a></div><div class="ttdeci">int task_stop_waiting</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00651">test_taskprocessor.c:651</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="structshutdown__data_html"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html">shutdown_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00645">test_taskprocessor.c:645</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a074553b1e137c994f1518e35e30dac55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a074553b1e137c994f1518e35e30dac55">&#9670;&nbsp;</a></span>shutdown_data_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void shutdown_data_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00654">654</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00646">shutdown_data::in</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00648">shutdown_data::lock</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00647">shutdown_data::out</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00662">shutdown_data_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *<a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> = data;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#aa2a46388613ce261aae4d3907155220a">in</a>);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div><div class="ttc" id="structshutdown__data_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#a35ce10d3b75c96679f8d17b8bf98e937">shutdown_data::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00647">test_taskprocessor.c:647</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="structshutdown__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">shutdown_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00648">test_taskprocessor.c:648</a></div></div>
<div class="ttc" id="structshutdown__data_html_aa2a46388613ce261aae4d3907155220a"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#aa2a46388613ce261aae4d3907155220a">shutdown_data::in</a></div><div class="ttdeci">ast_cond_t in</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00646">test_taskprocessor.c:646</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="structshutdown__data_html"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html">shutdown_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00645">test_taskprocessor.c:645</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a74b112be1280ce22266afacfe0b8893b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74b112be1280ce22266afacfe0b8893b">&#9670;&nbsp;</a></span>shutdown_has_completed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int shutdown_has_completed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *&#160;</td>
          <td class="paramname"><em>shutdown_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00711">711</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00048">task_data::lock</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00648">shutdown_data::lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00649">shutdown_data::task_complete</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00749">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;{</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   <span class="keywordflow">return</span> shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#a265107574d19cf54140dbac6327e88b6">task_complete</a>;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;}</div><div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structshutdown__data_html_a265107574d19cf54140dbac6327e88b6"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#a265107574d19cf54140dbac6327e88b6">shutdown_data::task_complete</a></div><div class="ttdeci">int task_complete</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00649">test_taskprocessor.c:649</a></div></div>
<div class="ttc" id="structshutdown__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">shutdown_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00648">test_taskprocessor.c:648</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaeaabd813fd35e0a491dabf212f34360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaeaabd813fd35e0a491dabf212f34360">&#9670;&nbsp;</a></span>shutdown_poke()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void shutdown_poke </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *&#160;</td>
          <td class="paramname"><em>shutdown_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00735">735</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00646">shutdown_data::in</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00048">task_data::lock</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00648">shutdown_data::lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00651">shutdown_data::task_stop_waiting</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00749">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;{</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#addc8764c11164184975dc7ecd47b6499">task_stop_waiting</a> = 1;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#aa2a46388613ce261aae4d3907155220a">in</a>);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;}</div><div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structshutdown__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">shutdown_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00648">test_taskprocessor.c:648</a></div></div>
<div class="ttc" id="structshutdown__data_html_aa2a46388613ce261aae4d3907155220a"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#aa2a46388613ce261aae4d3907155220a">shutdown_data::in</a></div><div class="ttdeci">ast_cond_t in</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00646">test_taskprocessor.c:646</a></div></div>
<div class="ttc" id="structshutdown__data_html_addc8764c11164184975dc7ecd47b6499"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#addc8764c11164184975dc7ecd47b6499">shutdown_data::task_stop_waiting</a></div><div class="ttdeci">int task_stop_waiting</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00651">test_taskprocessor.c:651</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abcc924bbfd9775752cc3da6223352b27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcc924bbfd9775752cc3da6223352b27">&#9670;&nbsp;</a></span>shutdown_task_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int shutdown_task_exec </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00679">679</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00203">ast_cond_wait</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00646">shutdown_data::in</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00048">task_data::lock</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00648">shutdown_data::lock</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00647">shutdown_data::out</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00649">shutdown_data::task_complete</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00650">shutdown_data::task_started</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00651">shutdown_data::task_stop_waiting</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00749">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;{</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *<a class="code" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> = data;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#a34eeab68fcb108d9d173cc7c79a02c5d">task_started</a> = 1;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="keywordflow">while</span> (!shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#addc8764c11164184975dc7ecd47b6499">task_stop_waiting</a>) {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#aa2a46388613ce261aae4d3907155220a">in</a>, &amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#a265107574d19cf54140dbac6327e88b6">task_complete</a> = 1;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;}</div><div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structshutdown__data_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#a35ce10d3b75c96679f8d17b8bf98e937">shutdown_data::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00647">test_taskprocessor.c:647</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structshutdown__data_html_a265107574d19cf54140dbac6327e88b6"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#a265107574d19cf54140dbac6327e88b6">shutdown_data::task_complete</a></div><div class="ttdeci">int task_complete</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00649">test_taskprocessor.c:649</a></div></div>
<div class="ttc" id="structshutdown__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">shutdown_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00648">test_taskprocessor.c:648</a></div></div>
<div class="ttc" id="structshutdown__data_html_aa2a46388613ce261aae4d3907155220a"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#aa2a46388613ce261aae4d3907155220a">shutdown_data::in</a></div><div class="ttdeci">ast_cond_t in</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00646">test_taskprocessor.c:646</a></div></div>
<div class="ttc" id="structshutdown__data_html_addc8764c11164184975dc7ecd47b6499"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#addc8764c11164184975dc7ecd47b6499">shutdown_data::task_stop_waiting</a></div><div class="ttdeci">int task_stop_waiting</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00651">test_taskprocessor.c:651</a></div></div>
<div class="ttc" id="structshutdown__data_html_a34eeab68fcb108d9d173cc7c79a02c5d"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#a34eeab68fcb108d9d173cc7c79a02c5d">shutdown_data::task_started</a></div><div class="ttdeci">int task_started</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00650">test_taskprocessor.c:650</a></div></div>
<div class="ttc" id="structshutdown__data_html"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html">shutdown_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00645">test_taskprocessor.c:645</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a77de98d59d68146fbda672966d0a4e09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77de98d59d68146fbda672966d0a4e09">&#9670;&nbsp;</a></span>shutdown_waitfor_completion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int shutdown_waitfor_completion </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *&#160;</td>
          <td class="paramname"><em>shutdown_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00693">693</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00048">task_data::lock</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00648">shutdown_data::lock</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00647">shutdown_data::out</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00649">shutdown_data::task_complete</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00749">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;{</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      .tv_sec = start.tv_sec + 5,</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   };</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="keywordflow">while</span> (!shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#a265107574d19cf54140dbac6327e88b6">task_complete</a>) {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>, &amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;end) == ETIMEDOUT) {</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      }</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   }</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   <span class="keywordflow">return</span> shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#a265107574d19cf54140dbac6327e88b6">task_complete</a>;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;}</div><div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structshutdown__data_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#a35ce10d3b75c96679f8d17b8bf98e937">shutdown_data::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00647">test_taskprocessor.c:647</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structshutdown__data_html_a265107574d19cf54140dbac6327e88b6"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#a265107574d19cf54140dbac6327e88b6">shutdown_data::task_complete</a></div><div class="ttdeci">int task_complete</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00649">test_taskprocessor.c:649</a></div></div>
<div class="ttc" id="structshutdown__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">shutdown_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00648">test_taskprocessor.c:648</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae13fafbef95e744b868d6cf289104903"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae13fafbef95e744b868d6cf289104903">&#9670;&nbsp;</a></span>shutdown_waitfor_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int shutdown_waitfor_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d7f/structshutdown__data.html">shutdown_data</a> *&#160;</td>
          <td class="paramname"><em>shutdown_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00717">717</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00048">task_data::lock</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00648">shutdown_data::lock</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00647">shutdown_data::out</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00650">shutdown_data::task_started</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00749">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;{</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      .tv_sec = start.tv_sec + 5,</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   };</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   <span class="keywordflow">while</span> (!shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#a34eeab68fcb108d9d173cc7c79a02c5d">task_started</a>) {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>, &amp;shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;end) == ETIMEDOUT) {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   <span class="keywordflow">return</span> shutdown_data-&gt;<a class="code" href="../../db/d7f/structshutdown__data.html#a34eeab68fcb108d9d173cc7c79a02c5d">task_started</a>;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;}</div><div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structshutdown__data_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#a35ce10d3b75c96679f8d17b8bf98e937">shutdown_data::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00647">test_taskprocessor.c:647</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structshutdown__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#adf04f66344e3fb0a6f6a69bf39d19902">shutdown_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00648">test_taskprocessor.c:648</a></div></div>
<div class="ttc" id="structshutdown__data_html_a34eeab68fcb108d9d173cc7c79a02c5d"><div class="ttname"><a href="../../db/d7f/structshutdown__data.html#a34eeab68fcb108d9d173cc7c79a02c5d">shutdown_data::task_started</a></div><div class="ttdeci">int task_started</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00650">test_taskprocessor.c:650</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a07d08fd44ac4a9f8e1319ce270f5d56a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07d08fd44ac4a9f8e1319ce270f5d56a">&#9670;&nbsp;</a></span>task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int task </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queued task for baseline test. </p>
<p>The task simply sets a boolean to indicate the task has been run and then signals a condition saying it's complete </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00088">88</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00046">task_data::cond</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00048">task_data::lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00050">task_data::task_complete</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00052">task_data::wait_time</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dce/test__res__pjsip__scheduler_8c_source.html#l00225">AST_TEST_DEFINE()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00956">ast_threadpool_push()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00826">local_task_exe()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00866">tps_taskprocessor_dtor()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00886">tps_taskprocessor_pop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> *<a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> = data;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   <span class="keywordflow">if</span> (task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#a64d5d234d9fdb1e2cd789853c79c554e">wait_time</a> &gt; 0) {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      usleep(task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#a64d5d234d9fdb1e2cd789853c79c554e">wait_time</a> * 1000);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   }</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#a265107574d19cf54140dbac6327e88b6">task_complete</a> = 1;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div><div class="ttc" id="structtask__data_html_a64d5d234d9fdb1e2cd789853c79c554e"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#a64d5d234d9fdb1e2cd789853c79c554e">task_data::wait_time</a></div><div class="ttdeci">unsigned long wait_time</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00052">test_taskprocessor.c:52</a></div></div>
<div class="ttc" id="structtask__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#adf04f66344e3fb0a6f6a69bf39d19902">task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00048">test_taskprocessor.c:48</a></div></div>
<div class="ttc" id="structtask__data_html_a265107574d19cf54140dbac6327e88b6"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#a265107574d19cf54140dbac6327e88b6">task_data::task_complete</a></div><div class="ttdeci">int task_complete</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00050">test_taskprocessor.c:50</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structtask__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#a1c7181c39f99ee801943a0d0aa9872b9">task_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00046">test_taskprocessor.c:46</a></div></div>
<div class="ttc" id="structtask__data_html"><div class="ttname"><a href="../../d1/dd9/structtask__data.html">task_data</a></div><div class="ttdoc">userdata associated with baseline taskprocessor test </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00044">test_taskprocessor.c:44</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adc87b87ea4edf62dd7b26fdd9041787b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc87b87ea4edf62dd7b26fdd9041787b">&#9670;&nbsp;</a></span>task_data_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d1/dd9/structtask__data.html">task_data</a>* task_data_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a <a class="el" href="../../d1/dd9/structtask__data.html" title="userdata associated with baseline taskprocessor test ">task_data</a> object. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00064">64</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00046">task_data::cond</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00048">task_data::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00050">task_data::task_complete</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00055">task_data_dtor()</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00052">task_data::wait_time</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00132">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> *<a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> =</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*task_data), <a class="code" href="../../df/df7/test__taskprocessor_8c.html#aca013e5a8f2cb1e722e1194374b9bd38">task_data_dtor</a>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   <span class="keywordflow">if</span> (!task_data) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;   }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;   task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#a265107574d19cf54140dbac6327e88b6">task_complete</a> = 0;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;   task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#a64d5d234d9fdb1e2cd789853c79c554e">wait_time</a> = 0;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;   <span class="keywordflow">return</span> task_data;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div><div class="ttc" id="structtask__data_html_a64d5d234d9fdb1e2cd789853c79c554e"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#a64d5d234d9fdb1e2cd789853c79c554e">task_data::wait_time</a></div><div class="ttdeci">unsigned long wait_time</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00052">test_taskprocessor.c:52</a></div></div>
<div class="ttc" id="structtask__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#adf04f66344e3fb0a6f6a69bf39d19902">task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00048">test_taskprocessor.c:48</a></div></div>
<div class="ttc" id="structtask__data_html_a265107574d19cf54140dbac6327e88b6"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#a265107574d19cf54140dbac6327e88b6">task_data::task_complete</a></div><div class="ttdeci">int task_complete</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00050">test_taskprocessor.c:50</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structtask__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#a1c7181c39f99ee801943a0d0aa9872b9">task_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00046">test_taskprocessor.c:46</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_aca013e5a8f2cb1e722e1194374b9bd38"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#aca013e5a8f2cb1e722e1194374b9bd38">task_data_dtor</a></div><div class="ttdeci">static void task_data_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00055">test_taskprocessor.c:55</a></div></div>
<div class="ttc" id="structtask__data_html"><div class="ttname"><a href="../../d1/dd9/structtask__data.html">task_data</a></div><div class="ttdoc">userdata associated with baseline taskprocessor test </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00044">test_taskprocessor.c:44</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aca013e5a8f2cb1e722e1194374b9bd38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca013e5a8f2cb1e722e1194374b9bd38">&#9670;&nbsp;</a></span>task_data_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void task_data_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00055">55</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00046">task_data::cond</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00048">task_data::lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00064">task_data_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> *<a class="code" href="../../d1/dd9/structtask__data.html">task_data</a> = obj;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div><div class="ttc" id="structtask__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#adf04f66344e3fb0a6f6a69bf39d19902">task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00048">test_taskprocessor.c:48</a></div></div>
<div class="ttc" id="structtask__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#a1c7181c39f99ee801943a0d0aa9872b9">task_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00046">test_taskprocessor.c:46</a></div></div>
<div class="ttc" id="structtask__data_html"><div class="ttname"><a href="../../d1/dd9/structtask__data.html">task_data</a></div><div class="ttdoc">userdata associated with baseline taskprocessor test </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00044">test_taskprocessor.c:44</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad016183e7e9c88f88c247b23159fd298"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad016183e7e9c88f88c247b23159fd298">&#9670;&nbsp;</a></span>task_wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int task_wait </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/dd9/structtask__data.html">task_data</a> *&#160;</td>
          <td class="paramname"><em>task_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait for a task to execute. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00104">104</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00046">task_data::cond</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00048">task_data::lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00050">task_data::task_complete</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00132">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>.tv_sec = start.tv_sec + 30;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>.tv_nsec = start.tv_usec * 1000;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   <span class="keywordflow">while</span> (!task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#a265107574d19cf54140dbac6327e88b6">task_complete</a>) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      res = <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, &amp;task_data-&gt;<a class="code" href="../../d1/dd9/structtask__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;         &amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">if</span> (res == ETIMEDOUT) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div><div class="ttc" id="structtask__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#adf04f66344e3fb0a6f6a69bf39d19902">task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00048">test_taskprocessor.c:48</a></div></div>
<div class="ttc" id="structtask__data_html_a265107574d19cf54140dbac6327e88b6"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#a265107574d19cf54140dbac6327e88b6">task_data::task_complete</a></div><div class="ttdeci">int task_complete</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00050">test_taskprocessor.c:50</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structtask__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d1/dd9/structtask__data.html#a1c7181c39f99ee801943a0d0aa9872b9">task_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00046">test_taskprocessor.c:46</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9da6e11d7dabffa090dec1e441e726b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9da6e11d7dabffa090dec1e441e726b">&#9670;&nbsp;</a></span>test_emptied()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void test_emptied </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>test taskprocessor listener's emptied callback. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00480">480</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00950">ast_taskprocessor_listener_get_user_data()</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00437">test_listener_pvt::num_emptied</a>.</p>
<div class="fragment"><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;{</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d1b/structtest__listener__pvt.html">test_listener_pvt</a> *pvt = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6906b13a7a37512e36dd1f5148589481">ast_taskprocessor_listener_get_user_data</a>(listener);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   ++pvt-&gt;<a class="code" href="../../da/d1b/structtest__listener__pvt.html#ad103ede7cebe058ecfa88a1508ae86dd">num_emptied</a>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div><div class="ttc" id="structtest__listener__pvt_html_ad103ede7cebe058ecfa88a1508ae86dd"><div class="ttname"><a href="../../da/d1b/structtest__listener__pvt.html#ad103ede7cebe058ecfa88a1508ae86dd">test_listener_pvt::num_emptied</a></div><div class="ttdeci">int num_emptied</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00437">test_taskprocessor.c:437</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a6906b13a7a37512e36dd1f5148589481"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6906b13a7a37512e36dd1f5148589481">ast_taskprocessor_listener_get_user_data</a></div><div class="ttdeci">void * ast_taskprocessor_listener_get_user_data(const struct ast_taskprocessor_listener *listener)</div><div class="ttdoc">Get the user data from the listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00950">taskprocessor.c:950</a></div></div>
<div class="ttc" id="structtest__listener__pvt_html"><div class="ttname"><a href="../../da/d1b/structtest__listener__pvt.html">test_listener_pvt</a></div><div class="ttdoc">Private data for the test taskprocessor listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00433">test_taskprocessor.c:433</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2cb39f2eee9c8af6648ddc31b3bbedc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cb39f2eee9c8af6648ddc31b3bbedc6">&#9670;&nbsp;</a></span>test_listener_pvt_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* test_listener_pvt_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>test taskprocessor listener's alloc callback </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00447">447</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00555">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;{</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d1b/structtest__listener__pvt.html">test_listener_pvt</a> *pvt;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   pvt = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*pvt));</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   <span class="keywordflow">return</span> pvt;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div><div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structtest__listener__pvt_html"><div class="ttname"><a href="../../da/d1b/structtest__listener__pvt.html">test_listener_pvt</a></div><div class="ttdoc">Private data for the test taskprocessor listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00433">test_taskprocessor.c:433</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6d3af6eaca01518ab11d9df91989155"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6d3af6eaca01518ab11d9df91989155">&#9670;&nbsp;</a></span>test_shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void test_shutdown </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>test taskprocessor listener's shutdown callback. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00489">489</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00950">ast_taskprocessor_listener_get_user_data()</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00441">test_listener_pvt::shutdown</a>.</p>
<div class="fragment"><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;{</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d1b/structtest__listener__pvt.html">test_listener_pvt</a> *pvt = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6906b13a7a37512e36dd1f5148589481">ast_taskprocessor_listener_get_user_data</a>(listener);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   pvt-&gt;<a class="code" href="../../da/d1b/structtest__listener__pvt.html#a5161d377a61befc3f8103e794d5cb582">shutdown</a> = 1;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;}</div><div class="ttc" id="taskprocessor_8h_html_a6906b13a7a37512e36dd1f5148589481"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6906b13a7a37512e36dd1f5148589481">ast_taskprocessor_listener_get_user_data</a></div><div class="ttdeci">void * ast_taskprocessor_listener_get_user_data(const struct ast_taskprocessor_listener *listener)</div><div class="ttdoc">Get the user data from the listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00950">taskprocessor.c:950</a></div></div>
<div class="ttc" id="structtest__listener__pvt_html_a5161d377a61befc3f8103e794d5cb582"><div class="ttname"><a href="../../da/d1b/structtest__listener__pvt.html#a5161d377a61befc3f8103e794d5cb582">test_listener_pvt::shutdown</a></div><div class="ttdeci">int shutdown</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00441">test_taskprocessor.c:441</a></div></div>
<div class="ttc" id="structtest__listener__pvt_html"><div class="ttname"><a href="../../da/d1b/structtest__listener__pvt.html">test_listener_pvt</a></div><div class="ttdoc">Private data for the test taskprocessor listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00433">test_taskprocessor.c:433</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a250b8be05a545762774cd33ca6510803"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a250b8be05a545762774cd33ca6510803">&#9670;&nbsp;</a></span>test_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int test_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>test taskprocessor listener's start callback </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00458">458</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;{</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a45d3adeef10f27c378c55b98c8b9a2a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45d3adeef10f27c378c55b98c8b9a2a1">&#9670;&nbsp;</a></span>test_task_pushed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void test_task_pushed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>was_empty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>test taskprocessor listener's task_pushed callback </p>
<p>Adjusts private data's stats as indicated by the parameters. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00468">468</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00950">ast_taskprocessor_listener_get_user_data()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00435">test_listener_pvt::num_pushed</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00439">test_listener_pvt::num_was_empty</a>.</p>
<div class="fragment"><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;{</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d1b/structtest__listener__pvt.html">test_listener_pvt</a> *pvt = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6906b13a7a37512e36dd1f5148589481">ast_taskprocessor_listener_get_user_data</a>(listener);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   ++pvt-&gt;<a class="code" href="../../da/d1b/structtest__listener__pvt.html#a67be9432325d9d4fdd7fa95d25746297">num_pushed</a>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <span class="keywordflow">if</span> (was_empty) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      ++pvt-&gt;<a class="code" href="../../da/d1b/structtest__listener__pvt.html#aa1de2194769d26763298631f8f557a3e">num_was_empty</a>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;}</div><div class="ttc" id="taskprocessor_8h_html_a6906b13a7a37512e36dd1f5148589481"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6906b13a7a37512e36dd1f5148589481">ast_taskprocessor_listener_get_user_data</a></div><div class="ttdeci">void * ast_taskprocessor_listener_get_user_data(const struct ast_taskprocessor_listener *listener)</div><div class="ttdoc">Get the user data from the listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00950">taskprocessor.c:950</a></div></div>
<div class="ttc" id="structtest__listener__pvt_html_aa1de2194769d26763298631f8f557a3e"><div class="ttname"><a href="../../da/d1b/structtest__listener__pvt.html#aa1de2194769d26763298631f8f557a3e">test_listener_pvt::num_was_empty</a></div><div class="ttdeci">int num_was_empty</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00439">test_taskprocessor.c:439</a></div></div>
<div class="ttc" id="structtest__listener__pvt_html_a67be9432325d9d4fdd7fa95d25746297"><div class="ttname"><a href="../../da/d1b/structtest__listener__pvt.html#a67be9432325d9d4fdd7fa95d25746297">test_listener_pvt::num_pushed</a></div><div class="ttdeci">int num_pushed</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00435">test_taskprocessor.c:435</a></div></div>
<div class="ttc" id="structtest__listener__pvt_html"><div class="ttname"><a href="../../da/d1b/structtest__listener__pvt.html">test_listener_pvt</a></div><div class="ttdoc">Private data for the test taskprocessor listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00433">test_taskprocessor.c:433</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0041b90fab7718c2319a6f312a55073e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0041b90fab7718c2319a6f312a55073e">&#9670;&nbsp;</a></span>tps_shutdown_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* tps_shutdown_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00742">742</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00749">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;{</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps = data;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(tps);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00966">966</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/db9/test_8c_source.html#l00218">ast_test_unregister()</a>.</p>
<div class="fragment"><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;{</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(default_taskprocessor);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(default_taskprocessor_load);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(<a class="code" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a>);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(taskprocessor_listener);</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(taskprocessor_shutdown);</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(taskprocessor_push_local);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(serializer_pool);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;}</div><div class="ttc" id="test_8c_html_a6af70dd120f998296a3d32239998b5f1"><div class="ttname"><a href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a></div><div class="ttdeci">int ast_test_unregister(ast_test_cb_t *cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00218">test.c:218</a></div></div>
<div class="ttc" id="structsubsystem__alert_html"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00123">taskprocessor.c:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;taskprocessor <a class="el" href="../../d8/d89/structtest.html">test</a> module&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00990">990</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00990">990</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

</div>
</div>
<a id="a927be688814a3e7c472113954a9d4a3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a927be688814a3e7c472113954a9d4a3b">&#9670;&nbsp;</a></span>load_task_results</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d7e/structload__task__data.html">load_task_data</a>  load_task_results</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00352">AST_TEST_DEFINE()</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00336">load_task()</a>.</p>

</div>
</div>
<a id="aafb2527c75e25abbb2b0edcbfe437667"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafb2527c75e25abbb2b0edcbfe437667">&#9670;&nbsp;</a></span>test_callbacks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d0/d01/structast__taskprocessor__listener__callbacks.html">ast_taskprocessor_listener_callbacks</a> test_callbacks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00495">495</a> of file <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html">test_taskprocessor.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:59 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
