<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: test_devicestate.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">test_devicestate.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Device State Test Module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/da2/devicestate_8h_source.html">asterisk/devicestate.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d25/stasis__message__router_8h_source.html">asterisk/stasis_message_router.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d68/vector_8h_source.html">asterisk/vector.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_devicestate.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d16/test__devicestate_8c__incl.png" border="0" usemap="#test__devicestate_8c" alt=""/></div>
<map name="test__devicestate_8c" id="test__devicestate_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="875,319,959,345"/>
<area shape="rect" id="node22" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1898,319,2013,345"/>
<area shape="rect" id="node34" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="2432,468,2559,495"/>
<area shape="rect" id="node36" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1809,87,1945,114"/>
<area shape="rect" id="node37" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="2649,244,2763,271"/>
<area shape="rect" id="node39" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="1681,169,1843,196"/>
<area shape="rect" id="node41" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="2397,87,2508,114"/>
<area shape="rect" id="node50" href="../../d4/d25/stasis__message__router_8h.html" title="asterisk/stasis_message\l_router.h" alt="" coords="1969,80,2147,121"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="645,692,799,719"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="848,393,985,420"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="5,393,140,420"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="649,767,795,793"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="988,617,1131,644"/>
<area shape="rect" id="node23" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1886,393,2025,420"/>
<area shape="rect" id="node29" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1373,617,1436,644"/>
<area shape="rect" id="node30" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="2316,543,2429,569"/>
<area shape="rect" id="node31" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="2261,617,2388,644"/>
<area shape="rect" id="node32" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="1382,393,1529,420"/>
<area shape="rect" id="node33" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2417,393,2574,420"/>
<area shape="rect" id="node35" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="2598,393,2729,420"/>
<area shape="rect" id="node38" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="2743,319,2845,345"/>
<area shape="rect" id="node40" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="1622,244,1793,271"/>
<area shape="rect" id="node42" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1969,169,2107,196"/>
<area shape="rect" id="node43" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="2371,244,2518,271"/>
<area shape="rect" id="node45" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="2695,169,2821,196"/>
<area shape="rect" id="node46" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="2132,169,2312,196"/>
<area shape="rect" id="node47" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="2787,244,2927,271"/>
<area shape="rect" id="node48" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="2533,319,2668,345"/>
<area shape="rect" id="node49" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="2337,169,2467,196"/>
<area shape="rect" id="node44" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1918,244,2043,271"/>
</map>
</div>
</div>
<p><a href="../../d6/dd1/test__devicestate_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/structconsumer.html">consumer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a669154850d6e91f2aa6e9919b10fc94e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a669154850d6e91f2aa6e9919b10fc94e">DEVICE_STATE_CHANNEL_TYPE</a>&#160;&#160;&#160;&quot;TestDeviceState&quot;</td></tr>
<tr class="separator:a669154850d6e91f2aa6e9919b10fc94e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16fc7b8877fc8d51366a254c2328dfff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a>&#160;&#160;&#160;&quot;TestDevState&quot;</td></tr>
<tr class="separator:a16fc7b8877fc8d51366a254c2328dfff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85bbebd4f68c71f71391aedd10a1315a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a85bbebd4f68c71f71391aedd10a1315a">DEVSTATE_PROVIDER_LC</a>&#160;&#160;&#160;&quot;testdevstate&quot;</td></tr>
<tr class="separator:a85bbebd4f68c71f71391aedd10a1315a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dca774a8912a6c33bfc4906d5fa729f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a8dca774a8912a6c33bfc4906d5fa729f">DEVSTATE_PROVIDER_LEN</a>&#160;&#160;&#160;12</td></tr>
<tr class="separator:a8dca774a8912a6c33bfc4906d5fa729f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f8e098b01daf5dda7dbb75af7ce191c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a>&#160;&#160;&#160;&quot;unit_test_device_identifier&quot;</td></tr>
<tr class="separator:a9f8e098b01daf5dda7dbb75af7ce191c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dcfe58c6878c32c826a66bb19f28ac6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a4dcfe58c6878c32c826a66bb19f28ac6">AST_TEST_DEFINE</a> (device2extenstate_test)</td></tr>
<tr class="separator:a4dcfe58c6878c32c826a66bb19f28ac6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a720dd5ed0c9b1f12fb917506940048a5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a720dd5ed0c9b1f12fb917506940048a5">AST_TEST_DEFINE</a> (device_state_aggregation_test)</td></tr>
<tr class="separator:a720dd5ed0c9b1f12fb917506940048a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6bdcd43c96b95c22c473006ff54296f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#aa6bdcd43c96b95c22c473006ff54296f">AST_TEST_DEFINE</a> (devstate_prov_add)</td></tr>
<tr class="separator:aa6bdcd43c96b95c22c473006ff54296f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6b57e46f07ebde0c93421f1f6c9548a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#ae6b57e46f07ebde0c93421f1f6c9548a">AST_TEST_DEFINE</a> (devstate_prov_del)</td></tr>
<tr class="separator:ae6b57e46f07ebde0c93421f1f6c9548a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48b3b38fcd36d9880fb14712b29a8761"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a48b3b38fcd36d9880fb14712b29a8761">AST_TEST_DEFINE</a> (devstate_changed)</td></tr>
<tr class="separator:a48b3b38fcd36d9880fb14712b29a8761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd9e28b3f96f46401198d366bf5dba11"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#acd9e28b3f96f46401198d366bf5dba11">AST_TEST_DEFINE</a> (devstate_conversions)</td></tr>
<tr class="separator:acd9e28b3f96f46401198d366bf5dba11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbe4039a29dffa428ec2a98acc45e549"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#afbe4039a29dffa428ec2a98acc45e549">AST_TEST_DEFINE</a> (devstate_channels)</td></tr>
<tr class="separator:afbe4039a29dffa428ec2a98acc45e549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07fae286e4f783458328b9146e067f83"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a07fae286e4f783458328b9146e067f83">AST_VECTOR</a> (, enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>) result_states</td></tr>
<tr class="memdesc:a07fae286e4f783458328b9146e067f83"><td class="mdescLeft">&#160;</td><td class="mdescRight">The resulting device state updates caused by some function call.  <a href="#a07fae286e4f783458328b9146e067f83">More...</a><br /></td></tr>
<tr class="separator:a07fae286e4f783458328b9146e067f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7785665f6244f581860767b46cb7fd96"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a7785665f6244f581860767b46cb7fd96">cache_cleanup</a> (int unused)</td></tr>
<tr class="separator:a7785665f6244f581860767b46cb7fd96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a698f5ac473038dcb52b27aeb12d95635"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a698f5ac473038dcb52b27aeb12d95635">chan_test_devicestate_cb</a> (const char *device_number)</td></tr>
<tr class="separator:a698f5ac473038dcb52b27aeb12d95635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0e2c41991766c417aa372d73d7910a4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#ae0e2c41991766c417aa372d73d7910a4">clear_result_states</a> (void)</td></tr>
<tr class="memdesc:ae0e2c41991766c417aa372d73d7910a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear out all recorded device states in result_states.  <a href="#ae0e2c41991766c417aa372d73d7910a4">More...</a><br /></td></tr>
<tr class="separator:ae0e2c41991766c417aa372d73d7910a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a18a5a3b3f70bbc677142746bfa2ef7"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a5a18a5a3b3f70bbc677142746bfa2ef7">consumer_create</a> (void)</td></tr>
<tr class="separator:a5a18a5a3b3f70bbc677142746bfa2ef7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a585c9adb224a241dcec6290c314c4861"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a585c9adb224a241dcec6290c314c4861">consumer_dtor</a> (void *obj)</td></tr>
<tr class="separator:a585c9adb224a241dcec6290c314c4861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a167de9c686c1cccd23d1b6076492931a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a167de9c686c1cccd23d1b6076492931a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c4eba483401714f187343c99b3b5b9b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a8c4eba483401714f187343c99b3b5b9b">consumer_finalize</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a8c4eba483401714f187343c99b3b5b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ca4726edbc1b8cfce009f8f6d225e79"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a0ca4726edbc1b8cfce009f8f6d225e79">consumer_reset</a> (struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a> *<a class="el" href="../../d9/dfd/structconsumer.html">consumer</a>)</td></tr>
<tr class="separator:a0ca4726edbc1b8cfce009f8f6d225e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c839861c56e7d87f1408bd006a9224d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a9c839861c56e7d87f1408bd006a9224d">consumer_wait_for</a> (struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a> *<a class="el" href="../../d9/dfd/structconsumer.html">consumer</a>)</td></tr>
<tr class="separator:a9c839861c56e7d87f1408bd006a9224d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af14d28b65551929353fa99ece013f5b5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#af14d28b65551929353fa99ece013f5b5">device_state_cb</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="memdesc:af14d28b65551929353fa99ece013f5b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stasis subscription callback for device state updates.  <a href="#af14d28b65551929353fa99ece013f5b5">More...</a><br /></td></tr>
<tr class="separator:af14d28b65551929353fa99ece013f5b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5839621be2d360c0b4d9153d813947b9"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a5839621be2d360c0b4d9153d813947b9">devstate_prov_cb</a> (const char *data)</td></tr>
<tr class="separator:a5839621be2d360c0b4d9153d813947b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f3ce4b8ae21d8e81cacc24992ecb3aa"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a9f3ce4b8ae21d8e81cacc24992ecb3aa">remove_device_states_cb</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:a9f3ce4b8ae21d8e81cacc24992ecb3aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e215bbc20cd6b3f40b901752deb2322"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a0e215bbc20cd6b3f40b901752deb2322">safe_hangup</a> (void *object)</td></tr>
<tr class="separator:a0e215bbc20cd6b3f40b901752deb2322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada556dc0525bd17dda8684bfeea5560e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#ada556dc0525bd17dda8684bfeea5560e">wait_for_channel_callback</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>)</td></tr>
<tr class="memdesc:ada556dc0525bd17dda8684bfeea5560e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until the test channel driver's devicestate callback is called.  <a href="#ada556dc0525bd17dda8684bfeea5560e">More...</a><br /></td></tr>
<tr class="separator:ada556dc0525bd17dda8684bfeea5560e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8697adb01936701cbc76d5d9f3dfd42b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a8697adb01936701cbc76d5d9f3dfd42b">wait_for_device_state_updates</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, int expected_updates)</td></tr>
<tr class="separator:a8697adb01936701cbc76d5d9f3dfd42b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Device State Test&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94668fa3051e550190ad436cccd7f0d6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a94668fa3051e550190ad436cccd7f0d6">chan_callback_called</a></td></tr>
<tr class="memdesc:a94668fa3051e550190ad436cccd7f0d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether or not the channel device state callback was called.  <a href="#a94668fa3051e550190ad436cccd7f0d6">More...</a><br /></td></tr>
<tr class="separator:a94668fa3051e550190ad436cccd7f0d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7b8d8b99d184d28a5f0e9fe66a47261"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#ad7b8d8b99d184d28a5f0e9fe66a47261">chan_idx</a></td></tr>
<tr class="memdesc:ad7b8d8b99d184d28a5f0e9fe66a47261"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to assign an increasing integer to channel name.  <a href="#ad7b8d8b99d184d28a5f0e9fe66a47261">More...</a><br /></td></tr>
<tr class="separator:ad7b8d8b99d184d28a5f0e9fe66a47261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1642101577110dd3af86260ac92344d1"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a1642101577110dd3af86260ac92344d1">chan_test_devicestate</a></td></tr>
<tr class="separator:a1642101577110dd3af86260ac92344d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30465df28c239b10bd7f78477571fa38"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a30465df28c239b10bd7f78477571fa38">channel_cb_cond</a></td></tr>
<tr class="memdesc:a30465df28c239b10bd7f78477571fa38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Condition wait variable for channel tech device state cb.  <a href="#a30465df28c239b10bd7f78477571fa38">More...</a><br /></td></tr>
<tr class="separator:a30465df28c239b10bd7f78477571fa38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bcdad9f75ef610d6fd1d4c0d92052d9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a7bcdad9f75ef610d6fd1d4c0d92052d9">channel_cb_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="memdesc:a7bcdad9f75ef610d6fd1d4c0d92052d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutext for <code>channel_cb_cond</code>.  <a href="#a7bcdad9f75ef610d6fd1d4c0d92052d9">More...</a><br /></td></tr>
<tr class="separator:a7bcdad9f75ef610d6fd1d4c0d92052d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1beadf955c24df04dde2577d31587ce0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a1beadf955c24df04dde2577d31587ce0">combined_results</a> []</td></tr>
<tr class="separator:a1beadf955c24df04dde2577d31587ce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dd46af9ba2df93b3d27a84c6b184a5b"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a3dd46af9ba2df93b3d27a84c6b184a5b">current_device_state</a></td></tr>
<tr class="memdesc:a3dd46af9ba2df93b3d27a84c6b184a5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current device state for our device state provider.  <a href="#a3dd46af9ba2df93b3d27a84c6b184a5b">More...</a><br /></td></tr>
<tr class="separator:a3dd46af9ba2df93b3d27a84c6b184a5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98f00c3fe14665008513cfba5fe26a24"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a98f00c3fe14665008513cfba5fe26a24">exten_results</a> []</td></tr>
<tr class="separator:a98f00c3fe14665008513cfba5fe26a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0951eb8ef729baf2355e4ec0f20669c3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#a0951eb8ef729baf2355e4ec0f20669c3">update_cond</a></td></tr>
<tr class="memdesc:a0951eb8ef729baf2355e4ec0f20669c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Condition wait variable for device state updates.  <a href="#a0951eb8ef729baf2355e4ec0f20669c3">More...</a><br /></td></tr>
<tr class="separator:a0951eb8ef729baf2355e4ec0f20669c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae22bbb2547e9b738ec77b60d3d4a8910"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd1/test__devicestate_8c.html#ae22bbb2547e9b738ec77b60d3d4a8910">update_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="memdesc:ae22bbb2547e9b738ec77b60d3d4a8910"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex for <code>update_cond</code>.  <a href="#ae22bbb2547e9b738ec77b60d3d4a8910">More...</a><br /></td></tr>
<tr class="separator:ae22bbb2547e9b738ec77b60d3d4a8910"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Device State Test Module. </p>
<dl class="section author"><dt>Author</dt><dd>David Vossel <a href="#" onclick="location.href='mai'+'lto:'+'dvo'+'ss'+'el@'+'di'+'giu'+'m.'+'com'; return false;">dvoss<span style="display: none;">.nosp@m.</span>el@d<span style="display: none;">.nosp@m.</span>igium<span style="display: none;">.nosp@m.</span>.com</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a669154850d6e91f2aa6e9919b10fc94e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a669154850d6e91f2aa6e9919b10fc94e">&#9670;&nbsp;</a></span>DEVICE_STATE_CHANNEL_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEVICE_STATE_CHANNEL_TYPE&#160;&#160;&#160;&quot;TestDeviceState&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00045">45</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00871">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="a16fc7b8877fc8d51366a254c2328dfff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16fc7b8877fc8d51366a254c2328dfff">&#9670;&nbsp;</a></span>DEVSTATE_PROVIDER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEVSTATE_PROVIDER&#160;&#160;&#160;&quot;TestDevState&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00047">47</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00622">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00254">device_state_cb()</a>.</p>

</div>
</div>
<a id="a85bbebd4f68c71f71391aedd10a1315a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85bbebd4f68c71f71391aedd10a1315a">&#9670;&nbsp;</a></span>DEVSTATE_PROVIDER_LC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEVSTATE_PROVIDER_LC&#160;&#160;&#160;&quot;testdevstate&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00049">49</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00666">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="a8dca774a8912a6c33bfc4906d5fa729f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dca774a8912a6c33bfc4906d5fa729f">&#9670;&nbsp;</a></span>DEVSTATE_PROVIDER_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEVSTATE_PROVIDER_LEN&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00051">51</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00254">device_state_cb()</a>.</p>

</div>
</div>
<a id="a9f8e098b01daf5dda7dbb75af7ce191c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f8e098b01daf5dda7dbb75af7ce191c">&#9670;&nbsp;</a></span>UNIT_TEST_DEVICE_IDENTIFIER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNIT_TEST_DEVICE_IDENTIFIER&#160;&#160;&#160;&quot;unit_test_device_identifier&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00043">43</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00511">AST_TEST_DEFINE()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00415">consumer_exec()</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00479">remove_device_states_cb()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00969">969</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00969">969</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00969">969</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

</div>
</div>
<a id="a4dcfe58c6878c32c826a66bb19f28ac6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dcfe58c6878c32c826a66bb19f28ac6">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[1/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">device2extenstate_test&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00312">312</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00062">AST_DEVICE_TOTAL</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00237">ast_devstate2str()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00636">ast_devstate_aggregate_add()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00630">ast_devstate_aggregate_init()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00663">ast_devstate_aggregate_result()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l03006">ast_devstate_to_extenstate()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l03126">ast_extension_state2str()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00057">combined_results</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00141">exten_results</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;{</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <span class="keywordtype">int</span> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d7f/structast__devstate__aggregate.html">ast_devstate_aggregate</a> agg;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> i, j, combined;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../db/de0/pbx_8h.html#a7e545df4a5f38ef25616c7bdf55d625f">ast_extension_states</a> <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <span class="keywordtype">int</span> k = 0;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;device2extenstate_test&quot;</span>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/devicestate/&quot;</span>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Tests combined devstate mapping and device to extension state mapping.&quot;</span>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;         <span class="stringliteral">&quot;Verifies device state aggregate results match the expected combined &quot;</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;         <span class="stringliteral">&quot;devstate.  Then verifies the combined devstate maps to the expected &quot;</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;         <span class="stringliteral">&quot;extension state.&quot;</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a98f00c3fe14665008513cfba5fe26a24">exten_results</a>) != (<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7">AST_DEVICE_TOTAL</a> * <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7">AST_DEVICE_TOTAL</a>)) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Result array is %d long when it should be %d. &quot;</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;         <span class="stringliteral">&quot;Something has changed, this test must be updated.\n&quot;</span>,</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;         (<span class="keywordtype">int</span>) <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a98f00c3fe14665008513cfba5fe26a24">exten_results</a>), (AST_DEVICE_TOTAL * AST_DEVICE_TOTAL));</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a1beadf955c24df04dde2577d31587ce0">combined_results</a>) != <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a98f00c3fe14665008513cfba5fe26a24">exten_results</a>)) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;combined_results and exten_results arrays do not match in length.\n&quot;</span>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7">AST_DEVICE_TOTAL</a>; i++) {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7">AST_DEVICE_TOTAL</a>; j++) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;         <a class="code" href="../../da/da2/devicestate_8h.html#a65ebe8f28497b09769ab9edeb4eb9b86">ast_devstate_aggregate_init</a>(&amp;agg);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;         <a class="code" href="../../da/da2/devicestate_8h.html#a45534707838d05125f409430b371854a">ast_devstate_aggregate_add</a>(&amp;agg, i);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;         <a class="code" href="../../da/da2/devicestate_8h.html#a45534707838d05125f409430b371854a">ast_devstate_aggregate_add</a>(&amp;agg, j);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;         combined = <a class="code" href="../../da/da2/devicestate_8h.html#a852d7e936d4385c3bb903812de5d6403">ast_devstate_aggregate_result</a>(&amp;agg);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a1beadf955c24df04dde2577d31587ce0">combined_results</a>[k] != combined) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Expected combined dev state %s &quot;</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;               <span class="stringliteral">&quot;does not match %s at combined_result[%d].\n&quot;</span>,</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;               <a class="code" href="../../da/da2/devicestate_8h.html#ac3a57910a6eb04d12d793fe3df796b8e">ast_devstate2str</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a1beadf955c24df04dde2577d31587ce0">combined_results</a>[k]),</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;               <a class="code" href="../../da/da2/devicestate_8h.html#ac3a57910a6eb04d12d793fe3df796b8e">ast_devstate2str</a>(combined), k);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;         }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;         exten = <a class="code" href="../../db/de0/pbx_8h.html#a3aa0b9f1691104cb6214ba66c5dc3a30">ast_devstate_to_extenstate</a>(combined);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a98f00c3fe14665008513cfba5fe26a24">exten_results</a>[k] != exten) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Expected exten state %s &quot;</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;               <span class="stringliteral">&quot;does not match %s at exten_result[%d]\n&quot;</span>,</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;               <a class="code" href="../../db/de0/pbx_8h.html#a3261603753916b98888a5a5fc1d505c3">ast_extension_state2str</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a98f00c3fe14665008513cfba5fe26a24">exten_results</a>[k]),</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;               <a class="code" href="../../db/de0/pbx_8h.html#a3261603753916b98888a5a5fc1d505c3">ast_extension_state2str</a>(exten), k);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;         }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;         k++;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div><div class="ttc" id="devicestate_8h_html_ac3a57910a6eb04d12d793fe3df796b8e"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ac3a57910a6eb04d12d793fe3df796b8e">ast_devstate2str</a></div><div class="ttdeci">const char * ast_devstate2str(enum ast_device_state devstate) attribute_pure</div><div class="ttdoc">Convert device state to text string for output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00237">devicestate.c:237</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eee"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a></div><div class="ttdeci">ast_device_state</div><div class="ttdoc">Device States. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00052">devicestate.h:52</a></div></div>
<div class="ttc" id="pbx_8h_html_a7e545df4a5f38ef25616c7bdf55d625f"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a7e545df4a5f38ef25616c7bdf55d625f">ast_extension_states</a></div><div class="ttdeci">ast_extension_states</div><div class="ttdoc">Extension states. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00061">pbx.h:61</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a1beadf955c24df04dde2577d31587ce0"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a1beadf955c24df04dde2577d31587ce0">combined_results</a></div><div class="ttdeci">static int combined_results[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00057">test_devicestate.c:57</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7">AST_DEVICE_TOTAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00062">devicestate.h:62</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="devicestate_8h_html_a852d7e936d4385c3bb903812de5d6403"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a852d7e936d4385c3bb903812de5d6403">ast_devstate_aggregate_result</a></div><div class="ttdeci">enum ast_device_state ast_devstate_aggregate_result(struct ast_devstate_aggregate *agg)</div><div class="ttdoc">Get the aggregate device state result. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00663">devicestate.c:663</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="pbx_8h_html_a3261603753916b98888a5a5fc1d505c3"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a3261603753916b98888a5a5fc1d505c3">ast_extension_state2str</a></div><div class="ttdeci">const char * ast_extension_state2str(int extension_state)</div><div class="ttdoc">Return string representation of the state of an extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l03126">pbx.c:3126</a></div></div>
<div class="ttc" id="devicestate_8h_html_a45534707838d05125f409430b371854a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a45534707838d05125f409430b371854a">ast_devstate_aggregate_add</a></div><div class="ttdeci">void ast_devstate_aggregate_add(struct ast_devstate_aggregate *agg, enum ast_device_state state)</div><div class="ttdoc">Add a device state to the aggregate device state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00636">devicestate.c:636</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="pbx_8h_html_a3aa0b9f1691104cb6214ba66c5dc3a30"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a3aa0b9f1691104cb6214ba66c5dc3a30">ast_devstate_to_extenstate</a></div><div class="ttdeci">enum ast_extension_states ast_devstate_to_extenstate(enum ast_device_state devstate)</div><div class="ttdoc">Map devstate to an extension state. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l03006">pbx.c:3006</a></div></div>
<div class="ttc" id="devicestate_8h_html_a65ebe8f28497b09769ab9edeb4eb9b86"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a65ebe8f28497b09769ab9edeb4eb9b86">ast_devstate_aggregate_init</a></div><div class="ttdeci">void ast_devstate_aggregate_init(struct ast_devstate_aggregate *agg)</div><div class="ttdoc">Initialize aggregate device state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00630">devicestate.c:630</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__devstate__aggregate_html"><div class="ttname"><a href="../../d6/d7f/structast__devstate__aggregate.html">ast_devstate_aggregate</a></div><div class="ttdoc">You shouldn&amp;#39;t care about the contents of this struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00230">devicestate.h:230</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a98f00c3fe14665008513cfba5fe26a24"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a98f00c3fe14665008513cfba5fe26a24">exten_results</a></div><div class="ttdeci">static int exten_results[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00141">test_devicestate.c:141</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a720dd5ed0c9b1f12fb917506940048a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a720dd5ed0c9b1f12fb917506940048a5">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[2/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">device_state_aggregation_test&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00511">511</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00382">consumer::aggregate_state</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00055">AST_DEVICE_INUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00054">AST_DEVICE_NOT_INUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00059">AST_DEVICE_RINGING</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00060">AST_DEVICE_RINGINUSE</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00673">ast_device_state_cache()</a>, <a class="el" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00678">ast_device_state_topic_cached()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00062">AST_DEVICE_TOTAL</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00070">AST_DEVSTATE_CACHABLE</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00323">ast_publish_device_state</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00709">ast_publish_device_state_full()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00498">cache_cleanup()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00400">consumer_create()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00415">consumer_exec()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00451">consumer_finalize()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00392">consumer_reset()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00460">consumer_wait_for()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00380">consumer::event_count</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00379">consumer::sig_on_non_aggregate_state</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00659">stasis_cache_get_by_eid()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gab5d1a876f8f0cd0562fb5d5f94c06717">stasis_cache_update_type()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router_add()</a>, <a class="el" href="../../d4/d25/stasis__message__router_8h_source.html#l00060">stasis_message_router_create</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00258">stasis_message_router_unsubscribe()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00250">ast_device_state_message::state</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00381">consumer::state</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00043">UNIT_TEST_DEVICE_IDENTIFIER</a>.</p>
<div class="fragment"><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;{</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> *, device_msg_router, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5646e370e39cc29f5faa7a30fda11159">stasis_message_router_unsubscribe</a>);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *, foreign_eid, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">int</span>, cleanup_cache, 0, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a7785665f6244f581860767b46cb7fd96">cache_cleanup</a>);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a> *device_state;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;device_state_aggregation_test&quot;</span>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/devicestate/&quot;</span>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Tests message routing and aggregation through the Stasis device state system.&quot;</span>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;         <span class="stringliteral">&quot;Verifies that the device state system passes &quot;</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;         <span class="stringliteral">&quot;messages appropriately, that the aggregator is &quot;</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;         <span class="stringliteral">&quot;working properly, that the aggregate results match &quot;</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;         <span class="stringliteral">&quot;the expected combined devstate, and that the cached &quot;</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;         <span class="stringliteral">&quot;aggregate devstate is correct.&quot;</span>;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   }</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   foreign_eid = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*foreign_eid));</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != foreign_eid);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   memset(foreign_eid, 0xFF, <span class="keyword">sizeof</span>(*foreign_eid));</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a5a18a5a3b3f70bbc677142746bfa2ef7">consumer_create</a>();</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   device_msg_router = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a>(<a class="code" href="../../da/da2/devicestate_8h.html#afa165c527c9181e88620823d0e0f68a1">ast_device_state_topic_cached</a>());</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != device_msg_router);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, +1);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   res = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(device_msg_router, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gab5d1a876f8f0cd0562fb5d5f94c06717">stasis_cache_update_type</a>(), <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !res);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   res = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(device_msg_router, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>(), <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a8c4eba483401714f187343c99b3b5b9b">consumer_finalize</a>, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !res);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <span class="comment">/* push local state */</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a053976b96658a083e1c4171276b6fc1c">ast_publish_device_state</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="comment">/* Check cache aggregate state immediately */</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a1d22721748b1bfd63ab13d92f19dfd02">stasis_cache_get_by_eid</a>(<a class="code" href="../../da/da2/devicestate_8h.html#a52892d3b3fec63dbcf67954d8c3589d5">ast_device_state_cache</a>(), <a class="code" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a>(), <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   device_state = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a> == device_state-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9c839861c56e7d87f1408bd006a9224d">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a> == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a> == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a1dc2b02affa6aed34a558a3ed9374224">aggregate_state</a>);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 2 == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#ab92424784d1d3b3b593a0d9157d7de62">event_count</a>);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a0ca4726edbc1b8cfce009f8f6d225e79">consumer_reset</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <span class="comment">/* push remote state */</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="comment">/* this will not produce a new aggregate state message since the aggregate state does not change */</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#ad7151d6c3f2d52461f6499f42fec9a01">sig_on_non_aggregate_state</a> = 1;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#afe9dc809c9ea4d32dfb4abd5fd92dfb2">ast_publish_device_state_full</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, foreign_eid);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="comment">/* Check cache aggregate state immediately */</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a1d22721748b1bfd63ab13d92f19dfd02">stasis_cache_get_by_eid</a>(<a class="code" href="../../da/da2/devicestate_8h.html#a52892d3b3fec63dbcf67954d8c3589d5">ast_device_state_cache</a>(), <a class="code" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a>(), <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   device_state = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a> == device_state-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <span class="comment">/* Check for expected events. */</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9c839861c56e7d87f1408bd006a9224d">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a> == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7">AST_DEVICE_TOTAL</a> == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a1dc2b02affa6aed34a558a3ed9374224">aggregate_state</a>);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#ab92424784d1d3b3b593a0d9157d7de62">event_count</a>);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a0ca4726edbc1b8cfce009f8f6d225e79">consumer_reset</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   <span class="comment">/* push remote state different from local state */</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#afe9dc809c9ea4d32dfb4abd5fd92dfb2">ast_publish_device_state_full</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, foreign_eid);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   <span class="comment">/* Check cache aggregate state immediately */</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a1d22721748b1bfd63ab13d92f19dfd02">stasis_cache_get_by_eid</a>(<a class="code" href="../../da/da2/devicestate_8h.html#a52892d3b3fec63dbcf67954d8c3589d5">ast_device_state_cache</a>(), <a class="code" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a>(), <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   device_state = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a> == device_state-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   <span class="comment">/* Check for expected events. */</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9c839861c56e7d87f1408bd006a9224d">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a> == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a> == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a1dc2b02affa6aed34a558a3ed9374224">aggregate_state</a>);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 2 == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#ab92424784d1d3b3b593a0d9157d7de62">event_count</a>);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a0ca4726edbc1b8cfce009f8f6d225e79">consumer_reset</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <span class="comment">/* push local state that will cause aggregated state different from local non-aggregate state */</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a053976b96658a083e1c4171276b6fc1c">ast_publish_device_state</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <span class="comment">/* Check cache aggregate state immediately */</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a1d22721748b1bfd63ab13d92f19dfd02">stasis_cache_get_by_eid</a>(<a class="code" href="../../da/da2/devicestate_8h.html#a52892d3b3fec63dbcf67954d8c3589d5">ast_device_state_cache</a>(), <a class="code" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a>(), <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   device_state = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a> == device_state-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="comment">/* Check for expected events. */</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9c839861c56e7d87f1408bd006a9224d">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a> == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a> == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a1dc2b02affa6aed34a558a3ed9374224">aggregate_state</a>);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 2 == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#ab92424784d1d3b3b593a0d9157d7de62">event_count</a>);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a0ca4726edbc1b8cfce009f8f6d225e79">consumer_reset</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div><div class="ttc" id="test__devicestate_8c_html_a9f8e098b01daf5dda7dbb75af7ce191c"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a></div><div class="ttdeci">#define UNIT_TEST_DEVICE_IDENTIFIER</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00043">test_devicestate.c:43</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a5adc304e693097ec75b474e6a5309958"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a></div><div class="ttdeci">int stasis_message_router_add(struct stasis_message_router *router, struct stasis_message_type *message_type, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Add a route to a message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router.c:310</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structast__device__state__message_html_a1acd064aff48cf4d5eafec1030f8429d"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html#a1acd064aff48cf4d5eafec1030f8429d">ast_device_state_message::state</a></div><div class="ttdeci">enum ast_device_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00250">devicestate.h:250</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7">AST_DEVICE_TOTAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00062">devicestate.h:62</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a7785665f6244f581860767b46cb7fd96"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a7785665f6244f581860767b46cb7fd96">cache_cleanup</a></div><div class="ttdeci">static void cache_cleanup(int unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00498">test_devicestate.c:498</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a8c4eba483401714f187343c99b3b5b9b"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a8c4eba483401714f187343c99b3b5b9b">consumer_finalize</a></div><div class="ttdeci">static void consumer_finalize(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00451">test_devicestate.c:451</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="structconsumer_html_ab92424784d1d3b3b593a0d9157d7de62"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#ab92424784d1d3b3b593a0d9157d7de62">consumer::event_count</a></div><div class="ttdeci">int event_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00380">test_devicestate.c:380</a></div></div>
<div class="ttc" id="stasis_8h_html_a1d22721748b1bfd63ab13d92f19dfd02"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a1d22721748b1bfd63ab13d92f19dfd02">stasis_cache_get_by_eid</a></div><div class="ttdeci">struct stasis_message * stasis_cache_get_by_eid(struct stasis_cache *cache, struct stasis_message_type *type, const char *id, const struct ast_eid *eid)</div><div class="ttdoc">Retrieve an item from the cache for a specific entity. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00659">stasis_cache.c:659</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="structconsumer_html_ad7151d6c3f2d52461f6499f42fec9a01"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#ad7151d6c3f2d52461f6499f42fec9a01">consumer::sig_on_non_aggregate_state</a></div><div class="ttdeci">int sig_on_non_aggregate_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00379">test_devicestate.c:379</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a5a18a5a3b3f70bbc677142746bfa2ef7"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a5a18a5a3b3f70bbc677142746bfa2ef7">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00400">test_devicestate.c:400</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="devicestate_8h_html_a9459272db1c8c968ed1aff1387f0f9fd"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a></div><div class="ttdeci">struct stasis_message_type * ast_device_state_message_type(void)</div><div class="ttdoc">Get the Stasis message type for device state messages. </div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00060">devicestate.h:60</a></div></div>
<div class="ttc" id="devicestate_8h_html_afa165c527c9181e88620823d0e0f68a1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#afa165c527c9181e88620823d0e0f68a1">ast_device_state_topic_cached</a></div><div class="ttdeci">struct stasis_topic * ast_device_state_topic_cached(void)</div><div class="ttdoc">Get the Stasis caching topic for device state messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00678">devicestate.c:678</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structstasis__message__router_html"><div class="ttname"><a href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00131">stasis_message_router.c:131</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gab5d1a876f8f0cd0562fb5d5f94c06717"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gab5d1a876f8f0cd0562fb5d5f94c06717">stasis_cache_update_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_cache_update_type(void)</div><div class="ttdoc">Message type for cache update messages. </div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00054">devicestate.h:54</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a1a1761c57f73009d305f95d8ad99e2a7"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a></div><div class="ttdeci">#define stasis_message_router_create(topic)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d25/stasis__message__router_8h_source.html#l00060">stasis_message_router.h:60</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a0ca4726edbc1b8cfce009f8f6d225e79"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a0ca4726edbc1b8cfce009f8f6d225e79">consumer_reset</a></div><div class="ttdeci">static void consumer_reset(struct consumer *consumer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00392">test_devicestate.c:392</a></div></div>
<div class="ttc" id="devicestate_8h_html_afe9dc809c9ea4d32dfb4abd5fd92dfb2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#afe9dc809c9ea4d32dfb4abd5fd92dfb2">ast_publish_device_state_full</a></div><div class="ttdeci">int ast_publish_device_state_full(const char *device, enum ast_device_state state, enum ast_devstate_cache cachable, struct ast_eid *eid)</div><div class="ttdoc">Publish a device state update with EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00709">devicestate.c:709</a></div></div>
<div class="ttc" id="devicestate_8h_html_a52892d3b3fec63dbcf67954d8c3589d5"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a52892d3b3fec63dbcf67954d8c3589d5">ast_device_state_cache</a></div><div class="ttdeci">struct stasis_cache * ast_device_state_cache(void)</div><div class="ttdoc">Backend cache for ast_device_state_topic_cached() </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00673">devicestate.c:673</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00055">devicestate.h:55</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structconsumer_html_a1acd064aff48cf4d5eafec1030f8429d"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a1acd064aff48cf4d5eafec1030f8429d">consumer::state</a></div><div class="ttdeci">enum ast_device_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00381">test_devicestate.c:381</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00070">devicestate.h:70</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00059">devicestate.h:59</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a5646e370e39cc29f5faa7a30fda11159"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a5646e370e39cc29f5faa7a30fda11159">stasis_message_router_unsubscribe</a></div><div class="ttdeci">void stasis_message_router_unsubscribe(struct stasis_message_router *router)</div><div class="ttdoc">Unsubscribe the router from the upstream topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00258">stasis_message_router.c:258</a></div></div>
<div class="ttc" id="structconsumer_html_a1dc2b02affa6aed34a558a3ed9374224"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a1dc2b02affa6aed34a558a3ed9374224">consumer::aggregate_state</a></div><div class="ttdeci">enum ast_device_state aggregate_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00382">test_devicestate.c:382</a></div></div>
<div class="ttc" id="structast__device__state__message_html"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a></div><div class="ttdoc">The structure that contains device state. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00240">devicestate.h:240</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
<div class="ttc" id="test__devicestate_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00415">test_devicestate.c:415</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a9c839861c56e7d87f1408bd006a9224d"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a9c839861c56e7d87f1408bd006a9224d">consumer_wait_for</a></div><div class="ttdeci">static void consumer_wait_for(struct consumer *consumer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00460">test_devicestate.c:460</a></div></div>
<div class="ttc" id="devicestate_8h_html_a053976b96658a083e1c4171276b6fc1c"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a053976b96658a083e1c4171276b6fc1c">ast_publish_device_state</a></div><div class="ttdeci">#define ast_publish_device_state(device, state, cachable)</div><div class="ttdoc">Publish a device state update. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00323">devicestate.h:323</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6bdcd43c96b95c22c473006ff54296f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6bdcd43c96b95c22c473006ff54296f">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[3/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">devstate_prov_add&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00622">622</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00391">ast_devstate_prov_add()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00418">ast_devstate_prov_del()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00287">devstate_prov_cb()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00047">DEVSTATE_PROVIDER</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;{</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/devicestate/&quot;</span>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test adding a device state provider&quot;</span>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;         <span class="stringliteral">&quot;Test that a custom device state provider can be added, and that\n&quot;</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;         <span class="stringliteral">&quot;it cannot be added if already added.&quot;</span>;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   }</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a5839621be2d360c0b4d9153d813947b9">devstate_prov_cb</a>) == 0);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a5839621be2d360c0b4d9153d813947b9">devstate_prov_cb</a>) != 0);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a>) == 0);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;}</div><div class="ttc" id="test__devicestate_8c_html_a16fc7b8877fc8d51366a254c2328dfff"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a></div><div class="ttdeci">#define DEVSTATE_PROVIDER</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00047">test_devicestate.c:47</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="devicestate_8h_html_a1ab579ae15aaca64a904c3c41d8b8b01"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a></div><div class="ttdeci">int ast_devstate_prov_del(const char *label)</div><div class="ttdoc">Remove device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00418">devicestate.c:418</a></div></div>
<div class="ttc" id="devicestate_8h_html_ae832fcc32c88962e73025ffeafe2961e"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a></div><div class="ttdeci">int ast_devstate_prov_add(const char *label, ast_devstate_prov_cb_type callback)</div><div class="ttdoc">Add device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00391">devicestate.c:391</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a5839621be2d360c0b4d9153d813947b9"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a5839621be2d360c0b4d9153d813947b9">devstate_prov_cb</a></div><div class="ttdeci">static enum ast_device_state devstate_prov_cb(const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00287">test_devicestate.c:287</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae6b57e46f07ebde0c93421f1f6c9548a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6b57e46f07ebde0c93421f1f6c9548a">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[4/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">devstate_prov_del&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00644">644</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00391">ast_devstate_prov_add()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00418">ast_devstate_prov_del()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00287">devstate_prov_cb()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00047">DEVSTATE_PROVIDER</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;{</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/devicestate/&quot;</span>;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test removing a device state provider&quot;</span>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;         <span class="stringliteral">&quot;Test that a custom device state provider can be removed, and that\n&quot;</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;         <span class="stringliteral">&quot;it cannot be removed if already removed.&quot;</span>;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   }</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a5839621be2d360c0b4d9153d813947b9">devstate_prov_cb</a>) == 0);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a>) == 0);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a>) != 0);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;}</div><div class="ttc" id="test__devicestate_8c_html_a16fc7b8877fc8d51366a254c2328dfff"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a></div><div class="ttdeci">#define DEVSTATE_PROVIDER</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00047">test_devicestate.c:47</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="devicestate_8h_html_a1ab579ae15aaca64a904c3c41d8b8b01"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a></div><div class="ttdeci">int ast_devstate_prov_del(const char *label)</div><div class="ttdoc">Remove device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00418">devicestate.c:418</a></div></div>
<div class="ttc" id="devicestate_8h_html_ae832fcc32c88962e73025ffeafe2961e"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a></div><div class="ttdeci">int ast_devstate_prov_add(const char *label, ast_devstate_prov_cb_type callback)</div><div class="ttdoc">Add device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00391">devicestate.c:391</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a5839621be2d360c0b4d9153d813947b9"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a5839621be2d360c0b4d9153d813947b9">devstate_prov_cb</a></div><div class="ttdeci">static enum ast_device_state devstate_prov_cb(const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00287">test_devicestate.c:287</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a48b3b38fcd36d9880fb14712b29a8761"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48b3b38fcd36d9880fb14712b29a8761">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[5/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">devstate_changed&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00666">666</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00056">AST_DEVICE_BUSY</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00055">AST_DEVICE_INUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00057">AST_DEVICE_INVALID</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00054">AST_DEVICE_NOT_INUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00061">AST_DEVICE_ONHOLD</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00059">AST_DEVICE_RINGING</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00060">AST_DEVICE_RINGINUSE</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00668">ast_device_state_topic_all()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00058">AST_DEVICE_UNAVAILABLE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00070">AST_DEVSTATE_CACHABLE</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00471">ast_devstate_changed_literal()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00069">AST_DEVSTATE_NOT_CACHABLE</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00391">ast_devstate_prov_add()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00418">ast_devstate_prov_del()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00244">clear_result_states()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00241">current_device_state</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00254">device_state_cb()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00287">devstate_prov_cb()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00047">DEVSTATE_PROVIDER</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00049">DEVSTATE_PROVIDER_LC</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01136">stasis_unsubscribe_and_join()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00292">wait_for_device_state_updates()</a>.</p>
<div class="fragment"><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;{</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> expected_results[] = {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>,</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>,</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>,</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>,</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a>,</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>,</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a>,</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>,</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   };</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/devicestate/&quot;</span>;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test updates coming from a device state provider&quot;</span>;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;         <span class="stringliteral">&quot;This unit test checks that a custom device state provider can\n&quot;</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;         <span class="stringliteral">&quot;have updates published for it. This includes both cacheable and\n&quot;</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;         <span class="stringliteral">&quot;non-cacheable events. In the case of non-cacheable events, the\n&quot;</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;         <span class="stringliteral">&quot;device state provider&#39;s callback function is queried for the\n&quot;</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;         <span class="stringliteral">&quot;device state when AST_DEVICE_UNKNOWN is published.&quot;</span>;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, (<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../da/da2/devicestate_8h.html#a9fa7376e8e627cf5a512209005692013">ast_device_state_topic_all</a>(), <a class="code" href="../../d6/dd1/test__devicestate_8c.html#af14d28b65551929353fa99ece013f5b5">device_state_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#ae0e2c41991766c417aa372d73d7910a4">clear_result_states</a>();</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a3dd46af9ba2df93b3d27a84c6b184a5b">current_device_state</a> = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a5839621be2d360c0b4d9153d813947b9">devstate_prov_cb</a>) == 0);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a8697adb01936701cbc76d5d9f3dfd42b">wait_for_device_state_updates</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, 8) == 0);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;result_states); i++) {</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Testing update %d: actual is %d; expected is %d\n&quot;</span>,</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;         i,</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;result_states, i),</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;         expected_results[i]);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;result_states, i) == expected_results[i]);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#ae0e2c41991766c417aa372d73d7910a4">clear_result_states</a>();</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">    * Since an update of AST_DEVICE_UNKNOWN will cause a different thread to retrieve</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">    * the update from the custom device state provider, check it separately from the</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment">    * updates above.</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, (<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../da/da2/devicestate_8h.html#a9fa7376e8e627cf5a512209005692013">ast_device_state_topic_all</a>(), <a class="code" href="../../d6/dd1/test__devicestate_8c.html#af14d28b65551929353fa99ece013f5b5">device_state_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a8697adb01936701cbc76d5d9f3dfd42b">wait_for_device_state_updates</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1) == 0);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;result_states, 0) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a85bbebd4f68c71f71391aedd10a1315a">DEVSTATE_PROVIDER_LC</a> <span class="stringliteral">&quot;:foo&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#ae0e2c41991766c417aa372d73d7910a4">clear_result_states</a>();</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, (<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../da/da2/devicestate_8h.html#a9fa7376e8e627cf5a512209005692013">ast_device_state_topic_all</a>(), <a class="code" href="../../d6/dd1/test__devicestate_8c.html#af14d28b65551929353fa99ece013f5b5">device_state_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == 0);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a8697adb01936701cbc76d5d9f3dfd42b">wait_for_device_state_updates</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, 8) == 0);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;result_states); i++) {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Testing update %d: actual is %d; expected is %d\n&quot;</span>,</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;         i,</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;result_states, i),</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;         expected_results[i]);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;result_states, i) == expected_results[i]);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">    * Check the last value in the cache. Note that this should not hit</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">    * the value of current_device_state.</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">    * This will miss on the cache, as it is case sensitive. It should go</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">    * hit our device state callback however.</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a85bbebd4f68c71f71391aedd10a1315a">DEVSTATE_PROVIDER_LC</a> <span class="stringliteral">&quot;:foo&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <span class="comment">/* Generally, this test can&#39;t be run twice in a row, as you can&#39;t remove an</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">    * item from the cache. Hence, subsequent runs won&#39;t hit the device state provider,</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">    * and will merely return the cached value.</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">    * To avoid annoying errors, set the last state to BUSY here.</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a> <span class="stringliteral">&quot;:foo&quot;</span>);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a>) == 0);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#ae0e2c41991766c417aa372d73d7910a4">clear_result_states</a>();</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;}</div><div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00061">devicestate.h:61</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eee"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a></div><div class="ttdeci">ast_device_state</div><div class="ttdoc">Device States. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00052">devicestate.h:52</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a3dd46af9ba2df93b3d27a84c6b184a5b"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a3dd46af9ba2df93b3d27a84c6b184a5b">current_device_state</a></div><div class="ttdeci">static enum ast_device_state current_device_state</div><div class="ttdoc">The current device state for our device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00241">test_devicestate.c:241</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a16fc7b8877fc8d51366a254c2328dfff"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a></div><div class="ttdeci">#define DEVSTATE_PROVIDER</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00047">test_devicestate.c:47</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00058">devicestate.h:58</a></div></div>
<div class="ttc" id="devicestate_8h_html_a1ab579ae15aaca64a904c3c41d8b8b01"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a></div><div class="ttdeci">int ast_devstate_prov_del(const char *label)</div><div class="ttdoc">Remove device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00418">devicestate.c:418</a></div></div>
<div class="ttc" id="devicestate_8h_html_ae832fcc32c88962e73025ffeafe2961e"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a></div><div class="ttdeci">int ast_devstate_prov_add(const char *label, ast_devstate_prov_cb_type callback)</div><div class="ttdoc">Add device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00391">devicestate.c:391</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a8697adb01936701cbc76d5d9f3dfd42b"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a8697adb01936701cbc76d5d9f3dfd42b">wait_for_device_state_updates</a></div><div class="ttdeci">static int wait_for_device_state_updates(struct ast_test *test, int expected_updates)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00292">test_devicestate.c:292</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_af14d28b65551929353fa99ece013f5b5"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#af14d28b65551929353fa99ece013f5b5">device_state_cb</a></div><div class="ttdeci">static void device_state_cb(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdoc">Stasis subscription callback for device state updates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00254">test_devicestate.c:254</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00060">devicestate.h:60</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a5839621be2d360c0b4d9153d813947b9"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a5839621be2d360c0b4d9153d813947b9">devstate_prov_cb</a></div><div class="ttdeci">static enum ast_device_state devstate_prov_cb(const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00287">test_devicestate.c:287</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00054">devicestate.h:54</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00056">devicestate.h:56</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00055">devicestate.h:55</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="devicestate_8h_html_a9fa7376e8e627cf5a512209005692013"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a9fa7376e8e627cf5a512209005692013">ast_device_state_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_device_state_topic_all(void)</div><div class="ttdoc">Get the Stasis topic for device state messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00668">devicestate.c:668</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_a221d05010106dcde0cc2e2b43c1a8b67"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe_and_join(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription, blocking until the last message is processed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01136">stasis.c:1136</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00070">devicestate.h:70</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a85bbebd4f68c71f71391aedd10a1315a"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a85bbebd4f68c71f71391aedd10a1315a">DEVSTATE_PROVIDER_LC</a></div><div class="ttdeci">#define DEVSTATE_PROVIDER_LC</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00049">test_devicestate.c:49</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00059">devicestate.h:59</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_ae0e2c41991766c417aa372d73d7910a4"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#ae0e2c41991766c417aa372d73d7910a4">clear_result_states</a></div><div class="ttdeci">static void clear_result_states(void)</div><div class="ttdoc">Clear out all recorded device states in result_states. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00244">test_devicestate.c:244</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00069">devicestate.h:69</a></div></div>
<div class="ttc" id="devicestate_8h_html_acb74555f2a796e00cd26bd866c52e7b6"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a></div><div class="ttdeci">int ast_devstate_changed_literal(enum ast_device_state state, enum ast_devstate_cache cachable, const char *device)</div><div class="ttdoc">Tells Asterisk the State for Device is changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00471">devicestate.c:471</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00057">devicestate.h:57</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd9e28b3f96f46401198d366bf5dba11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd9e28b3f96f46401198d366bf5dba11">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[6/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">devstate_conversions&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00788">788</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/da2/devicestate_8h_source.html#l00056">AST_DEVICE_BUSY</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00055">AST_DEVICE_INUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00057">AST_DEVICE_INVALID</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00054">AST_DEVICE_NOT_INUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00061">AST_DEVICE_ONHOLD</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00059">AST_DEVICE_RINGING</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00060">AST_DEVICE_RINGINUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00058">AST_DEVICE_UNAVAILABLE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00255">ast_devstate_str()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00260">ast_devstate_val()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00043">AST_STATE_BUSY</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00242">ast_state_chan2dev()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00039">AST_STATE_DIALING</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00044">AST_STATE_DIALING_OFFHOOK</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00036">AST_STATE_DOWN</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00038">AST_STATE_OFFHOOK</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00045">AST_STATE_PRERING</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00037">AST_STATE_RESERVED</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00040">AST_STATE_RING</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00041">AST_STATE_RINGING</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;{</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/devicestate/&quot;</span>;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test ast_device_state conversions&quot;</span>;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;         <span class="stringliteral">&quot;Test various transformations of ast_device_state values.&quot;</span>;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(<a class="code" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>), <span class="stringliteral">&quot;UNKNOWN&quot;</span>));</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(<a class="code" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>), <span class="stringliteral">&quot;NOT_INUSE&quot;</span>));</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(<a class="code" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>), <span class="stringliteral">&quot;INUSE&quot;</span>));</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(<a class="code" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>), <span class="stringliteral">&quot;BUSY&quot;</span>));</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(<a class="code" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>), <span class="stringliteral">&quot;INVALID&quot;</span>));</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(<a class="code" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a>), <span class="stringliteral">&quot;UNAVAILABLE&quot;</span>));</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(<a class="code" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>), <span class="stringliteral">&quot;RINGING&quot;</span>));</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(<a class="code" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a>), <span class="stringliteral">&quot;RINGINUSE&quot;</span>));</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(<a class="code" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>), <span class="stringliteral">&quot;ONHOLD&quot;</span>));</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(<span class="stringliteral">&quot;UNKNOWN&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(<span class="stringliteral">&quot;NOT_INUSE&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(<span class="stringliteral">&quot;INUSE&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(<span class="stringliteral">&quot;BUSY&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(<span class="stringliteral">&quot;INVALID&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(<span class="stringliteral">&quot;UNAVAILABLE&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a>);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(<span class="stringliteral">&quot;RINGING&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(<span class="stringliteral">&quot;RINGINUSE&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a>);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(<span class="stringliteral">&quot;ONHOLD&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(<span class="stringliteral">&quot;onhold&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a>(<span class="stringliteral">&quot;FOO&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a>(<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a>(<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a>(<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a9d7b264ddca4b05135add5d9d48e6271">AST_STATE_OFFHOOK</a>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a>(<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa70881e902c6c29f27ffba80bb43554f">AST_STATE_DIALING</a>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a>(<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a>(<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a>(<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a>(<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa00d313d1a4f4502932f1c10bd619591">AST_STATE_BUSY</a>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a>(<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a4e5d21d1ab20653e36109919d6ea72e1">AST_STATE_DIALING_OFFHOOK</a>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a>(<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a70a2b40aa2ec0f6f0e7378df7a0810db">AST_STATE_PRERING</a>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;}</div><div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00061">devicestate.h:61</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00037">channelstate.h:37</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00058">devicestate.h:58</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a4e5d21d1ab20653e36109919d6ea72e1"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a4e5d21d1ab20653e36109919d6ea72e1">AST_STATE_DIALING_OFFHOOK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00044">channelstate.h:44</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a70a2b40aa2ec0f6f0e7378df7a0810db"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a70a2b40aa2ec0f6f0e7378df7a0810db">AST_STATE_PRERING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00045">channelstate.h:45</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea17b87dfa3f4de5909b401017e229091d">AST_DEVICE_RINGINUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00060">devicestate.h:60</a></div></div>
<div class="ttc" id="devicestate_8h_html_ae148e0b95218b57b0348ab53f2f82657"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ae148e0b95218b57b0348ab53f2f82657">ast_devstate_val</a></div><div class="ttdeci">enum ast_device_state ast_devstate_val(const char *val)</div><div class="ttdoc">Convert device state from text to integer value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00260">devicestate.c:260</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="devicestate_8h_html_a8e0c5acc035f43741343b8ed2fcb14ea"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a></div><div class="ttdeci">enum ast_device_state ast_state_chan2dev(enum ast_channel_state chanstate)</div><div class="ttdoc">Convert channel state to devicestate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00242">devicestate.c:242</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00054">devicestate.h:54</a></div></div>
<div class="ttc" id="devicestate_8h_html_a6190de57ac370315e51f2c46724d5b10"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a></div><div class="ttdeci">const char * ast_devstate_str(enum ast_device_state devstate) attribute_pure</div><div class="ttdoc">Convert device state to text string that is easier to parse. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00255">devicestate.c:255</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00056">devicestate.h:56</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00055">devicestate.h:55</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00041">channelstate.h:41</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa00d313d1a4f4502932f1c10bd619591"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa00d313d1a4f4502932f1c10bd619591">AST_STATE_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00043">channelstate.h:43</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00059">devicestate.h:59</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa70881e902c6c29f27ffba80bb43554f"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa70881e902c6c29f27ffba80bb43554f">AST_STATE_DIALING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00039">channelstate.h:39</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00057">devicestate.h:57</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a9d7b264ddca4b05135add5d9d48e6271"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a9d7b264ddca4b05135add5d9d48e6271">AST_STATE_OFFHOOK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00038">channelstate.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afbe4039a29dffa428ec2a98acc45e549"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbe4039a29dffa428ec2a98acc45e549">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[7/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">devstate_channels&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00871">871</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01259">ast_channel_alloc</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00055">AST_DEVICE_INUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00059">AST_DEVICE_RINGING</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00287">ast_parse_device_state()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07486">ast_setstate()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00041">AST_STATE_RINGING</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00839">chan_callback_called</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00054">chan_idx</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00045">DEVICE_STATE_CHANNEL_TYPE</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00861">safe_hangup()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00842">wait_for_channel_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;{</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a0e215bbc20cd6b3f40b901752deb2322">safe_hangup</a>);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/devicestate/&quot;</span>;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test deriving device state from a channel&#39;s state&quot;</span>;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;         <span class="stringliteral">&quot;Test querying a channel&#39;s state to derive a device state.&quot;</span>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;   }</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a94668fa3051e550190ad436cccd7f0d6">chan_callback_called</a> = 0;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#a2f18aafad0442206e71033ac6676dbb5">ast_channel_alloc</a>(0, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;s&quot;</span>, <span class="stringliteral">&quot;default&quot;</span>,</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a669154850d6e91f2aa6e9919b10fc94e">DEVICE_STATE_CHANNEL_TYPE</a> <span class="stringliteral">&quot;/foo-%08x&quot;</span>,</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      (<span class="keywordtype">unsigned</span>) <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>((<span class="keywordtype">int</span> *) &amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#ad7b8d8b99d184d28a5f0e9fe66a47261">chan_idx</a>, +1));</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, chan != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a9da9a09e65a9332176a523407ccac611">ast_parse_device_state</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a669154850d6e91f2aa6e9919b10fc94e">DEVICE_STATE_CHANNEL_TYPE</a> <span class="stringliteral">&quot;/foo&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a9da9a09e65a9332176a523407ccac611">ast_parse_device_state</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a669154850d6e91f2aa6e9919b10fc94e">DEVICE_STATE_CHANNEL_TYPE</a> <span class="stringliteral">&quot;/bad&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(chan, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>);</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#ada556dc0525bd17dda8684bfeea5560e">wait_for_channel_callback</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>) == 1);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a9da9a09e65a9332176a523407ccac611">ast_parse_device_state</a>(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a669154850d6e91f2aa6e9919b10fc94e">DEVICE_STATE_CHANNEL_TYPE</a> <span class="stringliteral">&quot;/foo&quot;</span>) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a94668fa3051e550190ad436cccd7f0d6">chan_callback_called</a> = 0;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;}</div><div class="ttc" id="test__devicestate_8c_html_a669154850d6e91f2aa6e9919b10fc94e"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a669154850d6e91f2aa6e9919b10fc94e">DEVICE_STATE_CHANNEL_TYPE</a></div><div class="ttdeci">#define DEVICE_STATE_CHANNEL_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00045">test_devicestate.c:45</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_ad7b8d8b99d184d28a5f0e9fe66a47261"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#ad7b8d8b99d184d28a5f0e9fe66a47261">chan_idx</a></div><div class="ttdeci">static unsigned int chan_idx</div><div class="ttdoc">Used to assign an increasing integer to channel name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00054">test_devicestate.c:54</a></div></div>
<div class="ttc" id="devicestate_8h_html_a9da9a09e65a9332176a523407ccac611"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a9da9a09e65a9332176a523407ccac611">ast_parse_device_state</a></div><div class="ttdeci">enum ast_device_state ast_parse_device_state(const char *device)</div><div class="ttdoc">Search the Channels by Name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00287">devicestate.c:287</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a94668fa3051e550190ad436cccd7f0d6"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a94668fa3051e550190ad436cccd7f0d6">chan_callback_called</a></div><div class="ttdeci">static int chan_callback_called</div><div class="ttdoc">Whether or not the channel device state callback was called. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00839">test_devicestate.c:839</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00055">devicestate.h:55</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a0e215bbc20cd6b3f40b901752deb2322"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a0e215bbc20cd6b3f40b901752deb2322">safe_hangup</a></div><div class="ttdeci">static void safe_hangup(void *object)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00861">test_devicestate.c:861</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00041">channelstate.h:41</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00059">devicestate.h:59</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_ada556dc0525bd17dda8684bfeea5560e"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#ada556dc0525bd17dda8684bfeea5560e">wait_for_channel_callback</a></div><div class="ttdeci">static int wait_for_channel_callback(struct ast_test *test)</div><div class="ttdoc">Wait until the test channel driver&amp;#39;s devicestate callback is called. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00842">test_devicestate.c:842</a></div></div>
<div class="ttc" id="channelstate_8h_html_ad9d8f7d9e228b5af98a7b40db9f06448"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a></div><div class="ttdeci">int ast_setstate(struct ast_channel *chan, enum ast_channel_state)</div><div class="ttdoc">Change the state of a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07486">channel.c:7486</a></div></div>
<div class="ttc" id="channel_8h_html_a2f18aafad0442206e71033ac6676dbb5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2f18aafad0442206e71033ac6676dbb5">ast_channel_alloc</a></div><div class="ttdeci">#define ast_channel_alloc(needqueue, state, cid_num, cid_name, acctcode, exten, context, assignedids, requestor, amaflag,...)</div><div class="ttdoc">Create a channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01259">channel.h:1259</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a07fae286e4f783458328b9146e067f83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07fae286e4f783458328b9146e067f83">&#9670;&nbsp;</a></span>AST_VECTOR()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AST_VECTOR </td>
          <td>(</td>
          <td class="paramtype">enum&#160;</td>
          <td class="paramname"><em>ast_device_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The resulting device state updates caused by some function call. </p>

</div>
</div>
<a id="a7785665f6244f581860767b46cb7fd96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7785665f6244f581860767b46cb7fd96">&#9670;&nbsp;</a></span>cache_cleanup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cache_cleanup </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>unused</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00498">498</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00673">ast_device_state_cache()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00479">remove_device_states_cb()</a>, and <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00757">stasis_cache_dump_all()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00511">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;{</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *cache_dump;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   <span class="comment">/* remove all device states created during this test */</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   cache_dump = <a class="code" href="../../dd/d79/stasis_8h.html#ab54f6037e019ae477c15e90e52904d09">stasis_cache_dump_all</a>(<a class="code" href="../../da/da2/devicestate_8h.html#a52892d3b3fec63dbcf67954d8c3589d5">ast_device_state_cache</a>(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   <span class="keywordflow">if</span> (!cache_dump) {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(cache_dump, 0, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9f3ce4b8ae21d8e81cacc24992ecb3aa">remove_device_states_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cache_dump);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;}</div><div class="ttc" id="stasis_8h_html_ab54f6037e019ae477c15e90e52904d09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ab54f6037e019ae477c15e90e52904d09">stasis_cache_dump_all</a></div><div class="ttdeci">struct ao2_container * stasis_cache_dump_all(struct stasis_cache *cache, struct stasis_message_type *type)</div><div class="ttdoc">Dump all entity items from the cache to a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00757">stasis_cache.c:757</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a9f3ce4b8ae21d8e81cacc24992ecb3aa"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a9f3ce4b8ae21d8e81cacc24992ecb3aa">remove_device_states_cb</a></div><div class="ttdeci">static int remove_device_states_cb(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00479">test_devicestate.c:479</a></div></div>
<div class="ttc" id="devicestate_8h_html_a52892d3b3fec63dbcf67954d8c3589d5"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a52892d3b3fec63dbcf67954d8c3589d5">ast_device_state_cache</a></div><div class="ttdeci">struct stasis_cache * ast_device_state_cache(void)</div><div class="ttdoc">Backend cache for ast_device_state_topic_cached() </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00673">devicestate.c:673</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a698f5ac473038dcb52b27aeb12d95635"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a698f5ac473038dcb52b27aeb12d95635">&#9670;&nbsp;</a></span>chan_test_devicestate_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_test_devicestate_cb </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>device_number</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00907">907</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00055">AST_DEVICE_INUSE</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00839">chan_callback_called</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00235">channel_cb_cond</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00232">channel_cb_lock</a>.</p>
<div class="fragment"><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;{</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <span class="comment">/* Simply record that we were called when expected */</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a94668fa3051e550190ad436cccd7f0d6">chan_callback_called</a> = 1;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a7bcdad9f75ef610d6fd1d4c0d92052d9">channel_cb_lock</a>);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a30465df28c239b10bd7f78477571fa38">channel_cb_cond</a>);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a7bcdad9f75ef610d6fd1d4c0d92052d9">channel_cb_lock</a>);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;}</div><div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a7bcdad9f75ef610d6fd1d4c0d92052d9"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a7bcdad9f75ef610d6fd1d4c0d92052d9">channel_cb_lock</a></div><div class="ttdeci">static ast_mutex_t channel_cb_lock</div><div class="ttdoc">Mutext for channel_cb_cond. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00232">test_devicestate.c:232</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a94668fa3051e550190ad436cccd7f0d6"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a94668fa3051e550190ad436cccd7f0d6">chan_callback_called</a></div><div class="ttdeci">static int chan_callback_called</div><div class="ttdoc">Whether or not the channel device state callback was called. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00839">test_devicestate.c:839</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00055">devicestate.h:55</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a30465df28c239b10bd7f78477571fa38"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a30465df28c239b10bd7f78477571fa38">channel_cb_cond</a></div><div class="ttdeci">static ast_cond_t channel_cb_cond</div><div class="ttdoc">Condition wait variable for channel tech device state cb. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00235">test_devicestate.c:235</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae0e2c41991766c417aa372d73d7910a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0e2c41991766c417aa372d73d7910a4">&#9670;&nbsp;</a></span>clear_result_states()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void clear_result_states </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear out all recorded device states in result_states. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00244">244</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00438">AST_VECTOR_REMOVE_UNORDERED</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00226">update_lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00666">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#ae22bbb2547e9b738ec77b60d3d4a8910">update_lock</a>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;result_states) &gt; 0) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a88927df275257d9c9431252e016503ec">AST_VECTOR_REMOVE_UNORDERED</a>(&amp;result_states, 0);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#ae22bbb2547e9b738ec77b60d3d4a8910">update_lock</a>);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div><div class="ttc" id="test__devicestate_8c_html_ae22bbb2547e9b738ec77b60d3d4a8910"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#ae22bbb2547e9b738ec77b60d3d4a8910">update_lock</a></div><div class="ttdeci">static ast_mutex_t update_lock</div><div class="ttdoc">Mutex for update_cond. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00226">test_devicestate.c:226</a></div></div>
<div class="ttc" id="vector_8h_html_a88927df275257d9c9431252e016503ec"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a88927df275257d9c9431252e016503ec">AST_VECTOR_REMOVE_UNORDERED</a></div><div class="ttdeci">#define AST_VECTOR_REMOVE_UNORDERED(vec, idx)</div><div class="ttdoc">Remove an element from an unordered vector by index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00438">vector.h:438</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5a18a5a3b3f70bbc677142746bfa2ef7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a18a5a3b3f70bbc677142746bfa2ef7">&#9670;&nbsp;</a></span>consumer_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a>* consumer_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00400">400</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00385">consumer_dtor()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00392">consumer_reset()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00377">consumer::out</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00511">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;{</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   consumer = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*consumer), <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a585c9adb224a241dcec6290c314c4861">consumer_dtor</a>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <span class="keywordflow">if</span> (!consumer) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a0ca4726edbc1b8cfce009f8f6d225e79">consumer_reset</a>(consumer);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <span class="keywordflow">return</span> consumer;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;}</div><div class="ttc" id="structconsumer_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">consumer::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00377">test_devicestate.c:377</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a585c9adb224a241dcec6290c314c4861"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a585c9adb224a241dcec6290c314c4861">consumer_dtor</a></div><div class="ttdeci">static void consumer_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00385">test_devicestate.c:385</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a0ca4726edbc1b8cfce009f8f6d225e79"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a0ca4726edbc1b8cfce009f8f6d225e79">consumer_reset</a></div><div class="ttdeci">static void consumer_reset(struct consumer *consumer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00392">test_devicestate.c:392</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a585c9adb224a241dcec6290c314c4861"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a585c9adb224a241dcec6290c314c4861">&#9670;&nbsp;</a></span>consumer_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void consumer_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00385">385</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00377">consumer::out</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00400">consumer_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;{</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = obj;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div><div class="ttc" id="structconsumer_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">consumer::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00377">test_devicestate.c:377</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a167de9c686c1cccd23d1b6076492931a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a167de9c686c1cccd23d1b6076492931a">&#9670;&nbsp;</a></span>consumer_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void consumer_exec </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00415">415</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00382">consumer::aggregate_state</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00378">consumer::already_out</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../d5/d3c/test__stasis__endpoints_8c_source.html#l00048">cache_update()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00242">ast_device_state_message::device</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00248">ast_device_state_message::eid</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00380">consumer::event_count</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00973">stasis_cache_update::new_snapshot</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00377">consumer::out</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00379">consumer::sig_on_non_aggregate_state</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00250">ast_device_state_message::state</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00381">consumer::state</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00043">UNIT_TEST_DEVICE_IDENTIFIER</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00511">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;{</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = data;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/dfa/structstasis__cache__update.html">stasis_cache_update</a> *<a class="code" href="../../d5/d3c/test__stasis__endpoints_8c.html#a989de520871e35ee355009a2baa09b35">cache_update</a> = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a> *device_state;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   <span class="keywordflow">if</span> (!cache_update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#aae78adb4af9a7dedb7a77fc0d393076e">new_snapshot</a>) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   device_state = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(cache_update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#aae78adb4af9a7dedb7a77fc0d393076e">new_snapshot</a>);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <span class="keywordflow">if</span> (strcmp(device_state-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a8059c3b19eb356cf729e5d25b139647e">device</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a>)) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="comment">/* not a device state we&#39;re interested in */</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   }</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, consumer);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      ++consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#ab92424784d1d3b3b593a0d9157d7de62">event_count</a>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">if</span> (device_state-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a39d1b63955a48c72508fa9f884d05762">eid</a>) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;         consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a1acd064aff48cf4d5eafec1030f8429d">state</a> = device_state-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;         <span class="keywordflow">if</span> (consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#ad7151d6c3f2d52461f6499f42fec9a01">sig_on_non_aggregate_state</a>) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#ad7151d6c3f2d52461f6499f42fec9a01">sig_on_non_aggregate_state</a> = 0;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a7266504ee9e007167ac28fd6f93ab392">already_out</a> = 1;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;         }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;         consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a1dc2b02affa6aed34a558a3ed9374224">aggregate_state</a> = device_state-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;         consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a7266504ee9e007167ac28fd6f93ab392">already_out</a> = 1;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      }</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div><div class="ttc" id="test__devicestate_8c_html_a9f8e098b01daf5dda7dbb75af7ce191c"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a></div><div class="ttdeci">#define UNIT_TEST_DEVICE_IDENTIFIER</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00043">test_devicestate.c:43</a></div></div>
<div class="ttc" id="structconsumer_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">consumer::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00377">test_devicestate.c:377</a></div></div>
<div class="ttc" id="structast__device__state__message_html_a1acd064aff48cf4d5eafec1030f8429d"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html#a1acd064aff48cf4d5eafec1030f8429d">ast_device_state_message::state</a></div><div class="ttdeci">enum ast_device_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00250">devicestate.h:250</a></div></div>
<div class="ttc" id="structconsumer_html_ab92424784d1d3b3b593a0d9157d7de62"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#ab92424784d1d3b3b593a0d9157d7de62">consumer::event_count</a></div><div class="ttdeci">int event_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00380">test_devicestate.c:380</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structconsumer_html_ad7151d6c3f2d52461f6499f42fec9a01"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#ad7151d6c3f2d52461f6499f42fec9a01">consumer::sig_on_non_aggregate_state</a></div><div class="ttdeci">int sig_on_non_aggregate_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00379">test_devicestate.c:379</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="structast__device__state__message_html_a39d1b63955a48c72508fa9f884d05762"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html#a39d1b63955a48c72508fa9f884d05762">ast_device_state_message::eid</a></div><div class="ttdeci">const struct ast_eid * eid</div><div class="ttdoc">The EID of the server where this message originated. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00248">devicestate.h:248</a></div></div>
<div class="ttc" id="structast__device__state__message_html_a8059c3b19eb356cf729e5d25b139647e"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html#a8059c3b19eb356cf729e5d25b139647e">ast_device_state_message::device</a></div><div class="ttdeci">const char * device</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00242">devicestate.h:242</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structstasis__cache__update_html"><div class="ttname"><a href="../../de/dfa/structstasis__cache__update.html">stasis_cache_update</a></div><div class="ttdoc">Cache update message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00967">stasis.h:967</a></div></div>
<div class="ttc" id="structconsumer_html_a7266504ee9e007167ac28fd6f93ab392"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a7266504ee9e007167ac28fd6f93ab392">consumer::already_out</a></div><div class="ttdeci">int already_out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00378">test_devicestate.c:378</a></div></div>
<div class="ttc" id="test__stasis__endpoints_8c_html_a989de520871e35ee355009a2baa09b35"><div class="ttname"><a href="../../d5/d3c/test__stasis__endpoints_8c.html#a989de520871e35ee355009a2baa09b35">cache_update</a></div><div class="ttdeci">static int cache_update(struct stasis_message *msg, const void *data)</div><div class="ttdoc">Message matcher looking for cache update messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3c/test__stasis__endpoints_8c_source.html#l00048">test_stasis_endpoints.c:48</a></div></div>
<div class="ttc" id="structstasis__cache__update_html_aae78adb4af9a7dedb7a77fc0d393076e"><div class="ttname"><a href="../../de/dfa/structstasis__cache__update.html#aae78adb4af9a7dedb7a77fc0d393076e">stasis_cache_update::new_snapshot</a></div><div class="ttdeci">struct stasis_message * new_snapshot</div><div class="ttdoc">New value. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00973">stasis.h:973</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="structconsumer_html_a1acd064aff48cf4d5eafec1030f8429d"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a1acd064aff48cf4d5eafec1030f8429d">consumer::state</a></div><div class="ttdeci">enum ast_device_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00381">test_devicestate.c:381</a></div></div>
<div class="ttc" id="structconsumer_html_a1dc2b02affa6aed34a558a3ed9374224"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a1dc2b02affa6aed34a558a3ed9374224">consumer::aggregate_state</a></div><div class="ttdeci">enum ast_device_state aggregate_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00382">test_devicestate.c:382</a></div></div>
<div class="ttc" id="structast__device__state__message_html"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a></div><div class="ttdoc">The structure that contains device state. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00240">devicestate.h:240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c4eba483401714f187343c99b3b5b9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c4eba483401714f187343c99b3b5b9b">&#9670;&nbsp;</a></span>consumer_finalize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void consumer_finalize </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00451">451</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01176">stasis_subscription_final_message()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00511">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;{</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = data;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a>(sub, message)) {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(consumer);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;}</div><div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="stasis_8h_html_a839350445aaa51cedf31f6daec933ee0"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a></div><div class="ttdeci">int stasis_subscription_final_message(struct stasis_subscription *sub, struct stasis_message *msg)</div><div class="ttdoc">Determine whether a message is the final message to be received on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01176">stasis.c:1176</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ca4726edbc1b8cfce009f8f6d225e79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ca4726edbc1b8cfce009f8f6d225e79">&#9670;&nbsp;</a></span>consumer_reset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void consumer_reset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a> *&#160;</td>
          <td class="paramname"><em>consumer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00392">392</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00382">consumer::aggregate_state</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00378">consumer::already_out</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00062">AST_DEVICE_TOTAL</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00380">consumer::event_count</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00381">consumer::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00511">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00400">consumer_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a7266504ee9e007167ac28fd6f93ab392">already_out</a> = 0;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#ab92424784d1d3b3b593a0d9157d7de62">event_count</a> = 0;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a1acd064aff48cf4d5eafec1030f8429d">state</a> = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7">AST_DEVICE_TOTAL</a>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a1dc2b02affa6aed34a558a3ed9374224">aggregate_state</a> = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7">AST_DEVICE_TOTAL</a>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div><div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeaf790c1f212837af8d2db5193228102d7">AST_DEVICE_TOTAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00062">devicestate.h:62</a></div></div>
<div class="ttc" id="structconsumer_html_ab92424784d1d3b3b593a0d9157d7de62"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#ab92424784d1d3b3b593a0d9157d7de62">consumer::event_count</a></div><div class="ttdeci">int event_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00380">test_devicestate.c:380</a></div></div>
<div class="ttc" id="structconsumer_html_a7266504ee9e007167ac28fd6f93ab392"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a7266504ee9e007167ac28fd6f93ab392">consumer::already_out</a></div><div class="ttdeci">int already_out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00378">test_devicestate.c:378</a></div></div>
<div class="ttc" id="structconsumer_html_a1acd064aff48cf4d5eafec1030f8429d"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a1acd064aff48cf4d5eafec1030f8429d">consumer::state</a></div><div class="ttdeci">enum ast_device_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00381">test_devicestate.c:381</a></div></div>
<div class="ttc" id="structconsumer_html_a1dc2b02affa6aed34a558a3ed9374224"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a1dc2b02affa6aed34a558a3ed9374224">consumer::aggregate_state</a></div><div class="ttdeci">enum ast_device_state aggregate_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00382">test_devicestate.c:382</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c839861c56e7d87f1408bd006a9224d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c839861c56e7d87f1408bd006a9224d">&#9670;&nbsp;</a></span>consumer_wait_for()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void consumer_wait_for </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a> *&#160;</td>
          <td class="paramname"><em>consumer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00460">460</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00378">consumer::already_out</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00476">ao2_object_get_lockaddr()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00377">consumer::out</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00511">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;{</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      .tv_sec = start.tv_sec + 10,</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   };</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, consumer);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="keywordflow">while</span> (!consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a7266504ee9e007167ac28fd6f93ab392">already_out</a>) {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      res = <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a>(consumer), &amp;end);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="keywordflow">if</span> (!res || res == ETIMEDOUT) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div><div class="ttc" id="structconsumer_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">consumer::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00377">test_devicestate.c:377</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="astobj2_8h_html_a503b6c7ced96f9b56ec59c115cbeb29a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a></div><div class="ttdeci">void * ao2_object_get_lockaddr(void *obj)</div><div class="ttdoc">Return the mutex lock address of an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00476">astobj2.c:476</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structconsumer_html_a7266504ee9e007167ac28fd6f93ab392"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a7266504ee9e007167ac28fd6f93ab392">consumer::already_out</a></div><div class="ttdeci">int already_out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00378">test_devicestate.c:378</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af14d28b65551929353fa99ece013f5b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af14d28b65551929353fa99ece013f5b5">&#9670;&nbsp;</a></span>device_state_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void device_state_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stasis subscription callback for device state updates. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00254">254</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00242">ast_device_state_message::device</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00047">DEVSTATE_PROVIDER</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00051">DEVSTATE_PROVIDER_LEN</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00248">ast_device_state_message::eid</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00250">ast_device_state_message::state</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00229">update_cond</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00226">update_lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00666">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;{</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a> *payload;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../db/d92/structast__device__state__message.html#a8059c3b19eb356cf729e5d25b139647e">device</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message) != <a class="code" href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a>()) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   payload = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   state = payload-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a1acd064aff48cf4d5eafec1030f8429d">state</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   device = payload-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a8059c3b19eb356cf729e5d25b139647e">device</a>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(device)) {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <span class="comment">/* Ignore aggregate events */</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <span class="keywordflow">if</span> (!payload-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a39d1b63955a48c72508fa9f884d05762">eid</a>) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keywordflow">if</span> (strncasecmp(device, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a>, <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a8dca774a8912a6c33bfc4906d5fa729f">DEVSTATE_PROVIDER_LEN</a>)) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#ae22bbb2547e9b738ec77b60d3d4a8910">update_lock</a>);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;result_states, state);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a0951eb8ef729baf2355e4ec0f20669c3">update_cond</a>);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#ae22bbb2547e9b738ec77b60d3d4a8910">update_lock</a>);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eee"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a></div><div class="ttdeci">ast_device_state</div><div class="ttdoc">Device States. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00052">devicestate.h:52</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_ae22bbb2547e9b738ec77b60d3d4a8910"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#ae22bbb2547e9b738ec77b60d3d4a8910">update_lock</a></div><div class="ttdeci">static ast_mutex_t update_lock</div><div class="ttdoc">Mutex for update_cond. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00226">test_devicestate.c:226</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a16fc7b8877fc8d51366a254c2328dfff"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a16fc7b8877fc8d51366a254c2328dfff">DEVSTATE_PROVIDER</a></div><div class="ttdeci">#define DEVSTATE_PROVIDER</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00047">test_devicestate.c:47</a></div></div>
<div class="ttc" id="structast__device__state__message_html_a1acd064aff48cf4d5eafec1030f8429d"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html#a1acd064aff48cf4d5eafec1030f8429d">ast_device_state_message::state</a></div><div class="ttdeci">enum ast_device_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00250">devicestate.h:250</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a8dca774a8912a6c33bfc4906d5fa729f"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a8dca774a8912a6c33bfc4906d5fa729f">DEVSTATE_PROVIDER_LEN</a></div><div class="ttdeci">#define DEVSTATE_PROVIDER_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00051">test_devicestate.c:51</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="devicestate_8h_html_a9459272db1c8c968ed1aff1387f0f9fd"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a9459272db1c8c968ed1aff1387f0f9fd">ast_device_state_message_type</a></div><div class="ttdeci">struct stasis_message_type * ast_device_state_message_type(void)</div><div class="ttdoc">Get the Stasis message type for device state messages. </div></div>
<div class="ttc" id="structast__device__state__message_html_a39d1b63955a48c72508fa9f884d05762"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html#a39d1b63955a48c72508fa9f884d05762">ast_device_state_message::eid</a></div><div class="ttdeci">const struct ast_eid * eid</div><div class="ttdoc">The EID of the server where this message originated. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00248">devicestate.h:248</a></div></div>
<div class="ttc" id="structast__device__state__message_html_a8059c3b19eb356cf729e5d25b139647e"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html#a8059c3b19eb356cf729e5d25b139647e">ast_device_state_message::device</a></div><div class="ttdeci">const char * device</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00242">devicestate.h:242</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structast__device__state__message_html"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a></div><div class="ttdoc">The structure that contains device state. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00240">devicestate.h:240</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a0951eb8ef729baf2355e4ec0f20669c3"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a0951eb8ef729baf2355e4ec0f20669c3">update_cond</a></div><div class="ttdeci">static ast_cond_t update_cond</div><div class="ttdoc">Condition wait variable for device state updates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00229">test_devicestate.c:229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5839621be2d360c0b4d9153d813947b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5839621be2d360c0b4d9153d813947b9">&#9670;&nbsp;</a></span>devstate_prov_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> devstate_prov_cb </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00287">287</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00241">current_device_state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00622">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;{</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a3dd46af9ba2df93b3d27a84c6b184a5b">current_device_state</a>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div><div class="ttc" id="test__devicestate_8c_html_a3dd46af9ba2df93b3d27a84c6b184a5b"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a3dd46af9ba2df93b3d27a84c6b184a5b">current_device_state</a></div><div class="ttdeci">static enum ast_device_state current_device_state</div><div class="ttdoc">The current device state for our device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00241">test_devicestate.c:241</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00944">944</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l00539">ast_channel_register()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00127">AST_TEST_REGISTER</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, and <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;{</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;result_states, 8) == -1) {</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a1642101577110dd3af86260ac92344d1">chan_test_devicestate</a>)) {</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;result_states);</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;   }</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(device_state_aggregation_test);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(device2extenstate_test);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(devstate_prov_add);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(devstate_prov_del);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(devstate_changed);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(devstate_conversions);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(devstate_channels);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a34f64a69c09d98ceb693b077efd7ef97"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a></div><div class="ttdeci">#define AST_TEST_REGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00127">test.h:127</a></div></div>
<div class="ttc" id="channel_8h_html_ab5f3776fda943e52820ceeee5835c1b4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a></div><div class="ttdeci">int ast_channel_register(const struct ast_channel_tech *tech)</div><div class="ttdoc">Register a channel technology (a new channel driver) Called by a channel module to register the kind ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00539">channel.c:539</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a1642101577110dd3af86260ac92344d1"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a1642101577110dd3af86260ac92344d1">chan_test_devicestate</a></div><div class="ttdeci">struct ast_channel_tech chan_test_devicestate</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00919">test_devicestate.c:919</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9f3ce4b8ae21d8e81cacc24992ecb3aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f3ce4b8ae21d8e81cacc24992ecb3aa">&#9670;&nbsp;</a></span>remove_device_states_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int remove_device_states_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00479">479</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00683">ast_device_state_topic()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00242">ast_device_state_message::device</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache_clear_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00043">UNIT_TEST_DEVICE_IDENTIFIER</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00498">cache_cleanup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;{</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg = obj;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a> *device_state = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a>, device_state-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a8059c3b19eb356cf729e5d25b139647e">device</a>)) {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="comment">/* Not a unit test device */</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a>(msg);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   <span class="keywordflow">if</span> (msg) {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="comment">/* topic guaranteed to have been created by this point */</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../da/da2/devicestate_8h.html#a85810de734ea25b982144651195bbebb">ast_device_state_topic</a>(device_state-&gt;<a class="code" href="../../db/d92/structast__device__state__message.html#a8059c3b19eb356cf729e5d25b139647e">device</a>), msg);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div><div class="ttc" id="devicestate_8h_html_a85810de734ea25b982144651195bbebb"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a85810de734ea25b982144651195bbebb">ast_device_state_topic</a></div><div class="ttdeci">struct stasis_topic * ast_device_state_topic(const char *device)</div><div class="ttdoc">Get the Stasis topic for device state messages for a specific device. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00683">devicestate.c:683</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a9f8e098b01daf5dda7dbb75af7ce191c"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a9f8e098b01daf5dda7dbb75af7ce191c">UNIT_TEST_DEVICE_IDENTIFIER</a></div><div class="ttdeci">#define UNIT_TEST_DEVICE_IDENTIFIER</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00043">test_devicestate.c:43</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="stasis_8h_html_a169e12055004ecf0ecc355b3e3e1f218"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a></div><div class="ttdeci">struct stasis_message * stasis_cache_clear_create(struct stasis_message *message)</div><div class="ttdoc">A message which instructs the caching topic to remove an entry from its cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache.c:778</a></div></div>
<div class="ttc" id="structast__device__state__message_html_a8059c3b19eb356cf729e5d25b139647e"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html#a8059c3b19eb356cf729e5d25b139647e">ast_device_state_message::device</a></div><div class="ttdeci">const char * device</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00242">devicestate.h:242</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__device__state__message_html"><div class="ttname"><a href="../../db/d92/structast__device__state__message.html">ast_device_state_message</a></div><div class="ttdoc">The structure that contains device state. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00240">devicestate.h:240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e215bbc20cd6b3f40b901752deb2322"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e215bbc20cd6b3f40b901752deb2322">&#9670;&nbsp;</a></span>safe_hangup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void safe_hangup </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>object</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00861">861</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00871">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;{</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = object;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   }</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan);</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00925">925</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l00570">ast_channel_unregister()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00128">AST_TEST_UNREGISTER</a>, and <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>.</p>
<div class="fragment"><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;{</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;result_states);</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a1642101577110dd3af86260ac92344d1">chan_test_devicestate</a>);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(device2extenstate_test);</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(device_state_aggregation_test);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(devstate_prov_add);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(devstate_prov_del);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(devstate_changed);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(devstate_conversions);</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(devstate_channels);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="channel_8h_html_a53b708b7fc71dcbcd33acae0ad4d7ef8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a></div><div class="ttdeci">void ast_channel_unregister(const struct ast_channel_tech *tech)</div><div class="ttdoc">Unregister a channel technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00570">channel.c:570</a></div></div>
<div class="ttc" id="test_8h_html_a79bc64a935b14b1b181156e5ada58ead"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a></div><div class="ttdeci">#define AST_TEST_UNREGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00128">test.h:128</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a1642101577110dd3af86260ac92344d1"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a1642101577110dd3af86260ac92344d1">chan_test_devicestate</a></div><div class="ttdeci">struct ast_channel_tech chan_test_devicestate</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00919">test_devicestate.c:919</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ada556dc0525bd17dda8684bfeea5560e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada556dc0525bd17dda8684bfeea5560e">&#9670;&nbsp;</a></span>wait_for_channel_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int wait_for_channel_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait until the test channel driver's devicestate callback is called. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00842">842</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00839">chan_callback_called</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00235">channel_cb_cond</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00232">channel_cb_lock</a>, and <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00871">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;{</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <span class="keyword">struct </span>timeval wait_now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   <span class="keyword">struct </span>timespec wait_time = { .tv_sec = wait_now.tv_sec + 1, .tv_nsec = wait_now.tv_usec * 1000 };</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a7bcdad9f75ef610d6fd1d4c0d92052d9">channel_cb_lock</a>);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a94668fa3051e550190ad436cccd7f0d6">chan_callback_called</a>) {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      error = <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a30465df28c239b10bd7f78477571fa38">channel_cb_cond</a>, &amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a7bcdad9f75ef610d6fd1d4c0d92052d9">channel_cb_lock</a>, &amp;wait_time);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      <span class="keywordflow">if</span> (error == ETIMEDOUT) {</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Test timed out while waiting channel callback\n&quot;</span>);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      }</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   }</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a7bcdad9f75ef610d6fd1d4c0d92052d9">channel_cb_lock</a>);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a94668fa3051e550190ad436cccd7f0d6">chan_callback_called</a>;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;}</div><div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a7bcdad9f75ef610d6fd1d4c0d92052d9"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a7bcdad9f75ef610d6fd1d4c0d92052d9">channel_cb_lock</a></div><div class="ttdeci">static ast_mutex_t channel_cb_lock</div><div class="ttdoc">Mutext for channel_cb_cond. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00232">test_devicestate.c:232</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a94668fa3051e550190ad436cccd7f0d6"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a94668fa3051e550190ad436cccd7f0d6">chan_callback_called</a></div><div class="ttdeci">static int chan_callback_called</div><div class="ttdoc">Whether or not the channel device state callback was called. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00839">test_devicestate.c:839</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a30465df28c239b10bd7f78477571fa38"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a30465df28c239b10bd7f78477571fa38">channel_cb_cond</a></div><div class="ttdeci">static ast_cond_t channel_cb_cond</div><div class="ttdoc">Condition wait variable for channel tech device state cb. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00235">test_devicestate.c:235</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8697adb01936701cbc76d5d9f3dfd42b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8697adb01936701cbc76d5d9f3dfd42b">&#9670;&nbsp;</a></span>wait_for_device_state_updates()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int wait_for_device_state_updates </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>expected_updates</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00292">292</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00229">update_cond</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00226">update_lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00666">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;{</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keyword">struct </span>timeval wait_now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <span class="keyword">struct </span>timespec wait_time = { .tv_sec = wait_now.tv_sec + 1, .tv_nsec = wait_now.tv_usec * 1000 };</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#ae22bbb2547e9b738ec77b60d3d4a8910">update_lock</a>);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;result_states) != expected_updates) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      error = <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#a0951eb8ef729baf2355e4ec0f20669c3">update_cond</a>, &amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#ae22bbb2547e9b738ec77b60d3d4a8910">update_lock</a>, &amp;wait_time);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">if</span> (error == ETIMEDOUT) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Test timed out while waiting for %d expected updates\n&quot;</span>, expected_updates);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d6/dd1/test__devicestate_8c.html#ae22bbb2547e9b738ec77b60d3d4a8910">update_lock</a>);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Received %zu of %d updates\n&quot;</span>, <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;result_states), expected_updates);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <span class="keywordflow">return</span> !(<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;result_states) == expected_updates);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div><div class="ttc" id="test__devicestate_8c_html_ae22bbb2547e9b738ec77b60d3d4a8910"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#ae22bbb2547e9b738ec77b60d3d4a8910">update_lock</a></div><div class="ttdeci">static ast_mutex_t update_lock</div><div class="ttdoc">Mutex for update_cond. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00226">test_devicestate.c:226</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a0951eb8ef729baf2355e4ec0f20669c3"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a0951eb8ef729baf2355e4ec0f20669c3">update_cond</a></div><div class="ttdeci">static ast_cond_t update_cond</div><div class="ttdoc">Condition wait variable for device state updates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00229">test_devicestate.c:229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Device State Test&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00969">969</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00969">969</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

</div>
</div>
<a id="a94668fa3051e550190ad436cccd7f0d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94668fa3051e550190ad436cccd7f0d6">&#9670;&nbsp;</a></span>chan_callback_called</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int chan_callback_called</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether or not the channel device state callback was called. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00839">839</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00871">AST_TEST_DEFINE()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00907">chan_test_devicestate_cb()</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00842">wait_for_channel_callback()</a>.</p>

</div>
</div>
<a id="ad7b8d8b99d184d28a5f0e9fe66a47261"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7b8d8b99d184d28a5f0e9fe66a47261">&#9670;&nbsp;</a></span>chan_idx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int chan_idx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used to assign an increasing integer to channel name. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00054">54</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00871">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="a1642101577110dd3af86260ac92344d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1642101577110dd3af86260ac92344d1">&#9670;&nbsp;</a></span>chan_test_devicestate</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> chan_test_devicestate</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .type = <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a669154850d6e91f2aa6e9919b10fc94e">DEVICE_STATE_CHANNEL_TYPE</a>,</div><div class="line">   .description = <span class="stringliteral">&quot;Device State Unit Test Channel Driver&quot;</span>,</div><div class="line">   .devicestate = <a class="code" href="../../d6/dd1/test__devicestate_8c.html#a698f5ac473038dcb52b27aeb12d95635">chan_test_devicestate_cb</a>,</div><div class="line">}</div><div class="ttc" id="test__devicestate_8c_html_a669154850d6e91f2aa6e9919b10fc94e"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a669154850d6e91f2aa6e9919b10fc94e">DEVICE_STATE_CHANNEL_TYPE</a></div><div class="ttdeci">#define DEVICE_STATE_CHANNEL_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00045">test_devicestate.c:45</a></div></div>
<div class="ttc" id="test__devicestate_8c_html_a698f5ac473038dcb52b27aeb12d95635"><div class="ttname"><a href="../../d6/dd1/test__devicestate_8c.html#a698f5ac473038dcb52b27aeb12d95635">chan_test_devicestate_cb</a></div><div class="ttdeci">static int chan_test_devicestate_cb(const char *device_number)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00907">test_devicestate.c:907</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00919">919</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

</div>
</div>
<a id="a30465df28c239b10bd7f78477571fa38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30465df28c239b10bd7f78477571fa38">&#9670;&nbsp;</a></span>channel_cb_cond</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> channel_cb_cond</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Condition wait variable for channel tech device state cb. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00235">235</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00907">chan_test_devicestate_cb()</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00842">wait_for_channel_callback()</a>.</p>

</div>
</div>
<a id="a7bcdad9f75ef610d6fd1d4c0d92052d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bcdad9f75ef610d6fd1d4c0d92052d9">&#9670;&nbsp;</a></span>channel_cb_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> channel_cb_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutext for <code>channel_cb_cond</code>. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00232">232</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00907">chan_test_devicestate_cb()</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00842">wait_for_channel_callback()</a>.</p>

</div>
</div>
<a id="a1beadf955c24df04dde2577d31587ce0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1beadf955c24df04dde2577d31587ce0">&#9670;&nbsp;</a></span>combined_results</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int combined_results[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00057">57</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00312">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="a3dd46af9ba2df93b3d27a84c6b184a5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dd46af9ba2df93b3d27a84c6b184a5b">&#9670;&nbsp;</a></span>current_device_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> current_device_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current device state for our device state provider. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00241">241</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00666">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00287">devstate_prov_cb()</a>.</p>

</div>
</div>
<a id="a98f00c3fe14665008513cfba5fe26a24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98f00c3fe14665008513cfba5fe26a24">&#9670;&nbsp;</a></span>exten_results</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int exten_results[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00141">141</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00312">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="a0951eb8ef729baf2355e4ec0f20669c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0951eb8ef729baf2355e4ec0f20669c3">&#9670;&nbsp;</a></span>update_cond</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> update_cond</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Condition wait variable for device state updates. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00229">229</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00254">device_state_cb()</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00292">wait_for_device_state_updates()</a>.</p>

</div>
</div>
<a id="ae22bbb2547e9b738ec77b60d3d4a8910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae22bbb2547e9b738ec77b60d3d4a8910">&#9670;&nbsp;</a></span>update_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> update_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex for <code>update_cond</code>. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00226">226</a> of file <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html">test_devicestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00244">clear_result_states()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00254">device_state_cb()</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00292">wait_for_device_state_updates()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:54 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
