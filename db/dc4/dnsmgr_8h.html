<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: dnsmgr.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dnsmgr.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Background DNS update manager.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/df1/netsock2_8h_source.html">asterisk/netsock2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/srv_8h_source.html">asterisk/srv.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for dnsmgr.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d3f/dnsmgr_8h__incl.png" border="0" usemap="#dnsmgr_8h" alt=""/></div>
<map name="dnsmgr_8h" id="dnsmgr_8h">
<area shape="rect" id="node2" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="105,80,252,107"/>
<area shape="rect" id="node7" href="../../d5/d60/srv_8h.html" title="Support for DNS SRV records, used in to locate SIP services. " alt="" coords="276,80,383,107"/>
<area shape="rect" id="node5" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="250,155,377,181"/>
<area shape="rect" id="node6" href="../../d7/d5b/options_8h.html" title="Options provided by main asterisk program. " alt="" coords="246,229,381,256"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d69/dnsmgr_8h__dep__incl.png" border="0" usemap="#dnsmgr_8hdep" alt=""/></div>
<map name="dnsmgr_8hdep" id="dnsmgr_8hdep">
<area shape="rect" id="node2" href="../../d5/dff/chan__iax2_8c.html" title="Implementation of Inter&#45;Asterisk eXchange Version 2 as specified in RFC 5456. " alt="" coords="3380,80,3477,107"/>
<area shape="rect" id="node3" href="../../d8/d8c/res__pjsip_8h.html" title="res_pjsip.h" alt="" coords="3502,80,3593,107"/>
<area shape="rect" id="node49" href="../../d5/dfe/chan__sip_8c.html" title="Implementation of Session Initiation Protocol. " alt="" coords="3617,80,3707,107"/>
<area shape="rect" id="node50" href="../../d0/d5d/dnsmgr_8c.html" title="Background DNS update manager. " alt="" coords="3731,80,3812,107"/>
<area shape="rect" id="node4" href="../../d0/d29/chan__pjsip_8c.html" title="PSJIP SIP Channel Driver. " alt="" coords="5,162,105,189"/>
<area shape="rect" id="node5" href="../../d9/d6d/cli__commands_8c.html" title="PJSIP channel CLI functions. " alt="" coords="130,162,255,189"/>
<area shape="rect" id="node6" href="../../de/dfc/pjsip_2dialplan__functions_8c.html" title="PJSIP channel dialplan functions. " alt="" coords="279,162,426,189"/>
<area shape="rect" id="node7" href="../../dd/d92/func__pjsip__aor_8c.html" title="Get information about a PJSIP AOR. " alt="" coords="450,162,573,189"/>
<area shape="rect" id="node8" href="../../de/d6a/func__pjsip__contact_8c.html" title="Get information about a PJSIP contact. " alt="" coords="597,162,748,189"/>
<area shape="rect" id="node9" href="../../d0/d7b/func__pjsip__endpoint_8c.html" title="Get information about a PJSIP endpoint. " alt="" coords="772,162,931,189"/>
<area shape="rect" id="node10" href="../../d6/d5d/pjsip__outbound__registrations_8c.html" title="Prometheus PJSIP Outbound Registration Metrics. " alt="" coords="955,162,1172,189"/>
<area shape="rect" id="node11" href="../../d7/da2/res__hep__pjsip_8c.html" title="PJSIP logging with Homer. " alt="" coords="1197,162,1317,189"/>
<area shape="rect" id="node12" href="../../d5/dcb/config__auth_8c.html" title="config_auth.c" alt="" coords="1341,162,1447,189"/>
<area shape="rect" id="node13" href="../../d9/d9e/config__domain__aliases_8c.html" title="config_domain_aliases.c" alt="" coords="1472,162,1649,189"/>
<area shape="rect" id="node14" href="../../dd/dfd/config__global_8c.html" title="config_global.c" alt="" coords="1673,162,1789,189"/>
<area shape="rect" id="node15" href="../../df/dfd/config__system_8c.html" title="config_system.c" alt="" coords="1814,162,1939,189"/>
<area shape="rect" id="node16" href="../../d3/d17/config__transport_8c.html" title="config_transport.c" alt="" coords="1964,162,2101,189"/>
<area shape="rect" id="node17" href="../../d0/dad/location_8c.html" title="location.c" alt="" coords="2126,162,2209,189"/>
<area shape="rect" id="node18" href="../../d0/df0/pjsip__cli_8c.html" title="pjsip_cli.c" alt="" coords="2233,162,2315,189"/>
<area shape="rect" id="node19" href="../../dc/df6/pjsip__configuration_8c.html" title="pjsip_configuration.c" alt="" coords="2339,162,2491,189"/>
<area shape="rect" id="node20" href="../../d7/dad/pjsip__distributor_8c.html" title="pjsip_distributor.c" alt="" coords="2515,162,2649,189"/>
<area shape="rect" id="node21" href="../../db/d73/pjsip__global__headers_8c.html" title="pjsip_global_headers.c" alt="" coords="2673,162,2840,189"/>
<area shape="rect" id="node22" href="../../d3/d9e/pjsip__message__filter_8c.html" title="pjsip_message_filter.c" alt="" coords="2865,162,3027,189"/>
<area shape="rect" id="node23" href="../../df/dda/pjsip__options_8c.html" title="pjsip_options.c" alt="" coords="3052,162,3168,189"/>
<area shape="rect" id="node24" href="../../d4/d43/pjsip__resolver_8c.html" title="pjsip_resolver.c" alt="" coords="3192,162,3311,189"/>
<area shape="rect" id="node25" href="../../de/dfa/pjsip__scheduler_8c.html" title="res_pjsip Scheduler " alt="" coords="3334,162,3465,189"/>
<area shape="rect" id="node26" href="../../d2/dc0/pjsip__session_8c.html" title="pjsip_session.c" alt="" coords="3489,162,3606,189"/>
<area shape="rect" id="node27" href="../../d1/d94/pjsip__transport__events_8c.html" title="Manages the global transport event notification callbacks. " alt="" coords="3630,162,3809,189"/>
<area shape="rect" id="node28" href="../../da/db9/pjsip__transport__management_8c.html" title="pjsip_transport_management.c" alt="" coords="3833,162,4056,189"/>
<area shape="rect" id="node29" href="../../d2/d63/res_2res__pjsip_2security__events_8c.html" title="Generate security events in the PJSIP channel. " alt="" coords="4081,162,4214,189"/>
<area shape="rect" id="node30" href="../../de/d96/res__pjsip_8c.html" title="res_pjsip.c" alt="" coords="4239,162,4328,189"/>
<area shape="rect" id="node31" href="../../d5/d5e/res__pjsip__acl_8c.html" title="res_pjsip_acl.c" alt="" coords="4353,162,4467,189"/>
<area shape="rect" id="node32" href="../../dd/db2/res__pjsip__authenticator__digest_8c.html" title="res_pjsip_authenticator\l_digest.c" alt="" coords="4491,155,4662,196"/>
<area shape="rect" id="node33" href="../../dc/d2a/res__pjsip__caller__id_8c.html" title="res_pjsip_caller_id.c" alt="" coords="4687,162,4835,189"/>
<area shape="rect" id="node34" href="../../d9/d63/res__pjsip__config__wizard_8c.html" title="PJSIP Configuration Wizard. " alt="" coords="4859,162,5041,189"/>
<area shape="rect" id="node35" href="../../d9/d81/res__pjsip__dialog__info__body__generator_8c.html" title="res_pjsip_dialog_info\l_body_generator.c" alt="" coords="5065,155,5219,196"/>
<area shape="rect" id="node36" href="../../d5/da9/res__pjsip__diversion_8c.html" title="res_pjsip_diversion.c" alt="" coords="5243,162,5396,189"/>
<area shape="rect" id="node37" href="../../d2/d3b/res__pjsip__dlg__options_8c.html" title="res_pjsip_dlg_options.c" alt="" coords="5420,162,5589,189"/>
<area shape="rect" id="node38" href="../../d8/d66/res__pjsip__dtmf__info_8c.html" title="res_pjsip_dtmf_info.c" alt="" coords="5613,162,5769,189"/>
<area shape="rect" id="node39" href="../../d6/d5b/res__pjsip__empty__info_8c.html" title="res_pjsip_empty_info.c" alt="" coords="5793,162,5960,189"/>
<area shape="rect" id="node40" href="../../df/dd7/res__pjsip__endpoint__identifier__anonymous_8c.html" title="res_pjsip_endpoint\l_identifier_anonymous.c" alt="" coords="5984,155,6161,196"/>
<area shape="rect" id="node41" href="../../df/d91/res__pjsip__endpoint__identifier__ip_8c.html" title="res_pjsip_endpoint\l_identifier_ip.c" alt="" coords="6186,155,6327,196"/>
<area shape="rect" id="node42" href="../../d9/d24/res__pjsip__endpoint__identifier__user_8c.html" title="res_pjsip_endpoint\l_identifier_user.c" alt="" coords="6351,155,6493,196"/>
<area shape="rect" id="node43" href="../../d2/d3d/res__pjsip__exten__state_8c.html" title="res_pjsip_exten_state.c" alt="" coords="6517,162,6689,189"/>
<area shape="rect" id="node44" href="../../d6/dd6/res__pjsip__header__funcs_8c.html" title="res_pjsip_header_funcs.c" alt="" coords="6713,162,6896,189"/>
<area shape="rect" id="node45" href="../../d3/dea/res__pjsip__history_8c.html" title="PJSIP History. " alt="" coords="6920,162,7057,189"/>
<area shape="rect" id="node46" href="../../d0/d73/res__pjsip__logger_8c.html" title="res_pjsip_logger.c" alt="" coords="7081,162,7216,189"/>
<area shape="rect" id="node47" href="../../da/d83/res__pjsip__messaging_8c.html" title="res_pjsip_messaging.c" alt="" coords="7240,162,7407,189"/>
<area shape="rect" id="node48" href="../../d8/d25/res__pjsip__mwi_8c.html" title="res_pjsip_mwi.c" alt="" coords="7431,162,7552,189"/>
</map>
</div>
</div>
<p><a href="../../db/dc4/dnsmgr_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a775690d2158634eba50a0825beb33511"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dc4/dnsmgr_8h.html#a775690d2158634eba50a0825beb33511">dns_update_func</a>) (struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *old_addr, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *new_addr, void *data)</td></tr>
<tr class="separator:a775690d2158634eba50a0825beb33511"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad43ae5f58db3498b5b1830bd98677117"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dc4/dnsmgr_8h.html#ad43ae5f58db3498b5b1830bd98677117">ast_dnsmgr_changed</a> (struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:ad43ae5f58db3498b5b1830bd98677117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check is see if a dnsmgr entry has changed.  <a href="#ad43ae5f58db3498b5b1830bd98677117">More...</a><br /></td></tr>
<tr class="separator:ad43ae5f58db3498b5b1830bd98677117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45925bf0069c6da3eb1f17eca54a5035"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dc4/dnsmgr_8h.html#a45925bf0069c6da3eb1f17eca54a5035">ast_dnsmgr_get</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, const char *<a class="el" href="../../d3/d5a/ccss_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>)</td></tr>
<tr class="memdesc:a45925bf0069c6da3eb1f17eca54a5035"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a new DNS manager entry.  <a href="#a45925bf0069c6da3eb1f17eca54a5035">More...</a><br /></td></tr>
<tr class="separator:a45925bf0069c6da3eb1f17eca54a5035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bd92dad21a119434e9c286499c817b6"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dc4/dnsmgr_8h.html#a5bd92dad21a119434e9c286499c817b6">ast_dnsmgr_get_family</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, const char *<a class="el" href="../../d3/d5a/ccss_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>, unsigned int family)</td></tr>
<tr class="memdesc:a5bd92dad21a119434e9c286499c817b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a new DNS manager entry.  <a href="#a5bd92dad21a119434e9c286499c817b6">More...</a><br /></td></tr>
<tr class="separator:a5bd92dad21a119434e9c286499c817b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7299760ea18ab2ff1badadcd8af4dd0c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dc4/dnsmgr_8h.html#a7299760ea18ab2ff1badadcd8af4dd0c">ast_dnsmgr_lookup</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> **dnsmgr, const char *<a class="el" href="../../d3/d5a/ccss_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>)</td></tr>
<tr class="memdesc:a7299760ea18ab2ff1badadcd8af4dd0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate and initialize a DNS manager entry.  <a href="#a7299760ea18ab2ff1badadcd8af4dd0c">More...</a><br /></td></tr>
<tr class="separator:a7299760ea18ab2ff1badadcd8af4dd0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a537cbd033c88567a4ec2c03df80e6994"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dc4/dnsmgr_8h.html#a537cbd033c88567a4ec2c03df80e6994">ast_dnsmgr_lookup_cb</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> **dnsmgr, const char *<a class="el" href="../../d3/d5a/ccss_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>, <a class="el" href="../../db/dc4/dnsmgr_8h.html#a775690d2158634eba50a0825beb33511">dns_update_func</a> func, void *data)</td></tr>
<tr class="memdesc:a537cbd033c88567a4ec2c03df80e6994"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate and initialize a DNS manager entry, with update callback.  <a href="#a537cbd033c88567a4ec2c03df80e6994">More...</a><br /></td></tr>
<tr class="separator:a537cbd033c88567a4ec2c03df80e6994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add74c87320b8447b69e776931520e994"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dc4/dnsmgr_8h.html#add74c87320b8447b69e776931520e994">ast_dnsmgr_refresh</a> (struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:add74c87320b8447b69e776931520e994"><td class="mdescLeft">&#160;</td><td class="mdescRight">Force a refresh of a dnsmgr entry.  <a href="#add74c87320b8447b69e776931520e994">More...</a><br /></td></tr>
<tr class="separator:add74c87320b8447b69e776931520e994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0255399a507b71ae563fc2caf94d749c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dc4/dnsmgr_8h.html#a0255399a507b71ae563fc2caf94d749c">ast_dnsmgr_release</a> (struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:a0255399a507b71ae563fc2caf94d749c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a DNS manager entry.  <a href="#a0255399a507b71ae563fc2caf94d749c">More...</a><br /></td></tr>
<tr class="separator:a0255399a507b71ae563fc2caf94d749c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Background DNS update manager. </p>

<p class="definition">Definition in file <a class="el" href="../../db/dc4/dnsmgr_8h_source.html">dnsmgr.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a775690d2158634eba50a0825beb33511"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a775690d2158634eba50a0825beb33511">&#9670;&nbsp;</a></span>dns_update_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* dns_update_func) (struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *old_addr, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *new_addr, void *data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/dc4/dnsmgr_8h_source.html#l00040">40</a> of file <a class="el" href="../../db/dc4/dnsmgr_8h_source.html">dnsmgr.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad43ae5f58db3498b5b1830bd98677117"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad43ae5f58db3498b5b1830bd98677117">&#9670;&nbsp;</a></span>ast_dnsmgr_changed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_dnsmgr_changed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check is see if a dnsmgr entry has changed. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>if the dnsmgr entry has changed since the last call to this function </td></tr>
    <tr><td class="paramname">zero</td><td>if the dnsmgr entry has not changed since the last call to this function </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00247">247</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00074">ast_dnsmgr_entry::changed</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00079">ast_dnsmgr_entry::lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12136">iax2_do_register()</a>.</p>
<div class="fragment"><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#af28d4213d4bda49ab19d2451ec6da277">changed</a>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   changed = entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#af28d4213d4bda49ab19d2451ec6da277">changed</a>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#af28d4213d4bda49ab19d2451ec6da277">changed</a> = 0;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#af28d4213d4bda49ab19d2451ec6da277">changed</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div><div class="ttc" id="structast__dnsmgr__entry_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">ast_dnsmgr_entry::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00079">dnsmgr.c:79</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_af28d4213d4bda49ab19d2451ec6da277"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#af28d4213d4bda49ab19d2451ec6da277">ast_dnsmgr_entry::changed</a></div><div class="ttdeci">unsigned int changed</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00074">dnsmgr.c:74</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a45925bf0069c6da3eb1f17eca54a5035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45925bf0069c6da3eb1f17eca54a5035">&#9670;&nbsp;</a></span>ast_dnsmgr_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a>* ast_dnsmgr_get </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a new DNS manager entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the hostname </td></tr>
    <tr><td class="paramname">result</td><td>where the DNS manager should store the IP address as it refreshes it. </td></tr>
    <tr><td class="paramname">service</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>This function allocates a new DNS manager entry object, and fills it with the provided hostname and IP address. This function does not force an initial lookup of the IP address. So, generally, this should be used when the initial address is already known.</p>
<dl class="section return"><dt>Returns</dt><dd>a DNS manager entry </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.6.1 result changed from struct in_addr to struct sockaddr_in to store port number </dd>
<dd>
1.8.0 result changed from struct ast_sockaddr_in to <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a> for IPv6 support </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00131">131</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00106">ast_dnsmgr_get_family()</a>.</p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;{</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a5bd92dad21a119434e9c286499c817b6">ast_dnsmgr_get_family</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, result, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>, 0);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a495cc24c1947d49a2b6de488a45c9d72"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a></div><div class="ttdeci">enum ast_cc_service_type service</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00949">chan_sip.c:949</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a5bd92dad21a119434e9c286499c817b6"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a5bd92dad21a119434e9c286499c817b6">ast_dnsmgr_get_family</a></div><div class="ttdeci">struct ast_dnsmgr_entry * ast_dnsmgr_get_family(const char *name, struct ast_sockaddr *result, const char *service, unsigned int family)</div><div class="ttdoc">Allocate a new DNS manager entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00106">dnsmgr.c:106</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5bd92dad21a119434e9c286499c817b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bd92dad21a119434e9c286499c817b6">&#9670;&nbsp;</a></span>ast_dnsmgr_get_family()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a>* ast_dnsmgr_get_family </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>family</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a new DNS manager entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the hostname </td></tr>
    <tr><td class="paramname">result</td><td>where the DNS manager should store the IP address as it refreshes it. </td></tr>
    <tr><td class="paramname">service</td><td></td></tr>
    <tr><td class="paramname">family</td><td>Address family to filter DNS addresses.</td></tr>
  </table>
  </dd>
</dl>
<p>This function allocates a new DNS manager entry object, and fills it with the provided hostname and IP address. This function does not force an initial lookup of the IP address. So, generally, this should be used when the initial address is already known.</p>
<dl class="section return"><dt>Returns</dt><dd>a DNS manager entry </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00106">106</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00717">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00072">ast_dnsmgr_entry::family</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00079">ast_dnsmgr_entry::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00068">ast_dnsmgr_entry::result</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00070">ast_dnsmgr_entry::service</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00131">ast_dnsmgr_get()</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00151">internal_dnsmgr_lookup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   <span class="keywordtype">int</span> total_size = <span class="keyword">sizeof</span>(*entry) + strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) + (<a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a> ? strlen(<a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>) + 1 : 0);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <span class="keywordflow">if</span> (!result || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) || !(entry = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, total_size))) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#aaf0b1875e63ce28096a33bd373c4a2d2">result</a> = <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   strcpy(entry-&gt;name, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a95c05b2a02d1d31907fde00f0051aed2">service</a> = ((<span class="keywordtype">char</span> *) entry) + <span class="keyword">sizeof</span>(*entry) + strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      strcpy(entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a95c05b2a02d1d31907fde00f0051aed2">service</a>, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a591674bedc8a4e77337bfc871d6d83be">family</a> = <a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a591674bedc8a4e77337bfc871d6d83be">family</a>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>, entry, list);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <span class="keywordflow">return</span> entry;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div><div class="ttc" id="structast__dnsmgr__entry_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">ast_dnsmgr_entry::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00079">dnsmgr.c:79</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a495cc24c1947d49a2b6de488a45c9d72"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a></div><div class="ttdeci">enum ast_cc_service_type service</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00949">chan_sip.c:949</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00066">dnsmgr.c:66</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_a591674bedc8a4e77337bfc871d6d83be"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#a591674bedc8a4e77337bfc871d6d83be">ast_dnsmgr_entry::family</a></div><div class="ttdeci">unsigned int family</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00072">dnsmgr.c:72</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_aaf0b1875e63ce28096a33bd373c4a2d2"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#aaf0b1875e63ce28096a33bd373c4a2d2">ast_dnsmgr_entry::result</a></div><div class="ttdeci">struct ast_sockaddr * result</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00068">dnsmgr.c:68</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="structentry__list_html"><div class="ttname"><a href="../../d6/d52/structentry__list.html">entry_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00085">dnsmgr.c:85</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_a95c05b2a02d1d31907fde00f0051aed2"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#a95c05b2a02d1d31907fde00f0051aed2">ast_dnsmgr_entry::service</a></div><div class="ttdeci">char * service</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00070">dnsmgr.c:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7299760ea18ab2ff1badadcd8af4dd0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7299760ea18ab2ff1badadcd8af4dd0c">&#9670;&nbsp;</a></span>ast_dnsmgr_lookup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_dnsmgr_lookup </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> **&#160;</td>
          <td class="paramname"><em>dnsmgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate and initialize a DNS manager entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the hostname </td></tr>
    <tr><td class="paramname">result</td><td>where to store the IP address as the DNS manager refreshes it. The address family is used as an input parameter to filter the returned addresses. If it is 0, both IPv4 and IPv6 addresses can be returned. </td></tr>
    <tr><td class="paramname">dnsmgr</td><td>Where to store the allocate DNS manager entry </td></tr>
    <tr><td class="paramname">service</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function allocates a new DNS manager entry object, and fills it with the provided hostname and IP address. This function <em>does</em> force an initial lookup, so it may block for some period of time.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">non-zero</td><td>failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section version"><dt>Version</dt><dd>1.6.1 result changed from struct in_addr to struct aockaddr_in to store port number </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00191">191</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00151">internal_dnsmgr_lookup()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08541">__iax2_do_register_s()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08782">iax2_append_register()</a>, and <a class="el" href="../../d3/d17/config__transport_8c_source.html#l00632">transport_apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;{</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a47531bb8c9d97ca8276b74c05bc7aea2">internal_dnsmgr_lookup</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, result, dnsmgr, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a495cc24c1947d49a2b6de488a45c9d72"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a></div><div class="ttdeci">enum ast_cc_service_type service</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00949">chan_sip.c:949</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a47531bb8c9d97ca8276b74c05bc7aea2"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a47531bb8c9d97ca8276b74c05bc7aea2">internal_dnsmgr_lookup</a></div><div class="ttdeci">static int internal_dnsmgr_lookup(const char *name, struct ast_sockaddr *result, struct ast_dnsmgr_entry **dnsmgr, const char *service, dns_update_func func, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00151">dnsmgr.c:151</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a537cbd033c88567a4ec2c03df80e6994"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a537cbd033c88567a4ec2c03df80e6994">&#9670;&nbsp;</a></span>ast_dnsmgr_lookup_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_dnsmgr_lookup_cb </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> **&#160;</td>
          <td class="paramname"><em>dnsmgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/dc4/dnsmgr_8h.html#a775690d2158634eba50a0825beb33511">dns_update_func</a>&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate and initialize a DNS manager entry, with update callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the hostname </td></tr>
    <tr><td class="paramname">result</td><td>The addr which is intended to be updated in the update callback when DNS manager calls it on refresh. The address family is used as an input parameter to filter the returned addresses. If it is 0, both IPv4 and IPv6 addresses can be returned. </td></tr>
    <tr><td class="paramname">dnsmgr</td><td>Where to store the allocate DNS manager entry </td></tr>
    <tr><td class="paramname">service</td><td></td></tr>
    <tr><td class="paramname">func</td><td>The update callback function The update callback will be called when DNS manager detects that an IP address has been changed. Instead of updating the addr itself, DNS manager will call this callback function with the old and new addresses. It is the responsibility of the callback to perform any updates </td></tr>
    <tr><td class="paramname">data</td><td>A pointer to data that will be passed through to the callback function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function allocates a new DNS manager entry object, and fills it with the provided hostname and IP address. This function <em>does</em> force an initial lookup, so it may block for some period of time.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">non-zero</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00196">196</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00151">internal_dnsmgr_lookup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15075">__sip_subscribe_mwi_do()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l31631">build_peer()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16106">transmit_register()</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a47531bb8c9d97ca8276b74c05bc7aea2">internal_dnsmgr_lookup</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, result, dnsmgr, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>, func, <a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a495cc24c1947d49a2b6de488a45c9d72"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a></div><div class="ttdeci">enum ast_cc_service_type service</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00949">chan_sip.c:949</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#a735984d41155bc1032e09bece8f8d66d">ast_dnsmgr_entry::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00076">dnsmgr.c:76</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a47531bb8c9d97ca8276b74c05bc7aea2"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a47531bb8c9d97ca8276b74c05bc7aea2">internal_dnsmgr_lookup</a></div><div class="ttdeci">static int internal_dnsmgr_lookup(const char *name, struct ast_sockaddr *result, struct ast_dnsmgr_entry **dnsmgr, const char *service, dns_update_func func, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00151">dnsmgr.c:151</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="add74c87320b8447b69e776931520e994"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add74c87320b8447b69e776931520e994">&#9670;&nbsp;</a></span>ast_dnsmgr_refresh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_dnsmgr_refresh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Force a refresh of a dnsmgr entry. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>if the result is different than the previous result </td></tr>
    <tr><td class="paramname">zero</td><td>if the result is the same as the previous result </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00239">239</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00204">dnsmgr_refresh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12136">iax2_do_register()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15976">sip_reg_timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;{</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5d/dnsmgr_8c.html#afd4006993b0aac1410d7255730bc3a7c">dnsmgr_refresh</a>(entry, 0);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div><div class="ttc" id="dnsmgr_8c_html_afd4006993b0aac1410d7255730bc3a7c"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#afd4006993b0aac1410d7255730bc3a7c">dnsmgr_refresh</a></div><div class="ttdeci">static int dnsmgr_refresh(struct ast_dnsmgr_entry *entry, int verbose)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00204">dnsmgr.c:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0255399a507b71ae563fc2caf94d749c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0255399a507b71ae563fc2caf94d749c">&#9670;&nbsp;</a></span>ast_dnsmgr_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_dnsmgr_release </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a DNS manager entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entry</td><td>the DNS manager entry to free</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00136">136</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00884">AST_RWLIST_REMOVE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00079">ast_dnsmgr_entry::lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l32459">__cleanup_registration()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14935">__shutdown_mwi_subscription()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l13399">delete_users()</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l00415">destroy_sip_transport_state()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03232">match_and_cleanup_peer_sched()</a>, and <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12766">peer_destructor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   <span class="keywordflow">if</span> (!entry) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>, entry, list);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(6, <span class="stringliteral">&quot;removing dns manager for &#39;%s&#39;\n&quot;</span>, entry-&gt;name);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(entry);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="ttc" id="structast__dnsmgr__entry_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">ast_dnsmgr_entry::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00079">dnsmgr.c:79</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6091f0518f8b6f443fd9f5150f3ac407"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00884">linkedlists.h:884</a></div></div>
<div class="ttc" id="structentry__list_html"><div class="ttname"><a href="../../d6/d52/structentry__list.html">entry_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00085">dnsmgr.c:85</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:48 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
