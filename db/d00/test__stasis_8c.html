<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: test_stasis.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">test_stasis.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Test Stasis message bus.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d79/stasis_8h_source.html">asterisk/stasis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d25/stasis__message__router_8h_source.html">asterisk/stasis_message_router.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_stasis.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/deb/test__stasis_8c__incl.png" border="0" usemap="#test__stasis_8c" alt=""/></div>
<map name="test__stasis_8c" id="test__stasis_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="96,468,180,495"/>
<area shape="rect" id="node22" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="904,468,1039,495"/>
<area shape="rect" id="node32" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1315,169,1451,196"/>
<area shape="rect" id="node38" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1791,169,1917,196"/>
<area shape="rect" id="node46" href="../../d4/d25/stasis__message__router_8h.html" title="asterisk/stasis_message\l_router.h" alt="" coords="1739,80,1918,121"/>
<area shape="rect" id="node47" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="1544,244,1657,271"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="107,767,262,793"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="876,543,1013,569"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="5,543,140,569"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="111,841,258,868"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1105,692,1248,719"/>
<area shape="rect" id="node23" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1669,617,1783,644"/>
<area shape="rect" id="node26" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1066,767,1213,793"/>
<area shape="rect" id="node31" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1632,543,1783,569"/>
<area shape="rect" id="node25" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="364,692,427,719"/>
<area shape="rect" id="node29" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="1509,692,1660,719"/>
<area shape="rect" id="node30" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1844,692,1971,719"/>
<area shape="rect" id="node33" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1318,319,1433,345"/>
<area shape="rect" id="node34" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1411,393,1550,420"/>
<area shape="rect" id="node35" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="1139,393,1286,420"/>
<area shape="rect" id="node36" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1779,393,1937,420"/>
<area shape="rect" id="node37" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1574,393,1705,420"/>
<area shape="rect" id="node39" href="../../d4/d05/json_8h.html" title="Asterisk JSON abstraction layer. " alt="" coords="2174,244,2289,271"/>
<area shape="rect" id="node41" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="1783,244,1928,271"/>
<area shape="rect" id="node44" href="../../dd/d20/event_8h.html" title="asterisk/event.h" alt="" coords="2001,244,2125,271"/>
<area shape="rect" id="node40" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="2123,468,2270,495"/>
<area shape="rect" id="node42" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1783,468,1933,495"/>
<area shape="rect" id="node43" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="1788,319,1923,345"/>
<area shape="rect" id="node45" href="../../d6/d37/event__defs_8h.html" title="Generic event system. " alt="" coords="2063,319,2221,345"/>
<area shape="rect" id="node48" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1638,319,1739,345"/>
</map>
</div>
</div>
<p><a href="../../db/d00/test__stasis_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d2e/structcache__test__data.html">cache_test_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dfd/structconsumer.html">consumer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d51/structcts.html">cts</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dcd/structtest__message__types.html">test_message_types</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7db2ac7b82dcf987b9832f15f771e2b4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>&#160;&#160;&#160;&quot;/stasis/core/&quot;</td></tr>
<tr class="separator:a7db2ac7b82dcf987b9832f15f771e2b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a142a6549746bc48b7343bfe466ea71d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a142a6549746bc48b7343bfe466ea71d1">AST_TEST_DEFINE</a> (message_type)</td></tr>
<tr class="separator:a142a6549746bc48b7343bfe466ea71d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e7da71c9dda090d14b7f21324c59665"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a7e7da71c9dda090d14b7f21324c59665">AST_TEST_DEFINE</a> (<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a7e7da71c9dda090d14b7f21324c59665"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd202c12b1f97b18f2890669c58ae1bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#acd202c12b1f97b18f2890669c58ae1bd">AST_TEST_DEFINE</a> (subscription_messages)</td></tr>
<tr class="separator:acd202c12b1f97b18f2890669c58ae1bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15538ba9c42fe60ce43701a650b66dca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a15538ba9c42fe60ce43701a650b66dca">AST_TEST_DEFINE</a> (subscription_pool_messages)</td></tr>
<tr class="separator:a15538ba9c42fe60ce43701a650b66dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1df11b6a3b753b1454eccbeea2db49cd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a1df11b6a3b753b1454eccbeea2db49cd">AST_TEST_DEFINE</a> (<a class="el" href="../../de/d6b/test__stasis__state_8c.html#af03d41f70e6c91defcf6a3a6cc3fc419">publish</a>)</td></tr>
<tr class="separator:a1df11b6a3b753b1454eccbeea2db49cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af86ed0cbf6110da6c99507cdc6c69836"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#af86ed0cbf6110da6c99507cdc6c69836">AST_TEST_DEFINE</a> (publish_sync)</td></tr>
<tr class="separator:af86ed0cbf6110da6c99507cdc6c69836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8194afa3b65275ce1f811e3d6677e071"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a8194afa3b65275ce1f811e3d6677e071">AST_TEST_DEFINE</a> (publish_pool)</td></tr>
<tr class="separator:a8194afa3b65275ce1f811e3d6677e071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ba029939dc140481dadeea530ac53ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a5ba029939dc140481dadeea530ac53ea">AST_TEST_DEFINE</a> (unsubscribe_stops_messages)</td></tr>
<tr class="separator:a5ba029939dc140481dadeea530ac53ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7c0f487d401e7aedd8758c395516416"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#af7c0f487d401e7aedd8758c395516416">AST_TEST_DEFINE</a> (forward)</td></tr>
<tr class="separator:af7c0f487d401e7aedd8758c395516416"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ad61ba87fdc79c382a5091c3efd6d0c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a1ad61ba87fdc79c382a5091c3efd6d0c">AST_TEST_DEFINE</a> (interleaving)</td></tr>
<tr class="separator:a1ad61ba87fdc79c382a5091c3efd6d0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e9ea542318370a9ccf80ecbc6e46310"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a2e9ea542318370a9ccf80ecbc6e46310">AST_TEST_DEFINE</a> (subscription_interleaving)</td></tr>
<tr class="separator:a2e9ea542318370a9ccf80ecbc6e46310"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1410e0f6a465c75131a56d9e947407aa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a1410e0f6a465c75131a56d9e947407aa">AST_TEST_DEFINE</a> (cache_filter)</td></tr>
<tr class="separator:a1410e0f6a465c75131a56d9e947407aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d827ad9b1add74afadf8cfae237d056"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a1d827ad9b1add74afadf8cfae237d056">AST_TEST_DEFINE</a> (<a class="el" href="../../d6/d12/test__sorcery_8c.html#a754f1806adf6d9a932e80148f3f7bd12">cache</a>)</td></tr>
<tr class="separator:a1d827ad9b1add74afadf8cfae237d056"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4a6e8dcba733ae5b2bcbfdb2187ea5f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ac4a6e8dcba733ae5b2bcbfdb2187ea5f">AST_TEST_DEFINE</a> (cache_dump)</td></tr>
<tr class="separator:ac4a6e8dcba733ae5b2bcbfdb2187ea5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a761159aec951e0bcd7f7edbb5f9909aa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a761159aec951e0bcd7f7edbb5f9909aa">AST_TEST_DEFINE</a> (cache_eid_aggregate)</td></tr>
<tr class="separator:a761159aec951e0bcd7f7edbb5f9909aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8abb583c1f56356b4779194aea225dd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ab8abb583c1f56356b4779194aea225dd">AST_TEST_DEFINE</a> (<a class="el" href="../../d6/d6a/res__endpoint__stats_8c.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a>)</td></tr>
<tr class="separator:ab8abb583c1f56356b4779194aea225dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab31e30c5eab6a04b81c6b7e5d650dda2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ab31e30c5eab6a04b81c6b7e5d650dda2">AST_TEST_DEFINE</a> (router_pool)</td></tr>
<tr class="separator:ab31e30c5eab6a04b81c6b7e5d650dda2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f323bcc58f0284ecd7fa7b9d761ca6c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a1f323bcc58f0284ecd7fa7b9d761ca6c">AST_TEST_DEFINE</a> (router_cache_updates)</td></tr>
<tr class="separator:a1f323bcc58f0284ecd7fa7b9d761ca6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68edd81a378bb5c106f0b5f13c771e7a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a68edd81a378bb5c106f0b5f13c771e7a">AST_TEST_DEFINE</a> (no_to_json)</td></tr>
<tr class="separator:a68edd81a378bb5c106f0b5f13c771e7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fcf0bf956b4e9432b04a81f8471b5ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a9fcf0bf956b4e9432b04a81f8471b5ea">AST_TEST_DEFINE</a> (to_json)</td></tr>
<tr class="separator:a9fcf0bf956b4e9432b04a81f8471b5ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d4a9b506ccf2ea660624ed9f634b74e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a6d4a9b506ccf2ea660624ed9f634b74e">AST_TEST_DEFINE</a> (no_to_ami)</td></tr>
<tr class="separator:a6d4a9b506ccf2ea660624ed9f634b74e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fc327c419ce48b101f4cd36f89d9dbc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a1fc327c419ce48b101f4cd36f89d9dbc">AST_TEST_DEFINE</a> (<a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a>)</td></tr>
<tr class="separator:a1fc327c419ce48b101f4cd36f89d9dbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eaf5d7efa4593b3ab34ac9280a0281e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a7eaf5d7efa4593b3ab34ac9280a0281e">AST_TEST_DEFINE</a> (dtor_order)</td></tr>
<tr class="separator:a7eaf5d7efa4593b3ab34ac9280a0281e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afecbbd3f23ed55f41ef80a6a40aa328c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#afecbbd3f23ed55f41ef80a6a40aa328c">AST_TEST_DEFINE</a> (caching_dtor_order)</td></tr>
<tr class="separator:afecbbd3f23ed55f41ef80a6a40aa328c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac154dc468257f705aeb539839e38ca9a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ac154dc468257f705aeb539839e38ca9a">AST_TEST_DEFINE</a> (type_filters)</td></tr>
<tr class="separator:ac154dc468257f705aeb539839e38ca9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45fd219dbff3671ec9ef327d43775f98"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a45fd219dbff3671ec9ef327d43775f98">AST_TEST_DEFINE</a> (formatter_filters)</td></tr>
<tr class="separator:a45fd219dbff3671ec9ef327d43775f98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78226f0b85da829bc189335ee46e0d7b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a78226f0b85da829bc189335ee46e0d7b">AST_TEST_DEFINE</a> (combo_filters)</td></tr>
<tr class="separator:a78226f0b85da829bc189335ee46e0d7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687531d23b24a0e0d243443e2f79a4c5"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a687531d23b24a0e0d243443e2f79a4c5">cache_simple</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a687531d23b24a0e0d243443e2f79a4c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae788a5ff3f8b6accb6207e7b61cfe610"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ae788a5ff3f8b6accb6207e7b61cfe610">cache_test_aggregate_calc_fn</a> (struct <a class="el" href="../../de/d73/structstasis__cache__entry.html">stasis_cache_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *new_snapshot)</td></tr>
<tr class="separator:ae788a5ff3f8b6accb6207e7b61cfe610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51db803ccb24e1be25a700cb633f8509"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a51db803ccb24e1be25a700cb633f8509">cache_test_aggregate_publish_fn</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *aggregate)</td></tr>
<tr class="separator:a51db803ccb24e1be25a700cb633f8509"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a134e866b8d262056986520b992938b2a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a134e866b8d262056986520b992938b2a">cache_test_data_dtor</a> (void *obj)</td></tr>
<tr class="separator:a134e866b8d262056986520b992938b2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af07ba48f7996d7e2afc87738ac7eec42"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#af07ba48f7996d7e2afc87738ac7eec42">cache_test_data_id</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:af07ba48f7996d7e2afc87738ac7eec42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b1ce82c9265948167aacdaaedd1365c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a8b1ce82c9265948167aacdaaedd1365c">cache_test_message_create</a> (struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="separator:a8b1ce82c9265948167aacdaaedd1365c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeb19b488370ef7d5b052bc2b1ed0894"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#aeeb19b488370ef7d5b052bc2b1ed0894">cache_test_message_create_full</a> (struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *eid)</td></tr>
<tr class="separator:aeeb19b488370ef7d5b052bc2b1ed0894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adca7190fcf61a89ccee694a58cd18838"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#adca7190fcf61a89ccee694a58cd18838">check_cache_aggregate</a> (struct <a class="el" href="../../dd/d25/structstasis__cache.html">stasis_cache</a> *<a class="el" href="../../d6/d12/test__sorcery_8c.html#a754f1806adf6d9a932e80148f3f7bd12">cache</a>, struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *cache_type, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="separator:adca7190fcf61a89ccee694a58cd18838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d2e506ef5ed0e6187a231a1b9411c07"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a> (int ignore_subscriptions)</td></tr>
<tr class="separator:a3d2e506ef5ed0e6187a231a1b9411c07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a585c9adb224a241dcec6290c314c4861"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a585c9adb224a241dcec6290c314c4861">consumer_dtor</a> (void *obj)</td></tr>
<tr class="separator:a585c9adb224a241dcec6290c314c4861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a167de9c686c1cccd23d1b6076492931a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a167de9c686c1cccd23d1b6076492931a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fea21f6983513f203cef9216f894e51"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a4fea21f6983513f203cef9216f894e51">consumer_exec_sync</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a4fea21f6983513f203cef9216f894e51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a973520f05217be8bca2fad9eb4c90696"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a973520f05217be8bca2fad9eb4c90696">consumer_should_stay</a> (struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a> *<a class="el" href="../../d9/dfd/structconsumer.html">consumer</a>, size_t expected_len)</td></tr>
<tr class="separator:a973520f05217be8bca2fad9eb4c90696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad17c2b858cb7f751d85c4120911a92be"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a> (struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a> *<a class="el" href="../../d9/dfd/structconsumer.html">consumer</a>, size_t expected_len)</td></tr>
<tr class="separator:ad17c2b858cb7f751d85c4120911a92be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a312ddb3e48152e8316cbc04273b83764"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a312ddb3e48152e8316cbc04273b83764">consumer_wait_for_completion</a> (struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a> *<a class="el" href="../../d9/dfd/structconsumer.html">consumer</a>)</td></tr>
<tr class="separator:a312ddb3e48152e8316cbc04273b83764"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad67eb457a93ee00bc3b86b0e66915174"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d51/structcts.html">cts</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ad67eb457a93ee00bc3b86b0e66915174">create_cts</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>)</td></tr>
<tr class="separator:ad67eb457a93ee00bc3b86b0e66915174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8fc4cc528eace972c010d88f0e8d4d2"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../da/dcd/structtest__message__types.html">test_message_types</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ab8fc4cc528eace972c010d88f0e8d4d2">create_message_types</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>)</td></tr>
<tr class="separator:ab8fc4cc528eace972c010d88f0e8d4d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8652476e53aba28400ee05a08f5dd329"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a8652476e53aba28400ee05a08f5dd329">destroy_cts</a> (void *obj)</td></tr>
<tr class="separator:a8652476e53aba28400ee05a08f5dd329"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75673fd729f018e2625bb12d0166ab27"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a75673fd729f018e2625bb12d0166ab27">destroy_message_types</a> (void *obj)</td></tr>
<tr class="separator:a75673fd729f018e2625bb12d0166ab27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade4b58bd3699506505e7cd465b9253fb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ade4b58bd3699506505e7cd465b9253fb">dump_consumer</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, struct <a class="el" href="../../dc/d51/structcts.html">cts</a> *<a class="el" href="../../dc/d51/structcts.html">cts</a>)</td></tr>
<tr class="separator:ade4b58bd3699506505e7cd465b9253fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae620b535acff15a9de122d44874c71be"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ae620b535acff15a9de122d44874c71be">fake_ami</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:ae620b535acff15a9de122d44874c71be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b5e46824df06ae858f93fb97b3891ab"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a9b5e46824df06ae858f93fb97b3891ab">fake_event</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a9b5e46824df06ae858f93fb97b3891ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5697b03b92950971980ae4b2b197b824"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a5697b03b92950971980ae4b2b197b824">fake_json</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>, const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *sanitize)</td></tr>
<tr class="separator:a5697b03b92950971980ae4b2b197b824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92d140b66548be77795839ace7bb1ac4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg, struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *<a class="el" href="../../dd/d43/http_8c.html#a3189f2c804f88ece5a83d4772e11ff9e">mtype</a>, const char *data)</td></tr>
<tr class="separator:a92d140b66548be77795839ace7bb1ac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae07dd56cdf7085a9cd09462bd36e4f43"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ae07dd56cdf7085a9cd09462bd36e4f43">noop</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:ae07dd56cdf7085a9cd09462bd36e4f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2a8343ff291dcbd1b75e18c8bcc949a"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#aa2a8343ff291dcbd1b75e18c8bcc949a">noop_get_id</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:aa2a8343ff291dcbd1b75e18c8bcc949a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fd88e646336e34bc9354be2145a06f8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, struct <a class="el" href="../../dc/d51/structcts.html">cts</a> *<a class="el" href="../../dc/d51/structcts.html">cts</a>, struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *msg_type, const char *data)</td></tr>
<tr class="separator:a3fd88e646336e34bc9354be2145a06f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = 0 , .description = &quot;Stasis testing&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af39537fae29b48663827e272436b6206"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d3e/structstasis__message__vtable.html">stasis_message_vtable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/test__stasis_8c.html#af39537fae29b48663827e272436b6206">fake_vtable</a></td></tr>
<tr class="separator:af39537fae29b48663827e272436b6206"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Test Stasis message bus. </p>
<dl class="section author"><dt>Author</dt><dd><pre class="fragment">David M. Lee, II &lt;dlee@digium.com&gt; </pre> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7db2ac7b82dcf987b9832f15f771e2b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7db2ac7b82dcf987b9832f15f771e2b4">&#9670;&nbsp;</a></span>test_category</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define test_category&#160;&#160;&#160;&quot;/stasis/core/&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">41</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00077">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02504">2504</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02504">2504</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02504">2504</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

</div>
</div>
<a id="a142a6549746bc48b7343bfe466ea71d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a142a6549746bc48b7343bfe466ea71d1">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[1/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">message_type&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00077">77</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00289">STASIS_MESSAGE_TYPE_ERROR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message_type_name()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test basic message_type functions&quot;</span>;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test basic message_type functions&quot;</span>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a5cdf581193f897efeb4387c08e5688e8">STASIS_MESSAGE_TYPE_ERROR</a>);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;SomeMessage&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;uut) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == strcmp(<a class="code" href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a>(uut), <span class="stringliteral">&quot;SomeMessage&quot;</span>));</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div><div class="ttc" id="stasis_8h_html_aefd78086150c89477f5851f2836e0478"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a></div><div class="ttdeci">const char * stasis_message_type_name(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the name of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message.c:99</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a5cdf581193f897efeb4387c08e5688e8"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a5cdf581193f897efeb4387c08e5688e8">STASIS_MESSAGE_TYPE_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00289">stasis.h:289</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e7da71c9dda090d14b7f21324c59665"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e7da71c9dda090d14b7f21324c59665">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[2/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d9e/structmessage.html">message</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00099">99</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02298">ast_tvsub()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00377">consumer::out</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00140">stasis_message_create_full()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00179">stasis_message_eid()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message_timestamp()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, uut1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, uut2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, data, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   <span class="keywordtype">char</span> *expected = <span class="stringliteral">&quot;SomeData&quot;</span>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   <span class="keyword">struct </span>timeval expected_timestamp;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   <span class="keyword">struct </span>timeval time_diff;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> foreign_eid;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test basic message functions&quot;</span>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test basic message functions&quot;</span>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   memset(&amp;foreign_eid, 0xFF, <span class="keyword">sizeof</span>(foreign_eid));</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;SomeMessage&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == <a class="code" href="../../dd/d79/stasis_8h.html#a08010732dcea60e116e54fca0133d582">stasis_message_create_full</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == <a class="code" href="../../dd/d79/stasis_8h.html#a08010732dcea60e116e54fca0133d582">stasis_message_create_full</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   data = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(strlen(expected) + 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   strcpy(data, expected);<span class="comment">/* Safe */</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   expected_timestamp = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   uut1 = <a class="code" href="../../dd/d79/stasis_8h.html#a08010732dcea60e116e54fca0133d582">stasis_message_create_full</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, data, &amp;foreign_eid);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   uut2 = <a class="code" href="../../dd/d79/stasis_8h.html#a08010732dcea60e116e54fca0133d582">stasis_message_create_full</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, data, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut1);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut2);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> == <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(uut1));</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> == <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(uut2));</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == strcmp(expected, <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(uut1)));</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == strcmp(expected, <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(uut2)));</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dd/d79/stasis_8h.html#ae5dc2372860d977cc3e2a8e9af24aeaf">stasis_message_eid</a>(uut1));</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == <a class="code" href="../../dd/d79/stasis_8h.html#ae5dc2372860d977cc3e2a8e9af24aeaf">stasis_message_eid</a>(uut2));</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;foreign_eid, <a class="code" href="../../dd/d79/stasis_8h.html#ae5dc2372860d977cc3e2a8e9af24aeaf">stasis_message_eid</a>(uut1)));</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 3 == <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, 0)); <span class="comment">/* uut1 and uut2 have ref to data */</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   time_diff = <a class="code" href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a>(*<a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(uut1), expected_timestamp);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <span class="comment">/* 10ms is certainly long enough for the two calls to complete */</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, time_diff.tv_sec == 0);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, time_diff.tv_usec &lt; 10000);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(uut1, -1);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   uut1 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 2 == <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, 0)); <span class="comment">/* uut1 unreffed data */</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(uut2, -1);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   uut2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, 0)); <span class="comment">/* uut2 unreffed data */</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="stasis_8h_html_ae5dc2372860d977cc3e2a8e9af24aeaf"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae5dc2372860d977cc3e2a8e9af24aeaf">stasis_message_eid</a></div><div class="ttdeci">const struct ast_eid * stasis_message_eid(const struct stasis_message *msg)</div><div class="ttdoc">Get the entity id for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00179">stasis_message.c:179</a></div></div>
<div class="ttc" id="stasis_8h_html_a0a9c10eadd9db34f8c0b19619752ea93"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a></div><div class="ttdeci">const struct timeval * stasis_message_timestamp(const struct stasis_message *msg)</div><div class="ttdoc">Get the time when a message was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message.c:203</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="time_8h_html_aa13b651c18bc6004cab21ac041d44dd8"><div class="ttname"><a href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a></div><div class="ttdeci">struct timeval ast_tvsub(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the difference of two timevals a - b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02298">extconf.c:2298</a></div></div>
<div class="ttc" id="stasis_8h_html_a08010732dcea60e116e54fca0133d582"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a08010732dcea60e116e54fca0133d582">stasis_message_create_full</a></div><div class="ttdeci">struct stasis_message * stasis_message_create_full(struct stasis_message_type *type, void *data, const struct ast_eid *eid)</div><div class="ttdoc">Create a new message for an entity. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00140">stasis_message.c:140</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd202c12b1f97b18f2890669c58ae1bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd202c12b1f97b18f2890669c58ae1bd">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[3/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">subscription_messages&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00314">314</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00167">consumer::complete</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00267">consumer_wait_for_completion()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00895">stasis_subscription_change::description</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00165">consumer::messages_rxed_len</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01171">stasis_subscription_uniqueid()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00893">stasis_subscription_change::topic</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l00894">stasis_subscription_change::uniqueid</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;{</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, expected_uniqueid, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <span class="keywordtype">int</span> complete;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a> *change;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test subscribe/unsubscribe messages&quot;</span>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test subscribe/unsubscribe messages&quot;</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;TestTopic&quot;</span>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(0);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   uut = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, +1);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   expected_uniqueid = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../dd/d79/stasis_8h.html#a86a7ba1f3c93ba7ee7583a0d8595025d">stasis_subscription_uniqueid</a>(uut));</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   uut = <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>(uut);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   complete = <a class="code" href="../../db/d00/test__stasis_8c.html#a312ddb3e48152e8316cbc04273b83764">consumer_wait_for_completion</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == complete);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 2 == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>() == <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[0]));</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>() == <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[1]));</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   change = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[0]);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a> == change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == strcmp(<span class="stringliteral">&quot;Subscribe&quot;</span>, change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">description</a>));</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == strcmp(expected_uniqueid, change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>));</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   change = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[1]);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a> == change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == strcmp(<span class="stringliteral">&quot;Unsubscribe&quot;</span>, change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">description</a>));</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == strcmp(expected_uniqueid, change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>));</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a312ddb3e48152e8316cbc04273b83764"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a312ddb3e48152e8316cbc04273b83764">consumer_wait_for_completion</a></div><div class="ttdeci">static int consumer_wait_for_completion(struct consumer *consumer)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00267">test_stasis.c:267</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_ace8710cd56677f85900cab7dca29b82c"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#ace8710cd56677f85900cab7dca29b82c">stasis_subscription_change::uniqueid</a></div><div class="ttdeci">char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00894">stasis.h:894</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription_change::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00893">stasis.h:893</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a></div><div class="ttdoc">Holds details about changes to subscriptions for the specified topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00892">stasis.h:892</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structconsumer_html_a19648c6a151f719c14ce4a993c8b6a27"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">consumer::messages_rxed_len</a></div><div class="ttdeci">size_t messages_rxed_len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00165">test_stasis.c:165</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a148e968cb2e6176288982274dab428c3"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">stasis_subscription_change::description</a></div><div class="ttdeci">char description[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00895">stasis.h:895</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
<div class="ttc" id="stasis_8h_html_a86a7ba1f3c93ba7ee7583a0d8595025d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a86a7ba1f3c93ba7ee7583a0d8595025d">stasis_subscription_uniqueid</a></div><div class="ttdeci">const char * stasis_subscription_uniqueid(const struct stasis_subscription *sub)</div><div class="ttdoc">Get the unique ID for the subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01171">stasis.c:1171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a15538ba9c42fe60ce43701a650b66dca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15538ba9c42fe60ce43701a650b66dca">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[4/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">subscription_pool_messages&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00369">369</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00167">consumer::complete</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00267">consumer_wait_for_completion()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00895">stasis_subscription_change::description</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00165">consumer::messages_rxed_len</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00682">stasis_subscribe_pool</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01171">stasis_subscription_uniqueid()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00893">stasis_subscription_change::topic</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l00894">stasis_subscription_change::uniqueid</a>.</p>
<div class="fragment"><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;{</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, expected_uniqueid, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <span class="keywordtype">int</span> complete;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a> *change;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test subscribe/unsubscribe messages using a threadpool subscription&quot;</span>;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test subscribe/unsubscribe messages using a threadpool subscription&quot;</span>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;TestTopic&quot;</span>);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(0);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   uut = <a class="code" href="../../dd/d79/stasis_8h.html#a597f7a30fe616c9f083a93ed168955ed">stasis_subscribe_pool</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, +1);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   expected_uniqueid = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../dd/d79/stasis_8h.html#a86a7ba1f3c93ba7ee7583a0d8595025d">stasis_subscription_uniqueid</a>(uut));</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   uut = <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>(uut);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   complete = <a class="code" href="../../db/d00/test__stasis_8c.html#a312ddb3e48152e8316cbc04273b83764">consumer_wait_for_completion</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == complete);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 2 == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>() == <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[0]));</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>() == <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[1]));</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   change = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[0]);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a> == change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == strcmp(<span class="stringliteral">&quot;Subscribe&quot;</span>, change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">description</a>));</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == strcmp(expected_uniqueid, change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>));</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   change = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[1]);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a> == change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == strcmp(<span class="stringliteral">&quot;Unsubscribe&quot;</span>, change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">description</a>));</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == strcmp(expected_uniqueid, change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>));</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a312ddb3e48152e8316cbc04273b83764"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a312ddb3e48152e8316cbc04273b83764">consumer_wait_for_completion</a></div><div class="ttdeci">static int consumer_wait_for_completion(struct consumer *consumer)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00267">test_stasis.c:267</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_ace8710cd56677f85900cab7dca29b82c"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#ace8710cd56677f85900cab7dca29b82c">stasis_subscription_change::uniqueid</a></div><div class="ttdeci">char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00894">stasis.h:894</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription_change::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00893">stasis.h:893</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="stasis_8h_html_a597f7a30fe616c9f083a93ed168955ed"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a597f7a30fe616c9f083a93ed168955ed">stasis_subscribe_pool</a></div><div class="ttdeci">#define stasis_subscribe_pool(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00682">stasis.h:682</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a></div><div class="ttdoc">Holds details about changes to subscriptions for the specified topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00892">stasis.h:892</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structconsumer_html_a19648c6a151f719c14ce4a993c8b6a27"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">consumer::messages_rxed_len</a></div><div class="ttdeci">size_t messages_rxed_len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00165">test_stasis.c:165</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a148e968cb2e6176288982274dab428c3"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">stasis_subscription_change::description</a></div><div class="ttdeci">char description[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00895">stasis.h:895</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
<div class="ttc" id="stasis_8h_html_a86a7ba1f3c93ba7ee7583a0d8595025d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a86a7ba1f3c93ba7ee7583a0d8595025d">stasis_subscription_uniqueid</a></div><div class="ttdeci">const char * stasis_subscription_uniqueid(const struct stasis_subscription *sub)</div><div class="ttdoc">Get the unique ID for the subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01171">stasis.c:1171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1df11b6a3b753b1454eccbeea2db49cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1df11b6a3b753b1454eccbeea2db49cd">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[5/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#af03d41f70e6c91defcf6a3a6cc3fc419">publish</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00424">424</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l00893">stasis_subscription_change::topic</a>.</p>
<div class="fragment"><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;{</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <span class="keywordtype">int</span> actual_len;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *actual;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test publishing&quot;</span>;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test publishing&quot;</span>;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;TestTopic&quot;</span>);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   uut = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, +1);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessage&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   test_message = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, test_message);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, 1);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == actual_len);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   actual = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[0]);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> == actual);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription_change::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00893">stasis.h:893</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af86ed0cbf6110da6c99507cdc6c69836"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af86ed0cbf6110da6c99507cdc6c69836">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[6/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">publish_sync&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00471">471</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00226">consumer_exec_sync()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00165">consumer::messages_rxed_len</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01516">stasis_publish_sync()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l00893">stasis_subscription_change::topic</a>.</p>
<div class="fragment"><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;{</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   <span class="keywordtype">int</span> actual_len;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *actual;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test synchronous publishing&quot;</span>;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test synchronous publishing&quot;</span>;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;TestTopic&quot;</span>);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   uut = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a4fea21f6983513f203cef9216f894e51">consumer_exec_sync</a>, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, +1);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessage&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   test_message = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a499d7d708fc81464ec55de7c518b02c6">stasis_publish_sync</a>(uut, test_message);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   actual_len = <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == actual_len);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   actual = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[0]);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> == actual);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription_change::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00893">stasis.h:893</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="stasis_8h_html_a499d7d708fc81464ec55de7c518b02c6"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a499d7d708fc81464ec55de7c518b02c6">stasis_publish_sync</a></div><div class="ttdeci">void stasis_publish_sync(struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers, synchronizing on the specified subscriber. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01516">stasis.c:1516</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structconsumer_html_a19648c6a151f719c14ce4a993c8b6a27"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">consumer::messages_rxed_len</a></div><div class="ttdeci">size_t messages_rxed_len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00165">test_stasis.c:165</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a4fea21f6983513f203cef9216f894e51"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a4fea21f6983513f203cef9216f894e51">consumer_exec_sync</a></div><div class="ttdeci">static void consumer_exec_sync(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00226">test_stasis.c:226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8194afa3b65275ce1f811e3d6677e071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8194afa3b65275ce1f811e3d6677e071">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[7/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">publish_pool&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00518">518</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00682">stasis_subscribe_pool</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l00893">stasis_subscription_change::topic</a>.</p>
<div class="fragment"><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;{</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   <span class="keywordtype">int</span> actual_len;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *actual;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test publishing with a threadpool&quot;</span>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test publishing to a subscriber whose\n&quot;</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;         <span class="stringliteral">&quot;subscription dictates messages are received through a\n&quot;</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;         <span class="stringliteral">&quot;threadpool.&quot;</span>;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;TestTopic&quot;</span>);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   uut = <a class="code" href="../../dd/d79/stasis_8h.html#a597f7a30fe616c9f083a93ed168955ed">stasis_subscribe_pool</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, +1);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessage&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   test_message = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, test_message);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, 1);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == actual_len);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   actual = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[0]);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> == actual);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription_change::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00893">stasis.h:893</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="stasis_8h_html_a597f7a30fe616c9f083a93ed168955ed"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a597f7a30fe616c9f083a93ed168955ed">stasis_subscribe_pool</a></div><div class="ttdeci">#define stasis_subscribe_pool(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00682">stasis.h:682</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ba029939dc140481dadeea530ac53ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ba029939dc140481dadeea530ac53ea">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[8/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">unsubscribe_stops_messages&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00567">567</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00288">consumer_should_stay()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l00893">stasis_subscription_change::topic</a>.</p>
<div class="fragment"><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;{</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordtype">int</span> actual_len;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test simple subscriptions&quot;</span>;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test simple subscriptions&quot;</span>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;TestTopic&quot;</span>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   uut = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, +1);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   uut = <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>(uut);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessage&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   test_message = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, test_message);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#a973520f05217be8bca2fad9eb4c90696">consumer_should_stay</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, 0);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == actual_len);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;}</div><div class="ttc" id="test__stasis_8c_html_a973520f05217be8bca2fad9eb4c90696"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a973520f05217be8bca2fad9eb4c90696">consumer_should_stay</a></div><div class="ttdeci">static int consumer_should_stay(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00288">test_stasis.c:288</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription_change::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00893">stasis.h:893</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af7c0f487d401e7aedd8758c395516416"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7c0f487d401e7aedd8758c395516416">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[9/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">forward&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00613">613</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01578">stasis_forward_all()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">stasis_forward_cancel()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l00893">stasis_subscription_change::topic</a>.</p>
<div class="fragment"><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;{</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, parent_topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, parent_consumer, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *, forward_sub, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, parent_sub, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keywordtype">int</span> actual_len;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test sending events to a parent topic&quot;</span>;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test sending events to a parent topic.\n&quot;</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;         <span class="stringliteral">&quot;This test creates three topics (one parent, two children)\n&quot;</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;         <span class="stringliteral">&quot;and publishes a message to one child, and verifies it&#39;s\n&quot;</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;         <span class="stringliteral">&quot;only seen by that child and the parent&quot;</span>;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   parent_topic = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;ParentTestTopic&quot;</span>);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != parent_topic);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;TestTopic&quot;</span>);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   forward_sub = <a class="code" href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, parent_topic);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != forward_sub);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   parent_consumer = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != parent_consumer);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   parent_sub = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(parent_topic, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, parent_consumer);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != parent_sub);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(parent_consumer, +1);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, +1);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessage&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   test_message = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, test_message);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, 1);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == actual_len);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(parent_consumer, 1);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == actual_len);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription_change::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00893">stasis.h:893</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="stasis_8h_html_a5713715b0f26f4943d0af05363b07027"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_cancel(struct stasis_forward *forward)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01548">stasis.c:1548</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structstasis__forward_html"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html">stasis_forward</a></div><div class="ttdoc">Forwarding information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01531">stasis.c:1531</a></div></div>
<div class="ttc" id="stasis_8h_html_a2513a93567ddc93510f7896b777da119"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_all(struct stasis_topic *from_topic, struct stasis_topic *to_topic)</div><div class="ttdoc">Create a subscription which forwards all messages from one topic to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01578">stasis.c:1578</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ad61ba87fdc79c382a5091c3efd6d0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ad61ba87fdc79c382a5091c3efd6d0c">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[10/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">interleaving&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00679">679</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01578">stasis_forward_all()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">stasis_forward_cancel()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;{</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, parent_topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, topic1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, topic2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *, forward_sub1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *, forward_sub2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <span class="keywordtype">int</span> actual_len;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test sending interleaved events to a parent topic&quot;</span>;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test sending events to a parent topic.\n&quot;</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;         <span class="stringliteral">&quot;This test creates three topics (one parent, two children)\n&quot;</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;         <span class="stringliteral">&quot;and publishes messages alternately between the children.\n&quot;</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;         <span class="stringliteral">&quot;It verifies that the messages are received in the expected\n&quot;</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;         <span class="stringliteral">&quot;order.&quot;</span>;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;test&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message_type);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   test_message1 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message1);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   test_message2 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   test_message3 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message3);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   parent_topic = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;ParentTestTopic&quot;</span>);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != parent_topic);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   topic1 = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;Topic1&quot;</span>);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic1);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   topic2 = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;Topic2&quot;</span>);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic2);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   forward_sub1 = <a class="code" href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a>(topic1, parent_topic);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != forward_sub1);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   forward_sub2 = <a class="code" href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a>(topic2, parent_topic);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != forward_sub2);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(parent_topic, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, +1);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic1, test_message1);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic2, test_message2);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic1, test_message3);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, 3);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 3 == actual_len);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message1 == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[0]);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message2 == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[1]);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message3 == <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[2]);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="stasis_8h_html_a5713715b0f26f4943d0af05363b07027"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_cancel(struct stasis_forward *forward)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01548">stasis.c:1548</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structstasis__forward_html"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html">stasis_forward</a></div><div class="ttdoc">Forwarding information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01531">stasis.c:1531</a></div></div>
<div class="ttc" id="stasis_8h_html_a2513a93567ddc93510f7896b777da119"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_all(struct stasis_topic *from_topic, struct stasis_topic *to_topic)</div><div class="ttdoc">Create a subscription which forwards all messages from one topic to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01578">stasis.c:1578</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e9ea542318370a9ccf80ecbc6e46310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e9ea542318370a9ccf80ecbc6e46310">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[11/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">subscription_interleaving&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00762">762</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01578">stasis_forward_all()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">stasis_forward_cancel()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00682">stasis_subscribe_pool</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;{</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, parent_topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, topic1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, topic2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *, forward_sub1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *, forward_sub2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, sub1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, sub2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, consumer1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, consumer2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <span class="keywordtype">int</span> actual_len;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test sending interleaved events to a parent topic with different subscribers&quot;</span>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test sending events to a parent topic.\n&quot;</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;         <span class="stringliteral">&quot;This test creates three topics (one parent, two children)\n&quot;</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;         <span class="stringliteral">&quot;and publishes messages alternately between the children.\n&quot;</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;         <span class="stringliteral">&quot;It verifies that the messages are received in the expected\n&quot;</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;         <span class="stringliteral">&quot;order, for different subscription types: one with a dedicated\n&quot;</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;         <span class="stringliteral">&quot;thread, the other on the Stasis threadpool.&quot;</span>;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;test&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message_type);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   test_message1 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message1);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   test_message2 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2);</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   test_message3 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message3);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   parent_topic = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;ParentTestTopic&quot;</span>);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != parent_topic);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   topic1 = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;Topic1&quot;</span>);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic1);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   topic2 = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;Topic2&quot;</span>);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic2);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   forward_sub1 = <a class="code" href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a>(topic1, parent_topic);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != forward_sub1);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;   forward_sub2 = <a class="code" href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a>(topic2, parent_topic);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != forward_sub2);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   consumer1 = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != consumer1);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   consumer2 = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != consumer2);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   sub1 = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(parent_topic, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, consumer1);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != sub1);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(consumer1, +1);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   sub2 = <a class="code" href="../../dd/d79/stasis_8h.html#a597f7a30fe616c9f083a93ed168955ed">stasis_subscribe_pool</a>(parent_topic, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, consumer2);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != sub2);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(consumer2, +1);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic1, test_message1);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic2, test_message2);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic1, test_message3);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(consumer1, 3);</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 3 == actual_len);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(consumer2, 3);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 3 == actual_len);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message1 == consumer1-&gt;messages_rxed[0]);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message2 == consumer1-&gt;messages_rxed[1]);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message3 == consumer1-&gt;messages_rxed[2]);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message1 == consumer2-&gt;messages_rxed[0]);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message2 == consumer2-&gt;messages_rxed[1]);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message3 == consumer2-&gt;messages_rxed[2]);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="stasis_8h_html_a597f7a30fe616c9f083a93ed168955ed"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a597f7a30fe616c9f083a93ed168955ed">stasis_subscribe_pool</a></div><div class="ttdeci">#define stasis_subscribe_pool(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00682">stasis.h:682</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="stasis_8h_html_a5713715b0f26f4943d0af05363b07027"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_cancel(struct stasis_forward *forward)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01548">stasis.c:1548</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structstasis__forward_html"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html">stasis_forward</a></div><div class="ttdoc">Forwarding information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01531">stasis.c:1531</a></div></div>
<div class="ttc" id="stasis_8h_html_a2513a93567ddc93510f7896b777da119"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_all(struct stasis_topic *from_topic, struct stasis_topic *to_topic)</div><div class="ttdoc">Create a subscription which forwards all messages from one topic to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01578">stasis.c:1578</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1410e0f6a465c75131a56d9e947407aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1410e0f6a465c75131a56d9e947407aa">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[12/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">cache_filter&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00986">986</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">cache</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00901">cache_test_data_id()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00896">cache_test_message_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00288">consumer_should_stay()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00360">stasis_cache_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_caching_get_topic()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_caching_topic_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00119">stasis_caching_unsubscribe()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;{</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, non_cache_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d25/structstasis__cache.html">stasis_cache</a> *, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/de2/structstasis__caching__topic.html">stasis_caching_topic</a> *, caching_topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#afdc3370e3a15daaa00179f2f72ab8c9d">stasis_caching_unsubscribe</a>);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <span class="keywordtype">int</span> actual_len;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test caching topics only forward cache_update messages.&quot;</span>;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test caching topics only forward cache_update messages.&quot;</span>;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;   }</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;NonCacheable&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;non_cache_type) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != non_cache_type);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;SomeTopic&quot;</span>);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;   <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a64035c0f7317db2590817a173d268ff1">stasis_cache_create</a>(<a class="code" href="../../db/d00/test__stasis_8c.html#af07ba48f7996d7e2afc87738ac7eec42">cache_test_data_id</a>);</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   caching_topic = <a class="code" href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != caching_topic);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;   <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a>(caching_topic), <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, +1);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   test_message = <a class="code" href="../../db/d00/test__stasis_8c.html#a8b1ce82c9265948167aacdaaedd1365c">cache_test_message_create</a>(non_cache_type, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, test_message);</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#a973520f05217be8bca2fad9eb4c90696">consumer_should_stay</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, 0);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == actual_len);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;}</div><div class="ttc" id="test__stasis_8c_html_a973520f05217be8bca2fad9eb4c90696"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a973520f05217be8bca2fad9eb4c90696">consumer_should_stay</a></div><div class="ttdeci">static int consumer_should_stay(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00288">test_stasis.c:288</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis_8h_html_a4290101180caea800a0461017a167120"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a></div><div class="ttdeci">struct stasis_caching_topic * stasis_caching_topic_create(struct stasis_topic *original_topic, struct stasis_cache *cache)</div><div class="ttdoc">Create a topic which monitors and caches messages from another topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_cache.c:948</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="stasis_8h_html_afdc3370e3a15daaa00179f2f72ab8c9d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#afdc3370e3a15daaa00179f2f72ab8c9d">stasis_caching_unsubscribe</a></div><div class="ttdeci">struct stasis_caching_topic * stasis_caching_unsubscribe(struct stasis_caching_topic *caching_topic)</div><div class="ttdoc">Unsubscribes a caching topic from its upstream topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00119">stasis_cache.c:119</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="structstasis__cache_html"><div class="ttname"><a href="../../dd/d25/structstasis__cache.html">stasis_cache</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00046">stasis_cache.c:46</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a8b1ce82c9265948167aacdaaedd1365c"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a8b1ce82c9265948167aacdaaedd1365c">cache_test_message_create</a></div><div class="ttdeci">static struct stasis_message * cache_test_message_create(struct stasis_message_type *type, const char *name, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00896">test_stasis.c:896</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription_change::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00893">stasis.h:893</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_aefe318d32c8bb7a9e2025eb146d47781"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a></div><div class="ttdeci">struct ao2_container * cache</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">pbx_realtime.c:77</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="stasis_8h_html_a64035c0f7317db2590817a173d268ff1"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a64035c0f7317db2590817a173d268ff1">stasis_cache_create</a></div><div class="ttdeci">struct stasis_cache * stasis_cache_create(snapshot_get_id id_fn)</div><div class="ttdoc">Create a cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00360">stasis_cache.c:360</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structstasis__caching__topic_html"><div class="ttname"><a href="../../d3/de2/structstasis__caching__topic.html">stasis_caching_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00055">stasis_cache.c:55</a></div></div>
<div class="ttc" id="test__stasis_8c_html_af07ba48f7996d7e2afc87738ac7eec42"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#af07ba48f7996d7e2afc87738ac7eec42">cache_test_data_id</a></div><div class="ttdeci">static const char * cache_test_data_id(struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00901">test_stasis.c:901</a></div></div>
<div class="ttc" id="stasis_8h_html_a60b3b41b59f3894b40f5630524347d62"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a></div><div class="ttdeci">struct stasis_topic * stasis_caching_get_topic(struct stasis_caching_topic *caching_topic)</div><div class="ttdoc">Returns the topic of cached events from a caching topics. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_cache.c:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1d827ad9b1add74afadf8cfae237d056"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d827ad9b1add74afadf8cfae237d056">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[13/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d12/test__sorcery_8c.html#a754f1806adf6d9a932e80148f3f7bd12">cache</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01033">1033</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">cache</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00901">cache_test_data_id()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00896">cache_test_message_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00973">stasis_cache_update::new_snapshot</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00971">stasis_cache_update::old_snapshot</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache_clear_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00360">stasis_cache_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00686">stasis_cache_get()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gab5d1a876f8f0cd0562fb5d5f94c06717">stasis_cache_update_type()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_caching_get_topic()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_caching_topic_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00119">stasis_caching_unsubscribe()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;{</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, cache_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d25/structstasis__cache.html">stasis_cache</a> *, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/de2/structstasis__caching__topic.html">stasis_caching_topic</a> *, caching_topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#afdc3370e3a15daaa00179f2f72ab8c9d">stasis_caching_unsubscribe</a>);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message1_1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2_1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2_2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message1_clear, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   <span class="keywordtype">int</span> actual_len;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/dfa/structstasis__cache__update.html">stasis_cache_update</a> *actual_update;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test passing messages through cache topic unscathed.&quot;</span>;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test passing messages through cache topic unscathed.&quot;</span>;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;   }</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;Cacheable&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;cache_type) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_type);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;   topic = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;SomeTopic&quot;</span>);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a64035c0f7317db2590817a173d268ff1">stasis_cache_create</a>(<a class="code" href="../../db/d00/test__stasis_8c.html#af07ba48f7996d7e2afc87738ac7eec42">cache_test_data_id</a>);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;   caching_topic = <a class="code" href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a>(topic, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != caching_topic);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;   <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a>(caching_topic), <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, +1);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;   test_message1_1 = <a class="code" href="../../db/d00/test__stasis_8c.html#a8b1ce82c9265948167aacdaaedd1365c">cache_test_message_create</a>(cache_type, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>);</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message1_1);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;   test_message2_1 = <a class="code" href="../../db/d00/test__stasis_8c.html#a8b1ce82c9265948167aacdaaedd1365c">cache_test_message_create</a>(cache_type, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2_1);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;   <span class="comment">/* Post a couple of snapshots */</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message1_1);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message2_1);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, 2);</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 2 == actual_len);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   <span class="comment">/* Check for new snapshot messages */</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gab5d1a876f8f0cd0562fb5d5f94c06717">stasis_cache_update_type</a>() == <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[0]));</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   actual_update = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[0]);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == actual_update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#aa17fe414b5d7ef44223761c25a8047d4">old_snapshot</a>);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message1_1 == actual_update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#aae78adb4af9a7dedb7a77fc0d393076e">new_snapshot</a>);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message1_1 == <a class="code" href="../../dd/d79/stasis_8h.html#ab3da17290725793258020b83f56e4df6">stasis_cache_get</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, cache_type, <span class="stringliteral">&quot;1&quot;</span>));</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   <span class="comment">/* stasis_cache_get returned a ref, so unref test_message1_1 */</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(test_message1_1, -1);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gab5d1a876f8f0cd0562fb5d5f94c06717">stasis_cache_update_type</a>() == <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[1]));</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;   actual_update = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[1]);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == actual_update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#aa17fe414b5d7ef44223761c25a8047d4">old_snapshot</a>);</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message2_1 == actual_update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#aae78adb4af9a7dedb7a77fc0d393076e">new_snapshot</a>);</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message2_1 == <a class="code" href="../../dd/d79/stasis_8h.html#ab3da17290725793258020b83f56e4df6">stasis_cache_get</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, cache_type, <span class="stringliteral">&quot;2&quot;</span>));</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;   <span class="comment">/* stasis_cache_get returned a ref, so unref test_message2_1 */</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(test_message2_1, -1);</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   <span class="comment">/* Update snapshot 2 */</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   test_message2_2 = <a class="code" href="../../db/d00/test__stasis_8c.html#a8b1ce82c9265948167aacdaaedd1365c">cache_test_message_create</a>(cache_type, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2_2);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message2_2);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, 3);</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 3 == actual_len);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   actual_update = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[2]);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message2_1 == actual_update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#aa17fe414b5d7ef44223761c25a8047d4">old_snapshot</a>);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message2_2 == actual_update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#aae78adb4af9a7dedb7a77fc0d393076e">new_snapshot</a>);</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message2_2 == <a class="code" href="../../dd/d79/stasis_8h.html#ab3da17290725793258020b83f56e4df6">stasis_cache_get</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, cache_type, <span class="stringliteral">&quot;2&quot;</span>));</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   <span class="comment">/* stasis_cache_get returned a ref, so unref test_message2_2 */</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(test_message2_2, -1);</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   <span class="comment">/* Clear snapshot 1 */</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   test_message1_clear = <a class="code" href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a>(test_message1_1);</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message1_clear);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message1_clear);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, 4);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 4 == actual_len);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   actual_update = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[3]);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message1_1 == actual_update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#aa17fe414b5d7ef44223761c25a8047d4">old_snapshot</a>);</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == actual_update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#aae78adb4af9a7dedb7a77fc0d393076e">new_snapshot</a>);</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == <a class="code" href="../../dd/d79/stasis_8h.html#ab3da17290725793258020b83f56e4df6">stasis_cache_get</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, cache_type, <span class="stringliteral">&quot;1&quot;</span>));</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;}</div><div class="ttc" id="structstasis__cache__update_html_aa17fe414b5d7ef44223761c25a8047d4"><div class="ttname"><a href="../../de/dfa/structstasis__cache__update.html#aa17fe414b5d7ef44223761c25a8047d4">stasis_cache_update::old_snapshot</a></div><div class="ttdeci">struct stasis_message * old_snapshot</div><div class="ttdoc">Old value from the cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00971">stasis.h:971</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis_8h_html_a4290101180caea800a0461017a167120"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a></div><div class="ttdeci">struct stasis_caching_topic * stasis_caching_topic_create(struct stasis_topic *original_topic, struct stasis_cache *cache)</div><div class="ttdoc">Create a topic which monitors and caches messages from another topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_cache.c:948</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="stasis_8h_html_a169e12055004ecf0ecc355b3e3e1f218"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a></div><div class="ttdeci">struct stasis_message * stasis_cache_clear_create(struct stasis_message *message)</div><div class="ttdoc">A message which instructs the caching topic to remove an entry from its cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache.c:778</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="stasis_8h_html_afdc3370e3a15daaa00179f2f72ab8c9d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#afdc3370e3a15daaa00179f2f72ab8c9d">stasis_caching_unsubscribe</a></div><div class="ttdeci">struct stasis_caching_topic * stasis_caching_unsubscribe(struct stasis_caching_topic *caching_topic)</div><div class="ttdoc">Unsubscribes a caching topic from its upstream topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00119">stasis_cache.c:119</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="structstasis__cache_html"><div class="ttname"><a href="../../dd/d25/structstasis__cache.html">stasis_cache</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00046">stasis_cache.c:46</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a8b1ce82c9265948167aacdaaedd1365c"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a8b1ce82c9265948167aacdaaedd1365c">cache_test_message_create</a></div><div class="ttdeci">static struct stasis_message * cache_test_message_create(struct stasis_message_type *type, const char *name, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00896">test_stasis.c:896</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gab5d1a876f8f0cd0562fb5d5f94c06717"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gab5d1a876f8f0cd0562fb5d5f94c06717">stasis_cache_update_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_cache_update_type(void)</div><div class="ttdoc">Message type for cache update messages. </div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="structstasis__cache__update_html"><div class="ttname"><a href="../../de/dfa/structstasis__cache__update.html">stasis_cache_update</a></div><div class="ttdoc">Cache update message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00967">stasis.h:967</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription_change::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00893">stasis.h:893</a></div></div>
<div class="ttc" id="structstasis__cache__update_html_aae78adb4af9a7dedb7a77fc0d393076e"><div class="ttname"><a href="../../de/dfa/structstasis__cache__update.html#aae78adb4af9a7dedb7a77fc0d393076e">stasis_cache_update::new_snapshot</a></div><div class="ttdeci">struct stasis_message * new_snapshot</div><div class="ttdoc">New value. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00973">stasis.h:973</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_aefe318d32c8bb7a9e2025eb146d47781"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a></div><div class="ttdeci">struct ao2_container * cache</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">pbx_realtime.c:77</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="stasis_8h_html_a64035c0f7317db2590817a173d268ff1"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a64035c0f7317db2590817a173d268ff1">stasis_cache_create</a></div><div class="ttdeci">struct stasis_cache * stasis_cache_create(snapshot_get_id id_fn)</div><div class="ttdoc">Create a cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00360">stasis_cache.c:360</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="stasis_8h_html_ab3da17290725793258020b83f56e4df6"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ab3da17290725793258020b83f56e4df6">stasis_cache_get</a></div><div class="ttdeci">struct stasis_message * stasis_cache_get(struct stasis_cache *cache, struct stasis_message_type *type, const char *id)</div><div class="ttdoc">Retrieve an item from the cache for the ast_eid_default entity. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00686">stasis_cache.c:686</a></div></div>
<div class="ttc" id="structstasis__caching__topic_html"><div class="ttname"><a href="../../d3/de2/structstasis__caching__topic.html">stasis_caching_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00055">stasis_cache.c:55</a></div></div>
<div class="ttc" id="test__stasis_8c_html_af07ba48f7996d7e2afc87738ac7eec42"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#af07ba48f7996d7e2afc87738ac7eec42">cache_test_data_id</a></div><div class="ttdeci">static const char * cache_test_data_id(struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00901">test_stasis.c:901</a></div></div>
<div class="ttc" id="stasis_8h_html_a60b3b41b59f3894b40f5630524347d62"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a></div><div class="ttdeci">struct stasis_topic * stasis_caching_get_topic(struct stasis_caching_topic *caching_topic)</div><div class="ttdoc">Returns the topic of cached events from a caching topics. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_cache.c:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4a6e8dcba733ae5b2bcbfdb2187ea5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4a6e8dcba733ae5b2bcbfdb2187ea5f">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[14/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">cache_dump&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01132">1132</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">cache</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00901">cache_test_data_id()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00896">cache_test_message_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache_clear_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00360">stasis_cache_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00736">stasis_cache_dump()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_caching_get_topic()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_caching_topic_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00119">stasis_caching_unsubscribe()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;{</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, cache_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d25/structstasis__cache.html">stasis_cache</a> *, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/de2/structstasis__caching__topic.html">stasis_caching_topic</a> *, caching_topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#afdc3370e3a15daaa00179f2f72ab8c9d">stasis_caching_unsubscribe</a>);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message1_1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2_1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2_2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message1_clear, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *, cache_dump, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   <span class="keywordtype">int</span> actual_len;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   <span class="keywordtype">void</span> *obj;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test cache dump routines.&quot;</span>;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test cache dump routines.&quot;</span>;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;   }</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;Cacheable&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;cache_type) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_type);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   topic = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;SomeTopic&quot;</span>);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a64035c0f7317db2590817a173d268ff1">stasis_cache_create</a>(<a class="code" href="../../db/d00/test__stasis_8c.html#af07ba48f7996d7e2afc87738ac7eec42">cache_test_data_id</a>);</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   caching_topic = <a class="code" href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a>(topic, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != caching_topic);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a>(caching_topic), <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, +1);</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   test_message1_1 = <a class="code" href="../../db/d00/test__stasis_8c.html#a8b1ce82c9265948167aacdaaedd1365c">cache_test_message_create</a>(cache_type, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message1_1);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   test_message2_1 = <a class="code" href="../../db/d00/test__stasis_8c.html#a8b1ce82c9265948167aacdaaedd1365c">cache_test_message_create</a>(cache_type, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>);</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2_1);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;   <span class="comment">/* Post a couple of snapshots */</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message1_1);</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message2_1);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, 2);</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 2 == actual_len);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;   <span class="comment">/* Check the cache */</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cache_dump);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;   cache_dump = <a class="code" href="../../dd/d79/stasis_8h.html#a8c5612920b22beb93b5e8acbdae40078">stasis_cache_dump</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_dump);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 2 == <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(cache_dump));</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cache_dump, 0);</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;   <span class="keywordflow">while</span> ((obj = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, actual_cache_entry, obj, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, actual_cache_entry == test_message1_1 || actual_cache_entry == test_message2_1);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;   }</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   <span class="comment">/* Update snapshot 2 */</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;   test_message2_2 = <a class="code" href="../../db/d00/test__stasis_8c.html#a8b1ce82c9265948167aacdaaedd1365c">cache_test_message_create</a>(cache_type, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>);</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2_2);</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message2_2);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, 3);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 3 == actual_len);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;   <span class="comment">/* Check the cache */</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cache_dump);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   cache_dump = <a class="code" href="../../dd/d79/stasis_8h.html#a8c5612920b22beb93b5e8acbdae40078">stasis_cache_dump</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_dump);</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 2 == <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(cache_dump));</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cache_dump, 0);</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   <span class="keywordflow">while</span> ((obj = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, actual_cache_entry, obj, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, actual_cache_entry == test_message1_1 || actual_cache_entry == test_message2_2);</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;   }</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;   <span class="comment">/* Clear snapshot 1 */</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;   test_message1_clear = <a class="code" href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a>(test_message1_1);</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message1_clear);</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message1_clear);</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>, 4);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 4 == actual_len);</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   <span class="comment">/* Check the cache */</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cache_dump);</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   cache_dump = <a class="code" href="../../dd/d79/stasis_8h.html#a8c5612920b22beb93b5e8acbdae40078">stasis_cache_dump</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_dump);</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(cache_dump));</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cache_dump, 0);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;   <span class="keywordflow">while</span> ((obj = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, actual_cache_entry, obj, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, actual_cache_entry == test_message2_2);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   }</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;   <span class="comment">/* Dump the cache to ensure that it has no subscription change items in it since those aren&#39;t cached */</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cache_dump);</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;   cache_dump = <a class="code" href="../../dd/d79/stasis_8h.html#a8c5612920b22beb93b5e8acbdae40078">stasis_cache_dump</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>());</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(cache_dump));</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis_8h_html_a4290101180caea800a0461017a167120"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a></div><div class="ttdeci">struct stasis_caching_topic * stasis_caching_topic_create(struct stasis_topic *original_topic, struct stasis_cache *cache)</div><div class="ttdoc">Create a topic which monitors and caches messages from another topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_cache.c:948</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="stasis_8h_html_a169e12055004ecf0ecc355b3e3e1f218"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a></div><div class="ttdeci">struct stasis_message * stasis_cache_clear_create(struct stasis_message *message)</div><div class="ttdoc">A message which instructs the caching topic to remove an entry from its cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache.c:778</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="stasis_8h_html_a8c5612920b22beb93b5e8acbdae40078"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a8c5612920b22beb93b5e8acbdae40078">stasis_cache_dump</a></div><div class="ttdeci">struct ao2_container * stasis_cache_dump(struct stasis_cache *cache, struct stasis_message_type *type)</div><div class="ttdoc">Dump cached items to a subscription for the ast_eid_default entity. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00736">stasis_cache.c:736</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="stasis_8h_html_afdc3370e3a15daaa00179f2f72ab8c9d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#afdc3370e3a15daaa00179f2f72ab8c9d">stasis_caching_unsubscribe</a></div><div class="ttdeci">struct stasis_caching_topic * stasis_caching_unsubscribe(struct stasis_caching_topic *caching_topic)</div><div class="ttdoc">Unsubscribes a caching topic from its upstream topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00119">stasis_cache.c:119</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="structstasis__cache_html"><div class="ttname"><a href="../../dd/d25/structstasis__cache.html">stasis_cache</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00046">stasis_cache.c:46</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a8b1ce82c9265948167aacdaaedd1365c"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a8b1ce82c9265948167aacdaaedd1365c">cache_test_message_create</a></div><div class="ttdeci">static struct stasis_message * cache_test_message_create(struct stasis_message_type *type, const char *name, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00896">test_stasis.c:896</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_aefe318d32c8bb7a9e2025eb146d47781"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a></div><div class="ttdeci">struct ao2_container * cache</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">pbx_realtime.c:77</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="stasis_8h_html_a64035c0f7317db2590817a173d268ff1"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a64035c0f7317db2590817a173d268ff1">stasis_cache_create</a></div><div class="ttdeci">struct stasis_cache * stasis_cache_create(snapshot_get_id id_fn)</div><div class="ttdoc">Create a cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00360">stasis_cache.c:360</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structstasis__caching__topic_html"><div class="ttname"><a href="../../d3/de2/structstasis__caching__topic.html">stasis_caching_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00055">stasis_cache.c:55</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
<div class="ttc" id="test__stasis_8c_html_af07ba48f7996d7e2afc87738ac7eec42"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#af07ba48f7996d7e2afc87738ac7eec42">cache_test_data_id</a></div><div class="ttdeci">static const char * cache_test_data_id(struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00901">test_stasis.c:901</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="stasis_8h_html_a60b3b41b59f3894b40f5630524347d62"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a></div><div class="ttdeci">struct stasis_topic * stasis_caching_get_topic(struct stasis_caching_topic *caching_topic)</div><div class="ttdoc">Returns the topic of cached events from a caching topics. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_cache.c:85</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a761159aec951e0bcd7f7edbb5f9909aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a761159aec951e0bcd7f7edbb5f9909aa">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[15/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">cache_eid_aggregate&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01245">1245</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00093">ast_eid_default</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">cache</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00911">cache_test_aggregate_calc_fn()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00965">cache_test_aggregate_publish_fn()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00901">cache_test_data_id()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00875">cache_test_message_create_full()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00970">check_cache_aggregate()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache_clear_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00334">stasis_cache_create_full()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00757">stasis_cache_dump_all()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00718">stasis_cache_dump_by_eid()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00587">stasis_cache_get_all()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_caching_get_topic()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_caching_topic_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00119">stasis_caching_unsubscribe()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;{</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, cache_type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d25/structstasis__cache.html">stasis_cache</a> *, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/de2/structstasis__caching__topic.html">stasis_caching_topic</a> *, caching_topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#afdc3370e3a15daaa00179f2f72ab8c9d">stasis_caching_unsubscribe</a>);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, cache_consumer, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, topic_consumer, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, topic_sub, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, cache_sub, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message1_1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2_1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2_2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2_3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2_4, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message1_clear, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2_clear, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *, cache_dump, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;   <span class="keywordtype">int</span> actual_len;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;   <span class="keywordtype">void</span> *obj;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> foreign_eid1;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> foreign_eid2;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test cache eid and aggregate support.&quot;</span>;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test cache eid and aggregate support.&quot;</span>;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;   memset(&amp;foreign_eid1, 0xAA, <span class="keyword">sizeof</span>(foreign_eid1));</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;   memset(&amp;foreign_eid2, 0xBB, <span class="keyword">sizeof</span>(foreign_eid2));</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;Cacheable&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;cache_type) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_type);</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;   topic = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;SomeTopic&quot;</span>);</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;   <span class="comment">/* To consume events published to the topic. */</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   topic_consumer = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic_consumer);</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;   topic_sub = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(topic, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, topic_consumer);</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic_sub);</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic_consumer, +1);</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;   <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a> = <a class="code" href="../../dd/d79/stasis_8h.html#adb417e66895425f128678fe3ed589010">stasis_cache_create_full</a>(<a class="code" href="../../db/d00/test__stasis_8c.html#af07ba48f7996d7e2afc87738ac7eec42">cache_test_data_id</a>,</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <a class="code" href="../../db/d00/test__stasis_8c.html#ae788a5ff3f8b6accb6207e7b61cfe610">cache_test_aggregate_calc_fn</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a51db803ccb24e1be25a700cb633f8509">cache_test_aggregate_publish_fn</a>);</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;   caching_topic = <a class="code" href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a>(topic, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != caching_topic);</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   <span class="comment">/* To consume update events published to the caching_topic. */</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;   cache_consumer = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_consumer);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;   cache_sub = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a>(caching_topic), <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, cache_consumer);</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_sub);</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cache_consumer, +1);</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;   <span class="comment">/* Create test messages. */</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;   test_message1_1 = <a class="code" href="../../db/d00/test__stasis_8c.html#aeeb19b488370ef7d5b052bc2b1ed0894">cache_test_message_create_full</a>(cache_type, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, &amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>);</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message1_1);</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;   test_message2_1 = <a class="code" href="../../db/d00/test__stasis_8c.html#aeeb19b488370ef7d5b052bc2b1ed0894">cache_test_message_create_full</a>(cache_type, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, &amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>);</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2_1);</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   test_message2_2 = <a class="code" href="../../db/d00/test__stasis_8c.html#aeeb19b488370ef7d5b052bc2b1ed0894">cache_test_message_create_full</a>(cache_type, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, &amp;foreign_eid1);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2_2);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;   test_message2_3 = <a class="code" href="../../db/d00/test__stasis_8c.html#aeeb19b488370ef7d5b052bc2b1ed0894">cache_test_message_create_full</a>(cache_type, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;3&quot;</span>, &amp;foreign_eid2);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2_3);</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;   test_message2_4 = <a class="code" href="../../db/d00/test__stasis_8c.html#aeeb19b488370ef7d5b052bc2b1ed0894">cache_test_message_create_full</a>(cache_type, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;4&quot;</span>, &amp;foreign_eid2);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2_4);</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;   <span class="comment">/* Post some snapshots */</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message1_1);</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#adca7190fcf61a89ccee694a58cd18838">check_cache_aggregate</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, cache_type, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message2_1);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#adca7190fcf61a89ccee694a58cd18838">check_cache_aggregate</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, cache_type, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message2_2);</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#adca7190fcf61a89ccee694a58cd18838">check_cache_aggregate</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, cache_type, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;3&quot;</span>));</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(cache_consumer, 6);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 6 == actual_len);</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(topic_consumer, 6);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 6 == actual_len);</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;   <span class="comment">/* Check the cache */</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cache_dump);</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   cache_dump = <a class="code" href="../../dd/d79/stasis_8h.html#ab54f6037e019ae477c15e90e52904d09">stasis_cache_dump_all</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_dump);</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 3 == <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(cache_dump));</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cache_dump, 0);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   <span class="keywordflow">while</span> ((obj = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, actual_cache_entry, obj, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>,</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;         actual_cache_entry == test_message1_1</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;         || actual_cache_entry == test_message2_1</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;         || actual_cache_entry == test_message2_2);</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   }</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;   <span class="comment">/* Check the local cached items */</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cache_dump);</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;   cache_dump = <a class="code" href="../../dd/d79/stasis_8h.html#a9a4de0928d2b230b1c3184ba506ecf26">stasis_cache_dump_by_eid</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>);</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_dump);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 2 == <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(cache_dump));</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cache_dump, 0);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;   <span class="keywordflow">while</span> ((obj = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, actual_cache_entry, obj, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>,</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;         actual_cache_entry == test_message1_1</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;         || actual_cache_entry == test_message2_1);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   }</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;   <span class="comment">/* Post snapshot 2 from another eid. */</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message2_3);</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#adca7190fcf61a89ccee694a58cd18838">check_cache_aggregate</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, cache_type, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;6&quot;</span>));</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(cache_consumer, 8);</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 8 == actual_len);</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(topic_consumer, 8);</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 8 == actual_len);</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;   <span class="comment">/* Check the cache */</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cache_dump);</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;   cache_dump = <a class="code" href="../../dd/d79/stasis_8h.html#ab54f6037e019ae477c15e90e52904d09">stasis_cache_dump_all</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_dump);</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 4 == <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(cache_dump));</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cache_dump, 0);</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;   <span class="keywordflow">while</span> ((obj = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, actual_cache_entry, obj, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>,</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;         actual_cache_entry == test_message1_1</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;         || actual_cache_entry == test_message2_1</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;         || actual_cache_entry == test_message2_2</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;         || actual_cache_entry == test_message2_3);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   }</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;   <span class="comment">/* Check the remote cached items */</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cache_dump);</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   cache_dump = <a class="code" href="../../dd/d79/stasis_8h.html#a9a4de0928d2b230b1c3184ba506ecf26">stasis_cache_dump_by_eid</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;foreign_eid1);</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_dump);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(cache_dump));</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cache_dump, 0);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   <span class="keywordflow">while</span> ((obj = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, actual_cache_entry, obj, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, actual_cache_entry == test_message2_2);</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;   }</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;   <span class="comment">/* Post snapshot 2 from a repeated eid. */</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message2_4);</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#adca7190fcf61a89ccee694a58cd18838">check_cache_aggregate</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, cache_type, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;7&quot;</span>));</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(cache_consumer, 10);</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 10 == actual_len);</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(topic_consumer, 10);</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 10 == actual_len);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   <span class="comment">/* Check the cache */</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cache_dump);</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   cache_dump = <a class="code" href="../../dd/d79/stasis_8h.html#ab54f6037e019ae477c15e90e52904d09">stasis_cache_dump_all</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_dump);</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 4 == <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(cache_dump));</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cache_dump, 0);</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   <span class="keywordflow">while</span> ((obj = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, actual_cache_entry, obj, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>,</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;         actual_cache_entry == test_message1_1</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;         || actual_cache_entry == test_message2_1</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;         || actual_cache_entry == test_message2_2</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;         || actual_cache_entry == test_message2_4);</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   }</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;   <span class="comment">/* Check all snapshot 2 cache entries. */</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cache_dump);</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   cache_dump = <a class="code" href="../../dd/d79/stasis_8h.html#a886f222d38f8a07dee5a595d5c19a3fb">stasis_cache_get_all</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, cache_type, <span class="stringliteral">&quot;2&quot;</span>);</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_dump);</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 3 == <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(cache_dump));</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cache_dump, 0);</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;   <span class="keywordflow">while</span> ((obj = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, actual_cache_entry, obj, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>,</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;         actual_cache_entry == test_message2_1</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;         || actual_cache_entry == test_message2_2</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;         || actual_cache_entry == test_message2_4);</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;   }</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;   <span class="comment">/* Clear snapshot 1 */</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;   test_message1_clear = <a class="code" href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a>(test_message1_1);</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message1_clear);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message1_clear);</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#adca7190fcf61a89ccee694a58cd18838">check_cache_aggregate</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, cache_type, <span class="stringliteral">&quot;1&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(cache_consumer, 12);</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 12 == actual_len);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(topic_consumer, 11);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 11 == actual_len);</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;   <span class="comment">/* Check the cache */</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cache_dump);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;   cache_dump = <a class="code" href="../../dd/d79/stasis_8h.html#ab54f6037e019ae477c15e90e52904d09">stasis_cache_dump_all</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_dump);</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 3 == <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(cache_dump));</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cache_dump, 0);</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;   <span class="keywordflow">while</span> ((obj = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, actual_cache_entry, obj, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>,</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;         actual_cache_entry == test_message2_1</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;         || actual_cache_entry == test_message2_2</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;         || actual_cache_entry == test_message2_4);</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;   }</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;   <span class="comment">/* Clear snapshot 2 from a remote eid */</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;   test_message2_clear = <a class="code" href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a>(test_message2_2);</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2_clear);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message2_clear);</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#adca7190fcf61a89ccee694a58cd18838">check_cache_aggregate</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, cache_type, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;5&quot;</span>));</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(cache_consumer, 14);</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 14 == actual_len);</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(topic_consumer, 13);</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 13 == actual_len);</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;   <span class="comment">/* Check the cache */</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cache_dump);</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;   cache_dump = <a class="code" href="../../dd/d79/stasis_8h.html#ab54f6037e019ae477c15e90e52904d09">stasis_cache_dump_all</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cache_dump);</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 2 == <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(cache_dump));</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cache_dump, 0);</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;   <span class="keywordflow">while</span> ((obj = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, actual_cache_entry, obj, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>,</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;         actual_cache_entry == test_message2_1</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;         || actual_cache_entry == test_message2_4);</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;   }</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;}</div><div class="ttc" id="stasis_8h_html_ab54f6037e019ae477c15e90e52904d09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ab54f6037e019ae477c15e90e52904d09">stasis_cache_dump_all</a></div><div class="ttdeci">struct ao2_container * stasis_cache_dump_all(struct stasis_cache *cache, struct stasis_message_type *type)</div><div class="ttdoc">Dump all entity items from the cache to a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00757">stasis_cache.c:757</a></div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis_8h_html_a4290101180caea800a0461017a167120"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a></div><div class="ttdeci">struct stasis_caching_topic * stasis_caching_topic_create(struct stasis_topic *original_topic, struct stasis_cache *cache)</div><div class="ttdoc">Create a topic which monitors and caches messages from another topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_cache.c:948</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="stasis_8h_html_a169e12055004ecf0ecc355b3e3e1f218"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a></div><div class="ttdeci">struct stasis_message * stasis_cache_clear_create(struct stasis_message *message)</div><div class="ttdoc">A message which instructs the caching topic to remove an entry from its cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache.c:778</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="stasis_8h_html_afdc3370e3a15daaa00179f2f72ab8c9d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#afdc3370e3a15daaa00179f2f72ab8c9d">stasis_caching_unsubscribe</a></div><div class="ttdeci">struct stasis_caching_topic * stasis_caching_unsubscribe(struct stasis_caching_topic *caching_topic)</div><div class="ttdoc">Unsubscribes a caching topic from its upstream topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00119">stasis_cache.c:119</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="structstasis__cache_html"><div class="ttname"><a href="../../dd/d25/structstasis__cache.html">stasis_cache</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00046">stasis_cache.c:46</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_adb417e66895425f128678fe3ed589010"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#adb417e66895425f128678fe3ed589010">stasis_cache_create_full</a></div><div class="ttdeci">struct stasis_cache * stasis_cache_create_full(snapshot_get_id id_fn, cache_aggregate_calc_fn aggregate_calc_fn, cache_aggregate_publish_fn aggregate_publish_fn)</div><div class="ttdoc">Create a cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00334">stasis_cache.c:334</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_a9a4de0928d2b230b1c3184ba506ecf26"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9a4de0928d2b230b1c3184ba506ecf26">stasis_cache_dump_by_eid</a></div><div class="ttdeci">struct ao2_container * stasis_cache_dump_by_eid(struct stasis_cache *cache, struct stasis_message_type *type, const struct ast_eid *eid)</div><div class="ttdoc">Dump cached items to a subscription for a specific entity. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00718">stasis_cache.c:718</a></div></div>
<div class="ttc" id="test__stasis_8c_html_aeeb19b488370ef7d5b052bc2b1ed0894"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#aeeb19b488370ef7d5b052bc2b1ed0894">cache_test_message_create_full</a></div><div class="ttdeci">static struct stasis_message * cache_test_message_create_full(struct stasis_message_type *type, const char *name, const char *value, struct ast_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00875">test_stasis.c:875</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="test__stasis_8c_html_adca7190fcf61a89ccee694a58cd18838"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#adca7190fcf61a89ccee694a58cd18838">check_cache_aggregate</a></div><div class="ttdeci">static int check_cache_aggregate(struct stasis_cache *cache, struct stasis_message_type *cache_type, const char *id, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00970">test_stasis.c:970</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ae788a5ff3f8b6accb6207e7b61cfe610"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ae788a5ff3f8b6accb6207e7b61cfe610">cache_test_aggregate_calc_fn</a></div><div class="ttdeci">static struct stasis_message * cache_test_aggregate_calc_fn(struct stasis_cache_entry *entry, struct stasis_message *new_snapshot)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00911">test_stasis.c:911</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_aefe318d32c8bb7a9e2025eb146d47781"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a></div><div class="ttdeci">struct ao2_container * cache</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">pbx_realtime.c:77</a></div></div>
<div class="ttc" id="utils_8h_html_ad5db11fa27352e2b9a3c669adc76955f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a></div><div class="ttdeci">struct ast_eid ast_eid_default</div><div class="ttdoc">Global EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00093">options.c:93</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a51db803ccb24e1be25a700cb633f8509"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a51db803ccb24e1be25a700cb633f8509">cache_test_aggregate_publish_fn</a></div><div class="ttdeci">static void cache_test_aggregate_publish_fn(struct stasis_topic *topic, struct stasis_message *aggregate)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00965">test_stasis.c:965</a></div></div>
<div class="ttc" id="stasis_8h_html_a886f222d38f8a07dee5a595d5c19a3fb"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a886f222d38f8a07dee5a595d5c19a3fb">stasis_cache_get_all</a></div><div class="ttdeci">struct ao2_container * stasis_cache_get_all(struct stasis_cache *cache, struct stasis_message_type *type, const char *id)</div><div class="ttdoc">Retrieve all matching entity items from the cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00587">stasis_cache.c:587</a></div></div>
<div class="ttc" id="structstasis__caching__topic_html"><div class="ttname"><a href="../../d3/de2/structstasis__caching__topic.html">stasis_caching_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00055">stasis_cache.c:55</a></div></div>
<div class="ttc" id="test__stasis_8c_html_af07ba48f7996d7e2afc87738ac7eec42"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#af07ba48f7996d7e2afc87738ac7eec42">cache_test_data_id</a></div><div class="ttdeci">static const char * cache_test_data_id(struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00901">test_stasis.c:901</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="stasis_8h_html_a60b3b41b59f3894b40f5630524347d62"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a></div><div class="ttdeci">struct stasis_topic * stasis_caching_get_topic(struct stasis_caching_topic *caching_topic)</div><div class="ttdoc">Returns the topic of cached events from a caching topics. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_cache.c:85</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8abb583c1f56356b4779194aea225dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8abb583c1f56356b4779194aea225dd">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[16/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d6a/res__endpoint__stats_8c.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01505">1505</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router_add()</a>, <a class="el" href="../../d4/d25/stasis__message__router_8h_source.html#l00060">stasis_message_router_create</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00387">stasis_message_router_set_default()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00269">stasis_message_router_unsubscribe_and_join()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;{</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a641f77c471ff127e8586247ff6c0d64c">stasis_message_router_unsubscribe_and_join</a>);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, consumer1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, consumer2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, consumer3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;   <span class="keywordtype">int</span> actual_len, ret;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *actual;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test simple message routing&quot;</span>;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test simple message routing&quot;</span>;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;   }</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;   topic = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;TestTopic&quot;</span>);</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;   consumer1 = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != consumer1);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;   consumer2 = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != consumer2);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;   consumer3 = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != consumer3);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessage1&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type1) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message_type1);</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessage2&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type2) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message_type2);</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessage3&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type3) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message_type3);</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;   uut = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a>(topic);</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut);</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;   ret = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      uut, test_message_type1, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, consumer1);</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == ret);</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(consumer1, +1);</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   ret = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      uut, test_message_type2, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, consumer2);</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == ret);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(consumer2, +1);</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;   ret = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#aa59d4e87c66028292722730a82c149ab">stasis_message_router_set_default</a>(uut, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, consumer3);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == ret);</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(consumer3, +1);</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;   <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;   test_message1 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type1, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message1);</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;   test_message2 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type2, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2);</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;   test_message3 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type3, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message3);</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message1);</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message2);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message3);</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(consumer1, 1);</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == actual_len);</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(consumer2, 1);</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == actual_len);</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(consumer3, 1);</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == actual_len);</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;   actual = consumer1-&gt;messages_rxed[0];</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message1 == actual);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;   actual = consumer2-&gt;messages_rxed[0];</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message2 == actual);</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;   actual = consumer3-&gt;messages_rxed[0];</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message3 == actual);</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   <span class="comment">/* consumer1 and consumer2 do not get the final message. */</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(consumer1);</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(consumer2);</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;}</div><div class="ttc" id="stasis__message__router_8h_html_a5adc304e693097ec75b474e6a5309958"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a></div><div class="ttdeci">int stasis_message_router_add(struct stasis_message_router *router, struct stasis_message_type *message_type, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Add a route to a message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router.c:310</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a641f77c471ff127e8586247ff6c0d64c"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a641f77c471ff127e8586247ff6c0d64c">stasis_message_router_unsubscribe_and_join</a></div><div class="ttdeci">void stasis_message_router_unsubscribe_and_join(struct stasis_message_router *router)</div><div class="ttdoc">Unsubscribe the router from the upstream topic, blocking until the final message has been processed...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00269">stasis_message_router.c:269</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structstasis__message__router_html"><div class="ttname"><a href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00131">stasis_message_router.c:131</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a1a1761c57f73009d305f95d8ad99e2a7"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a></div><div class="ttdeci">#define stasis_message_router_create(topic)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d25/stasis__message__router_8h_source.html#l00060">stasis_message_router.h:60</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_aa59d4e87c66028292722730a82c149ab"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#aa59d4e87c66028292722730a82c149ab">stasis_message_router_set_default</a></div><div class="ttdeci">int stasis_message_router_set_default(struct stasis_message_router *router, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Sets the default route of a router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00387">stasis_message_router.c:387</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab31e30c5eab6a04b81c6b7e5d650dda2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab31e30c5eab6a04b81c6b7e5d650dda2">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[17/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">router_pool&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01601">1601</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router_add()</a>, <a class="el" href="../../d4/d25/stasis__message__router_8h_source.html#l00077">stasis_message_router_create_pool</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00387">stasis_message_router_set_default()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00269">stasis_message_router_unsubscribe_and_join()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;{</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a641f77c471ff127e8586247ff6c0d64c">stasis_message_router_unsubscribe_and_join</a>);</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, consumer1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, consumer2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, consumer3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   <span class="keywordtype">int</span> actual_len, ret;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *actual;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test message routing via threadpool&quot;</span>;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test simple message routing when\n&quot;</span></div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;         <span class="stringliteral">&quot;the subscriptions dictate usage of the Stasis\n&quot;</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;         <span class="stringliteral">&quot;threadpool.&quot;</span>;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;   }</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;   topic = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;TestTopic&quot;</span>);</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic);</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;   consumer1 = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != consumer1);</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;   consumer2 = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != consumer2);</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;   consumer3 = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != consumer3);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessage1&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type1) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message_type1);</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessage2&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type2) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message_type2);</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessage3&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type3) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message_type3);</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   uut = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a7ba1d69412c7149859c52b8a6664fc31">stasis_message_router_create_pool</a>(topic);</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut);</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;   ret = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      uut, test_message_type1, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, consumer1);</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == ret);</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(consumer1, +1);</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;   ret = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      uut, test_message_type2, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, consumer2);</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == ret);</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(consumer2, +1);</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;   ret = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#aa59d4e87c66028292722730a82c149ab">stasis_message_router_set_default</a>(uut, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, consumer3);</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == ret);</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(consumer3, +1);</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;   <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;   test_message1 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type1, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message1);</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;   test_message2 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type2, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2);</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;   test_message3 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type3, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message3);</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message1);</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message2);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message3);</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(consumer1, 1);</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == actual_len);</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(consumer2, 1);</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == actual_len);</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(consumer3, 1);</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == actual_len);</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;   actual = consumer1-&gt;messages_rxed[0];</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message1 == actual);</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;   actual = consumer2-&gt;messages_rxed[0];</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message2 == actual);</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;   actual = consumer3-&gt;messages_rxed[0];</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message3 == actual);</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;   <span class="comment">/* consumer1 and consumer2 do not get the final message. */</span></div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(consumer1);</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(consumer2);</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;}</div><div class="ttc" id="stasis__message__router_8h_html_a7ba1d69412c7149859c52b8a6664fc31"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a7ba1d69412c7149859c52b8a6664fc31">stasis_message_router_create_pool</a></div><div class="ttdeci">#define stasis_message_router_create_pool(topic)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d25/stasis__message__router_8h_source.html#l00077">stasis_message_router.h:77</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a5adc304e693097ec75b474e6a5309958"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a></div><div class="ttdeci">int stasis_message_router_add(struct stasis_message_router *router, struct stasis_message_type *message_type, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Add a route to a message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router.c:310</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a641f77c471ff127e8586247ff6c0d64c"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a641f77c471ff127e8586247ff6c0d64c">stasis_message_router_unsubscribe_and_join</a></div><div class="ttdeci">void stasis_message_router_unsubscribe_and_join(struct stasis_message_router *router)</div><div class="ttdoc">Unsubscribe the router from the upstream topic, blocking until the final message has been processed...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00269">stasis_message_router.c:269</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structstasis__message__router_html"><div class="ttname"><a href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00131">stasis_message_router.c:131</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_aa59d4e87c66028292722730a82c149ab"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#aa59d4e87c66028292722730a82c149ab">stasis_message_router_set_default</a></div><div class="ttdeci">int stasis_message_router_set_default(struct stasis_message_router *router, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Sets the default route of a router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00387">stasis_message_router.c:387</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f323bcc58f0284ecd7fa7b9d761ca6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f323bcc58f0284ecd7fa7b9d761ca6c">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[18/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">router_cache_updates&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01710">1710</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">cache</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01699">cache_simple()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00288">consumer_should_stay()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00973">stasis_cache_update::new_snapshot</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00360">stasis_cache_create()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gab5d1a876f8f0cd0562fb5d5f94c06717">stasis_cache_update_type()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_caching_get_topic()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_caching_topic_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00146">stasis_caching_unsubscribe_and_join()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router_add()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00336">stasis_message_router_add_cache_update()</a>, <a class="el" href="../../d4/d25/stasis__message__router_8h_source.html#l00060">stasis_message_router_create</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00387">stasis_message_router_set_default()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00269">stasis_message_router_unsubscribe_and_join()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00969">stasis_cache_update::type</a>, and <a class="el" href="../../d0/d89/codec__g726_8c_source.html#l00367">update()</a>.</p>
<div class="fragment"><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;{</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d25/structstasis__cache.html">stasis_cache</a> *, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/de2/structstasis__caching__topic.html">stasis_caching_topic</a> *, caching_topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#ab211ac23afbd0560f08539021888db57">stasis_caching_unsubscribe_and_join</a>);</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, test_message_type3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a641f77c471ff127e8586247ff6c0d64c">stasis_message_router_unsubscribe_and_join</a>);</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, test_message3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, consumer1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, consumer2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *, consumer3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, message1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, message2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/dfa/structstasis__cache__update.html">stasis_cache_update</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;   <span class="keywordtype">int</span> actual_len, ret;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *actual;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test special handling cache_update messages&quot;</span>;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test special handling cache_update messages&quot;</span>;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   }</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;   topic = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;TestTopic&quot;</span>);</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic);</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;   <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a64035c0f7317db2590817a173d268ff1">stasis_cache_create</a>(<a class="code" href="../../db/d00/test__stasis_8c.html#a687531d23b24a0e0d243443e2f79a4c5">cache_simple</a>);</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;   caching_topic = <a class="code" href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a>(topic, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != caching_topic);</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;   consumer1 = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != consumer1);</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;   consumer2 = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != consumer2);</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;   consumer3 = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(1);</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != consumer3);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;Cache1&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type1) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message_type1);</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;Cache2&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type2) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message_type2);</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;NonCache&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;test_message_type3) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message_type3);</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;   uut = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a>(</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a>(caching_topic));</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut);</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;   ret = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a77e2b34cd6f7daafb7bb43bfd6642cbc">stasis_message_router_add_cache_update</a>(</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      uut, test_message_type1, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, consumer1);</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == ret);</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(consumer1, +1);</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;   ret = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      uut, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gab5d1a876f8f0cd0562fb5d5f94c06717">stasis_cache_update_type</a>(), <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, consumer2);</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == ret);</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(consumer2, +1);</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;   ret = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#aa59d4e87c66028292722730a82c149ab">stasis_message_router_set_default</a>(uut, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, consumer3);</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == ret);</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(consumer3, +1);</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;   <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;   test_message1 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type1, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message1);</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;   test_message2 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type2, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message2);</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;   test_message3 = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(test_message_type3, <a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>);</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != test_message3);</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message1);</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message2);</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, test_message3);</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(consumer1, 1);</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == actual_len);</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(consumer2, 1);</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == actual_len);</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;   <span class="comment">/* Uncacheable message should not be passed through */</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;   actual_len = <a class="code" href="../../db/d00/test__stasis_8c.html#a973520f05217be8bca2fad9eb4c90696">consumer_should_stay</a>(consumer3, 0);</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 0 == actual_len);</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;   actual = consumer1-&gt;messages_rxed[0];</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gab5d1a876f8f0cd0562fb5d5f94c06717">stasis_cache_update_type</a>() == <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(actual));</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;   update = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(actual);</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message_type1 == update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#a39694abd1b80d3c9ef0619acf9d493aa">type</a>);</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message1 == update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#aae78adb4af9a7dedb7a77fc0d393076e">new_snapshot</a>);</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;   actual = consumer2-&gt;messages_rxed[0];</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gab5d1a876f8f0cd0562fb5d5f94c06717">stasis_cache_update_type</a>() == <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(actual));</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;   update = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(actual);</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message_type2 == update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#a39694abd1b80d3c9ef0619acf9d493aa">type</a>);</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, test_message2 == update-&gt;<a class="code" href="../../de/dfa/structstasis__cache__update.html#aae78adb4af9a7dedb7a77fc0d393076e">new_snapshot</a>);</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;   <span class="comment">/* consumer1 and consumer2 do not get the final message. */</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(consumer1);</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(consumer2);</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;}</div><div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a973520f05217be8bca2fad9eb4c90696"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a973520f05217be8bca2fad9eb4c90696">consumer_should_stay</a></div><div class="ttdeci">static int consumer_should_stay(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00288">test_stasis.c:288</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a5adc304e693097ec75b474e6a5309958"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a></div><div class="ttdeci">int stasis_message_router_add(struct stasis_message_router *router, struct stasis_message_type *message_type, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Add a route to a message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router.c:310</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis_8h_html_a4290101180caea800a0461017a167120"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a></div><div class="ttdeci">struct stasis_caching_topic * stasis_caching_topic_create(struct stasis_topic *original_topic, struct stasis_cache *cache)</div><div class="ttdoc">Create a topic which monitors and caches messages from another topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_cache.c:948</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a641f77c471ff127e8586247ff6c0d64c"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a641f77c471ff127e8586247ff6c0d64c">stasis_message_router_unsubscribe_and_join</a></div><div class="ttdeci">void stasis_message_router_unsubscribe_and_join(struct stasis_message_router *router)</div><div class="ttdoc">Unsubscribe the router from the upstream topic, blocking until the final message has been processed...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00269">stasis_message_router.c:269</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a77e2b34cd6f7daafb7bb43bfd6642cbc"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a77e2b34cd6f7daafb7bb43bfd6642cbc">stasis_message_router_add_cache_update</a></div><div class="ttdeci">int stasis_message_router_add_cache_update(struct stasis_message_router *router, struct stasis_message_type *message_type, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Add a route for stasis_cache_update messages to a message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00336">stasis_message_router.c:336</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="stasis_8h_html_ab211ac23afbd0560f08539021888db57"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ab211ac23afbd0560f08539021888db57">stasis_caching_unsubscribe_and_join</a></div><div class="ttdeci">struct stasis_caching_topic * stasis_caching_unsubscribe_and_join(struct stasis_caching_topic *caching_topic)</div><div class="ttdoc">Unsubscribes a caching topic from its upstream topic, blocking until all messages have been forwarded...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00146">stasis_cache.c:146</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="structstasis__cache_html"><div class="ttname"><a href="../../dd/d25/structstasis__cache.html">stasis_cache</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00046">stasis_cache.c:46</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structstasis__message__router_html"><div class="ttname"><a href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00131">stasis_message_router.c:131</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gab5d1a876f8f0cd0562fb5d5f94c06717"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gab5d1a876f8f0cd0562fb5d5f94c06717">stasis_cache_update_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_cache_update_type(void)</div><div class="ttdoc">Message type for cache update messages. </div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="structstasis__cache__update_html"><div class="ttname"><a href="../../de/dfa/structstasis__cache__update.html">stasis_cache_update</a></div><div class="ttdoc">Cache update message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00967">stasis.h:967</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a1a1761c57f73009d305f95d8ad99e2a7"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a></div><div class="ttdeci">#define stasis_message_router_create(topic)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d25/stasis__message__router_8h_source.html#l00060">stasis_message_router.h:60</a></div></div>
<div class="ttc" id="structstasis__cache__update_html_aae78adb4af9a7dedb7a77fc0d393076e"><div class="ttname"><a href="../../de/dfa/structstasis__cache__update.html#aae78adb4af9a7dedb7a77fc0d393076e">stasis_cache_update::new_snapshot</a></div><div class="ttdeci">struct stasis_message * new_snapshot</div><div class="ttdoc">New value. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00973">stasis.h:973</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structstasis__cache__update_html_a39694abd1b80d3c9ef0619acf9d493aa"><div class="ttname"><a href="../../de/dfa/structstasis__cache__update.html#a39694abd1b80d3c9ef0619acf9d493aa">stasis_cache_update::type</a></div><div class="ttdeci">struct stasis_message_type * type</div><div class="ttdoc">Convenience reference to snapshot type. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00969">stasis.h:969</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a687531d23b24a0e0d243443e2f79a4c5"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a687531d23b24a0e0d243443e2f79a4c5">cache_simple</a></div><div class="ttdeci">static const char * cache_simple(struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l01699">test_stasis.c:1699</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_aa59d4e87c66028292722730a82c149ab"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#aa59d4e87c66028292722730a82c149ab">stasis_message_router_set_default</a></div><div class="ttdeci">int stasis_message_router_set_default(struct stasis_message_router *router, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Sets the default route of a router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00387">stasis_message_router.c:387</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_aefe318d32c8bb7a9e2025eb146d47781"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a></div><div class="ttdeci">struct ao2_container * cache</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">pbx_realtime.c:77</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="stasis_8h_html_a64035c0f7317db2590817a173d268ff1"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a64035c0f7317db2590817a173d268ff1">stasis_cache_create</a></div><div class="ttdeci">struct stasis_cache * stasis_cache_create(snapshot_get_id id_fn)</div><div class="ttdoc">Create a cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00360">stasis_cache.c:360</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structstasis__caching__topic_html"><div class="ttname"><a href="../../d3/de2/structstasis__caching__topic.html">stasis_caching_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00055">stasis_cache.c:55</a></div></div>
<div class="ttc" id="stasis_8h_html_a60b3b41b59f3894b40f5630524347d62"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a></div><div class="ttdeci">struct stasis_topic * stasis_caching_get_topic(struct stasis_caching_topic *caching_topic)</div><div class="ttdoc">Returns the topic of cached events from a caching topics. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_cache.c:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a68edd81a378bb5c106f0b5f13c771e7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68edd81a378bb5c106f0b5f13c771e7a">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[19/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">no_to_json&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01821">1821</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00129">stasis_message::data</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00229">stasis_message_to_json()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>
<div class="fragment"><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;{</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, actual, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;   <span class="keywordtype">char</span> *expected = <span class="stringliteral">&quot;SomeData&quot;</span>;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test message to_json function&quot;</span>;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test message to_json function&quot;</span>;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;   }</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;   <span class="comment">/* Test NULL */</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;   actual = <a class="code" href="../../dd/d79/stasis_8h.html#a415493fbb3571cc6c9e7ac599309110f">stasis_message_to_json</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == actual);</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;   <span class="comment">/* Test message with NULL to_json function */</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;SomeMessage&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;   <a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(strlen(expected) + 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;   strcpy(<a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a>, expected);</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;   uut = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut);</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;   actual = <a class="code" href="../../dd/d79/stasis_8h.html#a415493fbb3571cc6c9e7ac599309110f">stasis_message_to_json</a>(uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == actual);</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="stasis_8h_html_a415493fbb3571cc6c9e7ac599309110f"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a415493fbb3571cc6c9e7ac599309110f">stasis_message_to_json</a></div><div class="ttdeci">struct ast_json * stasis_message_to_json(struct stasis_message *msg, struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build the JSON representation of the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00229">stasis_message.c:229</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="structstasis__message_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">stasis_message::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00129">stasis_message.c:129</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9fcf0bf956b4e9432b04a81f8471b5ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fcf0bf956b4e9432b04a81f8471b5ea">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[20/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">to_json&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01858">1858</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00347">ast_json_equal()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00268">ast_json_string_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00129">stasis_message::data</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00229">stasis_message_to_json()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>
<div class="fragment"><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;{</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, actual, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *expected_text = <span class="stringliteral">&quot;SomeData&quot;</span>;</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, expected, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test message to_json function when NULL&quot;</span>;</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test message to_json function when NULL&quot;</span>;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;   }</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;SomeMessage&quot;</span>, &amp;<a class="code" href="../../db/d00/test__stasis_8c.html#af39537fae29b48663827e272436b6206">fake_vtable</a>, &amp;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   <a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(strlen(expected_text) + 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;   strcpy(<a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a>, expected_text);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;   uut = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut);</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;   expected = <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(expected_text);</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;   actual = <a class="code" href="../../dd/d79/stasis_8h.html#a415493fbb3571cc6c9e7ac599309110f">stasis_message_to_json</a>(uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d4/d05/json_8h.html#a41f590cc4fe4201f117b5a221461b1ad">ast_json_equal</a>(expected, actual));</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="test__stasis_8c_html_af39537fae29b48663827e272436b6206"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#af39537fae29b48663827e272436b6206">fake_vtable</a></div><div class="ttdeci">static struct stasis_message_vtable fake_vtable</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00072">test_stasis.c:72</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="stasis_8h_html_a415493fbb3571cc6c9e7ac599309110f"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a415493fbb3571cc6c9e7ac599309110f">stasis_message_to_json</a></div><div class="ttdeci">struct ast_json * stasis_message_to_json(struct stasis_message *msg, struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build the JSON representation of the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00229">stasis_message.c:229</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="json_8h_html_adc52f8d76b7fdd0c8d12987981fd5bf5"><div class="ttname"><a href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a></div><div class="ttdeci">struct ast_json * ast_json_string_create(const char *value)</div><div class="ttdoc">Construct a JSON string from value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00268">json.c:268</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="structstasis__message_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">stasis_message::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00129">stasis_message.c:129</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="json_8h_html_a41f590cc4fe4201f117b5a221461b1ad"><div class="ttname"><a href="../../d4/d05/json_8h.html#a41f590cc4fe4201f117b5a221461b1ad">ast_json_equal</a></div><div class="ttdeci">int ast_json_equal(const struct ast_json *lhs, const struct ast_json *rhs)</div><div class="ttdoc">Compare two JSON objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00347">json.c:347</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d4a9b506ccf2ea660624ed9f634b74e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d4a9b506ccf2ea660624ed9f634b74e">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[21/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">no_to_ami&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01892">1892</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00129">stasis_message::data</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00224">stasis_message_to_ami()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>
<div class="fragment"><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;{</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *, actual, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;   <span class="keywordtype">char</span> *expected = <span class="stringliteral">&quot;SomeData&quot;</span>;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test message to_ami function when NULL&quot;</span>;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test message to_ami function when NULL&quot;</span>;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;   }</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;   <span class="comment">/* Test NULL */</span></div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;   actual = <a class="code" href="../../dd/d79/stasis_8h.html#adf8e3a27e9995917eb0bc043acd1316a">stasis_message_to_ami</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == actual);</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;   <span class="comment">/* Test message with NULL to_ami function */</span></div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;SomeMessage&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;   <a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(strlen(expected) + 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;   strcpy(<a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a>, expected);</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;   uut = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut);</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;   actual = <a class="code" href="../../dd/d79/stasis_8h.html#adf8e3a27e9995917eb0bc043acd1316a">stasis_message_to_ami</a>(uut);</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == actual);</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__manager__event__blob_html"><div class="ttname"><a href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a></div><div class="ttdoc">Struct containing info for an AMI event to send out. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00491">manager.h:491</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="stasis_8h_html_adf8e3a27e9995917eb0bc043acd1316a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#adf8e3a27e9995917eb0bc043acd1316a">stasis_message_to_ami</a></div><div class="ttdeci">struct ast_manager_event_blob * stasis_message_to_ami(struct stasis_message *msg)</div><div class="ttdoc">Build the AMI representation of the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00224">stasis_message.c:224</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="structstasis__message_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">stasis_message::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00129">stasis_message.c:129</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1fc327c419ce48b101f4cd36f89d9dbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fc327c419ce48b101f4cd36f89d9dbc">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[22/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01929">1929</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00129">stasis_message::data</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00224">stasis_message_to_ami()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>
<div class="fragment"><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;{</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, uut, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, <a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *, actual, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *expected_text = <span class="stringliteral">&quot;SomeData&quot;</span>;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *expected = <span class="stringliteral">&quot;Message: SomeData\r\n&quot;</span>;</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test message to_ami function&quot;</span>;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test message to_ami function&quot;</span>;</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;   }</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;SomeMessage&quot;</span>, &amp;<a class="code" href="../../db/d00/test__stasis_8c.html#af39537fae29b48663827e272436b6206">fake_vtable</a>, &amp;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>);</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;   <a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(strlen(expected_text) + 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;   strcpy(<a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a>, expected_text);</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;   uut = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != uut);</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;   actual = <a class="code" href="../../dd/d79/stasis_8h.html#adf8e3a27e9995917eb0bc043acd1316a">stasis_message_to_ami</a>(uut);</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, strcmp(expected, actual-&gt;extra_fields) == 0);</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__manager__event__blob_html"><div class="ttname"><a href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a></div><div class="ttdoc">Struct containing info for an AMI event to send out. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00491">manager.h:491</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="test__stasis_8c_html_af39537fae29b48663827e272436b6206"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#af39537fae29b48663827e272436b6206">fake_vtable</a></div><div class="ttdeci">static struct stasis_message_vtable fake_vtable</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00072">test_stasis.c:72</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="stasis_8h_html_adf8e3a27e9995917eb0bc043acd1316a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#adf8e3a27e9995917eb0bc043acd1316a">stasis_message_to_ami</a></div><div class="ttdeci">struct ast_manager_event_blob * stasis_message_to_ami(struct stasis_message *msg)</div><div class="ttdoc">Build the AMI representation of the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00224">stasis_message.c:224</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="structstasis__message_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d7/d55/structstasis__message.html#a735984d41155bc1032e09bece8f8d66d">stasis_message::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00129">stasis_message.c:129</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7eaf5d7efa4593b3ab34ac9280a0281e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7eaf5d7efa4593b3ab34ac9280a0281e">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[23/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">dtor_order&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01968">1968</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01962">noop()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;{</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test that destruction order doesn&#39;t bomb stuff&quot;</span>;</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test that destruction order doesn&#39;t bomb stuff&quot;</span>;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;   }</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;   topic = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;test-topic&quot;</span>);</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic);</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(topic, <a class="code" href="../../db/d00/test__stasis_8c.html#ae07dd56cdf7085a9cd09462bd36e4f43">noop</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;   <span class="comment">/* With any luck, this won&#39;t completely blow everything up */</span></div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(topic);</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;   <span class="comment">/* These refs were cleaned up manually */</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;   topic = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ae07dd56cdf7085a9cd09462bd36e4f43"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ae07dd56cdf7085a9cd09462bd36e4f43">noop</a></div><div class="ttdeci">static void noop(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l01962">test_stasis.c:1962</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afecbbd3f23ed55f41ef80a6a40aa328c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afecbbd3f23ed55f41ef80a6a40aa328c">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[24/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">caching_dtor_order&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02006">2006</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">cache</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01962">noop()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02001">noop_get_id()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00360">stasis_cache_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_caching_get_topic()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_caching_topic_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00119">stasis_caching_unsubscribe()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;{</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *, topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d25/structstasis__cache.html">stasis_cache</a> *, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/de2/structstasis__caching__topic.html">stasis_caching_topic</a> *, caching_topic, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#afdc3370e3a15daaa00179f2f72ab8c9d">stasis_caching_unsubscribe</a>);</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *, <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>);</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test that destruction order doesn&#39;t bomb stuff&quot;</span>;</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test that destruction order doesn&#39;t bomb stuff&quot;</span>;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;   }</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;   <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a64035c0f7317db2590817a173d268ff1">stasis_cache_create</a>(<a class="code" href="../../db/d00/test__stasis_8c.html#aa2a8343ff291dcbd1b75e18c8bcc949a">noop_get_id</a>);</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;   topic = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;test-topic&quot;</span>);</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != topic);</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;   caching_topic = <a class="code" href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a>(topic, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != caching_topic);</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a>(caching_topic), <a class="code" href="../../db/d00/test__stasis_8c.html#ae07dd56cdf7085a9cd09462bd36e4f43">noop</a>,</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;   <span class="comment">/* With any luck, this won&#39;t completely blow everything up */</span></div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(topic);</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#afdc3370e3a15daaa00179f2f72ab8c9d">stasis_caching_unsubscribe</a>(caching_topic);</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>);</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;   <span class="comment">/* These refs were cleaned up manually */</span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;   <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   topic = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;   caching_topic = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="stasis_8h_html_a4290101180caea800a0461017a167120"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4290101180caea800a0461017a167120">stasis_caching_topic_create</a></div><div class="ttdeci">struct stasis_caching_topic * stasis_caching_topic_create(struct stasis_topic *original_topic, struct stasis_cache *cache)</div><div class="ttdoc">Create a topic which monitors and caches messages from another topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_cache.c:948</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="stasis_8h_html_afdc3370e3a15daaa00179f2f72ab8c9d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#afdc3370e3a15daaa00179f2f72ab8c9d">stasis_caching_unsubscribe</a></div><div class="ttdeci">struct stasis_caching_topic * stasis_caching_unsubscribe(struct stasis_caching_topic *caching_topic)</div><div class="ttdoc">Unsubscribes a caching topic from its upstream topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00119">stasis_cache.c:119</a></div></div>
<div class="ttc" id="structstasis__cache_html"><div class="ttname"><a href="../../dd/d25/structstasis__cache.html">stasis_cache</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00046">stasis_cache.c:46</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ae07dd56cdf7085a9cd09462bd36e4f43"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ae07dd56cdf7085a9cd09462bd36e4f43">noop</a></div><div class="ttdeci">static void noop(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l01962">test_stasis.c:1962</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_aefe318d32c8bb7a9e2025eb146d47781"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a></div><div class="ttdeci">struct ao2_container * cache</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">pbx_realtime.c:77</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="stasis_8h_html_a64035c0f7317db2590817a173d268ff1"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a64035c0f7317db2590817a173d268ff1">stasis_cache_create</a></div><div class="ttdeci">struct stasis_cache * stasis_cache_create(snapshot_get_id id_fn)</div><div class="ttdoc">Create a cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00360">stasis_cache.c:360</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structstasis__caching__topic_html"><div class="ttname"><a href="../../d3/de2/structstasis__caching__topic.html">stasis_caching_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00055">stasis_cache.c:55</a></div></div>
<div class="ttc" id="stasis_8h_html_a60b3b41b59f3894b40f5630524347d62"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a60b3b41b59f3894b40f5630524347d62">stasis_caching_get_topic</a></div><div class="ttdeci">struct stasis_topic * stasis_caching_get_topic(struct stasis_caching_topic *caching_topic)</div><div class="ttdoc">Returns the topic of cached events from a caching topics. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00085">stasis_cache.c:85</a></div></div>
<div class="ttc" id="test__stasis_8c_html_aa2a8343ff291dcbd1b75e18c8bcc949a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#aa2a8343ff291dcbd1b75e18c8bcc949a">noop_get_id</a></div><div class="ttdeci">static const char * noop_get_id(struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02001">test_stasis.c:2001</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac154dc468257f705aeb539839e38ca9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac154dc468257f705aeb539839e38ca9a">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[25/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">type_filters&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02234">2234</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00167">consumer::complete</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02140">cts::consumer</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00267">consumer_wait_for_completion()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02154">create_cts()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02080">create_message_types()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02193">dump_consumer()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02178">is_msg()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00165">consumer::messages_rxed_len</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02208">send_msg()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01025">stasis_subscription_accept_message_type()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01055">stasis_subscription_decline_message_type()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00300">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01079">stasis_subscription_set_filter()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02142">cts::sub</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;{</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d51/structcts.html">cts</a> *, <a class="code" href="../../dc/d51/structcts.html">cts</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/dcd/structtest__message__types.html">test_message_types</a> *, types, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;   <span class="keywordtype">int</span> ix = 0;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a> <span class="stringliteral">&quot;filtering/&quot;</span>;</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test message filtering by type&quot;</span>;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test message filtering by type&quot;</span>;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;   }</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;   types = <a class="code" href="../../db/d00/test__stasis_8c.html#ab8fc4cc528eace972c010d88f0e8d4d2">create_message_types</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>);</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != types);</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;   <a class="code" href="../../dc/d51/structcts.html">cts</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#ad67eb457a93ee00bc3b86b0e66915174">create_cts</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>);</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dc/d51/structcts.html">cts</a>);</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, types-&gt;type1) == 0);</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, types-&gt;type2) == 0);</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, types-&gt;change) == 0);</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>) == 0);</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;   <span class="comment">/* We should get these */</span></div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;type1, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;type2, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;   <span class="comment">/* ... but not this one */</span></div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;type3, <span class="stringliteral">&quot;FAIL&quot;</span>));</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;   <span class="comment">/* Wait for change(subscribe) and &quot;Pass&quot; messages */</span></div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;   <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>, 3);</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;   <span class="comment">/* Remove type 1 */</span></div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a223dba20686ad9d48d9ea8329984f14b">stasis_subscription_decline_message_type</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, types-&gt;type1) == 0);</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;   <span class="comment">/* We should now NOT get this one */</span></div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;type1, <span class="stringliteral">&quot;FAIL&quot;</span>));</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;   <span class="comment">/* We should get this one (again) */</span></div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;type2, <span class="stringliteral">&quot;Pass2&quot;</span>));</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;   <span class="comment">/* We still should NOT get this one */</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;type3, <span class="stringliteral">&quot;FAIL&quot;</span>));</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;   <span class="comment">/* We should now have a second type2 */</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;   <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>, 4);</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>);</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;   <a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;   <a class="code" href="../../db/d00/test__stasis_8c.html#a312ddb3e48152e8316cbc04273b83764">consumer_wait_for_completion</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>);</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;   <a class="code" href="../../db/d00/test__stasis_8c.html#ade4b58bd3699506505e7cd465b9253fb">dump_consumer</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>);</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == <a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">complete</a>);</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 5 == <a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>);</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;change, <span class="stringliteral">&quot;Subscribe&quot;</span>));</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;type1, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;type2, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;type2, <span class="stringliteral">&quot;Pass2&quot;</span>));</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;change, <span class="stringliteral">&quot;Unsubscribe&quot;</span>));</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;}</div><div class="ttc" id="test__stasis_8c_html_ad67eb457a93ee00bc3b86b0e66915174"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad67eb457a93ee00bc3b86b0e66915174">create_cts</a></div><div class="ttdeci">static struct cts * create_cts(struct ast_test *test)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02154">test_stasis.c:2154</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a312ddb3e48152e8316cbc04273b83764"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a312ddb3e48152e8316cbc04273b83764">consumer_wait_for_completion</a></div><div class="ttdeci">static int consumer_wait_for_completion(struct consumer *consumer)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00267">test_stasis.c:267</a></div></div>
<div class="ttc" id="structconsumer_html_a520408f4775914f7510cc59db5a60b38"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">consumer::complete</a></div><div class="ttdeci">int complete</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00167">test_stasis.c:167</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="stasis_8h_html_a52b5393bef89d7781c0d039d6489de23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a></div><div class="ttdeci">int stasis_subscription_set_filter(struct stasis_subscription *subscription, enum stasis_subscription_message_filter filter)</div><div class="ttdoc">Set the message type filtering level on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01079">stasis.c:1079</a></div></div>
<div class="ttc" id="stasis_8h_html_a223dba20686ad9d48d9ea8329984f14b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a223dba20686ad9d48d9ea8329984f14b">stasis_subscription_decline_message_type</a></div><div class="ttdeci">int stasis_subscription_decline_message_type(struct stasis_subscription *subscription, const struct stasis_message_type *type)</div><div class="ttdoc">Indicate to a subscription that we are not interested in a message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01055">stasis.c:1055</a></div></div>
<div class="ttc" id="structcts_html_a03bb86c52b8e22ea4325ea04e6443fa0"><div class="ttname"><a href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">cts::sub</a></div><div class="ttdeci">struct stasis_subscription * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02142">test_stasis.c:2142</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a92d140b66548be77795839ace7bb1ac4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a></div><div class="ttdeci">static int is_msg(struct stasis_message *msg, struct stasis_message_type *mtype, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02178">test_stasis.c:2178</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3fd88e646336e34bc9354be2145a06f8"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a></div><div class="ttdeci">static int send_msg(struct ast_test *test, struct cts *cts, struct stasis_message_type *msg_type, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02208">test_stasis.c:2208</a></div></div>
<div class="ttc" id="structcts_html_a1f1d2eca49560fccd1925ecea87df2cf"><div class="ttname"><a href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">cts::consumer</a></div><div class="ttdeci">struct consumer * consumer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02140">test_stasis.c:2140</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ab8fc4cc528eace972c010d88f0e8d4d2"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ab8fc4cc528eace972c010d88f0e8d4d2">create_message_types</a></div><div class="ttdeci">static struct test_message_types * create_message_types(struct ast_test *test)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02080">test_stasis.c:2080</a></div></div>
<div class="ttc" id="structcts_html"><div class="ttname"><a href="../../dc/d51/structcts.html">cts</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02139">test_stasis.c:2139</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ade4b58bd3699506505e7cd465b9253fb"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ade4b58bd3699506505e7cd465b9253fb">dump_consumer</a></div><div class="ttdeci">static void dump_consumer(struct ast_test *test, struct cts *cts)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02193">test_stasis.c:2193</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="structtest__message__types_html"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html">test_message_types</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02053">test_stasis.c:2053</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structconsumer_html_a19648c6a151f719c14ce4a993c8b6a27"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">consumer::messages_rxed_len</a></div><div class="ttdeci">size_t messages_rxed_len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00165">test_stasis.c:165</a></div></div>
<div class="ttc" id="stasis_8h_html_a4f248ee5f4791f05d0af8768aaab282b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a></div><div class="ttdeci">int stasis_subscription_accept_message_type(struct stasis_subscription *subscription, const struct stasis_message_type *type)</div><div class="ttdoc">Indicate to a subscription that we are interested in a message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01025">stasis.c:1025</a></div></div>
<div class="ttc" id="stasis_8h_html_a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00300">stasis.h:300</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a45fd219dbff3671ec9ef327d43775f98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45fd219dbff3671ec9ef327d43775f98">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[26/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">formatter_filters&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02301">2301</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00167">consumer::complete</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02140">cts::consumer</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00267">consumer_wait_for_completion()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02154">create_cts()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02080">create_message_types()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02193">dump_consumer()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02178">is_msg()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00165">consumer::messages_rxed_len</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02208">send_msg()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01095">stasis_subscription_accept_formatters()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00314">STASIS_SUBSCRIPTION_FORMATTER_AMI</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00315">STASIS_SUBSCRIPTION_FORMATTER_EVENT</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00313">STASIS_SUBSCRIPTION_FORMATTER_JSON</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02142">cts::sub</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;{</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d51/structcts.html">cts</a> *, <a class="code" href="../../dc/d51/structcts.html">cts</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/dcd/structtest__message__types.html">test_message_types</a> *, types, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>)   ;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;   <span class="keywordtype">int</span> ix = 0;</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a> <span class="stringliteral">&quot;filtering/&quot;</span>;</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test message filtering by formatter&quot;</span>;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test message filtering by formatter&quot;</span>;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;   }</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;   types = <a class="code" href="../../db/d00/test__stasis_8c.html#ab8fc4cc528eace972c010d88f0e8d4d2">create_message_types</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>);</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != types);</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;   <a class="code" href="../../dc/d51/structcts.html">cts</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#ad67eb457a93ee00bc3b86b0e66915174">create_cts</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>);</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dc/d51/structcts.html">cts</a>);</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#aaf3a92c10ab654d4a7b11cbf44aa1074">stasis_subscription_accept_formatters</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>,</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814a595ad92c7a80903c8a6f63a69d50c98d">STASIS_SUBSCRIPTION_FORMATTER_AMI</a> | <a class="code" href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814a9b0968d4d470737abacb289024559587">STASIS_SUBSCRIPTION_FORMATTER_JSON</a>);</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;   <span class="comment">/* We should get these */</span></div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;ami, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;json, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;amievent, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;   <span class="comment">/* ... but not these */</span></div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;none, <span class="stringliteral">&quot;FAIL&quot;</span>));</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;event, <span class="stringliteral">&quot;FAIL&quot;</span>));</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;type1, <span class="stringliteral">&quot;FAIL&quot;</span>));</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;   <span class="comment">/* Wait for change(subscribe) and the &quot;Pass&quot; messages */</span></div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;   <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>, 4);</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;   <span class="comment">/* Change the subscription to accept only event formatters */</span></div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#aaf3a92c10ab654d4a7b11cbf44aa1074">stasis_subscription_accept_formatters</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814a225e305ebf20685fe0b8a6493b44ea09">STASIS_SUBSCRIPTION_FORMATTER_EVENT</a>);</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;   <span class="comment">/* We should NOT get these now */</span></div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;ami, <span class="stringliteral">&quot;FAIL&quot;</span>));</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;json, <span class="stringliteral">&quot;FAIL&quot;</span>));</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;   <span class="comment">/* ... but we should still get this one */</span></div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;amievent, <span class="stringliteral">&quot;Pass2&quot;</span>));</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;   <span class="comment">/* ... and this one should be new */</span></div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;event, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;   <span class="comment">/* We should now have a second amievent */</span></div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;   <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>, 6);</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>);</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   <a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;   <a class="code" href="../../db/d00/test__stasis_8c.html#a312ddb3e48152e8316cbc04273b83764">consumer_wait_for_completion</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>);</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;   <a class="code" href="../../db/d00/test__stasis_8c.html#ade4b58bd3699506505e7cd465b9253fb">dump_consumer</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>);</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == <a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">complete</a>);</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 7 == <a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>);</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;change, <span class="stringliteral">&quot;Subscribe&quot;</span>));</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;ami, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;json, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;amievent, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;amievent, <span class="stringliteral">&quot;Pass2&quot;</span>));</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;event, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;change, <span class="stringliteral">&quot;Unsubscribe&quot;</span>));</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;}</div><div class="ttc" id="test__stasis_8c_html_ad67eb457a93ee00bc3b86b0e66915174"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad67eb457a93ee00bc3b86b0e66915174">create_cts</a></div><div class="ttdeci">static struct cts * create_cts(struct ast_test *test)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02154">test_stasis.c:2154</a></div></div>
<div class="ttc" id="stasis_8h_html_a5ae672fb0f772d0e3066fa4c29c41814a225e305ebf20685fe0b8a6493b44ea09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814a225e305ebf20685fe0b8a6493b44ea09">STASIS_SUBSCRIPTION_FORMATTER_EVENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00315">stasis.h:315</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a312ddb3e48152e8316cbc04273b83764"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a312ddb3e48152e8316cbc04273b83764">consumer_wait_for_completion</a></div><div class="ttdeci">static int consumer_wait_for_completion(struct consumer *consumer)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00267">test_stasis.c:267</a></div></div>
<div class="ttc" id="structconsumer_html_a520408f4775914f7510cc59db5a60b38"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">consumer::complete</a></div><div class="ttdeci">int complete</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00167">test_stasis.c:167</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="structcts_html_a03bb86c52b8e22ea4325ea04e6443fa0"><div class="ttname"><a href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">cts::sub</a></div><div class="ttdeci">struct stasis_subscription * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02142">test_stasis.c:2142</a></div></div>
<div class="ttc" id="stasis_8h_html_a5ae672fb0f772d0e3066fa4c29c41814a595ad92c7a80903c8a6f63a69d50c98d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814a595ad92c7a80903c8a6f63a69d50c98d">STASIS_SUBSCRIPTION_FORMATTER_AMI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00314">stasis.h:314</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a92d140b66548be77795839ace7bb1ac4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a></div><div class="ttdeci">static int is_msg(struct stasis_message *msg, struct stasis_message_type *mtype, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02178">test_stasis.c:2178</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3fd88e646336e34bc9354be2145a06f8"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a></div><div class="ttdeci">static int send_msg(struct ast_test *test, struct cts *cts, struct stasis_message_type *msg_type, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02208">test_stasis.c:2208</a></div></div>
<div class="ttc" id="structcts_html_a1f1d2eca49560fccd1925ecea87df2cf"><div class="ttname"><a href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">cts::consumer</a></div><div class="ttdeci">struct consumer * consumer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02140">test_stasis.c:2140</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ab8fc4cc528eace972c010d88f0e8d4d2"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ab8fc4cc528eace972c010d88f0e8d4d2">create_message_types</a></div><div class="ttdeci">static struct test_message_types * create_message_types(struct ast_test *test)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02080">test_stasis.c:2080</a></div></div>
<div class="ttc" id="structcts_html"><div class="ttname"><a href="../../dc/d51/structcts.html">cts</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02139">test_stasis.c:2139</a></div></div>
<div class="ttc" id="stasis_8h_html_aaf3a92c10ab654d4a7b11cbf44aa1074"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aaf3a92c10ab654d4a7b11cbf44aa1074">stasis_subscription_accept_formatters</a></div><div class="ttdeci">void stasis_subscription_accept_formatters(struct stasis_subscription *subscription, enum stasis_subscription_message_formatters formatters)</div><div class="ttdoc">Indicate to a subscription that we are interested in messages with one or more formatters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01095">stasis.c:1095</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ade4b58bd3699506505e7cd465b9253fb"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ade4b58bd3699506505e7cd465b9253fb">dump_consumer</a></div><div class="ttdeci">static void dump_consumer(struct ast_test *test, struct cts *cts)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02193">test_stasis.c:2193</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="structtest__message__types_html"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html">test_message_types</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02053">test_stasis.c:2053</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structconsumer_html_a19648c6a151f719c14ce4a993c8b6a27"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">consumer::messages_rxed_len</a></div><div class="ttdeci">size_t messages_rxed_len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00165">test_stasis.c:165</a></div></div>
<div class="ttc" id="stasis_8h_html_a5ae672fb0f772d0e3066fa4c29c41814a9b0968d4d470737abacb289024559587"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814a9b0968d4d470737abacb289024559587">STASIS_SUBSCRIPTION_FORMATTER_JSON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00313">stasis.h:313</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a78226f0b85da829bc189335ee46e0d7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78226f0b85da829bc189335ee46e0d7b">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[27/27]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">combo_filters&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02373">2373</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00167">consumer::complete</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02140">cts::consumer</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">consumer_wait_for()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00267">consumer_wait_for_completion()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02154">create_cts()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02080">create_message_types()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02193">dump_consumer()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02178">is_msg()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00165">consumer::messages_rxed_len</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02208">send_msg()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01095">stasis_subscription_accept_formatters()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01025">stasis_subscription_accept_message_type()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00300">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00314">STASIS_SUBSCRIPTION_FORMATTER_AMI</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00313">STASIS_SUBSCRIPTION_FORMATTER_JSON</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01079">stasis_subscription_set_filter()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02142">cts::sub</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00041">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;{</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d51/structcts.html">cts</a> *, <a class="code" href="../../dc/d51/structcts.html">cts</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/dcd/structtest__message__types.html">test_message_types</a> *, types, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;   <span class="keywordtype">int</span> ix = 0;</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a> <span class="stringliteral">&quot;filtering/&quot;</span>;</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test message filtering by type and formatter&quot;</span>;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;Test message filtering by type and formatter&quot;</span>;</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;   }</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;   types = <a class="code" href="../../db/d00/test__stasis_8c.html#ab8fc4cc528eace972c010d88f0e8d4d2">create_message_types</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>);</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != types);</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;   <a class="code" href="../../dc/d51/structcts.html">cts</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#ad67eb457a93ee00bc3b86b0e66915174">create_cts</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>);</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != <a class="code" href="../../dc/d51/structcts.html">cts</a>);</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, types-&gt;type1) == 0);</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, types-&gt;type2) == 0);</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, types-&gt;change) == 0);</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>) == 0);</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#aaf3a92c10ab654d4a7b11cbf44aa1074">stasis_subscription_accept_formatters</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>,</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814a595ad92c7a80903c8a6f63a69d50c98d">STASIS_SUBSCRIPTION_FORMATTER_AMI</a> | <a class="code" href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814a9b0968d4d470737abacb289024559587">STASIS_SUBSCRIPTION_FORMATTER_JSON</a>);</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;   <span class="comment">/* We should get these */</span></div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;type1, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;type2, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;ami, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;amievent, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;json, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;   <span class="comment">/* ... but not these */</span></div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;type3, <span class="stringliteral">&quot;FAIL&quot;</span>));</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>, types-&gt;event, <span class="stringliteral">&quot;FAIL&quot;</span>));</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;   <span class="comment">/* Wait for change(subscribe) and the &quot;Pass&quot; messages */</span></div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;   <a class="code" href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>, 6);</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>);</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;   <a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;   <a class="code" href="../../db/d00/test__stasis_8c.html#a312ddb3e48152e8316cbc04273b83764">consumer_wait_for_completion</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>);</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;   <a class="code" href="../../db/d00/test__stasis_8c.html#ade4b58bd3699506505e7cd465b9253fb">dump_consumer</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../dc/d51/structcts.html">cts</a>);</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 1 == <a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">complete</a>);</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, 7 == <a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>);</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;change, <span class="stringliteral">&quot;Subscribe&quot;</span>));</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;type1, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;type2, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;ami, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;amievent, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;json, <span class="stringliteral">&quot;Pass&quot;</span>));</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a>(<a class="code" href="../../dc/d51/structcts.html">cts</a>-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[ix++], types-&gt;change, <span class="stringliteral">&quot;Unsubscribe&quot;</span>));</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;}</div><div class="ttc" id="test__stasis_8c_html_ad67eb457a93ee00bc3b86b0e66915174"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad67eb457a93ee00bc3b86b0e66915174">create_cts</a></div><div class="ttdeci">static struct cts * create_cts(struct ast_test *test)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02154">test_stasis.c:2154</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a312ddb3e48152e8316cbc04273b83764"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a312ddb3e48152e8316cbc04273b83764">consumer_wait_for_completion</a></div><div class="ttdeci">static int consumer_wait_for_completion(struct consumer *consumer)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00267">test_stasis.c:267</a></div></div>
<div class="ttc" id="structconsumer_html_a520408f4775914f7510cc59db5a60b38"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">consumer::complete</a></div><div class="ttdeci">int complete</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00167">test_stasis.c:167</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="stasis_8h_html_a52b5393bef89d7781c0d039d6489de23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a></div><div class="ttdeci">int stasis_subscription_set_filter(struct stasis_subscription *subscription, enum stasis_subscription_message_filter filter)</div><div class="ttdoc">Set the message type filtering level on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01079">stasis.c:1079</a></div></div>
<div class="ttc" id="structcts_html_a03bb86c52b8e22ea4325ea04e6443fa0"><div class="ttname"><a href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">cts::sub</a></div><div class="ttdeci">struct stasis_subscription * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02142">test_stasis.c:2142</a></div></div>
<div class="ttc" id="stasis_8h_html_a5ae672fb0f772d0e3066fa4c29c41814a595ad92c7a80903c8a6f63a69d50c98d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814a595ad92c7a80903c8a6f63a69d50c98d">STASIS_SUBSCRIPTION_FORMATTER_AMI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00314">stasis.h:314</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a92d140b66548be77795839ace7bb1ac4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a92d140b66548be77795839ace7bb1ac4">is_msg</a></div><div class="ttdeci">static int is_msg(struct stasis_message *msg, struct stasis_message_type *mtype, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02178">test_stasis.c:2178</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3fd88e646336e34bc9354be2145a06f8"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3fd88e646336e34bc9354be2145a06f8">send_msg</a></div><div class="ttdeci">static int send_msg(struct ast_test *test, struct cts *cts, struct stasis_message_type *msg_type, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02208">test_stasis.c:2208</a></div></div>
<div class="ttc" id="structcts_html_a1f1d2eca49560fccd1925ecea87df2cf"><div class="ttname"><a href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">cts::consumer</a></div><div class="ttdeci">struct consumer * consumer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02140">test_stasis.c:2140</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ab8fc4cc528eace972c010d88f0e8d4d2"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ab8fc4cc528eace972c010d88f0e8d4d2">create_message_types</a></div><div class="ttdeci">static struct test_message_types * create_message_types(struct ast_test *test)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02080">test_stasis.c:2080</a></div></div>
<div class="ttc" id="structcts_html"><div class="ttname"><a href="../../dc/d51/structcts.html">cts</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02139">test_stasis.c:2139</a></div></div>
<div class="ttc" id="stasis_8h_html_aaf3a92c10ab654d4a7b11cbf44aa1074"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aaf3a92c10ab654d4a7b11cbf44aa1074">stasis_subscription_accept_formatters</a></div><div class="ttdeci">void stasis_subscription_accept_formatters(struct stasis_subscription *subscription, enum stasis_subscription_message_formatters formatters)</div><div class="ttdoc">Indicate to a subscription that we are interested in messages with one or more formatters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01095">stasis.c:1095</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ad17c2b858cb7f751d85c4120911a92be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ad17c2b858cb7f751d85c4120911a92be">consumer_wait_for</a></div><div class="ttdeci">static int consumer_wait_for(struct consumer *consumer, size_t expected_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00246">test_stasis.c:246</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ade4b58bd3699506505e7cd465b9253fb"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ade4b58bd3699506505e7cd465b9253fb">dump_consumer</a></div><div class="ttdeci">static void dump_consumer(struct ast_test *test, struct cts *cts)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02193">test_stasis.c:2193</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00041">test_stasis.c:41</a></div></div>
<div class="ttc" id="structtest__message__types_html"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html">test_message_types</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02053">test_stasis.c:2053</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structconsumer_html_a19648c6a151f719c14ce4a993c8b6a27"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">consumer::messages_rxed_len</a></div><div class="ttdeci">size_t messages_rxed_len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00165">test_stasis.c:165</a></div></div>
<div class="ttc" id="stasis_8h_html_a4f248ee5f4791f05d0af8768aaab282b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a></div><div class="ttdeci">int stasis_subscription_accept_message_type(struct stasis_subscription *subscription, const struct stasis_message_type *type)</div><div class="ttdoc">Indicate to a subscription that we are interested in a message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01025">stasis.c:1025</a></div></div>
<div class="ttc" id="stasis_8h_html_a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00300">stasis.h:300</a></div></div>
<div class="ttc" id="stasis_8h_html_a5ae672fb0f772d0e3066fa4c29c41814a9b0968d4d470737abacb289024559587"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814a9b0968d4d470737abacb289024559587">STASIS_SUBSCRIPTION_FORMATTER_JSON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00313">stasis.h:313</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a687531d23b24a0e0d243443e2f79a4c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a687531d23b24a0e0d243443e2f79a4c5">&#9670;&nbsp;</a></span>cache_simple()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* cache_simple </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01699">1699</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00094">ast_begins_with()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message_type_name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01710">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;{</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *type_name =</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a>(<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message));</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a>(type_name, <span class="stringliteral">&quot;Cache&quot;</span>)) {</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;   }</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;cached&quot;</span>;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;}</div><div class="ttc" id="stasis_8h_html_aefd78086150c89477f5851f2836e0478"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a></div><div class="ttdeci">const char * stasis_message_type_name(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the name of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message.c:99</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_ac51fa66c90ce950b248c9ff3e8c4e453"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a></div><div class="ttdeci">static int force_inline attribute_pure ast_begins_with(const char *str, const char *prefix)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00094">strings.h:94</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae788a5ff3f8b6accb6207e7b61cfe610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae788a5ff3f8b6accb6207e7b61cfe610">&#9670;&nbsp;</a></span>cache_test_aggregate_calc_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a>* cache_test_aggregate_calc_fn </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d73/structstasis__cache__entry.html">stasis_cache_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>new_snapshot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00911">911</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00875">cache_test_message_create_full()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00863">cache_test_data::id</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00365">stasis_cache_entry_get_aggregate()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00370">stasis_cache_entry_get_local()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00375">stasis_cache_entry_get_remote()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>, and <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00864">cache_test_data::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01245">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;{</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *aggregate_snapshot;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *snapshot;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d2e/structcache__test__data.html">cache_test_data</a> *<a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;   <span class="keywordtype">int</span> accumulated = 0;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;   <span class="keywordtype">char</span> aggregate_str[30];</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;   <span class="comment">/* Accumulate the aggregate value. */</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   snapshot = <a class="code" href="../../dd/d79/stasis_8h.html#a55563a8b16be69f6f7cae05e5b4e65fc">stasis_cache_entry_get_local</a>(entry);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   <span class="keywordflow">if</span> (snapshot) {</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      type = <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(snapshot);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      test_data = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(snapshot);</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      accumulated += atoi(test_data-&gt;<a class="code" href="../../de/d2e/structcache__test__data.html#a4e9aec275e566b978a3ccb4e043d8c61">value</a>);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   }</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <span class="keywordflow">for</span> (idx = 0; ; ++idx) {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      snapshot = <a class="code" href="../../dd/d79/stasis_8h.html#ab0ffccea6541acbcf4ab9d6913f2e757">stasis_cache_entry_get_remote</a>(entry, idx);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      }</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      type = <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(snapshot);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      test_data = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(snapshot);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      accumulated += atoi(test_data-&gt;<a class="code" href="../../de/d2e/structcache__test__data.html#a4e9aec275e566b978a3ccb4e043d8c61">value</a>);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;   }</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   <span class="keywordflow">if</span> (!test_data) {</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      <span class="comment">/* There are no test entries cached.  Delete the aggregate. */</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   }</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;   snapshot = <a class="code" href="../../dd/d79/stasis_8h.html#a103ead88f88b74cb33bee4a843c4a162">stasis_cache_entry_get_aggregate</a>(entry);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <span class="keywordflow">if</span> (snapshot) {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      type = <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(snapshot);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      test_data = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(snapshot);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      <span class="keywordflow">if</span> (accumulated == atoi(test_data-&gt;<a class="code" href="../../de/d2e/structcache__test__data.html#a4e9aec275e566b978a3ccb4e043d8c61">value</a>)) {</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;         <span class="comment">/* Aggregate test entry did not change. */</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(snapshot);</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      }</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   }</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;   snprintf(aggregate_str, <span class="keyword">sizeof</span>(aggregate_str), <span class="stringliteral">&quot;%d&quot;</span>, accumulated);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   aggregate_snapshot = <a class="code" href="../../db/d00/test__stasis_8c.html#aeeb19b488370ef7d5b052bc2b1ed0894">cache_test_message_create_full</a>(type, test_data-&gt;<a class="code" href="../../de/d2e/structcache__test__data.html#aecb3b0d045ada529257a2fbf8f829599">id</a>, aggregate_str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;   <span class="keywordflow">if</span> (!aggregate_snapshot) {</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <span class="comment">/* Bummer.  We have to keep the old aggregate snapshot. */</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not create aggregate snapshot.\n&quot;</span>);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(snapshot);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <span class="keywordflow">return</span> aggregate_snapshot;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structcache__test__data_html"><div class="ttname"><a href="../../de/d2e/structcache__test__data.html">cache_test_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00862">test_stasis.c:862</a></div></div>
<div class="ttc" id="structcache__test__data_html_a4e9aec275e566b978a3ccb4e043d8c61"><div class="ttname"><a href="../../de/d2e/structcache__test__data.html#a4e9aec275e566b978a3ccb4e043d8c61">cache_test_data::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00864">test_stasis.c:864</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="stasis_8h_html_a103ead88f88b74cb33bee4a843c4a162"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a103ead88f88b74cb33bee4a843c4a162">stasis_cache_entry_get_aggregate</a></div><div class="ttdeci">struct stasis_message * stasis_cache_entry_get_aggregate(struct stasis_cache_entry *entry)</div><div class="ttdoc">Get the aggregate cache entry snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00365">stasis_cache.c:365</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="test__stasis_8c_html_aeeb19b488370ef7d5b052bc2b1ed0894"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#aeeb19b488370ef7d5b052bc2b1ed0894">cache_test_message_create_full</a></div><div class="ttdeci">static struct stasis_message * cache_test_message_create_full(struct stasis_message_type *type, const char *name, const char *value, struct ast_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00875">test_stasis.c:875</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="stasis_8h_html_ab0ffccea6541acbcf4ab9d6913f2e757"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ab0ffccea6541acbcf4ab9d6913f2e757">stasis_cache_entry_get_remote</a></div><div class="ttdeci">struct stasis_message * stasis_cache_entry_get_remote(struct stasis_cache_entry *entry, int idx)</div><div class="ttdoc">Get a remote entity&amp;#39;s cache entry snapshot by index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00375">stasis_cache.c:375</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="structcache__test__data_html_aecb3b0d045ada529257a2fbf8f829599"><div class="ttname"><a href="../../de/d2e/structcache__test__data.html#aecb3b0d045ada529257a2fbf8f829599">cache_test_data::id</a></div><div class="ttdeci">char * id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00863">test_stasis.c:863</a></div></div>
<div class="ttc" id="stasis_8h_html_a55563a8b16be69f6f7cae05e5b4e65fc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a55563a8b16be69f6f7cae05e5b4e65fc">stasis_cache_entry_get_local</a></div><div class="ttdeci">struct stasis_message * stasis_cache_entry_get_local(struct stasis_cache_entry *entry)</div><div class="ttdoc">Get the local entity&amp;#39;s cache entry snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00370">stasis_cache.c:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a51db803ccb24e1be25a700cb633f8509"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51db803ccb24e1be25a700cb633f8509">&#9670;&nbsp;</a></span>cache_test_aggregate_publish_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cache_test_aggregate_publish_fn </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>aggregate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00965">965</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01245">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;{</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, aggregate);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;}</div><div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a134e866b8d262056986520b992938b2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a134e866b8d262056986520b992938b2a">&#9670;&nbsp;</a></span>cache_test_data_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cache_test_data_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00867">867</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00863">cache_test_data::id</a>, and <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00864">cache_test_data::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00875">cache_test_message_create_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;{</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d2e/structcache__test__data.html">cache_test_data</a> *data = obj;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(data-&gt;<a class="code" href="../../de/d2e/structcache__test__data.html#aecb3b0d045ada529257a2fbf8f829599">id</a>);</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(data-&gt;<a class="code" href="../../de/d2e/structcache__test__data.html#a4e9aec275e566b978a3ccb4e043d8c61">value</a>);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;}</div><div class="ttc" id="structcache__test__data_html"><div class="ttname"><a href="../../de/d2e/structcache__test__data.html">cache_test_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00862">test_stasis.c:862</a></div></div>
<div class="ttc" id="structcache__test__data_html_a4e9aec275e566b978a3ccb4e043d8c61"><div class="ttname"><a href="../../de/d2e/structcache__test__data.html#a4e9aec275e566b978a3ccb4e043d8c61">cache_test_data::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00864">test_stasis.c:864</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structcache__test__data_html_aecb3b0d045ada529257a2fbf8f829599"><div class="ttname"><a href="../../de/d2e/structcache__test__data.html#aecb3b0d045ada529257a2fbf8f829599">cache_test_data::id</a></div><div class="ttdeci">char * id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00863">test_stasis.c:863</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af07ba48f7996d7e2afc87738ac7eec42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af07ba48f7996d7e2afc87738ac7eec42">&#9670;&nbsp;</a></span>cache_test_data_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* cache_test_data_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00901">901</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00863">cache_test_data::id</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message_type_name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00986">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;{</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d2e/structcache__test__data.html">cache_test_data</a> *cachable = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <span class="keywordflow">if</span> (0 != strcmp(<span class="stringliteral">&quot;Cacheable&quot;</span>, <a class="code" href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a>(<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message)))) {</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   }</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   <span class="keywordflow">return</span> cachable-&gt;<a class="code" href="../../de/d2e/structcache__test__data.html#aecb3b0d045ada529257a2fbf8f829599">id</a>;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;}</div><div class="ttc" id="stasis_8h_html_aefd78086150c89477f5851f2836e0478"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a></div><div class="ttdeci">const char * stasis_message_type_name(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the name of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message.c:99</a></div></div>
<div class="ttc" id="structcache__test__data_html"><div class="ttname"><a href="../../de/d2e/structcache__test__data.html">cache_test_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00862">test_stasis.c:862</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structcache__test__data_html_aecb3b0d045ada529257a2fbf8f829599"><div class="ttname"><a href="../../de/d2e/structcache__test__data.html#aecb3b0d045ada529257a2fbf8f829599">cache_test_data::id</a></div><div class="ttdeci">char * id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00863">test_stasis.c:863</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b1ce82c9265948167aacdaaedd1365c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b1ce82c9265948167aacdaaedd1365c">&#9670;&nbsp;</a></span>cache_test_message_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a>* cache_test_message_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00896">896</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dc5/options_8c_source.html#l00093">ast_eid_default</a>, and <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00875">cache_test_message_create_full()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00986">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;{</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d00/test__stasis_8c.html#aeeb19b488370ef7d5b052bc2b1ed0894">cache_test_message_create_full</a>(type, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, &amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;}</div><div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="test__stasis_8c_html_aeeb19b488370ef7d5b052bc2b1ed0894"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#aeeb19b488370ef7d5b052bc2b1ed0894">cache_test_message_create_full</a></div><div class="ttdeci">static struct stasis_message * cache_test_message_create_full(struct stasis_message_type *type, const char *name, const char *value, struct ast_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00875">test_stasis.c:875</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="utils_8h_html_ad5db11fa27352e2b9a3c669adc76955f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a></div><div class="ttdeci">struct ast_eid ast_eid_default</div><div class="ttdoc">Global EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00093">options.c:93</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeeb19b488370ef7d5b052bc2b1ed0894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeb19b488370ef7d5b052bc2b1ed0894">&#9670;&nbsp;</a></span>cache_test_message_create_full()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a>* cache_test_message_create_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *&#160;</td>
          <td class="paramname"><em>eid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00875">875</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00867">cache_test_data_dtor()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00129">stasis_message::data</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00140">stasis_message_create_full()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01245">AST_TEST_DEFINE()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00911">cache_test_aggregate_calc_fn()</a>, and <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00896">cache_test_message_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;{</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../de/d2e/structcache__test__data.html">cache_test_data</a> *, data, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   data = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*data), <a class="code" href="../../db/d00/test__stasis_8c.html#a134e866b8d262056986520b992938b2a">cache_test_data_dtor</a>);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;   <span class="keywordflow">if</span> (data == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;   }</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;   data-&gt;id = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;   data-&gt;value = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   <span class="keywordflow">if</span> (!data-&gt;id || !data-&gt;value) {</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   }</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d79/stasis_8h.html#a08010732dcea60e116e54fca0133d582">stasis_message_create_full</a>(type, data, eid);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;}</div><div class="ttc" id="structcache__test__data_html"><div class="ttname"><a href="../../de/d2e/structcache__test__data.html">cache_test_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00862">test_stasis.c:862</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a134e866b8d262056986520b992938b2a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a134e866b8d262056986520b992938b2a">cache_test_data_dtor</a></div><div class="ttdeci">static void cache_test_data_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00867">test_stasis.c:867</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis_8h_html_a08010732dcea60e116e54fca0133d582"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a08010732dcea60e116e54fca0133d582">stasis_message_create_full</a></div><div class="ttdeci">struct stasis_message * stasis_message_create_full(struct stasis_message_type *type, void *data, const struct ast_eid *eid)</div><div class="ttdoc">Create a new message for an entity. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00140">stasis_message.c:140</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adca7190fcf61a89ccee694a58cd18838"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adca7190fcf61a89ccee694a58cd18838">&#9670;&nbsp;</a></span>check_cache_aggregate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_cache_aggregate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d25/structstasis__cache.html">stasis_cache</a> *&#160;</td>
          <td class="paramname"><em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td>
          <td class="paramname"><em>cache_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00970">970</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00659">stasis_cache_get_by_eid()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>, and <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00864">cache_test_data::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01245">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;{</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, aggregate, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d2e/structcache__test__data.html">cache_test_data</a> *<a class="code" href="../../dc/d9a/structtest__data.html">test_data</a>;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   aggregate = <a class="code" href="../../dd/d79/stasis_8h.html#a1d22721748b1bfd63ab13d92f19dfd02">stasis_cache_get_by_eid</a>(cache, cache_type, <span class="keywordtype">id</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;   <span class="keywordflow">if</span> (!aggregate) {</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <span class="comment">/* No aggregate, return true if given no value. */</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordflow">return</span> !<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;   }</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   <span class="comment">/* Return true if the given value matches the aggregate value. */</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   test_data = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(aggregate);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> &amp;&amp; !strcmp(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, test_data-&gt;<a class="code" href="../../de/d2e/structcache__test__data.html#a4e9aec275e566b978a3ccb4e043d8c61">value</a>);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;}</div><div class="ttc" id="structcache__test__data_html"><div class="ttname"><a href="../../de/d2e/structcache__test__data.html">cache_test_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00862">test_stasis.c:862</a></div></div>
<div class="ttc" id="structcache__test__data_html_a4e9aec275e566b978a3ccb4e043d8c61"><div class="ttname"><a href="../../de/d2e/structcache__test__data.html#a4e9aec275e566b978a3ccb4e043d8c61">cache_test_data::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00864">test_stasis.c:864</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="stasis_8h_html_a1d22721748b1bfd63ab13d92f19dfd02"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a1d22721748b1bfd63ab13d92f19dfd02">stasis_cache_get_by_eid</a></div><div class="ttdeci">struct stasis_message * stasis_cache_get_by_eid(struct stasis_cache *cache, struct stasis_message_type *type, const char *id, const struct ast_eid *eid)</div><div class="ttdoc">Retrieve an item from the cache for a specific entity. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00659">stasis_cache.c:659</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d2e506ef5ed0e6187a231a1b9411c07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d2e506ef5ed0e6187a231a1b9411c07">&#9670;&nbsp;</a></span>consumer_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a>* consumer_create </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ignore_subscriptions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">183</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00170">consumer_dtor()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00166">consumer::ignore_subscriptions</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00377">consumer::out</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00314">AST_TEST_DEFINE()</a>, and <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02154">create_cts()</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   consumer = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*consumer), <a class="code" href="../../db/d00/test__stasis_8c.html#a585c9adb224a241dcec6290c314c4861">consumer_dtor</a>);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="keywordflow">if</span> (!consumer) {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#ac9fdf2926e8468cd77520761990bbb22">ignore_subscriptions</a> = <a class="code" href="../../d9/dfd/structconsumer.html#ac9fdf2926e8468cd77520761990bbb22">ignore_subscriptions</a>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>));</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="keywordflow">if</span> (!consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(consumer);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   <span class="keywordflow">return</span> consumer;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div><div class="ttc" id="structconsumer_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">consumer::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00377">test_devicestate.c:377</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a585c9adb224a241dcec6290c314c4861"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a585c9adb224a241dcec6290c314c4861">consumer_dtor</a></div><div class="ttdeci">static void consumer_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00170">test_stasis.c:170</a></div></div>
<div class="ttc" id="structconsumer_html_ac9fdf2926e8468cd77520761990bbb22"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#ac9fdf2926e8468cd77520761990bbb22">consumer::ignore_subscriptions</a></div><div class="ttdeci">int ignore_subscriptions</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00166">test_stasis.c:166</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a585c9adb224a241dcec6290c314c4861"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a585c9adb224a241dcec6290c314c4861">&#9670;&nbsp;</a></span>consumer_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void consumer_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00170">170</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00165">consumer::messages_rxed_len</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00377">consumer::out</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;{</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = obj;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   <span class="keywordflow">while</span> (consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a> &gt; 0) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[--consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>]);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div><div class="ttc" id="structconsumer_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">consumer::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00377">test_devicestate.c:377</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structconsumer_html_a19648c6a151f719c14ce4a993c8b6a27"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">consumer::messages_rxed_len</a></div><div class="ttdeci">size_t messages_rxed_len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00165">test_stasis.c:165</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a167de9c686c1cccd23d1b6076492931a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a167de9c686c1cccd23d1b6076492931a">&#9670;&nbsp;</a></span>consumer_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void consumer_exec </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">204</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00228">ast_realloc</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00167">consumer::complete</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00166">consumer::ignore_subscriptions</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00165">consumer::messages_rxed_len</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00377">consumer::out</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01176">stasis_subscription_final_message()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00314">AST_TEST_DEFINE()</a>, and <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02154">create_cts()</a>.</p>
<div class="fragment"><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = data;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> consumer *, consumer_needs_cleanup, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, consumer);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   <span class="keywordflow">if</span> (!consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#ac9fdf2926e8468cd77520761990bbb22">ignore_subscriptions</a> || <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a>(message) != <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>()) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      ++consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a>(consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>, <span class="keyword">sizeof</span>(*consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>) * consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a> - 1] = message;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(message, +1);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a>(sub, message)) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">complete</a> = 1;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      consumer_needs_cleanup = consumer;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div><div class="ttc" id="structconsumer_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">consumer::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00377">test_devicestate.c:377</a></div></div>
<div class="ttc" id="astmm_8h_html_aa6bcdb74dc1508c22986f0adf171a0f2"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a></div><div class="ttdeci">#define ast_realloc(p, len)</div><div class="ttdoc">A wrapper for realloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00228">astmm.h:228</a></div></div>
<div class="ttc" id="structconsumer_html_ac9fdf2926e8468cd77520761990bbb22"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#ac9fdf2926e8468cd77520761990bbb22">consumer::ignore_subscriptions</a></div><div class="ttdeci">int ignore_subscriptions</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00166">test_stasis.c:166</a></div></div>
<div class="ttc" id="structconsumer_html_a520408f4775914f7510cc59db5a60b38"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">consumer::complete</a></div><div class="ttdeci">int complete</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00167">test_stasis.c:167</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_a839350445aaa51cedf31f6daec933ee0"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a></div><div class="ttdeci">int stasis_subscription_final_message(struct stasis_subscription *sub, struct stasis_message *msg)</div><div class="ttdoc">Determine whether a message is the final message to be received on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01176">stasis.c:1176</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structconsumer_html_a19648c6a151f719c14ce4a993c8b6a27"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">consumer::messages_rxed_len</a></div><div class="ttdeci">size_t messages_rxed_len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00165">test_stasis.c:165</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fea21f6983513f203cef9216f894e51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fea21f6983513f203cef9216f894e51">&#9670;&nbsp;</a></span>consumer_exec_sync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void consumer_exec_sync </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00226">226</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00228">ast_realloc</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00167">consumer::complete</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00166">consumer::ignore_subscriptions</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00165">consumer::messages_rxed_len</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01176">stasis_subscription_final_message()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00471">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> *<a class="code" href="../../d9/dfd/structconsumer.html">consumer</a> = data;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> consumer *, consumer_needs_cleanup, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, consumer);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   <span class="keywordflow">if</span> (!consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#ac9fdf2926e8468cd77520761990bbb22">ignore_subscriptions</a> || <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a>(message) != <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>()) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      ++consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a>(consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>, <span class="keyword">sizeof</span>(*consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>) * consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a> - 1] = message;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(message, +1);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a>(sub, message)) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">complete</a> = 1;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      consumer_needs_cleanup = consumer;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div><div class="ttc" id="astmm_8h_html_aa6bcdb74dc1508c22986f0adf171a0f2"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a></div><div class="ttdeci">#define ast_realloc(p, len)</div><div class="ttdoc">A wrapper for realloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00228">astmm.h:228</a></div></div>
<div class="ttc" id="structconsumer_html_ac9fdf2926e8468cd77520761990bbb22"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#ac9fdf2926e8468cd77520761990bbb22">consumer::ignore_subscriptions</a></div><div class="ttdeci">int ignore_subscriptions</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00166">test_stasis.c:166</a></div></div>
<div class="ttc" id="structconsumer_html_a520408f4775914f7510cc59db5a60b38"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">consumer::complete</a></div><div class="ttdeci">int complete</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00167">test_stasis.c:167</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structconsumer_html"><div class="ttname"><a href="../../d9/dfd/structconsumer.html">consumer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00376">test_devicestate.c:376</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="stasis_8h_html_a839350445aaa51cedf31f6daec933ee0"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a></div><div class="ttdeci">int stasis_subscription_final_message(struct stasis_subscription *sub, struct stasis_message *msg)</div><div class="ttdoc">Determine whether a message is the final message to be received on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01176">stasis.c:1176</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structconsumer_html_a19648c6a151f719c14ce4a993c8b6a27"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">consumer::messages_rxed_len</a></div><div class="ttdeci">size_t messages_rxed_len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00165">test_stasis.c:165</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a973520f05217be8bca2fad9eb4c90696"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a973520f05217be8bca2fad9eb4c90696">&#9670;&nbsp;</a></span>consumer_should_stay()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int consumer_should_stay </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a> *&#160;</td>
          <td class="paramname"><em>consumer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>expected_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00288">288</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00476">ao2_object_get_lockaddr()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00165">consumer::messages_rxed_len</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00377">consumer::out</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00567">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;{</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keyword">struct </span>timeval diff = {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      .tv_sec = 0,</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      .tv_usec = 100000 <span class="comment">/* wait for 100ms */</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   };</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keyword">struct </span>timeval end_tv = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(start, diff);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      .tv_sec = end_tv.tv_sec,</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      .tv_nsec = end_tv.tv_usec * 1000</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   };</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, consumer);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <span class="keywordflow">while</span> (consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a> == expected_len) {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordtype">int</span> r = <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a>(consumer), &amp;end);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">if</span> (r == ETIMEDOUT) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(r == 0); <span class="comment">/* Not expecting any othet types of errors */</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <span class="keywordflow">return</span> consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div><div class="ttc" id="structconsumer_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">consumer::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00377">test_devicestate.c:377</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="astobj2_8h_html_a503b6c7ced96f9b56ec59c115cbeb29a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a></div><div class="ttdeci">void * ao2_object_get_lockaddr(void *obj)</div><div class="ttdoc">Return the mutex lock address of an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00476">astobj2.c:476</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="structconsumer_html_a19648c6a151f719c14ce4a993c8b6a27"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">consumer::messages_rxed_len</a></div><div class="ttdeci">size_t messages_rxed_len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00165">test_stasis.c:165</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad17c2b858cb7f751d85c4120911a92be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad17c2b858cb7f751d85c4120911a92be">&#9670;&nbsp;</a></span>consumer_wait_for()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int consumer_wait_for </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a> *&#160;</td>
          <td class="paramname"><em>consumer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>expected_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00246">246</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00476">ao2_object_get_lockaddr()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00165">consumer::messages_rxed_len</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00377">consumer::out</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00424">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;{</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      .tv_sec = start.tv_sec + 30,</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   };</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, consumer);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <span class="keywordflow">while</span> (consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a> &lt; expected_len) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordtype">int</span> r = <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a>(consumer), &amp;end);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">if</span> (r == ETIMEDOUT) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(r == 0); <span class="comment">/* Not expecting any othet types of errors */</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="keywordflow">return</span> consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div><div class="ttc" id="structconsumer_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">consumer::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00377">test_devicestate.c:377</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="astobj2_8h_html_a503b6c7ced96f9b56ec59c115cbeb29a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a></div><div class="ttdeci">void * ao2_object_get_lockaddr(void *obj)</div><div class="ttdoc">Return the mutex lock address of an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00476">astobj2.c:476</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="structconsumer_html_a19648c6a151f719c14ce4a993c8b6a27"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">consumer::messages_rxed_len</a></div><div class="ttdeci">size_t messages_rxed_len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00165">test_stasis.c:165</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a312ddb3e48152e8316cbc04273b83764"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a312ddb3e48152e8316cbc04273b83764">&#9670;&nbsp;</a></span>consumer_wait_for_completion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int consumer_wait_for_completion </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dfd/structconsumer.html">consumer</a> *&#160;</td>
          <td class="paramname"><em>consumer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00267">267</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00476">ao2_object_get_lockaddr()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00167">consumer::complete</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00377">consumer::out</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00314">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;{</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      .tv_sec = start.tv_sec + 3,</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   };</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, consumer);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keywordflow">while</span> (!consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">complete</a>) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordtype">int</span> r = <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">out</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a>(consumer), &amp;end);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">if</span> (r == ETIMEDOUT) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(r == 0); <span class="comment">/* Not expecting any othet types of errors */</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <span class="keywordflow">return</span> consumer-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">complete</a>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div><div class="ttc" id="structconsumer_html_a35ce10d3b75c96679f8d17b8bf98e937"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a35ce10d3b75c96679f8d17b8bf98e937">consumer::out</a></div><div class="ttdeci">ast_cond_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd1/test__devicestate_8c_source.html#l00377">test_devicestate.c:377</a></div></div>
<div class="ttc" id="structconsumer_html_a520408f4775914f7510cc59db5a60b38"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">consumer::complete</a></div><div class="ttdeci">int complete</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00167">test_stasis.c:167</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="astobj2_8h_html_a503b6c7ced96f9b56ec59c115cbeb29a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a></div><div class="ttdeci">void * ao2_object_get_lockaddr(void *obj)</div><div class="ttdoc">Return the mutex lock address of an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00476">astobj2.c:476</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad67eb457a93ee00bc3b86b0e66915174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad67eb457a93ee00bc3b86b0e66915174">&#9670;&nbsp;</a></span>create_cts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dc/d51/structcts.html">cts</a>* create_cts </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02154">2154</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02140">cts::consumer</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00183">consumer_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02145">destroy_cts()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02142">cts::sub</a>, and <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02141">cts::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02234">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;{</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d51/structcts.html">cts</a> *<a class="code" href="../../dc/d51/structcts.html">cts</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*cts), <a class="code" href="../../db/d00/test__stasis_8c.html#a8652476e53aba28400ee05a08f5dd329">destroy_cts</a>);</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a>  __attribute__ ((unused)) rc;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;   ast_test_validate_cleanup(test, cts, rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;   cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;TestTopic&quot;</span>);</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;   ast_test_validate_cleanup(test, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;   cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a>(0);</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;   ast_test_validate_cleanup(test, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>, rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>, +1);</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;   cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a> = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, <a class="code" href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a>, cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>);</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;   ast_test_validate_cleanup(test, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>, rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;   <span class="keywordflow">return</span> cts;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cts);</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;}</div><div class="ttc" id="structcts_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../dc/d51/structcts.html#a136460a7868b48ef576c0fa505ef96db">cts::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02141">test_stasis.c:2141</a></div></div>
<div class="ttc" id="structcts_html_a03bb86c52b8e22ea4325ea04e6443fa0"><div class="ttname"><a href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">cts::sub</a></div><div class="ttdeci">struct stasis_subscription * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02142">test_stasis.c:2142</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a3d2e506ef5ed0e6187a231a1b9411c07"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a3d2e506ef5ed0e6187a231a1b9411c07">consumer_create</a></div><div class="ttdeci">static struct consumer * consumer_create(int ignore_subscriptions)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00183">test_stasis.c:183</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcts_html_a1f1d2eca49560fccd1925ecea87df2cf"><div class="ttname"><a href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">cts::consumer</a></div><div class="ttdeci">struct consumer * consumer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02140">test_stasis.c:2140</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="structcts_html"><div class="ttname"><a href="../../dc/d51/structcts.html">cts</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02139">test_stasis.c:2139</a></div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a167de9c686c1cccd23d1b6076492931a"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a167de9c686c1cccd23d1b6076492931a">consumer_exec</a></div><div class="ttdeci">static void consumer_exec(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00204">test_stasis.c:204</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a8652476e53aba28400ee05a08f5dd329"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a8652476e53aba28400ee05a08f5dd329">destroy_cts</a></div><div class="ttdeci">static void destroy_cts(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02145">test_stasis.c:2145</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8fc4cc528eace972c010d88f0e8d4d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8fc4cc528eace972c010d88f0e8d4d2">&#9670;&nbsp;</a></span>create_message_types()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../da/dcd/structtest__message__types.html">test_message_types</a>* create_message_types </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02080">2080</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02055">test_message_types::ami</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02058">test_message_types::amievent</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02062">test_message_types::change</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02065">destroy_message_types()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02057">test_message_types::event</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00056">fake_ami()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00043">fake_event()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00049">fake_json()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02056">test_message_types::json</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02054">test_message_types::none</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00290">STASIS_MESSAGE_TYPE_SUCCESS</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00266">stasis_message_vtable::to_ami</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00281">stasis_message_vtable::to_event</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00253">stasis_message_vtable::to_json</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02059">test_message_types::type1</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02060">test_message_types::type2</a>, and <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02061">test_message_types::type3</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02234">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;{</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d3e/structstasis__message__vtable.html">stasis_message_vtable</a> vtable = { 0 };</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dcd/structtest__message__types.html">test_message_types</a> *types;</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a>  __attribute__ ((unused)) rc;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;   types = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*types), <a class="code" href="../../db/d00/test__stasis_8c.html#a75673fd729f018e2625bb12d0166ab27">destroy_message_types</a>);</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;   <span class="keywordflow">if</span> (!types) {</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   }</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;   ast_test_validate_cleanup(test,</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessageNONE&quot;</span>, &amp;vtable, &amp;types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#af81ab0b8c34676b3c849b36465f46498">none</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>,</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;      rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;   vtable.<a class="code" href="../../dd/d3e/structstasis__message__vtable.html#a92408bd64ea09c19566c897fe9a9ec69">to_ami</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#ae620b535acff15a9de122d44874c71be">fake_ami</a>;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;   ast_test_validate_cleanup(test,</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessageAMI&quot;</span>, &amp;vtable, &amp;types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#a97a206020551d9668a4ccd11e3cb0fff">ami</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>,</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;   vtable.<a class="code" href="../../dd/d3e/structstasis__message__vtable.html#a92408bd64ea09c19566c897fe9a9ec69">to_ami</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;   vtable.<a class="code" href="../../dd/d3e/structstasis__message__vtable.html#a8ebb74617e8d5134105fd04797d2fba7">to_json</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a5697b03b92950971980ae4b2b197b824">fake_json</a>;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;   ast_test_validate_cleanup(test,</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessageJSON&quot;</span>, &amp;vtable, &amp;types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#aa7b901b3c04fb252b309fba601849b89">json</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>,</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;   vtable.<a class="code" href="../../dd/d3e/structstasis__message__vtable.html#a92408bd64ea09c19566c897fe9a9ec69">to_ami</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;   vtable.<a class="code" href="../../dd/d3e/structstasis__message__vtable.html#a8ebb74617e8d5134105fd04797d2fba7">to_json</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;   vtable.<a class="code" href="../../dd/d3e/structstasis__message__vtable.html#af8252f3e39a79e8ac04f8a83993d0d09">to_event</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#a9b5e46824df06ae858f93fb97b3891ab">fake_event</a>;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;   ast_test_validate_cleanup(test,</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessageEVENT&quot;</span>, &amp;vtable, &amp;types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#a84f96a1ce8acf12e404f6a83861886c8">event</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>,</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;      rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;   vtable.<a class="code" href="../../dd/d3e/structstasis__message__vtable.html#a92408bd64ea09c19566c897fe9a9ec69">to_ami</a> = <a class="code" href="../../db/d00/test__stasis_8c.html#ae620b535acff15a9de122d44874c71be">fake_ami</a>;</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;   ast_test_validate_cleanup(test,</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessageAMIEVENT&quot;</span>, &amp;vtable, &amp;types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#ac12d0923ca6375f25d635373380e242d">amievent</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>,</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;      rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;   ast_test_validate_cleanup(test,</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessageType1&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#af9b32ed37fefaa287abc31830049f0c8">type1</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>,</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;      rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;   ast_test_validate_cleanup(test,</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessageType2&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#ad130eefcb792fb7979525593ca1aff64">type2</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>,</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;      rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;   ast_test_validate_cleanup(test,</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a>(<span class="stringliteral">&quot;TestMessageType3&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#a95bbb08023070c1ff0f0d9b6e6573afe">type3</a>) == <a class="code" href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a>,</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;      rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;   types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#a0e7cf20792036a374750f0af33fa30a5">change</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>();</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;   <span class="keywordflow">return</span> types;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(types);</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;}</div><div class="ttc" id="structstasis__message__vtable_html"><div class="ttname"><a href="../../dd/d3e/structstasis__message__vtable.html">stasis_message_vtable</a></div><div class="ttdoc">Virtual table providing methods for messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00239">stasis.h:239</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a75673fd729f018e2625bb12d0166ab27"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a75673fd729f018e2625bb12d0166ab27">destroy_message_types</a></div><div class="ttdeci">static void destroy_message_types(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02065">test_stasis.c:2065</a></div></div>
<div class="ttc" id="structtest__message__types_html_a0e7cf20792036a374750f0af33fa30a5"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#a0e7cf20792036a374750f0af33fa30a5">test_message_types::change</a></div><div class="ttdeci">struct stasis_message_type * change</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02062">test_stasis.c:2062</a></div></div>
<div class="ttc" id="structtest__message__types_html_a84f96a1ce8acf12e404f6a83861886c8"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#a84f96a1ce8acf12e404f6a83861886c8">test_message_types::event</a></div><div class="ttdeci">struct stasis_message_type * event</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02057">test_stasis.c:2057</a></div></div>
<div class="ttc" id="structtest__message__types_html_a95bbb08023070c1ff0f0d9b6e6573afe"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#a95bbb08023070c1ff0f0d9b6e6573afe">test_message_types::type3</a></div><div class="ttdeci">struct stasis_message_type * type3</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02061">test_stasis.c:2061</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a9b5e46824df06ae858f93fb97b3891ab"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a9b5e46824df06ae858f93fb97b3891ab">fake_event</a></div><div class="ttdeci">static struct ast_event * fake_event(struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00043">test_stasis.c:43</a></div></div>
<div class="ttc" id="stasis_8h_html_a7c7761ce3c78b45fd34cb25bf0e1ba09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a7c7761ce3c78b45fd34cb25bf0e1ba09">stasis_message_type_create</a></div><div class="ttdeci">enum stasis_message_type_result stasis_message_type_create(const char *name, struct stasis_message_vtable *vtable, struct stasis_message_type **result)</div><div class="ttdoc">Create a new message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message.c:56</a></div></div>
<div class="ttc" id="structtest__message__types_html_ad130eefcb792fb7979525593ca1aff64"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#ad130eefcb792fb7979525593ca1aff64">test_message_types::type2</a></div><div class="ttdeci">struct stasis_message_type * type2</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02060">test_stasis.c:2060</a></div></div>
<div class="ttc" id="structtest__message__types_html_af9b32ed37fefaa287abc31830049f0c8"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#af9b32ed37fefaa287abc31830049f0c8">test_message_types::type1</a></div><div class="ttdeci">struct stasis_message_type * type1</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02059">test_stasis.c:2059</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__message__vtable_html_af8252f3e39a79e8ac04f8a83993d0d09"><div class="ttname"><a href="../../dd/d3e/structstasis__message__vtable.html#af8252f3e39a79e8ac04f8a83993d0d09">stasis_message_vtable::to_event</a></div><div class="ttdeci">struct ast_event *(* to_event)(struct stasis_message *message)</div><div class="ttdoc">Build the ast_event representation of the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00281">stasis.h:281</a></div></div>
<div class="ttc" id="stasis_8h_html_af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af326808a49f64881cfa368ef2e5f49e3a69bbd642277d3d76eb62bc4736a3ab42">STASIS_MESSAGE_TYPE_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00290">stasis.h:290</a></div></div>
<div class="ttc" id="structtest__message__types_html_ac12d0923ca6375f25d635373380e242d"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#ac12d0923ca6375f25d635373380e242d">test_message_types::amievent</a></div><div class="ttdeci">struct stasis_message_type * amievent</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02058">test_stasis.c:2058</a></div></div>
<div class="ttc" id="structstasis__message__vtable_html_a8ebb74617e8d5134105fd04797d2fba7"><div class="ttname"><a href="../../dd/d3e/structstasis__message__vtable.html#a8ebb74617e8d5134105fd04797d2fba7">stasis_message_vtable::to_json</a></div><div class="ttdeci">struct ast_json *(* to_json)(struct stasis_message *message, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build the JSON representation of the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00253">stasis.h:253</a></div></div>
<div class="ttc" id="structtest__message__types_html_a97a206020551d9668a4ccd11e3cb0fff"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#a97a206020551d9668a4ccd11e3cb0fff">test_message_types::ami</a></div><div class="ttdeci">struct stasis_message_type * ami</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02055">test_stasis.c:2055</a></div></div>
<div class="ttc" id="structtest__message__types_html_af81ab0b8c34676b3c849b36465f46498"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#af81ab0b8c34676b3c849b36465f46498">test_message_types::none</a></div><div class="ttdeci">struct stasis_message_type * none</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02054">test_stasis.c:2054</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structstasis__message__vtable_html_a92408bd64ea09c19566c897fe9a9ec69"><div class="ttname"><a href="../../dd/d3e/structstasis__message__vtable.html#a92408bd64ea09c19566c897fe9a9ec69">stasis_message_vtable::to_ami</a></div><div class="ttdeci">struct ast_manager_event_blob *(* to_ami)(struct stasis_message *message)</div><div class="ttdoc">Build the AMI representation of the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00266">stasis.h:266</a></div></div>
<div class="ttc" id="test__stasis_8c_html_a5697b03b92950971980ae4b2b197b824"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a5697b03b92950971980ae4b2b197b824">fake_json</a></div><div class="ttdeci">static struct ast_json * fake_json(struct stasis_message *message, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00049">test_stasis.c:49</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="structtest__message__types_html_aa7b901b3c04fb252b309fba601849b89"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#aa7b901b3c04fb252b309fba601849b89">test_message_types::json</a></div><div class="ttdeci">struct stasis_message_type * json</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02056">test_stasis.c:2056</a></div></div>
<div class="ttc" id="structtest__message__types_html"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html">test_message_types</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02053">test_stasis.c:2053</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ae620b535acff15a9de122d44874c71be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ae620b535acff15a9de122d44874c71be">fake_ami</a></div><div class="ttdeci">static struct ast_manager_event_blob * fake_ami(struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00056">test_stasis.c:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8652476e53aba28400ee05a08f5dd329"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8652476e53aba28400ee05a08f5dd329">&#9670;&nbsp;</a></span>destroy_cts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_cts </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02145">2145</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02140">cts::consumer</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02142">cts::sub</a>, and <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02141">cts::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02154">create_cts()</a>.</p>
<div class="fragment"><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;{</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d51/structcts.html">cts</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = obj;</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>(c-&gt;<a class="code" href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>);</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(c-&gt;<a class="code" href="../../dc/d51/structcts.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(c-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>);</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;}</div><div class="ttc" id="structcts_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../dc/d51/structcts.html#a136460a7868b48ef576c0fa505ef96db">cts::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02141">test_stasis.c:2141</a></div></div>
<div class="ttc" id="structcts_html_a03bb86c52b8e22ea4325ea04e6443fa0"><div class="ttname"><a href="../../dc/d51/structcts.html#a03bb86c52b8e22ea4325ea04e6443fa0">cts::sub</a></div><div class="ttdeci">struct stasis_subscription * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02142">test_stasis.c:2142</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="structcts_html_a1f1d2eca49560fccd1925ecea87df2cf"><div class="ttname"><a href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">cts::consumer</a></div><div class="ttdeci">struct consumer * consumer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02140">test_stasis.c:2140</a></div></div>
<div class="ttc" id="structcts_html"><div class="ttname"><a href="../../dc/d51/structcts.html">cts</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02139">test_stasis.c:2139</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a75673fd729f018e2625bb12d0166ab27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75673fd729f018e2625bb12d0166ab27">&#9670;&nbsp;</a></span>destroy_message_types()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_message_types </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02065">2065</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02055">test_message_types::ami</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02058">test_message_types::amievent</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02057">test_message_types::event</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02056">test_message_types::json</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02054">test_message_types::none</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02059">test_message_types::type1</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02060">test_message_types::type2</a>, and <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02061">test_message_types::type3</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02080">create_message_types()</a>.</p>
<div class="fragment"><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;{</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dcd/structtest__message__types.html">test_message_types</a> *types = obj;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#af81ab0b8c34676b3c849b36465f46498">none</a>);</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#a97a206020551d9668a4ccd11e3cb0fff">ami</a>);</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#aa7b901b3c04fb252b309fba601849b89">json</a>);</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#a84f96a1ce8acf12e404f6a83861886c8">event</a>);</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#ac12d0923ca6375f25d635373380e242d">amievent</a>);</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#af9b32ed37fefaa287abc31830049f0c8">type1</a>);</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#ad130eefcb792fb7979525593ca1aff64">type2</a>);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(types-&gt;<a class="code" href="../../da/dcd/structtest__message__types.html#a95bbb08023070c1ff0f0d9b6e6573afe">type3</a>);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;   <span class="comment">/* N.B.  Don&#39;t cleanup types-&gt;change! */</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;}</div><div class="ttc" id="structtest__message__types_html_a84f96a1ce8acf12e404f6a83861886c8"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#a84f96a1ce8acf12e404f6a83861886c8">test_message_types::event</a></div><div class="ttdeci">struct stasis_message_type * event</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02057">test_stasis.c:2057</a></div></div>
<div class="ttc" id="structtest__message__types_html_a95bbb08023070c1ff0f0d9b6e6573afe"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#a95bbb08023070c1ff0f0d9b6e6573afe">test_message_types::type3</a></div><div class="ttdeci">struct stasis_message_type * type3</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02061">test_stasis.c:2061</a></div></div>
<div class="ttc" id="structtest__message__types_html_ad130eefcb792fb7979525593ca1aff64"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#ad130eefcb792fb7979525593ca1aff64">test_message_types::type2</a></div><div class="ttdeci">struct stasis_message_type * type2</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02060">test_stasis.c:2060</a></div></div>
<div class="ttc" id="structtest__message__types_html_af9b32ed37fefaa287abc31830049f0c8"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#af9b32ed37fefaa287abc31830049f0c8">test_message_types::type1</a></div><div class="ttdeci">struct stasis_message_type * type1</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02059">test_stasis.c:2059</a></div></div>
<div class="ttc" id="structtest__message__types_html_ac12d0923ca6375f25d635373380e242d"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#ac12d0923ca6375f25d635373380e242d">test_message_types::amievent</a></div><div class="ttdeci">struct stasis_message_type * amievent</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02058">test_stasis.c:2058</a></div></div>
<div class="ttc" id="structtest__message__types_html_a97a206020551d9668a4ccd11e3cb0fff"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#a97a206020551d9668a4ccd11e3cb0fff">test_message_types::ami</a></div><div class="ttdeci">struct stasis_message_type * ami</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02055">test_stasis.c:2055</a></div></div>
<div class="ttc" id="structtest__message__types_html_af81ab0b8c34676b3c849b36465f46498"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#af81ab0b8c34676b3c849b36465f46498">test_message_types::none</a></div><div class="ttdeci">struct stasis_message_type * none</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02054">test_stasis.c:2054</a></div></div>
<div class="ttc" id="structtest__message__types_html_aa7b901b3c04fb252b309fba601849b89"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html#aa7b901b3c04fb252b309fba601849b89">test_message_types::json</a></div><div class="ttdeci">struct stasis_message_type * json</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02056">test_stasis.c:2056</a></div></div>
<div class="ttc" id="structtest__message__types_html"><div class="ttname"><a href="../../da/dcd/structtest__message__types.html">test_message_types</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02053">test_stasis.c:2053</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade4b58bd3699506505e7cd465b9253fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade4b58bd3699506505e7cd465b9253fb">&#9670;&nbsp;</a></span>dump_consumer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dump_consumer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/d51/structcts.html">cts</a> *&#160;</td>
          <td class="paramname"><em>cts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02193">2193</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00167">consumer::complete</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02140">cts::consumer</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00895">stasis_subscription_change::description</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00164">consumer::messages_rxed</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00165">consumer::messages_rxed_len</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message_type_name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02234">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;{</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a> *data;</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Messages received: %ld  Final? %s\n&quot;</span>, cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>,</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;      cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">complete</a> ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">messages_rxed_len</a>; i++) {</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;      data = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[i]);</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Message type received: %s %s\n&quot;</span>,</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;         <a class="code" href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a>(<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">consumer</a>-&gt;<a class="code" href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">messages_rxed</a>[i])),</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;         data &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">description</a>) ? data-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">description</a> : <span class="stringliteral">&quot;no data&quot;</span>);</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;   }</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;}</div><div class="ttc" id="stasis_8h_html_aefd78086150c89477f5851f2836e0478"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a></div><div class="ttdeci">const char * stasis_message_type_name(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the name of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message.c:99</a></div></div>
<div class="ttc" id="structconsumer_html_a520408f4775914f7510cc59db5a60b38"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a520408f4775914f7510cc59db5a60b38">consumer::complete</a></div><div class="ttdeci">int complete</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00167">test_stasis.c:167</a></div></div>
<div class="ttc" id="structconsumer_html_a9c06c7b7c2c9cb9a2b6a575b1aa65baf"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a9c06c7b7c2c9cb9a2b6a575b1aa65baf">consumer::messages_rxed</a></div><div class="ttdeci">struct stasis_message ** messages_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00164">test_stasis.c:164</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structcts_html_a1f1d2eca49560fccd1925ecea87df2cf"><div class="ttname"><a href="../../dc/d51/structcts.html#a1f1d2eca49560fccd1925ecea87df2cf">cts::consumer</a></div><div class="ttdeci">struct consumer * consumer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02140">test_stasis.c:2140</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a></div><div class="ttdoc">Holds details about changes to subscriptions for the specified topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00892">stasis.h:892</a></div></div>
<div class="ttc" id="structconsumer_html_a19648c6a151f719c14ce4a993c8b6a27"><div class="ttname"><a href="../../d9/dfd/structconsumer.html#a19648c6a151f719c14ce4a993c8b6a27">consumer::messages_rxed_len</a></div><div class="ttdeci">size_t messages_rxed_len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00165">test_stasis.c:165</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a148e968cb2e6176288982274dab428c3"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">stasis_subscription_change::description</a></div><div class="ttdeci">char description[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00895">stasis.h:895</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae620b535acff15a9de122d44874c71be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae620b535acff15a9de122d44874c71be">&#9670;&nbsp;</a></span>fake_ami()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a>* fake_ami </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00056">56</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09727">ast_manager_event_blob_create()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00088">EVENT_FLAG_TEST</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l01508">text</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02080">create_message_types()</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *, res, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a> = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;   res = <a class="code" href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a>(<a class="code" href="../../db/d45/manager_8h.html#a4fcf0d018dc49622b436a2ae857ea3da">EVENT_FLAG_TEST</a>, <span class="stringliteral">&quot;FakeMI&quot;</span>,</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      <span class="stringliteral">&quot;Message: %s\r\n&quot;</span>, text);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;   }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(res, +1);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div><div class="ttc" id="structast__manager__event__blob_html"><div class="ttname"><a href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a></div><div class="ttdoc">Struct containing info for an AMI event to send out. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00491">manager.h:491</a></div></div>
<div class="ttc" id="manager_8h_html_a4fcf0d018dc49622b436a2ae857ea3da"><div class="ttname"><a href="../../db/d45/manager_8h.html#a4fcf0d018dc49622b436a2ae857ea3da">EVENT_FLAG_TEST</a></div><div class="ttdeci">#define EVENT_FLAG_TEST</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00088">manager.h:88</a></div></div>
<div class="ttc" id="app__queue_8c_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01508">app_queue.c:1508</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="manager_8h_html_a3ace32eaf9a3fc2f7d15121c64bf8ecd"><div class="ttname"><a href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a></div><div class="ttdeci">struct ast_manager_event_blob * ast_manager_event_blob_create(int event_flags, const char *manager_event, const char *extra_fields_fmt,...)</div><div class="ttdoc">Construct a ast_manager_event_blob. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l09727">manager.c:9727</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b5e46824df06ae858f93fb97b3891ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b5e46824df06ae858f93fb97b3891ab">&#9670;&nbsp;</a></span>fake_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a>* fake_event </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00043">43</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00036">AST_EVENT_CUSTOM</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00265">AST_EVENT_IE_DESCRIPTION</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00070">AST_EVENT_IE_END</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00328">AST_EVENT_IE_PLTYPE_STR</a>, and <a class="el" href="../../d0/deb/event_8c_source.html#l00402">ast_event_new()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02080">create_message_types()</a>.</p>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;{</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d20/event_8h.html#afb4a2a00de28bb0733037060da8c4bac">ast_event_new</a>(<a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79faa7def0ac32b2abc7fa40cd99c8b28e7a">AST_EVENT_CUSTOM</a>,</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491aeabc586653fe93c7f2b459f7b39ee2fb">AST_EVENT_IE_DESCRIPTION</a>, <a class="code" href="../../d6/d37/event__defs_8h.html#a73dadfa1128d5e75107536e132e758c6ab82ac16f0791be2f8f918429a73430be">AST_EVENT_IE_PLTYPE_STR</a>, <span class="stringliteral">&quot;Dummy&quot;</span>, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f">AST_EVENT_IE_END</a>);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div><div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491aeabc586653fe93c7f2b459f7b39ee2fb"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491aeabc586653fe93c7f2b459f7b39ee2fb">AST_EVENT_IE_DESCRIPTION</a></div><div class="ttdoc">Description Used by: AST_EVENT_SUB, AST_EVENT_UNSUB Payload type: STR. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00265">event_defs.h:265</a></div></div>
<div class="ttc" id="event__defs_8h_html_a6fa079412d9d9c1cc539f6d71f37f79faa7def0ac32b2abc7fa40cd99c8b28e7a"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79faa7def0ac32b2abc7fa40cd99c8b28e7a">AST_EVENT_CUSTOM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00036">event_defs.h:36</a></div></div>
<div class="ttc" id="event__defs_8h_html_a73dadfa1128d5e75107536e132e758c6ab82ac16f0791be2f8f918429a73430be"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a73dadfa1128d5e75107536e132e758c6ab82ac16f0791be2f8f918429a73430be">AST_EVENT_IE_PLTYPE_STR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00328">event_defs.h:328</a></div></div>
<div class="ttc" id="event_8h_html_afb4a2a00de28bb0733037060da8c4bac"><div class="ttname"><a href="../../dd/d20/event_8h.html#afb4a2a00de28bb0733037060da8c4bac">ast_event_new</a></div><div class="ttdeci">struct ast_event * ast_event_new(enum ast_event_type event_type,...)</div><div class="ttdoc">Create a new event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00402">event.c:402</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f">AST_EVENT_IE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00070">event_defs.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5697b03b92950971980ae4b2b197b824"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5697b03b92950971980ae4b2b197b824">&#9670;&nbsp;</a></span>fake_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a>* fake_json </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *&#160;</td>
          <td class="paramname"><em>sanitize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00049">49</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d98/json_8c_source.html#l00268">ast_json_string_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l01508">text</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02080">create_message_types()</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a> = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(text);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div><div class="ttc" id="app__queue_8c_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01508">app_queue.c:1508</a></div></div>
<div class="ttc" id="json_8h_html_adc52f8d76b7fdd0c8d12987981fd5bf5"><div class="ttname"><a href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a></div><div class="ttdeci">struct ast_json * ast_json_string_create(const char *value)</div><div class="ttdoc">Construct a JSON string from value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00268">json.c:268</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a92d140b66548be77795839ace7bb1ac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92d140b66548be77795839ace7bb1ac4">&#9670;&nbsp;</a></span>is_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int is_msg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td>
          <td class="paramname"><em>mtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02178">2178</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d79/stasis_8h_source.html#l00895">stasis_subscription_change::description</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02234">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;{</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a> *<a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a> = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(msg) != mtype) {</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;   }</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;   <span class="keywordflow">if</span> (data) {</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      <span class="keywordflow">return</span> (strcmp(data, msg_data-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">description</a>) == 0);</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;   }</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;}</div><div class="ttc" id="structmsg__data_html"><div class="ttname"><a href="../../d3/d60/structmsg__data.html">msg_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00220">message.c:220</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a></div><div class="ttdoc">Holds details about changes to subscriptions for the specified topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00892">stasis.h:892</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a148e968cb2e6176288982274dab428c3"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">stasis_subscription_change::description</a></div><div class="ttdeci">char description[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00895">stasis.h:895</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02468">2468</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00127">AST_TEST_REGISTER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">cache</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../d6/d5d/pjsip__outbound__registrations_8c_source.html#l00042">router</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00542">to_ami()</a>, and <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02436">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;{</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(message_type);</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(<a class="code" href="../../d8/d9e/structmessage.html">message</a>);</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(subscription_messages);</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(subscription_pool_messages);</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>);</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(publish_sync);</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(publish_pool);</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(unsubscribe_stops_messages);</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(forward);</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(cache_filter);</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(cache_dump);</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(cache_eid_aggregate);</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(<a class="code" href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a>);</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(router_pool);</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(router_cache_updates);</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(interleaving);</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(subscription_interleaving);</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(no_to_json);</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(to_json);</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(no_to_ami);</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(<a class="code" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a>);</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(dtor_order);</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(caching_dtor_order);</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(type_filters);</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(formatter_filters);</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(combo_filters);</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;}</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="pjsip__outbound__registrations_8c_html_a85c07e3e0d15ea99cf0c5dbe1dfdcb24"><div class="ttname"><a href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a></div><div class="ttdeci">static struct stasis_message_router * router</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d5d/pjsip__outbound__registrations_8c_source.html#l00042">pjsip_outbound_registrations.c:42</a></div></div>
<div class="ttc" id="test_8h_html_a34f64a69c09d98ceb693b077efd7ef97"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a></div><div class="ttdeci">#define AST_TEST_REGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00127">test.h:127</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="res__pjsip__exten__state_8c_html_ae8731a90be4dc2d8272b7dfd8a001d4c"><div class="ttname"><a href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a></div><div class="ttdeci">static void to_ami(struct ast_sip_subscription *sub, struct ast_str **buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00542">res_pjsip_exten_state.c:542</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_aefe318d32c8bb7a9e2025eb146d47781"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a></div><div class="ttdeci">struct ao2_container * cache</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">pbx_realtime.c:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae07dd56cdf7085a9cd09462bd36e4f43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae07dd56cdf7085a9cd09462bd36e4f43">&#9670;&nbsp;</a></span>noop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void noop </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01962">1962</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l01968">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;{</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;   <span class="comment">/* no-op */</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="aa2a8343ff291dcbd1b75e18c8bcc949a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2a8343ff291dcbd1b75e18c8bcc949a">&#9670;&nbsp;</a></span>noop_get_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* noop_get_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02001">2001</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02006">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;{</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3fd88e646336e34bc9354be2145a06f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fd88e646336e34bc9354be2145a06f8">&#9670;&nbsp;</a></span>send_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_msg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/d51/structcts.html">cts</a> *&#160;</td>
          <td class="paramname"><em>cts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td>
          <td class="paramname"><em>msg_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02208">2208</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00895">stasis_subscription_change::description</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message_type_name()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, and <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02141">cts::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02234">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;{</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a> *<a class="code" href="../../dc/d9a/structtest__data.html">test_data</a> =</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*test_data) + (data ? strlen(data) : strlen(<span class="stringliteral">&quot;no data&quot;</span>)) + 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;   <span class="keywordflow">if</span> (!test_data) {</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;   }</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;   strcpy(test_data-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">description</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(data, <span class="stringliteral">&quot;no data&quot;</span>)); <span class="comment">/* Safe */</span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(msg_type, test_data);</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(test_data, -1);</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unable to create %s message\n&quot;</span>,</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;         <a class="code" href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a>(msg_type));</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;   }</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(cts-&gt;<a class="code" href="../../dc/d51/structcts.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, msg);</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;}</div><div class="ttc" id="structcts_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../dc/d51/structcts.html#a136460a7868b48ef576c0fa505ef96db">cts::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l02141">test_stasis.c:2141</a></div></div>
<div class="ttc" id="stasis_8h_html_aefd78086150c89477f5851f2836e0478"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a></div><div class="ttdeci">const char * stasis_message_type_name(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the name of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message.c:99</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="structtest__data_html"><div class="ttname"><a href="../../dc/d9a/structtest__data.html">test_data</a></div><div class="ttdoc">Sorcery object created based on backend data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02986">res_sorcery_memory_cache.c:2986</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a></div><div class="ttdoc">Holds details about changes to subscriptions for the specified topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00892">stasis.h:892</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a148e968cb2e6176288982274dab428c3"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">stasis_subscription_change::description</a></div><div class="ttdeci">char description[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00895">stasis.h:895</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02436">2436</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/ddc/test_8h_source.html#l00128">AST_TEST_UNREGISTER</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">cache</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../d6/d5d/pjsip__outbound__registrations_8c_source.html#l00042">router</a>, and <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00542">to_ami()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02468">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;{</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(message_type);</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(<a class="code" href="../../d8/d9e/structmessage.html">message</a>);</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(subscription_messages);</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(subscription_pool_messages);</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>);</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(publish_sync);</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(publish_pool);</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(unsubscribe_stops_messages);</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(forward);</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(cache_filter);</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a>);</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(cache_dump);</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(cache_eid_aggregate);</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(<a class="code" href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a>);</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(router_pool);</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(router_cache_updates);</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(interleaving);</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(subscription_interleaving);</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(no_to_json);</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(to_json);</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(no_to_ami);</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(<a class="code" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a>);</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(dtor_order);</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(caching_dtor_order);</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(type_filters);</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(formatter_filters);</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(combo_filters);</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;}</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="pjsip__outbound__registrations_8c_html_a85c07e3e0d15ea99cf0c5dbe1dfdcb24"><div class="ttname"><a href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a></div><div class="ttdeci">static struct stasis_message_router * router</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d5d/pjsip__outbound__registrations_8c_source.html#l00042">pjsip_outbound_registrations.c:42</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="test_8h_html_a79bc64a935b14b1b181156e5ada58ead"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a></div><div class="ttdeci">#define AST_TEST_UNREGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00128">test.h:128</a></div></div>
<div class="ttc" id="res__pjsip__exten__state_8c_html_ae8731a90be4dc2d8272b7dfd8a001d4c"><div class="ttname"><a href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a></div><div class="ttdeci">static void to_ami(struct ast_sip_subscription *sub, struct ast_str **buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00542">res_pjsip_exten_state.c:542</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_aefe318d32c8bb7a9e2025eb146d47781"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#aefe318d32c8bb7a9e2025eb146d47781">cache</a></div><div class="ttdeci">struct ao2_container * cache</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00077">pbx_realtime.c:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = 0 , .description = &quot;Stasis testing&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02504">2504</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02504">2504</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

</div>
</div>
<a id="af39537fae29b48663827e272436b6206"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af39537fae29b48663827e272436b6206">&#9670;&nbsp;</a></span>fake_vtable</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d3e/structstasis__message__vtable.html">stasis_message_vtable</a> fake_vtable</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .to_json = <a class="code" href="../../db/d00/test__stasis_8c.html#a5697b03b92950971980ae4b2b197b824">fake_json</a>,</div><div class="line">   .to_ami = <a class="code" href="../../db/d00/test__stasis_8c.html#ae620b535acff15a9de122d44874c71be">fake_ami</a></div><div class="line">}</div><div class="ttc" id="test__stasis_8c_html_a5697b03b92950971980ae4b2b197b824"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#a5697b03b92950971980ae4b2b197b824">fake_json</a></div><div class="ttdeci">static struct ast_json * fake_json(struct stasis_message *message, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00049">test_stasis.c:49</a></div></div>
<div class="ttc" id="test__stasis_8c_html_ae620b535acff15a9de122d44874c71be"><div class="ttname"><a href="../../db/d00/test__stasis_8c.html#ae620b535acff15a9de122d44874c71be">fake_ami</a></div><div class="ttdeci">static struct ast_manager_event_blob * fake_ami(struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d00/test__stasis_8c_source.html#l00056">test_stasis.c:56</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00072">72</a> of file <a class="el" href="../../db/d00/test__stasis_8c_source.html">test_stasis.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:57 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
