<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: resource_bridges.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li><li class="navelem"><a class="el" href="../../dir_56719ce594c15012aa0938d836a11a62.html">ari</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">resource_bridges.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation for ARI stubs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d36/resource__bridges_8h_source.html">resource_bridges.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d79/stasis_8h_source.html">asterisk/stasis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html">asterisk/stasis_bridges.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d9c/stasis__app_8h_source.html">asterisk/stasis_app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d0b/stasis__app__impl_8h_source.html">asterisk/stasis_app_impl.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d1e/stasis__app__playback_8h_source.html">asterisk/stasis_app_playback.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/dda/stasis__app__recording_8h_source.html">asterisk/stasis_app_recording.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4a/stasis__channels_8h_source.html">asterisk/stasis_channels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/dea/core__unreal_8h_source.html">asterisk/core_unreal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d56/bridge_8h_source.html">asterisk/bridge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d3c/format__cap_8h_source.html">asterisk/format_cap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d4d/file_8h_source.html">asterisk/file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d07/musiconhold_8h_source.html">asterisk/musiconhold.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d1c/format__cache_8h_source.html">asterisk/format_cache.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for resource_bridges.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d90/resource__bridges_8c__incl.png" border="0" usemap="#resource__bridges_8c" alt=""/></div>
<map name="resource__bridges_8c" id="resource__bridges_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="2434,543,2518,569"/>
<area shape="rect" id="node8" href="../../d5/d36/resource__bridges_8h.html" title="Generated file &#45; declares stubs to be implemented in res/ari/resource_bridges.c. " alt="" coords="2877,169,3021,196"/>
<area shape="rect" id="node11" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1925,468,2051,495"/>
<area shape="rect" id="node19" href="../../dc/d4e/stasis__bridges_8h.html" title="asterisk/stasis_bridges.h" alt="" coords="556,87,735,114"/>
<area shape="rect" id="node20" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1667,393,1805,420"/>
<area shape="rect" id="node29" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="2819,468,2981,495"/>
<area shape="rect" id="node34" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="1251,169,1379,196"/>
<area shape="rect" id="node41" href="../../d8/d9c/stasis__app_8h.html" title="Stasis Application API. See Stasis Application API for detailed documentation. " alt="" coords="1787,169,1943,196"/>
<area shape="rect" id="node42" href="../../de/d0b/stasis__app__impl_8h.html" title="Backend API for implementing components of res_stasis. " alt="" coords="1793,80,1937,121"/>
<area shape="rect" id="node43" href="../../d3/d1e/stasis__app__playback_8h.html" title="Stasis Application Playback API. See StasisApplication API&quot; for detailed documentation. " alt="" coords="1961,80,2105,121"/>
<area shape="rect" id="node44" href="../../d2/dda/stasis__app__recording_8h.html" title="Stasis Application Recording API. See StasisApplication API&quot; for detailed documentation. " alt="" coords="1625,80,1769,121"/>
<area shape="rect" id="node46" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="93,468,200,495"/>
<area shape="rect" id="node47" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="1845,319,2035,345"/>
<area shape="rect" id="node48" href="../../de/dea/core__unreal_8h.html" title="Unreal channel derivative framework. " alt="" coords="2231,87,2393,114"/>
<area shape="rect" id="node49" href="../../dc/d07/musiconhold_8h.html" title="Music on hold handling. " alt="" coords="3107,87,3277,114"/>
<area shape="rect" id="node50" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="3301,87,3477,114"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="2277,617,2432,644"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="2457,617,2594,644"/>
<area shape="rect" id="node7" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="2067,617,2202,644"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="2281,692,2428,719"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="2259,841,2402,868"/>
<area shape="rect" id="node9" href="../../d4/d59/ari_8h.html" title="Asterisk RESTful API hooks. " alt="" coords="2877,393,2981,420"/>
<area shape="rect" id="node10" href="../../d4/d05/json_8h.html" title="Asterisk JSON abstraction layer. " alt="" coords="2244,543,2359,569"/>
<area shape="rect" id="node12" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="1926,543,2071,569"/>
<area shape="rect" id="node16" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1341,543,1456,569"/>
<area shape="rect" id="node18" href="../../dd/d20/event_8h.html" title="asterisk/event.h" alt="" coords="2095,543,2219,569"/>
<area shape="rect" id="node13" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1922,767,2035,793"/>
<area shape="rect" id="node14" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1739,617,1890,644"/>
<area shape="rect" id="node15" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="941,692,1091,719"/>
<area shape="rect" id="node17" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="565,617,723,644"/>
<area shape="rect" id="node40" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="438,319,549,345"/>
<area shape="rect" id="node21" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1083,468,1227,495"/>
<area shape="rect" id="node22" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="2637,468,2795,495"/>
<area shape="rect" id="node23" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="2542,543,2677,569"/>
<area shape="rect" id="node24" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1251,468,1415,495"/>
<area shape="rect" id="node25" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="953,543,1079,569"/>
<area shape="rect" id="node26" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="275,468,421,495"/>
<area shape="rect" id="node27" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1571,468,1698,495"/>
<area shape="rect" id="node28" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1440,468,1547,495"/>
<area shape="rect" id="node30" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="2391,468,2561,495"/>
<area shape="rect" id="node31" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="2250,468,2366,495"/>
<area shape="rect" id="node32" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="749,468,907,495"/>
<area shape="rect" id="node33" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="2075,468,2226,495"/>
<area shape="rect" id="node35" href="../../dc/d7a/bridge__features_8h.html" title="Channel Bridging API. " alt="" coords="1362,319,1550,345"/>
<area shape="rect" id="node36" href="../../de/d41/bridge__channel_8h.html" title="asterisk/bridge_channel.h" alt="" coords="1134,244,1319,271"/>
<area shape="rect" id="node37" href="../../dd/dff/bridge__roles_8h.html" title="Channel Bridging Roles API. " alt="" coords="662,319,829,345"/>
<area shape="rect" id="node38" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="999,244,1110,271"/>
<area shape="rect" id="node39" href="../../dd/d1d/uuid_8h.html" title="Universally unique identifier support. " alt="" coords="1344,244,1459,271"/>
<area shape="rect" id="node45" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="557,393,669,420"/>
</map>
</div>
</div>
<p><a href="../../db/d0b/resource__bridges_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd9/structbridge__channel__control__thread__data.html">bridge_channel_control_thread_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/ddb/structcontrol__list.html">control_list</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a4e9e04b77e0516448cac169b394d0041"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041">play_found_result</a> { <a class="el" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a6c93edab2cad92b42b0db7f1801749c1">PLAY_FOUND_SUCCESS</a>, 
<a class="el" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a7d12279ae74467ff9782cf7229d87cb1">PLAY_FOUND_FAILURE</a>, 
<a class="el" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a3ba7c5317551f4c98ad6dd20b643702f">PLAY_FOUND_CHANNEL_UNAVAILABLE</a>
 }</td></tr>
<tr class="separator:a4e9e04b77e0516448cac169b394d0041"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aec25eede83e852fb115980a57abce3b9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#aec25eede83e852fb115980a57abce3b9">ari_bridges_handle_play</a> (const char *args_bridge_id, const char **args_media, size_t args_media_count, const char *args_lang, int args_offset_ms, int args_skipms, const char *args_playback_id, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="separator:aec25eede83e852fb115980a57abce3b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27e3af1ff43b75a922a5d2a7808d0ab"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041">play_found_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#aa27e3af1ff43b75a922a5d2a7808d0ab">ari_bridges_play_found</a> (const char **args_media, size_t args_media_count, const char *args_lang, int args_offset_ms, int args_skipms, const char *args_playback_id, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *found_channel)</td></tr>
<tr class="memdesc:aa27e3af1ff43b75a922a5d2a7808d0ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs common setup for a bridge playback operation with both new controls and when existing controls are found.  <a href="#aa27e3af1ff43b75a922a5d2a7808d0ab">More...</a><br /></td></tr>
<tr class="separator:aa27e3af1ff43b75a922a5d2a7808d0ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a652537da42c72a5179e21a3aab6c015a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a652537da42c72a5179e21a3aab6c015a">ari_bridges_play_helper</a> (const char **args_media, size_t args_media_count, const char *args_lang, int args_offset_ms, int args_skipms, const char *args_playback_id, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge, struct <a class="el" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *control, struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> **json, char **playback_url)</td></tr>
<tr class="memdesc:a652537da42c72a5179e21a3aab6c015a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs common setup for a bridge playback operation with both new controls and when existing controls are found.  <a href="#a652537da42c72a5179e21a3aab6c015a">More...</a><br /></td></tr>
<tr class="separator:a652537da42c72a5179e21a3aab6c015a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ab041124b2954005092b5949e27c70c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a9ab041124b2954005092b5949e27c70c">ari_bridges_play_new</a> (const char **args_media, size_t args_media_count, const char *args_lang, int args_offset_ms, int args_skipms, const char *args_playback_id, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response, struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="separator:a9ab041124b2954005092b5949e27c70c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0403c1a7681a7416757b93ceacd60116"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a0403c1a7681a7416757b93ceacd60116">ast_ari_bridges_add_channel</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d8/d74/structast__ari__bridges__add__channel__args.html">ast_ari_bridges_add_channel_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a0403c1a7681a7416757b93ceacd60116"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a channel to a bridge.  <a href="#a0403c1a7681a7416757b93ceacd60116">More...</a><br /></td></tr>
<tr class="separator:a0403c1a7681a7416757b93ceacd60116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ee56bdf89bdc71810bb24f8777e06e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a0ee56bdf89bdc71810bb24f8777e06e3">ast_ari_bridges_clear_video_source</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../df/d52/structast__ari__bridges__clear__video__source__args.html">ast_ari_bridges_clear_video_source_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a0ee56bdf89bdc71810bb24f8777e06e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes any explicit video source in a multi-party mixing bridge. This operation has no effect on bridges with two or fewer participants. When no explicit video source is set, talk detection will be used to determine the active video stream.  <a href="#a0ee56bdf89bdc71810bb24f8777e06e3">More...</a><br /></td></tr>
<tr class="separator:a0ee56bdf89bdc71810bb24f8777e06e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a523ae80d4a5bc9ff053a5af5eb31a556"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a523ae80d4a5bc9ff053a5af5eb31a556">ast_ari_bridges_create</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d2/d20/structast__ari__bridges__create__args.html">ast_ari_bridges_create_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a523ae80d4a5bc9ff053a5af5eb31a556"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new bridge.  <a href="#a523ae80d4a5bc9ff053a5af5eb31a556">More...</a><br /></td></tr>
<tr class="separator:a523ae80d4a5bc9ff053a5af5eb31a556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f5335612f3cb73a10e21bf298ca9df1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a5f5335612f3cb73a10e21bf298ca9df1">ast_ari_bridges_create_with_id</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d2/d01/structast__ari__bridges__create__with__id__args.html">ast_ari_bridges_create_with_id_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a5f5335612f3cb73a10e21bf298ca9df1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new bridge or updates an existing one.  <a href="#a5f5335612f3cb73a10e21bf298ca9df1">More...</a><br /></td></tr>
<tr class="separator:a5f5335612f3cb73a10e21bf298ca9df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4da710101260eba463ae3b8147a99299"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a4da710101260eba463ae3b8147a99299">ast_ari_bridges_destroy</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d1/dad/structast__ari__bridges__destroy__args.html">ast_ari_bridges_destroy_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a4da710101260eba463ae3b8147a99299"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shut down a bridge.  <a href="#a4da710101260eba463ae3b8147a99299">More...</a><br /></td></tr>
<tr class="separator:a4da710101260eba463ae3b8147a99299"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a110b4761c0939a7fad0a1968304e8fa2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a110b4761c0939a7fad0a1968304e8fa2">ast_ari_bridges_get</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../dd/de1/structast__ari__bridges__get__args.html">ast_ari_bridges_get_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a110b4761c0939a7fad0a1968304e8fa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get bridge details.  <a href="#a110b4761c0939a7fad0a1968304e8fa2">More...</a><br /></td></tr>
<tr class="separator:a110b4761c0939a7fad0a1968304e8fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af456b35967dc37f869de264ee800f2b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#af456b35967dc37f869de264ee800f2b8">ast_ari_bridges_list</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../de/d9b/structast__ari__bridges__list__args.html">ast_ari_bridges_list_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:af456b35967dc37f869de264ee800f2b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">List all active bridges in Asterisk.  <a href="#af456b35967dc37f869de264ee800f2b8">More...</a><br /></td></tr>
<tr class="separator:af456b35967dc37f869de264ee800f2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b2031de9a597eb05f35b838a3def04f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a3b2031de9a597eb05f35b838a3def04f">ast_ari_bridges_play</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../da/dc0/structast__ari__bridges__play__args.html">ast_ari_bridges_play_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a3b2031de9a597eb05f35b838a3def04f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start playback of media on a bridge.  <a href="#a3b2031de9a597eb05f35b838a3def04f">More...</a><br /></td></tr>
<tr class="separator:a3b2031de9a597eb05f35b838a3def04f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2735d35a3b40f4b0ee7c1a8648ee172d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a2735d35a3b40f4b0ee7c1a8648ee172d">ast_ari_bridges_play_with_id</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../db/d94/structast__ari__bridges__play__with__id__args.html">ast_ari_bridges_play_with_id_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a2735d35a3b40f4b0ee7c1a8648ee172d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start playback of media on a bridge.  <a href="#a2735d35a3b40f4b0ee7c1a8648ee172d">More...</a><br /></td></tr>
<tr class="separator:a2735d35a3b40f4b0ee7c1a8648ee172d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accb656d541088b338b07ca5130b57054"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#accb656d541088b338b07ca5130b57054">ast_ari_bridges_record</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d1/d6f/structast__ari__bridges__record__args.html">ast_ari_bridges_record_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:accb656d541088b338b07ca5130b57054"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a recording.  <a href="#accb656d541088b338b07ca5130b57054">More...</a><br /></td></tr>
<tr class="separator:accb656d541088b338b07ca5130b57054"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5181cdf4f8a92ce2db79103c67227305"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a5181cdf4f8a92ce2db79103c67227305">ast_ari_bridges_remove_channel</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d6/d3b/structast__ari__bridges__remove__channel__args.html">ast_ari_bridges_remove_channel_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:a5181cdf4f8a92ce2db79103c67227305"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a channel from a bridge.  <a href="#a5181cdf4f8a92ce2db79103c67227305">More...</a><br /></td></tr>
<tr class="separator:a5181cdf4f8a92ce2db79103c67227305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa147e50296c4ad607180679411ca01f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#aa147e50296c4ad607180679411ca01f3">ast_ari_bridges_set_video_source</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d6/def/structast__ari__bridges__set__video__source__args.html">ast_ari_bridges_set_video_source_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:aa147e50296c4ad607180679411ca01f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a channel as the video source in a multi-party mixing bridge. This operation has no effect on bridges with two or fewer participants.  <a href="#aa147e50296c4ad607180679411ca01f3">More...</a><br /></td></tr>
<tr class="separator:aa147e50296c4ad607180679411ca01f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad242de45e68c1b1be9ff5ca70f2b89c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#ad242de45e68c1b1be9ff5ca70f2b89c9">ast_ari_bridges_start_moh</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d9/dc7/structast__ari__bridges__start__moh__args.html">ast_ari_bridges_start_moh_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:ad242de45e68c1b1be9ff5ca70f2b89c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Play music on hold to a bridge or change the MOH class that is playing.  <a href="#ad242de45e68c1b1be9ff5ca70f2b89c9">More...</a><br /></td></tr>
<tr class="separator:ad242de45e68c1b1be9ff5ca70f2b89c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeb66d1ab0d54ec71f1dd07aa63bde90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#aeeb66d1ab0d54ec71f1dd07aa63bde90">ast_ari_bridges_stop_moh</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers, struct <a class="el" href="../../d4/dad/structast__ari__bridges__stop__moh__args.html">ast_ari_bridges_stop_moh_args</a> *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response)</td></tr>
<tr class="memdesc:aeeb66d1ab0d54ec71f1dd07aa63bde90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop playing music on hold to a bridge.  <a href="#aeeb66d1ab0d54ec71f1dd07aa63bde90">More...</a><br /></td></tr>
<tr class="separator:aeeb66d1ab0d54ec71f1dd07aa63bde90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac6fec2e40a46e9a84b477529d94da7d"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#aac6fec2e40a46e9a84b477529d94da7d">bridge_channel_control_thread</a> (void *data)</td></tr>
<tr class="separator:aac6fec2e40a46e9a84b477529d94da7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43e560d13bcb59bd243cc26cd664c14e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a43e560d13bcb59bd243cc26cd664c14e">bridge_set_video_source_cb</a> (struct <a class="el" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *control, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, void *data)</td></tr>
<tr class="separator:a43e560d13bcb59bd243cc26cd664c14e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89da67dec9c5f52bf6b1db891d586ed6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a89da67dec9c5f52bf6b1db891d586ed6">check_add_remove_channel</a> (struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response, struct <a class="el" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *control, enum <a class="el" href="../../d8/d9c/stasis__app_8h.html#ad8806ce156147c9a6daff8a6c9294211">stasis_app_control_channel_result</a> <a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>)</td></tr>
<tr class="separator:a89da67dec9c5f52bf6b1db891d586ed6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a953b9fe725211bf8fa11fca96453d6ef"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/ddb/structcontrol__list.html">control_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a953b9fe725211bf8fa11fca96453d6ef">control_list_create</a> (struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response, size_t count, const char **<a class="el" href="../../d0/d8a/muted_8c.html#abc8c1f6a3044ad58c3212a3ea0ecd5c5">channels</a>)</td></tr>
<tr class="separator:a953b9fe725211bf8fa11fca96453d6ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c482199b65ec24a5a3e6642080a455c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#a3c482199b65ec24a5a3e6642080a455c">control_list_dtor</a> (void *obj)</td></tr>
<tr class="separator:a3c482199b65ec24a5a3e6642080a455c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2bbc89d879fa02403a3ae90bda47b3c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a> (struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response, const char *bridge_id)</td></tr>
<tr class="memdesc:ac2bbc89d879fa02403a3ae90bda47b3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds a bridge, filling the response with an error, if appropriate.  <a href="#ac2bbc89d879fa02403a3ae90bda47b3c">More...</a><br /></td></tr>
<tr class="separator:ac2bbc89d879fa02403a3ae90bda47b3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab32e8211abc8373be1cefcec607db5f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#aab32e8211abc8373be1cefcec607db5f">find_channel_control</a> (struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *response, const char *channel_id)</td></tr>
<tr class="memdesc:aab32e8211abc8373be1cefcec607db5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the control object for a channel, filling the response with an error, if appropriate.  <a href="#aab32e8211abc8373be1cefcec607db5f">More...</a><br /></td></tr>
<tr class="separator:aab32e8211abc8373be1cefcec607db5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab72d3618da7594cf41aa89115b7f3298"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d0b/resource__bridges_8c.html#ab72d3618da7594cf41aa89115b7f3298">prepare_bridge_media_channel</a> (const char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="separator:ab72d3618da7594cf41aa89115b7f3298"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation for ARI stubs. </p>
<dl class="section author"><dt>Author</dt><dd>David M. Lee, II <a href="#" onclick="location.href='mai'+'lto:'+'dle'+'e@'+'dig'+'iu'+'m.c'+'om'; return false;">dlee@<span style="display: none;">.nosp@m.</span>digi<span style="display: none;">.nosp@m.</span>um.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a4e9e04b77e0516448cac169b394d0041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e9e04b77e0516448cac169b394d0041">&#9670;&nbsp;</a></span>play_found_result</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041">play_found_result</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a4e9e04b77e0516448cac169b394d0041a6c93edab2cad92b42b0db7f1801749c1"></a>PLAY_FOUND_SUCCESS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4e9e04b77e0516448cac169b394d0041a7d12279ae74467ff9782cf7229d87cb1"></a>PLAY_FOUND_FAILURE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4e9e04b77e0516448cac169b394d0041a3ba7c5317551f4c98ad6dd20b643702f"></a>PLAY_FOUND_CHANNEL_UNAVAILABLE&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00503">503</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                       {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   <a class="code" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a6c93edab2cad92b42b0db7f1801749c1">PLAY_FOUND_SUCCESS</a>,</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   <a class="code" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a7d12279ae74467ff9782cf7229d87cb1">PLAY_FOUND_FAILURE</a>,</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <a class="code" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a3ba7c5317551f4c98ad6dd20b643702f">PLAY_FOUND_CHANNEL_UNAVAILABLE</a>,</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;};</div><div class="ttc" id="resource__bridges_8c_html_a4e9e04b77e0516448cac169b394d0041a7d12279ae74467ff9782cf7229d87cb1"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a7d12279ae74467ff9782cf7229d87cb1">PLAY_FOUND_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00505">resource_bridges.c:505</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_a4e9e04b77e0516448cac169b394d0041a3ba7c5317551f4c98ad6dd20b643702f"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a3ba7c5317551f4c98ad6dd20b643702f">PLAY_FOUND_CHANNEL_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00506">resource_bridges.c:506</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_a4e9e04b77e0516448cac169b394d0041a6c93edab2cad92b42b0db7f1801749c1"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a6c93edab2cad92b42b0db7f1801749c1">PLAY_FOUND_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00504">resource_bridges.c:504</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aec25eede83e852fb115980a57abce3b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec25eede83e852fb115980a57abce3b9">&#9670;&nbsp;</a></span>ari_bridges_handle_play()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ari_bridges_handle_play </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_bridge_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>args_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>args_media_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>args_offset_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>args_skipms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_playback_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00567">567</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00528">ari_bridges_play_found()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00407">ari_bridges_play_new()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00057">find_bridge()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00506">PLAY_FOUND_CHANNEL_UNAVAILABLE</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00759">stasis_app_bridge_playback_channel_find()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00606">ast_ari_bridges_play()</a>, and <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00620">ast_ari_bridges_play_with_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;{</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, bridge, <a class="code" href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a>(response, args_bridge_id), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *play_channel;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(response != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   <span class="keywordflow">while</span> ((play_channel = <a class="code" href="../../d8/d9c/stasis__app_8h.html#a25fa5ed44ce632f93f089310a83a1fc1">stasis_app_bridge_playback_channel_find</a>(bridge))) {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <span class="comment">/* If ari_bridges_play_found fails because the channel is unavailable for</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">       * playback, The channel will be removed from the playback list soon. We</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">       * can keep trying to get channels from the list until we either get one</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">       * that will work or else there isn&#39;t a channel for this bridge anymore,</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">       * in which case we&#39;ll revert to ari_bridges_play_new.</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/d0b/resource__bridges_8c.html#aa27e3af1ff43b75a922a5d2a7808d0ab">ari_bridges_play_found</a>(args_media, args_media_count, args_lang,</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            args_offset_ms, args_skipms, args_playback_id, response,bridge,</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            play_channel) == <a class="code" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a3ba7c5317551f4c98ad6dd20b643702f">PLAY_FOUND_CHANNEL_UNAVAILABLE</a>) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <a class="code" href="../../db/d0b/resource__bridges_8c.html#a9ab041124b2954005092b5949e27c70c">ari_bridges_play_new</a>(args_media, args_media_count, args_lang, args_offset_ms,</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      args_skipms, args_playback_id, response, bridge);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_ac2bbc89d879fa02403a3ae90bda47b3c"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a></div><div class="ttdeci">static struct ast_bridge * find_bridge(struct ast_ari_response *response, const char *bridge_id)</div><div class="ttdoc">Finds a bridge, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00057">resource_bridges.c:57</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_a9ab041124b2954005092b5949e27c70c"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a9ab041124b2954005092b5949e27c70c">ari_bridges_play_new</a></div><div class="ttdeci">static void ari_bridges_play_new(const char **args_media, size_t args_media_count, const char *args_lang, int args_offset_ms, int args_skipms, const char *args_playback_id, struct ast_ari_response *response, struct ast_bridge *bridge)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00407">resource_bridges.c:407</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_a4e9e04b77e0516448cac169b394d0041a3ba7c5317551f4c98ad6dd20b643702f"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a3ba7c5317551f4c98ad6dd20b643702f">PLAY_FOUND_CHANNEL_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00506">resource_bridges.c:506</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_aa27e3af1ff43b75a922a5d2a7808d0ab"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#aa27e3af1ff43b75a922a5d2a7808d0ab">ari_bridges_play_found</a></div><div class="ttdeci">static enum play_found_result ari_bridges_play_found(const char **args_media, size_t args_media_count, const char *args_lang, int args_offset_ms, int args_skipms, const char *args_playback_id, struct ast_ari_response *response, struct ast_bridge *bridge, struct ast_channel *found_channel)</div><div class="ttdoc">Performs common setup for a bridge playback operation with both new controls and when existing contro...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00528">resource_bridges.c:528</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a25fa5ed44ce632f93f089310a83a1fc1"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a25fa5ed44ce632f93f089310a83a1fc1">stasis_app_bridge_playback_channel_find</a></div><div class="ttdeci">struct ast_channel * stasis_app_bridge_playback_channel_find(struct ast_bridge *bridge)</div><div class="ttdoc">Finds an existing ARI playback channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00759">res_stasis.c:759</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa27e3af1ff43b75a922a5d2a7808d0ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa27e3af1ff43b75a922a5d2a7808d0ab">&#9670;&nbsp;</a></span>ari_bridges_play_found()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041">play_found_result</a> ari_bridges_play_found </td>
          <td>(</td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>args_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>args_media_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>args_offset_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>args_skipms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_playback_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>found_channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs common setup for a bridge playback operation with both new controls and when existing controls are found. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args_media</td><td>medias to play </td></tr>
    <tr><td class="paramname">args_media_count</td><td>number of media items in <code>media</code> </td></tr>
    <tr><td class="paramname">args_lang</td><td>language string split from arguments </td></tr>
    <tr><td class="paramname">args_offset_ms</td><td>milliseconds offset split from arguments </td></tr>
    <tr><td class="paramname">args_playback_id</td><td>string to use for playback split from arguments (null valid) </td></tr>
    <tr><td class="paramname">response</td><td>ARI response being built </td></tr>
    <tr><td class="paramname">bridge</td><td>Bridge the playback is being peformed on </td></tr>
    <tr><td class="paramname">found_channel</td><td>The channel that was found controlling playback</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PLAY_FOUND_SUCCESS</td><td>The operation was successful </td></tr>
    <tr><td class="paramname">PLAY_FOUND_FAILURE</td><td>The operation failed (terminal failure) </td></tr>
    <tr><td class="paramname">PLAY_FOUND_CHANNEL_UNAVAILABLE</td><td>The operation failed because the channel requested to playback with is breaking down. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00528">528</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00357">ari_bridges_play_helper()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00305">ast_ari_response_created()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00283">bridge_channel_control_thread_data::control</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00506">PLAY_FOUND_CHANNEL_UNAVAILABLE</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00505">PLAY_FOUND_FAILURE</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00504">PLAY_FOUND_SUCCESS</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00338">stasis_app_control_find_by_channel()</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l01273">stasis_app_control_is_done()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00567">ari_bridges_handle_play()</a>.</p>
<div class="fragment"><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;{</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, play_channel, found_channel, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, playback_url, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, json, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   control = <a class="code" href="../../d8/d9c/stasis__app_8h.html#a8623f7f06a4475af1def681db3c0949e">stasis_app_control_find_by_channel</a>(play_channel);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   <span class="keywordflow">if</span> (!control) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a3ba7c5317551f4c98ad6dd20b643702f">PLAY_FOUND_CHANNEL_UNAVAILABLE</a>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;   }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(control);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9c/stasis__app_8h.html#ab3b9b43f053ce8e30751424af42c4e8f">stasis_app_control_is_done</a>(control)) {</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="comment">/* We failed to queue the action. Bailout and return that we aren&#39;t terminal. */</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(control);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a3ba7c5317551f4c98ad6dd20b643702f">PLAY_FOUND_CHANNEL_UNAVAILABLE</a>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/d0b/resource__bridges_8c.html#a652537da42c72a5179e21a3aab6c015a">ari_bridges_play_helper</a>(args_media, args_media_count,</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;         args_lang, args_offset_ms, args_skipms, args_playback_id,</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;         response, bridge, control, &amp;json, &amp;playback_url)) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(control);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a7d12279ae74467ff9782cf7229d87cb1">PLAY_FOUND_FAILURE</a>;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   }</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(control);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a5270232ee10a8984c7717eacf2dd9d61">ast_ari_response_created</a>(response, playback_url, <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(json));</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a6c93edab2cad92b42b0db7f1801749c1">PLAY_FOUND_SUCCESS</a>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="stasis__app_8h_html_ab3b9b43f053ce8e30751424af42c4e8f"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#ab3b9b43f053ce8e30751424af42c4e8f">stasis_app_control_is_done</a></div><div class="ttdeci">int stasis_app_control_is_done(struct stasis_app_control *control)</div><div class="ttdoc">Check if a control is marked as done. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l01273">res_stasis.c:1273</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_a4e9e04b77e0516448cac169b394d0041a7d12279ae74467ff9782cf7229d87cb1"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a7d12279ae74467ff9782cf7229d87cb1">PLAY_FOUND_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00505">resource_bridges.c:505</a></div></div>
<div class="ttc" id="ari_8h_html_a5270232ee10a8984c7717eacf2dd9d61"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a5270232ee10a8984c7717eacf2dd9d61">ast_ari_response_created</a></div><div class="ttdeci">void ast_ari_response_created(struct ast_ari_response *response, const char *url, struct ast_json *message)</div><div class="ttdoc">Fill in a Created (201) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00305">res_ari.c:305</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_a652537da42c72a5179e21a3aab6c015a"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a652537da42c72a5179e21a3aab6c015a">ari_bridges_play_helper</a></div><div class="ttdeci">static int ari_bridges_play_helper(const char **args_media, size_t args_media_count, const char *args_lang, int args_offset_ms, int args_skipms, const char *args_playback_id, struct ast_ari_response *response, struct ast_bridge *bridge, struct stasis_app_control *control, struct ast_json **json, char **playback_url)</div><div class="ttdoc">Performs common setup for a bridge playback operation with both new controls and when existing contro...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00357">resource_bridges.c:357</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_a4e9e04b77e0516448cac169b394d0041a3ba7c5317551f4c98ad6dd20b643702f"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a3ba7c5317551f4c98ad6dd20b643702f">PLAY_FOUND_CHANNEL_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00506">resource_bridges.c:506</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_a4e9e04b77e0516448cac169b394d0041a6c93edab2cad92b42b0db7f1801749c1"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a4e9e04b77e0516448cac169b394d0041a6c93edab2cad92b42b0db7f1801749c1">PLAY_FOUND_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00504">resource_bridges.c:504</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="stasis__app_8h_html_a8623f7f06a4475af1def681db3c0949e"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a8623f7f06a4475af1def681db3c0949e">stasis_app_control_find_by_channel</a></div><div class="ttdeci">struct stasis_app_control * stasis_app_control_find_by_channel(const struct ast_channel *chan)</div><div class="ttdoc">Returns the handler for the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00338">res_stasis.c:338</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a652537da42c72a5179e21a3aab6c015a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a652537da42c72a5179e21a3aab6c015a">&#9670;&nbsp;</a></span>ari_bridges_play_helper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ari_bridges_play_helper </td>
          <td>(</td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>args_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>args_media_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>args_offset_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>args_skipms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_playback_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *&#160;</td>
          <td class="paramname"><em>control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> **&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>playback_url</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs common setup for a bridge playback operation with both new controls and when existing controls are found. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args_media</td><td>medias to play </td></tr>
    <tr><td class="paramname">args_media_count</td><td>number of media items in <code>media</code> </td></tr>
    <tr><td class="paramname">args_lang</td><td>language string split from arguments </td></tr>
    <tr><td class="paramname">args_offset_ms</td><td>milliseconds offset split from arguments </td></tr>
    <tr><td class="paramname">args_playback_id</td><td>string to use for playback split from arguments (null valid) </td></tr>
    <tr><td class="paramname">response</td><td>ARI response being built </td></tr>
    <tr><td class="paramname">bridge</td><td>Bridge the playback is being peformed on </td></tr>
    <tr><td class="paramname">control</td><td>Control being used for the playback channel </td></tr>
    <tr><td class="paramname">json</td><td>contents of the response to ARI </td></tr>
    <tr><td class="paramname">playback_url</td><td>stores playback URL for use with response</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>operation failed </td></tr>
    <tr><td class="paramname">operation</td><td>was successful </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00357">357</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00117">language</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../de/de3/control_8c_source.html#l00860">stasis_app_control_get_snapshot()</a>, <a class="el" href="../../d7/de1/res__stasis__playback_8c_source.html#l00471">stasis_app_control_play_uri()</a>, <a class="el" href="../../d7/de1/res__stasis__playback_8c_source.html#l00543">stasis_app_playback_get_id()</a>, <a class="el" href="../../d7/de1/res__stasis__playback_8c_source.html#l00555">stasis_app_playback_to_json()</a>, <a class="el" href="../../d3/d1e/stasis__app__playback_8h_source.html#l00078">STASIS_PLAYBACK_TARGET_BRIDGE</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00528">ari_bridges_play_found()</a>, and <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00407">ari_bridges_play_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;{</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../de/dab/structstasis__app__playback.html">stasis_app_playback</a> *, playback, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   snapshot = <a class="code" href="../../d8/d9c/stasis__app_8h.html#a2e17c5418a4753bb1229f031041a645c">stasis_app_control_get_snapshot</a>(control);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Error&quot;</span>, <span class="stringliteral">&quot;Failed to get control snapshot&quot;</span>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   language = <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(args_lang, snapshot-&gt;base-&gt;language);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   playback = <a class="code" href="../../d3/d1e/stasis__app__playback_8h.html#ad893b5975e16139b7c99527f78f24584">stasis_app_control_play_uri</a>(control, args_media, args_media_count,</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      language, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, <a class="code" href="../../d3/d1e/stasis__app__playback_8h.html#a042f8aec8be0761c5ebc29940de91570aaf2529e6b2299487d39104fe749d5f45">STASIS_PLAYBACK_TARGET_BRIDGE</a>, args_skipms,</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      args_offset_ms, args_playback_id);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <span class="keywordflow">if</span> (!playback) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(playback_url, <span class="stringliteral">&quot;/playbacks/%s&quot;</span>,</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;         <a class="code" href="../../d3/d1e/stasis__app__playback_8h.html#a4fbd4b95ffd11a40f0734601eb88b4a8">stasis_app_playback_get_id</a>(playback)) == -1) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   *json = <a class="code" href="../../d3/d1e/stasis__app__playback_8h.html#af7e06669e968c82d09a697689ba92062">stasis_app_playback_to_json</a>(playback);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <span class="keywordflow">if</span> (!*json) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div><div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="stasis__app__playback_8h_html_af7e06669e968c82d09a697689ba92062"><div class="ttname"><a href="../../d3/d1e/stasis__app__playback_8h.html#af7e06669e968c82d09a697689ba92062">stasis_app_playback_to_json</a></div><div class="ttdeci">struct ast_json * stasis_app_playback_to_json(const struct stasis_app_playback *playback)</div><div class="ttdoc">Convert a playback to its JSON representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de1/res__stasis__playback_8c_source.html#l00555">res_stasis_playback.c:555</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="stasis__app__playback_8h_html_a4fbd4b95ffd11a40f0734601eb88b4a8"><div class="ttname"><a href="../../d3/d1e/stasis__app__playback_8h.html#a4fbd4b95ffd11a40f0734601eb88b4a8">stasis_app_playback_get_id</a></div><div class="ttdeci">const char * stasis_app_playback_get_id(struct stasis_app_playback *playback)</div><div class="ttdoc">Gets the unique id of a playback object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de1/res__stasis__playback_8c_source.html#l00543">res_stasis_playback.c:543</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_adf416dc058363e2fd5750c77e2d78bee"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a></div><div class="ttdeci">static char language[MAX_LANGUAGE]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00117">chan_alsa.c:117</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a2e17c5418a4753bb1229f031041a645c"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a2e17c5418a4753bb1229f031041a645c">stasis_app_control_get_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * stasis_app_control_get_snapshot(const struct stasis_app_control *control)</div><div class="ttdoc">Returns the most recent snapshot for the associated channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00860">control.c:860</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="stasis__app__playback_8h_html_a042f8aec8be0761c5ebc29940de91570aaf2529e6b2299487d39104fe749d5f45"><div class="ttname"><a href="../../d3/d1e/stasis__app__playback_8h.html#a042f8aec8be0761c5ebc29940de91570aaf2529e6b2299487d39104fe749d5f45">STASIS_PLAYBACK_TARGET_BRIDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1e/stasis__app__playback_8h_source.html#l00078">stasis_app_playback.h:78</a></div></div>
<div class="ttc" id="stasis__app__playback_8h_html_ad893b5975e16139b7c99527f78f24584"><div class="ttname"><a href="../../d3/d1e/stasis__app__playback_8h.html#ad893b5975e16139b7c99527f78f24584">stasis_app_control_play_uri</a></div><div class="ttdeci">struct stasis_app_playback * stasis_app_control_play_uri(struct stasis_app_control *control, const char **media, size_t media_count, const char *language, const char *target_id, enum stasis_app_playback_target_type target_type, int skipms, long offsetms, const char *id)</div><div class="ttdoc">Play a file to the control&amp;#39;s channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de1/res__stasis__playback_8c_source.html#l00471">res_stasis_playback.c:471</a></div></div>
<div class="ttc" id="structstasis__app__playback_html"><div class="ttname"><a href="../../de/dab/structstasis__app__playback.html">stasis_app_playback</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de1/res__stasis__playback_8c_source.html#l00068">res_stasis_playback.c:68</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ab041124b2954005092b5949e27c70c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ab041124b2954005092b5949e27c70c">&#9670;&nbsp;</a></span>ari_bridges_play_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ari_bridges_play_new </td>
          <td>(</td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>args_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>args_media_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>args_offset_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>args_skipms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args_playback_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00407">407</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00357">ari_bridges_play_helper()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00305">ast_ari_response_created()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00067">AST_BRIDGE_CHANNEL_FLAG_IMMOVABLE</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00065">AST_BRIDGE_CHANNEL_FLAG_LONELY</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">ast_bridge_topic()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01502">ast_channel_topic()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00563">ast_pthread_create_detached</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l00928">ast_unreal_channel_push_to_bridge()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00282">bridge_channel_control_thread_data::bridge_channel</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00288">bridge_channel_control_thread()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00285">bridge_channel_control_thread_data::bridge_id</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00283">bridge_channel_control_thread_data::control</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00284">bridge_channel_control_thread_data::forward</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00314">prepare_bridge_media_channel()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00705">stasis_app_bridge_playback_channel_add()</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00743">stasis_app_bridge_playback_channel_remove()</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00333">stasis_app_control_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01578">stasis_forward_all()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">stasis_forward_cancel()</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00567">ari_bridges_handle_play()</a>.</p>
<div class="fragment"><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;{</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, play_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, json, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *, channel_forward, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, playback_url, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *channel_topic;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *bridge_topic;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html">bridge_channel_control_thread_data</a> *thread_data;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   pthread_t threadid;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <span class="keywordflow">if</span> (!(play_channel = <a class="code" href="../../db/d0b/resource__bridges_8c.html#ab72d3618da7594cf41aa89115b7f3298">prepare_bridge_media_channel</a>(<span class="stringliteral">&quot;Announcer&quot;</span>))) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Error&quot;</span>, <span class="stringliteral">&quot;Could not create playback channel&quot;</span>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Created announcer channel &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(play_channel));</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   bridge_topic = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(bridge);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   channel_topic = <a class="code" href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a>(play_channel);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <span class="comment">/* Forward messages from the playback channel topic to the bridge topic so that anything listening for</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">    * messages on the bridge topic will receive the playback start/stop messages. Other messages that would</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">    * go to this channel will be suppressed since the channel is marked as internal.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <span class="keywordflow">if</span> (!bridge_topic || !channel_topic || !(channel_forward = <a class="code" href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a>(channel_topic, bridge_topic))) {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Error&quot;</span>, <span class="stringliteral">&quot;Could not forward playback channel stasis messages to bridge topic&quot;</span>);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   }</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/dea/core__unreal_8h.html#a9b227b77345689fc4278e0d0f287f85e">ast_unreal_channel_push_to_bridge</a>(play_channel, bridge,</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a0e985ea384c79e5e35055ecc0ffb2c57">AST_BRIDGE_CHANNEL_FLAG_IMMOVABLE</a> | <a class="code" href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a29fbd7797e61564f5f40c3361e7f4fc2">AST_BRIDGE_CHANNEL_FLAG_LONELY</a>)) {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Error&quot;</span>, <span class="stringliteral">&quot;Failed to put playback channel into the bridge&quot;</span>);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   }</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   <a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a> = <a class="code" href="../../d8/d9c/stasis__app_8h.html#ae9f63d3e139d209a4aca4405e8031c6a">stasis_app_control_create</a>(play_channel);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a>);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/d0b/resource__bridges_8c.html#a652537da42c72a5179e21a3aab6c015a">ari_bridges_play_helper</a>(args_media, args_media_count, args_lang,</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;         args_offset_ms, args_skipms, args_playback_id, response, bridge,</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;         <a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a>, &amp;json, &amp;playback_url)) {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a>);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a>);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9c/stasis__app_8h.html#a982a6980aa99f3e44158ab610808addb">stasis_app_bridge_playback_channel_add</a>(bridge, play_channel, <a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a>)) {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <span class="comment">/* Give play_channel and control reference to the thread data */</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   thread_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*thread_data) + strlen(bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>) + 1);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   <span class="keywordflow">if</span> (!thread_data) {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <a class="code" href="../../d8/d9c/stasis__app_8h.html#a015fc5f54ed4261703fb8e7e307f012e">stasis_app_bridge_playback_channel_remove</a>((<span class="keywordtype">char</span> *)bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, <a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a>);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   thread_data-&gt;<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#a347350dd844369daf6576ddc72663598">bridge_channel</a> = play_channel;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   thread_data-&gt;<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a> = <a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   thread_data-&gt;<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afd101b3d2cc1eb673b30afb631718b79">forward</a> = channel_forward;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;   <span class="comment">/* Safe */</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   strcpy(thread_data-&gt;<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#a118fa444f5a7f5f25406b1ec0d06af3a">bridge_id</a>, bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a>(&amp;threadid, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../db/d0b/resource__bridges_8c.html#aac6fec2e40a46e9a84b477529d94da7d">bridge_channel_control_thread</a>, thread_data)) {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <a class="code" href="../../d8/d9c/stasis__app_8h.html#a015fc5f54ed4261703fb8e7e307f012e">stasis_app_bridge_playback_channel_remove</a>((<span class="keywordtype">char</span> *)bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, <a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a>);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(thread_data);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <span class="comment">/* These are owned by the other thread now, so we don&#39;t want RAII_VAR disposing of them. */</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   play_channel = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   channel_forward = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a5270232ee10a8984c7717eacf2dd9d61">ast_ari_response_created</a>(response, playback_url, <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(json));</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div><div class="ttc" id="structbridge__channel__control__thread__data_html_afd101b3d2cc1eb673b30afb631718b79"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html#afd101b3d2cc1eb673b30afb631718b79">bridge_channel_control_thread_data::forward</a></div><div class="ttdeci">struct stasis_forward * forward</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00284">resource_bridges.c:284</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="utils_8h_html_a832647380b1f97e7ac1b4492f8816d46"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a></div><div class="ttdeci">#define ast_pthread_create_detached(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00563">utils.h:563</a></div></div>
<div class="ttc" id="structbridge__channel__control__thread__data_html_a118fa444f5a7f5f25406b1ec0d06af3a"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html#a118fa444f5a7f5f25406b1ec0d06af3a">bridge_channel_control_thread_data::bridge_id</a></div><div class="ttdeci">char bridge_id[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00285">resource_bridges.c:285</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="bridge__features_8h_html_adb39f3c49f940cca855ef8ae3dfc5f77a29fbd7797e61564f5f40c3361e7f4fc2"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a29fbd7797e61564f5f40c3361e7f4fc2">AST_BRIDGE_CHANNEL_FLAG_LONELY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00065">bridge_features.h:65</a></div></div>
<div class="ttc" id="stasis__app_8h_html_ae9f63d3e139d209a4aca4405e8031c6a"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#ae9f63d3e139d209a4aca4405e8031c6a">stasis_app_control_create</a></div><div class="ttdeci">struct stasis_app_control * stasis_app_control_create(struct ast_channel *chan)</div><div class="ttdoc">Creates a control handler for a channel that isn&amp;#39;t in a stasis app. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00333">res_stasis.c:333</a></div></div>
<div class="ttc" id="ari_8h_html_a5270232ee10a8984c7717eacf2dd9d61"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a5270232ee10a8984c7717eacf2dd9d61">ast_ari_response_created</a></div><div class="ttdeci">void ast_ari_response_created(struct ast_ari_response *response, const char *url, struct ast_json *message)</div><div class="ttdoc">Fill in a Created (201) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00305">res_ari.c:305</a></div></div>
<div class="ttc" id="structbridge__channel__control__thread__data_html"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html">bridge_channel_control_thread_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00281">resource_bridges.c:281</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a015fc5f54ed4261703fb8e7e307f012e"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a015fc5f54ed4261703fb8e7e307f012e">stasis_app_bridge_playback_channel_remove</a></div><div class="ttdeci">void stasis_app_bridge_playback_channel_remove(char *bridge_id, struct stasis_app_control *control)</div><div class="ttdoc">remove channel from list of ARI playback channels for bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00743">res_stasis.c:743</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="bridge__features_8h_html_adb39f3c49f940cca855ef8ae3dfc5f77a0e985ea384c79e5e35055ecc0ffb2c57"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a0e985ea384c79e5e35055ecc0ffb2c57">AST_BRIDGE_CHANNEL_FLAG_IMMOVABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00067">bridge_features.h:67</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_aac6fec2e40a46e9a84b477529d94da7d"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#aac6fec2e40a46e9a84b477529d94da7d">bridge_channel_control_thread</a></div><div class="ttdeci">static void * bridge_channel_control_thread(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00288">resource_bridges.c:288</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a9b227b77345689fc4278e0d0f287f85e"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a9b227b77345689fc4278e0d0f287f85e">ast_unreal_channel_push_to_bridge</a></div><div class="ttdeci">int ast_unreal_channel_push_to_bridge(struct ast_channel *ast, struct ast_bridge *bridge, unsigned int flags)</div><div class="ttdoc">Push the semi2 unreal channel into a bridge from either member of the unreal pair. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00928">core_unreal.c:928</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_a652537da42c72a5179e21a3aab6c015a"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a652537da42c72a5179e21a3aab6c015a">ari_bridges_play_helper</a></div><div class="ttdeci">static int ari_bridges_play_helper(const char **args_media, size_t args_media_count, const char *args_lang, int args_offset_ms, int args_skipms, const char *args_playback_id, struct ast_ari_response *response, struct ast_bridge *bridge, struct stasis_app_control *control, struct ast_json **json, char **playback_url)</div><div class="ttdoc">Performs common setup for a bridge playback operation with both new controls and when existing contro...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00357">resource_bridges.c:357</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="channel_8h_html_afdeaf9abb1aecc715313a4f62c1cf9c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a></div><div class="ttdeci">struct stasis_topic * ast_channel_topic(struct ast_channel *chan)</div><div class="ttdoc">A topic which publishes the events for a particular channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01502">channel_internal_api.c:1502</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="stasis_8h_html_a5713715b0f26f4943d0af05363b07027"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_cancel(struct stasis_forward *forward)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01548">stasis.c:1548</a></div></div>
<div class="ttc" id="structbridge__channel__control__thread__data_html_a347350dd844369daf6576ddc72663598"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html#a347350dd844369daf6576ddc72663598">bridge_channel_control_thread_data::bridge_channel</a></div><div class="ttdeci">struct ast_channel * bridge_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00282">resource_bridges.c:282</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_ab72d3618da7594cf41aa89115b7f3298"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#ab72d3618da7594cf41aa89115b7f3298">prepare_bridge_media_channel</a></div><div class="ttdeci">static struct ast_channel * prepare_bridge_media_channel(const char *type)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00314">resource_bridges.c:314</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a982a6980aa99f3e44158ab610808addb"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a982a6980aa99f3e44158ab610808addb">stasis_app_bridge_playback_channel_add</a></div><div class="ttdeci">int stasis_app_bridge_playback_channel_add(struct ast_bridge *bridge, struct ast_channel *chan, struct stasis_app_control *control)</div><div class="ttdoc">Adds a channel to the list of ARI playback channels for bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00705">res_stasis.c:705</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structstasis__forward_html"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html">stasis_forward</a></div><div class="ttdoc">Forwarding information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01531">stasis.c:1531</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a7bdfd8273bb885f7a65f6f5d8188c915"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic(struct ast_bridge *bridge)</div><div class="ttdoc">A topic which publishes the events for a particular bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00184">stasis_bridges.c:184</a></div></div>
<div class="ttc" id="stasis_8h_html_a2513a93567ddc93510f7896b777da119"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_all(struct stasis_topic *from_topic, struct stasis_topic *to_topic)</div><div class="ttdoc">Create a subscription which forwards all messages from one topic to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01578">stasis.c:1578</a></div></div>
<div class="ttc" id="structbridge__channel__control__thread__data_html_afaaaf017d50970ec382b98a35e24c095"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">bridge_channel_control_thread_data::control</a></div><div class="ttdeci">struct stasis_app_control * control</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00283">resource_bridges.c:283</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0403c1a7681a7416757b93ceacd60116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0403c1a7681a7416757b93ceacd60116">&#9670;&nbsp;</a></span>ast_ari_bridges_add_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_add_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d74/structast__ari__bridges__add__channel__args.html">ast_ari_bridges_add_channel_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a channel to a bridge. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00191">191</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00154">ast_ari_bridges_add_channel_args::absorb_dtmf</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00144">ast_ari_bridges_add_channel_args::bridge_id</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00146">ast_ari_bridges_add_channel_args::channel</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00148">ast_ari_bridges_add_channel_args::channel_count</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00175">check_add_remove_channel()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00138">control_list_create()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00057">find_bridge()</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00158">ast_ari_bridges_add_channel_args::inhibit_connected_line_updates</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00156">ast_ari_bridges_add_channel_args::mute</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00152">ast_ari_bridges_add_channel_args::role</a>, <a class="el" href="../../de/de3/control_8c_source.html#l01464">stasis_app_control_absorb_dtmf_in_bridge()</a>, <a class="el" href="../../de/de3/control_8c_source.html#l01383">stasis_app_control_add_channel_to_bridge()</a>, <a class="el" href="../../de/de3/control_8c_source.html#l00316">stasis_app_control_add_role()</a>, <a class="el" href="../../de/de3/control_8c_source.html#l01451">stasis_app_control_bridge_features_init()</a>, <a class="el" href="../../de/de3/control_8c_source.html#l00338">stasis_app_control_clear_roles()</a>, <a class="el" href="../../de/de3/control_8c_source.html#l01476">stasis_app_control_inhibit_colp_in_bridge()</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l01470">stasis_app_control_mute_in_bridge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l00457">ast_ari_bridges_add_channel_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;{</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, bridge, <a class="code" href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a>(response, args-&gt;<a class="code" href="../../d8/d74/structast__ari__bridges__add__channel__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/ddb/structcontrol__list.html">control_list</a> *, list, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <span class="keywordtype">size_t</span> i;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="keywordtype">int</span> has_error = 0;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="comment">/* Response filled in by find_bridge() */</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   list = <a class="code" href="../../db/d0b/resource__bridges_8c.html#a953b9fe725211bf8fa11fca96453d6ef">control_list_create</a>(response, args-&gt;<a class="code" href="../../d8/d74/structast__ari__bridges__add__channel__args.html#a880c010e92b71fa8a958ac2c02e40d8a">channel_count</a>, args-&gt;<a class="code" href="../../d8/d74/structast__ari__bridges__add__channel__args.html#a77981116a5d7922e38c45bd806385a28">channel</a>);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="keywordflow">if</span> (!list) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="comment">/* Response filled in by control_list_create() */</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; list-&gt;count; ++i) {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <a class="code" href="../../d8/d9c/stasis__app_8h.html#a42879b4f8dabd12fc8dd0677b3524808">stasis_app_control_clear_roles</a>(list-&gt;controls[i]);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d8/d74/structast__ari__bridges__add__channel__args.html#a36f804075c6a372caf5ebd4df858de0e">role</a>)) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9c/stasis__app_8h.html#a84a68f427b9d772cea5e222039314509">stasis_app_control_add_role</a>(list-&gt;controls[i], args-&gt;<a class="code" href="../../d8/d74/structast__ari__bridges__add__channel__args.html#a36f804075c6a372caf5ebd4df858de0e">role</a>)) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;         }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="comment">/* Apply bridge features to each of the channel controls */</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9c/stasis__app_8h.html#a8d7c78b5fc5947de58844090ee2518f9">stasis_app_control_bridge_features_init</a>(list-&gt;controls[i])) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;         <a class="code" href="../../d8/d9c/stasis__app_8h.html#a694987deedc23dec0abba4f7401d858e">stasis_app_control_absorb_dtmf_in_bridge</a>(list-&gt;controls[i], args-&gt;<a class="code" href="../../d8/d74/structast__ari__bridges__add__channel__args.html#acc429550eee7f22bbdcb18eaa386f3ac">absorb_dtmf</a>);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;         <a class="code" href="../../d8/d9c/stasis__app_8h.html#a00a8e7b7b8dad6e8559c7ee699a2b163">stasis_app_control_mute_in_bridge</a>(list-&gt;controls[i], args-&gt;<a class="code" href="../../d8/d74/structast__ari__bridges__add__channel__args.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;         <a class="code" href="../../d8/d9c/stasis__app_8h.html#a852b7f8db110cea010cf8b430948c70f">stasis_app_control_inhibit_colp_in_bridge</a>(list-&gt;controls[i], args-&gt;<a class="code" href="../../d8/d74/structast__ari__bridges__add__channel__args.html#a3da341b64709226cbd2d4a99ceafd8bd">inhibit_connected_line_updates</a>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; list-&gt;count; ++i) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">if</span> ((has_error = <a class="code" href="../../db/d0b/resource__bridges_8c.html#a89da67dec9c5f52bf6b1db891d586ed6">check_add_remove_channel</a>(response, list-&gt;controls[i],</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;              <a class="code" href="../../d8/d9c/stasis__app_8h.html#a2e208e3badecf666903679cff10cd2d2">stasis_app_control_add_channel_to_bridge</a>(</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                list-&gt;controls[i], bridge)))) {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="keywordflow">if</span> (!has_error) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div><div class="ttc" id="stasis__app_8h_html_a694987deedc23dec0abba4f7401d858e"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a694987deedc23dec0abba4f7401d858e">stasis_app_control_absorb_dtmf_in_bridge</a></div><div class="ttdeci">void stasis_app_control_absorb_dtmf_in_bridge(struct stasis_app_control *control, int absorb)</div><div class="ttdoc">Set whether DTMF from the channel is absorbed instead of passing through to the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l01464">control.c:1464</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a84a68f427b9d772cea5e222039314509"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a84a68f427b9d772cea5e222039314509">stasis_app_control_add_role</a></div><div class="ttdeci">int stasis_app_control_add_role(struct stasis_app_control *control, const char *role)</div><div class="ttdoc">Apply a bridge role to a channel controlled by a stasis app control. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00316">control.c:316</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a8d7c78b5fc5947de58844090ee2518f9"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a8d7c78b5fc5947de58844090ee2518f9">stasis_app_control_bridge_features_init</a></div><div class="ttdeci">int stasis_app_control_bridge_features_init(struct stasis_app_control *control)</div><div class="ttdoc">Initialize bridge features into a channel control. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l01451">control.c:1451</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_ac2bbc89d879fa02403a3ae90bda47b3c"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a></div><div class="ttdeci">static struct ast_bridge * find_bridge(struct ast_ari_response *response, const char *bridge_id)</div><div class="ttdoc">Finds a bridge, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00057">resource_bridges.c:57</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_a89da67dec9c5f52bf6b1db891d586ed6"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a89da67dec9c5f52bf6b1db891d586ed6">check_add_remove_channel</a></div><div class="ttdeci">static int check_add_remove_channel(struct ast_ari_response *response, struct stasis_app_control *control, enum stasis_app_control_channel_result result)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00175">resource_bridges.c:175</a></div></div>
<div class="ttc" id="structast__ari__bridges__add__channel__args_html_acc429550eee7f22bbdcb18eaa386f3ac"><div class="ttname"><a href="../../d8/d74/structast__ari__bridges__add__channel__args.html#acc429550eee7f22bbdcb18eaa386f3ac">ast_ari_bridges_add_channel_args::absorb_dtmf</a></div><div class="ttdeci">int absorb_dtmf</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00154">resource_bridges.h:154</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_a953b9fe725211bf8fa11fca96453d6ef"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a953b9fe725211bf8fa11fca96453d6ef">control_list_create</a></div><div class="ttdeci">static struct control_list * control_list_create(struct ast_ari_response *response, size_t count, const char **channels)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00138">resource_bridges.c:138</a></div></div>
<div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="structast__ari__bridges__add__channel__args_html_a880c010e92b71fa8a958ac2c02e40d8a"><div class="ttname"><a href="../../d8/d74/structast__ari__bridges__add__channel__args.html#a880c010e92b71fa8a958ac2c02e40d8a">ast_ari_bridges_add_channel_args::channel_count</a></div><div class="ttdeci">size_t channel_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00148">resource_bridges.h:148</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structcontrol__list_html"><div class="ttname"><a href="../../d7/ddb/structcontrol__list.html">control_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00123">resource_bridges.c:123</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__ari__bridges__add__channel__args_html_a341e7b33d7f23481999b4102138d820b"><div class="ttname"><a href="../../d8/d74/structast__ari__bridges__add__channel__args.html#a341e7b33d7f23481999b4102138d820b">ast_ari_bridges_add_channel_args::bridge_id</a></div><div class="ttdeci">const char * bridge_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00144">resource_bridges.h:144</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a2e208e3badecf666903679cff10cd2d2"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a2e208e3badecf666903679cff10cd2d2">stasis_app_control_add_channel_to_bridge</a></div><div class="ttdeci">int stasis_app_control_add_channel_to_bridge(struct stasis_app_control *control, struct ast_bridge *bridge)</div><div class="ttdoc">Add a channel to the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l01383">control.c:1383</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="structast__ari__bridges__add__channel__args_html_a3da341b64709226cbd2d4a99ceafd8bd"><div class="ttname"><a href="../../d8/d74/structast__ari__bridges__add__channel__args.html#a3da341b64709226cbd2d4a99ceafd8bd">ast_ari_bridges_add_channel_args::inhibit_connected_line_updates</a></div><div class="ttdeci">int inhibit_connected_line_updates</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00158">resource_bridges.h:158</a></div></div>
<div class="ttc" id="structast__ari__bridges__add__channel__args_html_a77981116a5d7922e38c45bd806385a28"><div class="ttname"><a href="../../d8/d74/structast__ari__bridges__add__channel__args.html#a77981116a5d7922e38c45bd806385a28">ast_ari_bridges_add_channel_args::channel</a></div><div class="ttdeci">const char ** channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00146">resource_bridges.h:146</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a852b7f8db110cea010cf8b430948c70f"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a852b7f8db110cea010cf8b430948c70f">stasis_app_control_inhibit_colp_in_bridge</a></div><div class="ttdeci">void stasis_app_control_inhibit_colp_in_bridge(struct stasis_app_control *control, int inhibit_colp)</div><div class="ttdoc">Set whether COLP frames should be generated when joining the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l01476">control.c:1476</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a42879b4f8dabd12fc8dd0677b3524808"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a42879b4f8dabd12fc8dd0677b3524808">stasis_app_control_clear_roles</a></div><div class="ttdeci">void stasis_app_control_clear_roles(struct stasis_app_control *control)</div><div class="ttdoc">Clear bridge roles currently applied to a channel controlled by a stasis app control. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00338">control.c:338</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__ari__bridges__add__channel__args_html_a29128ae5c15a12dea5fe4f263ba6cec1"><div class="ttname"><a href="../../d8/d74/structast__ari__bridges__add__channel__args.html#a29128ae5c15a12dea5fe4f263ba6cec1">ast_ari_bridges_add_channel_args::mute</a></div><div class="ttdeci">int mute</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00156">resource_bridges.h:156</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a00a8e7b7b8dad6e8559c7ee699a2b163"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a00a8e7b7b8dad6e8559c7ee699a2b163">stasis_app_control_mute_in_bridge</a></div><div class="ttdeci">void stasis_app_control_mute_in_bridge(struct stasis_app_control *control, int mute)</div><div class="ttdoc">Set whether audio from the channel is muted instead of passing through to the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l01470">control.c:1470</a></div></div>
<div class="ttc" id="structast__ari__bridges__add__channel__args_html_a36f804075c6a372caf5ebd4df858de0e"><div class="ttname"><a href="../../d8/d74/structast__ari__bridges__add__channel__args.html#a36f804075c6a372caf5ebd4df858de0e">ast_ari_bridges_add_channel_args::role</a></div><div class="ttdeci">const char * role</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00152">resource_bridges.h:152</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ee56bdf89bdc71810bb24f8777e06e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ee56bdf89bdc71810bb24f8777e06e3">&#9670;&nbsp;</a></span>ast_ari_bridges_clear_video_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_clear_video_source </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d52/structast__ari__bridges__clear__video__source__args.html">ast_ari_bridges_clear_video_source_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes any explicit video source in a multi-party mixing bridge. This operation has no effect on bridges with two or fewer participants. When no explicit video source is set, talk detection will be used to determine the active video stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l01051">1051</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00480">ast_bridge_lock</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03833">ast_bridge_set_talker_src_video_mode()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00227">ast_ari_bridges_clear_video_source_args::bridge_id</a>, and <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00057">find_bridge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l00796">ast_ari_bridges_clear_video_source_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;{</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   bridge = <a class="code" href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a>(response, args-&gt;<a class="code" href="../../df/d52/structast__ari__bridges__clear__video__source__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>);</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;   }</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(bridge);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0a2e9bb75a3d3276cd8153e1f4a4a389">ast_bridge_set_talker_src_video_mode</a>(bridge);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, -1);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;}</div><div class="ttc" id="resource__bridges_8c_html_ac2bbc89d879fa02403a3ae90bda47b3c"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a></div><div class="ttdeci">static struct ast_bridge * find_bridge(struct ast_ari_response *response, const char *bridge_id)</div><div class="ttdoc">Finds a bridge, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00057">resource_bridges.c:57</a></div></div>
<div class="ttc" id="structast__ari__bridges__clear__video__source__args_html_a341e7b33d7f23481999b4102138d820b"><div class="ttname"><a href="../../df/d52/structast__ari__bridges__clear__video__source__args.html#a341e7b33d7f23481999b4102138d820b">ast_ari_bridges_clear_video_source_args::bridge_id</a></div><div class="ttdeci">const char * bridge_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00227">resource_bridges.h:227</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="bridge_8h_html_a0a2e9bb75a3d3276cd8153e1f4a4a389"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0a2e9bb75a3d3276cd8153e1f4a4a389">ast_bridge_set_talker_src_video_mode</a></div><div class="ttdeci">void ast_bridge_set_talker_src_video_mode(struct ast_bridge *bridge)</div><div class="ttdoc">Set the bridge to pick the strongest talker supporting video as the single source video feed...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03833">bridge.c:3833</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="bridge_8h_html_ab8ee807d2c3a21d19e16fedf35c90de8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a></div><div class="ttdeci">#define ast_bridge_lock(bridge)</div><div class="ttdoc">Lock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00480">bridge.h:480</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a523ae80d4a5bc9ff053a5af5eb31a556"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a523ae80d4a5bc9ff053a5af5eb31a556">&#9670;&nbsp;</a></span>ast_ari_bridges_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d20/structast__ari__bridges__create__args.html">ast_ari_bridges_create_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new bridge. </p>
<p>This bridge persists until it has been shut down, or Asterisk has been shut down.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00925">925</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00276">ast_ari_response_ok()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00480">ast_bridge_lock</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">ast_bridge_snapshot_create()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00712">ast_bridge_snapshot_to_json()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00058">ast_ari_bridges_create_args::bridge_id</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00060">ast_ari_bridges_create_args::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00851">stasis_app_bridge_create()</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l02264">stasis_app_get_sanitizer()</a>, and <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00056">ast_ari_bridges_create_args::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l00133">ast_ari_bridges_create_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;{</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, bridge, <a class="code" href="../../d8/d9c/stasis__app_8h.html#a91df4734eca233c215ab79786f9d11b4">stasis_app_bridge_create</a>(args-&gt;<a class="code" href="../../d2/d20/structast__ari__bridges__create__args.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>, args-&gt;<a class="code" href="../../d2/d20/structast__ari__bridges__create__args.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, args-&gt;<a class="code" href="../../d2/d20/structast__ari__bridges__create__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *, snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Error&quot;</span>,</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;         <span class="stringliteral">&quot;Unable to create bridge&quot;</span>);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;   }</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(bridge);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   snapshot = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a>(bridge);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Error&quot;</span>,</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;         <span class="stringliteral">&quot;Unable to create snapshot for new bridge&quot;</span>);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a>(response,</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a>(snapshot, <a class="code" href="../../d8/d9c/stasis__app_8h.html#a75e0d54649ef61d0ac78c70bf9ff58ec">stasis_app_get_sanitizer</a>()));</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;}</div><div class="ttc" id="structast__ari__bridges__create__args_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d2/d20/structast__ari__bridges__create__args.html#a8f8f80d37794cde9472343e4487ba3eb">ast_ari_bridges_create_args::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00060">resource_bridges.h:60</a></div></div>
<div class="ttc" id="structast__ari__bridges__create__args_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d2/d20/structast__ari__bridges__create__args.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_ari_bridges_create_args::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00056">resource_bridges.h:56</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="ari_8h_html_a9111898e4037c6e06472038d67a78a2e"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a></div><div class="ttdeci">void ast_ari_response_ok(struct ast_ari_response *response, struct ast_json *message)</div><div class="ttdoc">Fill in an OK (200) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00276">res_ari.c:276</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a75e0d54649ef61d0ac78c70bf9ff58ec"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a75e0d54649ef61d0ac78c70bf9ff58ec">stasis_app_get_sanitizer</a></div><div class="ttdeci">struct stasis_message_sanitizer * stasis_app_get_sanitizer(void)</div><div class="ttdoc">Get the Stasis message sanitizer for app_stasis applications. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l02264">res_stasis.c:2264</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a95241898553c1d42ea46964b277433ad"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_snapshot_create(struct ast_bridge *bridge)</div><div class="ttdoc">Generate a snapshot of the bridge state. This is an ao2 object, so ao2_cleanup() to deallocate...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00202">stasis_bridges.c:202</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="structast__ari__bridges__create__args_html_a341e7b33d7f23481999b4102138d820b"><div class="ttname"><a href="../../d2/d20/structast__ari__bridges__create__args.html#a341e7b33d7f23481999b4102138d820b">ast_ari_bridges_create_args::bridge_id</a></div><div class="ttdeci">const char * bridge_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00058">resource_bridges.h:58</a></div></div>
<div class="ttc" id="bridge_8h_html_ab8ee807d2c3a21d19e16fedf35c90de8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a></div><div class="ttdeci">#define ast_bridge_lock(bridge)</div><div class="ttdoc">Lock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00480">bridge.h:480</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a76837dd4c259276cc59d163e4bc2a3b5"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_bridge_snapshot_to_json(const struct ast_bridge_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_bridge_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00712">stasis_bridges.c:712</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a91df4734eca233c215ab79786f9d11b4"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a91df4734eca233c215ab79786f9d11b4">stasis_app_bridge_create</a></div><div class="ttdeci">struct ast_bridge * stasis_app_bridge_create(const char *type, const char *name, const char *id)</div><div class="ttdoc">Create a bridge of the specified type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00851">res_stasis.c:851</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f5335612f3cb73a10e21bf298ca9df1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f5335612f3cb73a10e21bf298ca9df1">&#9670;&nbsp;</a></span>ast_ari_bridges_create_with_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_create_with_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d01/structast__ari__bridges__create__with__id__args.html">ast_ari_bridges_create_with_id_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new bridge or updates an existing one. </p>
<p>This bridge persists until it has been shut down, or Asterisk has been shut down.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00954">954</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00276">ast_ari_response_ok()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00480">ast_bridge_lock</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00202">ast_bridge_snapshot_create()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00712">ast_bridge_snapshot_to_json()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00088">ast_ari_bridges_create_with_id_args::bridge_id</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00057">find_bridge()</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00090">ast_ari_bridges_create_with_id_args::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00851">stasis_app_bridge_create()</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l02264">stasis_app_get_sanitizer()</a>, and <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00086">ast_ari_bridges_create_with_id_args::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l00217">ast_ari_bridges_create_with_id_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;{</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, bridge, <a class="code" href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a>(response, args-&gt;<a class="code" href="../../d2/d01/structast__ari__bridges__create__with__id__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *, snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   <span class="keywordflow">if</span> (bridge) {</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      <span class="comment">/* update */</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d2/d01/structast__ari__bridges__create__with__id__args.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;         &amp;&amp; strcmp(args-&gt;<a class="code" href="../../d2/d01/structast__ari__bridges__create__with__id__args.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, bridge-&gt;name)) {</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            response, 500, <span class="stringliteral">&quot;Internal Error&quot;</span>,</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            <span class="stringliteral">&quot;Changing bridge name is not implemented&quot;</span>);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      }</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args-&gt;<a class="code" href="../../d2/d01/structast__ari__bridges__create__with__id__args.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>)) {</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            response, 500, <span class="stringliteral">&quot;Internal Error&quot;</span>,</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            <span class="stringliteral">&quot;Supplying a bridge type when updating a bridge is not allowed.&quot;</span>);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a>(response,</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;         <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a>(snapshot, <a class="code" href="../../d8/d9c/stasis__app_8h.html#a75e0d54649ef61d0ac78c70bf9ff58ec">stasis_app_get_sanitizer</a>()));</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;   }</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   bridge = <a class="code" href="../../d8/d9c/stasis__app_8h.html#a91df4734eca233c215ab79786f9d11b4">stasis_app_bridge_create</a>(args-&gt;<a class="code" href="../../d2/d01/structast__ari__bridges__create__with__id__args.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>, args-&gt;<a class="code" href="../../d2/d01/structast__ari__bridges__create__with__id__args.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, args-&gt;<a class="code" href="../../d2/d01/structast__ari__bridges__create__with__id__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Error&quot;</span>,</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;         <span class="stringliteral">&quot;Unable to create bridge&quot;</span>);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;   }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(bridge);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   snapshot = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a>(bridge);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Error&quot;</span>,</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;         <span class="stringliteral">&quot;Unable to create snapshot for new bridge&quot;</span>);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   }</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a>(response,</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a>(snapshot, <a class="code" href="../../d8/d9c/stasis__app_8h.html#a75e0d54649ef61d0ac78c70bf9ff58ec">stasis_app_get_sanitizer</a>()));</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;}</div><div class="ttc" id="structast__ari__bridges__create__with__id__args_html_a341e7b33d7f23481999b4102138d820b"><div class="ttname"><a href="../../d2/d01/structast__ari__bridges__create__with__id__args.html#a341e7b33d7f23481999b4102138d820b">ast_ari_bridges_create_with_id_args::bridge_id</a></div><div class="ttdeci">const char * bridge_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00088">resource_bridges.h:88</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_ac2bbc89d879fa02403a3ae90bda47b3c"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a></div><div class="ttdeci">static struct ast_bridge * find_bridge(struct ast_ari_response *response, const char *bridge_id)</div><div class="ttdoc">Finds a bridge, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00057">resource_bridges.c:57</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__ari__bridges__create__with__id__args_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d2/d01/structast__ari__bridges__create__with__id__args.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_ari_bridges_create_with_id_args::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00086">resource_bridges.h:86</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="ari_8h_html_a9111898e4037c6e06472038d67a78a2e"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a></div><div class="ttdeci">void ast_ari_response_ok(struct ast_ari_response *response, struct ast_json *message)</div><div class="ttdoc">Fill in an OK (200) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00276">res_ari.c:276</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="structast__ari__bridges__create__with__id__args_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d2/d01/structast__ari__bridges__create__with__id__args.html#a8f8f80d37794cde9472343e4487ba3eb">ast_ari_bridges_create_with_id_args::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00090">resource_bridges.h:90</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a75e0d54649ef61d0ac78c70bf9ff58ec"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a75e0d54649ef61d0ac78c70bf9ff58ec">stasis_app_get_sanitizer</a></div><div class="ttdeci">struct stasis_message_sanitizer * stasis_app_get_sanitizer(void)</div><div class="ttdoc">Get the Stasis message sanitizer for app_stasis applications. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l02264">res_stasis.c:2264</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a95241898553c1d42ea46964b277433ad"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_snapshot_create(struct ast_bridge *bridge)</div><div class="ttdoc">Generate a snapshot of the bridge state. This is an ao2 object, so ao2_cleanup() to deallocate...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00202">stasis_bridges.c:202</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="bridge_8h_html_ab8ee807d2c3a21d19e16fedf35c90de8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a></div><div class="ttdeci">#define ast_bridge_lock(bridge)</div><div class="ttdoc">Lock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00480">bridge.h:480</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a76837dd4c259276cc59d163e4bc2a3b5"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_bridge_snapshot_to_json(const struct ast_bridge_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_bridge_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00712">stasis_bridges.c:712</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a91df4734eca233c215ab79786f9d11b4"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a91df4734eca233c215ab79786f9d11b4">stasis_app_bridge_create</a></div><div class="ttdeci">struct ast_bridge * stasis_app_bridge_create(const char *type, const char *name, const char *id)</div><div class="ttdoc">Create a bridge of the specified type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00851">res_stasis.c:851</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4da710101260eba463ae3b8147a99299"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4da710101260eba463ae3b8147a99299">&#9670;&nbsp;</a></span>ast_ari_bridges_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/dad/structast__ari__bridges__destroy__args.html">ast_ari_bridges_destroy_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shut down a bridge. </p>
<p>If any channels are in this bridge, they will be removed and resume whatever they were doing beforehand.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00872">872</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00129">ast_ari_bridges_destroy_args::bridge_id</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00057">find_bridge()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00861">stasis_app_bridge_destroy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l00345">ast_ari_bridges_destroy_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;{</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, bridge, <a class="code" href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a>(response, args-&gt;<a class="code" href="../../d1/dad/structast__ari__bridges__destroy__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a4493fdb230759374b1a9aa51f5a3ab8d">stasis_app_bridge_destroy</a>(args-&gt;<a class="code" href="../../d1/dad/structast__ari__bridges__destroy__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;}</div><div class="ttc" id="resource__bridges_8c_html_ac2bbc89d879fa02403a3ae90bda47b3c"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a></div><div class="ttdeci">static struct ast_bridge * find_bridge(struct ast_ari_response *response, const char *bridge_id)</div><div class="ttdoc">Finds a bridge, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00057">resource_bridges.c:57</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__ari__bridges__destroy__args_html_a341e7b33d7f23481999b4102138d820b"><div class="ttname"><a href="../../d1/dad/structast__ari__bridges__destroy__args.html#a341e7b33d7f23481999b4102138d820b">ast_ari_bridges_destroy_args::bridge_id</a></div><div class="ttdeci">const char * bridge_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00129">resource_bridges.h:129</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a4493fdb230759374b1a9aa51f5a3ab8d"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a4493fdb230759374b1a9aa51f5a3ab8d">stasis_app_bridge_destroy</a></div><div class="ttdeci">void stasis_app_bridge_destroy(const char *bridge_id)</div><div class="ttdoc">Destroy the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00861">res_stasis.c:861</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a110b4761c0939a7fad0a1968304e8fa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a110b4761c0939a7fad0a1968304e8fa2">&#9670;&nbsp;</a></span>ast_ari_bridges_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/de1/structast__ari__bridges__get__args.html">ast_ari_bridges_get_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get bridge details. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00856">856</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00276">ast_ari_response_ok()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01359">ast_bridge_get_snapshot_by_uniqueid()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00712">ast_bridge_snapshot_to_json()</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00116">ast_ari_bridges_get_args::bridge_id</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l02264">stasis_app_get_sanitizer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l00287">ast_ari_bridges_get_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;{</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *, snapshot, <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#aee9af6c35b13edd9dcbd3dbabc5522ee">ast_bridge_get_snapshot_by_uniqueid</a>(args-&gt;<a class="code" href="../../dd/de1/structast__ari__bridges__get__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;         response, 404, <span class="stringliteral">&quot;Not Found&quot;</span>,</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;         <span class="stringliteral">&quot;Bridge not found&quot;</span>);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   }</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a>(response,</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a>(snapshot, <a class="code" href="../../d8/d9c/stasis__app_8h.html#a75e0d54649ef61d0ac78c70bf9ff58ec">stasis_app_get_sanitizer</a>()));</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;}</div><div class="ttc" id="structast__ari__bridges__get__args_html_a341e7b33d7f23481999b4102138d820b"><div class="ttname"><a href="../../dd/de1/structast__ari__bridges__get__args.html#a341e7b33d7f23481999b4102138d820b">ast_ari_bridges_get_args::bridge_id</a></div><div class="ttdeci">const char * bridge_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00116">resource_bridges.h:116</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="ari_8h_html_a9111898e4037c6e06472038d67a78a2e"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a></div><div class="ttdeci">void ast_ari_response_ok(struct ast_ari_response *response, struct ast_json *message)</div><div class="ttdoc">Fill in an OK (200) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00276">res_ari.c:276</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a75e0d54649ef61d0ac78c70bf9ff58ec"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a75e0d54649ef61d0ac78c70bf9ff58ec">stasis_app_get_sanitizer</a></div><div class="ttdeci">struct stasis_message_sanitizer * stasis_app_get_sanitizer(void)</div><div class="ttdoc">Get the Stasis message sanitizer for app_stasis applications. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l02264">res_stasis.c:2264</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a76837dd4c259276cc59d163e4bc2a3b5"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_bridge_snapshot_to_json(const struct ast_bridge_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_bridge_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00712">stasis_bridges.c:712</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_aee9af6c35b13edd9dcbd3dbabc5522ee"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#aee9af6c35b13edd9dcbd3dbabc5522ee">ast_bridge_get_snapshot_by_uniqueid</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_get_snapshot_by_uniqueid(const char *bridge_id)</div><div class="ttdoc">Returns the current snapshot for the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l01359">stasis_bridges.c:1359</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af456b35967dc37f869de264ee800f2b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af456b35967dc37f869de264ee800f2b8">&#9670;&nbsp;</a></span>ast_ari_bridges_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../de/d9b/structast__ari__bridges__list__args.html">ast_ari_bridges_list_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List all active bridges in Asterisk. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00885">885</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00276">ast_ari_response_ok()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01378">ast_bridge_get_snapshot()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00712">ast_bridge_snapshot_to_json()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00174">ast_bridges()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00368">ast_json_array_append()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00352">ast_json_array_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00123">bridges</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l02264">stasis_app_get_sanitizer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l00062">ast_ari_bridges_list_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;{</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *, <a class="code" href="../../d0/d95/bridge_8c.html#aaa64e0df7082a1a31b65d0c956bc2534">bridges</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, json, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   <a class="code" href="../../d0/d95/bridge_8c.html#aaa64e0df7082a1a31b65d0c956bc2534">bridges</a> = <a class="code" href="../../d4/d56/bridge_8h.html#ab9fc36aaff74fae0efd0f683353baa7e">ast_bridges</a>();</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d95/bridge_8c.html#aaa64e0df7082a1a31b65d0c956bc2534">bridges</a>) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;   }</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   json = <a class="code" href="../../d4/d05/json_8h.html#a48d874eed79fb2bbeb0557440e33ae67">ast_json_array_create</a>();</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   <span class="keywordflow">if</span> (!json) {</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(<a class="code" href="../../d0/d95/bridge_8c.html#aaa64e0df7082a1a31b65d0c956bc2534">bridges</a>, 0);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   <span class="keywordflow">while</span> ((bridge = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *snapshot = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a04efba17b1302d217a2a07a02c3eac98">ast_bridge_get_snapshot</a>(bridge);</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <span class="comment">/* ast_bridge_snapshot_to_json will return NULL if snapshot is NULL */</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_bridge = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a>(snapshot, <a class="code" href="../../d8/d9c/stasis__app_8h.html#a75e0d54649ef61d0ac78c70bf9ff58ec">stasis_app_get_sanitizer</a>());</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, -1);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(snapshot);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="keywordflow">if</span> (!json_bridge || <a class="code" href="../../d4/d05/json_8h.html#a3d675e52f866630a6a03302df2712b8d">ast_json_array_append</a>(json, json_bridge)) {</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      }</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;   }</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a>(response, <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(json));</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;}</div><div class="ttc" id="bridge_8h_html_ab9fc36aaff74fae0efd0f683353baa7e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab9fc36aaff74fae0efd0f683353baa7e">ast_bridges</a></div><div class="ttdeci">struct ao2_container * ast_bridges(void)</div><div class="ttdoc">Returns the global bridges container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00174">bridge.c:174</a></div></div>
<div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a04efba17b1302d217a2a07a02c3eac98"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a04efba17b1302d217a2a07a02c3eac98">ast_bridge_get_snapshot</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_get_snapshot(struct ast_bridge *bridge)</div><div class="ttdoc">Returns the current snapshot for the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l01378">stasis_bridges.c:1378</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="ari_8h_html_a9111898e4037c6e06472038d67a78a2e"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a9111898e4037c6e06472038d67a78a2e">ast_ari_response_ok</a></div><div class="ttdeci">void ast_ari_response_ok(struct ast_ari_response *response, struct ast_json *message)</div><div class="ttdoc">Fill in an OK (200) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00276">res_ari.c:276</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="json_8h_html_a48d874eed79fb2bbeb0557440e33ae67"><div class="ttname"><a href="../../d4/d05/json_8h.html#a48d874eed79fb2bbeb0557440e33ae67">ast_json_array_create</a></div><div class="ttdeci">struct ast_json * ast_json_array_create(void)</div><div class="ttdoc">Create a empty JSON array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00352">json.c:352</a></div></div>
<div class="ttc" id="json_8h_html_a3d675e52f866630a6a03302df2712b8d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a3d675e52f866630a6a03302df2712b8d">ast_json_array_append</a></div><div class="ttdeci">int ast_json_array_append(struct ast_json *array, struct ast_json *value)</div><div class="ttdoc">Append to an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00368">json.c:368</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a75e0d54649ef61d0ac78c70bf9ff58ec"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a75e0d54649ef61d0ac78c70bf9ff58ec">stasis_app_get_sanitizer</a></div><div class="ttdeci">struct stasis_message_sanitizer * stasis_app_get_sanitizer(void)</div><div class="ttdoc">Get the Stasis message sanitizer for app_stasis applications. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l02264">res_stasis.c:2264</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="bridge_8c_html_aaa64e0df7082a1a31b65d0c956bc2534"><div class="ttname"><a href="../../d0/d95/bridge_8c.html#aaa64e0df7082a1a31b65d0c956bc2534">bridges</a></div><div class="ttdeci">static struct ao2_container * bridges</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00123">bridge.c:123</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a76837dd4c259276cc59d163e4bc2a3b5"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_bridge_snapshot_to_json(const struct ast_bridge_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_bridge_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00712">stasis_bridges.c:712</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b2031de9a597eb05f35b838a3def04f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b2031de9a597eb05f35b838a3def04f">&#9670;&nbsp;</a></span>ast_ari_bridges_play()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_play </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/dc0/structast__ari__bridges__play__args.html">ast_ari_bridges_play_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start playback of media on a bridge. </p>
<p>The media URI may be any of a number of URI's. Currently sound:, recording:, number:, digits:, characters:, and tone: URI's are supported. This operation creates a playback resource that can be used to control the playback of media (pause, rewind, fast forward, etc.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00606">606</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00567">ari_bridges_handle_play()</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00281">ast_ari_bridges_play_args::bridge_id</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00289">ast_ari_bridges_play_args::lang</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00283">ast_ari_bridges_play_args::media</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00285">ast_ari_bridges_play_args::media_count</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00291">ast_ari_bridges_play_args::offsetms</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00295">ast_ari_bridges_play_args::playback_id</a>, and <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00293">ast_ari_bridges_play_args::skipms</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l01049">ast_ari_bridges_play_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;{</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   <a class="code" href="../../db/d0b/resource__bridges_8c.html#aec25eede83e852fb115980a57abce3b9">ari_bridges_handle_play</a>(args-&gt;<a class="code" href="../../da/dc0/structast__ari__bridges__play__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>,</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   args-&gt;<a class="code" href="../../da/dc0/structast__ari__bridges__play__args.html#a401808a2973fe8335a4c395f98c71b86">media</a>,</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   args-&gt;<a class="code" href="../../da/dc0/structast__ari__bridges__play__args.html#acbf535d1fb30faf073f1f78ef2e2ab09">media_count</a>,</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   args-&gt;<a class="code" href="../../da/dc0/structast__ari__bridges__play__args.html#a7d86234830aaf21f69a934efbd929242">lang</a>,</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   args-&gt;<a class="code" href="../../da/dc0/structast__ari__bridges__play__args.html#af80292482ac9cfe528fe0698bf9e2eb2">offsetms</a>,</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   args-&gt;<a class="code" href="../../da/dc0/structast__ari__bridges__play__args.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>,</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   args-&gt;<a class="code" href="../../da/dc0/structast__ari__bridges__play__args.html#ad9fac90fec3e638398eab17e35ba966d">playback_id</a>,</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   response);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;}</div><div class="ttc" id="structast__ari__bridges__play__args_html_acbf535d1fb30faf073f1f78ef2e2ab09"><div class="ttname"><a href="../../da/dc0/structast__ari__bridges__play__args.html#acbf535d1fb30faf073f1f78ef2e2ab09">ast_ari_bridges_play_args::media_count</a></div><div class="ttdeci">size_t media_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00285">resource_bridges.h:285</a></div></div>
<div class="ttc" id="structast__ari__bridges__play__args_html_a341e7b33d7f23481999b4102138d820b"><div class="ttname"><a href="../../da/dc0/structast__ari__bridges__play__args.html#a341e7b33d7f23481999b4102138d820b">ast_ari_bridges_play_args::bridge_id</a></div><div class="ttdeci">const char * bridge_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00281">resource_bridges.h:281</a></div></div>
<div class="ttc" id="structast__ari__bridges__play__args_html_ad9fac90fec3e638398eab17e35ba966d"><div class="ttname"><a href="../../da/dc0/structast__ari__bridges__play__args.html#ad9fac90fec3e638398eab17e35ba966d">ast_ari_bridges_play_args::playback_id</a></div><div class="ttdeci">const char * playback_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00295">resource_bridges.h:295</a></div></div>
<div class="ttc" id="structast__ari__bridges__play__args_html_af80292482ac9cfe528fe0698bf9e2eb2"><div class="ttname"><a href="../../da/dc0/structast__ari__bridges__play__args.html#af80292482ac9cfe528fe0698bf9e2eb2">ast_ari_bridges_play_args::offsetms</a></div><div class="ttdeci">int offsetms</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00291">resource_bridges.h:291</a></div></div>
<div class="ttc" id="structast__ari__bridges__play__args_html_a1df943a05a384a407a19cf8831b2d237"><div class="ttname"><a href="../../da/dc0/structast__ari__bridges__play__args.html#a1df943a05a384a407a19cf8831b2d237">ast_ari_bridges_play_args::skipms</a></div><div class="ttdeci">int skipms</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00293">resource_bridges.h:293</a></div></div>
<div class="ttc" id="structast__ari__bridges__play__args_html_a7d86234830aaf21f69a934efbd929242"><div class="ttname"><a href="../../da/dc0/structast__ari__bridges__play__args.html#a7d86234830aaf21f69a934efbd929242">ast_ari_bridges_play_args::lang</a></div><div class="ttdeci">const char * lang</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00289">resource_bridges.h:289</a></div></div>
<div class="ttc" id="structast__ari__bridges__play__args_html_a401808a2973fe8335a4c395f98c71b86"><div class="ttname"><a href="../../da/dc0/structast__ari__bridges__play__args.html#a401808a2973fe8335a4c395f98c71b86">ast_ari_bridges_play_args::media</a></div><div class="ttdeci">const char ** media</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00283">resource_bridges.h:283</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_aec25eede83e852fb115980a57abce3b9"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#aec25eede83e852fb115980a57abce3b9">ari_bridges_handle_play</a></div><div class="ttdeci">static void ari_bridges_handle_play(const char *args_bridge_id, const char **args_media, size_t args_media_count, const char *args_lang, int args_offset_ms, int args_skipms, const char *args_playback_id, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00567">resource_bridges.c:567</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2735d35a3b40f4b0ee7c1a8648ee172d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2735d35a3b40f4b0ee7c1a8648ee172d">&#9670;&nbsp;</a></span>ast_ari_bridges_play_with_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_play_with_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d94/structast__ari__bridges__play__with__id__args.html">ast_ari_bridges_play_with_id_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start playback of media on a bridge. </p>
<p>The media URI may be any of a number of URI's. Currently sound:, recording:, number:, digits:, characters:, and tone: URI's are supported. This operation creates a playback resource that can be used to control the playback of media (pause, rewind, fast forward, etc.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00620">620</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00567">ari_bridges_handle_play()</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00321">ast_ari_bridges_play_with_id_args::bridge_id</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00331">ast_ari_bridges_play_with_id_args::lang</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00325">ast_ari_bridges_play_with_id_args::media</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00327">ast_ari_bridges_play_with_id_args::media_count</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00333">ast_ari_bridges_play_with_id_args::offsetms</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00323">ast_ari_bridges_play_with_id_args::playback_id</a>, and <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00335">ast_ari_bridges_play_with_id_args::skipms</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l01222">ast_ari_bridges_play_with_id_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;{</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <a class="code" href="../../db/d0b/resource__bridges_8c.html#aec25eede83e852fb115980a57abce3b9">ari_bridges_handle_play</a>(args-&gt;<a class="code" href="../../db/d94/structast__ari__bridges__play__with__id__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>,</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   args-&gt;<a class="code" href="../../db/d94/structast__ari__bridges__play__with__id__args.html#a401808a2973fe8335a4c395f98c71b86">media</a>,</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   args-&gt;<a class="code" href="../../db/d94/structast__ari__bridges__play__with__id__args.html#acbf535d1fb30faf073f1f78ef2e2ab09">media_count</a>,</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   args-&gt;<a class="code" href="../../db/d94/structast__ari__bridges__play__with__id__args.html#a7d86234830aaf21f69a934efbd929242">lang</a>,</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   args-&gt;<a class="code" href="../../db/d94/structast__ari__bridges__play__with__id__args.html#af80292482ac9cfe528fe0698bf9e2eb2">offsetms</a>,</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   args-&gt;<a class="code" href="../../db/d94/structast__ari__bridges__play__with__id__args.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>,</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   args-&gt;<a class="code" href="../../db/d94/structast__ari__bridges__play__with__id__args.html#ad9fac90fec3e638398eab17e35ba966d">playback_id</a>,</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   response);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;}</div><div class="ttc" id="structast__ari__bridges__play__with__id__args_html_acbf535d1fb30faf073f1f78ef2e2ab09"><div class="ttname"><a href="../../db/d94/structast__ari__bridges__play__with__id__args.html#acbf535d1fb30faf073f1f78ef2e2ab09">ast_ari_bridges_play_with_id_args::media_count</a></div><div class="ttdeci">size_t media_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00327">resource_bridges.h:327</a></div></div>
<div class="ttc" id="structast__ari__bridges__play__with__id__args_html_a1df943a05a384a407a19cf8831b2d237"><div class="ttname"><a href="../../db/d94/structast__ari__bridges__play__with__id__args.html#a1df943a05a384a407a19cf8831b2d237">ast_ari_bridges_play_with_id_args::skipms</a></div><div class="ttdeci">int skipms</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00335">resource_bridges.h:335</a></div></div>
<div class="ttc" id="structast__ari__bridges__play__with__id__args_html_a401808a2973fe8335a4c395f98c71b86"><div class="ttname"><a href="../../db/d94/structast__ari__bridges__play__with__id__args.html#a401808a2973fe8335a4c395f98c71b86">ast_ari_bridges_play_with_id_args::media</a></div><div class="ttdeci">const char ** media</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00325">resource_bridges.h:325</a></div></div>
<div class="ttc" id="structast__ari__bridges__play__with__id__args_html_af80292482ac9cfe528fe0698bf9e2eb2"><div class="ttname"><a href="../../db/d94/structast__ari__bridges__play__with__id__args.html#af80292482ac9cfe528fe0698bf9e2eb2">ast_ari_bridges_play_with_id_args::offsetms</a></div><div class="ttdeci">int offsetms</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00333">resource_bridges.h:333</a></div></div>
<div class="ttc" id="structast__ari__bridges__play__with__id__args_html_a341e7b33d7f23481999b4102138d820b"><div class="ttname"><a href="../../db/d94/structast__ari__bridges__play__with__id__args.html#a341e7b33d7f23481999b4102138d820b">ast_ari_bridges_play_with_id_args::bridge_id</a></div><div class="ttdeci">const char * bridge_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00321">resource_bridges.h:321</a></div></div>
<div class="ttc" id="structast__ari__bridges__play__with__id__args_html_ad9fac90fec3e638398eab17e35ba966d"><div class="ttname"><a href="../../db/d94/structast__ari__bridges__play__with__id__args.html#ad9fac90fec3e638398eab17e35ba966d">ast_ari_bridges_play_with_id_args::playback_id</a></div><div class="ttdeci">const char * playback_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00323">resource_bridges.h:323</a></div></div>
<div class="ttc" id="structast__ari__bridges__play__with__id__args_html_a7d86234830aaf21f69a934efbd929242"><div class="ttname"><a href="../../db/d94/structast__ari__bridges__play__with__id__args.html#a7d86234830aaf21f69a934efbd929242">ast_ari_bridges_play_with_id_args::lang</a></div><div class="ttdeci">const char * lang</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00331">resource_bridges.h:331</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_aec25eede83e852fb115980a57abce3b9"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#aec25eede83e852fb115980a57abce3b9">ari_bridges_handle_play</a></div><div class="ttdeci">static void ari_bridges_handle_play(const char *args_bridge_id, const char **args_media, size_t args_media_count, const char *args_lang, int args_offset_ms, int args_skipms, const char *args_playback_id, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00567">resource_bridges.c:567</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="accb656d541088b338b07ca5130b57054"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accb656d541088b338b07ca5130b57054">&#9670;&nbsp;</a></span>ast_ari_bridges_record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_record </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d6f/structast__ari__bridges__record__args.html">ast_ari_bridges_record_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a recording. </p>
<p>This records the mixed audio from all channels participating in this bridge.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00634">634</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00305">ast_ari_response_created()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00067">AST_BRIDGE_CHANNEL_FLAG_IMMOVABLE</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00065">AST_BRIDGE_CHANNEL_FLAG_LONELY</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00184">ast_bridge_topic()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01502">ast_channel_topic()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01938">ast_get_format_for_file_ext()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00563">ast_pthread_create_detached</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01074">AST_RECORD_IF_EXISTS_ERROR</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00550">ast_string_field_build</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l00928">ast_unreal_channel_push_to_bridge()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00577">ast_uri_encode()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00573">ast_uri_http</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00373">ast_ari_bridges_record_args::beep</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00282">bridge_channel_control_thread_data::bridge_channel</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00288">bridge_channel_control_thread()</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00361">ast_ari_bridges_record_args::bridge_id</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00283">bridge_channel_control_thread_data::control</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00057">find_bridge()</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00365">ast_ari_bridges_record_args::format</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00284">bridge_channel_control_thread_data::forward</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00371">ast_ari_bridges_record_args::if_exists</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00367">ast_ari_bridges_record_args::max_duration_seconds</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00369">ast_ari_bridges_record_args::max_silence_seconds</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00363">ast_ari_bridges_record_args::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00314">prepare_bridge_media_channel()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00333">stasis_app_control_create()</a>, <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00370">stasis_app_control_record()</a>, <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00194">stasis_app_recording_if_exists_parse()</a>, <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00151">stasis_app_recording_options_create()</a>, <a class="el" href="../../d2/dda/stasis__app__recording_8h_source.html#l00172">STASIS_APP_RECORDING_TERMINATE_INVALID</a>, <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00169">stasis_app_recording_termination_parse()</a>, <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00478">stasis_app_recording_to_json()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01578">stasis_forward_all()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">stasis_forward_cancel()</a>, and <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00375">ast_ari_bridges_record_args::terminate_on</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l01382">ast_ari_bridges_record_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;{</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, bridge, <a class="code" href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a>(response, args-&gt;<a class="code" href="../../d1/d6f/structast__ari__bridges__record__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, record_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d5e/structstasis__app__recording.html">stasis_app_recording</a> *, recording, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, recording_url, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, json, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/dba/structstasis__app__recording__options.html">stasis_app_recording_options</a> *, <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, uri_encoded_name, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *, channel_forward, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *channel_topic;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *bridge_topic;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   <span class="keywordtype">size_t</span> uri_name_maxlen;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html">bridge_channel_control_thread_data</a> *thread_data;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   pthread_t threadid;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(response != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <span class="keywordflow">if</span> (bridge == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <span class="keywordflow">if</span> (!(record_channel = <a class="code" href="../../db/d0b/resource__bridges_8c.html#ab72d3618da7594cf41aa89115b7f3298">prepare_bridge_media_channel</a>(<span class="stringliteral">&quot;Recorder&quot;</span>))) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>, <span class="stringliteral">&quot;Failed to create recording channel&quot;</span>);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   }</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   bridge_topic = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(bridge);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   channel_topic = <a class="code" href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a>(record_channel);</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <span class="comment">/* Forward messages from the recording channel topic to the bridge topic so that anything listening for</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">    * messages on the bridge topic will receive the recording start/stop messages. Other messages that would</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">    * go to this channel will be suppressed since the channel is marked as internal.</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <span class="keywordflow">if</span> (!bridge_topic || !channel_topic || !(channel_forward = <a class="code" href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a>(channel_topic, bridge_topic))) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Error&quot;</span>, <span class="stringliteral">&quot;Could not forward record channel stasis messages to bridge topic&quot;</span>);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/dea/core__unreal_8h.html#a9b227b77345689fc4278e0d0f287f85e">ast_unreal_channel_push_to_bridge</a>(record_channel, bridge,</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a0e985ea384c79e5e35055ecc0ffb2c57">AST_BRIDGE_CHANNEL_FLAG_IMMOVABLE</a> | <a class="code" href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a29fbd7797e61564f5f40c3361e7f4fc2">AST_BRIDGE_CHANNEL_FLAG_LONELY</a>)) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;         response, 500, <span class="stringliteral">&quot;Internal Error&quot;</span>, <span class="stringliteral">&quot;Failed to put recording channel into the bridge&quot;</span>);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   }</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a> = <a class="code" href="../../d8/d9c/stasis__app_8h.html#ae9f63d3e139d209a4aca4405e8031c6a">stasis_app_control_create</a>(record_channel);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = <a class="code" href="../../d2/dda/stasis__app__recording_8h.html#a7e584de6354b58e0ab9f75796715aca2">stasis_app_recording_options_create</a>(args-&gt;<a class="code" href="../../d1/d6f/structast__ari__bridges__record__args.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, args-&gt;<a class="code" href="../../d1/d6f/structast__ari__bridges__record__args.html#a6bd2bb5fcc7628a640958994a22f997c">format</a>);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   }</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, target, <span class="stringliteral">&quot;bridge:%s&quot;</span>, args-&gt;<a class="code" href="../../d1/d6f/structast__ari__bridges__record__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;max_silence_seconds = args-&gt;<a class="code" href="../../d1/d6f/structast__ari__bridges__record__args.html#aa0c1e600b53dd4f48dd371964f8a7361">max_silence_seconds</a>;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;max_duration_seconds = args-&gt;<a class="code" href="../../d1/d6f/structast__ari__bridges__record__args.html#a2905291106ca33c80e595233525899e0">max_duration_seconds</a>;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;terminate_on =</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <a class="code" href="../../d2/dda/stasis__app__recording_8h.html#ab65b6686f17aa43e154b56bc8be1ff38">stasis_app_recording_termination_parse</a>(args-&gt;<a class="code" href="../../d1/d6f/structast__ari__bridges__record__args.html#aa3e310c39f669355ace9a3c9d935a0ad">terminate_on</a>);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;if_exists =</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <a class="code" href="../../d2/dda/stasis__app__recording_8h.html#a9afe9d42ab4828144104dc7d062f6e9a">stasis_app_recording_if_exists_parse</a>(args-&gt;<a class="code" href="../../d1/d6f/structast__ari__bridges__record__args.html#ab0ea5e6a5ef3db8a5f75140c3a3c324c">if_exists</a>);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;beep = args-&gt;<a class="code" href="../../d1/d6f/structast__ari__bridges__record__args.html#a82d4653c798868779eda7d5ac6b77112">beep</a>;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;terminate_on == <a class="code" href="../../d2/dda/stasis__app__recording_8h.html#aaf132da3309ffcfb82c55db0b5e3a92f">STASIS_APP_RECORDING_TERMINATE_INVALID</a>) {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;         <span class="stringliteral">&quot;terminateOn invalid&quot;</span>);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;if_exists == <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236dadba683b279266f012721bd3839da240d">AST_RECORD_IF_EXISTS_ERROR</a>) {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;         response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;         <span class="stringliteral">&quot;ifExists invalid&quot;</span>);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a45a9a43d68a284ce9d8467ec9400660c">ast_get_format_for_file_ext</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>-&gt;format)) {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;         response, 422, <span class="stringliteral">&quot;Unprocessable Entity&quot;</span>,</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;         <span class="stringliteral">&quot;specified format is unknown on this system&quot;</span>);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   recording = <a class="code" href="../../d2/dda/stasis__app__recording_8h.html#ab9542f9fc14449db54ebd8e8f8abc61a">stasis_app_control_record</a>(<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a>, <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <span class="keywordflow">if</span> (recording == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">switch</span>(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keywordflow">case</span> EINVAL:</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;         <span class="comment">/* While the arguments are invalid, we should have</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">          * caught them prior to calling record.</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            <span class="stringliteral">&quot;Error parsing request&quot;</span>);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">case</span> EEXIST:</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 409, <span class="stringliteral">&quot;Conflict&quot;</span>,</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            <span class="stringliteral">&quot;Recording &#39;%s&#39; already exists and can not be overwritten&quot;</span>,</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            args-&gt;<a class="code" href="../../d1/d6f/structast__ari__bridges__record__args.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <span class="keywordflow">case</span> ENOMEM:</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="keywordflow">case</span> EPERM:</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <span class="stringliteral">&quot;Recording name invalid&quot;</span>);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            <span class="stringliteral">&quot;Unrecognized recording error: %s\n&quot;</span>,</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            response, 500, <span class="stringliteral">&quot;Internal Server Error&quot;</span>,</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            <span class="stringliteral">&quot;Internal Server Error&quot;</span>);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   }</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   uri_name_maxlen = strlen(args-&gt;<a class="code" href="../../d1/d6f/structast__ari__bridges__record__args.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>) * 3;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   uri_encoded_name = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(uri_name_maxlen);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   <span class="keywordflow">if</span> (!uri_encoded_name) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a6c73f6351bc9ca577360cf4af2231c3d">ast_uri_encode</a>(args-&gt;<a class="code" href="../../d1/d6f/structast__ari__bridges__record__args.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, uri_encoded_name, uri_name_maxlen, <a class="code" href="../../d5/d60/utils_8h.html#a7f200bdbb0ccc080852f2279a1d470dc">ast_uri_http</a>);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;recording_url, <span class="stringliteral">&quot;/recordings/live/%s&quot;</span>,</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;         uri_encoded_name) == -1) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      recording_url = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   }</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   json = <a class="code" href="../../d2/dda/stasis__app__recording_8h.html#ab282a883c01fbaf2a215c998428aecec">stasis_app_recording_to_json</a>(recording);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   <span class="keywordflow">if</span> (!json) {</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   }</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   thread_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*thread_data));</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <span class="keywordflow">if</span> (!thread_data) {</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   }</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   thread_data-&gt;<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#a347350dd844369daf6576ddc72663598">bridge_channel</a> = record_channel;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   thread_data-&gt;<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a> = <a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a>;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   thread_data-&gt;<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afd101b3d2cc1eb673b30afb631718b79">forward</a> = channel_forward;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a>(&amp;threadid, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../db/d0b/resource__bridges_8c.html#aac6fec2e40a46e9a84b477529d94da7d">bridge_channel_control_thread</a>, thread_data)) {</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(thread_data);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   }</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <span class="comment">/* These are owned by the other thread now, so we don&#39;t want RAII_VAR disposing of them. */</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   record_channel = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   <a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   channel_forward = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#a5270232ee10a8984c7717eacf2dd9d61">ast_ari_response_created</a>(response, recording_url, <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(json));</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;}</div><div class="ttc" id="structbridge__channel__control__thread__data_html_afd101b3d2cc1eb673b30afb631718b79"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html#afd101b3d2cc1eb673b30afb631718b79">bridge_channel_control_thread_data::forward</a></div><div class="ttdeci">struct stasis_forward * forward</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00284">resource_bridges.c:284</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_ac2bbc89d879fa02403a3ae90bda47b3c"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a></div><div class="ttdeci">static struct ast_bridge * find_bridge(struct ast_ari_response *response, const char *bridge_id)</div><div class="ttdoc">Finds a bridge, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00057">resource_bridges.c:57</a></div></div>
<div class="ttc" id="utils_8h_html_a832647380b1f97e7ac1b4492f8816d46"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a></div><div class="ttdeci">#define ast_pthread_create_detached(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00563">utils.h:563</a></div></div>
<div class="ttc" id="structast__ari__bridges__record__args_html_a2905291106ca33c80e595233525899e0"><div class="ttname"><a href="../../d1/d6f/structast__ari__bridges__record__args.html#a2905291106ca33c80e595233525899e0">ast_ari_bridges_record_args::max_duration_seconds</a></div><div class="ttdeci">int max_duration_seconds</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00367">resource_bridges.h:367</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="bridge__features_8h_html_adb39f3c49f940cca855ef8ae3dfc5f77a29fbd7797e61564f5f40c3361e7f4fc2"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a29fbd7797e61564f5f40c3361e7f4fc2">AST_BRIDGE_CHANNEL_FLAG_LONELY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00065">bridge_features.h:65</a></div></div>
<div class="ttc" id="stasis__app_8h_html_ae9f63d3e139d209a4aca4405e8031c6a"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#ae9f63d3e139d209a4aca4405e8031c6a">stasis_app_control_create</a></div><div class="ttdeci">struct stasis_app_control * stasis_app_control_create(struct ast_channel *chan)</div><div class="ttdoc">Creates a control handler for a channel that isn&amp;#39;t in a stasis app. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00333">res_stasis.c:333</a></div></div>
<div class="ttc" id="ari_8h_html_a5270232ee10a8984c7717eacf2dd9d61"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a5270232ee10a8984c7717eacf2dd9d61">ast_ari_response_created</a></div><div class="ttdeci">void ast_ari_response_created(struct ast_ari_response *response, const char *url, struct ast_json *message)</div><div class="ttdoc">Fill in a Created (201) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00305">res_ari.c:305</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="utils_8h_html_a6c73f6351bc9ca577360cf4af2231c3d"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a6c73f6351bc9ca577360cf4af2231c3d">ast_uri_encode</a></div><div class="ttdeci">char * ast_uri_encode(const char *string, char *outbuf, int buflen, struct ast_flags spec)</div><div class="ttdoc">Turn text string to URI-encoded XX version. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00577">main/utils.c:577</a></div></div>
<div class="ttc" id="structbridge__channel__control__thread__data_html"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html">bridge_channel_control_thread_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00281">resource_bridges.c:281</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="stasis__app__recording_8h_html_ab65b6686f17aa43e154b56bc8be1ff38"><div class="ttname"><a href="../../d2/dda/stasis__app__recording_8h.html#ab65b6686f17aa43e154b56bc8be1ff38">stasis_app_recording_termination_parse</a></div><div class="ttdeci">char stasis_app_recording_termination_parse(const char *str)</div><div class="ttdoc">Parse a string into the recording termination enum. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/res__stasis__recording_8c_source.html#l00169">res_stasis_recording.c:169</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__ari__bridges__record__args_html_a341e7b33d7f23481999b4102138d820b"><div class="ttname"><a href="../../d1/d6f/structast__ari__bridges__record__args.html#a341e7b33d7f23481999b4102138d820b">ast_ari_bridges_record_args::bridge_id</a></div><div class="ttdeci">const char * bridge_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00361">resource_bridges.h:361</a></div></div>
<div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="bridge__features_8h_html_adb39f3c49f940cca855ef8ae3dfc5f77a0e985ea384c79e5e35055ecc0ffb2c57"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a0e985ea384c79e5e35055ecc0ffb2c57">AST_BRIDGE_CHANNEL_FLAG_IMMOVABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00067">bridge_features.h:67</a></div></div>
<div class="ttc" id="stasis__app__recording_8h_html_ab282a883c01fbaf2a215c998428aecec"><div class="ttname"><a href="../../d2/dda/stasis__app__recording_8h.html#ab282a883c01fbaf2a215c998428aecec">stasis_app_recording_to_json</a></div><div class="ttdeci">struct ast_json * stasis_app_recording_to_json(const struct stasis_app_recording *recording)</div><div class="ttdoc">Construct a JSON model of a recording. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/res__stasis__recording_8c_source.html#l00478">res_stasis_recording.c:478</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="stasis__app__recording_8h_html_aaf132da3309ffcfb82c55db0b5e3a92f"><div class="ttname"><a href="../../d2/dda/stasis__app__recording_8h.html#aaf132da3309ffcfb82c55db0b5e3a92f">STASIS_APP_RECORDING_TERMINATE_INVALID</a></div><div class="ttdeci">#define STASIS_APP_RECORDING_TERMINATE_INVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dda/stasis__app__recording_8h_source.html#l00172">stasis_app_recording.h:172</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__ari__bridges__record__args_html_ab0ea5e6a5ef3db8a5f75140c3a3c324c"><div class="ttname"><a href="../../d1/d6f/structast__ari__bridges__record__args.html#ab0ea5e6a5ef3db8a5f75140c3a3c324c">ast_ari_bridges_record_args::if_exists</a></div><div class="ttdeci">const char * if_exists</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00371">resource_bridges.h:371</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_aac6fec2e40a46e9a84b477529d94da7d"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#aac6fec2e40a46e9a84b477529d94da7d">bridge_channel_control_thread</a></div><div class="ttdeci">static void * bridge_channel_control_thread(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00288">resource_bridges.c:288</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a9b227b77345689fc4278e0d0f287f85e"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a9b227b77345689fc4278e0d0f287f85e">ast_unreal_channel_push_to_bridge</a></div><div class="ttdeci">int ast_unreal_channel_push_to_bridge(struct ast_channel *ast, struct ast_bridge *bridge, unsigned int flags)</div><div class="ttdoc">Push the semi2 unreal channel into a bridge from either member of the unreal pair. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00928">core_unreal.c:928</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="structast__ari__bridges__record__args_html_a6bd2bb5fcc7628a640958994a22f997c"><div class="ttname"><a href="../../d1/d6f/structast__ari__bridges__record__args.html#a6bd2bb5fcc7628a640958994a22f997c">ast_ari_bridges_record_args::format</a></div><div class="ttdeci">const char * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00365">resource_bridges.h:365</a></div></div>
<div class="ttc" id="channel_8h_html_afdeaf9abb1aecc715313a4f62c1cf9c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a></div><div class="ttdeci">struct stasis_topic * ast_channel_topic(struct ast_channel *chan)</div><div class="ttdoc">A topic which publishes the events for a particular channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01502">channel_internal_api.c:1502</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="stasis__app__recording_8h_html_a9afe9d42ab4828144104dc7d062f6e9a"><div class="ttname"><a href="../../d2/dda/stasis__app__recording_8h.html#a9afe9d42ab4828144104dc7d062f6e9a">stasis_app_recording_if_exists_parse</a></div><div class="ttdeci">enum ast_record_if_exists stasis_app_recording_if_exists_parse(const char *str)</div><div class="ttdoc">Parse a string into the if_exists enum. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/res__stasis__recording_8c_source.html#l00194">res_stasis_recording.c:194</a></div></div>
<div class="ttc" id="structast__ari__bridges__record__args_html_aa3e310c39f669355ace9a3c9d935a0ad"><div class="ttname"><a href="../../d1/d6f/structast__ari__bridges__record__args.html#aa3e310c39f669355ace9a3c9d935a0ad">ast_ari_bridges_record_args::terminate_on</a></div><div class="ttdeci">const char * terminate_on</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00375">resource_bridges.h:375</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structstasis__app__recording_html"><div class="ttname"><a href="../../dc/d5e/structstasis__app__recording.html">stasis_app_recording</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/res__stasis__recording_8c_source.html#l00053">res_stasis_recording.c:53</a></div></div>
<div class="ttc" id="structstasis__app__recording__options_html"><div class="ttname"><a href="../../d0/dba/structstasis__app__recording__options.html">stasis_app_recording_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dda/stasis__app__recording_8h_source.html#l00176">stasis_app_recording.h:176</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="structast__ari__bridges__record__args_html_a82d4653c798868779eda7d5ac6b77112"><div class="ttname"><a href="../../d1/d6f/structast__ari__bridges__record__args.html#a82d4653c798868779eda7d5ac6b77112">ast_ari_bridges_record_args::beep</a></div><div class="ttdeci">int beep</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00373">resource_bridges.h:373</a></div></div>
<div class="ttc" id="stasis__app__recording_8h_html_a7e584de6354b58e0ab9f75796715aca2"><div class="ttname"><a href="../../d2/dda/stasis__app__recording_8h.html#a7e584de6354b58e0ab9f75796715aca2">stasis_app_recording_options_create</a></div><div class="ttdeci">struct stasis_app_recording_options * stasis_app_recording_options_create(const char *name, const char *format)</div><div class="ttdoc">Allocate a recording options object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/res__stasis__recording_8c_source.html#l00151">res_stasis_recording.c:151</a></div></div>
<div class="ttc" id="stasis_8h_html_a5713715b0f26f4943d0af05363b07027"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_cancel(struct stasis_forward *forward)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01548">stasis.c:1548</a></div></div>
<div class="ttc" id="structbridge__channel__control__thread__data_html_a347350dd844369daf6576ddc72663598"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html#a347350dd844369daf6576ddc72663598">bridge_channel_control_thread_data::bridge_channel</a></div><div class="ttdeci">struct ast_channel * bridge_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00282">resource_bridges.c:282</a></div></div>
<div class="ttc" id="file_8h_html_a45a9a43d68a284ce9d8467ec9400660c"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a45a9a43d68a284ce9d8467ec9400660c">ast_get_format_for_file_ext</a></div><div class="ttdeci">struct ast_format * ast_get_format_for_file_ext(const char *file_ext)</div><div class="ttdoc">Get the ast_format associated with the given file extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01938">file.c:1938</a></div></div>
<div class="ttc" id="stringfields_8h_html_a8b9f4347fc72720cc5cead952b54abe9"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a></div><div class="ttdeci">#define ast_string_field_build(x, field, fmt, args...)</div><div class="ttdoc">Set a field to a complex (built) value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00550">stringfields.h:550</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_ab72d3618da7594cf41aa89115b7f3298"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#ab72d3618da7594cf41aa89115b7f3298">prepare_bridge_media_channel</a></div><div class="ttdeci">static struct ast_channel * prepare_bridge_media_channel(const char *type)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00314">resource_bridges.c:314</a></div></div>
<div class="ttc" id="structast__ari__bridges__record__args_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d1/d6f/structast__ari__bridges__record__args.html#a8f8f80d37794cde9472343e4487ba3eb">ast_ari_bridges_record_args::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00363">resource_bridges.h:363</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__ari__bridges__record__args_html_aa0c1e600b53dd4f48dd371964f8a7361"><div class="ttname"><a href="../../d1/d6f/structast__ari__bridges__record__args.html#aa0c1e600b53dd4f48dd371964f8a7361">ast_ari_bridges_record_args::max_silence_seconds</a></div><div class="ttdeci">int max_silence_seconds</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00369">resource_bridges.h:369</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structstasis__forward_html"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html">stasis_forward</a></div><div class="ttdoc">Forwarding information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01531">stasis.c:1531</a></div></div>
<div class="ttc" id="utils_8h_html_a7f200bdbb0ccc080852f2279a1d470dc"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7f200bdbb0ccc080852f2279a1d470dc">ast_uri_http</a></div><div class="ttdeci">const struct ast_flags ast_uri_http</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00573">main/utils.c:573</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac665722c9bfe6d9b506df95184aa236dadba683b279266f012721bd3839da240d"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236dadba683b279266f012721bd3839da240d">AST_RECORD_IF_EXISTS_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01074">include/asterisk/app.h:1074</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a7bdfd8273bb885f7a65f6f5d8188c915"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic(struct ast_bridge *bridge)</div><div class="ttdoc">A topic which publishes the events for a particular bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00184">stasis_bridges.c:184</a></div></div>
<div class="ttc" id="stasis_8h_html_a2513a93567ddc93510f7896b777da119"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_all(struct stasis_topic *from_topic, struct stasis_topic *to_topic)</div><div class="ttdoc">Create a subscription which forwards all messages from one topic to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01578">stasis.c:1578</a></div></div>
<div class="ttc" id="structbridge__channel__control__thread__data_html_afaaaf017d50970ec382b98a35e24c095"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">bridge_channel_control_thread_data::control</a></div><div class="ttdeci">struct stasis_app_control * control</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00283">resource_bridges.c:283</a></div></div>
<div class="ttc" id="stasis__app__recording_8h_html_ab9542f9fc14449db54ebd8e8f8abc61a"><div class="ttname"><a href="../../d2/dda/stasis__app__recording_8h.html#ab9542f9fc14449db54ebd8e8f8abc61a">stasis_app_control_record</a></div><div class="ttdeci">struct stasis_app_recording * stasis_app_control_record(struct stasis_app_control *control, struct stasis_app_recording_options *options)</div><div class="ttdoc">Record media from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/res__stasis__recording_8c_source.html#l00370">res_stasis_recording.c:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5181cdf4f8a92ce2db79103c67227305"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5181cdf4f8a92ce2db79103c67227305">&#9670;&nbsp;</a></span>ast_ari_bridges_remove_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_remove_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/d3b/structast__ari__bridges__remove__channel__args.html">ast_ari_bridges_remove_channel_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a channel from a bridge. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00241">241</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00182">ast_ari_bridges_remove_channel_args::bridge_id</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00184">ast_ari_bridges_remove_channel_args::channel</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00186">ast_ari_bridges_remove_channel_args::channel_count</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00138">control_list_create()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00057">find_bridge()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/de3/control_8c_source.html#l01420">stasis_app_control_remove_channel_from_bridge()</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00931">stasis_app_get_bridge()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l00620">ast_ari_bridges_remove_channel_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;{</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, bridge, <a class="code" href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a>(response, args-&gt;<a class="code" href="../../d6/d3b/structast__ari__bridges__remove__channel__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/ddb/structcontrol__list.html">control_list</a> *, list, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keywordtype">size_t</span> i;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="comment">/* Response filled in by find_bridge() */</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   list = <a class="code" href="../../db/d0b/resource__bridges_8c.html#a953b9fe725211bf8fa11fca96453d6ef">control_list_create</a>(response, args-&gt;<a class="code" href="../../d6/d3b/structast__ari__bridges__remove__channel__args.html#a880c010e92b71fa8a958ac2c02e40d8a">channel_count</a>, args-&gt;<a class="code" href="../../d6/d3b/structast__ari__bridges__remove__channel__args.html#a77981116a5d7922e38c45bd806385a28">channel</a>);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <span class="keywordflow">if</span> (!list) {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="comment">/* Response filled in by control_list_create() */</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <span class="comment">/* Make sure all of the channels are in this bridge */</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; list-&gt;count; ++i) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9c/stasis__app_8h.html#a00eec5811d50eb68749bf440708e156b">stasis_app_get_bridge</a>(list-&gt;controls[i]) != bridge) {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Channel %s not in bridge %s\n&quot;</span>,</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            args-&gt;<a class="code" href="../../d6/d3b/structast__ari__bridges__remove__channel__args.html#a77981116a5d7922e38c45bd806385a28">channel</a>[i], args-&gt;<a class="code" href="../../d6/d3b/structast__ari__bridges__remove__channel__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 422,</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="stringliteral">&quot;Unprocessable Entity&quot;</span>,</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="stringliteral">&quot;Channel not in this bridge&quot;</span>);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <span class="comment">/* Now actually remove it */</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; list-&gt;count; ++i) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <a class="code" href="../../d8/d9c/stasis__app_8h.html#a874dcd52a4209a376cfdd082ec21725b">stasis_app_control_remove_channel_from_bridge</a>(list-&gt;controls[i],</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;         bridge);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div><div class="ttc" id="stasis__app_8h_html_a00eec5811d50eb68749bf440708e156b"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a00eec5811d50eb68749bf440708e156b">stasis_app_get_bridge</a></div><div class="ttdeci">struct ast_bridge * stasis_app_get_bridge(struct stasis_app_control *control)</div><div class="ttdoc">Gets the bridge currently associated with a control object. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00931">control.c:931</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_ac2bbc89d879fa02403a3ae90bda47b3c"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a></div><div class="ttdeci">static struct ast_bridge * find_bridge(struct ast_ari_response *response, const char *bridge_id)</div><div class="ttdoc">Finds a bridge, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00057">resource_bridges.c:57</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a874dcd52a4209a376cfdd082ec21725b"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a874dcd52a4209a376cfdd082ec21725b">stasis_app_control_remove_channel_from_bridge</a></div><div class="ttdeci">int stasis_app_control_remove_channel_from_bridge(struct stasis_app_control *control, struct ast_bridge *bridge)</div><div class="ttdoc">Remove a channel from the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l01420">control.c:1420</a></div></div>
<div class="ttc" id="structast__ari__bridges__remove__channel__args_html_a77981116a5d7922e38c45bd806385a28"><div class="ttname"><a href="../../d6/d3b/structast__ari__bridges__remove__channel__args.html#a77981116a5d7922e38c45bd806385a28">ast_ari_bridges_remove_channel_args::channel</a></div><div class="ttdeci">const char ** channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00184">resource_bridges.h:184</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_a953b9fe725211bf8fa11fca96453d6ef"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a953b9fe725211bf8fa11fca96453d6ef">control_list_create</a></div><div class="ttdeci">static struct control_list * control_list_create(struct ast_ari_response *response, size_t count, const char **channels)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00138">resource_bridges.c:138</a></div></div>
<div class="ttc" id="structast__ari__bridges__remove__channel__args_html_a880c010e92b71fa8a958ac2c02e40d8a"><div class="ttname"><a href="../../d6/d3b/structast__ari__bridges__remove__channel__args.html#a880c010e92b71fa8a958ac2c02e40d8a">ast_ari_bridges_remove_channel_args::channel_count</a></div><div class="ttdeci">size_t channel_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00186">resource_bridges.h:186</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structcontrol__list_html"><div class="ttname"><a href="../../d7/ddb/structcontrol__list.html">control_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00123">resource_bridges.c:123</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__ari__bridges__remove__channel__args_html_a341e7b33d7f23481999b4102138d820b"><div class="ttname"><a href="../../d6/d3b/structast__ari__bridges__remove__channel__args.html#a341e7b33d7f23481999b4102138d820b">ast_ari_bridges_remove_channel_args::bridge_id</a></div><div class="ttdeci">const char * bridge_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00182">resource_bridges.h:182</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa147e50296c4ad607180679411ca01f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa147e50296c4ad607180679411ca01f3">&#9670;&nbsp;</a></span>ast_ari_bridges_set_video_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_set_video_source </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/def/structast__ari__bridges__set__video__source__args.html">ast_ari_bridges_set_video_source_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a channel as the video source in a multi-party mixing bridge. This operation has no effect on bridges with two or fewer participants. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l01016">1016</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00674">__ao2_cleanup()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00212">ast_ari_bridges_set_video_source_args::bridge_id</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l01004">bridge_set_video_source_cb()</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00214">ast_ari_bridges_set_video_source_args::channel_id</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00057">find_bridge()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00092">find_channel_control()</a>, <a class="el" href="../../de/de3/control_8c_source.html#l00931">stasis_app_get_bridge()</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l00898">stasis_app_send_command()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l00733">ast_ari_bridges_set_video_source_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;{</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *control;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   bridge = <a class="code" href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a>(response, args-&gt;<a class="code" href="../../d6/def/structast__ari__bridges__set__video__source__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   control = <a class="code" href="../../db/d0b/resource__bridges_8c.html#aab32e8211abc8373be1cefcec607db5f">find_channel_control</a>(response, args-&gt;<a class="code" href="../../d6/def/structast__ari__bridges__set__video__source__args.html#a7bbc34408b1217a7cb9b1005f560c76c">channel_id</a>);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   <span class="keywordflow">if</span> (!control) {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, -1);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;   }</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9c/stasis__app_8h.html#a00eec5811d50eb68749bf440708e156b">stasis_app_get_bridge</a>(control) != bridge) {</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 422,</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;         <span class="stringliteral">&quot;Unprocessable Entity&quot;</span>,</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;         <span class="stringliteral">&quot;Channel not in this bridge&quot;</span>);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, -1);</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(control, -1);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;   }</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   <a class="code" href="../../de/d0b/stasis__app__impl_8h.html#a36343c21d88758d9df3ff6aa217caf5d">stasis_app_send_command</a>(control, <a class="code" href="../../db/d0b/resource__bridges_8c.html#a43e560d13bcb59bd243cc26cd664c14e">bridge_set_video_source_cb</a>,</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(bridge), <a class="code" href="../../d5/da5/astobj2_8h.html#ab940ba7749a2a12c3e9a356bd26fd744">__ao2_cleanup</a>);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, -1);</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(control, -1);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;}</div><div class="ttc" id="stasis__app_8h_html_a00eec5811d50eb68749bf440708e156b"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a00eec5811d50eb68749bf440708e156b">stasis_app_get_bridge</a></div><div class="ttdeci">struct ast_bridge * stasis_app_get_bridge(struct stasis_app_control *control)</div><div class="ttdoc">Gets the bridge currently associated with a control object. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00931">control.c:931</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_ac2bbc89d879fa02403a3ae90bda47b3c"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a></div><div class="ttdeci">static struct ast_bridge * find_bridge(struct ast_ari_response *response, const char *bridge_id)</div><div class="ttdoc">Finds a bridge, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00057">resource_bridges.c:57</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab940ba7749a2a12c3e9a356bd26fd744"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab940ba7749a2a12c3e9a356bd26fd744">__ao2_cleanup</a></div><div class="ttdeci">void __ao2_cleanup(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00674">astobj2.c:674</a></div></div>
<div class="ttc" id="stasis__app__impl_8h_html_a36343c21d88758d9df3ff6aa217caf5d"><div class="ttname"><a href="../../de/d0b/stasis__app__impl_8h.html#a36343c21d88758d9df3ff6aa217caf5d">stasis_app_send_command</a></div><div class="ttdeci">int stasis_app_send_command(struct stasis_app_control *control, stasis_app_command_cb command, void *data, command_data_destructor_fn data_destructor)</div><div class="ttdoc">Invokes a command on a control&amp;#39;s channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00898">control.c:898</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_a43e560d13bcb59bd243cc26cd664c14e"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a43e560d13bcb59bd243cc26cd664c14e">bridge_set_video_source_cb</a></div><div class="ttdeci">static int bridge_set_video_source_cb(struct stasis_app_control *control, struct ast_channel *chan, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l01004">resource_bridges.c:1004</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__ari__bridges__set__video__source__args_html_a7bbc34408b1217a7cb9b1005f560c76c"><div class="ttname"><a href="../../d6/def/structast__ari__bridges__set__video__source__args.html#a7bbc34408b1217a7cb9b1005f560c76c">ast_ari_bridges_set_video_source_args::channel_id</a></div><div class="ttdeci">const char * channel_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00214">resource_bridges.h:214</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_aab32e8211abc8373be1cefcec607db5f"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#aab32e8211abc8373be1cefcec607db5f">find_channel_control</a></div><div class="ttdeci">static struct stasis_app_control * find_channel_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00092">resource_bridges.c:92</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="structast__ari__bridges__set__video__source__args_html_a341e7b33d7f23481999b4102138d820b"><div class="ttname"><a href="../../d6/def/structast__ari__bridges__set__video__source__args.html#a341e7b33d7f23481999b4102138d820b">ast_ari_bridges_set_video_source_args::bridge_id</a></div><div class="ttdeci">const char * bridge_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00212">resource_bridges.h:212</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad242de45e68c1b1be9ff5ca70f2b89c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad242de45e68c1b1be9ff5ca70f2b89c9">&#9670;&nbsp;</a></span>ast_ari_bridges_start_moh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_start_moh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/dc7/structast__ari__bridges__start__moh__args.html">ast_ari_bridges_start_moh_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Play music on hold to a bridge or change the MOH class that is playing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00809">809</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07866">ast_moh_start()</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00240">ast_ari_bridges_start_moh_args::bridge_id</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00057">find_bridge()</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00242">ast_ari_bridges_start_moh_args::moh_class</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00629">stasis_app_bridge_moh_channel()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l00867">ast_ari_bridges_start_moh_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;{</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, <a class="code" href="../../da/da4/structstasis__app__control.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, <a class="code" href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a>(response, args-&gt;<a class="code" href="../../d9/dc7/structast__ari__bridges__start__moh__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *moh_channel;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *moh_class = args-&gt;<a class="code" href="../../d9/dc7/structast__ari__bridges__start__moh__args.html#a1aeb479358786529a135e404de8fa504">moh_class</a>;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="comment">/* The response is provided by find_bridge() */</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   moh_channel = <a class="code" href="../../d8/d9c/stasis__app_8h.html#a63e7e7260fa51f143f37037152a066ac">stasis_app_bridge_moh_channel</a>(bridge);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <span class="keywordflow">if</span> (!moh_channel) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   }</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <a class="code" href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a>(moh_channel, moh_class, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>(moh_channel);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="resource__bridges_8c_html_ac2bbc89d879fa02403a3ae90bda47b3c"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a></div><div class="ttdeci">static struct ast_bridge * find_bridge(struct ast_ari_response *response, const char *bridge_id)</div><div class="ttdoc">Finds a bridge, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00057">resource_bridges.c:57</a></div></div>
<div class="ttc" id="structast__ari__bridges__start__moh__args_html_a341e7b33d7f23481999b4102138d820b"><div class="ttname"><a href="../../d9/dc7/structast__ari__bridges__start__moh__args.html#a341e7b33d7f23481999b4102138d820b">ast_ari_bridges_start_moh_args::bridge_id</a></div><div class="ttdeci">const char * bridge_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00240">resource_bridges.h:240</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a2acec01f2fddd8ca494d874003815cf7"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a></div><div class="ttdeci">int ast_moh_start(struct ast_channel *chan, const char *mclass, const char *interpclass)</div><div class="ttdoc">Turn on music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07866">channel.c:7866</a></div></div>
<div class="ttc" id="structstasis__app__control_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html#a4fe7571e3c1759f3689d4453c132bdb7">stasis_app_control::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00064">control.c:64</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="structast__ari__bridges__start__moh__args_html_a1aeb479358786529a135e404de8fa504"><div class="ttname"><a href="../../d9/dc7/structast__ari__bridges__start__moh__args.html#a1aeb479358786529a135e404de8fa504">ast_ari_bridges_start_moh_args::moh_class</a></div><div class="ttdeci">const char * moh_class</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00242">resource_bridges.h:242</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a63e7e7260fa51f143f37037152a066ac"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a63e7e7260fa51f143f37037152a066ac">stasis_app_bridge_moh_channel</a></div><div class="ttdeci">struct ast_channel * stasis_app_bridge_moh_channel(struct ast_bridge *bridge)</div><div class="ttdoc">Finds or creates an announcer channel in a bridge that can play music on hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00629">res_stasis.c:629</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeeb66d1ab0d54ec71f1dd07aa63bde90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeb66d1ab0d54ec71f1dd07aa63bde90">&#9670;&nbsp;</a></span>ast_ari_bridges_stop_moh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_ari_bridges_stop_moh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/dad/structast__ari__bridges__stop__moh__args.html">ast_ari_bridges_stop_moh_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop playing music on hold to a bridge. </p>
<p>This will only stop music on hold being played via POST bridges/{bridgeId}/moh.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">headers</td><td>HTTP headers </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Swagger parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>HTTP response </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00835">835</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00284">ast_ari_response_no_content()</a>, <a class="el" href="../../d5/d36/resource__bridges_8h_source.html#l00266">ast_ari_bridges_stop_moh_args::bridge_id</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00057">find_bridge()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00649">stasis_app_bridge_moh_stop()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l00936">ast_ari_bridges_stop_moh_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;{</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, bridge, <a class="code" href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a>(response, args-&gt;<a class="code" href="../../d4/dad/structast__ari__bridges__stop__moh__args.html#a341e7b33d7f23481999b4102138d820b">bridge_id</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="comment">/* the response is provided by find_bridge() */</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   }</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9c/stasis__app_8h.html#afb885cfb6f40052e5246ecd9b47e8330">stasis_app_bridge_moh_stop</a>(bridge)) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;         response, 409, <span class="stringliteral">&quot;Conflict&quot;</span>,</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;         <span class="stringliteral">&quot;Bridge isn&#39;t playing music&quot;</span>);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   }</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;   <a class="code" href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a>(response);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;}</div><div class="ttc" id="resource__bridges_8c_html_ac2bbc89d879fa02403a3ae90bda47b3c"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#ac2bbc89d879fa02403a3ae90bda47b3c">find_bridge</a></div><div class="ttdeci">static struct ast_bridge * find_bridge(struct ast_ari_response *response, const char *bridge_id)</div><div class="ttdoc">Finds a bridge, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00057">resource_bridges.c:57</a></div></div>
<div class="ttc" id="structast__ari__bridges__stop__moh__args_html_a341e7b33d7f23481999b4102138d820b"><div class="ttname"><a href="../../d4/dad/structast__ari__bridges__stop__moh__args.html#a341e7b33d7f23481999b4102138d820b">ast_ari_bridges_stop_moh_args::bridge_id</a></div><div class="ttdeci">const char * bridge_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/resource__bridges_8h_source.html#l00266">resource_bridges.h:266</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="stasis__app_8h_html_afb885cfb6f40052e5246ecd9b47e8330"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#afb885cfb6f40052e5246ecd9b47e8330">stasis_app_bridge_moh_stop</a></div><div class="ttdeci">int stasis_app_bridge_moh_stop(struct ast_bridge *bridge)</div><div class="ttdoc">Breaks down MOH channels playing on the bridge created by stasis_app_bridge_moh_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00649">res_stasis.c:649</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="ari_8h_html_ab262e32dcec701670c2f1ab63cbfb9fb"><div class="ttname"><a href="../../d4/d59/ari_8h.html#ab262e32dcec701670c2f1ab63cbfb9fb">ast_ari_response_no_content</a></div><div class="ttdeci">void ast_ari_response_no_content(struct ast_ari_response *response)</div><div class="ttdoc">Fill in a No Content (204) ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00284">res_ari.c:284</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aac6fec2e40a46e9a84b477529d94da7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac6fec2e40a46e9a84b477529d94da7d">&#9670;&nbsp;</a></span>bridge_channel_control_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* bridge_channel_control_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00288">288</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l01984">ast_callid_threadassoc_add()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00793">ast_channel_callid()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00282">bridge_channel_control_thread_data::bridge_channel</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00285">bridge_channel_control_thread_data::bridge_id</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00283">bridge_channel_control_thread_data::control</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00284">bridge_channel_control_thread_data::forward</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00743">stasis_app_bridge_playback_channel_remove()</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l01250">stasis_app_control_execute_until_exhausted()</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l01278">stasis_app_control_flush_queue()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">stasis_forward_cancel()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00407">ari_bridges_play_new()</a>, and <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00634">ast_ari_bridges_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;{</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html">bridge_channel_control_thread_data</a> *thread_data = data;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *bridge_channel = thread_data-&gt;<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#a347350dd844369daf6576ddc72663598">bridge_channel</a>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *control = thread_data-&gt;<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">control</a>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *forward = thread_data-&gt;<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#afd101b3d2cc1eb673b30afb631718b79">forward</a>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6db44a7e26f0bc42801fc7225817c6a1">ast_callid</a> callid = <a class="code" href="../../d5/d7b/channel_8h.html#a6c2c406bdebd477029e61774cc300abd">ast_channel_callid</a>(bridge_channel);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keywordtype">char</span> *bridge_id = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(thread_data-&gt;<a class="code" href="../../d6/dd9/structbridge__channel__control__thread__data.html#a118fa444f5a7f5f25406b1ec0d06af3a">bridge_id</a>);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   <span class="keywordflow">if</span> (callid) {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a6956becf4d7e3906c74b6e30b834ebd8">ast_callid_threadassoc_add</a>(callid);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(thread_data);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   thread_data = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a749c2ea261eace2b153f5f3a8b89e9f0">stasis_app_control_execute_until_exhausted</a>(bridge_channel, control);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a8188f94c15b15db5f01a9d14e191658d">stasis_app_control_flush_queue</a>(control);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <a class="code" href="../../d8/d9c/stasis__app_8h.html#a015fc5f54ed4261703fb8e7e307f012e">stasis_app_bridge_playback_channel_remove</a>(bridge_id, control);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>(forward);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(control);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(bridge_channel);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div><div class="ttc" id="structbridge__channel__control__thread__data_html_afd101b3d2cc1eb673b30afb631718b79"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html#afd101b3d2cc1eb673b30afb631718b79">bridge_channel_control_thread_data::forward</a></div><div class="ttdeci">struct stasis_forward * forward</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00284">resource_bridges.c:284</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structbridge__channel__control__thread__data_html_a118fa444f5a7f5f25406b1ec0d06af3a"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html#a118fa444f5a7f5f25406b1ec0d06af3a">bridge_channel_control_thread_data::bridge_id</a></div><div class="ttdeci">char bridge_id[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00285">resource_bridges.c:285</a></div></div>
<div class="ttc" id="structbridge__channel__control__thread__data_html"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html">bridge_channel_control_thread_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00281">resource_bridges.c:281</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a015fc5f54ed4261703fb8e7e307f012e"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a015fc5f54ed4261703fb8e7e307f012e">stasis_app_bridge_playback_channel_remove</a></div><div class="ttdeci">void stasis_app_bridge_playback_channel_remove(char *bridge_id, struct stasis_app_control *control)</div><div class="ttdoc">remove channel from list of ARI playback channels for bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00743">res_stasis.c:743</a></div></div>
<div class="ttc" id="logger_8h_html_a6db44a7e26f0bc42801fc7225817c6a1"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6db44a7e26f0bc42801fc7225817c6a1">ast_callid</a></div><div class="ttdeci">unsigned int ast_callid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00087">logger.h:87</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a6956becf4d7e3906c74b6e30b834ebd8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6956becf4d7e3906c74b6e30b834ebd8">ast_callid_threadassoc_add</a></div><div class="ttdeci">int ast_callid_threadassoc_add(ast_callid callid)</div><div class="ttdoc">Adds a known callid to thread storage of the calling thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l01984">logger.c:1984</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a8188f94c15b15db5f01a9d14e191658d"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a8188f94c15b15db5f01a9d14e191658d">stasis_app_control_flush_queue</a></div><div class="ttdeci">void stasis_app_control_flush_queue(struct stasis_app_control *control)</div><div class="ttdoc">Flush the control command queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l01278">res_stasis.c:1278</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="stasis_8h_html_a5713715b0f26f4943d0af05363b07027"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_cancel(struct stasis_forward *forward)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01548">stasis.c:1548</a></div></div>
<div class="ttc" id="structbridge__channel__control__thread__data_html_a347350dd844369daf6576ddc72663598"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html#a347350dd844369daf6576ddc72663598">bridge_channel_control_thread_data::bridge_channel</a></div><div class="ttdeci">struct ast_channel * bridge_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00282">resource_bridges.c:282</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a749c2ea261eace2b153f5f3a8b89e9f0"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a749c2ea261eace2b153f5f3a8b89e9f0">stasis_app_control_execute_until_exhausted</a></div><div class="ttdeci">void stasis_app_control_execute_until_exhausted(struct ast_channel *chan, struct stasis_app_control *control)</div><div class="ttdoc">Act on a stasis app control queue until it is empty. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l01250">res_stasis.c:1250</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structstasis__forward_html"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html">stasis_forward</a></div><div class="ttdoc">Forwarding information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01531">stasis.c:1531</a></div></div>
<div class="ttc" id="structbridge__channel__control__thread__data_html_afaaaf017d50970ec382b98a35e24c095"><div class="ttname"><a href="../../d6/dd9/structbridge__channel__control__thread__data.html#afaaaf017d50970ec382b98a35e24c095">bridge_channel_control_thread_data::control</a></div><div class="ttdeci">struct stasis_app_control * control</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00283">resource_bridges.c:283</a></div></div>
<div class="ttc" id="channel_8h_html_a6c2c406bdebd477029e61774cc300abd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6c2c406bdebd477029e61774cc300abd">ast_channel_callid</a></div><div class="ttdeci">ast_callid ast_channel_callid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00793">channel_internal_api.c:793</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a43e560d13bcb59bd243cc26cd664c14e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43e560d13bcb59bd243cc26cd664c14e">&#9670;&nbsp;</a></span>bridge_set_video_source_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_set_video_source_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *&#160;</td>
          <td class="paramname"><em>control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l01004">1004</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d56/bridge_8h_source.html#l00480">ast_bridge_lock</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03816">ast_bridge_set_single_src_video_mode()</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l01016">ast_ari_bridges_set_video_source()</a>.</p>
<div class="fragment"><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;{</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge = data;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(bridge);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a8995453900a91100f3cd936594f41435">ast_bridge_set_single_src_video_mode</a>(bridge, chan);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;}</div><div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="bridge_8h_html_a8995453900a91100f3cd936594f41435"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a8995453900a91100f3cd936594f41435">ast_bridge_set_single_src_video_mode</a></div><div class="ttdeci">void ast_bridge_set_single_src_video_mode(struct ast_bridge *bridge, struct ast_channel *video_src_chan)</div><div class="ttdoc">Set a bridge to feed a single video source to all participants. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03816">bridge.c:3816</a></div></div>
<div class="ttc" id="bridge_8h_html_ab8ee807d2c3a21d19e16fedf35c90de8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a></div><div class="ttdeci">#define ast_bridge_lock(bridge)</div><div class="ttdoc">Lock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00480">bridge.h:480</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a89da67dec9c5f52bf6b1db891d586ed6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89da67dec9c5f52bf6b1db891d586ed6">&#9670;&nbsp;</a></span>check_add_remove_channel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_add_remove_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *&#160;</td>
          <td class="paramname"><em>control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d8/d9c/stasis__app_8h.html#ad8806ce156147c9a6daff8a6c9294211">stasis_app_control_channel_result</a>&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00175">175</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d8/d9c/stasis__app_8h_source.html#l00779">STASIS_APP_CHANNEL_OKAY</a>, <a class="el" href="../../d8/d9c/stasis__app_8h_source.html#l00781">STASIS_APP_CHANNEL_RECORDING</a>, and <a class="el" href="../../de/de3/control_8c_source.html#l01430">stasis_app_control_get_channel_id()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00191">ast_ari_bridges_add_channel()</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>) {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d9c/stasis__app_8h.html#ad8806ce156147c9a6daff8a6c9294211a6604de6e80d963507e730680226140b2">STASIS_APP_CHANNEL_RECORDING</a> :</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;         response, 409, <span class="stringliteral">&quot;Conflict&quot;</span>, <span class="stringliteral">&quot;Channel %s currently recording&quot;</span>,</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;         <a class="code" href="../../d8/d9c/stasis__app_8h.html#a765833b409f1e57016e7fff07d9e0a01">stasis_app_control_get_channel_id</a>(control));</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d9c/stasis__app_8h.html#ad8806ce156147c9a6daff8a6c9294211a974fc1b7c53cee860810d036888b8003">STASIS_APP_CHANNEL_OKAY</a>:</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   }</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div><div class="ttc" id="stasis__app_8h_html_ad8806ce156147c9a6daff8a6c9294211a974fc1b7c53cee860810d036888b8003"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#ad8806ce156147c9a6daff8a6c9294211a974fc1b7c53cee860810d036888b8003">STASIS_APP_CHANNEL_OKAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d9c/stasis__app_8h_source.html#l00779">stasis_app.h:779</a></div></div>
<div class="ttc" id="stasis__app_8h_html_ad8806ce156147c9a6daff8a6c9294211a6604de6e80d963507e730680226140b2"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#ad8806ce156147c9a6daff8a6c9294211a6604de6e80d963507e730680226140b2">STASIS_APP_CHANNEL_RECORDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d9c/stasis__app_8h_source.html#l00781">stasis_app.h:781</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a765833b409f1e57016e7fff07d9e0a01"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a765833b409f1e57016e7fff07d9e0a01">stasis_app_control_get_channel_id</a></div><div class="ttdeci">const char * stasis_app_control_get_channel_id(const struct stasis_app_control *control)</div><div class="ttdoc">Returns the uniqueid of the channel associated with this control. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l01430">control.c:1430</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a953b9fe725211bf8fa11fca96453d6ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a953b9fe725211bf8fa11fca96453d6ef">&#9670;&nbsp;</a></span>control_list_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d7/ddb/structcontrol__list.html">control_list</a>* control_list_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>channels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00138">138</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00298">ast_ari_response_alloc_failed()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00128">control_list_dtor()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00124">control_list::count</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00092">find_channel_control()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00191">ast_ari_bridges_add_channel()</a>, and <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00241">ast_ari_bridges_remove_channel()</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                                                                                                                        {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/ddb/structcontrol__list.html">control_list</a> *, list, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   <span class="keywordtype">size_t</span> i;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="keywordflow">if</span> (count == 0 || !<a class="code" href="../../de/d52/codec__dahdi_8c.html#aea0622703055b62259903cdab213319b">channels</a>) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>, <span class="stringliteral">&quot;Missing parameter channel&quot;</span>);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   list = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*list) + count * <span class="keyword">sizeof</span>(list-&gt;controls[0]), <a class="code" href="../../db/d0b/resource__bridges_8c.html#a3c482199b65ec24a5a3e6642080a455c">control_list_dtor</a>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <span class="keywordflow">if</span> (!list) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a>(response);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; count; ++i) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../de/d52/codec__dahdi_8c.html#aea0622703055b62259903cdab213319b">channels</a>[i])) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      list-&gt;controls[list-&gt;count] =</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;         <a class="code" href="../../db/d0b/resource__bridges_8c.html#aab32e8211abc8373be1cefcec607db5f">find_channel_control</a>(response, <a class="code" href="../../de/d52/codec__dahdi_8c.html#aea0622703055b62259903cdab213319b">channels</a>[i]);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordflow">if</span> (!list-&gt;controls[list-&gt;count]) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;         <span class="comment">/* response filled in by find_channel_control() */</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      ++list-&gt;count;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <span class="keywordflow">if</span> (list-&gt;count == 0) {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>, <span class="stringliteral">&quot;Missing parameter channel&quot;</span>);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   }</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(list, +1);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keywordflow">return</span> list;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;}</div><div class="ttc" id="resource__bridges_8c_html_a3c482199b65ec24a5a3e6642080a455c"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#a3c482199b65ec24a5a3e6642080a455c">control_list_dtor</a></div><div class="ttdeci">static void control_list_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00128">resource_bridges.c:128</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="ari_8h_html_aa6503090da6366cef1eae5556e27b352"><div class="ttname"><a href="../../d4/d59/ari_8h.html#aa6503090da6366cef1eae5556e27b352">ast_ari_response_alloc_failed</a></div><div class="ttdeci">void ast_ari_response_alloc_failed(struct ast_ari_response *response)</div><div class="ttdoc">Fill in response with a 500 message for allocation failures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00298">res_ari.c:298</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structcontrol__list_html"><div class="ttname"><a href="../../d7/ddb/structcontrol__list.html">control_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00123">resource_bridges.c:123</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="codec__dahdi_8c_html_aea0622703055b62259903cdab213319b"><div class="ttname"><a href="../../de/d52/codec__dahdi_8c.html#aea0622703055b62259903cdab213319b">channels</a></div><div class="ttdeci">static struct channel_usage channels</div></div>
<div class="ttc" id="resource__bridges_8c_html_aab32e8211abc8373be1cefcec607db5f"><div class="ttname"><a href="../../db/d0b/resource__bridges_8c.html#aab32e8211abc8373be1cefcec607db5f">find_channel_control</a></div><div class="ttdeci">static struct stasis_app_control * find_channel_control(struct ast_ari_response *response, const char *channel_id)</div><div class="ttdoc">Finds the control object for a channel, filling the response with an error, if appropriate. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00092">resource_bridges.c:92</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c482199b65ec24a5a3e6642080a455c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c482199b65ec24a5a3e6642080a455c">&#9670;&nbsp;</a></span>control_list_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void control_list_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00128">128</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00125">control_list::controls</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00124">control_list::count</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00138">control_list_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                                         {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/ddb/structcontrol__list.html">control_list</a> *list = obj;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <span class="keywordtype">size_t</span> i;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; list-&gt;<a class="code" href="../../d7/ddb/structcontrol__list.html#a76d971a3c552bc58ba9f0d5fceae9806">count</a>; ++i) {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(list-&gt;<a class="code" href="../../d7/ddb/structcontrol__list.html#af61750317d24dec7fc1e3b7e61b4caa7">controls</a>[i]);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      list-&gt;<a class="code" href="../../d7/ddb/structcontrol__list.html#af61750317d24dec7fc1e3b7e61b4caa7">controls</a>[i] = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div><div class="ttc" id="structcontrol__list_html_a76d971a3c552bc58ba9f0d5fceae9806"><div class="ttname"><a href="../../d7/ddb/structcontrol__list.html#a76d971a3c552bc58ba9f0d5fceae9806">control_list::count</a></div><div class="ttdeci">size_t count</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00124">resource_bridges.c:124</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcontrol__list_html"><div class="ttname"><a href="../../d7/ddb/structcontrol__list.html">control_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00123">resource_bridges.c:123</a></div></div>
<div class="ttc" id="structcontrol__list_html_af61750317d24dec7fc1e3b7e61b4caa7"><div class="ttname"><a href="../../d7/ddb/structcontrol__list.html#af61750317d24dec7fc1e3b7e61b4caa7">control_list::controls</a></div><div class="ttdeci">struct stasis_app_control * controls[]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/resource__bridges_8c_source.html#l00125">resource_bridges.c:125</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac2bbc89d879fa02403a3ae90bda47b3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2bbc89d879fa02403a3ae90bda47b3c">&#9670;&nbsp;</a></span>find_bridge()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a>* find_bridge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>bridge_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds a bridge, filling the response with an error, if appropriate. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>Response to fill with an error if control is not found. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">bridge_id</td><td>ID of the bridge to lookup.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Bridget. </dd>
<dd>
<code>NULL</code> if bridge does not exist. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00057">57</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01359">ast_bridge_get_snapshot_by_uniqueid()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00774">stasis_app_bridge_find_by_id()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00567">ari_bridges_handle_play()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00191">ast_ari_bridges_add_channel()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l01051">ast_ari_bridges_clear_video_source()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00954">ast_ari_bridges_create_with_id()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00872">ast_ari_bridges_destroy()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00634">ast_ari_bridges_record()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00241">ast_ari_bridges_remove_channel()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l01016">ast_ari_bridges_set_video_source()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00809">ast_ari_bridges_start_moh()</a>, and <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00835">ast_ari_bridges_stop_moh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, bridge, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(response != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   bridge = <a class="code" href="../../d8/d9c/stasis__app_8h.html#abe33686443d20df474000c93ce319804">stasis_app_bridge_find_by_id</a>(bridge_id);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;   <span class="keywordflow">if</span> (bridge == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *, snapshot,</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;         <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#aee9af6c35b13edd9dcbd3dbabc5522ee">ast_bridge_get_snapshot_by_uniqueid</a>(bridge_id), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 404, <span class="stringliteral">&quot;Not found&quot;</span>,</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <span class="stringliteral">&quot;Bridge not found&quot;</span>);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      }</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 409, <span class="stringliteral">&quot;Conflict&quot;</span>,</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;         <span class="stringliteral">&quot;Bridge not in Stasis application&quot;</span>);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;   }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, +1);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   <span class="keywordflow">return</span> bridge;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div><div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="stasis__app_8h_html_abe33686443d20df474000c93ce319804"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#abe33686443d20df474000c93ce319804">stasis_app_bridge_find_by_id</a></div><div class="ttdeci">struct ast_bridge * stasis_app_bridge_find_by_id(const char *bridge_id)</div><div class="ttdoc">Returns the bridge with the given id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00774">res_stasis.c:774</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_aee9af6c35b13edd9dcbd3dbabc5522ee"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#aee9af6c35b13edd9dcbd3dbabc5522ee">ast_bridge_get_snapshot_by_uniqueid</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_get_snapshot_by_uniqueid(const char *bridge_id)</div><div class="ttdoc">Returns the current snapshot for the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l01359">stasis_bridges.c:1359</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab32e8211abc8373be1cefcec607db5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab32e8211abc8373be1cefcec607db5f">&#9670;&nbsp;</a></span>find_channel_control()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a>* find_channel_control </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d52/structast__ari__response.html">ast_ari_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds the control object for a channel, filling the response with an error, if appropriate. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>Response to fill with an error if control is not found. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">channel_id</td><td>ID of the channel to lookup. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Channel control object. </dd>
<dd>
<code>NULL</code> if control object does not exist. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00092">92</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00259">ast_ari_response_error()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00241">LOG_DEBUG</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00349">stasis_app_control_find_by_channel_id()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l01016">ast_ari_bridges_set_video_source()</a>, and <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00138">control_list_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/da4/structstasis__app__control.html">stasis_app_control</a> *, control, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(response != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   control = <a class="code" href="../../d8/d9c/stasis__app_8h.html#abd4e1e822068e3e8dffa74bcbd8235f9">stasis_app_control_find_by_channel_id</a>(channel_id);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   <span class="keywordflow">if</span> (control == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="comment">/* Distinguish between 400 and 422 errors */</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(channel_id);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="keywordflow">if</span> (snapshot == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Couldn&#39;t find &#39;%s&#39;\n&quot;</span>, channel_id);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;         <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 400, <span class="stringliteral">&quot;Bad Request&quot;</span>,</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="stringliteral">&quot;Channel not found&quot;</span>);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Found non-stasis &#39;%s&#39;\n&quot;</span>, channel_id);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <a class="code" href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a>(response, 422, <span class="stringliteral">&quot;Unprocessable Entity&quot;</span>,</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;         <span class="stringliteral">&quot;Channel not in Stasis application&quot;</span>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(control, +1);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   <span class="keywordflow">return</span> control;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a6ff63e8955665c4a58b1598f2b07c51a"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00241">logger.h:241</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structstasis__app__control_html"><div class="ttname"><a href="../../da/da4/structstasis__app__control.html">stasis_app_control</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/de3/control_8c_source.html#l00051">control.c:51</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="ari_8h_html_a8ecaa37e0bd5c5263736001f399ba195"><div class="ttname"><a href="../../d4/d59/ari_8h.html#a8ecaa37e0bd5c5263736001f399ba195">ast_ari_response_error</a></div><div class="ttdeci">void ast_ari_response_error(struct ast_ari_response *response, int response_code, const char *response_text, const char *message_fmt,...)</div><div class="ttdoc">Fill in an error ast_ari_response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbc/res__ari_8c_source.html#l00259">res_ari.c:259</a></div></div>
<div class="ttc" id="stasis__app_8h_html_abd4e1e822068e3e8dffa74bcbd8235f9"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#abd4e1e822068e3e8dffa74bcbd8235f9">stasis_app_control_find_by_channel_id</a></div><div class="ttdeci">struct stasis_app_control * stasis_app_control_find_by_channel_id(const char *channel_id)</div><div class="ttdoc">Returns the handler for the channel with the given id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l00349">res_stasis.c:349</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab72d3618da7594cf41aa89115b7f3298"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab72d3618da7594cf41aa89115b7f3298">&#9670;&nbsp;</a></span>prepare_bridge_media_channel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a>* prepare_bridge_media_channel </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00314">314</a> of file <a class="el" href="../../db/d0b/resource__bridges_8c_source.html">resource_bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l06444">ast_request()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l02288">stasis_app_channel_unreal_set_internal()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00407">ari_bridges_play_new()</a>, and <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00634">ast_ari_bridges_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;{</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *, cap, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keywordflow">if</span> (!cap) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(cap, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>, 0);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, cap, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;ARI&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9c/stasis__app_8h.html#a84f0cfe6db3bfaf00ebdb84740ab7c00">stasis_app_channel_unreal_set_internal</a>(chan)) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>(chan);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <span class="keywordflow">return</span> chan;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis__app_8h_html_a84f0cfe6db3bfaf00ebdb84740ab7c00"><div class="ttname"><a href="../../d8/d9c/stasis__app_8h.html#a84f0cfe6db3bfaf00ebdb84740ab7c00">stasis_app_channel_unreal_set_internal</a></div><div class="ttdeci">int stasis_app_channel_unreal_set_internal(struct ast_channel *chan)</div><div class="ttdoc">Mark this unreal channel and it&amp;#39;s other half as being internal to Stasis. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d80/res__stasis_8c_source.html#l02288">res_stasis.c:2288</a></div></div>
<div class="ttc" id="channel_8h_html_a39fc055500e09810d0afd0bff87407c5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a></div><div class="ttdeci">struct ast_channel * ast_request(const char *type, struct ast_format_cap *request_cap, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *addr, int *cause)</div><div class="ttdoc">Requests a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06444">channel.c:6444</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:41 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
