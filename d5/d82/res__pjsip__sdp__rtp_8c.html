<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_pjsip_sdp_rtp.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_pjsip_sdp_rtp.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>SIP SDP media stream handling.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;pjsip.h&gt;</code><br />
<code>#include &lt;pjsip_ua.h&gt;</code><br />
<code>#include &lt;pjmedia.h&gt;</code><br />
<code>#include &lt;pjlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d0a/format_8h_source.html">asterisk/format.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d3c/format__cap_8h_source.html">asterisk/format_cap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dde/rtp__engine_8h_source.html">asterisk/rtp_engine.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/df1/netsock2_8h_source.html">asterisk/netsock2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/da3/causes_8h_source.html">asterisk/causes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d00/sched_8h_source.html">asterisk/sched.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d59/acl_8h_source.html">asterisk/acl.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d5f/sdp__srtp_8h_source.html">asterisk/sdp_srtp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d08/dsp_8h_source.html">asterisk/dsp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d95/stream_8h_source.html">asterisk/stream.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d1f/logger__category_8h_source.html">asterisk/logger_category.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d1c/format__cache_8h_source.html">asterisk/format_cache.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d8c/res__pjsip_8h_source.html">asterisk/res_pjsip.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html">asterisk/res_pjsip_session.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d20/res__pjsip__session__caps_8h_source.html">asterisk/res_pjsip_session_caps.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_pjsip_sdp_rtp.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d99/res__pjsip__sdp__rtp_8c__incl.png" border="0" usemap="#res__pjsip__sdp__rtp_8c" alt=""/></div>
<map name="res__pjsip__sdp__rtp_8c" id="res__pjsip__sdp__rtp_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="330,393,414,420"/>
<area shape="rect" id="node12" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="2396,393,2511,420"/>
<area shape="rect" id="node24" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1870,617,2021,644"/>
<area shape="rect" id="node25" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="2417,169,2553,196"/>
<area shape="rect" id="node26" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="1869,393,2000,420"/>
<area shape="rect" id="node28" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1251,319,1413,345"/>
<area shape="rect" id="node29" href="../../d5/dde/rtp__engine_8h.html" title="Pluggable RTP Architecture. " alt="" coords="979,244,1135,271"/>
<area shape="rect" id="node31" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="979,319,1125,345"/>
<area shape="rect" id="node32" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="246,319,373,345"/>
<area shape="rect" id="node35" href="../../d5/d1f/logger__category_8h.html" title="asterisk/logger_category.h" alt="" coords="397,319,587,345"/>
<area shape="rect" id="node36" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="2044,244,2183,271"/>
<area shape="rect" id="node42" href="../../d4/da3/causes_8h.html" title="Internal Asterisk hangup causes. " alt="" coords="1943,87,2076,114"/>
<area shape="rect" id="node43" href="../../d5/d59/acl_8h.html" title="Access Control of various sorts. " alt="" coords="1261,244,1368,271"/>
<area shape="rect" id="node44" href="../../de/d5f/sdp__srtp_8h.html" title="SRTP and SDP Security descriptions. " alt="" coords="1057,169,1199,196"/>
<area shape="rect" id="node45" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="2202,87,2313,114"/>
<area shape="rect" id="node46" href="../../d8/d95/stream_8h.html" title="Media Stream API. " alt="" coords="617,393,751,420"/>
<area shape="rect" id="node47" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="2388,87,2564,114"/>
<area shape="rect" id="node48" href="../../d8/d8c/res__pjsip_8h.html" title="asterisk/res_pjsip.h" alt="" coords="760,169,904,196"/>
<area shape="rect" id="node49" href="../../d9/de7/res__pjsip__session_8h.html" title="asterisk/res_pjsip\l_session.h" alt="" coords="1398,80,1530,121"/>
<area shape="rect" id="node50" href="../../dd/d20/res__pjsip__session__caps_8h.html" title="asterisk/res_pjsip\l_session_caps.h" alt="" coords="3091,80,3223,121"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="1057,841,1212,868"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="629,617,766,644"/>
<area shape="rect" id="node7" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="305,468,439,495"/>
<area shape="rect" id="node13" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1569,468,1708,495"/>
<area shape="rect" id="node16" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="2110,767,2173,793"/>
<area shape="rect" id="node17" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="2085,692,2198,719"/>
<area shape="rect" id="node18" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1418,767,1545,793"/>
<area shape="rect" id="node19" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="2503,468,2649,495"/>
<area shape="rect" id="node20" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1388,468,1545,495"/>
<area shape="rect" id="node22" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="2171,468,2301,495"/>
<area shape="rect" id="node21" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="777,543,903,569"/>
<area shape="rect" id="node23" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="2166,543,2301,569"/>
<area shape="rect" id="node27" href="../../d1/d16/codec_8h.html" title="Codec API. " alt="" coords="1237,468,1363,495"/>
<area shape="rect" id="node30" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1590,319,1717,345"/>
<area shape="rect" id="node33" href="../../de/d15/res__srtp_8h.html" title="SRTP resource. " alt="" coords="611,319,751,345"/>
<area shape="rect" id="node34" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1741,319,1867,345"/>
<area shape="rect" id="node37" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="2467,319,2611,345"/>
<area shape="rect" id="node38" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="1891,319,2050,345"/>
<area shape="rect" id="node39" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="2227,319,2391,345"/>
<area shape="rect" id="node40" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="2176,393,2323,420"/>
<area shape="rect" id="node41" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="2686,319,2813,345"/>
</map>
</div>
</div>
<p><a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada763c35134fc5794bd2989943860844"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ada763c35134fc5794bd2989943860844">add_crypto_to_stream</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, pjmedia_sdp_media *media)</td></tr>
<tr class="separator:ada763c35134fc5794bd2989943860844"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ce69115632656453cdede4527ee7a17"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6ce69115632656453cdede4527ee7a17">add_extmap_to_stream</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, pjmedia_sdp_media *media)</td></tr>
<tr class="separator:a6ce69115632656453cdede4527ee7a17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ca888a4c8b8828ccb2bf37dcc37230a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6ca888a4c8b8828ccb2bf37dcc37230a">add_ice_to_stream</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, pjmedia_sdp_media *media, unsigned int include_candidates)</td></tr>
<tr class="memdesc:a6ca888a4c8b8828ccb2bf37dcc37230a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function which adds ICE attributes to a media stream.  <a href="#a6ca888a4c8b8828ccb2bf37dcc37230a">More...</a><br /></td></tr>
<tr class="separator:a6ca888a4c8b8828ccb2bf37dcc37230a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe75d44d3d0fe75087836c162fae8b39"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#abe75d44d3d0fe75087836c162fae8b39">add_msid_to_stream</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, pjmedia_sdp_media *media, struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="separator:abe75d44d3d0fe75087836c162fae8b39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbafd55e7e00c2c1dbf1002b991e62bb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#abbafd55e7e00c2c1dbf1002b991e62bb">add_rtcp_fb_to_stream</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, pjmedia_sdp_media *media)</td></tr>
<tr class="separator:abbafd55e7e00c2c1dbf1002b991e62bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae683ffcf4f013693ab63faf2a7756ca1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae683ffcf4f013693ab63faf2a7756ca1">add_ssrc_to_stream</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, pjmedia_sdp_media *media)</td></tr>
<tr class="memdesc:ae683ffcf4f013693ab63faf2a7756ca1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function which adds ssrc attributes to a media stream.  <a href="#ae683ffcf4f013693ab63faf2a7756ca1">More...</a><br /></td></tr>
<tr class="separator:ae683ffcf4f013693ab63faf2a7756ca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6021b3388c8b6ebec52def7471de6bcf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6021b3388c8b6ebec52def7471de6bcf">apply_cap_to_bundled</a> (struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media_transport, struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *asterisk_stream, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *joint)</td></tr>
<tr class="separator:a6021b3388c8b6ebec52def7471de6bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21612a5d9f844fe6a9429b8240137495"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a21612a5d9f844fe6a9429b8240137495">apply_dtls_attrib</a> (struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, pjmedia_sdp_attr *attr)</td></tr>
<tr class="separator:a21612a5d9f844fe6a9429b8240137495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3da19a8b7a011f9882e2886791f99e2b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a3da19a8b7a011f9882e2886791f99e2b">apply_negotiated_sdp_stream</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, const struct pjmedia_sdp_session *local, const struct pjmedia_sdp_session *remote, int index, struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *asterisk_stream)</td></tr>
<tr class="separator:a3da19a8b7a011f9882e2886791f99e2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dac2878ccbfb978d84968e2df56bdae"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a9dac2878ccbfb978d84968e2df56bdae">change_outgoing_sdp_stream_media_address</a> (pjsip_tx_data *tdata, struct pjmedia_sdp_media *stream, struct <a class="el" href="../../d1/d04/structast__sip__transport.html">ast_sip_transport</a> *transport)</td></tr>
<tr class="memdesc:a9dac2878ccbfb978d84968e2df56bdae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function which updates the media stream with external media address, if applicable.  <a href="#a9dac2878ccbfb978d84968e2df56bdae">More...</a><br /></td></tr>
<tr class="separator:a9dac2878ccbfb978d84968e2df56bdae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a321884e3fb8a45013b26a3febd9cc198"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340">ast_sip_session_media_encryption</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a321884e3fb8a45013b26a3febd9cc198">check_endpoint_media_transport</a> (struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, const struct pjmedia_sdp_media *stream)</td></tr>
<tr class="memdesc:a321884e3fb8a45013b26a3febd9cc198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether the encryption offered in SDP is compatible with the endpoint's configuration.  <a href="#a321884e3fb8a45013b26a3febd9cc198">More...</a><br /></td></tr>
<tr class="separator:a321884e3fb8a45013b26a3febd9cc198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31df8422bf06d5745f4f17d0ae1c7623"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a31df8422bf06d5745f4f17d0ae1c7623">check_ice_support</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, const struct pjmedia_sdp_media *remote_stream)</td></tr>
<tr class="memdesc:a31df8422bf06d5745f4f17d0ae1c7623"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function which checks for ice attributes in an audio stream.  <a href="#a31df8422bf06d5745f4f17d0ae1c7623">More...</a><br /></td></tr>
<tr class="separator:a31df8422bf06d5745f4f17d0ae1c7623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab653bf2446add6cfdc65194fd89fcab0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab653bf2446add6cfdc65194fd89fcab0">create_outgoing_sdp_stream</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, struct pjmedia_sdp_session *sdp, const struct pjmedia_sdp_session *remote, struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="memdesc:ab653bf2446add6cfdc65194fd89fcab0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function which creates an outgoing stream.  <a href="#ab653bf2446add6cfdc65194fd89fcab0">More...</a><br /></td></tr>
<tr class="separator:ab653bf2446add6cfdc65194fd89fcab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea9df35ad9322360bd011b9c0f525712"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aea9df35ad9322360bd011b9c0f525712">create_rtp</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, const pjmedia_sdp_session *sdp)</td></tr>
<tr class="memdesc:aea9df35ad9322360bd011b9c0f525712"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal function which creates an RTP instance.  <a href="#aea9df35ad9322360bd011b9c0f525712">More...</a><br /></td></tr>
<tr class="separator:aea9df35ad9322360bd011b9c0f525712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae92b132c7aaa847416dffe0b3f888e49"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae92b132c7aaa847416dffe0b3f888e49">enable_rtcp</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, const struct pjmedia_sdp_media *remote_media)</td></tr>
<tr class="memdesc:ae92b132c7aaa847416dffe0b3f888e49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable RTCP on an RTP session.  <a href="#ae92b132c7aaa847416dffe0b3f888e49">More...</a><br /></td></tr>
<tr class="separator:ae92b132c7aaa847416dffe0b3f888e49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae67fc8437e14b75c093c6defd82a9e65"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae67fc8437e14b75c093c6defd82a9e65">enable_rtp_extension</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a> <a class="el" href="../../d0/d5a/structextension.html">extension</a>, enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a> <a class="el" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, const pjmedia_sdp_session *sdp)</td></tr>
<tr class="memdesc:ae67fc8437e14b75c093c6defd82a9e65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable an RTP extension on an RTP session.  <a href="#ae67fc8437e14b75c093c6defd82a9e65">More...</a><br /></td></tr>
<tr class="separator:ae67fc8437e14b75c093c6defd82a9e65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d91d967266c86a79b0bf46f950fce2e"><td class="memItemLeft" align="right" valign="top">static pjmedia_sdp_attr *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a7d91d967266c86a79b0bf46f950fce2e">generate_fmtp_attr</a> (pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="el" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, int rtp_code)</td></tr>
<tr class="separator:a7d91d967266c86a79b0bf46f950fce2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ccb0d043dc33e311032926effcdb72e"><td class="memItemLeft" align="right" valign="top">static pjmedia_sdp_attr *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a4ccb0d043dc33e311032926effcdb72e">generate_rtpmap_attr</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, pjmedia_sdp_media *media, pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, int rtp_code, int asterisk_format, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="el" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, int code)</td></tr>
<tr class="separator:a4ccb0d043dc33e311032926effcdb72e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2861164766b0414d2c61482a93ba182"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab2861164766b0414d2c61482a93ba182">get_codecs</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, const struct pjmedia_sdp_media *stream, struct <a class="el" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *<a class="el" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media)</td></tr>
<tr class="separator:ab2861164766b0414d2c61482a93ba182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0be555f61532a27ad7aff9968d3a9b"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340">ast_sip_session_media_encryption</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ace0be555f61532a27ad7aff9968d3a9b">get_media_encryption_type</a> (pj_str_t transport, const struct pjmedia_sdp_media *stream, unsigned int *optimistic)</td></tr>
<tr class="memdesc:ace0be555f61532a27ad7aff9968d3a9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">figure out media transport encryption type from the media transport string  <a href="#ace0be555f61532a27ad7aff9968d3a9b">More...</a><br /></td></tr>
<tr class="separator:ace0be555f61532a27ad7aff9968d3a9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="memdesc:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the module.  <a href="#ac3382bf6da54c56b37069bd76bbdf4f9">More...</a><br /></td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4f51444b6ccc7de71bd1c95fd1a2cce"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aa4f51444b6ccc7de71bd1c95fd1a2cce">media_session_rtcp_read_callback</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media)</td></tr>
<tr class="separator:aa4f51444b6ccc7de71bd1c95fd1a2cce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8af61149eb3e2449acae0a9c8f16d82e"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a8af61149eb3e2449acae0a9c8f16d82e">media_session_rtp_read_callback</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media)</td></tr>
<tr class="separator:a8af61149eb3e2449acae0a9c8f16d82e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a535004424363f85b344ef30708687310"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a535004424363f85b344ef30708687310">media_session_rtp_write_callback</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</td></tr>
<tr class="separator:a535004424363f85b344ef30708687310"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabf52c2f923a1efc1acedf763b44f42c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aabf52c2f923a1efc1acedf763b44f42c">media_stream_has_crypto</a> (const struct pjmedia_sdp_media *stream)</td></tr>
<tr class="memdesc:aabf52c2f923a1efc1acedf763b44f42c"><td class="mdescLeft">&#160;</td><td class="mdescRight">figure out if media stream has crypto lines for sdes  <a href="#aabf52c2f923a1efc1acedf763b44f42c">More...</a><br /></td></tr>
<tr class="separator:aabf52c2f923a1efc1acedf763b44f42c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25283b69d06534d764e73fc6b9c029d9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a25283b69d06534d764e73fc6b9c029d9">negotiate_incoming_sdp_stream</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, const pjmedia_sdp_session *sdp, int index, struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *asterisk_stream)</td></tr>
<tr class="memdesc:a25283b69d06534d764e73fc6b9c029d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function which negotiates an incoming media stream.  <a href="#a25283b69d06534d764e73fc6b9c029d9">More...</a><br /></td></tr>
<tr class="separator:a25283b69d06534d764e73fc6b9c029d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95ebe26f28678a96a1fa1a8f248ee3a1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a95ebe26f28678a96a1fa1a8f248ee3a1">parse_dtls_attrib</a> (struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, const struct pjmedia_sdp_session *sdp, const struct pjmedia_sdp_media *stream)</td></tr>
<tr class="separator:a95ebe26f28678a96a1fa1a8f248ee3a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab67da4f554f7dc3887e3f19fe5bea2d3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab67da4f554f7dc3887e3f19fe5bea2d3">process_extmap_attributes</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, const struct pjmedia_sdp_media *remote_stream)</td></tr>
<tr class="memdesc:ab67da4f554f7dc3887e3f19fe5bea2d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function which processes extmap attributes in a stream.  <a href="#ab67da4f554f7dc3887e3f19fe5bea2d3">More...</a><br /></td></tr>
<tr class="separator:ab67da4f554f7dc3887e3f19fe5bea2d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47ed0684ab00aa31b61c27ad7b56fb75"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a47ed0684ab00aa31b61c27ad7b56fb75">process_ice_attributes</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, const struct pjmedia_sdp_session *remote, const struct pjmedia_sdp_media *remote_stream)</td></tr>
<tr class="memdesc:a47ed0684ab00aa31b61c27ad7b56fb75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function which processes ICE attributes in an audio stream.  <a href="#a47ed0684ab00aa31b61c27ad7b56fb75">More...</a><br /></td></tr>
<tr class="separator:a47ed0684ab00aa31b61c27ad7b56fb75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8ee49b9d58fd68ef934b26d503238a8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab8ee49b9d58fd68ef934b26d503238a8">process_ice_auth_attrb</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, const struct pjmedia_sdp_session *remote, const struct pjmedia_sdp_media *remote_stream)</td></tr>
<tr class="separator:ab8ee49b9d58fd68ef934b26d503238a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdafeaf63c0f7a97f74001626aef9445"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#afdafeaf63c0f7a97f74001626aef9445">process_ssrc_attributes</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, const struct pjmedia_sdp_media *remote_stream)</td></tr>
<tr class="memdesc:afdafeaf63c0f7a97f74001626aef9445"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function which processes ssrc attributes in a stream.  <a href="#afdafeaf63c0f7a97f74001626aef9445">More...</a><br /></td></tr>
<tr class="separator:afdafeaf63c0f7a97f74001626aef9445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a574de7d2ce47521615b33da5e774d20c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a574de7d2ce47521615b33da5e774d20c">rtp_check_timeout</a> (const void *data)</td></tr>
<tr class="memdesc:a574de7d2ce47521615b33da5e774d20c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether RTP is being received or not.  <a href="#a574de7d2ce47521615b33da5e774d20c">More...</a><br /></td></tr>
<tr class="separator:a574de7d2ce47521615b33da5e774d20c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a076f54688c6a58a291bec8e9d618ddfa"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a076f54688c6a58a291bec8e9d618ddfa">send_keepalive</a> (const void *data)</td></tr>
<tr class="separator:a076f54688c6a58a291bec8e9d618ddfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48502a813f37eab1b8ec663f9e74491f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a48502a813f37eab1b8ec663f9e74491f">set_caps</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media_transport, const struct pjmedia_sdp_media *stream, int is_offer, struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *asterisk_stream)</td></tr>
<tr class="separator:a48502a813f37eab1b8ec663f9e74491f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0f3c0953aba91059ad040ae70e36d37"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#af0f3c0953aba91059ad040ae70e36d37">set_ice_components</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media)</td></tr>
<tr class="separator:af0f3c0953aba91059ad040ae70e36d37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9125d77911b022cb2ad5fe08071b0d9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab9125d77911b022cb2ad5fe08071b0d9">set_incoming_call_offer_cap</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, const struct pjmedia_sdp_media *stream)</td></tr>
<tr class="separator:ab9125d77911b022cb2ad5fe08071b0d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed3debf741da696fdf32870b0b81ede8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aed3debf741da696fdf32870b0b81ede8">setup_dtls_srtp</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media)</td></tr>
<tr class="separator:aed3debf741da696fdf32870b0b81ede8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f9f30e53670bbbe6931012811f84b8e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6f9f30e53670bbbe6931012811f84b8e">setup_media_encryption</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, const struct pjmedia_sdp_session *sdp, const struct pjmedia_sdp_media *stream)</td></tr>
<tr class="separator:a6f9f30e53670bbbe6931012811f84b8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9567bd2251ef74ed11031e5db48d7f4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae9567bd2251ef74ed11031e5db48d7f4">setup_sdes_srtp</a> (struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, const struct pjmedia_sdp_media *stream)</td></tr>
<tr class="separator:ae9567bd2251ef74ed11031e5db48d7f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e8ae929b42b9bf4de8f08c5e61946e7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a8e8ae929b42b9bf4de8f08c5e61946e7">setup_srtp</a> (struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media)</td></tr>
<tr class="separator:a8e8ae929b42b9bf4de8f08c5e61946e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9349d678033798a97d36347ca2b8611d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a9349d678033798a97d36347ca2b8611d">stream_destroy</a> (struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media)</td></tr>
<tr class="memdesc:a9349d678033798a97d36347ca2b8611d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function which destroys the RTP instance when session ends.  <a href="#a9349d678033798a97d36347ca2b8611d">More...</a><br /></td></tr>
<tr class="separator:a9349d678033798a97d36347ca2b8611d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77b33cf320c08ec792cbf4ae66bee5bd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a77b33cf320c08ec792cbf4ae66bee5bd">stream_stop</a> (struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media)</td></tr>
<tr class="memdesc:a77b33cf320c08ec792cbf4ae66bee5bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function which stops the RTP instance.  <a href="#a77b33cf320c08ec792cbf4ae66bee5bd">More...</a><br /></td></tr>
<tr class="separator:a77b33cf320c08ec792cbf4ae66bee5bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="memdesc:ad09fa931f468002152a3cc2d5ce25eae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unloads the sdp RTP/AVP module from Asterisk.  <a href="#ad09fa931f468002152a3cc2d5ce25eae">More...</a><br /></td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad846446d4c3522a13ead769801bddd14"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ad846446d4c3522a13ead769801bddd14">video_info_incoming_request</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct pjsip_rx_data *rdata)</td></tr>
<tr class="separator:ad846446d4c3522a13ead769801bddd14"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;PJSIP SDP <a class="el" href="../../d1/d94/sip_8h.html#ad5ec12ad08cacd2598d873052c72857a">RTP</a>/AVP stream <a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_CHANNEL_DRIVER, .requires = &quot;res_pjsip,res_pjsip_session&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe01dad064469f433db45f3841501e9d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#abe01dad064469f433db45f3841501e9d">address_rtp</a></td></tr>
<tr class="memdesc:abe01dad064469f433db45f3841501e9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Address for RTP.  <a href="#abe01dad064469f433db45f3841501e9d">More...</a><br /></td></tr>
<tr class="separator:abe01dad064469f433db45f3841501e9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ad742392f9dd49a29c4b9dceba3d08c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/d29/structast__sip__session__sdp__handler.html">ast_sip_session_sdp_handler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a5ad742392f9dd49a29c4b9dceba3d08c">audio_sdp_handler</a></td></tr>
<tr class="memdesc:a5ad742392f9dd49a29c4b9dceba3d08c"><td class="mdescLeft">&#160;</td><td class="mdescRight">SDP handler for 'audio' media stream.  <a href="#a5ad742392f9dd49a29c4b9dceba3d08c">More...</a><br /></td></tr>
<tr class="separator:a5ad742392f9dd49a29c4b9dceba3d08c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a361b448e9abcfc301602a2573a662d3c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a361b448e9abcfc301602a2573a662d3c">sched</a></td></tr>
<tr class="memdesc:a361b448e9abcfc301602a2573a662d3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scheduler for RTCP purposes.  <a href="#a361b448e9abcfc301602a2573a662d3c">More...</a><br /></td></tr>
<tr class="separator:a361b448e9abcfc301602a2573a662d3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59e9debc727c9ce4219c74a4f3a942b8"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a59e9debc727c9ce4219c74a4f3a942b8">STR_AUDIO</a> [] = &quot;audio&quot;</td></tr>
<tr class="separator:a59e9debc727c9ce4219c74a4f3a942b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b59532fce01bb95cfff01f4c0f69a58"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a9b59532fce01bb95cfff01f4c0f69a58">STR_VIDEO</a> [] = &quot;video&quot;</td></tr>
<tr class="separator:a9b59532fce01bb95cfff01f4c0f69a58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada080d57bbae43f24e66d7de4aca5ff2"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ada080d57bbae43f24e66d7de4aca5ff2">video_info_supplement</a></td></tr>
<tr class="separator:ada080d57bbae43f24e66d7de4aca5ff2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2060fea834f8cdd1ea3e9b35f8d27ec"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/d29/structast__sip__session__sdp__handler.html">ast_sip_session_sdp_handler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ac2060fea834f8cdd1ea3e9b35f8d27ec">video_sdp_handler</a></td></tr>
<tr class="memdesc:ac2060fea834f8cdd1ea3e9b35f8d27ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">SDP handler for 'video' media stream.  <a href="#ac2060fea834f8cdd1ea3e9b35f8d27ec">More...</a><br /></td></tr>
<tr class="separator:ac2060fea834f8cdd1ea3e9b35f8d27ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>SIP SDP media stream handling. </p>
<dl class="section author"><dt>Author</dt><dd>Joshua Colp <a href="#" onclick="location.href='mai'+'lto:'+'jco'+'lp'+'@di'+'gi'+'um.'+'co'+'m'; return false;">jcolp<span style="display: none;">.nosp@m.</span>@dig<span style="display: none;">.nosp@m.</span>ium.c<span style="display: none;">.nosp@m.</span>om</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02390">2390</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02390">2390</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

</div>
</div>
<a id="ada763c35134fc5794bd2989943860844"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada763c35134fc5794bd2989943860844">&#9670;&nbsp;</a></span>add_crypto_to_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int add_crypto_to_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>media</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01580">1580</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00438">AST_LIST_NEXT</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00523">AST_RTP_DTLS_CONNECTION_EXISTING</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00522">AST_RTP_DTLS_CONNECTION_NEW</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00529">AST_RTP_DTLS_HASH_SHA1</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00528">AST_RTP_DTLS_HASH_SHA256</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00514">AST_RTP_DTLS_SETUP_ACTIVE</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00516">AST_RTP_DTLS_SETUP_ACTPASS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00517">AST_RTP_DTLS_SETUP_HOLDCONN</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00515">AST_RTP_DTLS_SETUP_PASSIVE</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03011">ast_rtp_instance_get_dtls()</a>, <a class="el" href="../../d4/d3c/sdp__srtp_8c_source.html#l00041">ast_sdp_srtp_alloc()</a>, <a class="el" href="../../d4/d3c/sdp__srtp_8c_source.html#l00095">ast_sdp_srtp_get_attrib()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00512">AST_SIP_MEDIA_ENCRYPT_DTLS</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00508">AST_SIP_MEDIA_ENCRYPT_NONE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00510">AST_SIP_MEDIA_ENCRYPT_SDES</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00506">AST_SIP_MEDIA_TRANSPORT_INVALID</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00557">ast_rtp_dtls_cfg::default_setup</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00707">ast_sip_media_rtp_configuration::dtls_cfg</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00087">ast_sip_session_media::encryption</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00580">ast_rtp_engine_dtls::get_connection</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00590">ast_rtp_engine_dtls::get_fingerprint</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00588">ast_rtp_engine_dtls::get_fingerprint_hash</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00582">ast_rtp_engine_dtls::get_setup</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>, <a class="el" href="../../de/df7/structast__sdp__srtp.html#a5a5ec5b4367a29990ee49ae4657d94ae">ast_sdp_srtp::sdp_srtp_list</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01023">setup_dtls_srtp()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00085">ast_sip_session_media::srtp</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00709">ast_sip_media_rtp_configuration::srtp_tag_32</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;{</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;   pj_str_t stmp;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;   pjmedia_sdp_attr *attr;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6b">ast_rtp_dtls_hash</a> hash;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *crypto_attribute;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html">ast_rtp_engine_dtls</a> *dtls;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/df7/structast__sdp__srtp.html">ast_sdp_srtp</a> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_NEW = { <span class="stringliteral">&quot;new&quot;</span>, 3 };</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_EXISTING = { <span class="stringliteral">&quot;existing&quot;</span>, 8 };</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_ACTIVE = { <span class="stringliteral">&quot;active&quot;</span>, 6 };</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_PASSIVE = { <span class="stringliteral">&quot;passive&quot;</span>, 7 };</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_ACTPASS = { <span class="stringliteral">&quot;actpass&quot;</span>, 7 };</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_HOLDCONN = { <span class="stringliteral">&quot;holdconn&quot;</span>, 8 };</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4">ast_rtp_dtls_setup</a> setup;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;   <span class="keywordflow">switch</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a947ba038dc2e3de1a3d4ce24e88da1d4">encryption</a>) {</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a>:</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18">AST_SIP_MEDIA_TRANSPORT_INVALID</a>:</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf">AST_SIP_MEDIA_ENCRYPT_SDES</a>:</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">srtp</a>) {</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;         session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">srtp</a> = <a class="code" href="../../de/d5f/sdp__srtp_8h.html#a4dcb6159f49beb9265fab2665f9e0f24">ast_sdp_srtp_alloc</a>();</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;         <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">srtp</a>) {</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;         }</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      }</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      tmp = session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">srtp</a>;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="keywordflow">do</span> {</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;         crypto_attribute = <a class="code" href="../../de/d5f/sdp__srtp_8h.html#a8e0eb1d97761f8c8f8bd0f45fd568cb0">ast_sdp_srtp_get_attrib</a>(tmp,</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;            0 <span class="comment">/* DTLS running? No */</span>,</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;            session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#ace15b3670faea29a5fd4b9f7d89246fc">srtp_tag_32</a> <span class="comment">/* 32 byte tag length? */</span>);</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;         <span class="keywordflow">if</span> (!crypto_attribute) {</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;            <span class="comment">/* No crypto attribute to add, bad news */</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;         }</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;         attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;crypto&quot;</span>,</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;            pj_cstr(&amp;stmp, crypto_attribute));</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;         media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      } <span class="keywordflow">while</span> ((tmp = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(tmp, <a class="code" href="../../de/df7/structast__sdp__srtp.html#a5a5ec5b4367a29990ee49ae4657d94ae">sdp_srtp_list</a>)));</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340afea01c037980f6a2fb8769078b5f3210">AST_SIP_MEDIA_ENCRYPT_DTLS</a>:</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aed3debf741da696fdf32870b0b81ede8">setup_dtls_srtp</a>(session, session_media)) {</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      }</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      dtls = <a class="code" href="../../d5/dde/rtp__engine_8h.html#abdcd28daa60406785f9f34af59a9951e">ast_rtp_instance_get_dtls</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      <span class="keywordflow">if</span> (!dtls) {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      }</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      <span class="keywordflow">switch</span> (dtls-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#afb4676cce2045d03ebb5d2fb1cc71a54">get_connection</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>)) {</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9626fb58facd7ece2578af893daf998fae9be0fb743766bb8acfd0c9481901ae7">AST_RTP_DTLS_CONNECTION_NEW</a>:</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;         attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;connection&quot;</span>, &amp;STR_NEW);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;         media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9626fb58facd7ece2578af893daf998faf784f213578e0382006ac4256f262379">AST_RTP_DTLS_CONNECTION_EXISTING</a>:</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;         attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;connection&quot;</span>, &amp;STR_EXISTING);</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;         media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      }</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      <span class="comment">/* If this is an answer we need to use our current state, if it&#39;s an offer we need to use</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;<span class="comment">       * the configured value.</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;neg</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;         &amp;&amp; pjmedia_sdp_neg_get_state(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;neg) != PJMEDIA_SDP_NEG_STATE_DONE) {</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;         setup = dtls-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#a2a5215b1fcb01ef1069f91d9f42778b8">get_setup</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;         setup = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a1620b71d9db4f2ead2f871425256160f">dtls_cfg</a>.<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a075239f44062ff847b685bc030c60258">default_setup</a>;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      }</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      <span class="keywordflow">switch</span> (setup) {</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4ad01759e580ed1c40971709048d40e6f4">AST_RTP_DTLS_SETUP_ACTIVE</a>:</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;         attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;setup&quot;</span>, &amp;STR_ACTIVE);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;         media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a14e80b1c389413cadf12354d06121ab2">AST_RTP_DTLS_SETUP_PASSIVE</a>:</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;         attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;setup&quot;</span>, &amp;STR_PASSIVE);</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;         media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a666bf79c451f17b96da27e2fc2c2827c">AST_RTP_DTLS_SETUP_ACTPASS</a>:</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;         attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;setup&quot;</span>, &amp;STR_ACTPASS);</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;         media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a57bec1cdb9464305e32601af55d1a771">AST_RTP_DTLS_SETUP_HOLDCONN</a>:</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;         attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;setup&quot;</span>, &amp;STR_HOLDCONN);</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      }</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      hash = dtls-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#a507f0958e1bb4b847a4b9384e296c912">get_fingerprint_hash</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      crypto_attribute = dtls-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#a59c186dfc495dd5f0b16f8df944a0a3b">get_fingerprint</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      <span class="keywordflow">if</span> (crypto_attribute &amp;&amp; (hash == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6ba23d971ca86d4499d5bd2b83195ff7fd6">AST_RTP_DTLS_HASH_SHA1</a> || hash == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6ba886ad8bf6124c2be38ee1b4268951d86">AST_RTP_DTLS_HASH_SHA256</a>)) {</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, fingerprint, <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(64), <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;         <span class="keywordflow">if</span> (!fingerprint) {</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;         }</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;         <span class="keywordflow">if</span> (hash == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6ba23d971ca86d4499d5bd2b83195ff7fd6">AST_RTP_DTLS_HASH_SHA1</a>) {</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;fingerprint, 0, <span class="stringliteral">&quot;SHA-1 %s&quot;</span>, crypto_attribute);</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;fingerprint, 0, <span class="stringliteral">&quot;SHA-256 %s&quot;</span>, crypto_attribute);</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;         }</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;         attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;fingerprint&quot;</span>, pj_cstr(&amp;stmp, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(fingerprint)));</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;         media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;      }</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;   }</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4a666bf79c451f17b96da27e2fc2c2827c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a666bf79c451f17b96da27e2fc2c2827c">AST_RTP_DTLS_SETUP_ACTPASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00516">rtp_engine.h:516</a></div></div>
<div class="ttc" id="structast__sdp__srtp_html"><div class="ttname"><a href="../../de/df7/structast__sdp__srtp.html">ast_sdp_srtp</a></div><div class="ttdoc">structure for secure RTP audio </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5f/sdp__srtp_8h_source.html#l00037">sdp_srtp.h:37</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_a59c186dfc495dd5f0b16f8df944a0a3b"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#a59c186dfc495dd5f0b16f8df944a0a3b">ast_rtp_engine_dtls::get_fingerprint</a></div><div class="ttdeci">const char *(* get_fingerprint)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00590">rtp_engine.h:590</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_a1620b71d9db4f2ead2f871425256160f"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#a1620b71d9db4f2ead2f871425256160f">ast_sip_media_rtp_configuration::dtls_cfg</a></div><div class="ttdeci">struct ast_rtp_dtls_cfg dtls_cfg</div><div class="ttdoc">DTLS-SRTP configuration information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00707">res_pjsip.h:707</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18">AST_SIP_MEDIA_TRANSPORT_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00506">res_pjsip.h:506</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340afea01c037980f6a2fb8769078b5f3210"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340afea01c037980f6a2fb8769078b5f3210">AST_SIP_MEDIA_ENCRYPT_DTLS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00512">res_pjsip.h:512</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9626fb58facd7ece2578af893daf998faf784f213578e0382006ac4256f262379"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9626fb58facd7ece2578af893daf998faf784f213578e0382006ac4256f262379">AST_RTP_DTLS_CONNECTION_EXISTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00523">rtp_engine.h:523</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ae234825bcb65b88c0554b995ff1b8ba6"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a></div><div class="ttdeci">#define AST_LIST_NEXT(elm, field)</div><div class="ttdoc">Returns the next entry in the list after the given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00438">linkedlists.h:438</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4a14e80b1c389413cadf12354d06121ab2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a14e80b1c389413cadf12354d06121ab2">AST_RTP_DTLS_SETUP_PASSIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00515">rtp_engine.h:515</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_aed3debf741da696fdf32870b0b81ede8"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aed3debf741da696fdf32870b0b81ede8">setup_dtls_srtp</a></div><div class="ttdeci">static int setup_dtls_srtp(struct ast_sip_session *session, struct ast_sip_session_media *session_media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01023">res_pjsip_sdp_rtp.c:1023</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_a507f0958e1bb4b847a4b9384e296c912"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#a507f0958e1bb4b847a4b9384e296c912">ast_rtp_engine_dtls::get_fingerprint_hash</a></div><div class="ttdeci">enum ast_rtp_dtls_hash(* get_fingerprint_hash)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00588">rtp_engine.h:588</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_a2a5215b1fcb01ef1069f91d9f42778b8"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#a2a5215b1fcb01ef1069f91d9f42778b8">ast_rtp_engine_dtls::get_setup</a></div><div class="ttdeci">enum ast_rtp_dtls_setup(* get_setup)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00582">rtp_engine.h:582</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a947ba038dc2e3de1a3d4ce24e88da1d4"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a947ba038dc2e3de1a3d4ce24e88da1d4">ast_sip_session_media::encryption</a></div><div class="ttdeci">enum ast_sip_session_media_encryption encryption</div><div class="ttdoc">What type of encryption is in use on this stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00087">res_pjsip_session.h:87</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_afb4676cce2045d03ebb5d2fb1cc71a54"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#afb4676cce2045d03ebb5d2fb1cc71a54">ast_rtp_engine_dtls::get_connection</a></div><div class="ttdeci">enum ast_rtp_dtls_connection(* get_connection)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00580">rtp_engine.h:580</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4ad01759e580ed1c40971709048d40e6f4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4ad01759e580ed1c40971709048d40e6f4">AST_RTP_DTLS_SETUP_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00514">rtp_engine.h:514</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a2f87df48a0208ce2b1108d0135e09a72"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">ast_sip_session_media::srtp</a></div><div class="ttdeci">struct ast_sdp_srtp * srtp</div><div class="ttdoc">Holds SRTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00085">res_pjsip_session.h:85</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html">ast_rtp_engine_dtls</a></div><div class="ttdoc">Structure that represents the optional DTLS SRTP support within an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00570">rtp_engine.h:570</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4">ast_rtp_dtls_setup</a></div><div class="ttdeci">ast_rtp_dtls_setup</div><div class="ttdoc">DTLS setup types. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00513">rtp_engine.h:513</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2e23ae1958d7f6f4a2066eea024bed6ba886ad8bf6124c2be38ee1b4268951d86"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6ba886ad8bf6124c2be38ee1b4268951d86">AST_RTP_DTLS_HASH_SHA256</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00528">rtp_engine.h:528</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_a075239f44062ff847b685bc030c60258"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#a075239f44062ff847b685bc030c60258">ast_rtp_dtls_cfg::default_setup</a></div><div class="ttdeci">enum ast_rtp_dtls_setup default_setup</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00557">rtp_engine.h:557</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abdcd28daa60406785f9f34af59a9951e"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abdcd28daa60406785f9f34af59a9951e">ast_rtp_instance_get_dtls</a></div><div class="ttdeci">struct ast_rtp_engine_dtls * ast_rtp_instance_get_dtls(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the DTLS support present on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03011">rtp_engine.c:3011</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_ace15b3670faea29a5fd4b9f7d89246fc"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#ace15b3670faea29a5fd4b9f7d89246fc">ast_sip_media_rtp_configuration::srtp_tag_32</a></div><div class="ttdeci">unsigned int srtp_tag_32</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00709">res_pjsip.h:709</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2e23ae1958d7f6f4a2066eea024bed6b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6b">ast_rtp_dtls_hash</a></div><div class="ttdeci">ast_rtp_dtls_hash</div><div class="ttdoc">DTLS fingerprint hashes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00527">rtp_engine.h:527</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4a57bec1cdb9464305e32601af55d1a771"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a57bec1cdb9464305e32601af55d1a771">AST_RTP_DTLS_SETUP_HOLDCONN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00517">rtp_engine.h:517</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9626fb58facd7ece2578af893daf998fae9be0fb743766bb8acfd0c9481901ae7"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9626fb58facd7ece2578af893daf998fae9be0fb743766bb8acfd0c9481901ae7">AST_RTP_DTLS_CONNECTION_NEW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00522">rtp_engine.h:522</a></div></div>
<div class="ttc" id="sdp__srtp_8h_html_a4dcb6159f49beb9265fab2665f9e0f24"><div class="ttname"><a href="../../de/d5f/sdp__srtp_8h.html#a4dcb6159f49beb9265fab2665f9e0f24">ast_sdp_srtp_alloc</a></div><div class="ttdeci">struct ast_sdp_srtp * ast_sdp_srtp_alloc(void)</div><div class="ttdoc">allocate a ast_sdp_srtp structure </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3c/sdp__srtp_8c_source.html#l00041">sdp_srtp.c:41</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2e23ae1958d7f6f4a2066eea024bed6ba23d971ca86d4499d5bd2b83195ff7fd6"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6ba23d971ca86d4499d5bd2b83195ff7fd6">AST_RTP_DTLS_HASH_SHA1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00529">rtp_engine.h:529</a></div></div>
<div class="ttc" id="structast__sdp__srtp_html_a5a5ec5b4367a29990ee49ae4657d94ae"><div class="ttname"><a href="../../de/df7/structast__sdp__srtp.html#a5a5ec5b4367a29990ee49ae4657d94ae">ast_sdp_srtp::sdp_srtp_list</a></div><div class="ttdeci">struct ast_sdp_srtp::@318 sdp_srtp_list</div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00508">res_pjsip.h:508</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf">AST_SIP_MEDIA_ENCRYPT_SDES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00510">res_pjsip.h:510</a></div></div>
<div class="ttc" id="sdp__srtp_8h_html_a8e0eb1d97761f8c8f8bd0f45fd568cb0"><div class="ttname"><a href="../../de/d5f/sdp__srtp_8h.html#a8e0eb1d97761f8c8f8bd0f45fd568cb0">ast_sdp_srtp_get_attrib</a></div><div class="ttdeci">const char * ast_sdp_srtp_get_attrib(struct ast_sdp_srtp *srtp, int dtls_enabled, int default_taglen_32)</div><div class="ttdoc">Get the crypto attribute line for the srtp structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3c/sdp__srtp_8c_source.html#l00095">sdp_srtp.c:95</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ce69115632656453cdede4527ee7a17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ce69115632656453cdede4527ee7a17">&#9670;&nbsp;</a></span>add_extmap_to_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_extmap_to_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>media</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01354">1354</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00779">AST_RTP_EXTENSION_DIRECTION_INACTIVE</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00771">AST_RTP_EXTENSION_DIRECTION_NONE</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00777">AST_RTP_EXTENSION_DIRECTION_RECVONLY</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00775">AST_RTP_EXTENSION_DIRECTION_SENDONLY</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00773">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00544">AST_RTP_EXTENSION_UNSUPPORTED</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00899">ast_rtp_instance_extmap_count()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00930">ast_rtp_instance_extmap_get_direction()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00910">ast_rtp_instance_extmap_get_extension()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00946">ast_rtp_instance_extmap_get_uri()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">ast_sip_session_media::type</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00794">ast_sip_endpoint_media_configuration::webrtc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;{</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   <span class="keywordtype">char</span> extmap_value[256];</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">webrtc</a> || session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>) {</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;   }</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;   <span class="comment">/* RTP extension local unique identifiers start at &#39;1&#39; */</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   <span class="keywordflow">for</span> (idx = 1; idx &lt;= <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4d873b83b2c0e1d305d4620c9f0d13b4">ast_rtp_instance_extmap_count</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>); ++idx) {</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a> <a class="code" href="../../d0/d5a/structextension.html">extension</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a86b7a0938f30bf5f9cafa79984a9e776">ast_rtp_instance_extmap_get_extension</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, idx);</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *direction_str = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      pj_str_t stmp;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      pjmedia_sdp_attr *attr;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      <span class="comment">/* If this is an unsupported RTP extension we can&#39;t place it into the SDP */</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      <span class="keywordflow">if</span> (extension == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffade0794251a0a4f3bfb157bb67e120290">AST_RTP_EXTENSION_UNSUPPORTED</a>) {</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      }</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="../../d5/dde/rtp__engine_8h.html#afa4a9048a49a94118a0857361fe868ee">ast_rtp_instance_extmap_get_direction</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, idx)) {</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a>:</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;         <span class="comment">/* Lack of a direction indicates sendrecv, so we leave it out */</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;         direction_str = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0af5077f2f205afd10463fa2f98a3a8c96">AST_RTP_EXTENSION_DIRECTION_SENDONLY</a>:</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;         direction_str = <span class="stringliteral">&quot;/sendonly&quot;</span>;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a85f05e5bc6cc29f9c2a1b12113280a52">AST_RTP_EXTENSION_DIRECTION_RECVONLY</a>:</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;         direction_str = <span class="stringliteral">&quot;/recvonly&quot;</span>;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a>:</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;         <span class="comment">/* It is impossible for a &quot;none&quot; direction extension to be negotiated but just in case</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment">          * we treat it as inactive.</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a7eec86ca7aa6358db7f1f47ab1fe8ed1">AST_RTP_EXTENSION_DIRECTION_INACTIVE</a>:</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;         direction_str = <span class="stringliteral">&quot;/inactive&quot;</span>;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      }</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      snprintf(extmap_value, <span class="keyword">sizeof</span>(extmap_value), <span class="stringliteral">&quot;%d%s %s&quot;</span>, idx, direction_str,</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a26abbab4982b7d787e236f3a3a4e3b94">ast_rtp_instance_extmap_get_uri</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, idx));</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;extmap&quot;</span>, pj_cstr(&amp;stmp, extmap_value));</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      pjmedia_sdp_attr_add(&amp;media-&gt;attr_count, media-&gt;attr, attr);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   }</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;}</div><div class="ttc" id="structast__sip__endpoint__media__configuration_html_aa64681ccac6f69e15c21471249e68121"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">ast_sip_endpoint_media_configuration::webrtc</a></div><div class="ttdeci">unsigned int webrtc</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00794">res_pjsip.h:794</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0af5077f2f205afd10463fa2f98a3a8c96"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0af5077f2f205afd10463fa2f98a3a8c96">AST_RTP_EXTENSION_DIRECTION_SENDONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00775">rtp_engine.h:775</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ffade0794251a0a4f3bfb157bb67e120290"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffade0794251a0a4f3bfb157bb67e120290">AST_RTP_EXTENSION_UNSUPPORTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00544">rtp_engine.h:544</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4d873b83b2c0e1d305d4620c9f0d13b4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4d873b83b2c0e1d305d4620c9f0d13b4">ast_rtp_instance_extmap_count</a></div><div class="ttdeci">size_t ast_rtp_instance_extmap_count(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the number of known unique identifiers. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00899">rtp_engine.c:899</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ff"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a></div><div class="ttdeci">ast_rtp_extension</div><div class="ttdoc">Known RTP extensions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00542">rtp_engine.h:542</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a130d2cc44eca7c67c87000c0a4307ed7">AST_RTP_EXTENSION_DIRECTION_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00771">rtp_engine.h:771</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0a7eec86ca7aa6358db7f1f47ab1fe8ed1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a7eec86ca7aa6358db7f1f47ab1fe8ed1">AST_RTP_EXTENSION_DIRECTION_INACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00779">rtp_engine.h:779</a></div></div>
<div class="ttc" id="structextension_html"><div class="ttname"><a href="../../d0/d5a/structextension.html">extension</a></div><div class="ttdoc">structure to hold extensions </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00287">res_phoneprov.c:287</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_afa4a9048a49a94118a0857361fe868ee"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#afa4a9048a49a94118a0857361fe868ee">ast_rtp_instance_extmap_get_direction</a></div><div class="ttdeci">enum ast_rtp_extension_direction ast_rtp_instance_extmap_get_direction(struct ast_rtp_instance *instance, int id)</div><div class="ttdoc">Retrieve the negotiated direction for an RTP extension id. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00930">rtp_engine.c:930</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a26abbab4982b7d787e236f3a3a4e3b94"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a26abbab4982b7d787e236f3a3a4e3b94">ast_rtp_instance_extmap_get_uri</a></div><div class="ttdeci">const char * ast_rtp_instance_extmap_get_uri(struct ast_rtp_instance *instance, int id)</div><div class="ttdoc">Retrieve the URI for an RTP extension id. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00946">rtp_engine.c:946</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00773">rtp_engine.h:773</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_sip_session_media::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Media type of this session media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">res_pjsip_session.h:105</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a86b7a0938f30bf5f9cafa79984a9e776"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a86b7a0938f30bf5f9cafa79984a9e776">ast_rtp_instance_extmap_get_extension</a></div><div class="ttdeci">enum ast_rtp_extension ast_rtp_instance_extmap_get_extension(struct ast_rtp_instance *instance, int id)</div><div class="ttdoc">Retrieve the extension for an RTP extension id. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00910">rtp_engine.c:910</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0a85f05e5bc6cc29f9c2a1b12113280a52"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a85f05e5bc6cc29f9c2a1b12113280a52">AST_RTP_EXTENSION_DIRECTION_RECVONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00777">rtp_engine.h:777</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ca888a4c8b8828ccb2bf37dcc37230a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ca888a4c8b8828ccb2bf37dcc37230a">&#9670;&nbsp;</a></span>add_ice_to_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_ice_to_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>include_candidates</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function which adds ICE attributes to a media stream. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00675">675</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00479">ast_rtp_engine_ice_candidate::address</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00456">AST_RTP_ICE_CANDIDATE_TYPE_HOST</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00458">AST_RTP_ICE_CANDIDATE_TYPE_RELAYED</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00457">AST_RTP_ICE_CANDIDATE_TYPE_SRFLX</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02891">ast_rtp_instance_get_ice()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00317">ast_sockaddr_stringify_addr_remote()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00362">ast_sockaddr_stringify_port()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00475">ast_rtp_engine_ice_candidate::foundation</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00499">ast_rtp_engine_ice::get_local_candidates</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00497">ast_rtp_engine_ice::get_password</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00495">ast_rtp_engine_ice::get_ufrag</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00697">ast_sip_media_rtp_configuration::ice_support</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00476">ast_rtp_engine_ice_candidate::id</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00077">password</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00478">ast_rtp_engine_ice_candidate::priority</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00480">ast_rtp_engine_ice_candidate::relay_address</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00103">ast_sip_session_media::remote_ice</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00493">ast_rtp_engine_ice::stop</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00477">ast_rtp_engine_ice_candidate::transport</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00481">ast_rtp_engine_ice_candidate::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;{</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a> *ice;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *candidates;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *username, *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a>;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   pj_str_t stmp;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   pjmedia_sdp_attr *attr;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it_candidates;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a> *candidate;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#afc0a4cb1a5b0ecd8d4324bd8466788c2">ice_support</a> || !(ice = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>))) {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a52b71bbc800a8503cfca7eb90f00e23a">remote_ice</a>) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a3a02b2ea9f0ccfd0d46e4547f3b8fa30">stop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keywordflow">if</span> ((username = ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a689bd82c4ef41ba9dd5ef55bf3039ed9">get_ufrag</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>))) {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;ice-ufrag&quot;</span>, pj_cstr(&amp;stmp, username));</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <span class="keywordflow">if</span> ((password = ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a4a374edd699692e9e9467962c0dab680">get_password</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>))) {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;ice-pwd&quot;</span>, pj_cstr(&amp;stmp, password));</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   <span class="keywordflow">if</span> (!include_candidates) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   }</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   candidates = ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a2a6d7aa36b2926258868ecd1971e1123">get_local_candidates</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   <span class="keywordflow">if</span> (!candidates) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   it_candidates = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(candidates, 0);</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   <span class="keywordflow">for</span> (; (candidate = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it_candidates)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(candidate, -1)) {</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *attr_candidate = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(128);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;attr_candidate, -1, <span class="stringliteral">&quot;%s %u %s %d %s &quot;</span>, candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">foundation</a>, candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">id</a>, candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">transport</a>,</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;               candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>, <a class="code" href="../../db/df1/netsock2_8h.html#a22945f5f2361f03073df2d546c449e1c">ast_sockaddr_stringify_addr_remote</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>));</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;attr_candidate, -1, <span class="stringliteral">&quot;%s typ &quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#a9cda5e6ceb0f717967af581ea6e50f6d">ast_sockaddr_stringify_port</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>));</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="keywordflow">switch</span> (candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">type</a>) {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a5d902360d048d7e95d57908b9dcd6efb">AST_RTP_ICE_CANDIDATE_TYPE_HOST</a>:</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;attr_candidate, -1, <span class="stringliteral">&quot;host&quot;</span>);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a2d979a962e90d81ad13ad8a12e7f26ae">AST_RTP_ICE_CANDIDATE_TYPE_SRFLX</a>:</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;attr_candidate, -1, <span class="stringliteral">&quot;srflx&quot;</span>);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a085c18dfb22d93242277f312fccaf9cb">AST_RTP_ICE_CANDIDATE_TYPE_RELAYED</a>:</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;attr_candidate, -1, <span class="stringliteral">&quot;relay&quot;</span>);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      }</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">relay_address</a>)) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;attr_candidate, -1, <span class="stringliteral">&quot; raddr %s rport&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#a22945f5f2361f03073df2d546c449e1c">ast_sockaddr_stringify_addr_remote</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">relay_address</a>));</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;attr_candidate, -1, <span class="stringliteral">&quot; %s&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#a9cda5e6ceb0f717967af581ea6e50f6d">ast_sockaddr_stringify_port</a>(&amp;candidate-&gt;<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">relay_address</a>));</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      }</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;candidate&quot;</span>, pj_cstr(&amp;stmp, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(attr_candidate)));</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(attr_candidate);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it_candidates);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(candidates, -1);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_afc0a4cb1a5b0ecd8d4324bd8466788c2"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#afc0a4cb1a5b0ecd8d4324bd8466788c2">ast_sip_media_rtp_configuration::ice_support</a></div><div class="ttdeci">unsigned int ice_support</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00697">res_pjsip.h:697</a></div></div>
<div class="ttc" id="netsock2_8h_html_a22945f5f2361f03073df2d546c449e1c"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a22945f5f2361f03073df2d546c449e1c">ast_sockaddr_stringify_addr_remote</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_addr_remote(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00317">netsock2.h:317</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a4a374edd699692e9e9467962c0dab680"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a4a374edd699692e9e9467962c0dab680">ast_rtp_engine_ice::get_password</a></div><div class="ttdeci">const char *(* get_password)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00497">rtp_engine.h:497</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a26e4699e53a894379aef105cdc12498e"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a></div><div class="ttdeci">struct ast_rtp_engine_ice * ast_rtp_instance_get_ice(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the ICE support present on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02891">rtp_engine.c:2891</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a3a02b2ea9f0ccfd0d46e4547f3b8fa30"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a3a02b2ea9f0ccfd0d46e4547f3b8fa30">ast_rtp_engine_ice::stop</a></div><div class="ttdeci">void(* stop)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00493">rtp_engine.h:493</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a></div><div class="ttdoc">Structure for an ICE candidate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00474">rtp_engine.h:474</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ab4fdb206838f2974bd15fc2ca1e9d366"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab4fdb206838f2974bd15fc2ca1e9d366">password</a></div><div class="ttdeci">static struct ast_str * password</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00077">cdr_mysql.c:77</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a830a6b4139e5b1b513777994b90b2a9c"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">ast_rtp_engine_ice_candidate::type</a></div><div class="ttdeci">enum ast_rtp_ice_candidate_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00481">rtp_engine.h:481</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="netsock2_8h_html_a9cda5e6ceb0f717967af581ea6e50f6d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a9cda5e6ceb0f717967af581ea6e50f6d">ast_sockaddr_stringify_port</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_port(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return a port only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00362">netsock2.h:362</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a71306846ae998e6b08b66d54169cc2d4"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">ast_rtp_engine_ice_candidate::relay_address</a></div><div class="ttdeci">struct ast_sockaddr relay_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00480">rtp_engine.h:480</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a689bd82c4ef41ba9dd5ef55bf3039ed9"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a689bd82c4ef41ba9dd5ef55bf3039ed9">ast_rtp_engine_ice::get_ufrag</a></div><div class="ttdeci">const char *(* get_ufrag)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00495">rtp_engine.h:495</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a2a6d7aa36b2926258868ecd1971e1123"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a2a6d7aa36b2926258868ecd1971e1123">ast_rtp_engine_ice::get_local_candidates</a></div><div class="ttdeci">struct ao2_container *(* get_local_candidates)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00499">rtp_engine.h:499</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4b2c296e98c6e45d3f102dcec2d248da"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">ast_rtp_engine_ice_candidate::id</a></div><div class="ttdeci">enum ast_rtp_ice_component_type id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00476">rtp_engine.h:476</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a83d758bec83d2a5d6af30efa7d0d7f84a2d979a962e90d81ad13ad8a12e7f26ae"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a2d979a962e90d81ad13ad8a12e7f26ae">AST_RTP_ICE_CANDIDATE_TYPE_SRFLX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00457">rtp_engine.h:457</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4a801f0d373475210a2d6ba3cfa9bb12"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">ast_rtp_engine_ice_candidate::transport</a></div><div class="ttdeci">char * transport</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00477">rtp_engine.h:477</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4f20b037eb06eec1ae276f13beec7738"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">ast_rtp_engine_ice_candidate::foundation</a></div><div class="ttdeci">char * foundation</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00475">rtp_engine.h:475</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a83d758bec83d2a5d6af30efa7d0d7f84a5d902360d048d7e95d57908b9dcd6efb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a5d902360d048d7e95d57908b9dcd6efb">AST_RTP_ICE_CANDIDATE_TYPE_HOST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00456">rtp_engine.h:456</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a></div><div class="ttdoc">Structure that represents the optional ICE support within an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00485">rtp_engine.h:485</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a06332befc0224dfca0e6562d84f5df73"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">ast_rtp_engine_ice_candidate::address</a></div><div class="ttdeci">struct ast_sockaddr address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00479">rtp_engine.h:479</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#acec9ce2df15222151ad66fcb1d74eb9f">ast_rtp_engine_ice_candidate::priority</a></div><div class="ttdeci">int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00478">rtp_engine.h:478</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a83d758bec83d2a5d6af30efa7d0d7f84a085c18dfb22d93242277f312fccaf9cb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a085c18dfb22d93242277f312fccaf9cb">AST_RTP_ICE_CANDIDATE_TYPE_RELAYED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00458">rtp_engine.h:458</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a52b71bbc800a8503cfca7eb90f00e23a"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a52b71bbc800a8503cfca7eb90f00e23a">ast_sip_session_media::remote_ice</a></div><div class="ttdeci">unsigned int remote_ice</div><div class="ttdoc">Does remote support ice. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00103">res_pjsip_session.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abe75d44d3d0fe75087836c162fae8b39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe75d44d3d0fe75087836c162fae8b39">&#9670;&nbsp;</a></span>add_msid_to_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_msid_to_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01272">1272</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l01077">ast_stream_get_group()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00423">ast_stream_get_metadata()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00316">ast_stream_get_type()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00460">ast_stream_set_metadata()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../df/da9/uuid_8c_source.html#l00143">ast_uuid_generate_str()</a>, <a class="el" href="../../dd/d1d/uuid_8h_source.html#l00027">AST_UUID_STR_LEN</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00119">ast_sip_session_media::label</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00117">ast_sip_session_media::mslabel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">ast_sip_session::pending_media_state</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00794">ast_sip_endpoint_media_configuration::webrtc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;{</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;   pj_str_t stmp;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;   pjmedia_sdp_attr *attr;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   <span class="keywordtype">char</span> msid[(<a class="code" href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a> * 2) + 2];</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *stream_label = <a class="code" href="../../d8/d95/stream_8h.html#a311bed754f00753d0fd141266ee0d282">ast_stream_get_metadata</a>(stream, <span class="stringliteral">&quot;SDP:LABEL&quot;</span>);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">webrtc</a>) {</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;   }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#abf6955f29a18a2ea64ef0b1bddef173d">mslabel</a>)) {</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <span class="comment">/* If this stream is grouped with another then use its media stream label if possible */</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d95/stream_8h.html#a783fc78f3bfbd8cf6f05102645e0500d">ast_stream_get_group</a>(stream) != -1) {</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *group_session_media = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">pending_media_state</a>-&gt;sessions, <a class="code" href="../../d8/d95/stream_8h.html#a783fc78f3bfbd8cf6f05102645e0500d">ast_stream_get_group</a>(stream));</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#abf6955f29a18a2ea64ef0b1bddef173d">mslabel</a>, group_session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#abf6955f29a18a2ea64ef0b1bddef173d">mslabel</a>, <span class="keyword">sizeof</span>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#abf6955f29a18a2ea64ef0b1bddef173d">mslabel</a>));</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      }</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#abf6955f29a18a2ea64ef0b1bddef173d">mslabel</a>)) {</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;         <a class="code" href="../../dd/d1d/uuid_8h.html#abe6d0b550cd9a54964e7891960d1e5bc">ast_uuid_generate_str</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#abf6955f29a18a2ea64ef0b1bddef173d">mslabel</a>, <span class="keyword">sizeof</span>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#abf6955f29a18a2ea64ef0b1bddef173d">mslabel</a>));</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      }</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   }</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a45bbe8d6a0166c19b5c4650fc08112ae">label</a>)) {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      <a class="code" href="../../dd/d1d/uuid_8h.html#abe6d0b550cd9a54964e7891960d1e5bc">ast_uuid_generate_str</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a45bbe8d6a0166c19b5c4650fc08112ae">label</a>, <span class="keyword">sizeof</span>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a45bbe8d6a0166c19b5c4650fc08112ae">label</a>));</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      <span class="comment">/* add for stream identification to replace stream_name */</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      <a class="code" href="../../d8/d95/stream_8h.html#a3190a21208ef7b4137f3355cb13a61f0">ast_stream_set_metadata</a>(stream, <span class="stringliteral">&quot;MSID:LABEL&quot;</span>, session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a45bbe8d6a0166c19b5c4650fc08112ae">label</a>);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   }</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   snprintf(msid, <span class="keyword">sizeof</span>(msid), <span class="stringliteral">&quot;%s %s&quot;</span>, session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#abf6955f29a18a2ea64ef0b1bddef173d">mslabel</a>, session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a45bbe8d6a0166c19b5c4650fc08112ae">label</a>);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Stream msid: %p %s %s\n&quot;</span>, stream,</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(<a class="code" href="../../d8/d95/stream_8h.html#a86319542b92fb0dc6b2ed337d83cf8ce">ast_stream_get_type</a>(stream)), msid);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;   attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;msid&quot;</span>, pj_cstr(&amp;stmp, msid));</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;   pjmedia_sdp_attr_add(&amp;media-&gt;attr_count, media-&gt;attr, attr);</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   <span class="comment">/* &#39;label&#39; must come after &#39;msid&#39; */</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(stream_label)) {</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Stream Label: %p %s %s\n&quot;</span>, stream,</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;         <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(<a class="code" href="../../d8/d95/stream_8h.html#a86319542b92fb0dc6b2ed337d83cf8ce">ast_stream_get_type</a>(stream)), stream_label);</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;label&quot;</span>, pj_cstr(&amp;stmp, stream_label));</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      pjmedia_sdp_attr_add(&amp;media-&gt;attr_count, media-&gt;attr, attr);</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   }</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;}</div><div class="ttc" id="structast__sip__endpoint__media__configuration_html_aa64681ccac6f69e15c21471249e68121"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">ast_sip_endpoint_media_configuration::webrtc</a></div><div class="ttdeci">unsigned int webrtc</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00794">res_pjsip.h:794</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__sip__session_html_aac4ee0b861f67a3db82eb3600c0f1624"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">ast_sip_session::pending_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * pending_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">res_pjsip_session.h:211</a></div></div>
<div class="ttc" id="uuid_8h_html_a127408e53d34dca0c589a099fabf1e13"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a></div><div class="ttdeci">#define AST_UUID_STR_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1d/uuid_8h_source.html#l00027">uuid.h:27</a></div></div>
<div class="ttc" id="stream_8h_html_a783fc78f3bfbd8cf6f05102645e0500d"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a783fc78f3bfbd8cf6f05102645e0500d">ast_stream_get_group</a></div><div class="ttdeci">int ast_stream_get_group(const struct ast_stream *stream)</div><div class="ttdoc">Get the stream group that a stream is part of. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l01077">stream.c:1077</a></div></div>
<div class="ttc" id="stream_8h_html_a86319542b92fb0dc6b2ed337d83cf8ce"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a86319542b92fb0dc6b2ed337d83cf8ce">ast_stream_get_type</a></div><div class="ttdeci">enum ast_media_type ast_stream_get_type(const struct ast_stream *stream)</div><div class="ttdoc">Get the media type of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00316">stream.c:316</a></div></div>
<div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_abf6955f29a18a2ea64ef0b1bddef173d"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#abf6955f29a18a2ea64ef0b1bddef173d">ast_sip_session_media::mslabel</a></div><div class="ttdeci">char mslabel[AST_UUID_STR_LEN]</div><div class="ttdoc">Media stream label. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00117">res_pjsip_session.h:117</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="uuid_8h_html_abe6d0b550cd9a54964e7891960d1e5bc"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html#abe6d0b550cd9a54964e7891960d1e5bc">ast_uuid_generate_str</a></div><div class="ttdeci">char * ast_uuid_generate_str(char *buf, size_t size)</div><div class="ttdoc">Generate a UUID string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/da9/uuid_8c_source.html#l00143">uuid.c:143</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="stream_8h_html_a3190a21208ef7b4137f3355cb13a61f0"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a3190a21208ef7b4137f3355cb13a61f0">ast_stream_set_metadata</a></div><div class="ttdeci">int ast_stream_set_metadata(struct ast_stream *stream, const char *m_key, const char *value)</div><div class="ttdoc">Set a stream metadata value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00460">stream.c:460</a></div></div>
<div class="ttc" id="stream_8h_html_a311bed754f00753d0fd141266ee0d282"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a311bed754f00753d0fd141266ee0d282">ast_stream_get_metadata</a></div><div class="ttdeci">const char * ast_stream_get_metadata(const struct ast_stream *stream, const char *m_key)</div><div class="ttdoc">Get a stream metadata value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00423">stream.c:423</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a45bbe8d6a0166c19b5c4650fc08112ae"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a45bbe8d6a0166c19b5c4650fc08112ae">ast_sip_session_media::label</a></div><div class="ttdeci">char label[AST_UUID_STR_LEN]</div><div class="ttdoc">Track label. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00119">res_pjsip_session.h:119</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abbafd55e7e00c2c1dbf1002b991e62bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbafd55e7e00c2c1dbf1002b991e62bb">&#9670;&nbsp;</a></span>add_rtcp_fb_to_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_rtcp_fb_to_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>media</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01319">1319</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">ast_sip_session_media::type</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00794">ast_sip_endpoint_media_configuration::webrtc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;{</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;   pj_str_t stmp;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   pjmedia_sdp_attr *attr;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">webrtc</a>) {</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;   }</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;   <span class="comment">/* transport-cc is supposed to be for the entire transport, and any media sources so</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="comment">    * while the header does not appear in audio streams and isn&#39;t negotiated there, we still</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment">    * place this attribute in as Chrome does.</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;   attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;rtcp-fb&quot;</span>, pj_cstr(&amp;stmp, <span class="stringliteral">&quot;* transport-cc&quot;</span>));</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;   pjmedia_sdp_attr_add(&amp;media-&gt;attr_count, media-&gt;attr, attr);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   <span class="keywordflow">if</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>) {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;   }</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment">    * For now just automatically add it the stream even though it hasn&#39;t</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment">    * necessarily been negotiated.</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;   attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;rtcp-fb&quot;</span>, pj_cstr(&amp;stmp, <span class="stringliteral">&quot;* ccm fir&quot;</span>));</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;   pjmedia_sdp_attr_add(&amp;media-&gt;attr_count, media-&gt;attr, attr);</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;   attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;rtcp-fb&quot;</span>, pj_cstr(&amp;stmp, <span class="stringliteral">&quot;* goog-remb&quot;</span>));</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   pjmedia_sdp_attr_add(&amp;media-&gt;attr_count, media-&gt;attr, attr);</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;rtcp-fb&quot;</span>, pj_cstr(&amp;stmp, <span class="stringliteral">&quot;* nack&quot;</span>));</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;   pjmedia_sdp_attr_add(&amp;media-&gt;attr_count, media-&gt;attr, attr);</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;}</div><div class="ttc" id="structast__sip__endpoint__media__configuration_html_aa64681ccac6f69e15c21471249e68121"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">ast_sip_endpoint_media_configuration::webrtc</a></div><div class="ttdeci">unsigned int webrtc</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00794">res_pjsip.h:794</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_sip_session_media::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Media type of this session media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">res_pjsip_session.h:105</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae683ffcf4f013693ab63faf2a7756ca1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae683ffcf4f013693ab63faf2a7756ca1">&#9670;&nbsp;</a></span>add_ssrc_to_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_ssrc_to_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>media</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function which adds ssrc attributes to a media stream. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01202">1202</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03791">ast_rtp_instance_get_cname()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03778">ast_rtp_instance_get_ssrc()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00792">ast_sip_endpoint_media_configuration::bundle</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00113">ast_sip_session_media::bundle_group</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;{</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;   pj_str_t stmp;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;   pjmedia_sdp_attr *attr;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[128];</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a4b3a62121ed2ff9bebdfb879ad17cdef">bundle</a> || session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a881aec0b280ab825a2019a19e7886a20">bundle_group</a> == -1) {</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;   }</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;   snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%u cname:%s&quot;</span>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#af0adb620e28a15749fe5bf4f6912f00d">ast_rtp_instance_get_ssrc</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>), <a class="code" href="../../d5/dde/rtp__engine_8h.html#a16d87c90a0ee4dea2d08e9907a0e800c">ast_rtp_instance_get_cname</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>));</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;   attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;ssrc&quot;</span>, pj_cstr(&amp;stmp, tmp));</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;   media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af0adb620e28a15749fe5bf4f6912f00d"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af0adb620e28a15749fe5bf4f6912f00d">ast_rtp_instance_get_ssrc</a></div><div class="ttdeci">unsigned int ast_rtp_instance_get_ssrc(struct ast_rtp_instance *rtp)</div><div class="ttdoc">Retrieve the local SSRC value that we will be using. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03778">rtp_engine.c:3778</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a881aec0b280ab825a2019a19e7886a20"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a881aec0b280ab825a2019a19e7886a20">ast_sip_session_media::bundle_group</a></div><div class="ttdeci">int bundle_group</div><div class="ttdoc">The bundle group the stream belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00113">res_pjsip_session.h:113</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a4b3a62121ed2ff9bebdfb879ad17cdef"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a4b3a62121ed2ff9bebdfb879ad17cdef">ast_sip_endpoint_media_configuration::bundle</a></div><div class="ttdeci">unsigned int bundle</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00792">res_pjsip.h:792</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a16d87c90a0ee4dea2d08e9907a0e800c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a16d87c90a0ee4dea2d08e9907a0e800c">ast_rtp_instance_get_cname</a></div><div class="ttdeci">const char * ast_rtp_instance_get_cname(struct ast_rtp_instance *rtp)</div><div class="ttdoc">Retrieve the CNAME used in RTCP SDES items. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03791">rtp_engine.c:3791</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6021b3388c8b6ebec52def7471de6bcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6021b3388c8b6ebec52def7471de6bcf">&#9670;&nbsp;</a></span>apply_cap_to_bundled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apply_cap_to_bundled </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media_transport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>asterisk_stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>joint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00407">407</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01873">ast_rtp_codecs_payload_code()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01923">ast_rtp_codecs_payload_set_rx()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00727">ast_rtp_instance_get_codecs()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00365">ast_stream_set_formats()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00115">ast_sip_session_media::bundled</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00485">set_caps()</a>.</p>
<div class="fragment"><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;{</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <span class="keywordflow">if</span> (!joint) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <a class="code" href="../../d8/d95/stream_8h.html#a8dc44f43dab4a5484631812d9bbc3ae9">ast_stream_set_formats</a>(asterisk_stream, joint);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <span class="comment">/* If this is a bundled stream then apply the payloads to RTP instance acting as transport to prevent conflicts */</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <span class="keywordflow">if</span> (session_media_transport != session_media &amp;&amp; session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#adde8efbb4df251209d1b3e05e166a025">bundled</a>) {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordtype">int</span> index;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(joint); ++index) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(joint, index);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;         <span class="keywordtype">int</span> rtp_code;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;         <span class="comment">/* Ensure this payload is in the bundle group transport codecs, this purposely doesn&#39;t check the return value for</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">          * things as the format is guaranteed to have a payload already.</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;         rtp_code = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af77702faece7e8cc93042e21eb2ed05c">ast_rtp_codecs_payload_code</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>), 1, format, 0);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0d1b6644a258c74b557e5227f07ff4f6">ast_rtp_codecs_payload_set_rx</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(session_media_transport-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>), rtp_code, format);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a0376aa2503a185437fab8cb0b7d674fb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * ast_rtp_instance_get_codecs(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the codecs structure of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00727">rtp_engine.c:727</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="stream_8h_html_a8dc44f43dab4a5484631812d9bbc3ae9"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a8dc44f43dab4a5484631812d9bbc3ae9">ast_stream_set_formats</a></div><div class="ttdeci">void ast_stream_set_formats(struct ast_stream *stream, struct ast_format_cap *caps)</div><div class="ttdoc">Set the current negotiated formats of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00365">stream.c:365</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_adde8efbb4df251209d1b3e05e166a025"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#adde8efbb4df251209d1b3e05e166a025">ast_sip_session_media::bundled</a></div><div class="ttdeci">unsigned int bundled</div><div class="ttdoc">Whether this stream is currently bundled or not. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00115">res_pjsip_session.h:115</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af77702faece7e8cc93042e21eb2ed05c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af77702faece7e8cc93042e21eb2ed05c">ast_rtp_codecs_payload_code</a></div><div class="ttdeci">int ast_rtp_codecs_payload_code(struct ast_rtp_codecs *codecs, int asterisk_format, struct ast_format *format, int code)</div><div class="ttdoc">Retrieve a rx mapped payload type based on whether it is an Asterisk format and the code...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01873">rtp_engine.c:1873</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0d1b6644a258c74b557e5227f07ff4f6"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0d1b6644a258c74b557e5227f07ff4f6">ast_rtp_codecs_payload_set_rx</a></div><div class="ttdeci">int ast_rtp_codecs_payload_set_rx(struct ast_rtp_codecs *codecs, int code, struct ast_format *format)</div><div class="ttdoc">Set a payload code for use with a specific Asterisk format. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01923">rtp_engine.c:1923</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a21612a5d9f844fe6a9429b8240137495"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21612a5d9f844fe6a9429b8240137495">&#9670;&nbsp;</a></span>apply_dtls_attrib()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apply_dtls_attrib </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjmedia_sdp_attr *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01050">1050</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00529">AST_RTP_DTLS_HASH_SHA1</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00528">AST_RTP_DTLS_HASH_SHA256</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00514">AST_RTP_DTLS_SETUP_ACTIVE</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00516">AST_RTP_DTLS_SETUP_ACTPASS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00517">AST_RTP_DTLS_SETUP_HOLDCONN</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00515">AST_RTP_DTLS_SETUP_PASSIVE</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03011">ast_rtp_instance_get_dtls()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00578">ast_rtp_engine_dtls::reset</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00586">ast_rtp_engine_dtls::set_fingerprint</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00584">ast_rtp_engine_dtls::set_setup</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01099">parse_dtls_attrib()</a>.</p>
<div class="fragment"><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;{</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html">ast_rtp_engine_dtls</a> *dtls = <a class="code" href="../../d5/dde/rtp__engine_8h.html#abdcd28daa60406785f9f34af59a9951e">ast_rtp_instance_get_dtls</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;   pj_str_t *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <span class="keywordflow">if</span> (!attr-&gt;value.ptr || !dtls) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;   }</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   value = pj_strtrim(&amp;attr-&gt;value);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   <span class="keywordflow">if</span> (!pj_strcmp2(&amp;attr-&gt;name, <span class="stringliteral">&quot;setup&quot;</span>)) {</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      <span class="keywordflow">if</span> (!pj_stricmp2(value, <span class="stringliteral">&quot;active&quot;</span>)) {</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;         dtls-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#afd17d491c79ff44d0a69a2df395d8869">set_setup</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4ad01759e580ed1c40971709048d40e6f4">AST_RTP_DTLS_SETUP_ACTIVE</a>);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!pj_stricmp2(value, <span class="stringliteral">&quot;passive&quot;</span>)) {</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;         dtls-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#afd17d491c79ff44d0a69a2df395d8869">set_setup</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a14e80b1c389413cadf12354d06121ab2">AST_RTP_DTLS_SETUP_PASSIVE</a>);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!pj_stricmp2(value, <span class="stringliteral">&quot;actpass&quot;</span>)) {</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;         dtls-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#afd17d491c79ff44d0a69a2df395d8869">set_setup</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a666bf79c451f17b96da27e2fc2c2827c">AST_RTP_DTLS_SETUP_ACTPASS</a>);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!pj_stricmp2(value, <span class="stringliteral">&quot;holdconn&quot;</span>)) {</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;         dtls-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#afd17d491c79ff44d0a69a2df395d8869">set_setup</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a57bec1cdb9464305e32601af55d1a771">AST_RTP_DTLS_SETUP_HOLDCONN</a>);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unsupported setup attribute value &#39;%*s&#39;\n&quot;</span>, (<span class="keywordtype">int</span>)value-&gt;slen, value-&gt;ptr);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      }</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!pj_strcmp2(&amp;attr-&gt;name, <span class="stringliteral">&quot;connection&quot;</span>)) {</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="keywordflow">if</span> (!pj_stricmp2(value, <span class="stringliteral">&quot;new&quot;</span>)) {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;         dtls-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#a5fdb99ab3638c0edd7f6cb268f4c4598">reset</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!pj_stricmp2(value, <span class="stringliteral">&quot;existing&quot;</span>)) {</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;         <span class="comment">/* Do nothing */</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unsupported connection attribute value &#39;%*s&#39;\n&quot;</span>, (<span class="keywordtype">int</span>)value-&gt;slen, value-&gt;ptr);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      }</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!pj_strcmp2(&amp;attr-&gt;name, <span class="stringliteral">&quot;fingerprint&quot;</span>)) {</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <span class="keywordtype">char</span> hash_value[256], hash[32];</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <span class="keywordtype">char</span> fingerprint_text[value-&gt;slen + 1];</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(fingerprint_text, value, <span class="keyword">sizeof</span>(fingerprint_text));</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;         <span class="keywordflow">if</span> (sscanf(fingerprint_text, <span class="stringliteral">&quot;%31s %255s&quot;</span>, hash, hash_value) == 2) {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(hash, <span class="stringliteral">&quot;sha-1&quot;</span>)) {</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            dtls-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#ae5103bd2c18ffc657bebc3ac9f1d6a90">set_fingerprint</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6ba23d971ca86d4499d5bd2b83195ff7fd6">AST_RTP_DTLS_HASH_SHA1</a>, hash_value);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(hash, <span class="stringliteral">&quot;sha-256&quot;</span>)) {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            dtls-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#ae5103bd2c18ffc657bebc3ac9f1d6a90">set_fingerprint</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6ba886ad8bf6124c2be38ee1b4268951d86">AST_RTP_DTLS_HASH_SHA256</a>, hash_value);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unsupported fingerprint hash type &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            hash);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;         }</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      }</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   }</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4a666bf79c451f17b96da27e2fc2c2827c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a666bf79c451f17b96da27e2fc2c2827c">AST_RTP_DTLS_SETUP_ACTPASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00516">rtp_engine.h:516</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4a14e80b1c389413cadf12354d06121ab2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a14e80b1c389413cadf12354d06121ab2">AST_RTP_DTLS_SETUP_PASSIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00515">rtp_engine.h:515</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4ad01759e580ed1c40971709048d40e6f4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4ad01759e580ed1c40971709048d40e6f4">AST_RTP_DTLS_SETUP_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00514">rtp_engine.h:514</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_ae5103bd2c18ffc657bebc3ac9f1d6a90"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#ae5103bd2c18ffc657bebc3ac9f1d6a90">ast_rtp_engine_dtls::set_fingerprint</a></div><div class="ttdeci">void(* set_fingerprint)(struct ast_rtp_instance *instance, enum ast_rtp_dtls_hash hash, const char *fingerprint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00586">rtp_engine.h:586</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html">ast_rtp_engine_dtls</a></div><div class="ttdoc">Structure that represents the optional DTLS SRTP support within an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00570">rtp_engine.h:570</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2e23ae1958d7f6f4a2066eea024bed6ba886ad8bf6124c2be38ee1b4268951d86"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6ba886ad8bf6124c2be38ee1b4268951d86">AST_RTP_DTLS_HASH_SHA256</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00528">rtp_engine.h:528</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abdcd28daa60406785f9f34af59a9951e"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abdcd28daa60406785f9f34af59a9951e">ast_rtp_instance_get_dtls</a></div><div class="ttdeci">struct ast_rtp_engine_dtls * ast_rtp_instance_get_dtls(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the DTLS support present on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03011">rtp_engine.c:3011</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_a5fdb99ab3638c0edd7f6cb268f4c4598"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#a5fdb99ab3638c0edd7f6cb268f4c4598">ast_rtp_engine_dtls::reset</a></div><div class="ttdeci">void(* reset)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00578">rtp_engine.h:578</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a008c70da51a5d4e337f5857dc14e3ef4a57bec1cdb9464305e32601af55d1a771"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a008c70da51a5d4e337f5857dc14e3ef4a57bec1cdb9464305e32601af55d1a771">AST_RTP_DTLS_SETUP_HOLDCONN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00517">rtp_engine.h:517</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_afd17d491c79ff44d0a69a2df395d8869"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#afd17d491c79ff44d0a69a2df395d8869">ast_rtp_engine_dtls::set_setup</a></div><div class="ttdeci">void(* set_setup)(struct ast_rtp_instance *instance, enum ast_rtp_dtls_setup setup)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00584">rtp_engine.h:584</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a2e23ae1958d7f6f4a2066eea024bed6ba23d971ca86d4499d5bd2b83195ff7fd6"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a2e23ae1958d7f6f4a2066eea024bed6ba23d971ca86d4499d5bd2b83195ff7fd6">AST_RTP_DTLS_HASH_SHA1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00529">rtp_engine.h:529</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3da19a8b7a011f9882e2886791f99e2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3da19a8b7a011f9882e2886791f99e2b">&#9670;&nbsp;</a></span>apply_negotiated_sdp_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int apply_negotiated_sdp_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_session *&#160;</td>
          <td class="paramname"><em>local</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_session *&#160;</td>
          <td class="paramname"><em>remote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>asterisk_stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">2065</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00054">AST_AF_UNSPEC</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00309">AST_CONTROL_UPDATE_RTP_PEER</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01231">ast_queue_control()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01139">ast_queue_frame()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01191">ast_queue_hold()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01216">ast_queue_unhold()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02647">ast_rtp_instance_activate()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03804">ast_rtp_instance_bundle()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02192">ast_rtp_instance_fd()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02685">ast_rtp_instance_get_timeout()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00553">ast_rtp_instance_set_channel_id()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02680">ast_rtp_instance_set_keepalive()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01080">ast_rtp_instance_set_remote_address</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03830">ast_rtp_instance_set_stream_num()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02670">ast_rtp_instance_set_timeout()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02183">ast_rtp_instance_stop()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00524">ast_sched_add_variable()</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00506">AST_SIP_MEDIA_TRANSPORT_INVALID</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00385">ast_sip_session_media_add_read_callback()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00414">ast_sip_session_media_get_transport()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00398">ast_sip_session_media_set_write_callback()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00280">ast_sockaddr_resolve()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01136">ast_str_tmp</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00500">ast_stream_get_position()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00337">ast_stream_to_str()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00115">ast_sip_session_media::bundled</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00970">check_endpoint_media_transport()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00228">create_rtp()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00165">enable_rtcp()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00087">ast_sip_session_media::encryption</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00711">ast_sip_media_rtp_configuration::encryption</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00713">ast_sip_media_rtp_configuration::encryption_optimistic</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00077">host</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00715">ast_sip_media_rtp_configuration::keepalive</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00091">ast_sip_session_media::keepalive_sched_id</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02038">media_session_rtcp_read_callback()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02020">media_session_rtp_read_callback()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02056">media_session_rtp_write_callback()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00823">ast_sip_endpoint::mohsuggest</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">PARSE_PORT_FORBID</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01404">process_extmap_attributes()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00814">process_ice_attributes()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01218">process_ssrc_attributes()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00101">ast_sip_session_media::remote_rtcp_mux</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00095">ast_sip_session_media::remotely_held</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00097">ast_sip_session_media::remotely_held_changed</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00786">ast_sip_endpoint_media_configuration::rtcp_mux</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00105">rtp_check_timeout()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00071">send_keepalive()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00485">set_caps()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01181">set_ice_components()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01154">setup_media_encryption()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00717">ast_sip_media_rtp_configuration::timeout</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00719">ast_sip_media_rtp_configuration::timeout_hold</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00093">ast_sip_session_media::timeout_sched_id</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">ast_sip_session_media::type</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00705">ast_sip_media_rtp_configuration::use_received_transport</a>.</p>
<div class="fragment"><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;{</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *, addrs, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;   <span class="keyword">struct </span>pjmedia_sdp_media *remote_stream = remote-&gt;media[index];</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="code" href="../../d1/d94/sip_8h.html#a99c5ff7e5199a13ca4884062b413d68f">media_type</a> = session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>[NI_MAXHOST];</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media_transport;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s Stream: %s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session),</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(128, <a class="code" href="../../d8/d95/stream_8h.html#af793e90c3796564a01574fd9c5e9e208">ast_stream_to_str</a>(asterisk_stream, &amp;STR_TMP)));</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) {</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(1, <span class="stringliteral">&quot;No channel\n&quot;</span>);</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;   }</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;   <span class="comment">/* Ensure incoming transport is compatible with the endpoint&#39;s configuration */</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a68c966a9c18044b913c35f8d722d14b4">use_received_transport</a> &amp;&amp;</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a321884e3fb8a45013b26a3febd9cc198">check_endpoint_media_transport</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>, remote_stream) == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18">AST_SIP_MEDIA_TRANSPORT_INVALID</a>) {</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Incompatible transport\n&quot;</span>);</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;   }</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;   <span class="comment">/* Create an RTP instance if need be */</span></div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> &amp;&amp; <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aea9df35ad9322360bd011b9c0f525712">create_rtp</a>(session, session_media, local)) {</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Couldn&#39;t create rtp\n&quot;</span>);</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;   }</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;   <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#afdafeaf63c0f7a97f74001626aef9445">process_ssrc_attributes</a>(session, session_media, remote_stream);</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;   <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab67da4f554f7dc3887e3f19fe5bea2d3">process_extmap_attributes</a>(session, session_media, remote_stream);</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;   session_media_transport = <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aa29930c927d55f4f7a615a11766a6a09">ast_sip_session_media_get_transport</a>(session, session_media);</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;   <span class="keywordflow">if</span> (session_media_transport == session_media || !session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#adde8efbb4df251209d1b3e05e166a025">bundled</a>) {</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a6f7b8add12e23680b28e4b88f70a1a83">remote_rtcp_mux</a> = (pjmedia_sdp_media_find_attr2(remote_stream, <span class="stringliteral">&quot;rtcp-mux&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#af0f3c0953aba91059ad040ae70e36d37">set_ice_components</a>(session, session_media);</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae92b132c7aaa847416dffe0b3f888e49">enable_rtcp</a>(session, session_media, remote_stream);</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      res = <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6f9f30e53670bbbe6931012811f84b8e">setup_media_encryption</a>(session, session_media, remote, remote_stream);</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#ab953e3c061e35e6c06541e75d1f45084">encryption_optimistic</a> &amp;&amp; res) {</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;         <span class="comment">/* If optimistic encryption is disabled and crypto should have been enabled but was not</span></div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;<span class="comment">          * this session must fail.</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Incompatible crypto\n&quot;</span>);</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      }</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      <span class="keywordflow">if</span> (!remote_stream-&gt;conn &amp;&amp; !remote-&gt;conn) {</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(1, <span class="stringliteral">&quot;No connection info\n&quot;</span>);</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      }</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(host, remote_stream-&gt;conn ? &amp;remote_stream-&gt;conn-&gt;addr : &amp;remote-&gt;conn-&gt;addr, <span class="keyword">sizeof</span>(host));</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <span class="comment">/* Ensure that the address provided is valid */</span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a>(&amp;addrs, host, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>, <a class="code" href="../../db/df1/netsock2_8h.html#a27c1625aa5fde74a6dec3d424733c579a97dcf13ca2f2ce3ce4c66de236e6f3f7">AST_AF_UNSPEC</a>) &lt;= 0) {</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;         <span class="comment">/* The provided host was actually invalid so we error out this negotiation */</span></div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Host invalid\n&quot;</span>);</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;      }</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;      <span class="comment">/* Apply connection information to the RTP instance */</span></div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(addrs, remote_stream-&gt;desc.port);</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, addrs);</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;      <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#ae799be93a0bc786802a9404362b236fa">ast_sip_session_media_set_write_callback</a>(session, session_media, <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a535004424363f85b344ef30708687310">media_session_rtp_write_callback</a>);</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;      <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a6bfa7d54f046b76d00644d3e650af6cd">ast_sip_session_media_add_read_callback</a>(session, session_media, <a class="code" href="../../d5/dde/rtp__engine_8h.html#aee3ef7f9e53a34e743c3a95c9ca95fb4">ast_rtp_instance_fd</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, 0),</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;         <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a8af61149eb3e2449acae0a9c8f16d82e">media_session_rtp_read_callback</a>);</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;      <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a86ef296f0f63688c8273119a2611f876">rtcp_mux</a> || !session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a6f7b8add12e23680b28e4b88f70a1a83">remote_rtcp_mux</a>) {</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;         <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a6bfa7d54f046b76d00644d3e650af6cd">ast_sip_session_media_add_read_callback</a>(session, session_media, <a class="code" href="../../d5/dde/rtp__engine_8h.html#aee3ef7f9e53a34e743c3a95c9ca95fb4">ast_rtp_instance_fd</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, 1),</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;            <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aa4f51444b6ccc7de71bd1c95fd1a2cce">media_session_rtcp_read_callback</a>);</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;      }</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;      <span class="comment">/* If ICE support is enabled find all the needed attributes */</span></div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a47ed0684ab00aa31b61c27ad7b56fb75">process_ice_attributes</a>(session, session_media, remote, remote_stream);</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      <span class="comment">/* This is bundled with another session, so mark it as such */</span></div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6bfb60287c258994663a8e7749e08532">ast_rtp_instance_bundle</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, session_media_transport-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#ae799be93a0bc786802a9404362b236fa">ast_sip_session_media_set_write_callback</a>(session, session_media, <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a535004424363f85b344ef30708687310">media_session_rtp_write_callback</a>);</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae92b132c7aaa847416dffe0b3f888e49">enable_rtcp</a>(session, session_media, remote_stream);</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;   }</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a48502a813f37eab1b8ec663f9e74491f">set_caps</a>(session, session_media, session_media_transport, remote_stream, 0, asterisk_stream)) {</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;set_caps failed\n&quot;</span>);</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;   }</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;   <span class="comment">/* Set the channel uniqueid on the RTP instance now that it is becoming active */</span></div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#ab88c871dd5c164b7a0a6af5e7e12d16f">ast_rtp_instance_set_channel_id</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>));</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;   <span class="comment">/* Ensure the RTP instance is active */</span></div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a538dc52a119283258b4c7186d0a42639">ast_rtp_instance_set_stream_num</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d8/d95/stream_8h.html#a35dd19cc6a6f0310d45e181398095463">ast_stream_get_position</a>(asterisk_stream));</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#aaef523c36ea1af726854776ee8f2ba51">ast_rtp_instance_activate</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;   <span class="comment">/* audio stream handles music on hold */</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;   <span class="keywordflow">if</span> (media_type != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;      <span class="keywordflow">if</span> ((pjmedia_sdp_neg_was_answer_remote(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;neg) == PJ_FALSE)</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;         &amp;&amp; (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;state == PJSIP_INV_STATE_CONFIRMED)) {</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390afa94175de1fafa29c027294f1e5a2aee">AST_CONTROL_UPDATE_RTP_PEER</a>);</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      }</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(1, <span class="stringliteral">&quot;moh\n&quot;</span>);</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;   }</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;   <span class="keywordflow">if</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a37c70d2025bfb0834e6eb356724405d5">remotely_held_changed</a>) {</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      <span class="keywordflow">if</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a89f65c64a4a6a3d3505cfe31d549af90">remotely_held</a>) {</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;         <span class="comment">/* The remote side has put us on hold */</span></div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab2e0a6897707b1102ad453ea0963999f">ast_queue_hold</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50aca2c5ac4f173a8843a83029b0d945">mohsuggest</a>);</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3978338bfe35df207f003782e428fb0c">ast_rtp_instance_stop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>);</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;         session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a37c70d2025bfb0834e6eb356724405d5">remotely_held_changed</a> = 0;</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;         <span class="comment">/* The remote side has taken us off hold */</span></div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>);</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;         session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a37c70d2025bfb0834e6eb356724405d5">remotely_held_changed</a> = 0;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;      }</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((pjmedia_sdp_neg_was_answer_remote(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;neg) == PJ_FALSE)</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      &amp;&amp; (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;state == PJSIP_INV_STATE_CONFIRMED)) {</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390afa94175de1fafa29c027294f1e5a2aee">AST_CONTROL_UPDATE_RTP_PEER</a>);</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;   }</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;   <span class="comment">/* This purposely resets the encryption to the configured in case it gets added later */</span></div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;   session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a947ba038dc2e3de1a3d4ce24e88da1d4">encryption</a> = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a947ba038dc2e3de1a3d4ce24e88da1d4">encryption</a>;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#ac7b43e4de3d16ae6d63fda72fff69420">keepalive</a> &gt; 0 &amp;&amp;</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;         session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#af00dcae94375711e0f59e0f044f0683c">ast_rtp_instance_set_keepalive</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#ac7b43e4de3d16ae6d63fda72fff69420">keepalive</a>);</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;      <span class="comment">/* Schedule the initial keepalive early in case this is being used to punch holes through</span></div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="comment">       * a NAT. This way there won&#39;t be an awkward delay before media starts flowing in some</span></div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="comment">       * scenarios.</span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#af723510e5f7d3a2c82f5b9fe1e16802f">keepalive_sched_id</a>);</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;      session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#af723510e5f7d3a2c82f5b9fe1e16802f">keepalive_sched_id</a> = <a class="code" href="../../d7/d00/sched_8h.html#adec2ba936e662f6b9353fc0172e9fcec">ast_sched_add_variable</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, 500, <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a076f54688c6a58a291bec8e9d618ddfa">send_keepalive</a>,</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;         session_media, 1);</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;   }</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;   <span class="comment">/* As the channel lock is not held during this process the scheduled item won&#39;t block if</span></div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;<span class="comment">    * it is hanging up the channel at the same point we are applying this negotiated SDP.</span></div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a75b67fe2a02f4641321116ad6fa0253d">timeout_sched_id</a>);</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;   <span class="comment">/* Due to the fact that we only ever have one scheduled timeout item for when we are both</span></div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="comment">    * off hold and on hold we don&#39;t need to store the two timeouts differently on the RTP</span></div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;<span class="comment">    * instance itself.</span></div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#afd73a14bf491aea2a0fdc2613ff21300">ast_rtp_instance_set_timeout</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, 0);</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a25af7eefd48048fb067a60b8e295caf1">timeout</a> &amp;&amp; !session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a89f65c64a4a6a3d3505cfe31d549af90">remotely_held</a>) {</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#afd73a14bf491aea2a0fdc2613ff21300">ast_rtp_instance_set_timeout</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a25af7eefd48048fb067a60b8e295caf1">timeout</a>);</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#ad9fe230e7f1ec6ace15f852110747ac0">timeout_hold</a> &amp;&amp; session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a89f65c64a4a6a3d3505cfe31d549af90">remotely_held</a>) {</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#afd73a14bf491aea2a0fdc2613ff21300">ast_rtp_instance_set_timeout</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#ad9fe230e7f1ec6ace15f852110747ac0">timeout_hold</a>);</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;   }</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a600efcadee5b02fc1715ea10e7bc30e0">ast_rtp_instance_get_timeout</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>)) {</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;      session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a75b67fe2a02f4641321116ad6fa0253d">timeout_sched_id</a> = <a class="code" href="../../d7/d00/sched_8h.html#adec2ba936e662f6b9353fc0172e9fcec">ast_sched_add_variable</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>,</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a600efcadee5b02fc1715ea10e7bc30e0">ast_rtp_instance_get_timeout</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) * 1000, <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a574de7d2ce47521615b33da5e774d20c">rtp_check_timeout</a>,</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;         session_media, 1);</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;   }</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(1, <span class="stringliteral">&quot;Handled\n&quot;</span>);</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;}</div><div class="ttc" id="structast__sip__media__rtp__configuration_html_ab953e3c061e35e6c06541e75d1f45084"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#ab953e3c061e35e6c06541e75d1f45084">ast_sip_media_rtp_configuration::encryption_optimistic</a></div><div class="ttdeci">unsigned int encryption_optimistic</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00713">res_pjsip.h:713</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aaef523c36ea1af726854776ee8f2ba51"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aaef523c36ea1af726854776ee8f2ba51">ast_rtp_instance_activate</a></div><div class="ttdeci">int ast_rtp_instance_activate(struct ast_rtp_instance *instance)</div><div class="ttdoc">Indicate to the RTP engine that packets are now expected to be sent/received on the RTP instance...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02647">rtp_engine.c:2647</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="stream_8h_html_af793e90c3796564a01574fd9c5e9e208"><div class="ttname"><a href="../../d8/d95/stream_8h.html#af793e90c3796564a01574fd9c5e9e208">ast_stream_to_str</a></div><div class="ttdeci">const char * ast_stream_to_str(const struct ast_stream *stream, struct ast_str **buf)</div><div class="ttdoc">Get a string representing the stream for debugging/display purposes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00337">stream.c:337</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ae92b132c7aaa847416dffe0b3f888e49"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae92b132c7aaa847416dffe0b3f888e49">enable_rtcp</a></div><div class="ttdeci">static void enable_rtcp(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const struct pjmedia_sdp_media *remote_media)</div><div class="ttdoc">Enable RTCP on an RTP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00165">res_pjsip_sdp_rtp.c:165</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a86ef296f0f63688c8273119a2611f876"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a86ef296f0f63688c8273119a2611f876">ast_sip_endpoint_media_configuration::rtcp_mux</a></div><div class="ttdeci">unsigned int rtcp_mux</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00786">res_pjsip.h:786</a></div></div>
<div class="ttc" id="channel_8h_html_a60f9d2b0ab8b7a839902313321163b28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a></div><div class="ttdeci">int ast_queue_control(struct ast_channel *chan, enum ast_control_frame_type control)</div><div class="ttdoc">Queue a control frame without payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01231">channel.c:1231</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ab88c871dd5c164b7a0a6af5e7e12d16f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ab88c871dd5c164b7a0a6af5e7e12d16f">ast_rtp_instance_set_channel_id</a></div><div class="ttdeci">void ast_rtp_instance_set_channel_id(struct ast_rtp_instance *instance, const char *uniqueid)</div><div class="ttdoc">Set the channel that owns this RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00553">rtp_engine.c:553</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_aea9df35ad9322360bd011b9c0f525712"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aea9df35ad9322360bd011b9c0f525712">create_rtp</a></div><div class="ttdeci">static int create_rtp(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const pjmedia_sdp_session *sdp)</div><div class="ttdoc">Internal function which creates an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00228">res_pjsip_sdp_rtp.c:228</a></div></div>
<div class="ttc" id="sip_8h_html_a99c5ff7e5199a13ca4884062b413d68f"><div class="ttname"><a href="../../d1/d94/sip_8h.html#a99c5ff7e5199a13ca4884062b413d68f">media_type</a></div><div class="ttdeci">media_type</div><div class="ttdoc">Media types generate different &quot;dummy answers&quot; for not accepting the offer of a media stream...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00489">sip.h:489</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aa29930c927d55f4f7a615a11766a6a09"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aa29930c927d55f4f7a615a11766a6a09">ast_sip_session_media_get_transport</a></div><div class="ttdeci">struct ast_sip_session_media * ast_sip_session_media_get_transport(struct ast_sip_session *session, struct ast_sip_session_media *session_media)</div><div class="ttdoc">Retrieve the underlying media session that is acting as transport for a media session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00414">res_pjsip_session.c:414</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_ac7b43e4de3d16ae6d63fda72fff69420"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#ac7b43e4de3d16ae6d63fda72fff69420">ast_sip_media_rtp_configuration::keepalive</a></div><div class="ttdeci">unsigned int keepalive</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00715">res_pjsip.h:715</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a6bfb60287c258994663a8e7749e08532"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a6bfb60287c258994663a8e7749e08532">ast_rtp_instance_bundle</a></div><div class="ttdeci">int ast_rtp_instance_bundle(struct ast_rtp_instance *child, struct ast_rtp_instance *parent)</div><div class="ttdoc">Request that an RTP instance be bundled with another. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03804">rtp_engine.c:3804</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a600efcadee5b02fc1715ea10e7bc30e0"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a600efcadee5b02fc1715ea10e7bc30e0">ast_rtp_instance_get_timeout</a></div><div class="ttdeci">int ast_rtp_instance_get_timeout(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the RTP timeout value. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02685">rtp_engine.c:2685</a></div></div>
<div class="ttc" id="channel_8h_html_aada21a9f55151c285a1537613ff9197a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a></div><div class="ttdeci">int ast_queue_unhold(struct ast_channel *chan)</div><div class="ttdoc">Queue an unhold frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01216">channel.c:1216</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_aa4f51444b6ccc7de71bd1c95fd1a2cce"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aa4f51444b6ccc7de71bd1c95fd1a2cce">media_session_rtcp_read_callback</a></div><div class="ttdeci">static struct ast_frame * media_session_rtcp_read_callback(struct ast_sip_session *session, struct ast_sip_session_media *session_media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02038">res_pjsip_sdp_rtp.c:2038</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18">AST_SIP_MEDIA_TRANSPORT_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00506">res_pjsip.h:506</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="sched_8h_html_adec2ba936e662f6b9353fc0172e9fcec"><div class="ttname"><a href="../../d7/d00/sched_8h.html#adec2ba936e662f6b9353fc0172e9fcec">ast_sched_add_variable</a></div><div class="ttdeci">int ast_sched_add_variable(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data, int variable) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event with rescheduling support. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00524">sched.c:524</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">include/asterisk/config.h:1135</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_afd73a14bf491aea2a0fdc2613ff21300"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#afd73a14bf491aea2a0fdc2613ff21300">ast_rtp_instance_set_timeout</a></div><div class="ttdeci">void ast_rtp_instance_set_timeout(struct ast_rtp_instance *instance, int timeout)</div><div class="ttdoc">Set the RTP timeout value. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02670">rtp_engine.c:2670</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a6f9f30e53670bbbe6931012811f84b8e"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6f9f30e53670bbbe6931012811f84b8e">setup_media_encryption</a></div><div class="ttdeci">static int setup_media_encryption(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const struct pjmedia_sdp_session *sdp, const struct pjmedia_sdp_media *stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01154">res_pjsip_sdp_rtp.c:1154</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a538dc52a119283258b4c7186d0a42639"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a538dc52a119283258b4c7186d0a42639">ast_rtp_instance_set_stream_num</a></div><div class="ttdeci">void ast_rtp_instance_set_stream_num(struct ast_rtp_instance *instance, int stream_num)</div><div class="ttdoc">Set the stream number for an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03830">rtp_engine.c:3830</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_a68c966a9c18044b913c35f8d722d14b4"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#a68c966a9c18044b913c35f8d722d14b4">ast_sip_media_rtp_configuration::use_received_transport</a></div><div class="ttdeci">unsigned int use_received_transport</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00705">res_pjsip.h:705</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a947ba038dc2e3de1a3d4ce24e88da1d4"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a947ba038dc2e3de1a3d4ce24e88da1d4">ast_sip_session_media::encryption</a></div><div class="ttdeci">enum ast_sip_session_media_encryption encryption</div><div class="ttdoc">What type of encryption is in use on this stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00087">res_pjsip_session.h:87</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_adde8efbb4df251209d1b3e05e166a025"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#adde8efbb4df251209d1b3e05e166a025">ast_sip_session_media::bundled</a></div><div class="ttdeci">unsigned int bundled</div><div class="ttdoc">Whether this stream is currently bundled or not. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00115">res_pjsip_session.h:115</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="strings_8h_html_a68ab38eef5d5958cae536ba7589093cc"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a></div><div class="ttdeci">#define ast_str_tmp(init_len, __expr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01136">strings.h:1136</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3978338bfe35df207f003782e428fb0c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3978338bfe35df207f003782e428fb0c">ast_rtp_instance_stop</a></div><div class="ttdeci">void ast_rtp_instance_stop(struct ast_rtp_instance *instance)</div><div class="ttdoc">Stop an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02183">rtp_engine.c:2183</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a574de7d2ce47521615b33da5e774d20c"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a574de7d2ce47521615b33da5e774d20c">rtp_check_timeout</a></div><div class="ttdeci">static int rtp_check_timeout(const void *data)</div><div class="ttdoc">Check whether RTP is being received or not. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00105">res_pjsip_sdp_rtp.c:105</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_a25af7eefd48048fb067a60b8e295caf1"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#a25af7eefd48048fb067a60b8e295caf1">ast_sip_media_rtp_configuration::timeout</a></div><div class="ttdeci">unsigned int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00717">res_pjsip.h:717</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a535004424363f85b344ef30708687310"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a535004424363f85b344ef30708687310">media_session_rtp_write_callback</a></div><div class="ttdeci">static int media_session_rtp_write_callback(struct ast_sip_session *session, struct ast_sip_session_media *session_media, struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02056">res_pjsip_sdp_rtp.c:2056</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ab67da4f554f7dc3887e3f19fe5bea2d3"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab67da4f554f7dc3887e3f19fe5bea2d3">process_extmap_attributes</a></div><div class="ttdeci">static void process_extmap_attributes(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const struct pjmedia_sdp_media *remote_stream)</div><div class="ttdoc">Function which processes extmap attributes in a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01404">res_pjsip_sdp_rtp.c:1404</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="channel_8h_html_ab2e0a6897707b1102ad453ea0963999f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab2e0a6897707b1102ad453ea0963999f">ast_queue_hold</a></div><div class="ttdeci">int ast_queue_hold(struct ast_channel *chan, const char *musicclass)</div><div class="ttdoc">Queue a hold frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01191">channel.c:1191</a></div></div>
<div class="ttc" id="channel_8h_html_a6cbcba5661d55216968cde8fdf913c89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_a947ba038dc2e3de1a3d4ce24e88da1d4"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#a947ba038dc2e3de1a3d4ce24e88da1d4">ast_sip_media_rtp_configuration::encryption</a></div><div class="ttdeci">enum ast_sip_session_media_encryption encryption</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00711">res_pjsip.h:711</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a90c48c7f24206e8822bf520dae0a2478"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_set_remote_address(instance, address)</div><div class="ttdoc">Set the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01080">rtp_engine.h:1080</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_ad9fe230e7f1ec6ace15f852110747ac0"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#ad9fe230e7f1ec6ace15f852110747ac0">ast_sip_media_rtp_configuration::timeout_hold</a></div><div class="ttdeci">unsigned int timeout_hold</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00719">res_pjsip.h:719</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_afdafeaf63c0f7a97f74001626aef9445"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#afdafeaf63c0f7a97f74001626aef9445">process_ssrc_attributes</a></div><div class="ttdeci">static void process_ssrc_attributes(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const struct pjmedia_sdp_media *remote_stream)</div><div class="ttdoc">Function which processes ssrc attributes in a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01218">res_pjsip_sdp_rtp.c:1218</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a89f65c64a4a6a3d3505cfe31d549af90"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a89f65c64a4a6a3d3505cfe31d549af90">ast_sip_session_media::remotely_held</a></div><div class="ttdeci">unsigned int remotely_held</div><div class="ttdoc">Stream is on hold by remote side. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00095">res_pjsip_session.h:95</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a75b67fe2a02f4641321116ad6fa0253d"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a75b67fe2a02f4641321116ad6fa0253d">ast_sip_session_media::timeout_sched_id</a></div><div class="ttdeci">int timeout_sched_id</div><div class="ttdoc">Scheduler ID for RTP timeout. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00093">res_pjsip_session.h:93</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a8af61149eb3e2449acae0a9c8f16d82e"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a8af61149eb3e2449acae0a9c8f16d82e">media_session_rtp_read_callback</a></div><div class="ttdeci">static struct ast_frame * media_session_rtp_read_callback(struct ast_sip_session *session, struct ast_sip_session_media *session_media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02020">res_pjsip_sdp_rtp.c:2020</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a6bfa7d54f046b76d00644d3e650af6cd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a6bfa7d54f046b76d00644d3e650af6cd">ast_sip_session_media_add_read_callback</a></div><div class="ttdeci">int ast_sip_session_media_add_read_callback(struct ast_sip_session *session, struct ast_sip_session_media *session_media, int fd, ast_sip_session_media_read_cb callback)</div><div class="ttdoc">Set a read callback for a media session with a specific file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00385">res_pjsip_session.c:385</a></div></div>
<div class="ttc" id="netsock2_8h_html_a27c1625aa5fde74a6dec3d424733c579a97dcf13ca2f2ce3ce4c66de236e6f3f7"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a27c1625aa5fde74a6dec3d424733c579a97dcf13ca2f2ce3ce4c66de236e6f3f7">AST_AF_UNSPEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00054">netsock2.h:54</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390afa94175de1fafa29c027294f1e5a2aee"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390afa94175de1fafa29c027294f1e5a2aee">AST_CONTROL_UPDATE_RTP_PEER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00309">include/asterisk/frame.h:309</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aee3ef7f9e53a34e743c3a95c9ca95fb4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aee3ef7f9e53a34e743c3a95c9ca95fb4">ast_rtp_instance_fd</a></div><div class="ttdeci">int ast_rtp_instance_fd(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Get the file descriptor for an RTP session (or RTCP) </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02192">rtp_engine.c:2192</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_af723510e5f7d3a2c82f5b9fe1e16802f"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#af723510e5f7d3a2c82f5b9fe1e16802f">ast_sip_session_media::keepalive_sched_id</a></div><div class="ttdeci">int keepalive_sched_id</div><div class="ttdoc">Scheduler ID for RTP keepalive. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00091">res_pjsip_session.h:91</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a076f54688c6a58a291bec8e9d618ddfa"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a076f54688c6a58a291bec8e9d618ddfa">send_keepalive</a></div><div class="ttdeci">static int send_keepalive(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00071">res_pjsip_sdp_rtp.c:71</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af00dcae94375711e0f59e0f044f0683c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af00dcae94375711e0f59e0f044f0683c">ast_rtp_instance_set_keepalive</a></div><div class="ttdeci">void ast_rtp_instance_set_keepalive(struct ast_rtp_instance *instance, int timeout)</div><div class="ttdoc">Set the RTP keepalive interval. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02680">rtp_engine.c:2680</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a321884e3fb8a45013b26a3febd9cc198"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a321884e3fb8a45013b26a3febd9cc198">check_endpoint_media_transport</a></div><div class="ttdeci">static enum ast_sip_session_media_encryption check_endpoint_media_transport(struct ast_sip_endpoint *endpoint, const struct pjmedia_sdp_media *stream)</div><div class="ttdoc">Checks whether the encryption offered in SDP is compatible with the endpoint&amp;#39;s configuration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00970">res_pjsip_sdp_rtp.c:970</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_sip_session_media::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Media type of this session media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">res_pjsip_session.h:105</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a37c70d2025bfb0834e6eb356724405d5"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a37c70d2025bfb0834e6eb356724405d5">ast_sip_session_media::remotely_held_changed</a></div><div class="ttdeci">unsigned int remotely_held_changed</div><div class="ttdoc">Stream is held by remote side changed during this negotiation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00097">res_pjsip_session.h:97</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_af0f3c0953aba91059ad040ae70e36d37"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#af0f3c0953aba91059ad040ae70e36d37">set_ice_components</a></div><div class="ttdeci">static void set_ice_components(struct ast_sip_session *session, struct ast_sip_session_media *session_media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01181">res_pjsip_sdp_rtp.c:1181</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a50aca2c5ac4f173a8843a83029b0d945"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a50aca2c5ac4f173a8843a83029b0d945">ast_sip_endpoint::mohsuggest</a></div><div class="ttdeci">const ast_string_field mohsuggest</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00823">res_pjsip.h:823</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_ae799be93a0bc786802a9404362b236fa"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#ae799be93a0bc786802a9404362b236fa">ast_sip_session_media_set_write_callback</a></div><div class="ttdeci">int ast_sip_session_media_set_write_callback(struct ast_sip_session *session, struct ast_sip_session_media *session_media, ast_sip_session_media_write_cb callback)</div><div class="ttdoc">Set a write callback for a media session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00398">res_pjsip_session.c:398</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a></div><div class="ttdeci">ast_media_type</div><div class="ttdoc">Types of media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00030">codec.h:30</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a6f7b8add12e23680b28e4b88f70a1a83"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a6f7b8add12e23680b28e4b88f70a1a83">ast_sip_session_media::remote_rtcp_mux</a></div><div class="ttdeci">unsigned int remote_rtcp_mux</div><div class="ttdoc">Does remote support rtcp_mux. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00101">res_pjsip_session.h:101</a></div></div>
<div class="ttc" id="stream_8h_html_a35dd19cc6a6f0310d45e181398095463"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a35dd19cc6a6f0310d45e181398095463">ast_stream_get_position</a></div><div class="ttdeci">int ast_stream_get_position(const struct ast_stream *stream)</div><div class="ttdoc">Get the position of the stream in the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00500">stream.c:500</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a48502a813f37eab1b8ec663f9e74491f"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a48502a813f37eab1b8ec663f9e74491f">set_caps</a></div><div class="ttdeci">static int set_caps(struct ast_sip_session *session, struct ast_sip_session_media *session_media, struct ast_sip_session_media *session_media_transport, const struct pjmedia_sdp_media *stream, int is_offer, struct ast_stream *asterisk_stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00485">res_pjsip_sdp_rtp.c:485</a></div></div>
<div class="ttc" id="netsock2_8h_html_a8ba6f5b5a9de09137dd18fe2d9592880"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a></div><div class="ttdeci">int ast_sockaddr_resolve(struct ast_sockaddr **addrs, const char *str, int flags, int family)</div><div class="ttdoc">Parses a string with an IPv4 or IPv6 address and place results into an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00280">netsock2.c:280</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a47ed0684ab00aa31b61c27ad7b56fb75"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a47ed0684ab00aa31b61c27ad7b56fb75">process_ice_attributes</a></div><div class="ttdeci">static void process_ice_attributes(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const struct pjmedia_sdp_session *remote, const struct pjmedia_sdp_media *remote_stream)</div><div class="ttdoc">Function which processes ICE attributes in an audio stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00814">res_pjsip_sdp_rtp.c:814</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02390">2390</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

</div>
</div>
<a id="a9dac2878ccbfb978d84968e2df56bdae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dac2878ccbfb978d84968e2df56bdae">&#9670;&nbsp;</a></span>change_outgoing_sdp_stream_media_address()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void change_outgoing_sdp_stream_media_address </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d04/structast__sip__transport.html">ast_sip_transport</a> *&#160;</td>
          <td class="paramname"><em>transport</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function which updates the media stream with external media address, if applicable. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02226">2226</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l01564">ast_sip_get_transport_state()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00162">ast_sip_transport_is_nonlocal</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00317">ast_sockaddr_stringify_addr_remote()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00077">host</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">PARSE_PORT_FORBID</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>
<div class="fragment"><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;{</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/dac/structast__sip__transport__state.html">ast_sip_transport_state</a> *, transport_state, <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ab6000ab7fe69594070bb59b995ccb5ee">ast_sip_get_transport_state</a>(<a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(transport)), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>[NI_MAXHOST];</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> our_sdp_addr = { { 0, } };</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;   <span class="comment">/* If the stream has been rejected there will be no connection line */</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;   <span class="keywordflow">if</span> (!stream-&gt;conn || !transport_state) {</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;   }</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(host, &amp;stream-&gt;conn-&gt;addr, <span class="keyword">sizeof</span>(host));</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;our_sdp_addr, host, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>);</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;   <span class="comment">/* Reversed check here. We don&#39;t check the remote endpoint being</span></div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;<span class="comment">    * in our local net, but whether our outgoing session IP is</span></div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;<span class="comment">    * local. If it is not, we won&#39;t do rewriting. No localnet</span></div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;<span class="comment">    * configured? Always rewrite. */</span></div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/res__pjsip_8h.html#aad3d1a24de38be6bb5ca698b672b65aa">ast_sip_transport_is_nonlocal</a>(transport_state, &amp;our_sdp_addr) &amp;&amp; transport_state-&gt;localnet) {</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;   }</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;Setting media address to %s\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#a22945f5f2361f03073df2d546c449e1c">ast_sockaddr_stringify_addr_remote</a>(&amp;transport_state-&gt;external_media_address));</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;   pj_strdup2(tdata-&gt;pool, &amp;stream-&gt;conn-&gt;addr, <a class="code" href="../../db/df1/netsock2_8h.html#a22945f5f2361f03073df2d546c449e1c">ast_sockaddr_stringify_addr_remote</a>(&amp;transport_state-&gt;external_media_address));</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;}</div><div class="ttc" id="res__pjsip_8h_html_aad3d1a24de38be6bb5ca698b672b65aa"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aad3d1a24de38be6bb5ca698b672b65aa">ast_sip_transport_is_nonlocal</a></div><div class="ttdeci">#define ast_sip_transport_is_nonlocal(transport_state, addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00162">res_pjsip.h:162</a></div></div>
<div class="ttc" id="netsock2_8h_html_a22945f5f2361f03073df2d546c449e1c"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a22945f5f2361f03073df2d546c449e1c">ast_sockaddr_stringify_addr_remote</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_addr_remote(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00317">netsock2.h:317</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">include/asterisk/config.h:1135</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="structast__sip__transport__state_html"><div class="ttname"><a href="../../db/dac/structast__sip__transport__state.html">ast_sip_transport_state</a></div><div class="ttdoc">Structure for SIP transport information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00087">res_pjsip.h:87</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ab6000ab7fe69594070bb59b995ccb5ee"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ab6000ab7fe69594070bb59b995ccb5ee">ast_sip_get_transport_state</a></div><div class="ttdeci">struct ast_sip_transport_state * ast_sip_get_transport_state(const char *transport_id)</div><div class="ttdoc">Retrieve transport state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d17/config__transport_8c_source.html#l01564">config_transport.c:1564</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a321884e3fb8a45013b26a3febd9cc198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a321884e3fb8a45013b26a3febd9cc198">&#9670;&nbsp;</a></span>check_endpoint_media_transport()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340">ast_sip_session_media_encryption</a> check_endpoint_media_transport </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks whether the encryption offered in SDP is compatible with the endpoint's configuration. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00970">970</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00508">AST_SIP_MEDIA_ENCRYPT_NONE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00506">AST_SIP_MEDIA_TRANSPORT_INVALID</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00711">ast_sip_media_rtp_configuration::encryption</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00713">ast_sip_media_rtp_configuration::encryption_optimistic</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00703">ast_sip_media_rtp_configuration::force_avp</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00938">get_media_encryption_type()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00701">ast_sip_media_rtp_configuration::use_avpf</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;{</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340">ast_sip_session_media_encryption</a> incoming_encryption;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   <span class="keywordtype">char</span> transport_end = stream-&gt;desc.transport.ptr[stream-&gt;desc.transport.slen - 1];</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> optimistic;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   <span class="keywordflow">if</span> ((transport_end == <span class="charliteral">&#39;F&#39;</span> &amp;&amp; !endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a22cbf192d1676e26e8e92db577988c0f">use_avpf</a>)</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      || (transport_end != <span class="charliteral">&#39;F&#39;</span> &amp;&amp; endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a22cbf192d1676e26e8e92db577988c0f">use_avpf</a>)) {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18">AST_SIP_MEDIA_TRANSPORT_INVALID</a>;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   }</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   incoming_encryption = <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ace0be555f61532a27ad7aff9968d3a9b">get_media_encryption_type</a>(stream-&gt;desc.transport, stream, &amp;optimistic);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   <span class="keywordflow">if</span> (incoming_encryption == endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a947ba038dc2e3de1a3d4ce24e88da1d4">encryption</a>) {</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <span class="keywordflow">return</span> incoming_encryption;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;   }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   <span class="keywordflow">if</span> (endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#af202800c8ffac887bac52c84da758f69">force_avp</a> ||</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#ab953e3c061e35e6c06541e75d1f45084">encryption_optimistic</a>) {</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <span class="keywordflow">return</span> incoming_encryption;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   }</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   <span class="comment">/* If an optimistic offer has been made but encryption is not enabled consider it as having</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment">    * no offer of crypto at all instead of invalid so the session proceeds.</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   <span class="keywordflow">if</span> (optimistic) {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a>;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;   }</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18">AST_SIP_MEDIA_TRANSPORT_INVALID</a>;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;}</div><div class="ttc" id="structast__sip__media__rtp__configuration_html_ab953e3c061e35e6c06541e75d1f45084"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#ab953e3c061e35e6c06541e75d1f45084">ast_sip_media_rtp_configuration::encryption_optimistic</a></div><div class="ttdeci">unsigned int encryption_optimistic</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00713">res_pjsip.h:713</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340">ast_sip_session_media_encryption</a></div><div class="ttdeci">ast_sip_session_media_encryption</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00504">res_pjsip.h:504</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18">AST_SIP_MEDIA_TRANSPORT_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00506">res_pjsip.h:506</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_a947ba038dc2e3de1a3d4ce24e88da1d4"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#a947ba038dc2e3de1a3d4ce24e88da1d4">ast_sip_media_rtp_configuration::encryption</a></div><div class="ttdeci">enum ast_sip_session_media_encryption encryption</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00711">res_pjsip.h:711</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_a22cbf192d1676e26e8e92db577988c0f"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#a22cbf192d1676e26e8e92db577988c0f">ast_sip_media_rtp_configuration::use_avpf</a></div><div class="ttdeci">unsigned int use_avpf</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00701">res_pjsip.h:701</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ace0be555f61532a27ad7aff9968d3a9b"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ace0be555f61532a27ad7aff9968d3a9b">get_media_encryption_type</a></div><div class="ttdeci">static enum ast_sip_session_media_encryption get_media_encryption_type(pj_str_t transport, const struct pjmedia_sdp_media *stream, unsigned int *optimistic)</div><div class="ttdoc">figure out media transport encryption type from the media transport string </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00938">res_pjsip_sdp_rtp.c:938</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_af202800c8ffac887bac52c84da758f69"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#af202800c8ffac887bac52c84da758f69">ast_sip_media_rtp_configuration::force_avp</a></div><div class="ttdeci">unsigned int force_avp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00703">res_pjsip.h:703</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00508">res_pjsip.h:508</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a31df8422bf06d5745f4f17d0ae1c7623"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31df8422bf06d5745f4f17d0ae1c7623">&#9670;&nbsp;</a></span>check_ice_support()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void check_ice_support </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>remote_stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function which checks for ice attributes in an audio stream. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00750">750</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02891">ast_rtp_instance_get_ice()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00697">ast_sip_media_rtp_configuration::ice_support</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00103">ast_sip_session_media::remote_ice</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;{</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a> *ice;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   <span class="keyword">const</span> pjmedia_sdp_attr *attr;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> attr_i;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#afc0a4cb1a5b0ecd8d4324bd8466788c2">ice_support</a> || !(ice = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>))) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a52b71bbc800a8503cfca7eb90f00e23a">remote_ice</a> = 0;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   <span class="comment">/* Find all of the candidates */</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="keywordflow">for</span> (attr_i = 0; attr_i &lt; remote_stream-&gt;attr_count; ++attr_i) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      attr = remote_stream-&gt;attr[attr_i];</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <span class="keywordflow">if</span> (!pj_strcmp2(&amp;attr-&gt;name, <span class="stringliteral">&quot;candidate&quot;</span>)) {</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;         session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a52b71bbc800a8503cfca7eb90f00e23a">remote_ice</a> = 1;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <span class="keywordflow">if</span> (attr_i == remote_stream-&gt;attr_count) {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a52b71bbc800a8503cfca7eb90f00e23a">remote_ice</a> = 0;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   }</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_afc0a4cb1a5b0ecd8d4324bd8466788c2"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#afc0a4cb1a5b0ecd8d4324bd8466788c2">ast_sip_media_rtp_configuration::ice_support</a></div><div class="ttdeci">unsigned int ice_support</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00697">res_pjsip.h:697</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a26e4699e53a894379aef105cdc12498e"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a></div><div class="ttdeci">struct ast_rtp_engine_ice * ast_rtp_instance_get_ice(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the ICE support present on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02891">rtp_engine.c:2891</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a></div><div class="ttdoc">Structure that represents the optional ICE support within an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00485">rtp_engine.h:485</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a52b71bbc800a8503cfca7eb90f00e23a"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a52b71bbc800a8503cfca7eb90f00e23a">ast_sip_session_media::remote_ice</a></div><div class="ttdeci">unsigned int remote_ice</div><div class="ttdoc">Does remote support ice. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00103">res_pjsip_session.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab653bf2446add6cfdc65194fd89fcab0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab653bf2446add6cfdc65194fd89fcab0">&#9670;&nbsp;</a></span>create_outgoing_sdp_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int create_outgoing_sdp_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct pjmedia_sdp_session *&#160;</td>
          <td class="paramname"><em>sdp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_session *&#160;</td>
          <td class="paramname"><em>remote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function which creates an outgoing stream. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">1704</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01580">add_crypto_to_stream()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01354">add_extmap_to_stream()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00675">add_ice_to_stream()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01272">add_msid_to_stream()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01319">add_rtcp_fb_to_stream()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01202">add_ssrc_to_stream()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00758">ast_sip_endpoint_media_configuration::address</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00630">ast_format_cap_get_compatible()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00438">ast_format_cap_get_framing()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00369">ast_format_get_maximum_ms()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00354">ast_format_get_type()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01569">ast_rtp_codecs_get_framing()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01873">ast_rtp_codecs_payload_code()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01923">ast_rtp_codecs_payload_set_rx()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00266">AST_RTP_DTMF</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02160">ast_rtp_instance_change_source()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00727">ast_rtp_instance_get_codecs()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00643">ast_rtp_instance_get_local_address()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03778">ast_rtp_instance_get_ssrc()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00272">AST_RTP_MAX</a>, <a class="el" href="../../d4/d3c/sdp__srtp_8c_source.html#l00103">ast_sdp_get_rtp_profile()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00419">AST_SIP_DTMF_AUTO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00421">AST_SIP_DTMF_AUTO_INFO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00413">AST_SIP_DTMF_RFC_4733</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05473">ast_sip_get_host_ip_string()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00510">AST_SIP_MEDIA_ENCRYPT_SDES</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00359">ast_sip_session_is_pending_stream_default()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00414">ast_sip_session_media_get_transport()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00521">ast_sockaddr_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00202">AST_SOCKADDR_STR_ADDR</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00065">ast_sockaddr_stringify_fmt()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01136">ast_str_tmp</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00330">ast_stream_get_formats()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00500">ast_stream_get_position()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00373">ast_stream_get_state()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00380">ast_stream_set_state()</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00094">AST_STREAM_STATE_INACTIVE</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00090">AST_STREAM_STATE_RECVONLY</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00078">AST_STREAM_STATE_REMOVED</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00086">AST_STREAM_STATE_SENDONLY</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00337">ast_stream_to_str()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00113">ast_sip_session_media::bundle_group</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00115">ast_sip_session_media::bundled</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00770">ast_sip_endpoint_media_configuration::codecs</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00228">create_rtp()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00081">ast_sip_session_media::direct_media_addr</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00203">ast_sip_session::direct_media_cap</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00233">ast_sip_session::dtmf</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00165">enable_rtcp()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00087">ast_sip_session_media::encryption</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00713">ast_sip_media_rtp_configuration::encryption_optimistic</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00703">ast_sip_media_rtp_configuration::force_avp</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00649">generate_fmtp_attr()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00614">generate_rtpmap_attr()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00693">ast_sip_media_rtp_configuration::ipv6</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00099">ast_sip_session_media::locally_held</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">ast_sip_session::pending_media_state</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00101">ast_sip_session_media::remote_rtcp_mux</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00095">ast_sip_session_media::remotely_held</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00786">ast_sip_endpoint_media_configuration::rtcp_mux</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01181">set_ice_components()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00109">ast_sip_session_media::stream_num</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00089">ast_sip_session_media::transport</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">ast_sip_session_media::type</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00701">ast_sip_media_rtp_configuration::use_avpf</a>.</p>
<div class="fragment"><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;{</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;   pj_pool_t *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;pool_prov;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_RTP_AVP = { <span class="stringliteral">&quot;RTP/AVP&quot;</span>, 7 };</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_IN = { <span class="stringliteral">&quot;IN&quot;</span>, 2 };</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_IP4 = { <span class="stringliteral">&quot;IP4&quot;</span>, 3};</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_IP6 = { <span class="stringliteral">&quot;IP6&quot;</span>, 3};</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_SENDRECV = { <span class="stringliteral">&quot;sendrecv&quot;</span>, 8 };</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_SENDONLY = { <span class="stringliteral">&quot;sendonly&quot;</span>, 8 };</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_INACTIVE = { <span class="stringliteral">&quot;inactive&quot;</span>, 8 };</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_RECVONLY = { <span class="stringliteral">&quot;recvonly&quot;</span>, 8 };</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;   pjmedia_sdp_media *media;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *hostip = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> addr;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[512];</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;   pj_str_t stmp;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;   pjmedia_sdp_attr *attr;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;   <span class="keywordtype">int</span> index = 0;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;   <span class="keywordtype">int</span> noncodec = (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">dtmf</a> == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2">AST_SIP_DTMF_RFC_4733</a> || session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">dtmf</a> == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a> || session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">dtmf</a> == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a>) ? <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a> : 0;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;   <span class="keywordtype">int</span> min_packet_size = 0, max_packet_size = 0;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;   <span class="keywordtype">int</span> rtp_code;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *, caps, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="code" href="../../d1/d94/sip_8h.html#a99c5ff7e5199a13ca4884062b413d68f">media_type</a> = session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media_transport;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;   pj_sockaddr ip;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;   <span class="keywordtype">int</span> direct_media_enabled = !<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">direct_media_addr</a>) &amp;&amp;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aea104bc5edcb830fe465bc8a7f6aed45">direct_media_cap</a>);</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s Type: %s %s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session),</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;      <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(media_type), <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(128, <a class="code" href="../../d8/d95/stream_8h.html#af793e90c3796564a01574fd9c5e9e208">ast_stream_to_str</a>(stream, &amp;STR_TMP)));</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;   media = pj_pool_zalloc(pool, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> pjmedia_sdp_media));</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;   <span class="keywordflow">if</span> (!media) {</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Pool alloc failure\n&quot;</span>);</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;   }</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   pj_strdup2(pool, &amp;media-&gt;desc.media, <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   <span class="comment">/* If this is a removed (or declined) stream OR if no formats exist then construct a minimal stream in SDP */</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d95/stream_8h.html#a6fdfb5754dad81680c197d5c9df44971">ast_stream_get_state</a>(stream) == <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a> || !<a class="code" href="../../d8/d95/stream_8h.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(stream) ||</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      !<a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(<a class="code" href="../../d8/d95/stream_8h.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(stream))) {</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      media-&gt;desc.port = 0;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      media-&gt;desc.port_count = 1;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;      <span class="keywordflow">if</span> (remote &amp;&amp; remote-&gt;media[<a class="code" href="../../d8/d95/stream_8h.html#a35dd19cc6a6f0310d45e181398095463">ast_stream_get_position</a>(stream)]) {</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;         pjmedia_sdp_media *remote_media = remote-&gt;media[<a class="code" href="../../d8/d95/stream_8h.html#a35dd19cc6a6f0310d45e181398095463">ast_stream_get_position</a>(stream)];</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;         <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;         media-&gt;desc.transport = remote_media-&gt;desc.transport;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;         <span class="comment">/* Preserve existing behavior by copying the formats provided from the offer */</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;         <span class="keywordflow">for</span> (index = 0; index &lt; remote_media-&gt;desc.fmt_count; ++index) {</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;            media-&gt;desc.fmt[index] = remote_media-&gt;desc.fmt[index];</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;         }</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;         media-&gt;desc.fmt_count = remote_media-&gt;desc.fmt_count;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;         <span class="comment">/* This is actually an offer so put a dummy payload in that is ignored and sane transport */</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;         media-&gt;desc.transport = STR_RTP_AVP;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;         pj_strdup2(pool, &amp;media-&gt;desc.fmt[media-&gt;desc.fmt_count++], <span class="stringliteral">&quot;32&quot;</span>);</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;      }</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;      sdp-&gt;media[sdp-&gt;media_count++] = media;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <a class="code" href="../../d8/d95/stream_8h.html#a4459bba3b00250f5c5b2b4ae265909ee">ast_stream_set_state</a>(stream, <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a>);</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(1, <span class="stringliteral">&quot;Stream removed or no formats\n&quot;</span>);</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;   }</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;   <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> &amp;&amp; <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aea9df35ad9322360bd011b9c0f525712">create_rtp</a>(session, session_media, sdp)) {</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Couldn&#39;t create rtp\n&quot;</span>);</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;   }</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;   <span class="comment">/* If this stream has not been bundled already it is new and we need to ensure there is no SSRC conflict */</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;   <span class="keywordflow">if</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a881aec0b280ab825a2019a19e7886a20">bundle_group</a> != -1 &amp;&amp; !session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#adde8efbb4df251209d1b3e05e166a025">bundled</a>) {</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      <span class="keywordflow">for</span> (index = 0; index &lt; sdp-&gt;media_count; ++index) {</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *other_session_media;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;         other_session_media = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">pending_media_state</a>-&gt;sessions, index);</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;         <span class="keywordflow">if</span> (!other_session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> || other_session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a881aec0b280ab825a2019a19e7886a20">bundle_group</a> != session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a881aec0b280ab825a2019a19e7886a20">bundle_group</a>) {</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;         }</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/rtp__engine_8h.html#af0adb620e28a15749fe5bf4f6912f00d">ast_rtp_instance_get_ssrc</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) == <a class="code" href="../../d5/dde/rtp__engine_8h.html#af0adb620e28a15749fe5bf4f6912f00d">ast_rtp_instance_get_ssrc</a>(other_session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>)) {</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;            <a class="code" href="../../d5/dde/rtp__engine_8h.html#adcb4a92a7c8fd3bcde19ecc417a3e8a3">ast_rtp_instance_change_source</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;            <span class="comment">/* Start the conflict check over again */</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;            index = -1;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;         }</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      }</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;   }</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;   session_media_transport = <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aa29930c927d55f4f7a615a11766a6a09">ast_sip_session_media_get_transport</a>(session, session_media);</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;   <span class="keywordflow">if</span> (session_media_transport == session_media || !session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#adde8efbb4df251209d1b3e05e166a025">bundled</a>) {</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#af0f3c0953aba91059ad040ae70e36d37">set_ice_components</a>(session, session_media);</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae92b132c7aaa847416dffe0b3f888e49">enable_rtcp</a>(session, session_media, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <span class="comment">/* Crypto has to be added before setting the media transport so that SRTP is properly</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="comment">       * set up according to the configuration. This ends up changing the media transport.</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ada763c35134fc5794bd2989943860844">add_crypto_to_stream</a>(session, session_media, pool, media)) {</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Couldn&#39;t add crypto\n&quot;</span>);</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      }</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      <span class="keywordflow">if</span> (pj_strlen(&amp;session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#ad55758f6305a57020c731e04863f15b4">transport</a>)) {</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;         <span class="comment">/* If a transport has already been specified use it */</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;         media-&gt;desc.transport = session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#ad55758f6305a57020c731e04863f15b4">transport</a>;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;         media-&gt;desc.transport = pj_str(<a class="code" href="../../de/d5f/sdp__srtp_8h.html#a9f3ad26ba5162009a73708f11aa7a229">ast_sdp_get_rtp_profile</a>(</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;            <span class="comment">/* Optimistic encryption places crypto in the normal RTP/AVP profile */</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;            !session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#ab953e3c061e35e6c06541e75d1f45084">encryption_optimistic</a> &amp;&amp;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;               (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a947ba038dc2e3de1a3d4ce24e88da1d4">encryption</a> == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf">AST_SIP_MEDIA_ENCRYPT_SDES</a>),</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;            session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a22cbf192d1676e26e8e92db577988c0f">use_avpf</a>,</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;            session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#af202800c8ffac887bac52c84da758f69">force_avp</a>));</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      }</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      media-&gt;conn = pj_pool_zalloc(pool, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> pjmedia_sdp_conn));</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      <span class="keywordflow">if</span> (!media-&gt;conn) {</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Pool alloc failure\n&quot;</span>);</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      }</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      <span class="comment">/* Add connection level details */</span></div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      <span class="keywordflow">if</span> (direct_media_enabled) {</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;         hostip = <a class="code" href="../../db/df1/netsock2_8h.html#aad2e0cad576255ff62b04a6b11b65491">ast_sockaddr_stringify_fmt</a>(&amp;session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">direct_media_addr</a>, <a class="code" href="../../db/df1/netsock2_8h.html#a4d31b81f8c041f32492b7921a057e426">AST_SOCKADDR_STR_ADDR</a>);</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#adfdf62b1e020aa0785512e95b7548093">address</a>)) {</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;         hostip = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ac6da8e5c5006c0a1c81feb1198ab7e6e">ast_sip_get_host_ip_string</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#afe8dd140f860d3270f0a530f86521bf2">ipv6</a> ? pj_AF_INET6() : pj_AF_INET());</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;         hostip = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#adfdf62b1e020aa0785512e95b7548093">address</a>;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      }</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(hostip)) {</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No local host IP available for stream %s\n&quot;</span>,</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;            <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;No local host ip\n&quot;</span>);</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;      }</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;      media-&gt;conn-&gt;net_type = STR_IN;</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <span class="comment">/* Assume that the connection will use IPv4 until proven otherwise */</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      media-&gt;conn-&gt;addr_type = STR_IP4;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      pj_strdup2(pool, &amp;media-&gt;conn-&gt;addr, hostip);</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      <span class="keywordflow">if</span> ((pj_sockaddr_parse(pj_AF_UNSPEC(), 0, &amp;media-&gt;conn-&gt;addr, &amp;ip) == PJ_SUCCESS) &amp;&amp;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;         (ip.addr.sa_family == pj_AF_INET6())) {</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;         media-&gt;conn-&gt;addr_type = STR_IP6;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      }</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;      <span class="comment">/* Add ICE attributes and candidates */</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6ca888a4c8b8828ccb2bf37dcc37230a">add_ice_to_stream</a>(session, session_media, pool, media, 1);</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a80baeff1bd121c3168ede2a955e9b3a2">ast_rtp_instance_get_local_address</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, &amp;addr);</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      media-&gt;desc.port = direct_media_enabled ? <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">direct_media_addr</a>) : (pj_uint16_t) ast_sockaddr_port(&amp;addr);</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      media-&gt;desc.port_count = 1;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      pjmedia_sdp_media *bundle_group_stream = sdp-&gt;media[session_media_transport-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a>];</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;      <span class="comment">/* As this is in a bundle group it shares the same details as the group instance */</span></div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      media-&gt;desc.transport = bundle_group_stream-&gt;desc.transport;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;      media-&gt;conn = bundle_group_stream-&gt;conn;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      media-&gt;desc.port = bundle_group_stream-&gt;desc.port;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ada763c35134fc5794bd2989943860844">add_crypto_to_stream</a>(session, session_media_transport, pool, media)) {</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Couldn&#39;t add crypto\n&quot;</span>);</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      }</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6ca888a4c8b8828ccb2bf37dcc37230a">add_ice_to_stream</a>(session, session_media_transport, pool, media, 0);</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae92b132c7aaa847416dffe0b3f888e49">enable_rtcp</a>(session, session_media, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;   }</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;   <span class="keywordflow">if</span> (!(caps = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to allocate %s capabilities\n&quot;</span>,</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;         <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Couldn&#39;t create caps\n&quot;</span>);</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;   }</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;   <span class="keywordflow">if</span> (direct_media_enabled) {</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a43950f716385bc78a73de04acd6a7eb4">ast_format_cap_get_compatible</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a250b131731bf019fe96a44c9473437f0">codecs</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aea104bc5edcb830fe465bc8a7f6aed45">direct_media_cap</a>, caps);</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(caps, <a class="code" href="../../d8/d95/stream_8h.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(stream), media_type);</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;   }</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(caps); ++index) {</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(caps, index);</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(format) != media_type) {</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      }</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      <span class="comment">/* If this stream is not a transport we need to use the transport codecs structure for payload management to prevent</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;<span class="comment">       * conflicts.</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <span class="keywordflow">if</span> (session_media_transport != session_media) {</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;         <span class="keywordflow">if</span> ((rtp_code = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af77702faece7e8cc93042e21eb2ed05c">ast_rtp_codecs_payload_code</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(session_media_transport-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>), 1, format, 0)) == -1) {</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,<span class="stringliteral">&quot;Unable to get rtp codec payload code for %s\n&quot;</span>, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(format));</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;         }</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;         <span class="comment">/* Our instance has to match the payload number though */</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0d1b6644a258c74b557e5227f07ff4f6">ast_rtp_codecs_payload_set_rx</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>), rtp_code, format);</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;         <span class="keywordflow">if</span> ((rtp_code = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af77702faece7e8cc93042e21eb2ed05c">ast_rtp_codecs_payload_code</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>), 1, format, 0)) == -1) {</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,<span class="stringliteral">&quot;Unable to get rtp codec payload code for %s\n&quot;</span>, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(format));</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;         }</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      }</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;      <span class="keywordflow">if</span> ((attr = <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a4ccb0d043dc33e311032926effcdb72e">generate_rtpmap_attr</a>(session, media, pool, rtp_code, 1, format, 0))) {</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;         media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      }</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      <span class="keywordflow">if</span> ((attr = <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a7d91d967266c86a79b0bf46f950fce2e">generate_fmtp_attr</a>(pool, format, rtp_code))) {</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;         media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      }</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#af264a3ab15360f0dacb6cafd731bb5f9">ast_format_get_maximum_ms</a>(format) &amp;&amp;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;         ((<a class="code" href="../../d0/d0a/format_8h.html#af264a3ab15360f0dacb6cafd731bb5f9">ast_format_get_maximum_ms</a>(format) &lt; max_packet_size) || !max_packet_size)) {</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;         max_packet_size = <a class="code" href="../../d0/d0a/format_8h.html#af264a3ab15360f0dacb6cafd731bb5f9">ast_format_get_maximum_ms</a>(format);</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;      }</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      <span class="keywordflow">if</span> (media-&gt;desc.fmt_count == PJMEDIA_MAX_SDP_FMT) {</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;      }</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;   }</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;   <span class="comment">/* Add non-codec formats */</span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a4d96ab8cbcc0f85012300573e3db2900">ast_sip_session_is_pending_stream_default</a>(session, stream) &amp;&amp; media_type != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      &amp;&amp; media-&gt;desc.fmt_count &lt; PJMEDIA_MAX_SDP_FMT) {</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;      <span class="keywordflow">for</span> (index = 1LL; index &lt;= <a class="code" href="../../d5/dde/rtp__engine_8h.html#ae89f572a6b37614f05f4e210afcffa8c">AST_RTP_MAX</a>; index &lt;&lt;= 1) {</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;         <span class="keywordflow">if</span> (!(noncodec &amp; index)) {</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;         }</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;         rtp_code = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af77702faece7e8cc93042e21eb2ed05c">ast_rtp_codecs_payload_code</a>(</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;            <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>), 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, index);</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;         <span class="keywordflow">if</span> (rtp_code == -1) {</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;         }</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;         <span class="keywordflow">if</span> ((attr = <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a4ccb0d043dc33e311032926effcdb72e">generate_rtpmap_attr</a>(session, media, pool, rtp_code, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, index))) {</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;            media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;         }</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;         <span class="keywordflow">if</span> (index == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a>) {</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;            snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%d 0-16&quot;</span>, rtp_code);</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;            attr = pjmedia_sdp_attr_create(pool, <span class="stringliteral">&quot;fmtp&quot;</span>, pj_cstr(&amp;stmp, tmp));</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;         }</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;         <span class="keywordflow">if</span> (media-&gt;desc.fmt_count == PJMEDIA_MAX_SDP_FMT) {</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;         }</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;      }</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;   }</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;   <span class="comment">/* If no formats were actually added to the media stream don&#39;t add it to the SDP */</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;   <span class="keywordflow">if</span> (!media-&gt;desc.fmt_count) {</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(1, <span class="stringliteral">&quot;No formats added to stream\n&quot;</span>);</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;   }</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;   <span class="comment">/* If ptime is set add it as an attribute */</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;   min_packet_size = <a class="code" href="../../d5/dde/rtp__engine_8h.html#aef5d988932736b654957f46ff4360889">ast_rtp_codecs_get_framing</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>));</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;   <span class="keywordflow">if</span> (!min_packet_size) {</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      min_packet_size = <a class="code" href="../../d0/d3c/format__cap_8h.html#a3aaa13500c7e4dd3dad8e4c6afccbed3">ast_format_cap_get_framing</a>(caps);</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;   }</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;   <span class="keywordflow">if</span> (min_packet_size) {</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;      snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%d&quot;</span>, min_packet_size);</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      attr = pjmedia_sdp_attr_create(pool, <span class="stringliteral">&quot;ptime&quot;</span>, pj_cstr(&amp;stmp, tmp));</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;      media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;   }</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;   <span class="keywordflow">if</span> (max_packet_size) {</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;      snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%d&quot;</span>, max_packet_size);</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      attr = pjmedia_sdp_attr_create(pool, <span class="stringliteral">&quot;maxptime&quot;</span>, pj_cstr(&amp;stmp, tmp));</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;      media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;   }</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;   attr = PJ_POOL_ZALLOC_T(pool, pjmedia_sdp_attr);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;   <span class="keywordflow">if</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a614b910c903ad23072690351e463a94f">locally_held</a>) {</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      <span class="keywordflow">if</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a89f65c64a4a6a3d3505cfe31d549af90">remotely_held</a>) {</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;         attr-&gt;name = STR_INACTIVE; <span class="comment">/* To place on hold a recvonly stream, send inactive */</span></div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;         attr-&gt;name = STR_SENDONLY; <span class="comment">/* Send sendonly to initate a local hold */</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;      }</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      <span class="keywordflow">if</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a89f65c64a4a6a3d3505cfe31d549af90">remotely_held</a>) {</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;         attr-&gt;name = STR_RECVONLY; <span class="comment">/* Remote has sent sendonly, reply recvonly */</span></div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/d95/stream_8h.html#a6fdfb5754dad81680c197d5c9df44971">ast_stream_get_state</a>(stream) == <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288afaf3d3b8e7792a1332821dbbebf2d443">AST_STREAM_STATE_SENDONLY</a>) {</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;         attr-&gt;name = STR_SENDONLY; <span class="comment">/* Stream has requested sendonly */</span></div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/d95/stream_8h.html#a6fdfb5754dad81680c197d5c9df44971">ast_stream_get_state</a>(stream) == <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288a5c7755c7947aed47c123f459311deb24">AST_STREAM_STATE_RECVONLY</a>) {</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;         attr-&gt;name = STR_RECVONLY; <span class="comment">/* Stream has requested recvonly */</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/d95/stream_8h.html#a6fdfb5754dad81680c197d5c9df44971">ast_stream_get_state</a>(stream) == <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ab9ff868b434da3a67f28c50766cb3c93">AST_STREAM_STATE_INACTIVE</a>) {</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;         attr-&gt;name = STR_INACTIVE; <span class="comment">/* Stream has requested inactive */</span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;         attr-&gt;name = STR_SENDRECV; <span class="comment">/* No hold in either direction */</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;      }</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;   }</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;   media-&gt;attr[media-&gt;attr_count++] = attr;</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;   <span class="comment">/* If we&#39;ve got rtcp-mux enabled, add it unless we received an offer without it */</span></div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a86ef296f0f63688c8273119a2611f876">rtcp_mux</a> &amp;&amp; session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a6f7b8add12e23680b28e4b88f70a1a83">remote_rtcp_mux</a>) {</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      attr = pjmedia_sdp_attr_create(pool, <span class="stringliteral">&quot;rtcp-mux&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;      pjmedia_sdp_attr_add(&amp;media-&gt;attr_count, media-&gt;attr, attr);</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;   }</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;   <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae683ffcf4f013693ab63faf2a7756ca1">add_ssrc_to_stream</a>(session, session_media, pool, media);</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;   <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#abe75d44d3d0fe75087836c162fae8b39">add_msid_to_stream</a>(session, session_media, pool, media, stream);</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;   <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#abbafd55e7e00c2c1dbf1002b991e62bb">add_rtcp_fb_to_stream</a>(session, session_media, pool, media);</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;   <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6ce69115632656453cdede4527ee7a17">add_extmap_to_stream</a>(session, session_media, pool, media);</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;   <span class="comment">/* Add the media stream to the SDP */</span></div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;   sdp-&gt;media[sdp-&gt;media_count++] = media;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(1, <span class="stringliteral">&quot;RC: 1\n&quot;</span>);</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;}</div><div class="ttc" id="structast__sip__media__rtp__configuration_html_ab953e3c061e35e6c06541e75d1f45084"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#ab953e3c061e35e6c06541e75d1f45084">ast_sip_media_rtp_configuration::encryption_optimistic</a></div><div class="ttdeci">unsigned int encryption_optimistic</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00713">res_pjsip.h:713</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="stream_8h_html_af793e90c3796564a01574fd9c5e9e208"><div class="ttname"><a href="../../d8/d95/stream_8h.html#af793e90c3796564a01574fd9c5e9e208">ast_stream_to_str</a></div><div class="ttdeci">const char * ast_stream_to_str(const struct ast_stream *stream, struct ast_str **buf)</div><div class="ttdoc">Get a string representing the stream for debugging/display purposes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00337">stream.c:337</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ae92b132c7aaa847416dffe0b3f888e49"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae92b132c7aaa847416dffe0b3f888e49">enable_rtcp</a></div><div class="ttdeci">static void enable_rtcp(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const struct pjmedia_sdp_media *remote_media)</div><div class="ttdoc">Enable RTCP on an RTP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00165">res_pjsip_sdp_rtp.c:165</a></div></div>
<div class="ttc" id="format_8h_html_a0aba6e17ced3e85e838ea097baa5ddc7"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a></div><div class="ttdeci">enum ast_media_type ast_format_get_type(const struct ast_format *format)</div><div class="ttdoc">Get the media type of a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00354">format.c:354</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a86ef296f0f63688c8273119a2611f876"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a86ef296f0f63688c8273119a2611f876">ast_sip_endpoint_media_configuration::rtcp_mux</a></div><div class="ttdeci">unsigned int rtcp_mux</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00786">res_pjsip.h:786</a></div></div>
<div class="ttc" id="format__cap_8h_html_a3aaa13500c7e4dd3dad8e4c6afccbed3"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a3aaa13500c7e4dd3dad8e4c6afccbed3">ast_format_cap_get_framing</a></div><div class="ttdeci">unsigned int ast_format_cap_get_framing(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the global framing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00438">format_cap.c:438</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a614b910c903ad23072690351e463a94f"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a614b910c903ad23072690351e463a94f">ast_sip_session_media::locally_held</a></div><div class="ttdeci">unsigned int locally_held</div><div class="ttdoc">Stream is on hold by local side. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00099">res_pjsip_session.h:99</a></div></div>
<div class="ttc" id="structast__sip__session_html_aac4ee0b861f67a3db82eb3600c0f1624"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">ast_sip_session::pending_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * pending_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">res_pjsip_session.h:211</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_ab54fb097c283df49c3803d7bf416e51e"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">ast_sip_session_media::direct_media_addr</a></div><div class="ttdeci">struct ast_sockaddr direct_media_addr</div><div class="ttdoc">Direct media address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00081">res_pjsip_session.h:81</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_aea9df35ad9322360bd011b9c0f525712"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aea9df35ad9322360bd011b9c0f525712">create_rtp</a></div><div class="ttdeci">static int create_rtp(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const pjmedia_sdp_session *sdp)</div><div class="ttdoc">Internal function which creates an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00228">res_pjsip_sdp_rtp.c:228</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_adcb4a92a7c8fd3bcde19ecc417a3e8a3"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#adcb4a92a7c8fd3bcde19ecc417a3e8a3">ast_rtp_instance_change_source</a></div><div class="ttdeci">void ast_rtp_instance_change_source(struct ast_rtp_instance *instance)</div><div class="ttdoc">Indicate a new source of audio has dropped in and the ssrc should change. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02160">rtp_engine.c:2160</a></div></div>
<div class="ttc" id="sip_8h_html_a99c5ff7e5199a13ca4884062b413d68f"><div class="ttname"><a href="../../d1/d94/sip_8h.html#a99c5ff7e5199a13ca4884062b413d68f">media_type</a></div><div class="ttdeci">media_type</div><div class="ttdoc">Media types generate different &quot;dummy answers&quot; for not accepting the offer of a media stream...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00489">sip.h:489</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aa29930c927d55f4f7a615a11766a6a09"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aa29930c927d55f4f7a615a11766a6a09">ast_sip_session_media_get_transport</a></div><div class="ttdeci">struct ast_sip_session_media * ast_sip_session_media_get_transport(struct ast_sip_session *session, struct ast_sip_session_media *session_media)</div><div class="ttdoc">Retrieve the underlying media session that is acting as transport for a media session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00414">res_pjsip_session.c:414</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0376aa2503a185437fab8cb0b7d674fb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * ast_rtp_instance_get_codecs(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the codecs structure of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00727">rtp_engine.c:727</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_ad55758f6305a57020c731e04863f15b4"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#ad55758f6305a57020c731e04863f15b4">ast_sip_session_media::transport</a></div><div class="ttdeci">pj_str_t transport</div><div class="ttdoc">The media transport in use for this stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00089">res_pjsip_session.h:89</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a250b131731bf019fe96a44c9473437f0"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a250b131731bf019fe96a44c9473437f0">ast_sip_endpoint_media_configuration::codecs</a></div><div class="ttdeci">struct ast_format_cap * codecs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00770">res_pjsip.h:770</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a></div><div class="ttdoc">Set when the stream has been removed/declined. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00078">stream.h:78</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_adfdf62b1e020aa0785512e95b7548093"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#adfdf62b1e020aa0785512e95b7548093">ast_sip_endpoint_media_configuration::address</a></div><div class="ttdeci">const ast_string_field address</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00758">res_pjsip.h:758</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00421">res_pjsip.h:421</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ada763c35134fc5794bd2989943860844"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ada763c35134fc5794bd2989943860844">add_crypto_to_stream</a></div><div class="ttdeci">static int add_crypto_to_stream(struct ast_sip_session *session, struct ast_sip_session_media *session_media, pj_pool_t *pool, pjmedia_sdp_media *media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01580">res_pjsip_sdp_rtp.c:1580</a></div></div>
<div class="ttc" id="sdp__srtp_8h_html_a9f3ad26ba5162009a73708f11aa7a229"><div class="ttname"><a href="../../de/d5f/sdp__srtp_8h.html#a9f3ad26ba5162009a73708f11aa7a229">ast_sdp_get_rtp_profile</a></div><div class="ttdeci">char * ast_sdp_get_rtp_profile(unsigned int sdes_active, struct ast_rtp_instance *instance, unsigned int using_avpf, unsigned int force_avp)</div><div class="ttdoc">Get the RTP profile in use by a media session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3c/sdp__srtp_8c_source.html#l00103">sdp_srtp.c:103</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288ab9ff868b434da3a67f28c50766cb3c93"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ab9ff868b434da3a67f28c50766cb3c93">AST_STREAM_STATE_INACTIVE</a></div><div class="ttdoc">Set when the stream is not sending OR receiving media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00094">stream.h:94</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aef5d988932736b654957f46ff4360889"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aef5d988932736b654957f46ff4360889">ast_rtp_codecs_get_framing</a></div><div class="ttdeci">unsigned int ast_rtp_codecs_get_framing(struct ast_rtp_codecs *codecs)</div><div class="ttdoc">Get the framing used for a set of codecs. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01569">rtp_engine.c:1569</a></div></div>
<div class="ttc" id="structast__sip__session_html_aea104bc5edcb830fe465bc8a7f6aed45"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#aea104bc5edcb830fe465bc8a7f6aed45">ast_sip_session::direct_media_cap</a></div><div class="ttdeci">struct ast_format_cap * direct_media_cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00203">res_pjsip_session.h:203</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a947ba038dc2e3de1a3d4ce24e88da1d4"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a947ba038dc2e3de1a3d4ce24e88da1d4">ast_sip_session_media::encryption</a></div><div class="ttdeci">enum ast_sip_session_media_encryption encryption</div><div class="ttdoc">What type of encryption is in use on this stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00087">res_pjsip_session.h:87</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_adde8efbb4df251209d1b3e05e166a025"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#adde8efbb4df251209d1b3e05e166a025">ast_sip_session_media::bundled</a></div><div class="ttdeci">unsigned int bundled</div><div class="ttdoc">Whether this stream is currently bundled or not. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00115">res_pjsip_session.h:115</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ac6da8e5c5006c0a1c81feb1198ab7e6e"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ac6da8e5c5006c0a1c81feb1198ab7e6e">ast_sip_get_host_ip_string</a></div><div class="ttdeci">const char * ast_sip_get_host_ip_string(int af)</div><div class="ttdoc">Retrieve the local host address in string form. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05473">res_pjsip.c:5473</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="netsock2_8h_html_a51e2841175bf3ad58a4e11ad9fb2453f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a></div><div class="ttdeci">#define ast_sockaddr_port(addr)</div><div class="ttdoc">Get the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00521">netsock2.h:521</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ae89f572a6b37614f05f4e210afcffa8c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ae89f572a6b37614f05f4e210afcffa8c">AST_RTP_MAX</a></div><div class="ttdeci">#define AST_RTP_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00272">rtp_engine.h:272</a></div></div>
<div class="ttc" id="strings_8h_html_a68ab38eef5d5958cae536ba7589093cc"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a></div><div class="ttdeci">#define ast_str_tmp(init_len, __expr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01136">strings.h:1136</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a7d91d967266c86a79b0bf46f950fce2e"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a7d91d967266c86a79b0bf46f950fce2e">generate_fmtp_attr</a></div><div class="ttdeci">static pjmedia_sdp_attr * generate_fmtp_attr(pj_pool_t *pool, struct ast_format *format, int rtp_code)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00649">res_pjsip_sdp_rtp.c:649</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a4d96ab8cbcc0f85012300573e3db2900"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a4d96ab8cbcc0f85012300573e3db2900">ast_sip_session_is_pending_stream_default</a></div><div class="ttdeci">int ast_sip_session_is_pending_stream_default(const struct ast_sip_session *session, const struct ast_stream *stream)</div><div class="ttdoc">Determines if a provided pending stream will be the default stream or not. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00359">res_pjsip_session.c:359</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af77702faece7e8cc93042e21eb2ed05c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af77702faece7e8cc93042e21eb2ed05c">ast_rtp_codecs_payload_code</a></div><div class="ttdeci">int ast_rtp_codecs_payload_code(struct ast_rtp_codecs *codecs, int asterisk_format, struct ast_format *format, int code)</div><div class="ttdoc">Retrieve a rx mapped payload type based on whether it is an Asterisk format and the code...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01873">rtp_engine.c:1873</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ae683ffcf4f013693ab63faf2a7756ca1"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae683ffcf4f013693ab63faf2a7756ca1">add_ssrc_to_stream</a></div><div class="ttdeci">static void add_ssrc_to_stream(struct ast_sip_session *session, struct ast_sip_session_media *session_media, pj_pool_t *pool, pjmedia_sdp_media *media)</div><div class="ttdoc">Function which adds ssrc attributes to a media stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01202">res_pjsip_sdp_rtp.c:1202</a></div></div>
<div class="ttc" id="stream_8h_html_ae8e2f46d218285e0f0ec97ba8ab77ffb"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a></div><div class="ttdeci">const struct ast_format_cap * ast_stream_get_formats(const struct ast_stream *stream)</div><div class="ttdoc">Get the current negotiated formats of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00330">stream.c:330</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a4ccb0d043dc33e311032926effcdb72e"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a4ccb0d043dc33e311032926effcdb72e">generate_rtpmap_attr</a></div><div class="ttdeci">static pjmedia_sdp_attr * generate_rtpmap_attr(struct ast_sip_session *session, pjmedia_sdp_media *media, pj_pool_t *pool, int rtp_code, int asterisk_format, struct ast_format *format, int code)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00614">res_pjsip_sdp_rtp.c:614</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_a22cbf192d1676e26e8e92db577988c0f"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#a22cbf192d1676e26e8e92db577988c0f">ast_sip_media_rtp_configuration::use_avpf</a></div><div class="ttdeci">unsigned int use_avpf</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00701">res_pjsip.h:701</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8383e75e786449dd2f4258b0819dd8f1"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8383e75e786449dd2f4258b0819dd8f1">ast_sip_session_media::stream_num</a></div><div class="ttdeci">int stream_num</div><div class="ttdoc">The stream number to place into any resulting frames. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00109">res_pjsip_session.h:109</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="structast__sip__session_html_abb7c899dc9afe319240163be2b213813"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">ast_sip_session::dtmf</a></div><div class="ttdeci">enum ast_sip_dtmf_mode dtmf</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00233">res_pjsip_session.h:233</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af0adb620e28a15749fe5bf4f6912f00d"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af0adb620e28a15749fe5bf4f6912f00d">ast_rtp_instance_get_ssrc</a></div><div class="ttdeci">unsigned int ast_rtp_instance_get_ssrc(struct ast_rtp_instance *rtp)</div><div class="ttdoc">Retrieve the local SSRC value that we will be using. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03778">rtp_engine.c:3778</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad2e0cad576255ff62b04a6b11b65491"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad2e0cad576255ff62b04a6b11b65491">ast_sockaddr_stringify_fmt</a></div><div class="ttdeci">char * ast_sockaddr_stringify_fmt(const struct ast_sockaddr *addr, int format)</div><div class="ttdoc">Convert a socket address to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00065">netsock2.c:65</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a89f65c64a4a6a3d3505cfe31d549af90"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a89f65c64a4a6a3d3505cfe31d549af90">ast_sip_session_media::remotely_held</a></div><div class="ttdeci">unsigned int remotely_held</div><div class="ttdoc">Stream is on hold by remote side. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00095">res_pjsip_session.h:95</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288afaf3d3b8e7792a1332821dbbebf2d443"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288afaf3d3b8e7792a1332821dbbebf2d443">AST_STREAM_STATE_SENDONLY</a></div><div class="ttdoc">Set when the stream is sending media only. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00086">stream.h:86</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a6ca888a4c8b8828ccb2bf37dcc37230a"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6ca888a4c8b8828ccb2bf37dcc37230a">add_ice_to_stream</a></div><div class="ttdeci">static void add_ice_to_stream(struct ast_sip_session *session, struct ast_sip_session_media *session_media, pj_pool_t *pool, pjmedia_sdp_media *media, unsigned int include_candidates)</div><div class="ttdoc">Function which adds ICE attributes to a media stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00675">res_pjsip_sdp_rtp.c:675</a></div></div>
<div class="ttc" id="stream_8h_html_a4459bba3b00250f5c5b2b4ae265909ee"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a4459bba3b00250f5c5b2b4ae265909ee">ast_stream_set_state</a></div><div class="ttdeci">void ast_stream_set_state(struct ast_stream *stream, enum ast_stream_state state)</div><div class="ttdoc">Set the state of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00380">stream.c:380</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00419">res_pjsip.h:419</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a881aec0b280ab825a2019a19e7886a20"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a881aec0b280ab825a2019a19e7886a20">ast_sip_session_media::bundle_group</a></div><div class="ttdeci">int bundle_group</div><div class="ttdoc">The bundle group the stream belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00113">res_pjsip_session.h:113</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_af202800c8ffac887bac52c84da758f69"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#af202800c8ffac887bac52c84da758f69">ast_sip_media_rtp_configuration::force_avp</a></div><div class="ttdeci">unsigned int force_avp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00703">res_pjsip.h:703</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a80baeff1bd121c3168ede2a955e9b3a2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a80baeff1bd121c3168ede2a955e9b3a2">ast_rtp_instance_get_local_address</a></div><div class="ttdeci">void ast_rtp_instance_get_local_address(struct ast_rtp_instance *instance, struct ast_sockaddr *address)</div><div class="ttdoc">Get the local address that we are expecting RTP on. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00643">rtp_engine.c:643</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_sip_session_media::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Media type of this session media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">res_pjsip_session.h:105</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="netsock2_8h_html_a4d31b81f8c041f32492b7921a057e426"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a4d31b81f8c041f32492b7921a057e426">AST_SOCKADDR_STR_ADDR</a></div><div class="ttdeci">#define AST_SOCKADDR_STR_ADDR</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00202">netsock2.h:202</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_af0f3c0953aba91059ad040ae70e36d37"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#af0f3c0953aba91059ad040ae70e36d37">set_ice_components</a></div><div class="ttdeci">static void set_ice_components(struct ast_sip_session *session, struct ast_sip_session_media *session_media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01181">res_pjsip_sdp_rtp.c:1181</a></div></div>
<div class="ttc" id="format_8h_html_af264a3ab15360f0dacb6cafd731bb5f9"><div class="ttname"><a href="../../d0/d0a/format_8h.html#af264a3ab15360f0dacb6cafd731bb5f9">ast_format_get_maximum_ms</a></div><div class="ttdeci">unsigned int ast_format_get_maximum_ms(const struct ast_format *format)</div><div class="ttdoc">Get the maximum amount of media carried in this format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00369">format.c:369</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2">AST_SIP_DTMF_RFC_4733</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00413">res_pjsip.h:413</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_abe75d44d3d0fe75087836c162fae8b39"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#abe75d44d3d0fe75087836c162fae8b39">add_msid_to_stream</a></div><div class="ttdeci">static void add_msid_to_stream(struct ast_sip_session *session, struct ast_sip_session_media *session_media, pj_pool_t *pool, pjmedia_sdp_media *media, struct ast_stream *stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01272">res_pjsip_sdp_rtp.c:1272</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0d1b6644a258c74b557e5227f07ff4f6"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0d1b6644a258c74b557e5227f07ff4f6">ast_rtp_codecs_payload_set_rx</a></div><div class="ttdeci">int ast_rtp_codecs_payload_set_rx(struct ast_rtp_codecs *codecs, int code, struct ast_format *format)</div><div class="ttdoc">Set a payload code for use with a specific Asterisk format. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01923">rtp_engine.c:1923</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a></div><div class="ttdeci">ast_media_type</div><div class="ttdoc">Types of media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00030">codec.h:30</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_afe8dd140f860d3270f0a530f86521bf2"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#afe8dd140f860d3270f0a530f86521bf2">ast_sip_media_rtp_configuration::ipv6</a></div><div class="ttdeci">unsigned int ipv6</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00693">res_pjsip.h:693</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a6f7b8add12e23680b28e4b88f70a1a83"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a6f7b8add12e23680b28e4b88f70a1a83">ast_sip_session_media::remote_rtcp_mux</a></div><div class="ttdeci">unsigned int remote_rtcp_mux</div><div class="ttdoc">Does remote support rtcp_mux. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00101">res_pjsip_session.h:101</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf">AST_SIP_MEDIA_ENCRYPT_SDES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00510">res_pjsip.h:510</a></div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="stream_8h_html_a35dd19cc6a6f0310d45e181398095463"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a35dd19cc6a6f0310d45e181398095463">ast_stream_get_position</a></div><div class="ttdeci">int ast_stream_get_position(const struct ast_stream *stream)</div><div class="ttdoc">Get the position of the stream in the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00500">stream.c:500</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3cc8001677e3b955b9b5ceb4267a76ec"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a></div><div class="ttdeci">#define AST_RTP_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00266">rtp_engine.h:266</a></div></div>
<div class="ttc" id="format__cap_8h_html_a43950f716385bc78a73de04acd6a7eb4"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a43950f716385bc78a73de04acd6a7eb4">ast_format_cap_get_compatible</a></div><div class="ttdeci">int ast_format_cap_get_compatible(const struct ast_format_cap *cap1, const struct ast_format_cap *cap2, struct ast_format_cap *result)</div><div class="ttdoc">Find the compatible formats between two capabilities structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00630">format_cap.c:630</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288a5c7755c7947aed47c123f459311deb24"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288a5c7755c7947aed47c123f459311deb24">AST_STREAM_STATE_RECVONLY</a></div><div class="ttdoc">Set when the stream is receiving media only. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00090">stream.h:90</a></div></div>
<div class="ttc" id="stream_8h_html_a6fdfb5754dad81680c197d5c9df44971"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a6fdfb5754dad81680c197d5c9df44971">ast_stream_get_state</a></div><div class="ttdeci">enum ast_stream_state ast_stream_get_state(const struct ast_stream *stream)</div><div class="ttdoc">Get the current state of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00373">stream.c:373</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_abbafd55e7e00c2c1dbf1002b991e62bb"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#abbafd55e7e00c2c1dbf1002b991e62bb">add_rtcp_fb_to_stream</a></div><div class="ttdeci">static void add_rtcp_fb_to_stream(struct ast_sip_session *session, struct ast_sip_session_media *session_media, pj_pool_t *pool, pjmedia_sdp_media *media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01319">res_pjsip_sdp_rtp.c:1319</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a6ce69115632656453cdede4527ee7a17"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6ce69115632656453cdede4527ee7a17">add_extmap_to_stream</a></div><div class="ttdeci">static void add_extmap_to_stream(struct ast_sip_session *session, struct ast_sip_session_media *session_media, pj_pool_t *pool, pjmedia_sdp_media *media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01354">res_pjsip_sdp_rtp.c:1354</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aea9df35ad9322360bd011b9c0f525712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea9df35ad9322360bd011b9c0f525712">&#9670;&nbsp;</a></span>create_rtp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int create_rtp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pjmedia_sdp_session *&#160;</td>
          <td class="paramname"><em>sdp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal function which creates an RTP instance. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00228">228</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00758">ast_sip_endpoint_media_configuration::address</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00066">address_rtp</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02860">ast_debug_rtp</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00154">AST_RTP_DTMF_MODE_INBAND</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00152">AST_RTP_DTMF_MODE_RFC2833</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00546">AST_RTP_EXTENSION_ABS_SEND_TIME</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00773">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00548">AST_RTP_EXTENSION_TRANSPORT_WIDE_CC</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02123">ast_rtp_instance_dtmf_mode_set()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02891">ast_rtp_instance_get_ice()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00465">ast_rtp_instance_new()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03773">ast_rtp_instance_set_last_rx()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00705">ast_rtp_instance_set_prop()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02169">ast_rtp_instance_set_qos()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00125">AST_RTP_PROPERTY_ASYMMETRIC_CODEC</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00117">AST_RTP_PROPERTY_DTMF</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00115">AST_RTP_PROPERTY_NAT</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00131">AST_RTP_PROPERTY_REMB</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00127">AST_RTP_PROPERTY_RETRANS_RECV</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00129">AST_RTP_PROPERTY_RETRANS_SEND</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00419">AST_SIP_DTMF_AUTO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00421">AST_SIP_DTMF_AUTO_INFO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00415">AST_SIP_DTMF_INBAND</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00413">AST_SIP_DTMF_RFC_4733</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">ast_sip_get_sorcery()</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l01564">ast_sip_get_transport_state()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l01853">ast_sorcery_retrieve_by_id()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00891">ast_sip_endpoint::asymmetric_rtp_codec</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00784">ast_sip_endpoint_media_configuration::bind_rtp_to_media_address</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00776">ast_sip_endpoint_media_configuration::cos_audio</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00780">ast_sip_endpoint_media_configuration::cos_video</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00233">ast_sip_session::dtmf</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00182">enable_rtp_extension()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00691">ast_sip_media_rtp_configuration::engine</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00106">ast_sip_transport_state::host</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00697">ast_sip_media_rtp_configuration::ice_support</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l01132">media_address</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00493">ast_rtp_engine_ice::stop</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00695">ast_sip_media_rtp_configuration::symmetric</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00774">ast_sip_endpoint_media_configuration::tos_audio</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00778">ast_sip_endpoint_media_configuration::tos_video</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00817">ast_sip_endpoint::transport</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">ast_sip_session_media::type</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00794">ast_sip_endpoint_media_configuration::webrtc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;{</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a> *ice;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> temp_media_address;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="code" href="../../d5/dfe/chan__sip_8c.html#af120bbda0f1728693ba44750da24e48f">media_address</a> =  &amp;<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#abe01dad064469f433db45f3841501e9d">address_rtp</a>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#ae0bd41e4a06fa8ca4bc717db2f7f519f">bind_rtp_to_media_address</a> &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#adfdf62b1e020aa0785512e95b7548093">address</a>)) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;temp_media_address, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#adfdf62b1e020aa0785512e95b7548093">address</a>, 0)) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;Endpoint %s: Binding RTP media to %s\n&quot;</span>,</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>),</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#adfdf62b1e020aa0785512e95b7548093">address</a>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;         media_address = &amp;temp_media_address;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;Endpoint %s: RTP media address invalid: %s\n&quot;</span>,</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>),</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#adfdf62b1e020aa0785512e95b7548093">address</a>);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/d04/structast__sip__transport.html">ast_sip_transport</a> *transport;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      transport = <a class="code" href="../../d8/d25/sorcery_8h.html#a100106a82d72aa59a66513ef3ad161c8">ast_sorcery_retrieve_by_id</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;transport&quot;</span>,</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;         session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a44cdbda076f37ba09880ba74d942b606">transport</a>);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keywordflow">if</span> (transport) {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../db/dac/structast__sip__transport__state.html">ast_sip_transport_state</a> *trans_state;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;         trans_state = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ab6000ab7fe69594070bb59b995ccb5ee">ast_sip_get_transport_state</a>(<a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(transport));</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;         <span class="keywordflow">if</span> (trans_state) {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordtype">char</span> hoststr[PJ_INET6_ADDRSTRLEN];</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            pj_sockaddr_print(&amp;trans_state-&gt;<a class="code" href="../../db/dac/structast__sip__transport__state.html#a9a448a114756cea08fe951555624e47d">host</a>, hoststr, <span class="keyword">sizeof</span>(hoststr), 0);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;temp_media_address, hoststr, 0)) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;               <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;Transport %s bound to %s: Using it for RTP media.\n&quot;</span>,</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                  session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a44cdbda076f37ba09880ba74d942b606">transport</a>, hoststr);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;               media_address = &amp;temp_media_address;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;               <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(1, <span class="stringliteral">&quot;Transport %s bound to %s: Invalid for RTP media.\n&quot;</span>,</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                  session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a44cdbda076f37ba09880ba74d942b606">transport</a>, hoststr);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trans_state, -1);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;         }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(transport, -1);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <span class="keywordflow">if</span> (!(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a012b2ab9fad02a5fbf9e457a69020ade">ast_rtp_instance_new</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a32cfac6091b871540ea2cdc711eb33e7">engine</a>, <a class="code" href="../../d0/da0/structsched.html">sched</a>, media_address, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create RTP instance using RTP engine &#39;%s&#39;\n&quot;</span>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a32cfac6091b871540ea2cdc711eb33e7">engine</a>);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a1c4b86bb964bdcfdc3f5489f11e59424">symmetric</a>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914cab679b8bb7cef31829481294ffeb15a00">AST_RTP_PROPERTY_ASYMMETRIC_CODEC</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#aeffc49850ee77c5042f350c013b6190a">asymmetric_rtp_codec</a>);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#afc0a4cb1a5b0ecd8d4324bd8466788c2">ice_support</a> &amp;&amp; (ice = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>))) {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a3a02b2ea9f0ccfd0d46e4547f3b8fa30">stop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">dtmf</a> == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2">AST_SIP_DTMF_RFC_4733</a> || session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">dtmf</a> == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a> || session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">dtmf</a> == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a>) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3514f29b438a855f44f440c7cb8d2800">ast_rtp_instance_dtmf_mode_set</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea628d544911ab92fd7fc062b3ba184346">AST_RTP_DTMF_MODE_RFC2833</a>);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914cad56f6f1132d2520c2ad2d593bb06dcad">AST_RTP_PROPERTY_DTMF</a>, 1);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">dtmf</a> == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8">AST_SIP_DTMF_INBAND</a>) {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3514f29b438a855f44f440c7cb8d2800">ast_rtp_instance_dtmf_mode_set</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea6fdbcc4d7df24cf9108a3f06bc771e83">AST_RTP_DTMF_MODE_INBAND</a>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   <span class="keywordflow">if</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a> &amp;&amp;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;         (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a1ecad4a80d0e6f5b8ec6ab4c44021d18">tos_audio</a> || session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a3e2114722f6cb731593296a831290a7d">cos_audio</a>)) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#ab71294e675bc01eb29e9fd13b3839759">ast_rtp_instance_set_qos</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a1ecad4a80d0e6f5b8ec6ab4c44021d18">tos_audio</a>,</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a3e2114722f6cb731593296a831290a7d">cos_audio</a>, <span class="stringliteral">&quot;SIP RTP Audio&quot;</span>);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>) {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca7e9e842048d8b79e9e01e02dcf569927">AST_RTP_PROPERTY_RETRANS_RECV</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">webrtc</a>);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca9914ed5449593d9fb9aff0b1a4411ca5">AST_RTP_PROPERTY_RETRANS_SEND</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">webrtc</a>);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914caf7d73e777eb2a69c79032cce56a3ca3b">AST_RTP_PROPERTY_REMB</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">webrtc</a>);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">webrtc</a>) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;         <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae67fc8437e14b75c093c6defd82a9e65">enable_rtp_extension</a>(session, session_media, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5">AST_RTP_EXTENSION_ABS_SEND_TIME</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a>, sdp);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;         <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae67fc8437e14b75c093c6defd82a9e65">enable_rtp_extension</a>(session, session_media, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa163f70dc8ad29138217161bca3ac9b90">AST_RTP_EXTENSION_TRANSPORT_WIDE_CC</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a>, sdp);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0a41428ca9cf82e2f19c3768439e8d85">tos_video</a> || session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a5518532a82b65b23fc59243e4f570e9d">cos_video</a>) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#ab71294e675bc01eb29e9fd13b3839759">ast_rtp_instance_set_qos</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0a41428ca9cf82e2f19c3768439e8d85">tos_video</a>,</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;               session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a5518532a82b65b23fc59243e4f570e9d">cos_video</a>, <span class="stringliteral">&quot;SIP RTP Video&quot;</span>);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a27714e89a2a2d136150789bc6d41e060">ast_rtp_instance_set_last_rx</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div><div class="ttc" id="structast__sip__endpoint__media__configuration_html_aa64681ccac6f69e15c21471249e68121"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">ast_sip_endpoint_media_configuration::webrtc</a></div><div class="ttdeci">unsigned int webrtc</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00794">res_pjsip.h:794</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a5518532a82b65b23fc59243e4f570e9d"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a5518532a82b65b23fc59243e4f570e9d">ast_sip_endpoint_media_configuration::cos_video</a></div><div class="ttdeci">unsigned int cos_video</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00780">res_pjsip.h:780</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_afc0a4cb1a5b0ecd8d4324bd8466788c2"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#afc0a4cb1a5b0ecd8d4324bd8466788c2">ast_sip_media_rtp_configuration::ice_support</a></div><div class="ttdeci">unsigned int ice_support</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00697">res_pjsip.h:697</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3514f29b438a855f44f440c7cb8d2800"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3514f29b438a855f44f440c7cb8d2800">ast_rtp_instance_dtmf_mode_set</a></div><div class="ttdeci">int ast_rtp_instance_dtmf_mode_set(struct ast_rtp_instance *instance, enum ast_rtp_dtmf_mode dtmf_mode)</div><div class="ttdoc">Set the DTMF mode that should be used. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02123">rtp_engine.c:2123</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca7e9e842048d8b79e9e01e02dcf569927"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca7e9e842048d8b79e9e01e02dcf569927">AST_RTP_PROPERTY_RETRANS_RECV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00127">rtp_engine.h:127</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914cad56f6f1132d2520c2ad2d593bb06dcad"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914cad56f6f1132d2520c2ad2d593bb06dcad">AST_RTP_PROPERTY_DTMF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00117">rtp_engine.h:117</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a44cdbda076f37ba09880ba74d942b606"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a44cdbda076f37ba09880ba74d942b606">ast_sip_endpoint::transport</a></div><div class="ttdeci">const ast_string_field transport</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00817">res_pjsip.h:817</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a1ecad4a80d0e6f5b8ec6ab4c44021d18"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a1ecad4a80d0e6f5b8ec6ab4c44021d18">ast_sip_endpoint_media_configuration::tos_audio</a></div><div class="ttdeci">unsigned int tos_audio</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00774">res_pjsip.h:774</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ab71294e675bc01eb29e9fd13b3839759"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ab71294e675bc01eb29e9fd13b3839759">ast_rtp_instance_set_qos</a></div><div class="ttdeci">int ast_rtp_instance_set_qos(struct ast_rtp_instance *instance, int tos, int cos, const char *desc)</div><div class="ttdoc">Set QoS parameters on an RTP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02169">rtp_engine.c:2169</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_aeffc49850ee77c5042f350c013b6190a"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#aeffc49850ee77c5042f350c013b6190a">ast_sip_endpoint::asymmetric_rtp_codec</a></div><div class="ttdeci">unsigned int asymmetric_rtp_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00891">res_pjsip.h:891</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a26e4699e53a894379aef105cdc12498e"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a></div><div class="ttdeci">struct ast_rtp_engine_ice * ast_rtp_instance_get_ice(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the ICE support present on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02891">rtp_engine.c:2891</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_adfdf62b1e020aa0785512e95b7548093"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#adfdf62b1e020aa0785512e95b7548093">ast_sip_endpoint_media_configuration::address</a></div><div class="ttdeci">const ast_string_field address</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00758">res_pjsip.h:758</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00421">res_pjsip.h:421</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a3a02b2ea9f0ccfd0d46e4547f3b8fa30"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a3a02b2ea9f0ccfd0d46e4547f3b8fa30">ast_rtp_engine_ice::stop</a></div><div class="ttdeci">void(* stop)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00493">rtp_engine.h:493</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_abe01dad064469f433db45f3841501e9d"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#abe01dad064469f433db45f3841501e9d">address_rtp</a></div><div class="ttdeci">static struct ast_sockaddr address_rtp</div><div class="ttdoc">Address for RTP. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00066">res_pjsip_sdp_rtp.c:66</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ae67fc8437e14b75c093c6defd82a9e65"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae67fc8437e14b75c093c6defd82a9e65">enable_rtp_extension</a></div><div class="ttdeci">static void enable_rtp_extension(struct ast_sip_session *session, struct ast_sip_session_media *session_media, enum ast_rtp_extension extension, enum ast_rtp_extension_direction direction, const pjmedia_sdp_session *sdp)</div><div class="ttdoc">Enable an RTP extension on an RTP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00182">res_pjsip_sdp_rtp.c:182</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="sorcery_8h_html_a100106a82d72aa59a66513ef3ad161c8"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a100106a82d72aa59a66513ef3ad161c8">ast_sorcery_retrieve_by_id</a></div><div class="ttdeci">void * ast_sorcery_retrieve_by_id(const struct ast_sorcery *sorcery, const char *type, const char *id)</div><div class="ttdoc">Retrieve an object using its unique identifier. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l01853">sorcery.c:1853</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8">AST_SIP_DTMF_INBAND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00415">res_pjsip.h:415</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3054d1eb4ca6e3e9bfd97bc54ff6e6eea6fdbcc4d7df24cf9108a3f06bc771e83"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea6fdbcc4d7df24cf9108a3f06bc771e83">AST_RTP_DTMF_MODE_INBAND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00154">rtp_engine.h:154</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_a1c4b86bb964bdcfdc3f5489f11e59424"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#a1c4b86bb964bdcfdc3f5489f11e59424">ast_sip_media_rtp_configuration::symmetric</a></div><div class="ttdeci">unsigned int symmetric</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00695">res_pjsip.h:695</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa2244dfdd646dfd5287d1029c44d1f3f5">AST_RTP_EXTENSION_ABS_SEND_TIME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00546">rtp_engine.h:546</a></div></div>
<div class="ttc" id="chan__sip_8c_html_af120bbda0f1728693ba44750da24e48f"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#af120bbda0f1728693ba44750da24e48f">media_address</a></div><div class="ttdeci">static struct ast_sockaddr media_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l01132">chan_sip.c:1132</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__sip__transport__state_html"><div class="ttname"><a href="../../db/dac/structast__sip__transport__state.html">ast_sip_transport_state</a></div><div class="ttdoc">Structure for SIP transport information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00087">res_pjsip.h:87</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00115">rtp_engine.h:115</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga669fb90e123085584d65608ef87b2fe4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a></div><div class="ttdeci">#define ast_debug_rtp(sublevel,...)</div><div class="ttdoc">Log debug level RTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02860">rtp_engine.h:2860</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a88677a524d7f3d7201f5d2f773cfc8ffa163f70dc8ad29138217161bca3ac9b90"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ffa163f70dc8ad29138217161bca3ac9b90">AST_RTP_EXTENSION_TRANSPORT_WIDE_CC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00548">rtp_engine.h:548</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_a32cfac6091b871540ea2cdc711eb33e7"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#a32cfac6091b871540ea2cdc711eb33e7">ast_sip_media_rtp_configuration::engine</a></div><div class="ttdeci">const ast_string_field engine</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00691">res_pjsip.h:691</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914caf7d73e777eb2a69c79032cce56a3ca3b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914caf7d73e777eb2a69c79032cce56a3ca3b">AST_RTP_PROPERTY_REMB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00131">rtp_engine.h:131</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__sip__transport_html"><div class="ttname"><a href="../../d1/d04/structast__sip__transport.html">ast_sip_transport</a></div><div class="ttdoc">Transport to bind to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00171">res_pjsip.h:171</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3054d1eb4ca6e3e9bfd97bc54ff6e6eea628d544911ab92fd7fc062b3ba184346"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea628d544911ab92fd7fc062b3ba184346">AST_RTP_DTMF_MODE_RFC2833</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00152">rtp_engine.h:152</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structast__sip__session_html_abb7c899dc9afe319240163be2b213813"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">ast_sip_session::dtmf</a></div><div class="ttdeci">enum ast_sip_dtmf_mode dtmf</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00233">res_pjsip_session.h:233</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ab6000ab7fe69594070bb59b995ccb5ee"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ab6000ab7fe69594070bb59b995ccb5ee">ast_sip_get_transport_state</a></div><div class="ttdeci">struct ast_sip_transport_state * ast_sip_get_transport_state(const char *transport_id)</div><div class="ttdoc">Retrieve transport state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d17/config__transport_8c_source.html#l01564">config_transport.c:1564</a></div></div>
<div class="ttc" id="structast__sip__transport__state_html_a9a448a114756cea08fe951555624e47d"><div class="ttname"><a href="../../db/dac/structast__sip__transport__state.html#a9a448a114756cea08fe951555624e47d">ast_sip_transport_state::host</a></div><div class="ttdeci">pj_sockaddr host</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00106">res_pjsip.h:106</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00419">res_pjsip.h:419</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca9914ed5449593d9fb9aff0b1a4411ca5"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca9914ed5449593d9fb9aff0b1a4411ca5">AST_RTP_PROPERTY_RETRANS_SEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00129">rtp_engine.h:129</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a3e2114722f6cb731593296a831290a7d"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a3e2114722f6cb731593296a831290a7d">ast_sip_endpoint_media_configuration::cos_audio</a></div><div class="ttdeci">unsigned int cos_audio</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00776">res_pjsip.h:776</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914cab679b8bb7cef31829481294ffeb15a00"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914cab679b8bb7cef31829481294ffeb15a00">AST_RTP_PROPERTY_ASYMMETRIC_CODEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00125">rtp_engine.h:125</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00773">rtp_engine.h:773</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_sip_session_media::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Media type of this session media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">res_pjsip_session.h:105</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a5572d52daf1a841b0f9308df901448c8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a></div><div class="ttdeci">struct ast_sorcery * ast_sip_get_sorcery(void)</div><div class="ttdoc">Get a pointer to the SIP sorcery structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">pjsip_configuration.c:2404</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2">AST_SIP_DTMF_RFC_4733</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00413">res_pjsip.h:413</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a></div><div class="ttdoc">Structure that represents the optional ICE support within an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00485">rtp_engine.h:485</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a77f59605d15d7dfc53e0df12352b8235"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a></div><div class="ttdeci">void ast_rtp_instance_set_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property, int value)</div><div class="ttdoc">Set the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00705">rtp_engine.c:705</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_ae0bd41e4a06fa8ca4bc717db2f7f519f"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#ae0bd41e4a06fa8ca4bc717db2f7f519f">ast_sip_endpoint_media_configuration::bind_rtp_to_media_address</a></div><div class="ttdeci">unsigned int bind_rtp_to_media_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00784">res_pjsip.h:784</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a012b2ab9fad02a5fbf9e457a69020ade"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a012b2ab9fad02a5fbf9e457a69020ade">ast_rtp_instance_new</a></div><div class="ttdeci">struct ast_rtp_instance * ast_rtp_instance_new(const char *engine_name, struct ast_sched_context *sched, const struct ast_sockaddr *sa, void *data)</div><div class="ttdoc">Create a new RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00465">rtp_engine.c:465</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0a41428ca9cf82e2f19c3768439e8d85"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0a41428ca9cf82e2f19c3768439e8d85">ast_sip_endpoint_media_configuration::tos_video</a></div><div class="ttdeci">unsigned int tos_video</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00778">res_pjsip.h:778</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a27714e89a2a2d136150789bc6d41e060"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a27714e89a2a2d136150789bc6d41e060">ast_rtp_instance_set_last_rx</a></div><div class="ttdeci">void ast_rtp_instance_set_last_rx(struct ast_rtp_instance *rtp, time_t time)</div><div class="ttdoc">Set the last RTP reception time. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03773">rtp_engine.c:3773</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae92b132c7aaa847416dffe0b3f888e49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae92b132c7aaa847416dffe0b3f888e49">&#9670;&nbsp;</a></span>enable_rtcp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void enable_rtcp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>remote_media</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enable RTCP on an RTP session. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00165">165</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00261">AST_RTP_INSTANCE_RTCP_MUX</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00259">AST_RTP_INSTANCE_RTCP_STANDARD</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00705">ast_rtp_instance_set_prop()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00123">AST_RTP_PROPERTY_RTCP</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00101">ast_sip_session_media::remote_rtcp_mux</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00786">ast_sip_endpoint_media_configuration::rtcp_mux</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457">ast_rtp_instance_rtcp</a> rtcp_type;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a86ef296f0f63688c8273119a2611f876">rtcp_mux</a> &amp;&amp; session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a6f7b8add12e23680b28e4b88f70a1a83">remote_rtcp_mux</a>) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      rtcp_type = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457a23ac343d133642c75682a53db92a7dbb">AST_RTP_INSTANCE_RTCP_MUX</a>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      rtcp_type = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38">AST_RTP_INSTANCE_RTCP_STANDARD</a>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca9f63c95936712cfd6ec65555f1a27053">AST_RTP_PROPERTY_RTCP</a>, rtcp_type);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457ac1b821d0e872a13a9c2519dfc825bd38">AST_RTP_INSTANCE_RTCP_STANDARD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00259">rtp_engine.h:259</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a86ef296f0f63688c8273119a2611f876"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a86ef296f0f63688c8273119a2611f876">ast_sip_endpoint_media_configuration::rtcp_mux</a></div><div class="ttdeci">unsigned int rtcp_mux</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00786">res_pjsip.h:786</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca9f63c95936712cfd6ec65555f1a27053"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca9f63c95936712cfd6ec65555f1a27053">AST_RTP_PROPERTY_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00123">rtp_engine.h:123</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a41d9cffc63ede37b7012d68124f4a457"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457">ast_rtp_instance_rtcp</a></div><div class="ttdeci">ast_rtp_instance_rtcp</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00255">rtp_engine.h:255</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a41d9cffc63ede37b7012d68124f4a457a23ac343d133642c75682a53db92a7dbb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a41d9cffc63ede37b7012d68124f4a457a23ac343d133642c75682a53db92a7dbb">AST_RTP_INSTANCE_RTCP_MUX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00261">rtp_engine.h:261</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a77f59605d15d7dfc53e0df12352b8235"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a></div><div class="ttdeci">void ast_rtp_instance_set_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property, int value)</div><div class="ttdoc">Set the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00705">rtp_engine.c:705</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a6f7b8add12e23680b28e4b88f70a1a83"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a6f7b8add12e23680b28e4b88f70a1a83">ast_sip_session_media::remote_rtcp_mux</a></div><div class="ttdeci">unsigned int remote_rtcp_mux</div><div class="ttdoc">Does remote support rtcp_mux. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00101">res_pjsip_session.h:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae67fc8437e14b75c093c6defd82a9e65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae67fc8437e14b75c093c6defd82a9e65">&#9670;&nbsp;</a></span>enable_rtp_extension()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void enable_rtp_extension </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a88677a524d7f3d7201f5d2f773cfc8ff">ast_rtp_extension</a>&#160;</td>
          <td class="paramname"><em>extension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a>&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pjmedia_sdp_session *&#160;</td>
          <td class="paramname"><em>sdp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enable an RTP extension on an RTP session. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00182">182</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00899">ast_rtp_instance_extmap_count()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00732">ast_rtp_instance_extmap_enable()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00886">ast_rtp_instance_extmap_get_id()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00113">ast_sip_session_media::bundle_group</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">ast_sip_session::pending_media_state</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00228">create_rtp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;{</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <span class="keywordtype">int</span> <span class="keywordtype">id</span> = -1;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="comment">/* For a bundle group the local unique identifier space is shared across all streams within</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">    * it.</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="keywordflow">if</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a881aec0b280ab825a2019a19e7886a20">bundle_group</a> != -1) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="keywordtype">int</span> index;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">for</span> (index = 0; index &lt; sdp-&gt;media_count; ++index) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *other_session_media;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;         <span class="keywordtype">int</span> other_id;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;         <span class="keywordflow">if</span> (index &gt;= <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">pending_media_state</a>-&gt;sessions)) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;         }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;         other_session_media = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">pending_media_state</a>-&gt;sessions, index);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;         <span class="keywordflow">if</span> (!other_session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> || other_session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a881aec0b280ab825a2019a19e7886a20">bundle_group</a> != session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a881aec0b280ab825a2019a19e7886a20">bundle_group</a>) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;         }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;         other_id = <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad0e27894cc1156205f52b3692096c14d">ast_rtp_instance_extmap_get_id</a>(other_session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d0/d5a/structextension.html">extension</a>);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;         <span class="keywordflow">if</span> (other_id == -1) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="comment">/* Worst case we have to fall back to the highest available free local unique identifier</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">             * for the bundle group.</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            other_id = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4d873b83b2c0e1d305d4620c9f0d13b4">ast_rtp_instance_extmap_count</a>(other_session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) + 1;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &lt; other_id) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;               <span class="keywordtype">id</span> = other_id;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;         }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;         <span class="keywordtype">id</span> = other_id;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f5e657ab906e7d719343f42346c731a">ast_rtp_instance_extmap_enable</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <span class="keywordtype">id</span>, <a class="code" href="../../d0/d5a/structextension.html">extension</a>, <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_ad0e27894cc1156205f52b3692096c14d"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad0e27894cc1156205f52b3692096c14d">ast_rtp_instance_extmap_get_id</a></div><div class="ttdeci">int ast_rtp_instance_extmap_get_id(struct ast_rtp_instance *instance, enum ast_rtp_extension extension)</div><div class="ttdoc">Retrieve the id for an RTP extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00886">rtp_engine.c:886</a></div></div>
<div class="ttc" id="structast__sip__session_html_aac4ee0b861f67a3db82eb3600c0f1624"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">ast_sip_session::pending_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * pending_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">res_pjsip_session.h:211</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4d873b83b2c0e1d305d4620c9f0d13b4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4d873b83b2c0e1d305d4620c9f0d13b4">ast_rtp_instance_extmap_count</a></div><div class="ttdeci">size_t ast_rtp_instance_extmap_count(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the number of known unique identifiers. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00899">rtp_engine.c:899</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4f5e657ab906e7d719343f42346c731a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4f5e657ab906e7d719343f42346c731a">ast_rtp_instance_extmap_enable</a></div><div class="ttdeci">int ast_rtp_instance_extmap_enable(struct ast_rtp_instance *instance, int id, enum ast_rtp_extension extension, enum ast_rtp_extension_direction direction)</div><div class="ttdoc">Enable support for an RTP extension on an instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00732">rtp_engine.c:732</a></div></div>
<div class="ttc" id="structextension_html"><div class="ttname"><a href="../../d0/d5a/structextension.html">extension</a></div><div class="ttdoc">structure to hold extensions </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00287">res_phoneprov.c:287</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a881aec0b280ab825a2019a19e7886a20"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a881aec0b280ab825a2019a19e7886a20">ast_sip_session_media::bundle_group</a></div><div class="ttdeci">int bundle_group</div><div class="ttdoc">The bundle group the stream belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00113">res_pjsip_session.h:113</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="func__frame__drop_8c_html_a99f26e6ee9fcd62f75203b5402df8098"><div class="ttname"><a href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8b/func__frame__drop_8c_source.html#l00137">func_frame_drop.c:137</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7d91d967266c86a79b0bf46f950fce2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d91d967266c86a79b0bf46f950fce2e">&#9670;&nbsp;</a></span>generate_fmtp_attr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pjmedia_sdp_attr* generate_fmtp_attr </td>
          <td>(</td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rtp_code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00649">649</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/da6/format_8c_source.html#l00305">ast_format_generate_sdp_fmtp()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00688">ast_str_strlen()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;{</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *fmtp0 = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(256);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   pj_str_t fmtp1;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   pjmedia_sdp_attr *attr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <a class="code" href="../../d0/d0a/format_8h.html#a9f1c2a33351f2edaa31b8e689fe026a8">ast_format_generate_sdp_fmtp</a>(format, rtp_code, &amp;fmtp0);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(fmtp0)) {</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      tmp = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(fmtp0) + <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(fmtp0) - 1;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="comment">/* remove any carriage return line feeds */</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordflow">while</span> (*tmp == <span class="charliteral">&#39;\r&#39;</span> || *tmp == <span class="charliteral">&#39;\n&#39;</span>) --<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      *++tmp = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="comment">/* ast...generate gives us everything, just need value */</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      tmp = strchr(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(fmtp0), <span class="charliteral">&#39;:&#39;</span>);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">if</span> (tmp &amp;&amp; tmp[1] != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;         fmtp1 = pj_str(tmp + 1);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;         fmtp1 = pj_str(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(fmtp0));</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      attr = pjmedia_sdp_attr_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <span class="stringliteral">&quot;fmtp&quot;</span>, &amp;fmtp1);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   }</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   <span class="keywordflow">return</span> attr;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;}</div><div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
<div class="ttc" id="format_8h_html_a9f1c2a33351f2edaa31b8e689fe026a8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a9f1c2a33351f2edaa31b8e689fe026a8">ast_format_generate_sdp_fmtp</a></div><div class="ttdeci">void ast_format_generate_sdp_fmtp(const struct ast_format *format, unsigned int payload, struct ast_str **str)</div><div class="ttdoc">This function is used to produce an fmtp SDP line for an Asterisk format. The attributes present on t...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00305">format.c:305</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ccb0d043dc33e311032926effcdb72e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ccb0d043dc33e311032926effcdb72e">&#9670;&nbsp;</a></span>generate_rtpmap_attr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pjmedia_sdp_attr* generate_rtpmap_attr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rtp_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>asterisk_format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00614">614</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01992">ast_rtp_lookup_mime_subtype2()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02022">ast_rtp_lookup_sample_rate2()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00144">AST_RTP_OPT_G726_NONSTANDARD</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00089">AST_RTP_PT_LAST_STATIC</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00782">ast_sip_endpoint_media_configuration::g726_non_standard</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;{</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="preprocessor">#ifndef HAVE_PJSIP_ENDPOINT_COMPACT_FORM</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   <span class="keyword">extern</span> pj_bool_t pjsip_use_compact_form;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   pj_bool_t pjsip_use_compact_form = pjsip_cfg()-&gt;endpt.use_compact_form;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   pjmedia_sdp_rtpmap rtpmap;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   pjmedia_sdp_attr *attr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[64];</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6">ast_rtp_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a6503af493a1704cadb01010c0904c6a9">g726_non_standard</a> ?</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6ad570d49420fe15c4660793d1fc2f0fc8">AST_RTP_OPT_G726_NONSTANDARD</a> : 0;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%d&quot;</span>, rtp_code);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   pj_strdup2(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;media-&gt;desc.fmt[media-&gt;desc.fmt_count++], tmp);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <span class="keywordflow">if</span> (rtp_code &lt;= <a class="code" href="../../d5/dde/rtp__engine_8h.html#aaa3062109825b3dff6b02505d4e44a38">AST_RTP_PT_LAST_STATIC</a> &amp;&amp; pjsip_use_compact_form) {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   rtpmap.pt = media-&gt;desc.fmt[media-&gt;desc.fmt_count - 1];</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   rtpmap.clock_rate = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a039329c34af438a54c6c4f3ee8abe0f5">ast_rtp_lookup_sample_rate2</a>(asterisk_format, format, code);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   pj_strdup2(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;rtpmap.enc_name, <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a>(asterisk_format, format, code, options));</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="keywordflow">if</span> (!pj_stricmp2(&amp;rtpmap.enc_name, <span class="stringliteral">&quot;opus&quot;</span>)) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      pj_cstr(&amp;rtpmap.param, <span class="stringliteral">&quot;2&quot;</span>);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      pj_cstr(&amp;rtpmap.param, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   pjmedia_sdp_rtpmap_to_attr(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;rtpmap, &amp;attr);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <span class="keywordflow">return</span> attr;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a95ccef8388e3b0e9c9639e393d4081b6"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6">ast_rtp_options</a></div><div class="ttdeci">ast_rtp_options</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00142">rtp_engine.h:142</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aaa3062109825b3dff6b02505d4e44a38"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aaa3062109825b3dff6b02505d4e44a38">AST_RTP_PT_LAST_STATIC</a></div><div class="ttdeci">#define AST_RTP_PT_LAST_STATIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00089">rtp_engine.h:89</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ad47d1bd43ea874c9dc5564d85588a99a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a></div><div class="ttdeci">const char * ast_rtp_lookup_mime_subtype2(const int asterisk_format, const struct ast_format *format, int code, enum ast_rtp_options options)</div><div class="ttdoc">Retrieve mime subtype information on a payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01992">rtp_engine.c:1992</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a039329c34af438a54c6c4f3ee8abe0f5"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a039329c34af438a54c6c4f3ee8abe0f5">ast_rtp_lookup_sample_rate2</a></div><div class="ttdeci">unsigned int ast_rtp_lookup_sample_rate2(int asterisk_format, const struct ast_format *format, int code)</div><div class="ttdoc">Get the sample rate associated with known RTP payload types. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02022">rtp_engine.c:2022</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a95ccef8388e3b0e9c9639e393d4081b6ad570d49420fe15c4660793d1fc2f0fc8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6ad570d49420fe15c4660793d1fc2f0fc8">AST_RTP_OPT_G726_NONSTANDARD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00144">rtp_engine.h:144</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a6503af493a1704cadb01010c0904c6a9"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a6503af493a1704cadb01010c0904c6a9">ast_sip_endpoint_media_configuration::g726_non_standard</a></div><div class="ttdeci">unsigned int g726_non_standard</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00782">res_pjsip.h:782</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab2861164766b0414d2c61482a93ba182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2861164766b0414d2c61482a93ba182">&#9670;&nbsp;</a></span>get_codecs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void get_codecs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *&#160;</td>
          <td class="paramname"><em>codecs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00315">315</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00286">ast_format_parse_sdp_fmtp()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01537">ast_rtp_codecs_get_payload_format()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01503">ast_rtp_codecs_payload_replace_format()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00958">ast_rtp_codecs_payloads_initialize()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01301">ast_rtp_codecs_payloads_set_m_type()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01343">ast_rtp_codecs_payloads_set_rtpmap_type_rate()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01558">ast_rtp_codecs_set_framing()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00154">AST_RTP_DTMF_MODE_INBAND</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00150">AST_RTP_DTMF_MODE_NONE</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00152">AST_RTP_DTMF_MODE_RFC2833</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02123">ast_rtp_instance_dtmf_mode_set()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00705">ast_rtp_instance_set_prop()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00144">AST_RTP_OPT_G726_NONSTANDARD</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00117">AST_RTP_PROPERTY_DTMF</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00419">AST_SIP_DTMF_AUTO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00421">AST_SIP_DTMF_AUTO_INFO</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00233">ast_sip_session::dtmf</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00782">ast_sip_endpoint_media_configuration::g726_non_standard</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00854">SCOPE_EXIT_RTN</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00699">ast_sip_media_rtp_configuration::use_ptime</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00485">set_caps()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00438">set_incoming_call_offer_cap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   pjmedia_sdp_attr *attr;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   pjmedia_sdp_rtpmap *rtpmap;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   pjmedia_sdp_fmtp fmtp;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keywordtype">int</span> i, num = 0, tel_event = 0;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>[256];</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="keywordtype">char</span> media[20];</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keywordtype">char</span> fmt_param[256];</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6">ast_rtp_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a6503af493a1704cadb01010c0904c6a9">g726_non_standard</a> ?</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6ad570d49420fe15c4660793d1fc2f0fc8">AST_RTP_OPT_G726_NONSTANDARD</a> : 0;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9fa9778383fb8fefa620b9db4da22268">ast_rtp_codecs_payloads_initialize</a>(codecs);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <span class="comment">/* Iterate through provided formats */</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; stream-&gt;desc.fmt_count; ++i) {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="comment">/* The payload is kept as a string for things like t38 but for video it is always numerical */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a729a53f6bd23a458daf9e8f13e69e6a0">ast_rtp_codecs_payloads_set_m_type</a>(codecs, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, pj_strtoul(&amp;stream-&gt;desc.fmt[i]));</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="comment">/* Look for the optional rtpmap attribute */</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keywordflow">if</span> (!(attr = pjmedia_sdp_media_find_attr2(stream, <span class="stringliteral">&quot;rtpmap&quot;</span>, &amp;stream-&gt;desc.fmt[i]))) {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="comment">/* Interpret the attribute as an rtpmap */</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordflow">if</span> ((pjmedia_sdp_attr_to_rtpmap(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;pool_prov, attr, &amp;rtpmap)) != PJ_SUCCESS) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(name, &amp;rtpmap-&gt;enc_name, <span class="keyword">sizeof</span>(name));</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;telephone-event&quot;</span>) == 0) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;         tel_event++;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(media, (pj_str_t*)&amp;stream-&gt;desc.media, <span class="keyword">sizeof</span>(media));</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#acec3992982f194e41ab6a2e4c218af83">ast_rtp_codecs_payloads_set_rtpmap_type_rate</a>(codecs, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;         pj_strtoul(&amp;stream-&gt;desc.fmt[i]), media, name, options, rtpmap-&gt;clock_rate);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="comment">/* Look for an optional associated fmtp attribute */</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">if</span> (!(attr = pjmedia_sdp_media_find_attr2(stream, <span class="stringliteral">&quot;fmtp&quot;</span>, &amp;rtpmap-&gt;pt))) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">if</span> ((pjmedia_sdp_attr_get_fmtp(attr, &amp;fmtp)) == PJ_SUCCESS) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;         <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(fmt_param, &amp;fmtp.fmt, <span class="keyword">sizeof</span>(fmt_param));</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;         <span class="keywordflow">if</span> (sscanf(fmt_param, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;num) != 1) {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;         }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;         <span class="keywordflow">if</span> ((format = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6d9606ad3b3ed04e6e98df5fcb4409f1">ast_rtp_codecs_get_payload_format</a>(codecs, num))) {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *format_parsed;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(fmt_param, &amp;fmtp.fmt_param, <span class="keyword">sizeof</span>(fmt_param));</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            format_parsed = <a class="code" href="../../d0/d0a/format_8h.html#a2b07dbbe75e39d505a64e019352f067c">ast_format_parse_sdp_fmtp</a>(format, fmt_param);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordflow">if</span> (format_parsed) {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;               <a class="code" href="../../d5/dde/rtp__engine_8h.html#ac16c0d5f1f3b455a2232f62ce4e2f5f5">ast_rtp_codecs_payload_replace_format</a>(codecs, num, format_parsed);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format_parsed, -1);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;         }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   <span class="keywordflow">if</span> (!tel_event &amp;&amp; (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">dtmf</a> == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a>)) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3514f29b438a855f44f440c7cb8d2800">ast_rtp_instance_dtmf_mode_set</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea6fdbcc4d7df24cf9108a3f06bc771e83">AST_RTP_DTMF_MODE_INBAND</a>);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914cad56f6f1132d2520c2ad2d593bb06dcad">AST_RTP_PROPERTY_DTMF</a>, 0);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">dtmf</a> == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a>) {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">if</span>  (tel_event) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3514f29b438a855f44f440c7cb8d2800">ast_rtp_instance_dtmf_mode_set</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea628d544911ab92fd7fc062b3ba184346">AST_RTP_DTMF_MODE_RFC2833</a>);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914cad56f6f1132d2520c2ad2d593bb06dcad">AST_RTP_PROPERTY_DTMF</a>, 1);</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3514f29b438a855f44f440c7cb8d2800">ast_rtp_instance_dtmf_mode_set</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eeac94ec266b1a57ac6e4001a3e79e02f14">AST_RTP_DTMF_MODE_NONE</a>);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914cad56f6f1132d2520c2ad2d593bb06dcad">AST_RTP_PROPERTY_DTMF</a>, 0);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <span class="comment">/* Get the packetization, if it exists */</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <span class="keywordflow">if</span> ((attr = pjmedia_sdp_media_find_attr2(stream, <span class="stringliteral">&quot;ptime&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> framing = pj_strtoul(pj_strltrim(&amp;attr-&gt;value));</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">if</span> (framing &amp;&amp; session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#afd9d6554995458e27fae3b810b7fdc5c">use_ptime</a>) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6f85ba232050ff932d804b62e6e848cd">ast_rtp_codecs_set_framing</a>(codecs, framing);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a>();</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a95ccef8388e3b0e9c9639e393d4081b6"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6">ast_rtp_options</a></div><div class="ttdeci">ast_rtp_options</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00142">rtp_engine.h:142</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ac16c0d5f1f3b455a2232f62ce4e2f5f5"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ac16c0d5f1f3b455a2232f62ce4e2f5f5">ast_rtp_codecs_payload_replace_format</a></div><div class="ttdeci">int ast_rtp_codecs_payload_replace_format(struct ast_rtp_codecs *codecs, int payload, struct ast_format *format)</div><div class="ttdoc">Update the format associated with a tx payload type in a codecs structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01503">rtp_engine.c:1503</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3514f29b438a855f44f440c7cb8d2800"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3514f29b438a855f44f440c7cb8d2800">ast_rtp_instance_dtmf_mode_set</a></div><div class="ttdeci">int ast_rtp_instance_dtmf_mode_set(struct ast_rtp_instance *instance, enum ast_rtp_dtmf_mode dtmf_mode)</div><div class="ttdoc">Set the DTMF mode that should be used. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02123">rtp_engine.c:2123</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914cad56f6f1132d2520c2ad2d593bb06dcad"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914cad56f6f1132d2520c2ad2d593bb06dcad">AST_RTP_PROPERTY_DTMF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00117">rtp_engine.h:117</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_afd9d6554995458e27fae3b810b7fdc5c"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#afd9d6554995458e27fae3b810b7fdc5c">ast_sip_media_rtp_configuration::use_ptime</a></div><div class="ttdeci">unsigned int use_ptime</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00699">res_pjsip.h:699</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00421">res_pjsip.h:421</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a6f85ba232050ff932d804b62e6e848cd"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a6f85ba232050ff932d804b62e6e848cd">ast_rtp_codecs_set_framing</a></div><div class="ttdeci">void ast_rtp_codecs_set_framing(struct ast_rtp_codecs *codecs, unsigned int framing)</div><div class="ttdoc">Set the framing used for a set of codecs. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01558">rtp_engine.c:1558</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3054d1eb4ca6e3e9bfd97bc54ff6e6eea6fdbcc4d7df24cf9108a3f06bc771e83"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea6fdbcc4d7df24cf9108a3f06bc771e83">AST_RTP_DTMF_MODE_INBAND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00154">rtp_engine.h:154</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a6d9606ad3b3ed04e6e98df5fcb4409f1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a6d9606ad3b3ed04e6e98df5fcb4409f1">ast_rtp_codecs_get_payload_format</a></div><div class="ttdeci">struct ast_format * ast_rtp_codecs_get_payload_format(struct ast_rtp_codecs *codecs, int payload)</div><div class="ttdoc">Retrieve the actual ast_format stored on the codecs structure for a specific tx payload type...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01537">rtp_engine.c:1537</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3054d1eb4ca6e3e9bfd97bc54ff6e6eea628d544911ab92fd7fc062b3ba184346"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea628d544911ab92fd7fc062b3ba184346">AST_RTP_DTMF_MODE_RFC2833</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00152">rtp_engine.h:152</a></div></div>
<div class="ttc" id="structast__sip__session_html_abb7c899dc9afe319240163be2b213813"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">ast_sip_session::dtmf</a></div><div class="ttdeci">enum ast_sip_dtmf_mode dtmf</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00233">res_pjsip_session.h:233</a></div></div>
<div class="ttc" id="logger_8h_html_a519e9e626663d0bf89c04738e0353a9d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN(...)</div><div class="ttdoc">Scope Exit with return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00854">logger.h:854</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00419">res_pjsip.h:419</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a95ccef8388e3b0e9c9639e393d4081b6ad570d49420fe15c4660793d1fc2f0fc8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a95ccef8388e3b0e9c9639e393d4081b6ad570d49420fe15c4660793d1fc2f0fc8">AST_RTP_OPT_G726_NONSTANDARD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00144">rtp_engine.h:144</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3054d1eb4ca6e3e9bfd97bc54ff6e6eeac94ec266b1a57ac6e4001a3e79e02f14"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eeac94ec266b1a57ac6e4001a3e79e02f14">AST_RTP_DTMF_MODE_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00150">rtp_engine.h:150</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9fa9778383fb8fefa620b9db4da22268"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9fa9778383fb8fefa620b9db4da22268">ast_rtp_codecs_payloads_initialize</a></div><div class="ttdeci">int ast_rtp_codecs_payloads_initialize(struct ast_rtp_codecs *codecs)</div><div class="ttdoc">Initialize an RTP codecs structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00958">rtp_engine.c:958</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_acec3992982f194e41ab6a2e4c218af83"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#acec3992982f194e41ab6a2e4c218af83">ast_rtp_codecs_payloads_set_rtpmap_type_rate</a></div><div class="ttdeci">int ast_rtp_codecs_payloads_set_rtpmap_type_rate(struct ast_rtp_codecs *codecs, struct ast_rtp_instance *instance, int pt, char *mimetype, char *mimesubtype, enum ast_rtp_options options, unsigned int sample_rate)</div><div class="ttdoc">Set tx payload type to a known MIME media type for a codec with a specific sample rate...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01343">rtp_engine.c:1343</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a6503af493a1704cadb01010c0904c6a9"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a6503af493a1704cadb01010c0904c6a9">ast_sip_endpoint_media_configuration::g726_non_standard</a></div><div class="ttdeci">unsigned int g726_non_standard</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00782">res_pjsip.h:782</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a77f59605d15d7dfc53e0df12352b8235"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a></div><div class="ttdeci">void ast_rtp_instance_set_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property, int value)</div><div class="ttdoc">Set the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00705">rtp_engine.c:705</a></div></div>
<div class="ttc" id="format_8h_html_a2b07dbbe75e39d505a64e019352f067c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a2b07dbbe75e39d505a64e019352f067c">ast_format_parse_sdp_fmtp</a></div><div class="ttdeci">struct ast_format * ast_format_parse_sdp_fmtp(const struct ast_format *format, const char *attributes)</div><div class="ttdoc">This function is used to have a media format aware module parse and interpret SDP attribute informati...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00286">format.c:286</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a729a53f6bd23a458daf9e8f13e69e6a0"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a729a53f6bd23a458daf9e8f13e69e6a0">ast_rtp_codecs_payloads_set_m_type</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_set_m_type(struct ast_rtp_codecs *codecs, struct ast_rtp_instance *instance, int payload)</div><div class="ttdoc">Record tx payload type information that was seen in an m= SDP line. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01301">rtp_engine.c:1301</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace0be555f61532a27ad7aff9968d3a9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace0be555f61532a27ad7aff9968d3a9b">&#9670;&nbsp;</a></span>get_media_encryption_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340">ast_sip_session_media_encryption</a> get_media_encryption_type </td>
          <td>(</td>
          <td class="paramtype">pj_str_t&#160;</td>
          <td class="paramname"><em>transport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>optimistic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>figure out media transport encryption type from the media transport string </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00938">938</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00512">AST_SIP_MEDIA_ENCRYPT_DTLS</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00508">AST_SIP_MEDIA_ENCRYPT_NONE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00510">AST_SIP_MEDIA_ENCRYPT_SDES</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00506">AST_SIP_MEDIA_TRANSPORT_INVALID</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00258">ast_strndup</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00918">media_stream_has_crypto()</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00970">check_endpoint_media_transport()</a>.</p>
<div class="fragment"><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;{</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, transport_str, <a class="code" href="../../d8/d8a/astmm_8h.html#aa1202a8277cd3013d22535bf5bfe85fc">ast_strndup</a>(transport.ptr, transport.slen), <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   *optimistic = 0;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <span class="keywordflow">if</span> (!transport_str) {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18">AST_SIP_MEDIA_TRANSPORT_INVALID</a>;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   <span class="keywordflow">if</span> (strstr(transport_str, <span class="stringliteral">&quot;UDP/TLS&quot;</span>)) {</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340afea01c037980f6a2fb8769078b5f3210">AST_SIP_MEDIA_ENCRYPT_DTLS</a>;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(transport_str, <span class="stringliteral">&quot;SAVP&quot;</span>)) {</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf">AST_SIP_MEDIA_ENCRYPT_SDES</a>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aabf52c2f923a1efc1acedf763b44f42c">media_stream_has_crypto</a>(stream)) {</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      *optimistic = 1;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf">AST_SIP_MEDIA_ENCRYPT_SDES</a>;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a>;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   }</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;}</div><div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18">AST_SIP_MEDIA_TRANSPORT_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00506">res_pjsip.h:506</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340afea01c037980f6a2fb8769078b5f3210"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340afea01c037980f6a2fb8769078b5f3210">AST_SIP_MEDIA_ENCRYPT_DTLS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00512">res_pjsip.h:512</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astmm_8h_html_aa1202a8277cd3013d22535bf5bfe85fc"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aa1202a8277cd3013d22535bf5bfe85fc">ast_strndup</a></div><div class="ttdeci">#define ast_strndup(str, len)</div><div class="ttdoc">A wrapper for strndup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00258">astmm.h:258</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00508">res_pjsip.h:508</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf">AST_SIP_MEDIA_ENCRYPT_SDES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00510">res_pjsip.h:510</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_aabf52c2f923a1efc1acedf763b44f42c"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aabf52c2f923a1efc1acedf763b44f42c">media_stream_has_crypto</a></div><div class="ttdeci">static int media_stream_has_crypto(const struct pjmedia_sdp_media *stream)</div><div class="ttdoc">figure out if media stream has crypto lines for sdes </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00918">res_pjsip_sdp_rtp.c:918</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load the module. </p>
<p>Module loading including tests for configuration or dependencies. This function can return AST_MODULE_LOAD_FAILURE, AST_MODULE_LOAD_DECLINE, or AST_MODULE_LOAD_SUCCESS. If a dependency or environment variable fails tests return AST_MODULE_LOAD_FAILURE. If the module can not load the configuration file or other non-critical problem return AST_MODULE_LOAD_DECLINE. On success return AST_MODULE_LOAD_SUCCESS. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02347">2347</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00066">address_rtp</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02540">ast_check_ipv6()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00327">AST_MODPRI_CHANNEL_DRIVER</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00236">ast_sched_context_create()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00195">ast_sched_start_thread()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00138">ast_sip_session_register_sdp_handler()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00616">ast_sip_session_register_supplement</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00068">STR_AUDIO</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00069">STR_VIDEO</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02324">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;{</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#ad006fcd49cd8cfb2ca8ae5ee4e4bf708">ast_check_ipv6</a>()) {</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#abe01dad064469f433db45f3841501e9d">address_rtp</a>, <span class="stringliteral">&quot;::&quot;</span>, 0);</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#abe01dad064469f433db45f3841501e9d">address_rtp</a>, <span class="stringliteral">&quot;0.0.0.0&quot;</span>, 0);</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;   }</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/da0/structsched.html">sched</a> = <a class="code" href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a>())) {</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create scheduler context.\n&quot;</span>);</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;   }</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d00/sched_8h.html#a8ae97d1549b62cfbfc78bd92efe48005">ast_sched_start_thread</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>)) {</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create scheduler context thread.\n&quot;</span>);</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;   }</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a30cf6ad5b4d5ad87ecfeb571a24fe8f8">ast_sip_session_register_sdp_handler</a>(&amp;<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a5ad742392f9dd49a29c4b9dceba3d08c">audio_sdp_handler</a>, <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a59e9debc727c9ce4219c74a4f3a942b8">STR_AUDIO</a>)) {</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register SDP handler for %s stream type\n&quot;</span>, <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a59e9debc727c9ce4219c74a4f3a942b8">STR_AUDIO</a>);</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;   }</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a30cf6ad5b4d5ad87ecfeb571a24fe8f8">ast_sip_session_register_sdp_handler</a>(&amp;<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ac2060fea834f8cdd1ea3e9b35f8d27ec">video_sdp_handler</a>, <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a9b59532fce01bb95cfff01f4c0f69a58">STR_VIDEO</a>)) {</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register SDP handler for %s stream type\n&quot;</span>, <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a9b59532fce01bb95cfff01f4c0f69a58">STR_VIDEO</a>);</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;   }</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aa21df5d2fdfb2d6e2734a3056ec3db7c">ast_sip_session_register_supplement</a>(&amp;<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ada080d57bbae43f24e66d7de4aca5ff2">video_info_supplement</a>);</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;   <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;}</div><div class="ttc" id="sched_8h_html_a8ae97d1549b62cfbfc78bd92efe48005"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a8ae97d1549b62cfbfc78bd92efe48005">ast_sched_start_thread</a></div><div class="ttdeci">int ast_sched_start_thread(struct ast_sched_context *con)</div><div class="ttdoc">Start a thread for processing scheduler entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00195">sched.c:195</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a9b59532fce01bb95cfff01f4c0f69a58"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a9b59532fce01bb95cfff01f4c0f69a58">STR_VIDEO</a></div><div class="ttdeci">static const char STR_VIDEO[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00069">res_pjsip_sdp_rtp.c:69</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_abe01dad064469f433db45f3841501e9d"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#abe01dad064469f433db45f3841501e9d">address_rtp</a></div><div class="ttdeci">static struct ast_sockaddr address_rtp</div><div class="ttdoc">Address for RTP. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00066">res_pjsip_sdp_rtp.c:66</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ad09fa931f468002152a3cc2d5ce25eae"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a></div><div class="ttdeci">static int unload_module(void)</div><div class="ttdoc">Unloads the sdp RTP/AVP module from Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02324">res_pjsip_sdp_rtp.c:2324</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ac2060fea834f8cdd1ea3e9b35f8d27ec"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ac2060fea834f8cdd1ea3e9b35f8d27ec">video_sdp_handler</a></div><div class="ttdeci">static struct ast_sip_session_sdp_handler video_sdp_handler</div><div class="ttdoc">SDP handler for &amp;#39;video&amp;#39; media stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02285">res_pjsip_sdp_rtp.c:2285</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a30cf6ad5b4d5ad87ecfeb571a24fe8f8"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a30cf6ad5b4d5ad87ecfeb571a24fe8f8">ast_sip_session_register_sdp_handler</a></div><div class="ttdeci">int ast_sip_session_register_sdp_handler(struct ast_sip_session_sdp_handler *handler, const char *stream_type)</div><div class="ttdoc">Register an SDP handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00138">res_pjsip_session.c:138</a></div></div>
<div class="ttc" id="utils_8h_html_ad006fcd49cd8cfb2ca8ae5ee4e4bf708"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad006fcd49cd8cfb2ca8ae5ee4e4bf708">ast_check_ipv6</a></div><div class="ttdeci">int ast_check_ipv6(void)</div><div class="ttdoc">Test that an OS supports IPv6 Networking. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02540">main/utils.c:2540</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ada080d57bbae43f24e66d7de4aca5ff2"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ada080d57bbae43f24e66d7de4aca5ff2">video_info_supplement</a></div><div class="ttdeci">static struct ast_sip_session_supplement video_info_supplement</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02318">res_pjsip_sdp_rtp.c:2318</a></div></div>
<div class="ttc" id="sched_8h_html_a5baecc149aeabdbef9b3ed6780c1c4a6"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a></div><div class="ttdeci">struct ast_sched_context * ast_sched_context_create(void)</div><div class="ttdoc">Create a scheduler context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00236">sched.c:236</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a5ad742392f9dd49a29c4b9dceba3d08c"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a5ad742392f9dd49a29c4b9dceba3d08c">audio_sdp_handler</a></div><div class="ttdeci">static struct ast_sip_session_sdp_handler audio_sdp_handler</div><div class="ttdoc">SDP handler for &amp;#39;audio&amp;#39; media stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02274">res_pjsip_sdp_rtp.c:2274</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a59e9debc727c9ce4219c74a4f3a942b8"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a59e9debc727c9ce4219c74a4f3a942b8">STR_AUDIO</a></div><div class="ttdeci">static const char STR_AUDIO[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00068">res_pjsip_sdp_rtp.c:68</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aa21df5d2fdfb2d6e2734a3056ec3db7c"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aa21df5d2fdfb2d6e2734a3056ec3db7c">ast_sip_session_register_supplement</a></div><div class="ttdeci">#define ast_sip_session_register_supplement(supplement)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00616">res_pjsip_session.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4f51444b6ccc7de71bd1c95fd1a2cce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4f51444b6ccc7de71bd1c95fd1a2cce">&#9670;&nbsp;</a></span>media_session_rtcp_read_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* media_session_rtcp_read_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02038">2038</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00578">ast_rtp_instance_read()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03773">ast_rtp_instance_set_last_rx()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;{</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;   <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;   }</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   f = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a8e272a4ee35206ff8c4c0384b9e3f592">ast_rtp_instance_read</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, 1);</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;   <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;   }</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a27714e89a2a2d136150789bc6d41e060">ast_rtp_instance_set_last_rx</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;   <span class="keywordflow">return</span> f;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a27714e89a2a2d136150789bc6d41e060"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a27714e89a2a2d136150789bc6d41e060">ast_rtp_instance_set_last_rx</a></div><div class="ttdeci">void ast_rtp_instance_set_last_rx(struct ast_rtp_instance *rtp, time_t time)</div><div class="ttdoc">Set the last RTP reception time. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03773">rtp_engine.c:3773</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a8e272a4ee35206ff8c4c0384b9e3f592"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a8e272a4ee35206ff8c4c0384b9e3f592">ast_rtp_instance_read</a></div><div class="ttdeci">struct ast_frame * ast_rtp_instance_read(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Receive a frame over RTP. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00578">rtp_engine.c:578</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8af61149eb3e2449acae0a9c8f16d82e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8af61149eb3e2449acae0a9c8f16d82e">&#9670;&nbsp;</a></span>media_session_rtp_read_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* media_session_rtp_read_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02020">2020</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00578">ast_rtp_instance_read()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03773">ast_rtp_instance_set_last_rx()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;{</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;   <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;   }</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;   f = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a8e272a4ee35206ff8c4c0384b9e3f592">ast_rtp_instance_read</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, 0);</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;   <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;   }</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a27714e89a2a2d136150789bc6d41e060">ast_rtp_instance_set_last_rx</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;   <span class="keywordflow">return</span> f;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a27714e89a2a2d136150789bc6d41e060"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a27714e89a2a2d136150789bc6d41e060">ast_rtp_instance_set_last_rx</a></div><div class="ttdeci">void ast_rtp_instance_set_last_rx(struct ast_rtp_instance *rtp, time_t time)</div><div class="ttdoc">Set the last RTP reception time. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03773">rtp_engine.c:3773</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a8e272a4ee35206ff8c4c0384b9e3f592"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a8e272a4ee35206ff8c4c0384b9e3f592">ast_rtp_instance_read</a></div><div class="ttdeci">struct ast_frame * ast_rtp_instance_read(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Receive a frame over RTP. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00578">rtp_engine.c:578</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a535004424363f85b344ef30708687310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a535004424363f85b344ef30708687310">&#9670;&nbsp;</a></span>media_session_rtp_write_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int media_session_rtp_write_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02056">2056</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00568">ast_rtp_instance_write()</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;{</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;   <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;   }</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a87cb097a21ab7712c27aa9e3b3a1ef69">ast_rtp_instance_write</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, frame);</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a87cb097a21ab7712c27aa9e3b3a1ef69"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a87cb097a21ab7712c27aa9e3b3a1ef69">ast_rtp_instance_write</a></div><div class="ttdeci">int ast_rtp_instance_write(struct ast_rtp_instance *instance, struct ast_frame *frame)</div><div class="ttdoc">Send a frame out over RTP. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00568">rtp_engine.c:568</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aabf52c2f923a1efc1acedf763b44f42c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabf52c2f923a1efc1acedf763b44f42c">&#9670;&nbsp;</a></span>media_stream_has_crypto()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int media_stream_has_crypto </td>
          <td>(</td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>figure out if media stream has crypto lines for sdes </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00918">918</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00938">get_media_encryption_type()</a>.</p>
<div class="fragment"><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;{</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; stream-&gt;attr_count; i++) {</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      pjmedia_sdp_attr *attr;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      <span class="comment">/* check the stream for the required crypto attribute */</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      attr = stream-&gt;attr[i];</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="keywordflow">if</span> (pj_strcmp2(&amp;attr-&gt;name, <span class="stringliteral">&quot;crypto&quot;</span>)) {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      }</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   }</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a25283b69d06534d764e73fc6b9c029d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25283b69d06534d764e73fc6b9c029d9">&#9670;&nbsp;</a></span>negotiate_incoming_sdp_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int negotiate_incoming_sdp_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pjmedia_sdp_session *&#160;</td>
          <td class="paramname"><em>sdp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>asterisk_stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function which negotiates an incoming media stream. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">1462</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00407">apply_cap_to_bundled()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00054">AST_AF_UNSPEC</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00615">ast_format_cap_has_type()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03804">ast_rtp_instance_bundle()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00508">AST_SIP_MEDIA_ENCRYPT_NONE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00510">AST_SIP_MEDIA_ENCRYPT_SDES</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00506">AST_SIP_MEDIA_TRANSPORT_INVALID</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00359">ast_sip_session_is_pending_stream_default()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00414">ast_sip_session_media_get_transport()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00534">ast_sockaddr_is_any()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00280">ast_sockaddr_resolve()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00115">ast_sip_session_media::bundled</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00970">check_endpoint_media_transport()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00750">check_ice_support()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00770">ast_sip_endpoint_media_configuration::codecs</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00228">create_rtp()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00165">enable_rtcp()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00087">ast_sip_session_media::encryption</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00713">ast_sip_media_rtp_configuration::encryption_optimistic</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00077">host</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">PARSE_PORT_FORBID</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01404">process_extmap_attributes()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00776">process_ice_auth_attrb()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01218">process_ssrc_attributes()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00103">ast_sip_session_media::remote_ice</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00101">ast_sip_session_media::remote_rtcp_mux</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00095">ast_sip_session_media::remotely_held</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00097">ast_sip_session_media::remotely_held_changed</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01181">set_ice_components()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00438">set_incoming_call_offer_cap()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01154">setup_media_encryption()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00089">ast_sip_session_media::transport</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">ast_sip_session_media::type</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00705">ast_sip_media_rtp_configuration::use_received_transport</a>.</p>
<div class="fragment"><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;{</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>[NI_MAXHOST];</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *, addrs, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;   pjmedia_sdp_media *stream = sdp-&gt;media[index];</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media_transport;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="code" href="../../d1/d94/sip_8h.html#a99c5ff7e5199a13ca4884062b413d68f">media_type</a> = session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340">ast_sip_session_media_encryption</a> <a class="code" href="../../d0/d23/structast__sip__session__media.html#a947ba038dc2e3de1a3d4ce24e88da1d4">encryption</a> = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a>;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *joint;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;   <span class="comment">/* If no type formats have been configured reject this stream */</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d3c/format__cap_8h.html#a9b2d6490b222d436f5f6a8296d36c13f">ast_format_cap_has_type</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a250b131731bf019fe96a44c9473437f0">codecs</a>, media_type)) {</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Endpoint has no codecs for media type &#39;%s&#39;, declining stream\n&quot;</span>,</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;         <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;Endpoint has no codecs\n&quot;</span>);</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   }</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   <span class="comment">/* Ensure incoming transport is compatible with the endpoint&#39;s configuration */</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a68c966a9c18044b913c35f8d722d14b4">use_received_transport</a>) {</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      encryption = <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a321884e3fb8a45013b26a3febd9cc198">check_endpoint_media_transport</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>, stream);</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      <span class="keywordflow">if</span> (encryption == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18">AST_SIP_MEDIA_TRANSPORT_INVALID</a>) {</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Incompatible transport\n&quot;</span>);</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      }</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   }</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(host, stream-&gt;conn ? &amp;stream-&gt;conn-&gt;addr : &amp;sdp-&gt;conn-&gt;addr, <span class="keyword">sizeof</span>(host));</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   <span class="comment">/* Ensure that the address provided is valid */</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a>(&amp;addrs, host, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>, <a class="code" href="../../db/df1/netsock2_8h.html#a27c1625aa5fde74a6dec3d424733c579a97dcf13ca2f2ce3ce4c66de236e6f3f7">AST_AF_UNSPEC</a>) &lt;= 0) {</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      <span class="comment">/* The provided host was actually invalid so we error out this negotiation */</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Invalid host\n&quot;</span>);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   }</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   <span class="comment">/* Using the connection information create an appropriate RTP instance */</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;   <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> &amp;&amp; <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aea9df35ad9322360bd011b9c0f525712">create_rtp</a>(session, session_media, sdp)) {</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Couldn&#39;t create rtp\n&quot;</span>);</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;   }</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;   <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#afdafeaf63c0f7a97f74001626aef9445">process_ssrc_attributes</a>(session, session_media, stream);</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;   <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab67da4f554f7dc3887e3f19fe5bea2d3">process_extmap_attributes</a>(session, session_media, stream);</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;   session_media_transport = <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aa29930c927d55f4f7a615a11766a6a09">ast_sip_session_media_get_transport</a>(session, session_media);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;   <span class="keywordflow">if</span> (session_media_transport == session_media || !session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#adde8efbb4df251209d1b3e05e166a025">bundled</a>) {</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <span class="comment">/* If this media session is carrying actual traffic then set up those aspects */</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a6f7b8add12e23680b28e4b88f70a1a83">remote_rtcp_mux</a> = (pjmedia_sdp_media_find_attr2(stream, <span class="stringliteral">&quot;rtcp-mux&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#af0f3c0953aba91059ad040ae70e36d37">set_ice_components</a>(session, session_media);</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae92b132c7aaa847416dffe0b3f888e49">enable_rtcp</a>(session, session_media, stream);</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      res = <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6f9f30e53670bbbe6931012811f84b8e">setup_media_encryption</a>(session, session_media, sdp, stream);</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;         <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#ab953e3c061e35e6c06541e75d1f45084">encryption_optimistic</a> ||</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;            !pj_strncmp2(&amp;stream-&gt;desc.transport, <span class="stringliteral">&quot;RTP/SAVP&quot;</span>, 8)) {</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;            <span class="comment">/* If optimistic encryption is disabled and crypto should have been enabled</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment">             * but was not this session must fail. This must also fail if crypto was</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="comment">             * required in the offer but could not be set up.</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Incompatible crypto\n&quot;</span>);</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;         }</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;         <span class="comment">/* There is no encryption, sad. */</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;         session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a947ba038dc2e3de1a3d4ce24e88da1d4">encryption</a> = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a>;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      }</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      <span class="comment">/* If we&#39;ve been explicitly configured to use the received transport OR if</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<span class="comment">       * encryption is on and crypto is present use the received transport.</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;<span class="comment">       * This is done in case of optimistic because it may come in as RTP/AVP or RTP/SAVP depending</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<span class="comment">       * on the configuration of the remote endpoint (optimistic themselves or mandatory).</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      <span class="keywordflow">if</span> ((session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a68c966a9c18044b913c35f8d722d14b4">use_received_transport</a>) ||</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;         ((encryption == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf">AST_SIP_MEDIA_ENCRYPT_SDES</a>) &amp;&amp; !res)) {</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;         pj_strdup(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;pool, &amp;session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#ad55758f6305a57020c731e04863f15b4">transport</a>, &amp;stream-&gt;desc.transport);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      }</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      <span class="comment">/* This is bundled with another session, so mark it as such */</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6bfb60287c258994663a8e7749e08532">ast_rtp_instance_bundle</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, session_media_transport-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae92b132c7aaa847416dffe0b3f888e49">enable_rtcp</a>(session, session_media, stream);</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;   }</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;   <span class="comment">/* If ICE support is enabled find all the needed attributes */</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;   <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a31df8422bf06d5745f4f17d0ae1c7623">check_ice_support</a>(session, session_media, stream);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;   <span class="comment">/* If ICE support is enabled then check remote ICE started? */</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;   <span class="keywordflow">if</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a52b71bbc800a8503cfca7eb90f00e23a">remote_ice</a>) {</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab8ee49b9d58fd68ef934b26d503238a8">process_ice_auth_attrb</a>(session, session_media, sdp, stream);</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   }</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a4d96ab8cbcc0f85012300573e3db2900">ast_sip_session_is_pending_stream_default</a>(session, asterisk_stream) &amp;&amp; media_type == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;      <span class="comment">/* Check if incomming SDP is changing the remotely held state */</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(addrs) ||</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a7704d67f19f3ca91198d8cc6e6445c3f">ast_sockaddr_is_any</a>(addrs) ||</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;         pjmedia_sdp_media_find_attr2(stream, <span class="stringliteral">&quot;sendonly&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;         pjmedia_sdp_media_find_attr2(stream, <span class="stringliteral">&quot;inactive&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;         <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a89f65c64a4a6a3d3505cfe31d549af90">remotely_held</a>) {</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;            session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a89f65c64a4a6a3d3505cfe31d549af90">remotely_held</a> = 1;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;            session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a37c70d2025bfb0834e6eb356724405d5">remotely_held_changed</a> = 1;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;         }</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a89f65c64a4a6a3d3505cfe31d549af90">remotely_held</a>) {</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;         session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a89f65c64a4a6a3d3505cfe31d549af90">remotely_held</a> = 0;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;         session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a37c70d2025bfb0834e6eb356724405d5">remotely_held_changed</a> = 1;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      }</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;   }</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   joint = <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab9125d77911b022cb2ad5fe08071b0d9">set_incoming_call_offer_cap</a>(session, session_media, stream);</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;   res = <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6021b3388c8b6ebec52def7471de6bcf">apply_cap_to_bundled</a>(session_media, session_media_transport, asterisk_stream, joint);</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(joint);</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;   <span class="keywordflow">if</span> (res != 0) {</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;Something failed\n&quot;</span>);</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;   }</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(1);</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;}</div><div class="ttc" id="structast__sip__media__rtp__configuration_html_ab953e3c061e35e6c06541e75d1f45084"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#ab953e3c061e35e6c06541e75d1f45084">ast_sip_media_rtp_configuration::encryption_optimistic</a></div><div class="ttdeci">unsigned int encryption_optimistic</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00713">res_pjsip.h:713</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a6021b3388c8b6ebec52def7471de6bcf"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6021b3388c8b6ebec52def7471de6bcf">apply_cap_to_bundled</a></div><div class="ttdeci">static int apply_cap_to_bundled(struct ast_sip_session_media *session_media, struct ast_sip_session_media *session_media_transport, struct ast_stream *asterisk_stream, struct ast_format_cap *joint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00407">res_pjsip_sdp_rtp.c:407</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ae92b132c7aaa847416dffe0b3f888e49"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae92b132c7aaa847416dffe0b3f888e49">enable_rtcp</a></div><div class="ttdeci">static void enable_rtcp(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const struct pjmedia_sdp_media *remote_media)</div><div class="ttdoc">Enable RTCP on an RTP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00165">res_pjsip_sdp_rtp.c:165</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340">ast_sip_session_media_encryption</a></div><div class="ttdeci">ast_sip_session_media_encryption</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00504">res_pjsip.h:504</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_aea9df35ad9322360bd011b9c0f525712"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aea9df35ad9322360bd011b9c0f525712">create_rtp</a></div><div class="ttdeci">static int create_rtp(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const pjmedia_sdp_session *sdp)</div><div class="ttdoc">Internal function which creates an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00228">res_pjsip_sdp_rtp.c:228</a></div></div>
<div class="ttc" id="sip_8h_html_a99c5ff7e5199a13ca4884062b413d68f"><div class="ttname"><a href="../../d1/d94/sip_8h.html#a99c5ff7e5199a13ca4884062b413d68f">media_type</a></div><div class="ttdeci">media_type</div><div class="ttdoc">Media types generate different &quot;dummy answers&quot; for not accepting the offer of a media stream...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00489">sip.h:489</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aa29930c927d55f4f7a615a11766a6a09"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aa29930c927d55f4f7a615a11766a6a09">ast_sip_session_media_get_transport</a></div><div class="ttdeci">struct ast_sip_session_media * ast_sip_session_media_get_transport(struct ast_sip_session *session, struct ast_sip_session_media *session_media)</div><div class="ttdoc">Retrieve the underlying media session that is acting as transport for a media session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00414">res_pjsip_session.c:414</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a6bfb60287c258994663a8e7749e08532"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a6bfb60287c258994663a8e7749e08532">ast_rtp_instance_bundle</a></div><div class="ttdeci">int ast_rtp_instance_bundle(struct ast_rtp_instance *child, struct ast_rtp_instance *parent)</div><div class="ttdoc">Request that an RTP instance be bundled with another. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03804">rtp_engine.c:3804</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ab9125d77911b022cb2ad5fe08071b0d9"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab9125d77911b022cb2ad5fe08071b0d9">set_incoming_call_offer_cap</a></div><div class="ttdeci">static struct ast_format_cap * set_incoming_call_offer_cap(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const struct pjmedia_sdp_media *stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00438">res_pjsip_sdp_rtp.c:438</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18">AST_SIP_MEDIA_TRANSPORT_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00506">res_pjsip.h:506</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a31df8422bf06d5745f4f17d0ae1c7623"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a31df8422bf06d5745f4f17d0ae1c7623">check_ice_support</a></div><div class="ttdeci">static void check_ice_support(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const struct pjmedia_sdp_media *remote_stream)</div><div class="ttdoc">Function which checks for ice attributes in an audio stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00750">res_pjsip_sdp_rtp.c:750</a></div></div>
<div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_ad55758f6305a57020c731e04863f15b4"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#ad55758f6305a57020c731e04863f15b4">ast_sip_session_media::transport</a></div><div class="ttdeci">pj_str_t transport</div><div class="ttdoc">The media transport in use for this stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00089">res_pjsip_session.h:89</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a250b131731bf019fe96a44c9473437f0"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a250b131731bf019fe96a44c9473437f0">ast_sip_endpoint_media_configuration::codecs</a></div><div class="ttdeci">struct ast_format_cap * codecs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00770">res_pjsip.h:770</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">include/asterisk/config.h:1135</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a6f9f30e53670bbbe6931012811f84b8e"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6f9f30e53670bbbe6931012811f84b8e">setup_media_encryption</a></div><div class="ttdeci">static int setup_media_encryption(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const struct pjmedia_sdp_session *sdp, const struct pjmedia_sdp_media *stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01154">res_pjsip_sdp_rtp.c:1154</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_a68c966a9c18044b913c35f8d722d14b4"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#a68c966a9c18044b913c35f8d722d14b4">ast_sip_media_rtp_configuration::use_received_transport</a></div><div class="ttdeci">unsigned int use_received_transport</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00705">res_pjsip.h:705</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a947ba038dc2e3de1a3d4ce24e88da1d4"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a947ba038dc2e3de1a3d4ce24e88da1d4">ast_sip_session_media::encryption</a></div><div class="ttdeci">enum ast_sip_session_media_encryption encryption</div><div class="ttdoc">What type of encryption is in use on this stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00087">res_pjsip_session.h:87</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ab8ee49b9d58fd68ef934b26d503238a8"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab8ee49b9d58fd68ef934b26d503238a8">process_ice_auth_attrb</a></div><div class="ttdeci">static void process_ice_auth_attrb(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const struct pjmedia_sdp_session *remote, const struct pjmedia_sdp_media *remote_stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00776">res_pjsip_sdp_rtp.c:776</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_adde8efbb4df251209d1b3e05e166a025"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#adde8efbb4df251209d1b3e05e166a025">ast_sip_session_media::bundled</a></div><div class="ttdeci">unsigned int bundled</div><div class="ttdoc">Whether this stream is currently bundled or not. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00115">res_pjsip_session.h:115</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="netsock2_8h_html_a7704d67f19f3ca91198d8cc6e6445c3f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a7704d67f19f3ca91198d8cc6e6445c3f">ast_sockaddr_is_any</a></div><div class="ttdeci">int ast_sockaddr_is_any(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if the address type is unspecified, or &quot;any&quot; address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00534">netsock2.c:534</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a4d96ab8cbcc0f85012300573e3db2900"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a4d96ab8cbcc0f85012300573e3db2900">ast_sip_session_is_pending_stream_default</a></div><div class="ttdeci">int ast_sip_session_is_pending_stream_default(const struct ast_sip_session *session, const struct ast_stream *stream)</div><div class="ttdoc">Determines if a provided pending stream will be the default stream or not. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00359">res_pjsip_session.c:359</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ab67da4f554f7dc3887e3f19fe5bea2d3"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab67da4f554f7dc3887e3f19fe5bea2d3">process_extmap_attributes</a></div><div class="ttdeci">static void process_extmap_attributes(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const struct pjmedia_sdp_media *remote_stream)</div><div class="ttdoc">Function which processes extmap attributes in a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01404">res_pjsip_sdp_rtp.c:1404</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_afdafeaf63c0f7a97f74001626aef9445"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#afdafeaf63c0f7a97f74001626aef9445">process_ssrc_attributes</a></div><div class="ttdeci">static void process_ssrc_attributes(struct ast_sip_session *session, struct ast_sip_session_media *session_media, const struct pjmedia_sdp_media *remote_stream)</div><div class="ttdoc">Function which processes ssrc attributes in a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01218">res_pjsip_sdp_rtp.c:1218</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a89f65c64a4a6a3d3505cfe31d549af90"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a89f65c64a4a6a3d3505cfe31d549af90">ast_sip_session_media::remotely_held</a></div><div class="ttdeci">unsigned int remotely_held</div><div class="ttdoc">Stream is on hold by remote side. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00095">res_pjsip_session.h:95</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="netsock2_8h_html_a27c1625aa5fde74a6dec3d424733c579a97dcf13ca2f2ce3ce4c66de236e6f3f7"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a27c1625aa5fde74a6dec3d424733c579a97dcf13ca2f2ce3ce4c66de236e6f3f7">AST_AF_UNSPEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00054">netsock2.h:54</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00508">res_pjsip.h:508</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a321884e3fb8a45013b26a3febd9cc198"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a321884e3fb8a45013b26a3febd9cc198">check_endpoint_media_transport</a></div><div class="ttdeci">static enum ast_sip_session_media_encryption check_endpoint_media_transport(struct ast_sip_endpoint *endpoint, const struct pjmedia_sdp_media *stream)</div><div class="ttdoc">Checks whether the encryption offered in SDP is compatible with the endpoint&amp;#39;s configuration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00970">res_pjsip_sdp_rtp.c:970</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_sip_session_media::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Media type of this session media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">res_pjsip_session.h:105</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a37c70d2025bfb0834e6eb356724405d5"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a37c70d2025bfb0834e6eb356724405d5">ast_sip_session_media::remotely_held_changed</a></div><div class="ttdeci">unsigned int remotely_held_changed</div><div class="ttdoc">Stream is held by remote side changed during this negotiation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00097">res_pjsip_session.h:97</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_af0f3c0953aba91059ad040ae70e36d37"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#af0f3c0953aba91059ad040ae70e36d37">set_ice_components</a></div><div class="ttdeci">static void set_ice_components(struct ast_sip_session *session, struct ast_sip_session_media *session_media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01181">res_pjsip_sdp_rtp.c:1181</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a></div><div class="ttdeci">ast_media_type</div><div class="ttdoc">Types of media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00030">codec.h:30</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a6f7b8add12e23680b28e4b88f70a1a83"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a6f7b8add12e23680b28e4b88f70a1a83">ast_sip_session_media::remote_rtcp_mux</a></div><div class="ttdeci">unsigned int remote_rtcp_mux</div><div class="ttdoc">Does remote support rtcp_mux. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00101">res_pjsip_session.h:101</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf">AST_SIP_MEDIA_ENCRYPT_SDES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00510">res_pjsip.h:510</a></div></div>
<div class="ttc" id="format__cap_8h_html_a9b2d6490b222d436f5f6a8296d36c13f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a9b2d6490b222d436f5f6a8296d36c13f">ast_format_cap_has_type</a></div><div class="ttdeci">int ast_format_cap_has_type(const struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Find out if the capabilities structure has any formats of a specific type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00615">format_cap.c:615</a></div></div>
<div class="ttc" id="netsock2_8h_html_a8ba6f5b5a9de09137dd18fe2d9592880"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a></div><div class="ttdeci">int ast_sockaddr_resolve(struct ast_sockaddr **addrs, const char *str, int flags, int family)</div><div class="ttdoc">Parses a string with an IPv4 or IPv6 address and place results into an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00280">netsock2.c:280</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a52b71bbc800a8503cfca7eb90f00e23a"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a52b71bbc800a8503cfca7eb90f00e23a">ast_sip_session_media::remote_ice</a></div><div class="ttdeci">unsigned int remote_ice</div><div class="ttdoc">Does remote support ice. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00103">res_pjsip_session.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a95ebe26f28678a96a1fa1a8f248ee3a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95ebe26f28678a96a1fa1a8f248ee3a1">&#9670;&nbsp;</a></span>parse_dtls_attrib()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int parse_dtls_attrib </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_session *&#160;</td>
          <td class="paramname"><em>sdp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01099">1099</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01050">apply_dtls_attrib()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../de/d5f/sdp__srtp_8h_source.html#l00044">AST_SRTP_CRYPTO_OFFER_OK</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00085">ast_sip_session_media::srtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01154">setup_media_encryption()</a>.</p>
<div class="fragment"><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;{</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; sdp-&gt;attr_count; i++) {</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a21612a5d9f844fe6a9429b8240137495">apply_dtls_attrib</a>(session_media, sdp-&gt;attr[i]);</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;   }</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; stream-&gt;attr_count; i++) {</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a21612a5d9f844fe6a9429b8240137495">apply_dtls_attrib</a>(session_media, stream-&gt;attr[i]);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;   }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">srtp</a>, <a class="code" href="../../de/d5f/sdp__srtp_8h.html#aeef2a537f4fed48886a3f9c316a45285">AST_SRTP_CRYPTO_OFFER_OK</a>);</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;}</div><div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a21612a5d9f844fe6a9429b8240137495"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a21612a5d9f844fe6a9429b8240137495">apply_dtls_attrib</a></div><div class="ttdeci">static void apply_dtls_attrib(struct ast_sip_session_media *session_media, pjmedia_sdp_attr *attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01050">res_pjsip_sdp_rtp.c:1050</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="sdp__srtp_8h_html_aeef2a537f4fed48886a3f9c316a45285"><div class="ttname"><a href="../../de/d5f/sdp__srtp_8h.html#aeef2a537f4fed48886a3f9c316a45285">AST_SRTP_CRYPTO_OFFER_OK</a></div><div class="ttdeci">#define AST_SRTP_CRYPTO_OFFER_OK</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5f/sdp__srtp_8h_source.html#l00044">sdp_srtp.h:44</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a2f87df48a0208ce2b1108d0135e09a72"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">ast_sip_session_media::srtp</a></div><div class="ttdeci">struct ast_sdp_srtp * srtp</div><div class="ttdoc">Holds SRTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00085">res_pjsip_session.h:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab67da4f554f7dc3887e3f19fe5bea2d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab67da4f554f7dc3887e3f19fe5bea2d3">&#9670;&nbsp;</a></span>process_extmap_attributes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void process_extmap_attributes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>remote_stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function which processes extmap attributes in a stream. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01404">1404</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00779">AST_RTP_EXTENSION_DIRECTION_INACTIVE</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00777">AST_RTP_EXTENSION_DIRECTION_RECVONLY</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00775">AST_RTP_EXTENSION_DIRECTION_SENDONLY</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00773">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00862">ast_rtp_instance_extmap_clear()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00818">ast_rtp_instance_extmap_negotiate()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l01507">id</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">ast_sip_session_media::type</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00794">ast_sip_endpoint_media_configuration::webrtc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;{</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">webrtc</a> || session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>) {</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   }</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#ae5fe3bd0559594353c0e168863d7b5a3">ast_rtp_instance_extmap_clear</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; remote_stream-&gt;attr_count; ++index) {</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      pjmedia_sdp_attr *attr = remote_stream-&gt;attr[index];</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      <span class="keywordtype">char</span> attr_value[pj_strlen(&amp;attr-&gt;value) + 1];</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      <span class="keywordtype">char</span> *uri;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a>;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      <span class="keywordtype">char</span> direction_str[10] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      <span class="keywordtype">char</span> *attributes;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a> <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a>;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      <span class="comment">/* We only care about extmap attributes */</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      <span class="keywordflow">if</span> (pj_strcmp2(&amp;attr-&gt;name, <span class="stringliteral">&quot;extmap&quot;</span>)) {</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      }</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(attr_value, &amp;attr-&gt;value, <span class="keyword">sizeof</span>(attr_value));</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      <span class="comment">/* Split the combined unique identifier and direction away from the URI and attributes for easier parsing */</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;      uri = strchr(attr_value, <span class="charliteral">&#39; &#39;</span>);</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(uri)) {</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      }</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      *uri++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      <span class="keywordflow">if</span> ((sscanf(attr_value, <span class="stringliteral">&quot;%30d%9s&quot;</span>, &amp;<span class="keywordtype">id</span>, direction_str) &lt; 1) || (<span class="keywordtype">id</span> &lt; 1)) {</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;         <span class="comment">/* We require at a minimum the unique identifier */</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      }</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      <span class="comment">/* Convert from the string to the internal representation */</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(direction_str, <span class="stringliteral">&quot;/sendonly&quot;</span>)) {</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;         direction = <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0af5077f2f205afd10463fa2f98a3a8c96">AST_RTP_EXTENSION_DIRECTION_SENDONLY</a>;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(direction_str, <span class="stringliteral">&quot;/recvonly&quot;</span>)) {</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;         direction = <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a85f05e5bc6cc29f9c2a1b12113280a52">AST_RTP_EXTENSION_DIRECTION_RECVONLY</a>;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(direction_str, <span class="stringliteral">&quot;/inactive&quot;</span>)) {</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;         direction = <a class="code" href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a7eec86ca7aa6358db7f1f47ab1fe8ed1">AST_RTP_EXTENSION_DIRECTION_INACTIVE</a>;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      }</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      attributes = strchr(uri, <span class="charliteral">&#39; &#39;</span>);</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(attributes)) {</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;         *attributes++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      }</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#adef7f9e182a2d5e45a570f990c7dc92f">ast_rtp_instance_extmap_negotiate</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <span class="keywordtype">id</span>, direction, uri, attributes);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;   }</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;}</div><div class="ttc" id="structast__sip__endpoint__media__configuration_html_aa64681ccac6f69e15c21471249e68121"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">ast_sip_endpoint_media_configuration::webrtc</a></div><div class="ttdeci">unsigned int webrtc</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00794">res_pjsip.h:794</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0af5077f2f205afd10463fa2f98a3a8c96"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0af5077f2f205afd10463fa2f98a3a8c96">AST_RTP_EXTENSION_DIRECTION_SENDONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00775">rtp_engine.h:775</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ae5fe3bd0559594353c0e168863d7b5a3"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ae5fe3bd0559594353c0e168863d7b5a3">ast_rtp_instance_extmap_clear</a></div><div class="ttdeci">void ast_rtp_instance_extmap_clear(struct ast_rtp_instance *instance)</div><div class="ttdoc">Clear negotiated RTP extension information. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00862">rtp_engine.c:862</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0a7eec86ca7aa6358db7f1f47ab1fe8ed1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a7eec86ca7aa6358db7f1f47ab1fe8ed1">AST_RTP_EXTENSION_DIRECTION_INACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00779">rtp_engine.h:779</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_adef7f9e182a2d5e45a570f990c7dc92f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#adef7f9e182a2d5e45a570f990c7dc92f">ast_rtp_instance_extmap_negotiate</a></div><div class="ttdeci">int ast_rtp_instance_extmap_negotiate(struct ast_rtp_instance *instance, int id, enum ast_rtp_extension_direction direction, const char *uri, const char *attributes)</div><div class="ttdoc">Negotiate received RTP extension information. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00818">rtp_engine.c:818</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0">ast_rtp_extension_direction</a></div><div class="ttdeci">ast_rtp_extension_direction</div><div class="ttdoc">Directions for RTP extensions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00769">rtp_engine.h:769</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a0d60b69da92022238da4440d7acdebb3">AST_RTP_EXTENSION_DIRECTION_SENDRECV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00773">rtp_engine.h:773</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_sip_session_media::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Media type of this session media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">res_pjsip_session.h:105</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="app__queue_8c_html_acd1f0e9b4730ec60f62cb0806cb06ef1"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a></div><div class="ttdeci">enum queue_result id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01507">app_queue.c:1507</a></div></div>
<div class="ttc" id="func__frame__drop_8c_html_a99f26e6ee9fcd62f75203b5402df8098"><div class="ttname"><a href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8b/func__frame__drop_8c_source.html#l00137">func_frame_drop.c:137</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abbba87a434910165fe4089a7784b15d0a85f05e5bc6cc29f9c2a1b12113280a52"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abbba87a434910165fe4089a7784b15d0a85f05e5bc6cc29f9c2a1b12113280a52">AST_RTP_EXTENSION_DIRECTION_RECVONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00777">rtp_engine.h:777</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a47ed0684ab00aa31b61c27ad7b56fb75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47ed0684ab00aa31b61c27ad7b56fb75">&#9670;&nbsp;</a></span>process_ice_attributes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void process_ice_attributes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_session *&#160;</td>
          <td class="paramname"><em>remote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>remote_stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function which processes ICE attributes in an audio stream. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00814">814</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00489">ast_rtp_engine_ice::add_remote_candidate</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00479">ast_rtp_engine_ice_candidate::address</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02898">ast_debug_ice</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00456">AST_RTP_ICE_CANDIDATE_TYPE_HOST</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00458">AST_RTP_ICE_CANDIDATE_TYPE_RELAYED</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00457">AST_RTP_ICE_CANDIDATE_TYPE_SRFLX</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00469">AST_RTP_ICE_ROLE_CONTROLLED</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00470">AST_RTP_ICE_ROLE_CONTROLLING</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02891">ast_rtp_instance_get_ice()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00475">ast_rtp_engine_ice_candidate::foundation</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00501">ast_rtp_engine_ice::ice_lite</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00697">ast_sip_media_rtp_configuration::ice_support</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00476">ast_rtp_engine_ice_candidate::id</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">PARSE_PORT_FORBID</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00478">ast_rtp_engine_ice_candidate::priority</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00480">ast_rtp_engine_ice_candidate::relay_address</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00101">ast_sip_session_media::remote_rtcp_mux</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00786">ast_sip_endpoint_media_configuration::rtcp_mux</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00487">ast_rtp_engine_ice::set_authentication</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00503">ast_rtp_engine_ice::set_role</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00491">ast_rtp_engine_ice::start</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00477">ast_rtp_engine_ice_candidate::transport</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00481">ast_rtp_engine_ice_candidate::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;{</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a> *ice;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keyword">const</span> pjmedia_sdp_attr *attr;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   <span class="keywordtype">char</span> attr_value[256];</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> attr_i;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   <span class="comment">/* If ICE support is not enabled or available exit early */</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#afc0a4cb1a5b0ecd8d4324bd8466788c2">ice_support</a> || !(ice = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>))) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   }</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE process attributes\n&quot;</span>, session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   attr = pjmedia_sdp_media_find_attr2(remote_stream, <span class="stringliteral">&quot;ice-ufrag&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <span class="keywordflow">if</span> (!attr) {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      attr = pjmedia_sdp_attr_find2(remote-&gt;attr_count, remote-&gt;attr, <span class="stringliteral">&quot;ice-ufrag&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   <span class="keywordflow">if</span> (attr) {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(attr_value, (pj_str_t*)&amp;attr-&gt;value, <span class="keyword">sizeof</span>(attr_value));</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a5d941ba857d4b650b574bb71c10633e3">set_authentication</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, attr_value, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE no, or invalid ice-ufrag\n&quot;</span>, session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   }</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   attr = pjmedia_sdp_media_find_attr2(remote_stream, <span class="stringliteral">&quot;ice-pwd&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   <span class="keywordflow">if</span> (!attr) {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      attr = pjmedia_sdp_attr_find2(remote-&gt;attr_count, remote-&gt;attr, <span class="stringliteral">&quot;ice-pwd&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   }</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <span class="keywordflow">if</span> (attr) {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(attr_value, (pj_str_t*)&amp;attr-&gt;value, <span class="keyword">sizeof</span>(attr_value));</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a5d941ba857d4b650b574bb71c10633e3">set_authentication</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, attr_value);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a>(2, <span class="stringliteral">&quot;(%p) ICE no, or invalid ice-pwd\n&quot;</span>, session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   }</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;   <span class="keywordflow">if</span> (pjmedia_sdp_media_find_attr2(remote_stream, <span class="stringliteral">&quot;ice-lite&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a182bf62ba81b9aa1ef9b30468b54e8fb">ice_lite</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   }</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   <span class="comment">/* Find all of the candidates */</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   <span class="keywordflow">for</span> (attr_i = 0; attr_i &lt; remote_stream-&gt;attr_count; ++attr_i) {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="keywordtype">char</span> foundation[33], transport[32], <a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>[PJ_INET6_ADDRSTRLEN + 1], cand_type[6], relay_address[PJ_INET6_ADDRSTRLEN + 1] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> port, relay_port = 0;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a> candidate = { 0, };</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      attr = remote_stream-&gt;attr[attr_i];</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="comment">/* If this is not a candidate line skip it */</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="keywordflow">if</span> (pj_strcmp2(&amp;attr-&gt;name, <span class="stringliteral">&quot;candidate&quot;</span>)) {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      }</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(attr_value, (pj_str_t*)&amp;attr-&gt;value, <span class="keyword">sizeof</span>(attr_value));</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="keywordflow">if</span> (sscanf(attr_value, <span class="stringliteral">&quot;%32s %30u %31s %30u %46s %30u typ %5s %*s %23s %*s %30u&quot;</span>, foundation, &amp;candidate.<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">id</a>, transport,</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;         (<span class="keywordtype">unsigned</span> *)&amp;candidate.<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>, address, &amp;port, cand_type, relay_address, &amp;relay_port) &lt; 7) {</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;         <span class="comment">/* Candidate did not parse properly */</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      }</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a86ef296f0f63688c8273119a2611f876">rtcp_mux</a> &amp;&amp; session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a6f7b8add12e23680b28e4b88f70a1a83">remote_rtcp_mux</a> &amp;&amp; candidate.<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">id</a> &gt; 1) {</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;         <span class="comment">/* Remote side may have offered RTP and RTCP candidates. However, if we&#39;re using RTCP MUX,</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">          * then we should ignore RTCP candidates.</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      candidate.<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">foundation</a> = <a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">foundation</a>;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      candidate.<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">transport</a> = <a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">transport</a>;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;candidate.<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>, address, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;candidate.<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">address</a>, port);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(cand_type, <span class="stringliteral">&quot;host&quot;</span>)) {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;         candidate.<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">type</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a5d902360d048d7e95d57908b9dcd6efb">AST_RTP_ICE_CANDIDATE_TYPE_HOST</a>;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(cand_type, <span class="stringliteral">&quot;srflx&quot;</span>)) {</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;         candidate.<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">type</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a2d979a962e90d81ad13ad8a12e7f26ae">AST_RTP_ICE_CANDIDATE_TYPE_SRFLX</a>;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(cand_type, <span class="stringliteral">&quot;relay&quot;</span>)) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;         candidate.<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">type</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a085c18dfb22d93242277f312fccaf9cb">AST_RTP_ICE_CANDIDATE_TYPE_RELAYED</a>;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      }</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(relay_address)) {</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;candidate.<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">relay_address</a>, relay_address, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>);</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      }</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      <span class="keywordflow">if</span> (relay_port) {</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;candidate.<a class="code" href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">relay_address</a>, relay_port);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      }</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a90085feb745721b26596e6142738bc1e">add_remote_candidate</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, &amp;candidate);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   }</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#af58e44433a3cc62c2051f3aa29415295">set_role</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, pjmedia_sdp_neg_was_answer_remote(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;neg) == PJ_TRUE ?</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba0a8d3389c5ab721fe23150a3d7f6da41">AST_RTP_ICE_ROLE_CONTROLLING</a> : <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba68f759b4c56106f7dbde793a886170d1">AST_RTP_ICE_ROLE_CONTROLLED</a>);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;   ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a615d95dd4609b2cfa36d6de12c548d7f">start</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_afc0a4cb1a5b0ecd8d4324bd8466788c2"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#afc0a4cb1a5b0ecd8d4324bd8466788c2">ast_sip_media_rtp_configuration::ice_support</a></div><div class="ttdeci">unsigned int ice_support</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00697">res_pjsip.h:697</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a86ef296f0f63688c8273119a2611f876"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a86ef296f0f63688c8273119a2611f876">ast_sip_endpoint_media_configuration::rtcp_mux</a></div><div class="ttdeci">unsigned int rtcp_mux</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00786">res_pjsip.h:786</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="f2c_8h_html_a27c1bdb0cba23a9db2a51eed7b3b2ac1"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a></div><div class="ttdeci">char * address</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00059">f2c.h:59</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a26e4699e53a894379aef105cdc12498e"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a></div><div class="ttdeci">struct ast_rtp_engine_ice * ast_rtp_instance_get_ice(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the ICE support present on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02891">rtp_engine.c:2891</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a90085feb745721b26596e6142738bc1e"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a90085feb745721b26596e6142738bc1e">ast_rtp_engine_ice::add_remote_candidate</a></div><div class="ttdeci">void(* add_remote_candidate)(struct ast_rtp_instance *instance, const struct ast_rtp_engine_ice_candidate *candidate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00489">rtp_engine.h:489</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">include/asterisk/config.h:1135</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html">ast_rtp_engine_ice_candidate</a></div><div class="ttdoc">Structure for an ICE candidate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00474">rtp_engine.h:474</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a830a6b4139e5b1b513777994b90b2a9c"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a830a6b4139e5b1b513777994b90b2a9c">ast_rtp_engine_ice_candidate::type</a></div><div class="ttdeci">enum ast_rtp_ice_candidate_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00481">rtp_engine.h:481</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a71306846ae998e6b08b66d54169cc2d4"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a71306846ae998e6b08b66d54169cc2d4">ast_rtp_engine_ice_candidate::relay_address</a></div><div class="ttdeci">struct ast_sockaddr relay_address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00480">rtp_engine.h:480</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a5d941ba857d4b650b574bb71c10633e3"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a5d941ba857d4b650b574bb71c10633e3">ast_rtp_engine_ice::set_authentication</a></div><div class="ttdeci">void(* set_authentication)(struct ast_rtp_instance *instance, const char *ufrag, const char *password)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00487">rtp_engine.h:487</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_af58e44433a3cc62c2051f3aa29415295"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#af58e44433a3cc62c2051f3aa29415295">ast_rtp_engine_ice::set_role</a></div><div class="ttdeci">void(* set_role)(struct ast_rtp_instance *instance, enum ast_rtp_ice_role role)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00503">rtp_engine.h:503</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4b2c296e98c6e45d3f102dcec2d248da"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4b2c296e98c6e45d3f102dcec2d248da">ast_rtp_engine_ice_candidate::id</a></div><div class="ttdeci">enum ast_rtp_ice_component_type id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00476">rtp_engine.h:476</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a83d758bec83d2a5d6af30efa7d0d7f84a2d979a962e90d81ad13ad8a12e7f26ae"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a2d979a962e90d81ad13ad8a12e7f26ae">AST_RTP_ICE_CANDIDATE_TYPE_SRFLX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00457">rtp_engine.h:457</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4a801f0d373475210a2d6ba3cfa9bb12"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4a801f0d373475210a2d6ba3cfa9bb12">ast_rtp_engine_ice_candidate::transport</a></div><div class="ttdeci">char * transport</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00477">rtp_engine.h:477</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaad9e84526c8d48bd3e980e732dd1f7df"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaad9e84526c8d48bd3e980e732dd1f7df">ast_debug_ice</a></div><div class="ttdeci">#define ast_debug_ice(sublevel,...)</div><div class="ttdoc">Log debug level ICE information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02898">rtp_engine.h:2898</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a615d95dd4609b2cfa36d6de12c548d7f"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a615d95dd4609b2cfa36d6de12c548d7f">ast_rtp_engine_ice::start</a></div><div class="ttdeci">void(* start)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00491">rtp_engine.h:491</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a4f20b037eb06eec1ae276f13beec7738"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a4f20b037eb06eec1ae276f13beec7738">ast_rtp_engine_ice_candidate::foundation</a></div><div class="ttdeci">char * foundation</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00475">rtp_engine.h:475</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0758b5402aff85ff35e08f7d482308fba0a8d3389c5ab721fe23150a3d7f6da41"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba0a8d3389c5ab721fe23150a3d7f6da41">AST_RTP_ICE_ROLE_CONTROLLING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00470">rtp_engine.h:470</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a83d758bec83d2a5d6af30efa7d0d7f84a5d902360d048d7e95d57908b9dcd6efb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a5d902360d048d7e95d57908b9dcd6efb">AST_RTP_ICE_CANDIDATE_TYPE_HOST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00456">rtp_engine.h:456</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a></div><div class="ttdoc">Structure that represents the optional ICE support within an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00485">rtp_engine.h:485</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a6f7b8add12e23680b28e4b88f70a1a83"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a6f7b8add12e23680b28e4b88f70a1a83">ast_sip_session_media::remote_rtcp_mux</a></div><div class="ttdeci">unsigned int remote_rtcp_mux</div><div class="ttdoc">Does remote support rtcp_mux. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00101">res_pjsip_session.h:101</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_a06332befc0224dfca0e6562d84f5df73"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#a06332befc0224dfca0e6562d84f5df73">ast_rtp_engine_ice_candidate::address</a></div><div class="ttdeci">struct ast_sockaddr address</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00479">rtp_engine.h:479</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice__candidate_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../dc/d40/structast__rtp__engine__ice__candidate.html#acec9ce2df15222151ad66fcb1d74eb9f">ast_rtp_engine_ice_candidate::priority</a></div><div class="ttdeci">int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00478">rtp_engine.h:478</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0758b5402aff85ff35e08f7d482308fba68f759b4c56106f7dbde793a886170d1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0758b5402aff85ff35e08f7d482308fba68f759b4c56106f7dbde793a886170d1">AST_RTP_ICE_ROLE_CONTROLLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00469">rtp_engine.h:469</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a83d758bec83d2a5d6af30efa7d0d7f84a085c18dfb22d93242277f312fccaf9cb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a83d758bec83d2a5d6af30efa7d0d7f84a085c18dfb22d93242277f312fccaf9cb">AST_RTP_ICE_CANDIDATE_TYPE_RELAYED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00458">rtp_engine.h:458</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a182bf62ba81b9aa1ef9b30468b54e8fb"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a182bf62ba81b9aa1ef9b30468b54e8fb">ast_rtp_engine_ice::ice_lite</a></div><div class="ttdeci">void(* ice_lite)(struct ast_rtp_instance *instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00501">rtp_engine.h:501</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8ee49b9d58fd68ef934b26d503238a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8ee49b9d58fd68ef934b26d503238a8">&#9670;&nbsp;</a></span>process_ice_auth_attrb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void process_ice_auth_attrb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_session *&#160;</td>
          <td class="paramname"><em>remote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>remote_stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00776">776</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02891">ast_rtp_instance_get_ice()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00697">ast_sip_media_rtp_configuration::ice_support</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00487">ast_rtp_engine_ice::set_authentication</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;{</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a> *ice;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   <span class="keyword">const</span> pjmedia_sdp_attr *ufrag_attr, *passwd_attr;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <span class="keywordtype">char</span> ufrag_attr_value[256];</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <span class="keywordtype">char</span> passwd_attr_value[256];</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <span class="comment">/* If ICE support is not enabled or available exit early */</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#afc0a4cb1a5b0ecd8d4324bd8466788c2">ice_support</a> || !(ice = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>))) {</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   }</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   ufrag_attr = pjmedia_sdp_media_find_attr2(remote_stream, <span class="stringliteral">&quot;ice-ufrag&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <span class="keywordflow">if</span> (!ufrag_attr) {</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      ufrag_attr = pjmedia_sdp_attr_find2(remote-&gt;attr_count, remote-&gt;attr, <span class="stringliteral">&quot;ice-ufrag&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   <span class="keywordflow">if</span> (ufrag_attr) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(ufrag_attr_value, (pj_str_t*)&amp;ufrag_attr-&gt;value, <span class="keyword">sizeof</span>(ufrag_attr_value));</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   }</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        passwd_attr = pjmedia_sdp_media_find_attr2(remote_stream, <span class="stringliteral">&quot;ice-pwd&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   <span class="keywordflow">if</span> (!passwd_attr) {</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      passwd_attr = pjmedia_sdp_attr_find2(remote-&gt;attr_count, remote-&gt;attr, <span class="stringliteral">&quot;ice-pwd&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   }</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   <span class="keywordflow">if</span> (passwd_attr) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(passwd_attr_value, (pj_str_t*)&amp;passwd_attr-&gt;value, <span class="keyword">sizeof</span>(passwd_attr_value));</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   }</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   <span class="keywordflow">if</span> (ufrag_attr &amp;&amp; passwd_attr) {</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a5d941ba857d4b650b574bb71c10633e3">set_authentication</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, ufrag_attr_value, passwd_attr_value);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_afc0a4cb1a5b0ecd8d4324bd8466788c2"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#afc0a4cb1a5b0ecd8d4324bd8466788c2">ast_sip_media_rtp_configuration::ice_support</a></div><div class="ttdeci">unsigned int ice_support</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00697">res_pjsip.h:697</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a26e4699e53a894379aef105cdc12498e"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a></div><div class="ttdeci">struct ast_rtp_engine_ice * ast_rtp_instance_get_ice(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the ICE support present on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02891">rtp_engine.c:2891</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a5d941ba857d4b650b574bb71c10633e3"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a5d941ba857d4b650b574bb71c10633e3">ast_rtp_engine_ice::set_authentication</a></div><div class="ttdeci">void(* set_authentication)(struct ast_rtp_instance *instance, const char *ufrag, const char *password)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00487">rtp_engine.h:487</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a></div><div class="ttdoc">Structure that represents the optional ICE support within an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00485">rtp_engine.h:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afdafeaf63c0f7a97f74001626aef9445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdafeaf63c0f7a97f74001626aef9445">&#9670;&nbsp;</a></span>process_ssrc_attributes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void process_ssrc_attributes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>remote_stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function which processes ssrc attributes in a stream. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01218">1218</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02446">ast_rtp_instance_get_stats()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03821">ast_rtp_instance_set_remote_ssrc()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00246">AST_RTP_INSTANCE_STAT_REMOTE_SSRC</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00792">ast_sip_endpoint_media_configuration::bundle</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00121">ast_sip_session_media::changed</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00424">ast_rtp_instance_stats::remote_ssrc</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;{</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a4b3a62121ed2ff9bebdfb879ad17cdef">bundle</a>) {</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   }</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; remote_stream-&gt;attr_count; ++index) {</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      pjmedia_sdp_attr *attr = remote_stream-&gt;attr[index];</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      <span class="keywordtype">char</span> attr_value[pj_strlen(&amp;attr-&gt;value) + 1];</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      <span class="keywordtype">char</span> *ssrc_attribute_name, *ssrc_attribute_value = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ssrc;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      <span class="comment">/* We only care about ssrc attributes */</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      <span class="keywordflow">if</span> (pj_strcmp2(&amp;attr-&gt;name, <span class="stringliteral">&quot;ssrc&quot;</span>)) {</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      }</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(attr_value, &amp;attr-&gt;value, <span class="keyword">sizeof</span>(attr_value));</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="keywordflow">if</span> ((ssrc_attribute_name = strchr(attr_value, <span class="charliteral">&#39; &#39;</span>))) {</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;         <span class="comment">/* This has an actual attribute */</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;         *ssrc_attribute_name++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;         ssrc_attribute_value = strchr(ssrc_attribute_name, <span class="charliteral">&#39;:&#39;</span>);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;         <span class="keywordflow">if</span> (ssrc_attribute_value) {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            <span class="comment">/* Values are actually optional according to the spec */</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            *ssrc_attribute_value++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;         }</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <span class="keywordflow">if</span> (sscanf(attr_value, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;ssrc) &lt; 1) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      }</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <span class="comment">/* If we are currently negotiating as a result of the remote side renegotiating then</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment">       * determine if the source for this stream has changed.</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      <span class="keywordflow">if</span> (pjmedia_sdp_neg_get_state(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;neg) == PJMEDIA_SDP_NEG_STATE_REMOTE_OFFER &amp;&amp;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;         session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>) {</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/db0/structast__rtp__instance__stats.html">ast_rtp_instance_stats</a> stats = { 0, };</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/dde/rtp__engine_8h.html#a82a029e03affad8a6e1b322c0b9fe2c3">ast_rtp_instance_get_stats</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, &amp;stats, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf9c51f48bae504be2f9af9f4e646533e">AST_RTP_INSTANCE_STAT_REMOTE_SSRC</a>) &amp;&amp;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            stats.<a class="code" href="../../d0/db0/structast__rtp__instance__stats.html#a052c95f741f3e25e6ab9217a01affb53">remote_ssrc</a> != ssrc) {</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#af28d4213d4bda49ab19d2451ec6da277">changed</a> = 1;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;         }</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      }</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a941a9378002f077f9fbd97da4eaee561">ast_rtp_instance_set_remote_ssrc</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, ssrc);</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;   }</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a52d18270f48752558c84d7760c82378faf9c51f48bae504be2f9af9f4e646533e"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a52d18270f48752558c84d7760c82378faf9c51f48bae504be2f9af9f4e646533e">AST_RTP_INSTANCE_STAT_REMOTE_SSRC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00246">rtp_engine.h:246</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a82a029e03affad8a6e1b322c0b9fe2c3"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a82a029e03affad8a6e1b322c0b9fe2c3">ast_rtp_instance_get_stats</a></div><div class="ttdeci">int ast_rtp_instance_get_stats(struct ast_rtp_instance *instance, struct ast_rtp_instance_stats *stats, enum ast_rtp_instance_stat stat)</div><div class="ttdoc">Retrieve statistics about an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02446">rtp_engine.c:2446</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a941a9378002f077f9fbd97da4eaee561"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a941a9378002f077f9fbd97da4eaee561">ast_rtp_instance_set_remote_ssrc</a></div><div class="ttdeci">void ast_rtp_instance_set_remote_ssrc(struct ast_rtp_instance *rtp, unsigned int ssrc)</div><div class="ttdoc">Set the remote SSRC for an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03821">rtp_engine.c:3821</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a4b3a62121ed2ff9bebdfb879ad17cdef"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a4b3a62121ed2ff9bebdfb879ad17cdef">ast_sip_endpoint_media_configuration::bundle</a></div><div class="ttdeci">unsigned int bundle</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00792">res_pjsip.h:792</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_af28d4213d4bda49ab19d2451ec6da277"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#af28d4213d4bda49ab19d2451ec6da277">ast_sip_session_media::changed</a></div><div class="ttdeci">unsigned int changed</div><div class="ttdoc">The underlying session has been changed in some fashion. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00121">res_pjsip_session.h:121</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html">ast_rtp_instance_stats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00366">rtp_engine.h:366</a></div></div>
<div class="ttc" id="structast__rtp__instance__stats_html_a052c95f741f3e25e6ab9217a01affb53"><div class="ttname"><a href="../../d0/db0/structast__rtp__instance__stats.html#a052c95f741f3e25e6ab9217a01affb53">ast_rtp_instance_stats::remote_ssrc</a></div><div class="ttdeci">unsigned int remote_ssrc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00424">rtp_engine.h:424</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a574de7d2ce47521615b33da5e774d20c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a574de7d2ce47521615b33da5e774d20c">&#9670;&nbsp;</a></span>rtp_check_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_check_timeout </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether RTP is being received or not. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00105">105</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/da3/causes_8h_source.html#l00124">AST_CAUSE_REQUESTED_CHAN_UNAVAIL</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00431">ast_channel_hangupcause_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02860">ast_debug_rtp</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00548">ast_rtp_instance_get_channel_id()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03768">ast_rtp_instance_get_last_rx()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02685">ast_rtp_instance_get_timeout()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02476">ast_softhangup()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01122">AST_SOFTHANGUP_DEV</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00081">ast_sip_session_media::direct_media_addr</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">ast_sip_session_media::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media = (<span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *)data;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp = session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   <span class="keywordtype">int</span> elapsed;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   <span class="keywordflow">if</span> (!rtp) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#aedb3ea08a82c48e8817dd7458319d22f">ast_rtp_instance_get_channel_id</a>(rtp));</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   <span class="comment">/* Get channel lock to make sure that we access a consistent set of values</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">    * (last_rx and direct_media_addr) - the lock is held when values are modified</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">    * (see send_direct_media_request()/check_for_rtp_changes() in chan_pjsip.c). We</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">    * are trying to avoid a situation where direct_media_addr has been reset but the</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">    * last-rx time was not set yet.</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   elapsed = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) - <a class="code" href="../../d5/dde/rtp__engine_8h.html#ab0b96e27f62f9b8279eafe463a5854aa">ast_rtp_instance_get_last_rx</a>(rtp);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   timeout = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a600efcadee5b02fc1715ea10e7bc30e0">ast_rtp_instance_get_timeout</a>(rtp);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   <span class="keywordflow">if</span> (elapsed &lt; timeout) {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordflow">return</span> (timeout - elapsed) * 1000;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   <span class="comment">/* Last RTP packet was received too long ago</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">    * - disconnect channel unless direct media is in use.</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">direct_media_addr</a>)) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(3, <span class="stringliteral">&quot;(%p) RTP not disconnecting channel &#39;%s&#39; for lack of %s RTP activity in %d seconds &quot;</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;         <span class="stringliteral">&quot;since direct media is in use\n&quot;</span>, rtp, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;         <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>), elapsed);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordflow">return</span> timeout * 1000; <span class="comment">/* recheck later, direct media may have ended then */</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Disconnecting channel &#39;%s&#39; for lack of %s RTP activity in %d seconds\n&quot;</span>,</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>), elapsed);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(chan, <a class="code" href="../../d4/da3/causes_8h.html#a7f49d27e9e3876fb4ccf1d139d31db73">AST_CAUSE_REQUESTED_CHAN_UNAVAIL</a>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_ab54fb097c283df49c3803d7bf416e51e"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">ast_sip_session_media::direct_media_addr</a></div><div class="ttdeci">struct ast_sockaddr direct_media_addr</div><div class="ttdoc">Direct media address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00081">res_pjsip_session.h:81</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="channel_8h_html_ae6b4b7ba458e88fdbb2df9f39d935337"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a></div><div class="ttdeci">void ast_channel_hangupcause_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00431">channel_internal_api.c:431</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a600efcadee5b02fc1715ea10e7bc30e0"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a600efcadee5b02fc1715ea10e7bc30e0">ast_rtp_instance_get_timeout</a></div><div class="ttdeci">int ast_rtp_instance_get_timeout(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the RTP timeout value. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02685">rtp_engine.c:2685</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01122">channel.h:1122</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aedb3ea08a82c48e8817dd7458319d22f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aedb3ea08a82c48e8817dd7458319d22f">ast_rtp_instance_get_channel_id</a></div><div class="ttdeci">const char * ast_rtp_instance_get_channel_id(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the unique ID of the channel that owns this RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00548">rtp_engine.c:548</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga669fb90e123085584d65608ef87b2fe4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a></div><div class="ttdeci">#define ast_debug_rtp(sublevel,...)</div><div class="ttdoc">Log debug level RTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02860">rtp_engine.h:2860</a></div></div>
<div class="ttc" id="channel_8h_html_ac2d6607253f7e8b272d4e845474eaa9b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a></div><div class="ttdeci">int ast_softhangup(struct ast_channel *chan, int reason)</div><div class="ttdoc">Softly hangup up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02476">channel.c:2476</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ab0b96e27f62f9b8279eafe463a5854aa"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ab0b96e27f62f9b8279eafe463a5854aa">ast_rtp_instance_get_last_rx</a></div><div class="ttdeci">time_t ast_rtp_instance_get_last_rx(const struct ast_rtp_instance *rtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03768">rtp_engine.c:3768</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="causes_8h_html_a7f49d27e9e3876fb4ccf1d139d31db73"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a7f49d27e9e3876fb4ccf1d139d31db73">AST_CAUSE_REQUESTED_CHAN_UNAVAIL</a></div><div class="ttdeci">#define AST_CAUSE_REQUESTED_CHAN_UNAVAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00124">causes.h:124</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_sip_session_media::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Media type of this session media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">res_pjsip_session.h:105</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a076f54688c6a58a291bec8e9d618ddfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a076f54688c6a58a291bec8e9d618ddfa">&#9670;&nbsp;</a></span>send_keepalive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_keepalive </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00071">71</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l02860">ast_debug_rtp</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02695">ast_rtp_instance_get_keepalive()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03758">ast_rtp_instance_get_last_tx()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02772">ast_rtp_instance_sendcng()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00081">ast_sip_session_media::direct_media_addr</a>, <a class="el" href="../../dd/d95/res__pktccops_8c_source.html#l00160">keepalive</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;{</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media = (<span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *) data;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp = session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d95/res__pktccops_8c.html#ad95867633821ba629487d16e630e2fd6">keepalive</a>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;   time_t interval;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a076f54688c6a58a291bec8e9d618ddfa">send_keepalive</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   <span class="keywordflow">if</span> (!rtp) {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   keepalive = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a57ccbb57bb92003f4944587b3b51f71f">ast_rtp_instance_get_keepalive</a>(rtp);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">direct_media_addr</a>)) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(3, <span class="stringliteral">&quot;(%p) RTP not sending keepalive since direct media is in use\n&quot;</span>, rtp);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordflow">return</span> keepalive * 1000;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;   }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   interval = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) - <a class="code" href="../../d5/dde/rtp__engine_8h.html#a71f6c74dc884b40dbbd1be4079e699de">ast_rtp_instance_get_last_tx</a>(rtp);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;   send_keepalive = interval &gt;= <a class="code" href="../../dd/d95/res__pktccops_8c.html#ad95867633821ba629487d16e630e2fd6">keepalive</a>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a>(3, <span class="stringliteral">&quot;(%p) RTP it has been %d seconds since RTP was last sent. %sending keepalive\n&quot;</span>,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      rtp, (<span class="keywordtype">int</span>) interval, send_keepalive ? <span class="stringliteral">&quot;S&quot;</span> : <span class="stringliteral">&quot;Not s&quot;</span>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   <span class="keywordflow">if</span> (send_keepalive) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a91283fc41fa9f913318befed94156e06">ast_rtp_instance_sendcng</a>(rtp, 0);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keywordflow">return</span> keepalive * 1000;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   <span class="keywordflow">return</span> (keepalive - interval) * 1000;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div><div class="ttc" id="structast__sip__session__media_html_ab54fb097c283df49c3803d7bf416e51e"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">ast_sip_session_media::direct_media_addr</a></div><div class="ttdeci">struct ast_sockaddr direct_media_addr</div><div class="ttdoc">Direct media address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00081">res_pjsip_session.h:81</a></div></div>
<div class="ttc" id="res__pktccops_8c_html_ad95867633821ba629487d16e630e2fd6"><div class="ttname"><a href="../../dd/d95/res__pktccops_8c.html#ad95867633821ba629487d16e630e2fd6">keepalive</a></div><div class="ttdeci">static uint32_t keepalive</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d95/res__pktccops_8c_source.html#l00160">res_pktccops.c:160</a></div></div>
<div class="ttc" id="structast__rtp__instance_html"><div class="ttname"><a href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00189">rtp_engine.c:189</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga669fb90e123085584d65608ef87b2fe4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga669fb90e123085584d65608ef87b2fe4">ast_debug_rtp</a></div><div class="ttdeci">#define ast_debug_rtp(sublevel,...)</div><div class="ttdoc">Log debug level RTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l02860">rtp_engine.h:2860</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a71f6c74dc884b40dbbd1be4079e699de"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a71f6c74dc884b40dbbd1be4079e699de">ast_rtp_instance_get_last_tx</a></div><div class="ttdeci">time_t ast_rtp_instance_get_last_tx(const struct ast_rtp_instance *rtp)</div><div class="ttdoc">Get the last RTP transmission time. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03758">rtp_engine.c:3758</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a91283fc41fa9f913318befed94156e06"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a91283fc41fa9f913318befed94156e06">ast_rtp_instance_sendcng</a></div><div class="ttdeci">int ast_rtp_instance_sendcng(struct ast_rtp_instance *instance, int level)</div><div class="ttdoc">Send a comfort noise packet to the RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02772">rtp_engine.c:2772</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a076f54688c6a58a291bec8e9d618ddfa"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a076f54688c6a58a291bec8e9d618ddfa">send_keepalive</a></div><div class="ttdeci">static int send_keepalive(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00071">res_pjsip_sdp_rtp.c:71</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a57ccbb57bb92003f4944587b3b51f71f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a57ccbb57bb92003f4944587b3b51f71f">ast_rtp_instance_get_keepalive</a></div><div class="ttdeci">int ast_rtp_instance_get_keepalive(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the RTP keepalive interval. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02695">rtp_engine.c:2695</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a48502a813f37eab1b8ec663f9e74491f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48502a813f37eab1b8ec663f9e74491f">&#9670;&nbsp;</a></span>set_caps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int set_caps </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media_transport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_offer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>asterisk_stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00485">485</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00407">apply_cap_to_bundled()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10746">ast_channel_is_bridged()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00637">ast_channel_nativeformats()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00677">ast_channel_nativeformats_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00856">ast_channel_readformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01028">ast_channel_set_unbridged_nolock()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01770">ast_dsp_free()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01764">ast_dsp_get_features()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01755">ast_dsp_set_features()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00417">ast_format_cap_get_best_by_type()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00630">ast_format_cap_get_compatible()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00438">ast_format_cap_get_framing()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00736">ast_format_cap_get_names()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00326">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00525">ast_format_cap_remove_by_type()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00716">AST_RTP_CODECS_NULL_INIT</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01580">ast_rtp_codecs_payload_formats()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01224">ast_rtp_codecs_payloads_copy()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00974">ast_rtp_codecs_payloads_destroy()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01257">ast_rtp_codecs_payloads_xover()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00152">AST_RTP_DTMF_MODE_RFC2833</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02137">ast_rtp_instance_dtmf_mode_get()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00727">ast_rtp_instance_get_codecs()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05849">ast_set_read_format()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05890">ast_set_write_format()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00419">AST_SIP_DTMF_AUTO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00421">AST_SIP_DTMF_AUTO_INFO</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00359">ast_sip_session_is_pending_stream_default()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00891">ast_sip_endpoint::asymmetric_rtp_codec</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00770">ast_sip_endpoint_media_configuration::codecs</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00081">ast_sip_session_media::direct_media_addr</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00203">ast_sip_session::direct_media_cap</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00213">ast_sip_session::dsp</a>, <a class="el" href="../../d3/d08/dsp_8h_source.html#l00028">DSP_FEATURE_DIGIT_DETECT</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00233">ast_sip_session::dtmf</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00315">get_codecs()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00889">ast_sip_endpoint::preferred_codec_only</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">ast_sip_session_media::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;{</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *, caps, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *, peer, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *, joint, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="code" href="../../d1/d94/sip_8h.html#a99c5ff7e5199a13ca4884062b413d68f">media_type</a> = session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> <a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#acf8c6052734fe4f28b036a92fa90dbdf">AST_RTP_CODECS_NULL_INIT</a>;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <span class="keywordtype">int</span> fmts = 0;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <span class="keywordtype">int</span> direct_media_enabled = !<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">direct_media_addr</a>) &amp;&amp;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aea104bc5edcb830fe465bc8a7f6aed45">direct_media_cap</a>);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="keywordtype">int</span> dsp_features = 0;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s %s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session), is_offer ? <span class="stringliteral">&quot;OFFER&quot;</span> : <span class="stringliteral">&quot;ANSWER&quot;</span>);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   <span class="keywordflow">if</span> (!(caps = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>)) ||</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;       !(peer = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>)) ||</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;       !(joint = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to allocate %s capabilities\n&quot;</span>,</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;         <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Couldn&#39;t create %s capabilities\n&quot;</span>,</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;         <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <span class="comment">/* get the endpoint capabilities */</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <span class="keywordflow">if</span> (direct_media_enabled) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a43950f716385bc78a73de04acd6a7eb4">ast_format_cap_get_compatible</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a250b131731bf019fe96a44c9473437f0">codecs</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aea104bc5edcb830fe465bc8a7f6aed45">direct_media_cap</a>, caps);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(caps, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a250b131731bf019fe96a44c9473437f0">codecs</a>, media_type);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   }</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="comment">/* get the capabilities on the peer */</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab2861164766b0414d2c61482a93ba182">get_codecs</a>(session, stream, &amp;codecs,  session_media);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5f8da197d19dc5ecd5457eed351f3311">ast_rtp_codecs_payload_formats</a>(&amp;codecs, peer, &amp;fmts);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   <span class="comment">/* get the joint capabilities between peer and endpoint */</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#a43950f716385bc78a73de04acd6a7eb4">ast_format_cap_get_compatible</a>(caps, peer, joint);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(joint)) {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *usbuf = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *thembuf = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a>(&amp;codecs);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;No joint capabilities for &#39;%s&#39; media stream between our configuration(%s) and incoming SDP(%s)\n&quot;</span>,</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;         <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>),</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(caps, &amp;usbuf),</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(peer, &amp;thembuf));</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;No joint capabilities for &#39;%s&#39; media stream between our configuration(%s) and incoming SDP(%s)\n&quot;</span>,</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;         <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>),</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(caps, &amp;usbuf),</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(peer, &amp;thembuf));</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   }</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <span class="keywordflow">if</span> (is_offer) {</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">       * Setup rx payload type mapping to prefer the mapping</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">       * from the peer that the RFC says we SHOULD use.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#afb3071f0aa39f4fccc54894395f73a62">ast_rtp_codecs_payloads_xover</a>(&amp;codecs, &amp;codecs, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4443e413dd03c219fb34bb17cc674cf5">ast_rtp_codecs_payloads_copy</a>(&amp;codecs, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>),</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6021b3388c8b6ebec52def7471de6bcf">apply_cap_to_bundled</a>(session_media, session_media_transport, asterisk_stream, joint);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a> &amp;&amp; <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a4d96ab8cbcc0f85012300573e3db2900">ast_sip_session_is_pending_stream_default</a>(session, asterisk_stream)) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a>(caps, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(caps, <a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>),</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;         <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a>(caps, media_type);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a65d1205823395f1a6c4f8c1af4d18a50">preferred_codec_only</a>){</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *preferred_fmt = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(joint, 0);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(caps, preferred_fmt, 0);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(preferred_fmt, -1);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#aeffc49850ee77c5042f350c013b6190a">asymmetric_rtp_codec</a>) {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *best;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">          * If we don&#39;t allow the sending codec to be changed on our side</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">          * then get the best codec from the joint capabilities of the media</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">          * type and use only that. This ensures the core won&#39;t start sending</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">          * out a format that we aren&#39;t currently sending.</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;         best = <a class="code" href="../../d0/d3c/format__cap_8h.html#aa9da4b15be2b49c8f511a579c4c44b63">ast_format_cap_get_best_by_type</a>(joint, media_type);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;         <span class="keywordflow">if</span> (best) {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(caps, best, <a class="code" href="../../d0/d3c/format__cap_8h.html#a3aaa13500c7e4dd3dad8e4c6afccbed3">ast_format_cap_get_framing</a>(joint));</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(best, -1);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;         }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(caps, joint, media_type);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">       * Apply the new formats to the channel, potentially changing</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">       * raw read/write formats and translation path while doing so.</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, caps);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">if</span> (media_type == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>));</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>));</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keywordflow">if</span> ( ((session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">dtmf</a> == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a>) || (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">dtmf</a> == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a>) )</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;          &amp;&amp; (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0cff5eb6a29ecb54fe5589a48556bfac">ast_rtp_instance_dtmf_mode_get</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea628d544911ab92fd7fc062b3ba184346">AST_RTP_DTMF_MODE_RFC2833</a>)</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;          &amp;&amp; (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>)) {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;         dsp_features = <a class="code" href="../../d3/d08/dsp_8h.html#a92238c472ae51a2926b51599108ab071">ast_dsp_get_features</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;         dsp_features &amp;= ~<a class="code" href="../../d3/d08/dsp_8h.html#a84818b360426bdd5f588cdca463e15be">DSP_FEATURE_DIGIT_DETECT</a>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;         <span class="keywordflow">if</span> (dsp_features) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <a class="code" href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>, dsp_features);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;         }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>)) {</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a175086606377b46d09f3f26a083416c5">ast_channel_set_unbridged_nolock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, 1);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      }</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a>(&amp;codecs);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a5f8da197d19dc5ecd5457eed351f3311"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5f8da197d19dc5ecd5457eed351f3311">ast_rtp_codecs_payload_formats</a></div><div class="ttdeci">void ast_rtp_codecs_payload_formats(struct ast_rtp_codecs *codecs, struct ast_format_cap *astformats, int *nonastformats)</div><div class="ttdoc">Retrieve all formats that were found. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01580">rtp_engine.c:1580</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a6021b3388c8b6ebec52def7471de6bcf"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a6021b3388c8b6ebec52def7471de6bcf">apply_cap_to_bundled</a></div><div class="ttdeci">static int apply_cap_to_bundled(struct ast_sip_session_media *session_media, struct ast_sip_session_media *session_media_transport, struct ast_stream *asterisk_stream, struct ast_format_cap *joint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00407">res_pjsip_sdp_rtp.c:407</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="format__cap_8h_html_a3aaa13500c7e4dd3dad8e4c6afccbed3"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a3aaa13500c7e4dd3dad8e4c6afccbed3">ast_format_cap_get_framing</a></div><div class="ttdeci">unsigned int ast_format_cap_get_framing(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the global framing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00438">format_cap.c:438</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_ab54fb097c283df49c3803d7bf416e51e"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">ast_sip_session_media::direct_media_addr</a></div><div class="ttdeci">struct ast_sockaddr direct_media_addr</div><div class="ttdoc">Direct media address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00081">res_pjsip_session.h:81</a></div></div>
<div class="ttc" id="sip_8h_html_a99c5ff7e5199a13ca4884062b413d68f"><div class="ttname"><a href="../../d1/d94/sip_8h.html#a99c5ff7e5199a13ca4884062b413d68f">media_type</a></div><div class="ttdeci">media_type</div><div class="ttdoc">Media types generate different &quot;dummy answers&quot; for not accepting the offer of a media stream...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00489">sip.h:489</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ab2861164766b0414d2c61482a93ba182"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab2861164766b0414d2c61482a93ba182">get_codecs</a></div><div class="ttdeci">static void get_codecs(struct ast_sip_session *session, const struct pjmedia_sdp_media *stream, struct ast_rtp_codecs *codecs, struct ast_sip_session_media *session_media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00315">res_pjsip_sdp_rtp.c:315</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a57a1e374549eb2705068688f4046db"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a></div><div class="ttdeci">void ast_dsp_free(struct ast_dsp *dsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01770">dsp.c:1770</a></div></div>
<div class="ttc" id="dsp_8h_html_a84818b360426bdd5f588cdca463e15be"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a84818b360426bdd5f588cdca463e15be">DSP_FEATURE_DIGIT_DETECT</a></div><div class="ttdeci">#define DSP_FEATURE_DIGIT_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00028">dsp.h:28</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0376aa2503a185437fab8cb0b7d674fb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * ast_rtp_instance_get_codecs(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the codecs structure of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00727">rtp_engine.c:727</a></div></div>
<div class="ttc" id="format__cap_8h_html_a035f4aa78f172a18311bfa15dd232c6f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a></div><div class="ttdeci">#define AST_FORMAT_CAP_NAMES_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00326">format_cap.h:326</a></div></div>
<div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_aeffc49850ee77c5042f350c013b6190a"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#aeffc49850ee77c5042f350c013b6190a">ast_sip_endpoint::asymmetric_rtp_codec</a></div><div class="ttdeci">unsigned int asymmetric_rtp_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00891">res_pjsip.h:891</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_afb3071f0aa39f4fccc54894395f73a62"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#afb3071f0aa39f4fccc54894395f73a62">ast_rtp_codecs_payloads_xover</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_xover(struct ast_rtp_codecs *src, struct ast_rtp_codecs *dest, struct ast_rtp_instance *instance)</div><div class="ttdoc">Crossover copy the tx payload mapping of src to the rx payload mapping of dest. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01257">rtp_engine.c:1257</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a250b131731bf019fe96a44c9473437f0"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a250b131731bf019fe96a44c9473437f0">ast_sip_endpoint_media_configuration::codecs</a></div><div class="ttdeci">struct ast_format_cap * codecs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00770">res_pjsip.h:770</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00421">res_pjsip.h:421</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="format__cap_8h_html_aa9da4b15be2b49c8f511a579c4c44b63"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aa9da4b15be2b49c8f511a579c4c44b63">ast_format_cap_get_best_by_type</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_best_by_type(const struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Get the most preferred format for a particular media type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00417">format_cap.c:417</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_acf8c6052734fe4f28b036a92fa90dbdf"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#acf8c6052734fe4f28b036a92fa90dbdf">AST_RTP_CODECS_NULL_INIT</a></div><div class="ttdeci">#define AST_RTP_CODECS_NULL_INIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00716">rtp_engine.h:716</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_aea104bc5edcb830fe465bc8a7f6aed45"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#aea104bc5edcb830fe465bc8a7f6aed45">ast_sip_session::direct_media_cap</a></div><div class="ttdeci">struct ast_format_cap * direct_media_cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00203">res_pjsip_session.h:203</a></div></div>
<div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9deccb020b39c3f7ac94b1af99cac5d"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">ast_sip_session::dsp</a></div><div class="ttdeci">struct ast_dsp * dsp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00213">res_pjsip_session.h:213</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="dsp_8h_html_a92238c472ae51a2926b51599108ab071"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a92238c472ae51a2926b51599108ab071">ast_dsp_get_features</a></div><div class="ttdeci">int ast_dsp_get_features(struct ast_dsp *dsp)</div><div class="ttdoc">Get features. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01764">dsp.c:1764</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a4d96ab8cbcc0f85012300573e3db2900"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a4d96ab8cbcc0f85012300573e3db2900">ast_sip_session_is_pending_stream_default</a></div><div class="ttdeci">int ast_sip_session_is_pending_stream_default(const struct ast_sip_session *session, const struct ast_stream *stream)</div><div class="ttdoc">Determines if a provided pending stream will be the default stream or not. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00359">res_pjsip_session.c:359</a></div></div>
<div class="ttc" id="channel_8h_html_a9107a83365cbf327cc0d12cb0dbd28d8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a></div><div class="ttdeci">int ast_set_read_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets read format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05849">channel.c:5849</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_a3c9c29fb2bc2b715fee335c1ffa50449"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a></div><div class="ttdeci">void ast_channel_nativeformats_set(struct ast_channel *chan, struct ast_format_cap *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00677">channel_internal_api.c:677</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="codec_8c_html_a26d06e92c695d54e16beb8070dc5461d"><div class="ttname"><a href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a></div><div class="ttdeci">static struct ao2_container * codecs</div><div class="ttdoc">Registered codecs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00048">codec.c:48</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="channel_8h_html_abbdfb98077180544657b2d16c5d25f74"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a></div><div class="ttdeci">int ast_set_write_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets write format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05890">channel.c:5890</a></div></div>
<div class="ttc" id="channel_8h_html_a175086606377b46d09f3f26a083416c5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a175086606377b46d09f3f26a083416c5">ast_channel_set_unbridged_nolock</a></div><div class="ttdeci">void ast_channel_set_unbridged_nolock(struct ast_channel *chan, int value)</div><div class="ttdoc">Variant of ast_channel_set_unbridged. Use this if the channel is already locked prior to calling...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01028">channel_internal_api.c:1028</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dc6fa9191c19396cfaa57113f5b4af2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a></div><div class="ttdeci">void ast_format_cap_remove_by_type(struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Remove all formats matching a specific format type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00525">format_cap.c:525</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3054d1eb4ca6e3e9bfd97bc54ff6e6eea628d544911ab92fd7fc062b3ba184346"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea628d544911ab92fd7fc062b3ba184346">AST_RTP_DTMF_MODE_RFC2833</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00152">rtp_engine.h:152</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structast__sip__session_html_abb7c899dc9afe319240163be2b213813"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">ast_sip_session::dtmf</a></div><div class="ttdeci">enum ast_sip_dtmf_mode dtmf</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00233">res_pjsip_session.h:233</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dff925fc9e3bb805b926d18447eb3eb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a></div><div class="ttdeci">const char * ast_format_cap_get_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Get the names of codecs of a set of formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00736">format_cap.c:736</a></div></div>
<div class="ttc" id="channel_8h_html_aa0a52e573af67cb0f29095177128d186"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a></div><div class="ttdeci">int ast_channel_is_bridged(const struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10746">channel.c:10746</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a65d1205823395f1a6c4f8c1af4d18a50"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a65d1205823395f1a6c4f8c1af4d18a50">ast_sip_endpoint::preferred_codec_only</a></div><div class="ttdeci">unsigned int preferred_codec_only</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00889">res_pjsip.h:889</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="dsp_8h_html_aedc7fa20fba91e3c018f6989e95c714b"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a></div><div class="ttdeci">void ast_dsp_set_features(struct ast_dsp *dsp, int features)</div><div class="ttdoc">Select feature set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01755">dsp.c:1755</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00419">res_pjsip.h:419</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0afb91e7a58d2fbac8e5febe0f94069b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_destroy(struct ast_rtp_codecs *codecs)</div><div class="ttdoc">Destroy the contents of an RTP codecs structure (but not the structure itself) </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00974">rtp_engine.c:974</a></div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="structast__rtp__codecs_html"><div class="ttname"><a href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00705">rtp_engine.h:705</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4443e413dd03c219fb34bb17cc674cf5"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4443e413dd03c219fb34bb17cc674cf5">ast_rtp_codecs_payloads_copy</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_copy(struct ast_rtp_codecs *src, struct ast_rtp_codecs *dest, struct ast_rtp_instance *instance)</div><div class="ttdoc">Copy payload information from one RTP instance to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01224">rtp_engine.c:1224</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_sip_session_media::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Media type of this session media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">res_pjsip_session.h:105</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0cff5eb6a29ecb54fe5589a48556bfac"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0cff5eb6a29ecb54fe5589a48556bfac">ast_rtp_instance_dtmf_mode_get</a></div><div class="ttdeci">enum ast_rtp_dtmf_mode ast_rtp_instance_dtmf_mode_get(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the DTMF mode of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02137">rtp_engine.c:2137</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a></div><div class="ttdeci">ast_media_type</div><div class="ttdoc">Types of media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00030">codec.h:30</a></div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
<div class="ttc" id="format__cap_8h_html_a43950f716385bc78a73de04acd6a7eb4"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a43950f716385bc78a73de04acd6a7eb4">ast_format_cap_get_compatible</a></div><div class="ttdeci">int ast_format_cap_get_compatible(const struct ast_format_cap *cap1, const struct ast_format_cap *cap2, struct ast_format_cap *result)</div><div class="ttdoc">Find the compatible formats between two capabilities structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00630">format_cap.c:630</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af0f3c0953aba91059ad040ae70e36d37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0f3c0953aba91059ad040ae70e36d37">&#9670;&nbsp;</a></span>set_ice_components()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_ice_components </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01181">1181</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02891">ast_rtp_instance_get_ice()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00509">ast_rtp_engine_ice::change_components</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00697">ast_sip_media_rtp_configuration::ice_support</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00101">ast_sip_session_media::remote_rtcp_mux</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00786">ast_sip_endpoint_media_configuration::rtcp_mux</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;{</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a> *ice;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;   ice = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#afc0a4cb1a5b0ecd8d4324bd8466788c2">ice_support</a> || !ice) {</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;   }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a86ef296f0f63688c8273119a2611f876">rtcp_mux</a> &amp;&amp; session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a6f7b8add12e23680b28e4b88f70a1a83">remote_rtcp_mux</a>) {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      <span class="comment">/* We both support RTCP mux. Only one ICE component necessary */</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a5c8a10cb1bfc8b9fc882eac1cb03adb9">change_components</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, 1);</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <span class="comment">/* They either don&#39;t support RTCP mux or we don&#39;t know if they do yet. */</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      ice-&gt;<a class="code" href="../../dd/d39/structast__rtp__engine__ice.html#a5c8a10cb1bfc8b9fc882eac1cb03adb9">change_components</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, 2);</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;   }</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_afc0a4cb1a5b0ecd8d4324bd8466788c2"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#afc0a4cb1a5b0ecd8d4324bd8466788c2">ast_sip_media_rtp_configuration::ice_support</a></div><div class="ttdeci">unsigned int ice_support</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00697">res_pjsip.h:697</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a86ef296f0f63688c8273119a2611f876"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a86ef296f0f63688c8273119a2611f876">ast_sip_endpoint_media_configuration::rtcp_mux</a></div><div class="ttdeci">unsigned int rtcp_mux</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00786">res_pjsip.h:786</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a26e4699e53a894379aef105cdc12498e"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a26e4699e53a894379aef105cdc12498e">ast_rtp_instance_get_ice</a></div><div class="ttdeci">struct ast_rtp_engine_ice * ast_rtp_instance_get_ice(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the ICE support present on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02891">rtp_engine.c:2891</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html_a5c8a10cb1bfc8b9fc882eac1cb03adb9"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html#a5c8a10cb1bfc8b9fc882eac1cb03adb9">ast_rtp_engine_ice::change_components</a></div><div class="ttdeci">void(* change_components)(struct ast_rtp_instance *instance, int num_components)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00509">rtp_engine.h:509</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="structast__rtp__engine__ice_html"><div class="ttname"><a href="../../dd/d39/structast__rtp__engine__ice.html">ast_rtp_engine_ice</a></div><div class="ttdoc">Structure that represents the optional ICE support within an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00485">rtp_engine.h:485</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a6f7b8add12e23680b28e4b88f70a1a83"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a6f7b8add12e23680b28e4b88f70a1a83">ast_sip_session_media::remote_rtcp_mux</a></div><div class="ttdeci">unsigned int remote_rtcp_mux</div><div class="ttdoc">Does remote support rtcp_mux. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00101">res_pjsip_session.h:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9125d77911b022cb2ad5fe08071b0d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9125d77911b022cb2ad5fe08071b0d9">&#9670;&nbsp;</a></span>set_incoming_call_offer_cap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a>* set_incoming_call_offer_cap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00438">438</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00746">ast_format_cap_empty()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00716">AST_RTP_CODECS_NULL_INIT</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01580">ast_rtp_codecs_payload_formats()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01224">ast_rtp_codecs_payloads_copy()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00974">ast_rtp_codecs_payloads_destroy()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01257">ast_rtp_codecs_payloads_xover()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00727">ast_rtp_instance_get_codecs()</a>, <a class="el" href="../../dc/d13/pjsip__session__caps_8c_source.html#l00151">ast_sip_session_create_joint_call_cap()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00315">get_codecs()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">ast_sip_session_media::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;{</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *incoming_call_offer_cap;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *remote;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> <a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#acf8c6052734fe4f28b036a92fa90dbdf">AST_RTP_CODECS_NULL_INIT</a>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   <span class="keywordtype">int</span> fmts = 0;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   remote = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   <span class="keywordflow">if</span> (!remote) {</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to allocate %s incoming remote capabilities\n&quot;</span>,</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Couldn&#39;t allocate caps\n&quot;</span>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   <span class="comment">/* Get the peer&#39;s capabilities*/</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab2861164766b0414d2c61482a93ba182">get_codecs</a>(session, stream, &amp;codecs, session_media);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5f8da197d19dc5ecd5457eed351f3311">ast_rtp_codecs_payload_formats</a>(&amp;codecs, remote, &amp;fmts);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   incoming_call_offer_cap = <a class="code" href="../../dd/d20/res__pjsip__session__caps_8h.html#ab89c1859e6c2aae6e84c9ed52955c8fb">ast_sip_session_create_joint_call_cap</a>(</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      session, session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>, remote);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(remote, -1);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keywordflow">if</span> (!incoming_call_offer_cap || <a class="code" href="../../d0/d3c/format__cap_8h.html#a09809d02373dbc26b136f52cc98f7513">ast_format_cap_empty</a>(incoming_call_offer_cap)) {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(incoming_call_offer_cap);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a>(&amp;codecs);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;No incoming call offer caps\n&quot;</span>);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">    * Setup rx payload type mapping to prefer the mapping</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">    * from the peer that the RFC says we SHOULD use.</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#afb3071f0aa39f4fccc54894395f73a62">ast_rtp_codecs_payloads_xover</a>(&amp;codecs, &amp;codecs, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4443e413dd03c219fb34bb17cc674cf5">ast_rtp_codecs_payloads_copy</a>(&amp;codecs,</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>), session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a>(&amp;codecs);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(incoming_call_offer_cap);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a5f8da197d19dc5ecd5457eed351f3311"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5f8da197d19dc5ecd5457eed351f3311">ast_rtp_codecs_payload_formats</a></div><div class="ttdeci">void ast_rtp_codecs_payload_formats(struct ast_rtp_codecs *codecs, struct ast_format_cap *astformats, int *nonastformats)</div><div class="ttdoc">Retrieve all formats that were found. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01580">rtp_engine.c:1580</a></div></div>
<div class="ttc" id="res__pjsip__session__caps_8h_html_ab89c1859e6c2aae6e84c9ed52955c8fb"><div class="ttname"><a href="../../dd/d20/res__pjsip__session__caps_8h.html#ab89c1859e6c2aae6e84c9ed52955c8fb">ast_sip_session_create_joint_call_cap</a></div><div class="ttdeci">struct ast_format_cap * ast_sip_session_create_joint_call_cap(const struct ast_sip_session *session, enum ast_media_type media_type, const struct ast_format_cap *remote)</div><div class="ttdoc">Create joint capabilities. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d13/pjsip__session__caps_8c_source.html#l00151">pjsip_session_caps.c:151</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ab2861164766b0414d2c61482a93ba182"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ab2861164766b0414d2c61482a93ba182">get_codecs</a></div><div class="ttdeci">static void get_codecs(struct ast_sip_session *session, const struct pjmedia_sdp_media *stream, struct ast_rtp_codecs *codecs, struct ast_sip_session_media *session_media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00315">res_pjsip_sdp_rtp.c:315</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0376aa2503a185437fab8cb0b7d674fb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * ast_rtp_instance_get_codecs(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the codecs structure of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00727">rtp_engine.c:727</a></div></div>
<div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_afb3071f0aa39f4fccc54894395f73a62"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#afb3071f0aa39f4fccc54894395f73a62">ast_rtp_codecs_payloads_xover</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_xover(struct ast_rtp_codecs *src, struct ast_rtp_codecs *dest, struct ast_rtp_instance *instance)</div><div class="ttdoc">Crossover copy the tx payload mapping of src to the rx payload mapping of dest. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01257">rtp_engine.c:1257</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_acf8c6052734fe4f28b036a92fa90dbdf"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#acf8c6052734fe4f28b036a92fa90dbdf">AST_RTP_CODECS_NULL_INIT</a></div><div class="ttdeci">#define AST_RTP_CODECS_NULL_INIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00716">rtp_engine.h:716</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="codec_8c_html_a26d06e92c695d54e16beb8070dc5461d"><div class="ttname"><a href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a></div><div class="ttdeci">static struct ao2_container * codecs</div><div class="ttdoc">Registered codecs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00048">codec.c:48</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0afb91e7a58d2fbac8e5febe0f94069b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_destroy(struct ast_rtp_codecs *codecs)</div><div class="ttdoc">Destroy the contents of an RTP codecs structure (but not the structure itself) </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00974">rtp_engine.c:974</a></div></div>
<div class="ttc" id="structast__rtp__codecs_html"><div class="ttname"><a href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00705">rtp_engine.h:705</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4443e413dd03c219fb34bb17cc674cf5"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4443e413dd03c219fb34bb17cc674cf5">ast_rtp_codecs_payloads_copy</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_copy(struct ast_rtp_codecs *src, struct ast_rtp_codecs *dest, struct ast_rtp_instance *instance)</div><div class="ttdoc">Copy payload information from one RTP instance to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01224">rtp_engine.c:1224</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_sip_session_media::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Media type of this session media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">res_pjsip_session.h:105</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="format__cap_8h_html_a09809d02373dbc26b136f52cc98f7513"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a09809d02373dbc26b136f52cc98f7513">ast_format_cap_empty</a></div><div class="ttdeci">int ast_format_cap_empty(const struct ast_format_cap *cap)</div><div class="ttdoc">Determine if a format cap has no formats in it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00746">format_cap.c:746</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed3debf741da696fdf32870b0b81ede8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed3debf741da696fdf32870b0b81ede8">&#9670;&nbsp;</a></span>setup_dtls_srtp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int setup_dtls_srtp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01023">1023</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d15/res__srtp_8h_source.html#l00059">AST_AES_CM_128_HMAC_SHA1_32</a>, <a class="el" href="../../de/d15/res__srtp_8h_source.html#l00058">AST_AES_CM_128_HMAC_SHA1_80</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03011">ast_rtp_instance_get_dtls()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00707">ast_sip_media_rtp_configuration::dtls_cfg</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00555">ast_rtp_dtls_cfg::enabled</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00572">ast_rtp_engine_dtls::set_configuration</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01004">setup_srtp()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00709">ast_sip_media_rtp_configuration::srtp_tag_32</a>, and <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00558">ast_rtp_dtls_cfg::suite</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01580">add_crypto_to_stream()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01154">setup_media_encryption()</a>.</p>
<div class="fragment"><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;{</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html">ast_rtp_engine_dtls</a> *dtls;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a1620b71d9db4f2ead2f871425256160f">dtls_cfg</a>.<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#a63be54a0beac1f5717217e1d9e629c71">enabled</a> || !session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;   }</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   dtls = <a class="code" href="../../d5/dde/rtp__engine_8h.html#abdcd28daa60406785f9f34af59a9951e">ast_rtp_instance_get_dtls</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;   <span class="keywordflow">if</span> (!dtls) {</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   }</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a1620b71d9db4f2ead2f871425256160f">dtls_cfg</a>.<a class="code" href="../../d4/dca/structast__rtp__dtls__cfg.html#abeb4b6b327b56a622037c2fae63adeab">suite</a> = ((session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#ace15b3670faea29a5fd4b9f7d89246fc">srtp_tag_32</a>) ? <a class="code" href="../../de/d15/res__srtp_8h.html#adc6141b2686d5575815ac5938eecb606a18639c7f72572ae21023a76ad8ec36b7">AST_AES_CM_128_HMAC_SHA1_32</a> : <a class="code" href="../../de/d15/res__srtp_8h.html#adc6141b2686d5575815ac5938eecb606a01497082a505f28b44550e051c01db16">AST_AES_CM_128_HMAC_SHA1_80</a>);</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   <span class="keywordflow">if</span> (dtls-&gt;<a class="code" href="../../d2/d49/structast__rtp__engine__dtls.html#a0bfcc94658a3213a7e7295e87b72618a">set_configuration</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, &amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a1620b71d9db4f2ead2f871425256160f">dtls_cfg</a>)) {</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Attempted to set an invalid DTLS-SRTP configuration on RTP instance &#39;%p&#39;\n&quot;</span>,</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;         session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   }</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a8e8ae929b42b9bf4de8f08c5e61946e7">setup_srtp</a>(session_media)) {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   }</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html_a0bfcc94658a3213a7e7295e87b72618a"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html#a0bfcc94658a3213a7e7295e87b72618a">ast_rtp_engine_dtls::set_configuration</a></div><div class="ttdeci">int(* set_configuration)(struct ast_rtp_instance *instance, const struct ast_rtp_dtls_cfg *dtls_cfg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00572">rtp_engine.h:572</a></div></div>
<div class="ttc" id="res__srtp_8h_html_adc6141b2686d5575815ac5938eecb606a01497082a505f28b44550e051c01db16"><div class="ttname"><a href="../../de/d15/res__srtp_8h.html#adc6141b2686d5575815ac5938eecb606a01497082a505f28b44550e051c01db16">AST_AES_CM_128_HMAC_SHA1_80</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/res__srtp_8h_source.html#l00058">res_srtp.h:58</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_a1620b71d9db4f2ead2f871425256160f"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#a1620b71d9db4f2ead2f871425256160f">ast_sip_media_rtp_configuration::dtls_cfg</a></div><div class="ttdeci">struct ast_rtp_dtls_cfg dtls_cfg</div><div class="ttdoc">DTLS-SRTP configuration information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00707">res_pjsip.h:707</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__srtp_8h_html_adc6141b2686d5575815ac5938eecb606a18639c7f72572ae21023a76ad8ec36b7"><div class="ttname"><a href="../../de/d15/res__srtp_8h.html#adc6141b2686d5575815ac5938eecb606a18639c7f72572ae21023a76ad8ec36b7">AST_AES_CM_128_HMAC_SHA1_32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d15/res__srtp_8h_source.html#l00059">res_srtp.h:59</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="structast__rtp__engine__dtls_html"><div class="ttname"><a href="../../d2/d49/structast__rtp__engine__dtls.html">ast_rtp_engine_dtls</a></div><div class="ttdoc">Structure that represents the optional DTLS SRTP support within an RTP engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00570">rtp_engine.h:570</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_a63be54a0beac1f5717217e1d9e629c71"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#a63be54a0beac1f5717217e1d9e629c71">ast_rtp_dtls_cfg::enabled</a></div><div class="ttdeci">unsigned int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00555">rtp_engine.h:555</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_abdcd28daa60406785f9f34af59a9951e"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#abdcd28daa60406785f9f34af59a9951e">ast_rtp_instance_get_dtls</a></div><div class="ttdeci">struct ast_rtp_engine_dtls * ast_rtp_instance_get_dtls(struct ast_rtp_instance *instance)</div><div class="ttdoc">Obtain a pointer to the DTLS support present on an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03011">rtp_engine.c:3011</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_ace15b3670faea29a5fd4b9f7d89246fc"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#ace15b3670faea29a5fd4b9f7d89246fc">ast_sip_media_rtp_configuration::srtp_tag_32</a></div><div class="ttdeci">unsigned int srtp_tag_32</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00709">res_pjsip.h:709</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a8e8ae929b42b9bf4de8f08c5e61946e7"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a8e8ae929b42b9bf4de8f08c5e61946e7">setup_srtp</a></div><div class="ttdeci">static int setup_srtp(struct ast_sip_session_media *session_media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01004">res_pjsip_sdp_rtp.c:1004</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="structast__rtp__dtls__cfg_html_abeb4b6b327b56a622037c2fae63adeab"><div class="ttname"><a href="../../d4/dca/structast__rtp__dtls__cfg.html#abeb4b6b327b56a622037c2fae63adeab">ast_rtp_dtls_cfg::suite</a></div><div class="ttdeci">enum ast_srtp_suite suite</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00558">rtp_engine.h:558</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6f9f30e53670bbbe6931012811f84b8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f9f30e53670bbbe6931012811f84b8e">&#9670;&nbsp;</a></span>setup_media_encryption()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int setup_media_encryption </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_session *&#160;</td>
          <td class="paramname"><em>sdp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01154">1154</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00512">AST_SIP_MEDIA_ENCRYPT_DTLS</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00508">AST_SIP_MEDIA_ENCRYPT_NONE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00510">AST_SIP_MEDIA_ENCRYPT_SDES</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00506">AST_SIP_MEDIA_TRANSPORT_INVALID</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00087">ast_sip_session_media::encryption</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01099">parse_dtls_attrib()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01023">setup_dtls_srtp()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01118">setup_sdes_srtp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;{</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   <span class="keywordflow">switch</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a947ba038dc2e3de1a3d4ce24e88da1d4">encryption</a>) {</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf">AST_SIP_MEDIA_ENCRYPT_SDES</a>:</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae9567bd2251ef74ed11031e5db48d7f4">setup_sdes_srtp</a>(session_media, stream)) {</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      }</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340afea01c037980f6a2fb8769078b5f3210">AST_SIP_MEDIA_ENCRYPT_DTLS</a>:</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aed3debf741da696fdf32870b0b81ede8">setup_dtls_srtp</a>(session, session_media)) {</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a95ebe26f28678a96a1fa1a8f248ee3a1">parse_dtls_attrib</a>(session_media, sdp, stream)) {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      }</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18">AST_SIP_MEDIA_TRANSPORT_INVALID</a>:</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a>:</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   }</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;}</div><div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a95ebe26f28678a96a1fa1a8f248ee3a1"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a95ebe26f28678a96a1fa1a8f248ee3a1">parse_dtls_attrib</a></div><div class="ttdeci">static int parse_dtls_attrib(struct ast_sip_session_media *session_media, const struct pjmedia_sdp_session *sdp, const struct pjmedia_sdp_media *stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01099">res_pjsip_sdp_rtp.c:1099</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a4680ecc1ce34fe999aed4aebfd769d18">AST_SIP_MEDIA_TRANSPORT_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00506">res_pjsip.h:506</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ae9567bd2251ef74ed11031e5db48d7f4"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ae9567bd2251ef74ed11031e5db48d7f4">setup_sdes_srtp</a></div><div class="ttdeci">static int setup_sdes_srtp(struct ast_sip_session_media *session_media, const struct pjmedia_sdp_media *stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01118">res_pjsip_sdp_rtp.c:1118</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340afea01c037980f6a2fb8769078b5f3210"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340afea01c037980f6a2fb8769078b5f3210">AST_SIP_MEDIA_ENCRYPT_DTLS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00512">res_pjsip.h:512</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_aed3debf741da696fdf32870b0b81ede8"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#aed3debf741da696fdf32870b0b81ede8">setup_dtls_srtp</a></div><div class="ttdeci">static int setup_dtls_srtp(struct ast_sip_session *session, struct ast_sip_session_media *session_media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01023">res_pjsip_sdp_rtp.c:1023</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a947ba038dc2e3de1a3d4ce24e88da1d4"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a947ba038dc2e3de1a3d4ce24e88da1d4">ast_sip_session_media::encryption</a></div><div class="ttdeci">enum ast_sip_session_media_encryption encryption</div><div class="ttdoc">What type of encryption is in use on this stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00087">res_pjsip_session.h:87</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00508">res_pjsip.h:508</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340a292c74ef93ad10fe50ab7ad466b971bf">AST_SIP_MEDIA_ENCRYPT_SDES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00510">res_pjsip.h:510</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae9567bd2251ef74ed11031e5db48d7f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9567bd2251ef74ed11031e5db48d7f4">&#9670;&nbsp;</a></span>setup_sdes_srtp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int setup_sdes_srtp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct pjmedia_sdp_media *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01118">1118</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d3c/sdp__srtp_8c_source.html#l00079">ast_sdp_crypto_process()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00258">ast_strndup</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01004">setup_srtp()</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00085">ast_sip_session_media::srtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01154">setup_media_encryption()</a>.</p>
<div class="fragment"><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;{</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; stream-&gt;attr_count; i++) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      pjmedia_sdp_attr *attr;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, crypto_str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      <span class="comment">/* check the stream for the required crypto attribute */</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      attr = stream-&gt;attr[i];</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <span class="keywordflow">if</span> (pj_strcmp2(&amp;attr-&gt;name, <span class="stringliteral">&quot;crypto&quot;</span>)) {</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      }</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      crypto_str = <a class="code" href="../../d8/d8a/astmm_8h.html#aa1202a8277cd3013d22535bf5bfe85fc">ast_strndup</a>(attr-&gt;value.ptr, attr-&gt;value.slen);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <span class="keywordflow">if</span> (!crypto_str) {</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      }</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a8e8ae929b42b9bf4de8f08c5e61946e7">setup_srtp</a>(session_media)) {</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      }</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/d5f/sdp__srtp_8h.html#a7ca7a0cfe890b94207db60cda60ee412">ast_sdp_crypto_process</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">srtp</a>, crypto_str)) {</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;         <span class="comment">/* found a valid crypto attribute */</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      }</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Ignoring crypto offer with unsupported parameters: %s\n&quot;</span>, crypto_str);</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   }</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   <span class="comment">/* no usable crypto attributes found */</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="sdp__srtp_8h_html_a7ca7a0cfe890b94207db60cda60ee412"><div class="ttname"><a href="../../de/d5f/sdp__srtp_8h.html#a7ca7a0cfe890b94207db60cda60ee412">ast_sdp_crypto_process</a></div><div class="ttdeci">int ast_sdp_crypto_process(struct ast_rtp_instance *rtp, struct ast_sdp_srtp *srtp, const char *attr)</div><div class="ttdoc">Parse the a=crypto line from SDP and set appropriate values on the ast_sdp_crypto struct...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3c/sdp__srtp_8c_source.html#l00079">sdp_srtp.c:79</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a2f87df48a0208ce2b1108d0135e09a72"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">ast_sip_session_media::srtp</a></div><div class="ttdeci">struct ast_sdp_srtp * srtp</div><div class="ttdoc">Holds SRTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00085">res_pjsip_session.h:85</a></div></div>
<div class="ttc" id="astmm_8h_html_aa1202a8277cd3013d22535bf5bfe85fc"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aa1202a8277cd3013d22535bf5bfe85fc">ast_strndup</a></div><div class="ttdeci">#define ast_strndup(str, len)</div><div class="ttdoc">A wrapper for strndup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00258">astmm.h:258</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a8e8ae929b42b9bf4de8f08c5e61946e7"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a8e8ae929b42b9bf4de8f08c5e61946e7">setup_srtp</a></div><div class="ttdeci">static int setup_srtp(struct ast_sip_session_media *session_media)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01004">res_pjsip_sdp_rtp.c:1004</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e8ae929b42b9bf4de8f08c5e61946e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e8ae929b42b9bf4de8f08c5e61946e7">&#9670;&nbsp;</a></span>setup_srtp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int setup_srtp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01004">1004</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d3c/sdp__srtp_8c_source.html#l00071">ast_sdp_crypto_alloc()</a>, <a class="el" href="../../d4/d3c/sdp__srtp_8c_source.html#l00041">ast_sdp_srtp_alloc()</a>, <a class="el" href="../../de/d5f/sdp__srtp_8h_source.html#l00039">ast_sdp_srtp::crypto</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00085">ast_sip_session_media::srtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01023">setup_dtls_srtp()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01118">setup_sdes_srtp()</a>.</p>
<div class="fragment"><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;{</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;   <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">srtp</a>) {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">srtp</a> = <a class="code" href="../../de/d5f/sdp__srtp_8h.html#a4dcb6159f49beb9265fab2665f9e0f24">ast_sdp_srtp_alloc</a>();</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">srtp</a>) {</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      }</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   }</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">srtp</a>-&gt;<a class="code" href="../../de/df7/structast__sdp__srtp.html#aab919b2d2e2dca3f96563bff742b50eb">crypto</a>) {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">srtp</a>-&gt;<a class="code" href="../../de/df7/structast__sdp__srtp.html#aab919b2d2e2dca3f96563bff742b50eb">crypto</a> = <a class="code" href="../../de/d5f/sdp__srtp_8h.html#a96525e5eecdbeb445811ee4116e12344">ast_sdp_crypto_alloc</a>();</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">srtp</a>-&gt;<a class="code" href="../../de/df7/structast__sdp__srtp.html#aab919b2d2e2dca3f96563bff742b50eb">crypto</a>) {</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      }</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   }</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;}</div><div class="ttc" id="structast__sdp__srtp_html_aab919b2d2e2dca3f96563bff742b50eb"><div class="ttname"><a href="../../de/df7/structast__sdp__srtp.html#aab919b2d2e2dca3f96563bff742b50eb">ast_sdp_srtp::crypto</a></div><div class="ttdeci">struct ast_sdp_crypto * crypto</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5f/sdp__srtp_8h_source.html#l00039">sdp_srtp.h:39</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a2f87df48a0208ce2b1108d0135e09a72"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a2f87df48a0208ce2b1108d0135e09a72">ast_sip_session_media::srtp</a></div><div class="ttdeci">struct ast_sdp_srtp * srtp</div><div class="ttdoc">Holds SRTP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00085">res_pjsip_session.h:85</a></div></div>
<div class="ttc" id="sdp__srtp_8h_html_a4dcb6159f49beb9265fab2665f9e0f24"><div class="ttname"><a href="../../de/d5f/sdp__srtp_8h.html#a4dcb6159f49beb9265fab2665f9e0f24">ast_sdp_srtp_alloc</a></div><div class="ttdeci">struct ast_sdp_srtp * ast_sdp_srtp_alloc(void)</div><div class="ttdoc">allocate a ast_sdp_srtp structure </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3c/sdp__srtp_8c_source.html#l00041">sdp_srtp.c:41</a></div></div>
<div class="ttc" id="sdp__srtp_8h_html_a96525e5eecdbeb445811ee4116e12344"><div class="ttname"><a href="../../de/d5f/sdp__srtp_8h.html#a96525e5eecdbeb445811ee4116e12344">ast_sdp_crypto_alloc</a></div><div class="ttdeci">struct ast_sdp_crypto * ast_sdp_crypto_alloc(void)</div><div class="ttdoc">Initialize an return an ast_sdp_crypto struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3c/sdp__srtp_8c_source.html#l00071">sdp_srtp.c:71</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9349d678033798a97d36347ca2b8611d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9349d678033798a97d36347ca2b8611d">&#9670;&nbsp;</a></span>stream_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stream_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function which destroys the RTP instance when session ends. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02264">2264</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00458">ast_rtp_instance_destroy()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02252">stream_stop()</a>.</p>
<div class="fragment"><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;{</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;   <span class="keywordflow">if</span> (session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a77b33cf320c08ec792cbf4ae66bee5bd">stream_stop</a>(session_media);</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0bfe6336fe7deb78148a84aef2732c7a">ast_rtp_instance_destroy</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;   }</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;   session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a77b33cf320c08ec792cbf4ae66bee5bd"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a77b33cf320c08ec792cbf4ae66bee5bd">stream_stop</a></div><div class="ttdeci">static void stream_stop(struct ast_sip_session_media *session_media)</div><div class="ttdoc">Function which stops the RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02252">res_pjsip_sdp_rtp.c:2252</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0bfe6336fe7deb78148a84aef2732c7a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0bfe6336fe7deb78148a84aef2732c7a">ast_rtp_instance_destroy</a></div><div class="ttdeci">int ast_rtp_instance_destroy(struct ast_rtp_instance *instance)</div><div class="ttdoc">Destroy an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00458">rtp_engine.c:458</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a77b33cf320c08ec792cbf4ae66bee5bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77b33cf320c08ec792cbf4ae66bee5bd">&#9670;&nbsp;</a></span>stream_stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stream_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function which stops the RTP instance. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02252">2252</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02183">ast_rtp_instance_stop()</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00091">ast_sip_session_media::keepalive_sched_id</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00093">ast_sip_session_media::timeout_sched_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02264">stream_destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;{</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;   <span class="keywordflow">if</span> (!session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;   }</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#af723510e5f7d3a2c82f5b9fe1e16802f">keepalive_sched_id</a>);</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a75b67fe2a02f4641321116ad6fa0253d">timeout_sched_id</a>);</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3978338bfe35df207f003782e428fb0c">ast_rtp_instance_stop</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;}</div><div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3978338bfe35df207f003782e428fb0c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3978338bfe35df207f003782e428fb0c">ast_rtp_instance_stop</a></div><div class="ttdeci">void ast_rtp_instance_stop(struct ast_rtp_instance *instance)</div><div class="ttdoc">Stop an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02183">rtp_engine.c:2183</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a75b67fe2a02f4641321116ad6fa0253d"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a75b67fe2a02f4641321116ad6fa0253d">ast_sip_session_media::timeout_sched_id</a></div><div class="ttdeci">int timeout_sched_id</div><div class="ttdoc">Scheduler ID for RTP timeout. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00093">res_pjsip_session.h:93</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_af723510e5f7d3a2c82f5b9fe1e16802f"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#af723510e5f7d3a2c82f5b9fe1e16802f">ast_sip_session_media::keepalive_sched_id</a></div><div class="ttdeci">int keepalive_sched_id</div><div class="ttdoc">Scheduler ID for RTP keepalive. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00091">res_pjsip_session.h:91</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unloads the sdp RTP/AVP module from Asterisk. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02324">2324</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/dbe/sched_8c_source.html#l00269">ast_sched_context_destroy()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00199">ast_sip_session_unregister_sdp_handler()</a>, <a class="el" href="../../d2/dc0/pjsip__session_8c_source.html#l00063">ast_sip_session_unregister_supplement()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00068">STR_AUDIO</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00069">STR_VIDEO</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02347">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;{</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a>(&amp;<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ada080d57bbae43f24e66d7de4aca5ff2">video_info_supplement</a>);</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a22d632ac85810d8394ad5d54b83a2f87">ast_sip_session_unregister_sdp_handler</a>(&amp;<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ac2060fea834f8cdd1ea3e9b35f8d27ec">video_sdp_handler</a>, <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a9b59532fce01bb95cfff01f4c0f69a58">STR_VIDEO</a>);</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a22d632ac85810d8394ad5d54b83a2f87">ast_sip_session_unregister_sdp_handler</a>(&amp;<a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a5ad742392f9dd49a29c4b9dceba3d08c">audio_sdp_handler</a>, <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a59e9debc727c9ce4219c74a4f3a942b8">STR_AUDIO</a>);</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/da0/structsched.html">sched</a>) {</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;   }</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;}</div><div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a9b59532fce01bb95cfff01f4c0f69a58"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a9b59532fce01bb95cfff01f4c0f69a58">STR_VIDEO</a></div><div class="ttdeci">static const char STR_VIDEO[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00069">res_pjsip_sdp_rtp.c:69</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aae89632996ffdcf888ab251c14dc6cdb"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a></div><div class="ttdeci">void ast_sip_session_unregister_supplement(struct ast_sip_session_supplement *supplement)</div><div class="ttdoc">Unregister a an supplement to SIP session processing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc0/pjsip__session_8c_source.html#l00063">pjsip_session.c:63</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ac2060fea834f8cdd1ea3e9b35f8d27ec"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ac2060fea834f8cdd1ea3e9b35f8d27ec">video_sdp_handler</a></div><div class="ttdeci">static struct ast_sip_session_sdp_handler video_sdp_handler</div><div class="ttdoc">SDP handler for &amp;#39;video&amp;#39; media stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02285">res_pjsip_sdp_rtp.c:2285</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ada080d57bbae43f24e66d7de4aca5ff2"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ada080d57bbae43f24e66d7de4aca5ff2">video_info_supplement</a></div><div class="ttdeci">static struct ast_sip_session_supplement video_info_supplement</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02318">res_pjsip_sdp_rtp.c:2318</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a22d632ac85810d8394ad5d54b83a2f87"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a22d632ac85810d8394ad5d54b83a2f87">ast_sip_session_unregister_sdp_handler</a></div><div class="ttdeci">void ast_sip_session_unregister_sdp_handler(struct ast_sip_session_sdp_handler *handler, const char *stream_type)</div><div class="ttdoc">Unregister an SDP handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00199">res_pjsip_session.c:199</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a5ad742392f9dd49a29c4b9dceba3d08c"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a5ad742392f9dd49a29c4b9dceba3d08c">audio_sdp_handler</a></div><div class="ttdeci">static struct ast_sip_session_sdp_handler audio_sdp_handler</div><div class="ttdoc">SDP handler for &amp;#39;audio&amp;#39; media stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02274">res_pjsip_sdp_rtp.c:2274</a></div></div>
<div class="ttc" id="res__pjsip__sdp__rtp_8c_html_a59e9debc727c9ce4219c74a4f3a942b8"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#a59e9debc727c9ce4219c74a4f3a942b8">STR_AUDIO</a></div><div class="ttdeci">static const char STR_AUDIO[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00068">res_pjsip_sdp_rtp.c:68</a></div></div>
<div class="ttc" id="sched_8h_html_a862f869d056628b38e09042f21b54413"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a></div><div class="ttdeci">void ast_sched_context_destroy(struct ast_sched_context *c)</div><div class="ttdoc">destroys a schedule context </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00269">sched.c:269</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad846446d4c3522a13ead769801bddd14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad846446d4c3522a13ead769801bddd14">&#9670;&nbsp;</a></span>video_info_incoming_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int video_info_incoming_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02295">2295</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">AST_CONTROL_VIDUPDATE</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01231">ast_queue_control()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05259">ast_sip_is_content_type()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;{</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;   <span class="keyword">struct </span>pjsip_transaction *tsx;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   pjsip_tx_data *tdata;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a></div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;      || !<a class="code" href="../../d8/d8c/res__pjsip_8h.html#ae47a39537fdf10ceba2fad9d9c380179">ast_sip_is_content_type</a>(&amp;rdata-&gt;msg_info.msg-&gt;body-&gt;content_type,</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;         <span class="stringliteral">&quot;application&quot;</span>,</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;         <span class="stringliteral">&quot;media_control+xml&quot;</span>)) {</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;   }</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;   tsx = pjsip_rdata_get_tsx(rdata);</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a>);</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;   <span class="keywordflow">if</span> (pjsip_dlg_create_response(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;dlg, rdata, 200, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;tdata) == PJ_SUCCESS) {</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      pjsip_dlg_send_response(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;dlg, tsx, tdata);</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;   }</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;}</div><div class="ttc" id="channel_8h_html_a60f9d2b0ab8b7a839902313321163b28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a></div><div class="ttdeci">int ast_queue_control(struct ast_channel *chan, enum ast_control_frame_type control)</div><div class="ttdoc">Queue a control frame without payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01231">channel.c:1231</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ae47a39537fdf10ceba2fad9d9c380179"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ae47a39537fdf10ceba2fad9d9c380179">ast_sip_is_content_type</a></div><div class="ttdeci">int ast_sip_is_content_type(pjsip_media_type *content_type, char *type, char *subtype)</div><div class="ttdoc">Checks if the given content type matches type/subtype. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05259">res_pjsip.c:5259</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">include/asterisk/frame.h:295</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;PJSIP SDP <a class="el" href="../../d1/d94/sip_8h.html#ad5ec12ad08cacd2598d873052c72857a">RTP</a>/AVP stream <a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_CHANNEL_DRIVER, .requires = &quot;res_pjsip,res_pjsip_session&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02390">2390</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

</div>
</div>
<a id="abe01dad064469f433db45f3841501e9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe01dad064469f433db45f3841501e9d">&#9670;&nbsp;</a></span>address_rtp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> address_rtp</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Address for RTP. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00066">66</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00228">create_rtp()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02347">load_module()</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02390">2390</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

</div>
</div>
<a id="a5ad742392f9dd49a29c4b9dceba3d08c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ad742392f9dd49a29c4b9dceba3d08c">&#9670;&nbsp;</a></span>audio_sdp_handler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/d29/structast__sip__session__sdp__handler.html">ast_sip_session_sdp_handler</a> audio_sdp_handler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SDP handler for 'audio' media stream. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02274">2274</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

</div>
</div>
<a id="a361b448e9abcfc301602a2573a662d3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a361b448e9abcfc301602a2573a662d3c">&#9670;&nbsp;</a></span>sched</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a>* <a class="el" href="../../d0/da0/structsched.html">sched</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scheduler for RTCP purposes. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00063">63</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

</div>
</div>
<a id="a59e9debc727c9ce4219c74a4f3a942b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59e9debc727c9ce4219c74a4f3a942b8">&#9670;&nbsp;</a></span>STR_AUDIO</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char STR_AUDIO[] = &quot;audio&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00068">68</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02347">load_module()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02324">unload_module()</a>.</p>

</div>
</div>
<a id="a9b59532fce01bb95cfff01f4c0f69a58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b59532fce01bb95cfff01f4c0f69a58">&#9670;&nbsp;</a></span>STR_VIDEO</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char STR_VIDEO[] = &quot;video&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00069">69</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02347">load_module()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02324">unload_module()</a>.</p>

</div>
</div>
<a id="ada080d57bbae43f24e66d7de4aca5ff2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada080d57bbae43f24e66d7de4aca5ff2">&#9670;&nbsp;</a></span>video_info_supplement</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a> video_info_supplement</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .method = <span class="stringliteral">&quot;INFO&quot;</span>,</div><div class="line">   .incoming_request = <a class="code" href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ad846446d4c3522a13ead769801bddd14">video_info_incoming_request</a>,</div><div class="line">}</div><div class="ttc" id="res__pjsip__sdp__rtp_8c_html_ad846446d4c3522a13ead769801bddd14"><div class="ttname"><a href="../../d5/d82/res__pjsip__sdp__rtp_8c.html#ad846446d4c3522a13ead769801bddd14">video_info_incoming_request</a></div><div class="ttdeci">static int video_info_incoming_request(struct ast_sip_session *session, struct pjsip_rx_data *rdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02295">res_pjsip_sdp_rtp.c:2295</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02318">2318</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

</div>
</div>
<a id="ac2060fea834f8cdd1ea3e9b35f8d27ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2060fea834f8cdd1ea3e9b35f8d27ec">&#9670;&nbsp;</a></span>video_sdp_handler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/d29/structast__sip__session__sdp__handler.html">ast_sip_session_sdp_handler</a> video_sdp_handler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SDP handler for 'video' media stream. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02285">2285</a> of file <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html">res_pjsip_sdp_rtp.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:34 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
