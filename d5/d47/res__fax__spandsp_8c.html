<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_fax_spandsp.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_fax_spandsp.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Spandsp T.38 and G.711 FAX Resource.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d8c/logger_8h_source.html">asterisk/logger.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d90/strings_8h_source.html">asterisk/strings.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d41/timing_8h_source.html">asterisk/timing.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d6a/res__fax_8h_source.html">asterisk/res_fax.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d1c/format__cache_8h_source.html">asterisk/format_cache.h</a>&quot;</code><br />
<code>#include &lt;spandsp.h&gt;</code><br />
<code>#include &lt;spandsp/version.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_fax_spandsp.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/dc9/res__fax__spandsp_8c__incl.png" border="0" usemap="#res__fax__spandsp_8c" alt=""/></div>
<map name="res__fax__spandsp_8c" id="res__fax__spandsp_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="2221,229,2305,256"/>
<area shape="rect" id="node16" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="343,603,470,629"/>
<area shape="rect" id="node18" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="245,155,381,181"/>
<area shape="rect" id="node19" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="665,229,780,256"/>
<area shape="rect" id="node26" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="767,304,897,331"/>
<area shape="rect" id="node27" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1186,379,1321,405"/>
<area shape="rect" id="node29" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1097,229,1199,256"/>
<area shape="rect" id="node30" href="../../db/d41/timing_8h.html" title="Timing source management. " alt="" coords="1331,80,1459,107"/>
<area shape="rect" id="node31" href="../../db/d6a/res__fax_8h.html" title="asterisk/res_fax.h" alt="" coords="1019,80,1154,107"/>
<area shape="rect" id="node35" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1719,80,1857,107"/>
<area shape="rect" id="node48" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="2549,80,2725,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="1419,752,1573,779"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="1514,453,1651,480"/>
<area shape="rect" id="node15" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="2195,304,2330,331"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="1423,827,1569,853"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1150,603,1293,629"/>
<area shape="rect" id="node17" href="../../d7/d5b/options_8h.html" title="Options provided by main asterisk program. " alt="" coords="339,677,474,704"/>
<area shape="rect" id="node20" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="921,304,1060,331"/>
<area shape="rect" id="node21" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1465,603,1527,629"/>
<area shape="rect" id="node23" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="781,528,894,555"/>
<area shape="rect" id="node24" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="545,304,692,331"/>
<area shape="rect" id="node25" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="204,304,361,331"/>
<area shape="rect" id="node22" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="669,677,816,704"/>
<area shape="rect" id="node28" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1287,453,1438,480"/>
<area shape="rect" id="node32" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1771,229,1898,256"/>
<area shape="rect" id="node33" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="927,229,1073,256"/>
<area shape="rect" id="node34" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1494,304,1645,331"/>
<area shape="rect" id="node36" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="760,155,904,181"/>
<area shape="rect" id="node37" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="2234,155,2393,181"/>
<area shape="rect" id="node38" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="2417,155,2581,181"/>
<area shape="rect" id="node39" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="1821,379,1968,405"/>
<area shape="rect" id="node40" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="558,155,685,181"/>
<area shape="rect" id="node41" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="2605,155,2712,181"/>
<area shape="rect" id="node42" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="2737,155,2898,181"/>
<area shape="rect" id="node43" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="2923,155,3093,181"/>
<area shape="rect" id="node44" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="2094,155,2210,181"/>
<area shape="rect" id="node45" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="1709,155,1867,181"/>
<area shape="rect" id="node46" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="928,155,1053,181"/>
<area shape="rect" id="node47" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1534,155,1685,181"/>
</map>
</div>
</div>
<p><a href="../../d5/d47/res__fax__spandsp_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dbe/structspandsp__pvt_1_1frame__queue.html">spandsp_pvt::frame_queue</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/df2/structspandsp__fax__stats.html">spandsp_fax_stats</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa836e459bb9e806a058d3189a8d70a08"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#aa836e459bb9e806a058d3189a8d70a08">ASTMM_LIBC</a>&#160;&#160;&#160;<a class="el" href="../../d8/d8a/astmm_8h.html#a61e59448d12de6d9245b9c5484e4c96c">ASTMM_IGNORE</a></td></tr>
<tr class="separator:aa836e459bb9e806a058d3189a8d70a08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7fd98ac3a6b6d9a649dc1a7df2e6b25"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#ac7fd98ac3a6b6d9a649dc1a7df2e6b25">SPANDSP_ENGAGE_UDPTL_NAT_RETRY</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:ac7fd98ac3a6b6d9a649dc1a7df2e6b25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dbcfe9986d8f3d4d39f3e395fc96c0c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a4dbcfe9986d8f3d4d39f3e395fc96c0c">SPANDSP_EXPOSE_INTERNAL_STRUCTURES</a></td></tr>
<tr class="separator:a4dbcfe9986d8f3d4d39f3e395fc96c0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26afae7dd9d256776976330e21298e68"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a26afae7dd9d256776976330e21298e68">SPANDSP_FAX_SAMPLES</a>&#160;&#160;&#160;160</td></tr>
<tr class="separator:a26afae7dd9d256776976330e21298e68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9865dea3c8d3c70c21e466560f339210"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a9865dea3c8d3c70c21e466560f339210">SPANDSP_FAX_TIMER_RATE</a>&#160;&#160;&#160;8000 / <a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a26afae7dd9d256776976330e21298e68">SPANDSP_FAX_SAMPLES</a>	/* 50 ticks per second, 20ms, 160 samples per second */</td></tr>
<tr class="separator:a9865dea3c8d3c70c21e466560f339210"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="memdesc:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">load res_fax_spandsp  <a href="#ac3382bf6da54c56b37069bd76bbdf4f9">More...</a><br /></td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26dae05b6eb59eb758e6bf0f55b6e396"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a26dae05b6eb59eb758e6bf0f55b6e396">session_destroy</a> (struct <a class="el" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p)</td></tr>
<tr class="separator:a26dae05b6eb59eb758e6bf0f55b6e396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4ab2698fa08f5133c8241c9d2c3bfa4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#ae4ab2698fa08f5133c8241c9d2c3bfa4">set_ecm</a> (t30_state_t *t30_state, struct <a class="el" href="../../d8/dc2/structast__fax__session__details.html">ast_fax_session_details</a> *details)</td></tr>
<tr class="separator:ae4ab2698fa08f5133c8241c9d2c3bfa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fa4f4dc494fc66a1764e00783006b75"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a5fa4f4dc494fc66a1764e00783006b75">set_file</a> (t30_state_t *t30_state, struct <a class="el" href="../../d8/dc2/structast__fax__session__details.html">ast_fax_session_details</a> *details)</td></tr>
<tr class="separator:a5fa4f4dc494fc66a1764e00783006b75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a985020177397f3b53f8c375b9f5555a9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a985020177397f3b53f8c375b9f5555a9">set_local_info</a> (t30_state_t *t30_state, struct <a class="el" href="../../d8/dc2/structast__fax__session__details.html">ast_fax_session_details</a> *details)</td></tr>
<tr class="separator:a985020177397f3b53f8c375b9f5555a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a848b476ce6571398d94f5eb74f3182"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a7a848b476ce6571398d94f5eb74f3182">set_logging</a> (logging_state_t *<a class="el" href="../../d4/d88/structstate.html">state</a>, struct <a class="el" href="../../d8/dc2/structast__fax__session__details.html">ast_fax_session_details</a> *details)</td></tr>
<tr class="separator:a7a848b476ce6571398d94f5eb74f3182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaae8190167c94ac97553e0377398eb6c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#aaae8190167c94ac97553e0377398eb6c">spandsp_fax_cancel</a> (struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s)</td></tr>
<tr class="separator:aaae8190167c94ac97553e0377398eb6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83441be7baa98d2b8382dc027a8f2dee"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a83441be7baa98d2b8382dc027a8f2dee">spandsp_fax_cli_show_capabilities</a> (int fd)</td></tr>
<tr class="separator:a83441be7baa98d2b8382dc027a8f2dee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a193ec436c3481c1121eb872cd2e9ad0d"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a193ec436c3481c1121eb872cd2e9ad0d">spandsp_fax_cli_show_session</a> (struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s, int fd)</td></tr>
<tr class="separator:a193ec436c3481c1121eb872cd2e9ad0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb07657df8ed42dd62966c531f1bee62"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#acb07657df8ed42dd62966c531f1bee62">spandsp_fax_cli_show_settings</a> (int fd)</td></tr>
<tr class="memdesc:acb07657df8ed42dd62966c531f1bee62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Show res_fax_spandsp settings.  <a href="#acb07657df8ed42dd62966c531f1bee62">More...</a><br /></td></tr>
<tr class="separator:acb07657df8ed42dd62966c531f1bee62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a632e62933ba50a9269eeeede6e8db7e5"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a632e62933ba50a9269eeeede6e8db7e5">spandsp_fax_cli_show_stats</a> (int fd)</td></tr>
<tr class="separator:a632e62933ba50a9269eeeede6e8db7e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff3bb506c68bf48a84a242b915c91758"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#aff3bb506c68bf48a84a242b915c91758">spandsp_fax_destroy</a> (struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s)</td></tr>
<tr class="memdesc:aff3bb506c68bf48a84a242b915c91758"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a spandsp fax session.  <a href="#aff3bb506c68bf48a84a242b915c91758">More...</a><br /></td></tr>
<tr class="separator:aff3bb506c68bf48a84a242b915c91758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad19e873d8a667de24f4cb593a05b45fb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#ad19e873d8a667de24f4cb593a05b45fb">spandsp_fax_gateway_cleanup</a> (struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s)</td></tr>
<tr class="memdesc:ad19e873d8a667de24f4cb593a05b45fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">gather data and clean up after gateway ends  <a href="#ad19e873d8a667de24f4cb593a05b45fb">More...</a><br /></td></tr>
<tr class="separator:ad19e873d8a667de24f4cb593a05b45fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8162670509872b734477d174e39a073e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a8162670509872b734477d174e39a073e">spandsp_fax_gateway_process</a> (struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s, const struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</td></tr>
<tr class="memdesc:a8162670509872b734477d174e39a073e"><td class="mdescLeft">&#160;</td><td class="mdescRight">process a frame from the bridge  <a href="#a8162670509872b734477d174e39a073e">More...</a><br /></td></tr>
<tr class="separator:a8162670509872b734477d174e39a073e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca5062a395eb7c74d0109ba1f4d11b89"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#aca5062a395eb7c74d0109ba1f4d11b89">spandsp_fax_gateway_start</a> (struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s)</td></tr>
<tr class="memdesc:aca5062a395eb7c74d0109ba1f4d11b89"><td class="mdescLeft">&#160;</td><td class="mdescRight">activate a spandsp gateway based on the information in the given fax session  <a href="#aca5062a395eb7c74d0109ba1f4d11b89">More...</a><br /></td></tr>
<tr class="separator:aca5062a395eb7c74d0109ba1f4d11b89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7634e872ab24fc86bb8237a6d2f4463"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#ad7634e872ab24fc86bb8237a6d2f4463">spandsp_fax_gw_gen_alloc</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, void *params)</td></tr>
<tr class="memdesc:ad7634e872ab24fc86bb8237a6d2f4463"><td class="mdescLeft">&#160;</td><td class="mdescRight">simple routine to allocate data to generator  <a href="#ad7634e872ab24fc86bb8237a6d2f4463">More...</a><br /></td></tr>
<tr class="separator:ad7634e872ab24fc86bb8237a6d2f4463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7ba83daf725125984d525ed1d2461cc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#ad7ba83daf725125984d525ed1d2461cc">spandsp_fax_gw_gen_release</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, void *data)</td></tr>
<tr class="separator:ad7ba83daf725125984d525ed1d2461cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe4b8983331a6ebf8b794f6cdb318b2f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#afe4b8983331a6ebf8b794f6cdb318b2f">spandsp_fax_gw_t30_gen</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, void *data, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, int samples)</td></tr>
<tr class="memdesc:afe4b8983331a6ebf8b794f6cdb318b2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">generate T.30 packets sent to the T.30 leg of gateway  <a href="#afe4b8983331a6ebf8b794f6cdb318b2f">More...</a><br /></td></tr>
<tr class="separator:afe4b8983331a6ebf8b794f6cdb318b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6db78b000e8a71a5d7f7efba26639e41"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a6db78b000e8a71a5d7f7efba26639e41">spandsp_fax_new</a> (struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s, struct ast_fax_tech_token *token)</td></tr>
<tr class="memdesc:a6db78b000e8a71a5d7f7efba26639e41"><td class="mdescLeft">&#160;</td><td class="mdescRight">create an instance of the spandsp tech_pvt for a fax session  <a href="#a6db78b000e8a71a5d7f7efba26639e41">More...</a><br /></td></tr>
<tr class="separator:a6db78b000e8a71a5d7f7efba26639e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b40a2b701ed0e7b0486409c8e3bc03f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a7b40a2b701ed0e7b0486409c8e3bc03f">spandsp_fax_read</a> (struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s)</td></tr>
<tr class="memdesc:a7b40a2b701ed0e7b0486409c8e3bc03f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a frame from the spandsp fax stack.  <a href="#a7b40a2b701ed0e7b0486409c8e3bc03f">More...</a><br /></td></tr>
<tr class="separator:a7b40a2b701ed0e7b0486409c8e3bc03f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8ab5a74bae7f83dd7cad98eb9deeb98"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#ae8ab5a74bae7f83dd7cad98eb9deeb98">spandsp_fax_start</a> (struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s)</td></tr>
<tr class="separator:ae8ab5a74bae7f83dd7cad98eb9deeb98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41b864f49450e34700ff878ffc337192"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a41b864f49450e34700ff878ffc337192">spandsp_fax_switch_to_t38</a> (struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s)</td></tr>
<tr class="separator:a41b864f49450e34700ff878ffc337192"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed0bd5d9c0943587312263618faaf6c3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#aed0bd5d9c0943587312263618faaf6c3">spandsp_fax_write</a> (struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s, const struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</td></tr>
<tr class="memdesc:aed0bd5d9c0943587312263618faaf6c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a frame to the spandsp fax stack.  <a href="#aed0bd5d9c0943587312263618faaf6c3">More...</a><br /></td></tr>
<tr class="separator:aed0bd5d9c0943587312263618faaf6c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1358377ae5cb4e9a6f1b2f03c5555b0e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a1358377ae5cb4e9a6f1b2f03c5555b0e">spandsp_log</a> (int level, const char *msg)</td></tr>
<tr class="memdesc:a1358377ae5cb4e9a6f1b2f03c5555b0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send spandsp log messages to asterisk.  <a href="#a1358377ae5cb4e9a6f1b2f03c5555b0e">More...</a><br /></td></tr>
<tr class="separator:a1358377ae5cb4e9a6f1b2f03c5555b0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46ff23b63408b9b6d29a0ed01cdb424d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a46ff23b63408b9b6d29a0ed01cdb424d">spandsp_manager_fax_session</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const char *id_text, struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>)</td></tr>
<tr class="separator:a46ff23b63408b9b6d29a0ed01cdb424d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a727760f4638f2c84101218ce5e89d567"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a727760f4638f2c84101218ce5e89d567">spandsp_modems</a> (struct <a class="el" href="../../d8/dc2/structast__fax__session__details.html">ast_fax_session_details</a> *details)</td></tr>
<tr class="separator:a727760f4638f2c84101218ce5e89d567"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addd7277ae067b27b98632539c158c6bf"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#addd7277ae067b27b98632539c158c6bf">spandsp_v21_cleanup</a> (struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s)</td></tr>
<tr class="separator:addd7277ae067b27b98632539c158c6bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaa7af133c27e45f416759d9552f0775"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#adaa7af133c27e45f416759d9552f0775">spandsp_v21_detect</a> (struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s, const struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</td></tr>
<tr class="separator:adaa7af133c27e45f416759d9552f0775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac663d21c565affc72b520a9581181897"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#ac663d21c565affc72b520a9581181897">spandsp_v21_new</a> (struct <a class="el" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p)</td></tr>
<tr class="separator:ac663d21c565affc72b520a9581181897"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42d6e20cfd39f4a22d9ea31270f45ebf"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a42d6e20cfd39f4a22d9ea31270f45ebf">spandsp_v21_tone</a> (void *data, int code, int level, int delay)</td></tr>
<tr class="separator:a42d6e20cfd39f4a22d9ea31270f45ebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12890f182233a7dfd042518081c71cce"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a12890f182233a7dfd042518081c71cce">t30_phase_e_handler</a> (t30_state_t *t30_state, void *data, int completion_code)</td></tr>
<tr class="memdesc:a12890f182233a7dfd042518081c71cce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Phase E handler callback.  <a href="#a12890f182233a7dfd042518081c71cce">More...</a><br /></td></tr>
<tr class="separator:a12890f182233a7dfd042518081c71cce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24efd6f18c67b0deb9973607e23f2bac"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a24efd6f18c67b0deb9973607e23f2bac">t38_tx_packet_handler</a> (t38_core_state_t *t38_core_state, void *data, const uint8_t *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, int count)</td></tr>
<tr class="separator:a24efd6f18c67b0deb9973607e23f2bac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="memdesc:ad09fa931f468002152a3cc2d5ce25eae"><td class="mdescLeft">&#160;</td><td class="mdescRight">unload res_fax_spandsp  <a href="#ad09fa931f468002152a3cc2d5ce25eae">More...</a><br /></td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf5e0a963a0c910f4affa63d1ba1353e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#adf5e0a963a0c910f4affa63d1ba1353e">update_stats</a> (struct <a class="el" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p, int completion_code)</td></tr>
<tr class="separator:adf5e0a963a0c910f4affa63d1ba1353e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a54af2a9b29d140908cc9dffd0618951b">AST_MODFLAG_DEFAULT</a> , .description = &quot;Spandsp G.711 and T.38 FAX Technologies&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_EXTENDED, .load = load_module, .unload = unload_module, .enhances = &quot;res_fax&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2519968d99ee93a67244dd8c53a92dad"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d0e/structast__fax__tech.html">ast_fax_tech</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a2519968d99ee93a67244dd8c53a92dad">spandsp_fax_tech</a></td></tr>
<tr class="separator:a2519968d99ee93a67244dd8c53a92dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a589319dce057e148f17f370ca3ba2a95"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:a28cf77eecd22cd8b53d3ec4e967c13c2"><td class="memItemLeft" >&#160;&#160;&#160;struct <a class="el" href="../../dd/df2/structspandsp__fax__stats.html">spandsp_fax_stats</a>&#160;&#160;&#160;<a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a28cf77eecd22cd8b53d3ec4e967c13c2">g711</a></td></tr>
<tr class="separator:a28cf77eecd22cd8b53d3ec4e967c13c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf04f66344e3fb0a6f6a69bf39d19902"><td class="memItemLeft" >&#160;&#160;&#160;<a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;&#160;&#160;<a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></td></tr>
<tr class="separator:adf04f66344e3fb0a6f6a69bf39d19902"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae948616ce1a6c11f9ffebbdd0239aa6f"><td class="memItemLeft" >&#160;&#160;&#160;struct <a class="el" href="../../dd/df2/structspandsp__fax__stats.html">spandsp_fax_stats</a>&#160;&#160;&#160;<a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#ae948616ce1a6c11f9ffebbdd0239aa6f">t38</a></td></tr>
<tr class="separator:ae948616ce1a6c11f9ffebbdd0239aa6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a589319dce057e148f17f370ca3ba2a95"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a></td></tr>
<tr class="separator:a589319dce057e148f17f370ca3ba2a95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Spandsp T.38 and G.711 FAX Resource. </p>
<dl class="section author"><dt>Author</dt><dd>Matthew Nicholson <a href="#" onclick="location.href='mai'+'lto:'+'mni'+'ch'+'ols'+'on'+'@di'+'gi'+'um.'+'co'+'m'; return false;">mnich<span style="display: none;">.nosp@m.</span>olso<span style="display: none;">.nosp@m.</span>n@dig<span style="display: none;">.nosp@m.</span>ium.<span style="display: none;">.nosp@m.</span>com</a> </dd>
<dd>
Gregory H. Nietsky <a href="#" onclick="location.href='mai'+'lto:'+'gre'+'go'+'ry@'+'di'+'str'+'ot'+'ech'+'.c'+'o.z'+'a'; return false;">grego<span style="display: none;">.nosp@m.</span>ry@d<span style="display: none;">.nosp@m.</span>istro<span style="display: none;">.nosp@m.</span>tech<span style="display: none;">.nosp@m.</span>.co.z<span style="display: none;">.nosp@m.</span>a</a></dd></dl>
<p>This module registers the Spandsp FAX technology with the res_fax module. </p>

<p class="definition">Definition in file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa836e459bb9e806a058d3189a8d70a08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa836e459bb9e806a058d3189a8d70a08">&#9670;&nbsp;</a></span>ASTMM_LIBC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASTMM_LIBC&#160;&#160;&#160;<a class="el" href="../../d8/d8a/astmm_8h.html#a61e59448d12de6d9245b9c5484e4c96c">ASTMM_IGNORE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00052">52</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

</div>
</div>
<a id="ac7fd98ac3a6b6d9a649dc1a7df2e6b25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7fd98ac3a6b6d9a649dc1a7df2e6b25">&#9670;&nbsp;</a></span>SPANDSP_ENGAGE_UDPTL_NAT_RETRY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPANDSP_ENGAGE_UDPTL_NAT_RETRY&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00072">72</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00813">spandsp_fax_gateway_start()</a>.</p>

</div>
</div>
<a id="a4dbcfe9986d8f3d4d39f3e395fc96c0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dbcfe9986d8f3d4d39f3e395fc96c0c">&#9670;&nbsp;</a></span>SPANDSP_EXPOSE_INTERNAL_STRUCTURES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPANDSP_EXPOSE_INTERNAL_STRUCTURES</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00066">66</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

</div>
</div>
<a id="a26afae7dd9d256776976330e21298e68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26afae7dd9d256776976330e21298e68">&#9670;&nbsp;</a></span>SPANDSP_FAX_SAMPLES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPANDSP_FAX_SAMPLES&#160;&#160;&#160;160</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00070">70</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00622">spandsp_fax_read()</a>.</p>

</div>
</div>
<a id="a9865dea3c8d3c70c21e466560f339210"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9865dea3c8d3c70c21e466560f339210">&#9670;&nbsp;</a></span>SPANDSP_FAX_TIMER_RATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPANDSP_FAX_TIMER_RATE&#160;&#160;&#160;8000 / <a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a26afae7dd9d256776976330e21298e68">SPANDSP_FAX_SAMPLES</a>	/* 50 ticks per second, 20ms, 160 samples per second */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00071">71</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00929">spandsp_fax_start()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01270">1270</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01270">1270</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01270">1270</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>load res_fax_spandsp </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01249">1249</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d60/res__fax_8c_source.html#l00974">ast_fax_tech_register()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00315">AST_MODFLAG_DEFAULT</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00122">AST_MODULE_SUPPORT_EXTENDED</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00245">ast_fax_tech::module</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00342">ast_module_info::self</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01241">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;{</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;<a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.lock);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a2519968d99ee93a67244dd8c53a92dad">spandsp_fax_tech</a>.<a class="code" href="../../d9/d0e/structast__fax__tech.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">module</a> = <a class="code" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>-&gt;<a class="code" href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">self</a>;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/d6a/res__fax_8h.html#aa1e6a64120757501a2e6a1a076e070ff">ast_fax_tech_register</a>(&amp;<a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a2519968d99ee93a67244dd8c53a92dad">spandsp_fax_tech</a>) &lt; 0) {</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;failed to register FAX technology\n&quot;</span>);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   }</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;   <span class="comment">/* prevent logging to stderr */</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;   span_set_message_handler(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a589319dce057e148f17f370ca3ba2a95"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a></div><div class="ttdeci">static struct @462 spandsp_global_stats</div></div>
<div class="ttc" id="structast__module__info_html"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html">ast_module_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00336">module.h:336</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a2519968d99ee93a67244dd8c53a92dad"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a2519968d99ee93a67244dd8c53a92dad">spandsp_fax_tech</a></div><div class="ttdeci">static struct ast_fax_tech spandsp_fax_tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00095">res_fax_spandsp.c:95</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__module__info_html_a1aff0615d43e1dfa5c72c1c7d1c6d709"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">ast_module_info::self</a></div><div class="ttdeci">struct ast_module * self</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00342">module.h:342</a></div></div>
<div class="ttc" id="structast__fax__tech_html_a8637433cfbb88aeb10ce2ed5dcba0eb1"><div class="ttname"><a href="../../d9/d0e/structast__fax__tech.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">ast_fax_tech::module</a></div><div class="ttdeci">struct ast_module * module</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00245">res_fax.h:245</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="res__fax_8h_html_aa1e6a64120757501a2e6a1a076e070ff"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#aa1e6a64120757501a2e6a1a076e070ff">ast_fax_tech_register</a></div><div class="ttdeci">int ast_fax_tech_register(struct ast_fax_tech *tech)</div><div class="ttdoc">register a fax technology </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d60/res__fax_8c_source.html#l00974">res_fax.c:974</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a26dae05b6eb59eb758e6bf0f55b6e396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26dae05b6eb59eb758e6bf0f55b6e396">&#9670;&nbsp;</a></span>session_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void session_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00180">180</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../d3/d62/timing_8c_source.html#l00154">ast_timer_close()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00150">spandsp_pvt::fax_state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00148">spandsp_pvt::isdone</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">spandsp_pvt::ist38</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d70/structspandsp__pvt.html#a2ae422e03f0063ccdd76b75bad9624ec">spandsp_pvt::read_frames</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00152">spandsp_pvt::t30_state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00151">spandsp_pvt::t38_state</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00160">spandsp_pvt::timer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00603">spandsp_fax_destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   t30_state_t *t30_to_terminate;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      t30_to_terminate = p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">ist38</a>) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">#if SPANDSP_RELEASE_DATE &gt;= 20080725</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      t30_to_terminate = &amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">t38_state</a>.t30;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      t30_to_terminate = &amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">t38_state</a>.t30_state;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="preprocessor">#if SPANDSP_RELEASE_DATE &gt;= 20080725</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      t30_to_terminate = &amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">fax_state</a>.t30;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      t30_to_terminate = &amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">fax_state</a>.t30_state;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   t30_terminate(t30_to_terminate);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#af2bd73f7c4fe9e40a5d5cb75dcbca598">isdone</a> = 1;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <a class="code" href="../../db/d41/timing_8h.html#a2a5968baf9962dedeeda855fd5ed9c75">ast_timer_close</a>(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9aed6490b63794e6c9c00af4533f255f">timer</a>);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9aed6490b63794e6c9c00af4533f255f">timer</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   fax_release(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">fax_state</a>);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   t38_terminal_release(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">t38_state</a>);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <span class="keywordflow">while</span> ((f = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2ae422e03f0063ccdd76b75bad9624ec">read_frames</a>, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>))) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div><div class="ttc" id="structspandsp__pvt_html_aa32b12a7baab4b773f3aee19dc640fdb"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">spandsp_pvt::t38_state</a></div><div class="ttdeci">t38_terminal_state_t t38_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00151">res_fax_spandsp.c:151</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a9aed6490b63794e6c9c00af4533f255f"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a9aed6490b63794e6c9c00af4533f255f">spandsp_pvt::timer</a></div><div class="ttdeci">struct ast_timer * timer</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00160">res_fax_spandsp.c:160</a></div></div>
<div class="ttc" id="timing_8h_html_a2a5968baf9962dedeeda855fd5ed9c75"><div class="ttname"><a href="../../db/d41/timing_8h.html#a2a5968baf9962dedeeda855fd5ed9c75">ast_timer_close</a></div><div class="ttdeci">void ast_timer_close(struct ast_timer *handle)</div><div class="ttdoc">Close an opened timing handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00154">timing.c:154</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a9e04fe7f94b31b90af8617c4114973c6"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">spandsp_pvt::ist38</a></div><div class="ttdeci">unsigned int ist38</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">res_fax_spandsp.c:147</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a2ae422e03f0063ccdd76b75bad9624ec"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a2ae422e03f0063ccdd76b75bad9624ec">spandsp_pvt::read_frames</a></div><div class="ttdeci">struct spandsp_pvt::frame_queue read_frames</div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_af2bd73f7c4fe9e40a5d5cb75dcbca598"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#af2bd73f7c4fe9e40a5d5cb75dcbca598">spandsp_pvt::isdone</a></div><div class="ttdeci">unsigned int isdone</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00148">res_fax_spandsp.c:148</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_adcd6f30baf585999693211a967c2db61"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">spandsp_pvt::t30_state</a></div><div class="ttdeci">t30_state_t * t30_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00152">res_fax_spandsp.c:152</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a6209294447011868d1a0ec7373bb90b5"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">spandsp_pvt::fax_state</a></div><div class="ttdeci">fax_state_t fax_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00150">res_fax_spandsp.c:150</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4ab2698fa08f5133c8241c9d2c3bfa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4ab2698fa08f5133c8241c9d2c3bfa4">&#9670;&nbsp;</a></span>set_ecm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_ecm </td>
          <td>(</td>
          <td class="paramtype">t30_state_t *&#160;</td>
          <td class="paramname"><em>t30_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/dc2/structast__fax__session__details.html">ast_fax_session_details</a> *&#160;</td>
          <td class="paramname"><em>details</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00479">479</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00153">ast_fax_session_details::ecm</a>, and <a class="el" href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">ast_fax_session_details::option</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00929">spandsp_fax_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;{</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   t30_set_ecm_capability(t30_state, details-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">option</a>.<a class="code" href="../../d8/dc2/structast__fax__session__details.html#af766692698b742acddbc42494d323a9f">ecm</a>);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   t30_set_supported_compressions(t30_state, T30_SUPPORT_T4_1D_COMPRESSION | T30_SUPPORT_T4_2D_COMPRESSION | T30_SUPPORT_T6_COMPRESSION);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div><div class="ttc" id="structast__fax__session__details_html_a3ab211dbe8780b7292257f6b3dba1952"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">ast_fax_session_details::option</a></div><div class="ttdeci">union ast_fax_session_details::@290 option</div></div>
<div class="ttc" id="structast__fax__session__details_html_af766692698b742acddbc42494d323a9f"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#af766692698b742acddbc42494d323a9f">ast_fax_session_details::ecm</a></div><div class="ttdeci">uint32_t ecm</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00153">res_fax.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5fa4f4dc494fc66a1764e00783006b75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fa4f4dc494fc66a1764e00783006b75">&#9670;&nbsp;</a></span>set_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_file </td>
          <td>(</td>
          <td class="paramtype">t30_state_t *&#160;</td>
          <td class="paramname"><em>t30_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/dc2/structast__fax__session__details.html">ast_fax_session_details</a> *&#160;</td>
          <td class="paramname"><em>details</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00467">467</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00039">AST_FAX_TECH_RECEIVE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00420">AST_LIST_FIRST</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00113">ast_fax_session_details::caps</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00119">ast_fax_session_details::documents</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00929">spandsp_fax_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;{</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keywordflow">if</span> (details-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a>) {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      t30_set_rx_file(t30_state, <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;details-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a14c20eed7d6d03b484ebc2cc7a447ea2">documents</a>)-&gt;filename, -1);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="comment">/* if not AST_FAX_TECH_RECEIVE, assume AST_FAX_TECH_SEND, this</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">       * should be safe because we ensure either RECEIVE or SEND is</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">       * indicated in spandsp_fax_new() */</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      t30_set_tx_file(t30_state, <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;details-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a14c20eed7d6d03b484ebc2cc7a447ea2">documents</a>)-&gt;filename, -1, -1);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_adf1959c5c03a3a706da97ad2f49617e5"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a></div><div class="ttdeci">#define AST_LIST_FIRST(head)</div><div class="ttdoc">Returns the first entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00420">linkedlists.h:420</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00039">res_fax.h:39</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_a14c20eed7d6d03b484ebc2cc7a447ea2"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a14c20eed7d6d03b484ebc2cc7a447ea2">ast_fax_session_details::documents</a></div><div class="ttdeci">struct ast_fax_documents documents</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00119">res_fax.h:119</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_ad75375cdd336e91cbcee4a829fcdabfe"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">ast_fax_session_details::caps</a></div><div class="ttdeci">enum ast_fax_capabilities caps</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00113">res_fax.h:113</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a985020177397f3b53f8c375b9f5555a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a985020177397f3b53f8c375b9f5555a9">&#9670;&nbsp;</a></span>set_local_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_local_info </td>
          <td>(</td>
          <td class="paramtype">t30_state_t *&#160;</td>
          <td class="paramname"><em>t30_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/dc2/structast__fax__session__details.html">ast_fax_session_details</a> *&#160;</td>
          <td class="paramname"><em>details</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00456">456</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00142">ast_fax_session_details::headerinfo</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00142">ast_fax_session_details::localstationid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00929">spandsp_fax_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;{</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(details-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a045d24c59f1a8a85e8fbc745fff88140">localstationid</a>)) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      t30_set_tx_ident(t30_state, details-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a045d24c59f1a8a85e8fbc745fff88140">localstationid</a>);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(details-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a6e3b307f2cde58ca9c7ed2c150e4c53c">headerinfo</a>)) {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      t30_set_tx_page_header_info(t30_state, details-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a6e3b307f2cde58ca9c7ed2c150e4c53c">headerinfo</a>);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div><div class="ttc" id="structast__fax__session__details_html_a6e3b307f2cde58ca9c7ed2c150e4c53c"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a6e3b307f2cde58ca9c7ed2c150e4c53c">ast_fax_session_details::headerinfo</a></div><div class="ttdeci">const ast_string_field headerinfo</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00142">res_fax.h:142</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_a045d24c59f1a8a85e8fbc745fff88140"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a045d24c59f1a8a85e8fbc745fff88140">ast_fax_session_details::localstationid</a></div><div class="ttdeci">const ast_string_field localstationid</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00142">res_fax.h:142</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a848b476ce6571398d94f5eb74f3182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a848b476ce6571398d94f5eb74f3182">&#9670;&nbsp;</a></span>set_logging()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_logging </td>
          <td>(</td>
          <td class="paramtype">logging_state_t *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/dc2/structast__fax__session__details.html">ast_fax_session_details</a> *&#160;</td>
          <td class="paramname"><em>details</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00444">444</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00151">ast_fax_session_details::debug</a>, <a class="el" href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">ast_fax_session_details::option</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00433">spandsp_log()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00813">spandsp_fax_gateway_start()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00525">spandsp_fax_new()</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00929">spandsp_fax_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;{</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <span class="keywordtype">int</span> level = SPAN_LOG_WARNING;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">if</span> (details-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">option</a>.<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a84360ac08d9be11f221466122d8cdc65">debug</a>) {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      level = SPAN_LOG_DEBUG_3;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   span_log_set_message_handler(<a class="code" href="../../d4/d88/structstate.html">state</a>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a1358377ae5cb4e9a6f1b2f03c5555b0e">spandsp_log</a>);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   span_log_set_level(<a class="code" href="../../d4/d88/structstate.html">state</a>, SPAN_LOG_SHOW_SEVERITY | SPAN_LOG_SHOW_PROTOCOL | level);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;}</div><div class="ttc" id="structast__fax__session__details_html_a84360ac08d9be11f221466122d8cdc65"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a84360ac08d9be11f221466122d8cdc65">ast_fax_session_details::debug</a></div><div class="ttdeci">uint32_t debug</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00151">res_fax.h:151</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_a3ab211dbe8780b7292257f6b3dba1952"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">ast_fax_session_details::option</a></div><div class="ttdeci">union ast_fax_session_details::@290 option</div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a1358377ae5cb4e9a6f1b2f03c5555b0e"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a1358377ae5cb4e9a6f1b2f03c5555b0e">spandsp_log</a></div><div class="ttdeci">static void spandsp_log(int level, const char *msg)</div><div class="ttdoc">Send spandsp log messages to asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00433">res_fax_spandsp.c:433</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaae8190167c94ac97553e0377398eb6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaae8190167c94ac97553e0377398eb6c">&#9670;&nbsp;</a></span>spandsp_fax_cancel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int spandsp_fax_cancel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01006">1006</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00047">AST_FAX_TECH_GATEWAY</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00113">ast_fax_session_details::caps</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00208">ast_fax_session::details</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00148">spandsp_pvt::isdone</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00152">spandsp_pvt::t30_state</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>.</p>
<div class="fragment"><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;{</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a>) {</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#af2bd73f7c4fe9e40a5d5cb75dcbca598">isdone</a> = 1;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   }</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;   t30_terminate(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;   p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#af2bd73f7c4fe9e40a5d5cb75dcbca598">isdone</a> = 1;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;}</div><div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00047">res_fax.h:47</a></div></div>
<div class="ttc" id="structast__fax__session_html_ae7b633178d301df70e8612b4ce1aeb77"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">ast_fax_session::details</a></div><div class="ttdeci">struct ast_fax_session_details * details</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00208">res_fax.h:208</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_af2bd73f7c4fe9e40a5d5cb75dcbca598"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#af2bd73f7c4fe9e40a5d5cb75dcbca598">spandsp_pvt::isdone</a></div><div class="ttdeci">unsigned int isdone</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00148">res_fax_spandsp.c:148</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_adcd6f30baf585999693211a967c2db61"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">spandsp_pvt::t30_state</a></div><div class="ttdeci">t30_state_t * t30_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00152">res_fax_spandsp.c:152</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_ad75375cdd336e91cbcee4a829fcdabfe"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">ast_fax_session_details::caps</a></div><div class="ttdeci">enum ast_fax_capabilities caps</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00113">res_fax.h:113</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a83441be7baa98d2b8382dc027a8f2dee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83441be7baa98d2b8382dc027a8f2dee">&#9670;&nbsp;</a></span>spandsp_fax_cli_show_capabilities()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * spandsp_fax_cli_show_capabilities </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01041">1041</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;{</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;SEND RECEIVE T.38 G.711 GATEWAY\n\n&quot;</span>);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;   <span class="keywordflow">return</span>  <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;}</div><div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a193ec436c3481c1121eb872cd2e9ad0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a193ec436c3481c1121eb872cd2e9ad0d">&#9670;&nbsp;</a></span>spandsp_fax_cli_show_session()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * spandsp_fax_cli_show_session </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01048">1048</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l01013">ast_fax_state_to_str()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00067">AST_FAX_STATE_UNINITIALIZED</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00047">AST_FAX_TECH_GATEWAY</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00039">AST_FAX_TECH_RECEIVE</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00037">AST_FAX_TECH_SEND</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00049">AST_FAX_TECH_V21_DETECT</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00113">ast_fax_session_details::caps</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00208">ast_fax_session::details</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00204">ast_fax_session::id</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00218">ast_fax_session::state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00155">spandsp_pvt::stats</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00152">spandsp_pvt::t30_state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00158">spandsp_pvt::t38_gw_state</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>.</p>
<div class="fragment"><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;{</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(s);</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a>) {</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %u\n&quot;</span>, <span class="stringliteral">&quot;session&quot;</span>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>);</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %s\n&quot;</span>, <span class="stringliteral">&quot;operation&quot;</span>, <span class="stringliteral">&quot;Gateway&quot;</span>);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %s\n&quot;</span>, <span class="stringliteral">&quot;state&quot;</span>, <a class="code" href="../../db/d6a/res__fax_8h.html#a70598462f8d1c09bb43e7a7091498e53">ast_fax_state_to_str</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a>));</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a> != <a class="code" href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112cad2e2632aa1b6333fcd0e89c554d0df54">AST_FAX_STATE_UNINITIALIZED</a>) {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;         t38_stats_t <a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;         t38_gateway_get_transfer_statistics(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>, &amp;stats);</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %s\n&quot;</span>, <span class="stringliteral">&quot;ECM Mode&quot;</span>, stats.error_correcting_mode ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %d\n&quot;</span>, <span class="stringliteral">&quot;Data Rate&quot;</span>, stats.bit_rate);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %d\n&quot;</span>, <span class="stringliteral">&quot;Page Number&quot;</span>, stats.pages_transferred + 1);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      }</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c">AST_FAX_TECH_V21_DETECT</a>) {</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %u\n&quot;</span>, <span class="stringliteral">&quot;session&quot;</span>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %s\n&quot;</span>, <span class="stringliteral">&quot;operation&quot;</span>, <span class="stringliteral">&quot;V.21 Detect&quot;</span>);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %s\n&quot;</span>, <span class="stringliteral">&quot;state&quot;</span>, <a class="code" href="../../db/d6a/res__fax_8h.html#a70598462f8d1c09bb43e7a7091498e53">ast_fax_state_to_str</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a>));</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %u\n&quot;</span>, <span class="stringliteral">&quot;session&quot;</span>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %s\n&quot;</span>, <span class="stringliteral">&quot;operation&quot;</span>, (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a>) ? <span class="stringliteral">&quot;Receive&quot;</span> : <span class="stringliteral">&quot;Transmit&quot;</span>);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %s\n&quot;</span>, <span class="stringliteral">&quot;state&quot;</span>, <a class="code" href="../../db/d6a/res__fax_8h.html#a70598462f8d1c09bb43e7a7091498e53">ast_fax_state_to_str</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a>));</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a> != <a class="code" href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112cad2e2632aa1b6333fcd0e89c554d0df54">AST_FAX_STATE_UNINITIALIZED</a>) {</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;         t30_stats_t <a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;         t30_get_transfer_statistics(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>, &amp;stats);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %s\n&quot;</span>, <span class="stringliteral">&quot;Last Status&quot;</span>, t30_completion_code_to_str(stats.current_status));</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %s\n&quot;</span>, <span class="stringliteral">&quot;ECM Mode&quot;</span>, stats.error_correcting_mode ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %d\n&quot;</span>, <span class="stringliteral">&quot;Data Rate&quot;</span>, stats.bit_rate);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %dx%d\n&quot;</span>, <span class="stringliteral">&quot;Image Resolution&quot;</span>, stats.x_resolution, stats.y_resolution);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="preprocessor">#if SPANDSP_RELEASE_DATE &gt;= 20090220</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %d\n&quot;</span>, <span class="stringliteral">&quot;Page Number&quot;</span>, ((s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a>) ? stats.pages_rx : stats.pages_tx) + 1);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %d\n&quot;</span>, <span class="stringliteral">&quot;Page Number&quot;</span>, stats.pages_transferred + 1);</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %s\n&quot;</span>, <span class="stringliteral">&quot;File Name&quot;</span>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a> ? p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>-&gt;rx_file : p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>-&gt;tx_file);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;\nData Statistics:\n&quot;</span>);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="preprocessor">#if SPANDSP_RELEASE_DATE &gt;= 20090220</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %d\n&quot;</span>, <span class="stringliteral">&quot;Tx Pages&quot;</span>, stats.pages_tx);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %d\n&quot;</span>, <span class="stringliteral">&quot;Rx Pages&quot;</span>, stats.pages_rx);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %d\n&quot;</span>, <span class="stringliteral">&quot;Tx Pages&quot;</span>, (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6adbf07d8224b1a548ccae3b994653003b">AST_FAX_TECH_SEND</a>) ? stats.pages_transferred : 0);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %d\n&quot;</span>, <span class="stringliteral">&quot;Rx Pages&quot;</span>, (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a>) ? stats.pages_transferred : 0);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %d\n&quot;</span>, <span class="stringliteral">&quot;Longest Bad Line Run&quot;</span>, stats.longest_bad_row_run);</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-22s : %d\n&quot;</span>, <span class="stringliteral">&quot;Total Bad Lines&quot;</span>, stats.bad_rows);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   }</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(s);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;\n\n&quot;</span>);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;}</div><div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00047">res_fax.h:47</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6adbf07d8224b1a548ccae3b994653003b"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6adbf07d8224b1a548ccae3b994653003b">AST_FAX_TECH_SEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00037">res_fax.h:37</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c">AST_FAX_TECH_V21_DETECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00049">res_fax.h:49</a></div></div>
<div class="ttc" id="structast__fax__session_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">ast_fax_session::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00204">res_fax.h:204</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00039">res_fax.h:39</a></div></div>
<div class="ttc" id="structast__fax__session_html_ae7b633178d301df70e8612b4ce1aeb77"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">ast_fax_session::details</a></div><div class="ttdeci">struct ast_fax_session_details * details</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00208">res_fax.h:208</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_ad8cd454d1a02eee0cc27ea8819530ecd"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">spandsp_pvt::t38_gw_state</a></div><div class="ttdeci">t38_gateway_state_t t38_gw_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00158">res_fax_spandsp.c:158</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a1b5003edd88843375153c462a72343f3"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">spandsp_pvt::stats</a></div><div class="ttdeci">struct spandsp_fax_stats * stats</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00155">res_fax_spandsp.c:155</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_adcd6f30baf585999693211a967c2db61"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">spandsp_pvt::t30_state</a></div><div class="ttdeci">t30_state_t * t30_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00152">res_fax_spandsp.c:152</a></div></div>
<div class="ttc" id="structast__fax__session_html_ad8f346e1752edcc0b1a6b431b1749f0e"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">ast_fax_session::state</a></div><div class="ttdeci">enum ast_fax_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00218">res_fax.h:218</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="res__fax_8h_html_a70598462f8d1c09bb43e7a7091498e53"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a70598462f8d1c09bb43e7a7091498e53">ast_fax_state_to_str</a></div><div class="ttdeci">const char * ast_fax_state_to_str(enum ast_fax_state state)</div><div class="ttdoc">convert an ast_fax_state to a string </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d60/res__fax_8c_source.html#l01013">res_fax.c:1013</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_ad75375cdd336e91cbcee4a829fcdabfe"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">ast_fax_session_details::caps</a></div><div class="ttdeci">enum ast_fax_capabilities caps</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00113">res_fax.h:113</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
<div class="ttc" id="res__fax_8h_html_ab34810136037068a0847bcca2518112cad2e2632aa1b6333fcd0e89c554d0df54"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112cad2e2632aa1b6333fcd0e89c554d0df54">AST_FAX_STATE_UNINITIALIZED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00067">res_fax.h:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acb07657df8ed42dd62966c531f1bee62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb07657df8ed42dd62966c531f1bee62">&#9670;&nbsp;</a></span>spandsp_fax_cli_show_settings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * spandsp_fax_cli_show_settings </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Show res_fax_spandsp settings. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01234">1234</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;{</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   <span class="comment">/* no settings at the moment */</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;}</div><div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a632e62933ba50a9269eeeede6e8db7e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a632e62933ba50a9269eeeede6e8db7e5">&#9670;&nbsp;</a></span>spandsp_fax_cli_show_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * spandsp_fax_cli_show_stats </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01197">1197</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.</p>
<div class="fragment"><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;{</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.lock);</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;\n%-20.20s\n&quot;</span>, <span class="stringliteral">&quot;Spandsp G.711&quot;</span>);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Success&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711.success);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Switched to T.38&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711.switched);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Call Dropped&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711.call_dropped);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;No FAX&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711.nofax);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Negotiation Failed&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711.neg_failed);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Train Failure&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711.failed_to_train);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Retries Exceeded&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711.retries_exceeded);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Protocol Error&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711.protocol_error);</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;TX Protocol Error&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711.tx_protocol_error);</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;RX Protocol Error&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711.rx_protocol_error);</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;File Error&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711.file_error);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Memory Error&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711.mem_error);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Unknown Error&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711.unknown_error);</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;\n%-20.20s\n&quot;</span>, <span class="stringliteral">&quot;Spandsp T.38&quot;</span>);</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Success&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38.success);</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Call Dropped&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38.call_dropped);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;No FAX&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38.nofax);</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Negotiation Failed&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38.neg_failed);</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Train Failure&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38.failed_to_train);</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Retries Exceeded&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38.retries_exceeded);</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Protocol Error&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38.protocol_error);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;TX Protocol Error&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38.tx_protocol_error);</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;RX Protocol Error&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38.rx_protocol_error);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;File Error&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38.file_error);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Memory Error&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38.mem_error);</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;%-20.20s : %d\n&quot;</span>, <span class="stringliteral">&quot;Unknown Error&quot;</span>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38.unknown_error);</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.lock);</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;}</div><div class="ttc" id="res__fax__spandsp_8c_html_a589319dce057e148f17f370ca3ba2a95"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a></div><div class="ttdeci">static struct @462 spandsp_global_stats</div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aff3bb506c68bf48a84a242b915c91758"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff3bb506c68bf48a84a242b915c91758">&#9670;&nbsp;</a></span>spandsp_fax_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spandsp_fax_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroy a spandsp fax session. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00603">603</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00047">AST_FAX_TECH_GATEWAY</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00049">AST_FAX_TECH_V21_DETECT</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00113">ast_fax_session_details::caps</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00208">ast_fax_session::details</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00206">ast_fax_session::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00180">session_destroy()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00916">spandsp_fax_gateway_cleanup()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00594">spandsp_v21_cleanup()</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>.</p>
<div class="fragment"><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;{</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a>) {</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#ad19e873d8a667de24f4cb593a05b45fb">spandsp_fax_gateway_cleanup</a>(s);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c">AST_FAX_TECH_V21_DETECT</a>) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#addd7277ae067b27b98632539c158c6bf">spandsp_v21_cleanup</a>(s);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a26dae05b6eb59eb758e6bf0f55b6e396">session_destroy</a>(p);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(p);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = -1;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;}</div><div class="ttc" id="res__fax__spandsp_8c_html_a26dae05b6eb59eb758e6bf0f55b6e396"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a26dae05b6eb59eb758e6bf0f55b6e396">session_destroy</a></div><div class="ttdeci">static void session_destroy(struct spandsp_pvt *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00180">res_fax_spandsp.c:180</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00047">res_fax.h:47</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_ad19e873d8a667de24f4cb593a05b45fb"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#ad19e873d8a667de24f4cb593a05b45fb">spandsp_fax_gateway_cleanup</a></div><div class="ttdeci">static void spandsp_fax_gateway_cleanup(struct ast_fax_session *s)</div><div class="ttdoc">gather data and clean up after gateway ends </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00916">res_fax_spandsp.c:916</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c">AST_FAX_TECH_V21_DETECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00049">res_fax.h:49</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_addd7277ae067b27b98632539c158c6bf"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#addd7277ae067b27b98632539c158c6bf">spandsp_v21_cleanup</a></div><div class="ttdeci">static void spandsp_v21_cleanup(struct ast_fax_session *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00594">res_fax_spandsp.c:594</a></div></div>
<div class="ttc" id="structast__fax__session_html_ae7b633178d301df70e8612b4ce1aeb77"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">ast_fax_session::details</a></div><div class="ttdeci">struct ast_fax_session_details * details</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00208">res_fax.h:208</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__fax__session_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a6f8059414f0228f0256115e024eeed4b">ast_fax_session::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00206">res_fax.h:206</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_ad75375cdd336e91cbcee4a829fcdabfe"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">ast_fax_session_details::caps</a></div><div class="ttdeci">enum ast_fax_capabilities caps</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00113">res_fax.h:113</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad19e873d8a667de24f4cb593a05b45fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad19e873d8a667de24f4cb593a05b45fb">&#9670;&nbsp;</a></span>spandsp_fax_gateway_cleanup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spandsp_fax_gateway_cleanup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>gather data and clean up after gateway ends </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>fax session </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00916">916</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00085">AST_FAX_OPTFLAG_FALSE</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00087">AST_FAX_OPTFLAG_TRUE</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00550">ast_string_field_build</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00208">ast_fax_session::details</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00153">ast_fax_session_details::ecm</a>, <a class="el" href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">ast_fax_session_details::option</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00144">ast_fax_session_details::pages_transferred</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00158">spandsp_pvt::t38_gw_state</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00603">spandsp_fax_destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;{</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;   t38_stats_t t38_stats;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;   t38_gateway_get_transfer_statistics(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>, &amp;t38_stats);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">option</a>.<a class="code" href="../../d8/dc2/structast__fax__session__details.html#af766692698b742acddbc42494d323a9f">ecm</a> = t38_stats.error_correcting_mode ? <a class="code" href="../../db/d6a/res__fax_8h.html#a1838c71fcf68c3cfe0ce37e35e77406dabd9b4a57405ba5c0c884ac98746a8bd7">AST_FAX_OPTFLAG_TRUE</a> : <a class="code" href="../../db/d6a/res__fax_8h.html#a1838c71fcf68c3cfe0ce37e35e77406daa2151729c413238bea86a4b62e7865bd">AST_FAX_OPTFLAG_FALSE</a>;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ac579558087dfa900a4c5384cb6e09dd8">pages_transferred</a> = t38_stats.pages_transferred;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>, transfer_rate, <span class="stringliteral">&quot;%d&quot;</span>, t38_stats.bit_rate);</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;}</div><div class="ttc" id="res__fax_8h_html_a1838c71fcf68c3cfe0ce37e35e77406dabd9b4a57405ba5c0c884ac98746a8bd7"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a1838c71fcf68c3cfe0ce37e35e77406dabd9b4a57405ba5c0c884ac98746a8bd7">AST_FAX_OPTFLAG_TRUE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00087">res_fax.h:87</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_a3ab211dbe8780b7292257f6b3dba1952"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">ast_fax_session_details::option</a></div><div class="ttdeci">union ast_fax_session_details::@290 option</div></div>
<div class="ttc" id="structast__fax__session_html_ae7b633178d301df70e8612b4ce1aeb77"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">ast_fax_session::details</a></div><div class="ttdeci">struct ast_fax_session_details * details</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00208">res_fax.h:208</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_ad8cd454d1a02eee0cc27ea8819530ecd"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">spandsp_pvt::t38_gw_state</a></div><div class="ttdeci">t38_gateway_state_t t38_gw_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00158">res_fax_spandsp.c:158</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_ac579558087dfa900a4c5384cb6e09dd8"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#ac579558087dfa900a4c5384cb6e09dd8">ast_fax_session_details::pages_transferred</a></div><div class="ttdeci">unsigned int pages_transferred</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00144">res_fax.h:144</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_af766692698b742acddbc42494d323a9f"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#af766692698b742acddbc42494d323a9f">ast_fax_session_details::ecm</a></div><div class="ttdeci">uint32_t ecm</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00153">res_fax.h:153</a></div></div>
<div class="ttc" id="stringfields_8h_html_a8b9f4347fc72720cc5cead952b54abe9"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a></div><div class="ttdeci">#define ast_string_field_build(x, field, fmt, args...)</div><div class="ttdoc">Set a field to a complex (built) value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00550">stringfields.h:550</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="res__fax_8h_html_a1838c71fcf68c3cfe0ce37e35e77406daa2151729c413238bea86a4b62e7865bd"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a1838c71fcf68c3cfe0ce37e35e77406daa2151729c413238bea86a4b62e7865bd">AST_FAX_OPTFLAG_FALSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00085">res_fax.h:85</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8162670509872b734477d174e39a073e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8162670509872b734477d174e39a073e">&#9670;&nbsp;</a></span>spandsp_fax_gateway_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int spandsp_fax_gateway_process </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>process a frame from the bridge </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>fax session </td></tr>
    <tr><td class="paramname">f</td><td>frame to process </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on sucess 0 on incorect packet </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00894">894</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00036">AST_FORMAT_CMP_EQUAL</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00123">AST_FRAME_MODEM</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00241">AST_MODEM_T38</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">ast_frame::seqno</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00153">spandsp_pvt::t38_core_state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00158">spandsp_pvt::t38_gw_state</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00734">spandsp_fax_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;{</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;   <span class="comment">/*invalid frame*/</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;   <span class="keywordflow">if</span> (!f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> || !f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>) {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   }</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   <span class="comment">/* Process a IFP packet */</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   <span class="keywordflow">if</span> ((f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">AST_FRAME_MODEM</a>) &amp;&amp; (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a3a510e4e2673c6870ed5fe0f1eb53732">AST_MODEM_T38</a>)) {</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      <span class="keywordflow">return</span> t38_core_rx_ifp_packet(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) &amp;&amp;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>)) {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keywordflow">return</span> t38_gateway_rx(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   }</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;}</div><div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00036">format.h:36</a></div></div>
<div class="ttc" id="structast__frame_html_ab793262012344621455faf9266acbac2"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">ast_frame::seqno</a></div><div class="ttdeci">int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">include/asterisk/frame.h:195</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a2771e36a55ef2406a468f480426f3f90"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">spandsp_pvt::t38_core_state</a></div><div class="ttdeci">t38_core_state_t * t38_core_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00153">res_fax_spandsp.c:153</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_ad8cd454d1a02eee0cc27ea8819530ecd"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">spandsp_pvt::t38_gw_state</a></div><div class="ttdeci">t38_gateway_state_t t38_gw_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00158">res_fax_spandsp.c:158</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">AST_FRAME_MODEM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00123">include/asterisk/frame.h:123</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a3a510e4e2673c6870ed5fe0f1eb53732"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a3a510e4e2673c6870ed5fe0f1eb53732">AST_MODEM_T38</a></div><div class="ttdeci">#define AST_MODEM_T38</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00241">include/asterisk/frame.h:241</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aca5062a395eb7c74d0109ba1f4d11b89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca5062a395eb7c74d0109ba1f4d11b89">&#9670;&nbsp;</a></span>spandsp_fax_gateway_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int spandsp_fax_gateway_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>activate a spandsp gateway based on the information in the given fax session </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>fax session </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error 0 on sucess </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00813">813</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l00227">ast_generator::alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02960">ast_activate_generator()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10765">ast_channel_bridge_peer()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02873">ast_channel_get_t38_state()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00073">AST_FAX_STATE_ACTIVE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00393">AST_T38_RATE_MANAGEMENT_TRANSFERRED_TCF</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00149">spandsp_pvt::ast_t38_state</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00224">ast_fax_session::chan</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00208">ast_fax_session::details</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00153">ast_fax_session_details::ecm</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00097">ast_fax_t38_parameters::fill_bit_removal</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">spandsp_pvt::ist38</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00094">ast_fax_t38_parameters::max_ifp</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">ast_fax_session_details::option</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00175">ast_fax_session_details::our_t38_parameters</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00096">ast_fax_t38_parameters::rate_management</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00444">set_logging()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00072">SPANDSP_ENGAGE_UDPTL_NAT_RETRY</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00799">spandsp_fax_gw_gen_alloc()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00805">spandsp_fax_gw_gen_release()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00765">spandsp_fax_gw_t30_gen()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00499">spandsp_modems()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00218">ast_fax_session::state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00153">spandsp_pvt::t38_core_state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00158">spandsp_pvt::t38_gw_state</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00884">T38_STATE_NEGOTIATED</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00882">T38_STATE_NEGOTIATING</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00217">t38_tx_packet_handler()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00177">ast_fax_session_details::their_t38_parameters</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00099">ast_fax_t38_parameters::transcoding_jbig</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00098">ast_fax_t38_parameters::transcoding_mmr</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l00518">TRUE</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00093">ast_fax_t38_parameters::version</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00929">spandsp_fax_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;{</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/df6/structast__fax__t38__parameters.html">ast_fax_t38_parameters</a> *t38_param;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, peer, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../de/d2a/structast__generator.html">ast_generator</a> t30_gen = {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      .<a class="code" href="../../de/d2a/structast__generator.html#a77c293dc8108e06e2a81a1fdafc8fd97">alloc</a> = <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#ad7634e872ab24fc86bb8237a6d2f4463">spandsp_fax_gw_gen_alloc</a>,</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      .release = <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#ad7ba83daf725125984d525ed1d2461cc">spandsp_fax_gw_gen_release</a>,</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      .generate = <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#afe4b8983331a6ebf8b794f6cdb318b2f">spandsp_fax_gw_t30_gen</a>,</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   };</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="preprocessor">#if SPANDSP_RELEASE_DATE &gt;= 20081012</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   <span class="comment">/* for spandsp shaphots 0.0.6 and higher */</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>=&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>.t38x.t38;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   <span class="comment">/* for spandsp release 0.0.5 */</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>=&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>.t38;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   <span class="keywordflow">if</span> (!t38_gateway_init(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a24efd6f18c67b0deb9973607e23f2bac">t38_tx_packet_handler</a>, s)) {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   }</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">ist38</a> = 1;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#add1eaf99c12ebcef83fa7c1d4ca52f9f">ast_t38_state</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a1b22ea5302ef183fa68bc45bfb0659c9">ast_channel_get_t38_state</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   peer = <a class="code" href="../../d5/d7b/channel_8h.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <span class="keywordflow">if</span> (!peer) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   <span class="comment">/* we can be in T38_STATE_NEGOTIATING or T38_STATE_NEGOTIATED when the</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">    * gateway is started. We treat both states the same. */</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#add1eaf99c12ebcef83fa7c1d4ca52f9f">ast_t38_state</a> == <a class="code" href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1afa1eab36050476591f803c3e234c2ed1">T38_STATE_NEGOTIATING</a>) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#add1eaf99c12ebcef83fa7c1d4ca52f9f">ast_t38_state</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1af142c79721a025bd65edad812f0725e0">T38_STATE_NEGOTIATED</a>;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   }</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a12a58dda74a19f383f6b77cf7fa88b54">ast_activate_generator</a>(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#add1eaf99c12ebcef83fa7c1d4ca52f9f">ast_t38_state</a> == <a class="code" href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1af142c79721a025bd65edad812f0725e0">T38_STATE_NEGOTIATED</a> ? peer : s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, &amp;t30_gen , s);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a7a848b476ce6571398d94f5eb74f3182">set_logging</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>.logging, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;   <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a7a848b476ce6571398d94f5eb74f3182">set_logging</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>-&gt;logging, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   t38_param = (p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#add1eaf99c12ebcef83fa7c1d4ca52f9f">ast_t38_state</a> == <a class="code" href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1af142c79721a025bd65edad812f0725e0">T38_STATE_NEGOTIATED</a>) ? &amp;s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a80632865b575d06f319ef95c42645b2c">our_t38_parameters</a> : &amp;s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a12cc2bfdcc88e94984d001cca6fefdc5">their_t38_parameters</a>;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   t38_set_t38_version(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>, t38_param-&gt;<a class="code" href="../../d3/df6/structast__fax__t38__parameters.html#a5408ac5df4c170828874e1b10b4c35a0">version</a>);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   t38_gateway_set_ecm_capability(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">option</a>.<a class="code" href="../../d8/dc2/structast__fax__session__details.html#af766692698b742acddbc42494d323a9f">ecm</a>);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   t38_set_max_datagram_size(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>, t38_param-&gt;<a class="code" href="../../d3/df6/structast__fax__t38__parameters.html#a7924cc45cde640e779a902c4aadaf180">max_ifp</a>);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   t38_set_fill_bit_removal(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>, t38_param-&gt;<a class="code" href="../../d3/df6/structast__fax__t38__parameters.html#addb721c952a7144f0a6a9ac5f621d2bc">fill_bit_removal</a>);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;   t38_set_mmr_transcoding(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>, t38_param-&gt;<a class="code" href="../../d3/df6/structast__fax__t38__parameters.html#ad2b3d53474db70e3ff2058da953b7b82">transcoding_mmr</a>);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;   t38_set_jbig_transcoding(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>, t38_param-&gt;<a class="code" href="../../d3/df6/structast__fax__t38__parameters.html#a07676322ec48c4872f9a208a6248d034">transcoding_jbig</a>);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   t38_set_data_rate_management_method(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>,</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;         (t38_param-&gt;<a class="code" href="../../d3/df6/structast__fax__t38__parameters.html#ad39f48f545d7c8962dfa0ae83a61c21f">rate_management</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a9db3df106b7deebbee4c5106a880ec33abbb1b9b329ded73597a5c2eefe13a34c">AST_T38_RATE_MANAGEMENT_TRANSFERRED_TCF</a>)? 1 : 2);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   t38_gateway_set_transmit_on_idle(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>, <a class="code" href="../../de/dfe/app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   t38_set_sequence_number_handling(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>, <a class="code" href="../../de/dfe/app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   t38_gateway_set_supported_modems(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a727760f4638f2c84101218ce5e89d567">spandsp_modems</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>));</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   <span class="comment">/* engage udptl nat on other side of T38 line</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">    * (Asterisk changes media ports thus we send a few packets to reinitialize</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">    * pinholes in NATs and FWs</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   <span class="keywordflow">for</span> (i=0; i &lt; <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#ac7fd98ac3a6b6d9a649dc1a7df2e6b25">SPANDSP_ENGAGE_UDPTL_NAT_RETRY</a>; i++) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="preprocessor">#if SPANDSP_RELEASE_DATE &gt;= 20091228</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      t38_core_send_indicator(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>.t38x.t38, T38_IND_NO_SIGNAL);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="preprocessor">#elif SPANDSP_RELEASE_DATE &gt;= 20081012</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      t38_core_send_indicator(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>.t38x.t38, T38_IND_NO_SIGNAL, p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>.t38x.t38.indicator_tx_count);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      t38_core_send_indicator(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>.t38, T38_IND_NO_SIGNAL, p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>.t38.indicator_tx_count);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;   s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a> = <a class="code" href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112ca59afc86be1c4be9a01c3cd178c4337b2">AST_FAX_STATE_ACTIVE</a>;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;}</div><div class="ttc" id="channel_8h_html_a1b22ea5302ef183fa68bc45bfb0659c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1b22ea5302ef183fa68bc45bfb0659c9">ast_channel_get_t38_state</a></div><div class="ttdeci">static enum ast_t38_state ast_channel_get_t38_state(struct ast_channel *chan)</div><div class="ttdoc">Retrieves the current T38 state of a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02873">channel.h:2873</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a727760f4638f2c84101218ce5e89d567"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a727760f4638f2c84101218ce5e89d567">spandsp_modems</a></div><div class="ttdeci">static int spandsp_modems(struct ast_fax_session_details *details)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00499">res_fax_spandsp.c:499</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_afe4b8983331a6ebf8b794f6cdb318b2f"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#afe4b8983331a6ebf8b794f6cdb318b2f">spandsp_fax_gw_t30_gen</a></div><div class="ttdeci">static int spandsp_fax_gw_t30_gen(struct ast_channel *chan, void *data, int len, int samples)</div><div class="ttdoc">generate T.30 packets sent to the T.30 leg of gateway </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00765">res_fax_spandsp.c:765</a></div></div>
<div class="ttc" id="structast__generator_html_a77c293dc8108e06e2a81a1fdafc8fd97"><div class="ttname"><a href="../../de/d2a/structast__generator.html#a77c293dc8108e06e2a81a1fdafc8fd97">ast_generator::alloc</a></div><div class="ttdeci">void *(* alloc)(struct ast_channel *chan, void *params)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00227">channel.h:227</a></div></div>
<div class="ttc" id="channel_8h_html_a12a58dda74a19f383f6b77cf7fa88b54"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a12a58dda74a19f383f6b77cf7fa88b54">ast_activate_generator</a></div><div class="ttdeci">int ast_activate_generator(struct ast_channel *chan, struct ast_generator *gen, void *params)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02960">channel.c:2960</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_ad7ba83daf725125984d525ed1d2461cc"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#ad7ba83daf725125984d525ed1d2461cc">spandsp_fax_gw_gen_release</a></div><div class="ttdeci">static void spandsp_fax_gw_gen_release(struct ast_channel *chan, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00805">res_fax_spandsp.c:805</a></div></div>
<div class="ttc" id="res__fax_8h_html_ab34810136037068a0847bcca2518112ca59afc86be1c4be9a01c3cd178c4337b2"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112ca59afc86be1c4be9a01c3cd178c4337b2">AST_FAX_STATE_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00073">res_fax.h:73</a></div></div>
<div class="ttc" id="structast__generator_html"><div class="ttname"><a href="../../de/d2a/structast__generator.html">ast_generator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00226">channel.h:226</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a9e04fe7f94b31b90af8617c4114973c6"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">spandsp_pvt::ist38</a></div><div class="ttdeci">unsigned int ist38</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">res_fax_spandsp.c:147</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a24efd6f18c67b0deb9973607e23f2bac"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a24efd6f18c67b0deb9973607e23f2bac">t38_tx_packet_handler</a></div><div class="ttdeci">static int t38_tx_packet_handler(t38_core_state_t *t38_core_state, void *data, const uint8_t *buf, int len, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00217">res_fax_spandsp.c:217</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__fax__session_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a84d1435c5b8d387806714ea7079304b7">ast_fax_session::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00224">res_fax.h:224</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a2771e36a55ef2406a468f480426f3f90"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">spandsp_pvt::t38_core_state</a></div><div class="ttdeci">t38_core_state_t * t38_core_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00153">res_fax_spandsp.c:153</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_a3ab211dbe8780b7292257f6b3dba1952"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">ast_fax_session_details::option</a></div><div class="ttdeci">union ast_fax_session_details::@290 option</div></div>
<div class="ttc" id="structast__fax__session__details_html_a80632865b575d06f319ef95c42645b2c"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a80632865b575d06f319ef95c42645b2c">ast_fax_session_details::our_t38_parameters</a></div><div class="ttdeci">struct ast_fax_t38_parameters our_t38_parameters</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00175">res_fax.h:175</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a9db3df106b7deebbee4c5106a880ec33abbb1b9b329ded73597a5c2eefe13a34c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a9db3df106b7deebbee4c5106a880ec33abbb1b9b329ded73597a5c2eefe13a34c">AST_T38_RATE_MANAGEMENT_TRANSFERRED_TCF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00393">include/asterisk/frame.h:393</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__fax__t38__parameters_html"><div class="ttname"><a href="../../d3/df6/structast__fax__t38__parameters.html">ast_fax_t38_parameters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00092">res_fax.h:92</a></div></div>
<div class="ttc" id="structast__fax__session_html_ae7b633178d301df70e8612b4ce1aeb77"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">ast_fax_session::details</a></div><div class="ttdeci">struct ast_fax_session_details * details</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00208">res_fax.h:208</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_ad8cd454d1a02eee0cc27ea8819530ecd"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">spandsp_pvt::t38_gw_state</a></div><div class="ttdeci">t38_gateway_state_t t38_gw_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00158">res_fax_spandsp.c:158</a></div></div>
<div class="ttc" id="channel_8h_html_a4cd990f4c1cd0c2af6e4c63f6d15b4e1afa1eab36050476591f803c3e234c2ed1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1afa1eab36050476591f803c3e234c2ed1">T38_STATE_NEGOTIATING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00882">channel.h:882</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a7a848b476ce6571398d94f5eb74f3182"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a7a848b476ce6571398d94f5eb74f3182">set_logging</a></div><div class="ttdeci">static void set_logging(logging_state_t *state, struct ast_fax_session_details *details)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00444">res_fax_spandsp.c:444</a></div></div>
<div class="ttc" id="structast__fax__t38__parameters_html_ad2b3d53474db70e3ff2058da953b7b82"><div class="ttname"><a href="../../d3/df6/structast__fax__t38__parameters.html#ad2b3d53474db70e3ff2058da953b7b82">ast_fax_t38_parameters::transcoding_mmr</a></div><div class="ttdeci">unsigned int transcoding_mmr</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00098">res_fax.h:98</a></div></div>
<div class="ttc" id="structast__fax__t38__parameters_html_a07676322ec48c4872f9a208a6248d034"><div class="ttname"><a href="../../d3/df6/structast__fax__t38__parameters.html#a07676322ec48c4872f9a208a6248d034">ast_fax_t38_parameters::transcoding_jbig</a></div><div class="ttdeci">unsigned int transcoding_jbig</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00099">res_fax.h:99</a></div></div>
<div class="ttc" id="structast__fax__t38__parameters_html_a7924cc45cde640e779a902c4aadaf180"><div class="ttname"><a href="../../d3/df6/structast__fax__t38__parameters.html#a7924cc45cde640e779a902c4aadaf180">ast_fax_t38_parameters::max_ifp</a></div><div class="ttdeci">unsigned int max_ifp</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00094">res_fax.h:94</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_add1eaf99c12ebcef83fa7c1d4ca52f9f"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#add1eaf99c12ebcef83fa7c1d4ca52f9f">spandsp_pvt::ast_t38_state</a></div><div class="ttdeci">enum ast_t38_state ast_t38_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00149">res_fax_spandsp.c:149</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_af766692698b742acddbc42494d323a9f"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#af766692698b742acddbc42494d323a9f">ast_fax_session_details::ecm</a></div><div class="ttdeci">uint32_t ecm</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00153">res_fax.h:153</a></div></div>
<div class="ttc" id="structast__fax__session_html_ad8f346e1752edcc0b1a6b431b1749f0e"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">ast_fax_session::state</a></div><div class="ttdeci">enum ast_fax_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00218">res_fax.h:218</a></div></div>
<div class="ttc" id="channel_8h_html_a4cd990f4c1cd0c2af6e4c63f6d15b4e1af142c79721a025bd65edad812f0725e0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1af142c79721a025bd65edad812f0725e0">T38_STATE_NEGOTIATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00884">channel.h:884</a></div></div>
<div class="ttc" id="structast__fax__t38__parameters_html_a5408ac5df4c170828874e1b10b4c35a0"><div class="ttname"><a href="../../d3/df6/structast__fax__t38__parameters.html#a5408ac5df4c170828874e1b10b4c35a0">ast_fax_t38_parameters::version</a></div><div class="ttdeci">unsigned int version</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00093">res_fax.h:93</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_ac7fd98ac3a6b6d9a649dc1a7df2e6b25"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#ac7fd98ac3a6b6d9a649dc1a7df2e6b25">SPANDSP_ENGAGE_UDPTL_NAT_RETRY</a></div><div class="ttdeci">#define SPANDSP_ENGAGE_UDPTL_NAT_RETRY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00072">res_fax_spandsp.c:72</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_af9e27ecd92ff5aa897c9e058dfbd6510"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a></div><div class="ttdeci">struct ast_channel * ast_channel_bridge_peer(struct ast_channel *chan)</div><div class="ttdoc">Get the channel&amp;#39;s bridge peer only if the bridge is two-party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10765">channel.c:10765</a></div></div>
<div class="ttc" id="app__minivm_8c_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../de/dfe/app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/app__minivm_8c_source.html#l00518">app_minivm.c:518</a></div></div>
<div class="ttc" id="structast__fax__t38__parameters_html_ad39f48f545d7c8962dfa0ae83a61c21f"><div class="ttname"><a href="../../d3/df6/structast__fax__t38__parameters.html#ad39f48f545d7c8962dfa0ae83a61c21f">ast_fax_t38_parameters::rate_management</a></div><div class="ttdeci">enum ast_control_t38_rate_management rate_management</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00096">res_fax.h:96</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structast__fax__t38__parameters_html_addb721c952a7144f0a6a9ac5f621d2bc"><div class="ttname"><a href="../../d3/df6/structast__fax__t38__parameters.html#addb721c952a7144f0a6a9ac5f621d2bc">ast_fax_t38_parameters::fill_bit_removal</a></div><div class="ttdeci">unsigned int fill_bit_removal</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00097">res_fax.h:97</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_a12cc2bfdcc88e94984d001cca6fefdc5"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a12cc2bfdcc88e94984d001cca6fefdc5">ast_fax_session_details::their_t38_parameters</a></div><div class="ttdeci">struct ast_fax_t38_parameters their_t38_parameters</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00177">res_fax.h:177</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_ad7634e872ab24fc86bb8237a6d2f4463"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#ad7634e872ab24fc86bb8237a6d2f4463">spandsp_fax_gw_gen_alloc</a></div><div class="ttdeci">static void * spandsp_fax_gw_gen_alloc(struct ast_channel *chan, void *params)</div><div class="ttdoc">simple routine to allocate data to generator </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00799">res_fax_spandsp.c:799</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7634e872ab24fc86bb8237a6d2f4463"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7634e872ab24fc86bb8237a6d2f4463">&#9670;&nbsp;</a></span>spandsp_fax_gw_gen_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* spandsp_fax_gw_gen_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>simple routine to allocate data to generator </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>channel </td></tr>
    <tr><td class="paramname">params</td><td>generator data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>data to use in generator call </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00799">799</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00813">spandsp_fax_gateway_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;{</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(params, +1);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   <span class="keywordflow">return</span> params;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7ba83daf725125984d525ed1d2461cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7ba83daf725125984d525ed1d2461cc">&#9670;&nbsp;</a></span>spandsp_fax_gw_gen_release()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spandsp_fax_gw_gen_release </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00805">805</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00813">spandsp_fax_gateway_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;{</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, -1);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afe4b8983331a6ebf8b794f6cdb318b2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe4b8983331a6ebf8b794f6cdb318b2f">&#9670;&nbsp;</a></span>spandsp_fax_gw_t30_gen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int spandsp_fax_gw_t30_gen </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>samples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>generate T.30 packets sent to the T.30 leg of gateway </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>T.30 channel </td></tr>
    <tr><td class="paramname">data</td><td>fax session structure </td></tr>
    <tr><td class="paramname">len</td><td>not used </td></tr>
    <tr><td class="paramname">samples</td><td>no of samples generated </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on failure or 0 on sucess </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00765">765</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00232">AST_FAX_FRFLAG_GATEWAY</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00208">AST_FRAME_SET_BUFFER</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">AST_FRIENDLY_OFFSET</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">ast_frisolate</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05189">ast_write()</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00148">spandsp_pvt::isdone</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00158">spandsp_pvt::t38_gw_state</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00813">spandsp_fax_gateway_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;{</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s = data;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   uint8_t buffer[<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a> + samples * <span class="keyword">sizeof</span>(uint16_t)];</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> t30_frame = {</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>,</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      .subclass.format = <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>,</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      .src = <span class="stringliteral">&quot;res_fax_spandsp_g711&quot;</span>,</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      .samples = <a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>,</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      .flags = <a class="code" href="../../db/d6a/res__fax_8h.html#a748e0695940b2d6145b9646387daa4db">AST_FAX_FRFLAG_GATEWAY</a>,</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   };</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8bc210573f6b9c55ef38662bddc4675">AST_FRAME_SET_BUFFER</a>(&amp;t30_frame, buffer, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>, t30_frame.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> * <span class="keyword">sizeof</span>(<a class="code" href="../../da/d4e/db_8h.html#aa343fa3b3d06292b959ffdd4c4703b06">int16_t</a>));</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <span class="keywordflow">if</span> (!(f = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a>(&amp;t30_frame))) {</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="keywordflow">return</span> p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#af2bd73f7c4fe9e40a5d5cb75dcbca598">isdone</a> ? -1 : res;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   }</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <span class="comment">/* generate a T.30 packet */</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <span class="keywordflow">if</span> ((f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = t38_gateway_tx(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>))) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> * <span class="keyword">sizeof</span>(<a class="code" href="../../da/d4e/db_8h.html#aa343fa3b3d06292b959ffdd4c4703b06">int16_t</a>);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#a79c413d51b7135404d5cacf811649a61">ast_write</a>(chan, f);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   }</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   <span class="keywordflow">return</span> p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#af2bd73f7c4fe9e40a5d5cb75dcbca598">isdone</a> ? -1 : res;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;}</div><div class="ttc" id="res__fax_8h_html_a748e0695940b2d6145b9646387daa4db"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a748e0695940b2d6145b9646387daa4db">AST_FAX_FRFLAG_GATEWAY</a></div><div class="ttdeci">#define AST_FAX_FRFLAG_GATEWAY</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00232">res_fax.h:232</a></div></div>
<div class="ttc" id="db_8h_html_aa343fa3b3d06292b959ffdd4c4703b06"><div class="ttname"><a href="../../da/d4e/db_8h.html#aa343fa3b3d06292b959ffdd4c4703b06">int16_t</a></div><div class="ttdeci">short int16_t</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4e/db_8h_source.html#l00059">db.h:59</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8f7380b8620c80443286b44481f641c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a></div><div class="ttdeci">#define AST_FRIENDLY_OFFSET</div><div class="ttdoc">Offset into a frame&amp;#39;s data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">include/asterisk/frame.h:229</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_ad8cd454d1a02eee0cc27ea8819530ecd"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">spandsp_pvt::t38_gw_state</a></div><div class="ttdeci">t38_gateway_state_t t38_gw_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00158">res_fax_spandsp.c:158</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8bc210573f6b9c55ef38662bddc4675"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8bc210573f6b9c55ef38662bddc4675">AST_FRAME_SET_BUFFER</a></div><div class="ttdeci">#define AST_FRAME_SET_BUFFER(fr, _base, _ofs, _datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00208">include/asterisk/frame.h:208</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_af2bd73f7c4fe9e40a5d5cb75dcbca598"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#af2bd73f7c4fe9e40a5d5cb75dcbca598">spandsp_pvt::isdone</a></div><div class="ttdeci">unsigned int isdone</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00148">res_fax_spandsp.c:148</a></div></div>
<div class="ttc" id="channel_8h_html_a79c413d51b7135404d5cacf811649a61"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a79c413d51b7135404d5cacf811649a61">ast_write</a></div><div class="ttdeci">int ast_write(struct ast_channel *chan, struct ast_frame *frame)</div><div class="ttdoc">Write a frame to a channel This function writes the given frame to the indicated channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05189">channel.c:5189</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a314496ce1d74ed7fdb9c5319c5e2e953"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a></div><div class="ttdeci">#define ast_frisolate(fr)</div><div class="ttdoc">Makes a frame independent of any static storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">include/asterisk/frame.h:577</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__fax__session_html"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html">ast_fax_session</a></div><div class="ttdoc">The data required to handle a fax session. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00202">res_fax.h:202</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6db78b000e8a71a5d7f7efba26639e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6db78b000e8a71a5d7f7efba26639e41">&#9670;&nbsp;</a></span>spandsp_fax_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void * spandsp_fax_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct ast_fax_tech_token *&#160;</td>
          <td class="paramname"><em>token</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>create an instance of the spandsp tech_pvt for a fax session </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00525">525</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00073">AST_FAX_STATE_ACTIVE</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00069">AST_FAX_STATE_INITIALIZED</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00041">AST_FAX_TECH_AUDIO</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00047">AST_FAX_TECH_GATEWAY</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00039">AST_FAX_TECH_RECEIVE</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00037">AST_FAX_TECH_SEND</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00043">AST_FAX_TECH_T38</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00049">AST_FAX_TECH_V21_DETECT</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00625">AST_LIST_HEAD_INIT</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d62/timing_8c_source.html#l00161">ast_timer_fd()</a>, <a class="el" href="../../d3/d62/timing_8c_source.html#l00122">ast_timer_open()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00113">ast_fax_session_details::caps</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00220">ast_fax_session::channame</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00208">ast_fax_session::details</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00150">spandsp_pvt::fax_state</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00206">ast_fax_session::fd</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00204">ast_fax_session::id</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">spandsp_pvt::ist38</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d70/structspandsp__pvt.html#a2ae422e03f0063ccdd76b75bad9624ec">spandsp_pvt::read_frames</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00444">set_logging()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00485">spandsp_v21_new()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00218">ast_fax_session::state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00155">spandsp_pvt::stats</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00151">spandsp_pvt::t38_state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00217">t38_tx_packet_handler()</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00160">spandsp_pvt::timer</a>.</p>
<div class="fragment"><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;{</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   <span class="keywordtype">int</span> caller_mode;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keywordflow">if</span> ((!(p = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*p))))) {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot initialize the spandsp private FAX technology structure.\n&quot;</span>);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordflow">goto</span> e_return;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c">AST_FAX_TECH_V21_DETECT</a>) {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#ac663d21c565affc72b520a9581181897">spandsp_v21_new</a>(p)) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot initialize the spandsp private v21 technology structure.\n&quot;</span>);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;         <span class="keywordflow">goto</span> e_return;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      }</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a> = <a class="code" href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112ca59afc86be1c4be9a01c3cd178c4337b2">AST_FAX_STATE_ACTIVE</a>;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="keywordflow">return</span> p;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a>) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a> = <a class="code" href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112ca11037f2ac950e3e5281b419aef13e3dc">AST_FAX_STATE_INITIALIZED</a>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">return</span> p;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6f42d3bf45cc9af6f794d9d1cf8c45ca">AST_LIST_HEAD_INIT</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2ae422e03f0063ccdd76b75bad9624ec">read_frames</a>);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a>) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      caller_mode = 0;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6adbf07d8224b1a548ccae3b994653003b">AST_FAX_TECH_SEND</a>) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      caller_mode = 1;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Are we sending or receiving? The FAX requirements (capabilities: 0x%X) were not properly set.\n&quot;</span>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a>);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordflow">goto</span> e_free;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   }</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <span class="keywordflow">if</span> (!(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9aed6490b63794e6c9c00af4533f255f">timer</a> = <a class="code" href="../../db/d41/timing_8h.html#aacc341f127efc0dc0d62f6415694174a">ast_timer_open</a>())) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Channel &#39;%s&#39; FAX session &#39;%u&#39; failed to create timing source.\n&quot;</span>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a9f716886b5b2a50ad6d2b9119502b152">channame</a>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="keywordflow">goto</span> e_free;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = <a class="code" href="../../db/d41/timing_8h.html#aa3aa7580d76e1d3f7927b3f34764dec2">ast_timer_fd</a>(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9aed6490b63794e6c9c00af4533f255f">timer</a>);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a> = &amp;<a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.g711;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; (<a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a6868445e2802e5b71068ae883366f635">AST_FAX_TECH_T38</a> | <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a76fa4111df51955a949e95fadbccd48b">AST_FAX_TECH_AUDIO</a>)) {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">if</span> ((s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a76fa4111df51955a949e95fadbccd48b">AST_FAX_TECH_AUDIO</a>) == 0) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;         <span class="comment">/* audio mode was not requested, start in T.38 mode */</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;         p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">ist38</a> = 1;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;         p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a> = &amp;<a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="comment">/* init t38 stuff */</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      t38_terminal_init(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">t38_state</a>, caller_mode, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a24efd6f18c67b0deb9973607e23f2bac">t38_tx_packet_handler</a>, s);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a7a848b476ce6571398d94f5eb74f3182">set_logging</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">t38_state</a>.logging, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="comment">/* init audio stuff */</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      fax_init(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">fax_state</a>, caller_mode);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a7a848b476ce6571398d94f5eb74f3182">set_logging</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">fax_state</a>.logging, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a> = <a class="code" href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112ca11037f2ac950e3e5281b419aef13e3dc">AST_FAX_STATE_INITIALIZED</a>;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   <span class="keywordflow">return</span> p;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;e_free:</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(p);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;e_return:</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;}</div><div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00047">res_fax.h:47</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_aa32b12a7baab4b773f3aee19dc640fdb"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">spandsp_pvt::t38_state</a></div><div class="ttdeci">t38_terminal_state_t t38_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00151">res_fax_spandsp.c:151</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6adbf07d8224b1a548ccae3b994653003b"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6adbf07d8224b1a548ccae3b994653003b">AST_FAX_TECH_SEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00037">res_fax.h:37</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c">AST_FAX_TECH_V21_DETECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00049">res_fax.h:49</a></div></div>
<div class="ttc" id="structast__fax__session_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">ast_fax_session::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00204">res_fax.h:204</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a589319dce057e148f17f370ca3ba2a95"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a></div><div class="ttdeci">static struct @462 spandsp_global_stats</div></div>
<div class="ttc" id="res__fax_8h_html_ab34810136037068a0847bcca2518112ca59afc86be1c4be9a01c3cd178c4337b2"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112ca59afc86be1c4be9a01c3cd178c4337b2">AST_FAX_STATE_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00073">res_fax.h:73</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a9aed6490b63794e6c9c00af4533f255f"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a9aed6490b63794e6c9c00af4533f255f">spandsp_pvt::timer</a></div><div class="ttdeci">struct ast_timer * timer</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00160">res_fax_spandsp.c:160</a></div></div>
<div class="ttc" id="timing_8h_html_aacc341f127efc0dc0d62f6415694174a"><div class="ttname"><a href="../../db/d41/timing_8h.html#aacc341f127efc0dc0d62f6415694174a">ast_timer_open</a></div><div class="ttdeci">struct ast_timer * ast_timer_open(void)</div><div class="ttdoc">Open a timer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00122">timing.c:122</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a9e04fe7f94b31b90af8617c4114973c6"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">spandsp_pvt::ist38</a></div><div class="ttdeci">unsigned int ist38</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">res_fax_spandsp.c:147</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6a76fa4111df51955a949e95fadbccd48b"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a76fa4111df51955a949e95fadbccd48b">AST_FAX_TECH_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00041">res_fax.h:41</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a24efd6f18c67b0deb9973607e23f2bac"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a24efd6f18c67b0deb9973607e23f2bac">t38_tx_packet_handler</a></div><div class="ttdeci">static int t38_tx_packet_handler(t38_core_state_t *t38_core_state, void *data, const uint8_t *buf, int len, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00217">res_fax_spandsp.c:217</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a2ae422e03f0063ccdd76b75bad9624ec"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a2ae422e03f0063ccdd76b75bad9624ec">spandsp_pvt::read_frames</a></div><div class="ttdeci">struct spandsp_pvt::frame_queue read_frames</div></div>
<div class="ttc" id="res__fax_8h_html_ab34810136037068a0847bcca2518112ca11037f2ac950e3e5281b419aef13e3dc"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112ca11037f2ac950e3e5281b419aef13e3dc">AST_FAX_STATE_INITIALIZED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00069">res_fax.h:69</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00039">res_fax.h:39</a></div></div>
<div class="ttc" id="structast__fax__session_html_ae7b633178d301df70e8612b4ce1aeb77"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">ast_fax_session::details</a></div><div class="ttdeci">struct ast_fax_session_details * details</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00208">res_fax.h:208</a></div></div>
<div class="ttc" id="structast__fax__session_html_a9f716886b5b2a50ad6d2b9119502b152"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a9f716886b5b2a50ad6d2b9119502b152">ast_fax_session::channame</a></div><div class="ttdeci">char * channame</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00220">res_fax.h:220</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6a6868445e2802e5b71068ae883366f635"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a6868445e2802e5b71068ae883366f635">AST_FAX_TECH_T38</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00043">res_fax.h:43</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a7a848b476ce6571398d94f5eb74f3182"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a7a848b476ce6571398d94f5eb74f3182">set_logging</a></div><div class="ttdeci">static void set_logging(logging_state_t *state, struct ast_fax_session_details *details)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00444">res_fax_spandsp.c:444</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a1b5003edd88843375153c462a72343f3"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">spandsp_pvt::stats</a></div><div class="ttdeci">struct spandsp_fax_stats * stats</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00155">res_fax_spandsp.c:155</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6f42d3bf45cc9af6f794d9d1cf8c45ca"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6f42d3bf45cc9af6f794d9d1cf8c45ca">AST_LIST_HEAD_INIT</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00625">linkedlists.h:625</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structast__fax__session_html_ad8f346e1752edcc0b1a6b431b1749f0e"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">ast_fax_session::state</a></div><div class="ttdeci">enum ast_fax_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00218">res_fax.h:218</a></div></div>
<div class="ttc" id="structast__fax__session_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a6f8059414f0228f0256115e024eeed4b">ast_fax_session::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00206">res_fax.h:206</a></div></div>
<div class="ttc" id="timing_8h_html_aa3aa7580d76e1d3f7927b3f34764dec2"><div class="ttname"><a href="../../db/d41/timing_8h.html#aa3aa7580d76e1d3f7927b3f34764dec2">ast_timer_fd</a></div><div class="ttdeci">int ast_timer_fd(const struct ast_timer *handle)</div><div class="ttdoc">Get a poll()-able file descriptor for a timer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00161">timing.c:161</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_ad75375cdd336e91cbcee4a829fcdabfe"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">ast_fax_session_details::caps</a></div><div class="ttdeci">enum ast_fax_capabilities caps</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00113">res_fax.h:113</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_ac663d21c565affc72b520a9581181897"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#ac663d21c565affc72b520a9581181897">spandsp_v21_new</a></div><div class="ttdeci">static int spandsp_v21_new(struct spandsp_pvt *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00485">res_fax_spandsp.c:485</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a6209294447011868d1a0ec7373bb90b5"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">spandsp_pvt::fax_state</a></div><div class="ttdeci">fax_state_t fax_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00150">res_fax_spandsp.c:150</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b40a2b701ed0e7b0486409c8e3bc03f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b40a2b701ed0e7b0486409c8e3bc03f">&#9670;&nbsp;</a></span>spandsp_fax_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> * spandsp_fax_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read a frame from the spandsp fax stack. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00622">622</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00075">AST_FAX_STATE_COMPLETE</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00208">AST_FRAME_SET_BUFFER</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">AST_FRIENDLY_OFFSET</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">ast_frisolate</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../d3/d62/timing_8c_source.html#l00171">ast_timer_ack()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00150">spandsp_pvt::fax_state</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00204">ast_fax_session::id</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00148">spandsp_pvt::isdone</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">spandsp_pvt::ist38</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d70/structspandsp__pvt.html#a2ae422e03f0063ccdd76b75bad9624ec">spandsp_pvt::read_frames</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00070">SPANDSP_FAX_SAMPLES</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00218">ast_fax_session::state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00151">spandsp_pvt::t38_state</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00160">spandsp_pvt::timer</a>.</p>
<div class="fragment"><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;{</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   uint8_t buffer[<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a> + <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a26afae7dd9d256776976330e21298e68">SPANDSP_FAX_SAMPLES</a> * <span class="keyword">sizeof</span>(uint16_t)];</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <a class="code" href="../../da/d4e/db_8h.html#aa343fa3b3d06292b959ffdd4c4703b06">int16_t</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = (<a class="code" href="../../da/d4e/db_8h.html#aa343fa3b3d06292b959ffdd4c4703b06">int16_t</a> *) (buffer + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <span class="keywordtype">int</span> samples;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> fax_frame = {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>,</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      .src = <span class="stringliteral">&quot;res_fax_spandsp_g711&quot;</span>,</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      .subclass.format = <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>,</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   };</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = &amp;fax_frame;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/d41/timing_8h.html#a338edb7e927b891ef4aba288d9c07e56">ast_timer_ack</a>(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9aed6490b63794e6c9c00af4533f255f">timer</a>, 1) &lt; 0) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to acknowledge timer for FAX session &#39;%u&#39;\n&quot;</span>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <span class="comment">/* XXX do we need to lock here? */</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#af2bd73f7c4fe9e40a5d5cb75dcbca598">isdone</a>) {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a> = <a class="code" href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112ca89690cf17e4dd810bc40e657ac1d6213">AST_FAX_STATE_COMPLETE</a>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;FAX session &#39;%u&#39; is complete.\n&quot;</span>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">ist38</a>) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      t38_terminal_send_timeout(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">t38_state</a>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a26afae7dd9d256776976330e21298e68">SPANDSP_FAX_SAMPLES</a>);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="keywordflow">if</span> ((f = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2ae422e03f0063ccdd76b75bad9624ec">read_frames</a>, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>))) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;         <span class="keywordflow">return</span> f;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="keywordflow">if</span> ((samples = fax_tx(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">fax_state</a>, buf, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a26afae7dd9d256776976330e21298e68">SPANDSP_FAX_SAMPLES</a>)) &gt; 0) {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;         f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = <a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8bc210573f6b9c55ef38662bddc4675">AST_FRAME_SET_BUFFER</a>(f, buffer, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>, samples * <span class="keyword">sizeof</span>(<a class="code" href="../../da/d4e/db_8h.html#aa343fa3b3d06292b959ffdd4c4703b06">int16_t</a>));</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a>(f);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div><div class="ttc" id="structspandsp__pvt_html_aa32b12a7baab4b773f3aee19dc640fdb"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">spandsp_pvt::t38_state</a></div><div class="ttdeci">t38_terminal_state_t t38_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00151">res_fax_spandsp.c:151</a></div></div>
<div class="ttc" id="db_8h_html_aa343fa3b3d06292b959ffdd4c4703b06"><div class="ttname"><a href="../../da/d4e/db_8h.html#aa343fa3b3d06292b959ffdd4c4703b06">int16_t</a></div><div class="ttdeci">short int16_t</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4e/db_8h_source.html#l00059">db.h:59</a></div></div>
<div class="ttc" id="structast__fax__session_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">ast_fax_session::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00204">res_fax.h:204</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a9aed6490b63794e6c9c00af4533f255f"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a9aed6490b63794e6c9c00af4533f255f">spandsp_pvt::timer</a></div><div class="ttdeci">struct ast_timer * timer</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00160">res_fax_spandsp.c:160</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a9e04fe7f94b31b90af8617c4114973c6"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">spandsp_pvt::ist38</a></div><div class="ttdeci">unsigned int ist38</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">res_fax_spandsp.c:147</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a2ae422e03f0063ccdd76b75bad9624ec"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a2ae422e03f0063ccdd76b75bad9624ec">spandsp_pvt::read_frames</a></div><div class="ttdeci">struct spandsp_pvt::frame_queue read_frames</div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8f7380b8620c80443286b44481f641c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a></div><div class="ttdeci">#define AST_FRIENDLY_OFFSET</div><div class="ttdoc">Offset into a frame&amp;#39;s data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">include/asterisk/frame.h:229</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="timing_8h_html_a338edb7e927b891ef4aba288d9c07e56"><div class="ttname"><a href="../../db/d41/timing_8h.html#a338edb7e927b891ef4aba288d9c07e56">ast_timer_ack</a></div><div class="ttdeci">int ast_timer_ack(const struct ast_timer *handle, unsigned int quantity)</div><div class="ttdoc">Acknowledge a timer event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00171">timing.c:171</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8bc210573f6b9c55ef38662bddc4675"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8bc210573f6b9c55ef38662bddc4675">AST_FRAME_SET_BUFFER</a></div><div class="ttdeci">#define AST_FRAME_SET_BUFFER(fr, _base, _ofs, _datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00208">include/asterisk/frame.h:208</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_af2bd73f7c4fe9e40a5d5cb75dcbca598"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#af2bd73f7c4fe9e40a5d5cb75dcbca598">spandsp_pvt::isdone</a></div><div class="ttdeci">unsigned int isdone</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00148">res_fax_spandsp.c:148</a></div></div>
<div class="ttc" id="structast__fax__session_html_ad8f346e1752edcc0b1a6b431b1749f0e"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">ast_fax_session::state</a></div><div class="ttdeci">enum ast_fax_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00218">res_fax.h:218</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a314496ce1d74ed7fdb9c5319c5e2e953"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a></div><div class="ttdeci">#define ast_frisolate(fr)</div><div class="ttdoc">Makes a frame independent of any static storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">include/asterisk/frame.h:577</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a26afae7dd9d256776976330e21298e68"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a26afae7dd9d256776976330e21298e68">SPANDSP_FAX_SAMPLES</a></div><div class="ttdeci">#define SPANDSP_FAX_SAMPLES</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00070">res_fax_spandsp.c:70</a></div></div>
<div class="ttc" id="res__fax_8h_html_ab34810136037068a0847bcca2518112ca89690cf17e4dd810bc40e657ac1d6213"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112ca89690cf17e4dd810bc40e657ac1d6213">AST_FAX_STATE_COMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00075">res_fax.h:75</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a6209294447011868d1a0ec7373bb90b5"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">spandsp_pvt::fax_state</a></div><div class="ttdeci">fax_state_t fax_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00150">res_fax_spandsp.c:150</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae8ab5a74bae7f83dd7cad98eb9deeb98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8ab5a74bae7f83dd7cad98eb9deeb98">&#9670;&nbsp;</a></span>spandsp_fax_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int spandsp_fax_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00929">929</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00073">AST_FAX_STATE_ACTIVE</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00071">AST_FAX_STATE_OPEN</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00047">AST_FAX_TECH_GATEWAY</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d62/timing_8c_source.html#l00166">ast_timer_set_rate()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00113">ast_fax_session_details::caps</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00208">ast_fax_session::details</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00150">spandsp_pvt::fax_state</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00097">ast_fax_t38_parameters::fill_bit_removal</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00204">ast_fax_session::id</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">spandsp_pvt::ist38</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00094">ast_fax_t38_parameters::max_ifp</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00479">set_ecm()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00467">set_file()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00456">set_local_info()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00444">set_logging()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00813">spandsp_fax_gateway_start()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00071">SPANDSP_FAX_TIMER_RATE</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00499">spandsp_modems()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00218">ast_fax_session::state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00378">t30_phase_e_handler()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00152">spandsp_pvt::t30_state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00153">spandsp_pvt::t38_core_state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00151">spandsp_pvt::t38_state</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00177">ast_fax_session_details::their_t38_parameters</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00160">spandsp_pvt::timer</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00099">ast_fax_t38_parameters::transcoding_jbig</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00098">ast_fax_t38_parameters::transcoding_mmr</a>, and <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l00518">TRUE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01021">spandsp_fax_switch_to_t38()</a>.</p>
<div class="fragment"><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;{</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a> = <a class="code" href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112cad0225f93f7c72e6071a0e2c459ec213c">AST_FAX_STATE_OPEN</a>;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a>) {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#aca5062a395eb7c74d0109ba1f4d11b89">spandsp_fax_gateway_start</a>(s);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;   }</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">ist38</a>) {</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="preprocessor">#if SPANDSP_RELEASE_DATE &gt;= 20080725</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <span class="comment">/* for spandsp shaphots 0.0.6 and higher */</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a> = &amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">t38_state</a>.t30;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a> = &amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">t38_state</a>.t38_fe.t38;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <span class="comment">/* for spandsp releases 0.0.5 */</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a> = &amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">t38_state</a>.t30_state;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a> = &amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">t38_state</a>.t38;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="preprocessor">#if SPANDSP_RELEASE_DATE &gt;= 20080725</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <span class="comment">/* for spandsp shaphots 0.0.6 and higher */</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a> = &amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">fax_state</a>.t30;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="comment">/* for spandsp release 0.0.5 */</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a> = &amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">fax_state</a>.t30_state;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   }</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a7a848b476ce6571398d94f5eb74f3182">set_logging</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>-&gt;logging, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   <span class="comment">/* set some parameters */</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a985020177397f3b53f8c375b9f5555a9">set_local_info</a>(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;   <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a5fa4f4dc494fc66a1764e00783006b75">set_file</a>(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#ae4ab2698fa08f5133c8241c9d2c3bfa4">set_ecm</a>(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;   t30_set_supported_modems(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a727760f4638f2c84101218ce5e89d567">spandsp_modems</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>));</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;   <span class="comment">/* perhaps set_transmit_on_idle() should be called */</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   t30_set_phase_e_handler(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a12890f182233a7dfd042518081c71cce">t30_phase_e_handler</a>, s);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;   <span class="comment">/* set T.38 parameters */</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">ist38</a>) {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a7a848b476ce6571398d94f5eb74f3182">set_logging</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>-&gt;logging, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      t38_set_max_datagram_size(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a12cc2bfdcc88e94984d001cca6fefdc5">their_t38_parameters</a>.<a class="code" href="../../d3/df6/structast__fax__t38__parameters.html#a7924cc45cde640e779a902c4aadaf180">max_ifp</a>);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a12cc2bfdcc88e94984d001cca6fefdc5">their_t38_parameters</a>.<a class="code" href="../../d3/df6/structast__fax__t38__parameters.html#addb721c952a7144f0a6a9ac5f621d2bc">fill_bit_removal</a>) {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;         t38_set_fill_bit_removal(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>, <a class="code" href="../../de/dfe/app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      }</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a12cc2bfdcc88e94984d001cca6fefdc5">their_t38_parameters</a>.<a class="code" href="../../d3/df6/structast__fax__t38__parameters.html#ad2b3d53474db70e3ff2058da953b7b82">transcoding_mmr</a>) {</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;         t38_set_mmr_transcoding(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>, <a class="code" href="../../de/dfe/app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      }</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a12cc2bfdcc88e94984d001cca6fefdc5">their_t38_parameters</a>.<a class="code" href="../../d3/df6/structast__fax__t38__parameters.html#a07676322ec48c4872f9a208a6248d034">transcoding_jbig</a>) {</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;         t38_set_jbig_transcoding(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>, <a class="code" href="../../de/dfe/app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="comment">/* have the fax stack generate silence if it has no data to send */</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      fax_set_transmit_on_idle(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">fax_state</a>, 1);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   <span class="comment">/* start the timer */</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/d41/timing_8h.html#a4dae39fb5fb680a48a05d7567053eb03">ast_timer_set_rate</a>(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9aed6490b63794e6c9c00af4533f255f">timer</a>, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a9865dea3c8d3c70c21e466560f339210">SPANDSP_FAX_TIMER_RATE</a>)) {</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;FAX session &#39;%u&#39; error setting rate on timing source.\n&quot;</span>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   }</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;   s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a> = <a class="code" href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112ca59afc86be1c4be9a01c3cd178c4337b2">AST_FAX_STATE_ACTIVE</a>;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;}</div><div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00047">res_fax.h:47</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a727760f4638f2c84101218ce5e89d567"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a727760f4638f2c84101218ce5e89d567">spandsp_modems</a></div><div class="ttdeci">static int spandsp_modems(struct ast_fax_session_details *details)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00499">res_fax_spandsp.c:499</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_aa32b12a7baab4b773f3aee19dc640fdb"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#aa32b12a7baab4b773f3aee19dc640fdb">spandsp_pvt::t38_state</a></div><div class="ttdeci">t38_terminal_state_t t38_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00151">res_fax_spandsp.c:151</a></div></div>
<div class="ttc" id="structast__fax__session_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">ast_fax_session::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00204">res_fax.h:204</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_ae4ab2698fa08f5133c8241c9d2c3bfa4"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#ae4ab2698fa08f5133c8241c9d2c3bfa4">set_ecm</a></div><div class="ttdeci">static void set_ecm(t30_state_t *t30_state, struct ast_fax_session_details *details)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00479">res_fax_spandsp.c:479</a></div></div>
<div class="ttc" id="res__fax_8h_html_ab34810136037068a0847bcca2518112ca59afc86be1c4be9a01c3cd178c4337b2"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112ca59afc86be1c4be9a01c3cd178c4337b2">AST_FAX_STATE_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00073">res_fax.h:73</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a9aed6490b63794e6c9c00af4533f255f"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a9aed6490b63794e6c9c00af4533f255f">spandsp_pvt::timer</a></div><div class="ttdeci">struct ast_timer * timer</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00160">res_fax_spandsp.c:160</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a9e04fe7f94b31b90af8617c4114973c6"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">spandsp_pvt::ist38</a></div><div class="ttdeci">unsigned int ist38</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">res_fax_spandsp.c:147</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_aca5062a395eb7c74d0109ba1f4d11b89"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#aca5062a395eb7c74d0109ba1f4d11b89">spandsp_fax_gateway_start</a></div><div class="ttdeci">static int spandsp_fax_gateway_start(struct ast_fax_session *s)</div><div class="ttdoc">activate a spandsp gateway based on the information in the given fax session </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00813">res_fax_spandsp.c:813</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a2771e36a55ef2406a468f480426f3f90"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">spandsp_pvt::t38_core_state</a></div><div class="ttdeci">t38_core_state_t * t38_core_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00153">res_fax_spandsp.c:153</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__fax__session_html_ae7b633178d301df70e8612b4ce1aeb77"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">ast_fax_session::details</a></div><div class="ttdeci">struct ast_fax_session_details * details</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00208">res_fax.h:208</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a12890f182233a7dfd042518081c71cce"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a12890f182233a7dfd042518081c71cce">t30_phase_e_handler</a></div><div class="ttdeci">static void t30_phase_e_handler(t30_state_t *t30_state, void *data, int completion_code)</div><div class="ttdoc">Phase E handler callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00378">res_fax_spandsp.c:378</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a7a848b476ce6571398d94f5eb74f3182"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a7a848b476ce6571398d94f5eb74f3182">set_logging</a></div><div class="ttdeci">static void set_logging(logging_state_t *state, struct ast_fax_session_details *details)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00444">res_fax_spandsp.c:444</a></div></div>
<div class="ttc" id="structast__fax__t38__parameters_html_ad2b3d53474db70e3ff2058da953b7b82"><div class="ttname"><a href="../../d3/df6/structast__fax__t38__parameters.html#ad2b3d53474db70e3ff2058da953b7b82">ast_fax_t38_parameters::transcoding_mmr</a></div><div class="ttdeci">unsigned int transcoding_mmr</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00098">res_fax.h:98</a></div></div>
<div class="ttc" id="structast__fax__t38__parameters_html_a07676322ec48c4872f9a208a6248d034"><div class="ttname"><a href="../../d3/df6/structast__fax__t38__parameters.html#a07676322ec48c4872f9a208a6248d034">ast_fax_t38_parameters::transcoding_jbig</a></div><div class="ttdeci">unsigned int transcoding_jbig</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00099">res_fax.h:99</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__fax__t38__parameters_html_a7924cc45cde640e779a902c4aadaf180"><div class="ttname"><a href="../../d3/df6/structast__fax__t38__parameters.html#a7924cc45cde640e779a902c4aadaf180">ast_fax_t38_parameters::max_ifp</a></div><div class="ttdeci">unsigned int max_ifp</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00094">res_fax.h:94</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a5fa4f4dc494fc66a1764e00783006b75"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a5fa4f4dc494fc66a1764e00783006b75">set_file</a></div><div class="ttdeci">static void set_file(t30_state_t *t30_state, struct ast_fax_session_details *details)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00467">res_fax_spandsp.c:467</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_adcd6f30baf585999693211a967c2db61"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">spandsp_pvt::t30_state</a></div><div class="ttdeci">t30_state_t * t30_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00152">res_fax_spandsp.c:152</a></div></div>
<div class="ttc" id="structast__fax__session_html_ad8f346e1752edcc0b1a6b431b1749f0e"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">ast_fax_session::state</a></div><div class="ttdeci">enum ast_fax_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00218">res_fax.h:218</a></div></div>
<div class="ttc" id="timing_8h_html_a4dae39fb5fb680a48a05d7567053eb03"><div class="ttname"><a href="../../db/d41/timing_8h.html#a4dae39fb5fb680a48a05d7567053eb03">ast_timer_set_rate</a></div><div class="ttdeci">int ast_timer_set_rate(const struct ast_timer *handle, unsigned int rate)</div><div class="ttdoc">Set the timing tick rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00166">timing.c:166</a></div></div>
<div class="ttc" id="res__fax_8h_html_ab34810136037068a0847bcca2518112cad0225f93f7c72e6071a0e2c459ec213c"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112cad0225f93f7c72e6071a0e2c459ec213c">AST_FAX_STATE_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00071">res_fax.h:71</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a985020177397f3b53f8c375b9f5555a9"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a985020177397f3b53f8c375b9f5555a9">set_local_info</a></div><div class="ttdeci">static void set_local_info(t30_state_t *t30_state, struct ast_fax_session_details *details)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00456">res_fax_spandsp.c:456</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a9865dea3c8d3c70c21e466560f339210"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a9865dea3c8d3c70c21e466560f339210">SPANDSP_FAX_TIMER_RATE</a></div><div class="ttdeci">#define SPANDSP_FAX_TIMER_RATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00071">res_fax_spandsp.c:71</a></div></div>
<div class="ttc" id="app__minivm_8c_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../de/dfe/app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/app__minivm_8c_source.html#l00518">app_minivm.c:518</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_ad75375cdd336e91cbcee4a829fcdabfe"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">ast_fax_session_details::caps</a></div><div class="ttdeci">enum ast_fax_capabilities caps</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00113">res_fax.h:113</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structast__fax__t38__parameters_html_addb721c952a7144f0a6a9ac5f621d2bc"><div class="ttname"><a href="../../d3/df6/structast__fax__t38__parameters.html#addb721c952a7144f0a6a9ac5f621d2bc">ast_fax_t38_parameters::fill_bit_removal</a></div><div class="ttdeci">unsigned int fill_bit_removal</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00097">res_fax.h:97</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_a12cc2bfdcc88e94984d001cca6fefdc5"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a12cc2bfdcc88e94984d001cca6fefdc5">ast_fax_session_details::their_t38_parameters</a></div><div class="ttdeci">struct ast_fax_t38_parameters their_t38_parameters</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00177">res_fax.h:177</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a6209294447011868d1a0ec7373bb90b5"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">spandsp_pvt::fax_state</a></div><div class="ttdeci">fax_state_t fax_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00150">res_fax_spandsp.c:150</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a41b864f49450e34700ff878ffc337192"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41b864f49450e34700ff878ffc337192">&#9670;&nbsp;</a></span>spandsp_fax_switch_to_t38()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int spandsp_fax_switch_to_t38 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01021">1021</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00208">ast_fax_session::details</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">spandsp_pvt::ist38</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">ast_fax_session_details::option</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00929">spandsp_fax_start()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00155">spandsp_pvt::stats</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00159">ast_fax_session_details::switch_to_t38</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00137">spandsp_fax_stats::switched</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00152">spandsp_pvt::t30_state</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>.</p>
<div class="fragment"><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;{</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   <span class="comment">/* prevent the phase E handler from running, this is not a real termination */</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   t30_set_phase_e_handler(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   t30_terminate(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;   s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">option</a>.<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a84169e19a7a3f0c9401ad500f0c50f54">switch_to_t38</a> = 1;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#a38e2c3144ba423a7ddfdcbea40cc798c">switched</a>, 1);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;   p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">ist38</a> = 1;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a> = &amp;<a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.t38;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#ae8ab5a74bae7f83dd7cad98eb9deeb98">spandsp_fax_start</a>(s);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;}</div><div class="ttc" id="res__fax__spandsp_8c_html_a589319dce057e148f17f370ca3ba2a95"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a></div><div class="ttdeci">static struct @462 spandsp_global_stats</div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_ae8ab5a74bae7f83dd7cad98eb9deeb98"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#ae8ab5a74bae7f83dd7cad98eb9deeb98">spandsp_fax_start</a></div><div class="ttdeci">static int spandsp_fax_start(struct ast_fax_session *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00929">res_fax_spandsp.c:929</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_a84169e19a7a3f0c9401ad500f0c50f54"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a84169e19a7a3f0c9401ad500f0c50f54">ast_fax_session_details::switch_to_t38</a></div><div class="ttdeci">uint32_t switch_to_t38</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00159">res_fax.h:159</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a9e04fe7f94b31b90af8617c4114973c6"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">spandsp_pvt::ist38</a></div><div class="ttdeci">unsigned int ist38</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">res_fax_spandsp.c:147</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_a3ab211dbe8780b7292257f6b3dba1952"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">ast_fax_session_details::option</a></div><div class="ttdeci">union ast_fax_session_details::@290 option</div></div>
<div class="ttc" id="structast__fax__session_html_ae7b633178d301df70e8612b4ce1aeb77"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">ast_fax_session::details</a></div><div class="ttdeci">struct ast_fax_session_details * details</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00208">res_fax.h:208</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a1b5003edd88843375153c462a72343f3"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">spandsp_pvt::stats</a></div><div class="ttdeci">struct spandsp_fax_stats * stats</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00155">res_fax_spandsp.c:155</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_adcd6f30baf585999693211a967c2db61"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">spandsp_pvt::t30_state</a></div><div class="ttdeci">t30_state_t * t30_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00152">res_fax_spandsp.c:152</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structspandsp__fax__stats_html_a38e2c3144ba423a7ddfdcbea40cc798c"><div class="ttname"><a href="../../dd/df2/structspandsp__fax__stats.html#a38e2c3144ba423a7ddfdcbea40cc798c">spandsp_fax_stats::switched</a></div><div class="ttdeci">int switched</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00137">res_fax_spandsp.c:137</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed0bd5d9c0943587312263618faaf6c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed0bd5d9c0943587312263618faaf6c3">&#9670;&nbsp;</a></span>spandsp_fax_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int spandsp_fax_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write a frame to the spandsp fax stack. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>a fax session </td></tr>
    <tr><td class="paramname">f</td><td>the frame to write</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>res_fax does not currently use the return value of this function. Also the fax_rx() function never fails.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00734">734</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00075">AST_FAX_STATE_COMPLETE</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l01013">ast_fax_state_to_str()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00047">AST_FAX_TECH_GATEWAY</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00049">AST_FAX_TECH_V21_DETECT</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00113">ast_fax_session_details::caps</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00208">ast_fax_session::details</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00150">spandsp_pvt::fax_state</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00204">ast_fax_session::id</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">spandsp_pvt::ist38</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">ast_frame::seqno</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00894">spandsp_fax_gateway_process()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00673">spandsp_v21_detect()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00218">ast_fax_session::state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00153">spandsp_pvt::t38_core_state</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>.</p>
<div class="fragment"><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;{</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c">AST_FAX_TECH_V21_DETECT</a>) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#adaa7af133c27e45f416759d9552f0775">spandsp_v21_detect</a>(s, f);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   }</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a>) {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a8162670509872b734477d174e39a073e">spandsp_fax_gateway_process</a>(s, f);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   }</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <span class="comment">/* XXX do we need to lock here? */</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a> == <a class="code" href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112ca89690cf17e4dd810bc40e657ac1d6213">AST_FAX_STATE_COMPLETE</a>) {</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;FAX session &#39;%u&#39; is in the &#39;%s&#39; state.\n&quot;</span>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>, <a class="code" href="../../db/d6a/res__fax_8h.html#a70598462f8d1c09bb43e7a7091498e53">ast_fax_state_to_str</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a>));</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   }</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">ist38</a>) {</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="keywordflow">return</span> t38_core_rx_ifp_packet(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">t38_core_state</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <span class="keywordflow">return</span> fax_rx(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">fax_state</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   }</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;}</div><div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00047">res_fax.h:47</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_adaa7af133c27e45f416759d9552f0775"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#adaa7af133c27e45f416759d9552f0775">spandsp_v21_detect</a></div><div class="ttdeci">static int spandsp_v21_detect(struct ast_fax_session *s, const struct ast_frame *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00673">res_fax_spandsp.c:673</a></div></div>
<div class="ttc" id="structast__frame_html_ab793262012344621455faf9266acbac2"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">ast_frame::seqno</a></div><div class="ttdeci">int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">include/asterisk/frame.h:195</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c">AST_FAX_TECH_V21_DETECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00049">res_fax.h:49</a></div></div>
<div class="ttc" id="structast__fax__session_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">ast_fax_session::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00204">res_fax.h:204</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a9e04fe7f94b31b90af8617c4114973c6"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a9e04fe7f94b31b90af8617c4114973c6">spandsp_pvt::ist38</a></div><div class="ttdeci">unsigned int ist38</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00147">res_fax_spandsp.c:147</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a8162670509872b734477d174e39a073e"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a8162670509872b734477d174e39a073e">spandsp_fax_gateway_process</a></div><div class="ttdeci">static int spandsp_fax_gateway_process(struct ast_fax_session *s, const struct ast_frame *f)</div><div class="ttdoc">process a frame from the bridge </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00894">res_fax_spandsp.c:894</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a2771e36a55ef2406a468f480426f3f90"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a2771e36a55ef2406a468f480426f3f90">spandsp_pvt::t38_core_state</a></div><div class="ttdeci">t38_core_state_t * t38_core_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00153">res_fax_spandsp.c:153</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structast__fax__session_html_ae7b633178d301df70e8612b4ce1aeb77"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">ast_fax_session::details</a></div><div class="ttdeci">struct ast_fax_session_details * details</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00208">res_fax.h:208</a></div></div>
<div class="ttc" id="structast__fax__session_html_ad8f346e1752edcc0b1a6b431b1749f0e"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">ast_fax_session::state</a></div><div class="ttdeci">enum ast_fax_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00218">res_fax.h:218</a></div></div>
<div class="ttc" id="res__fax_8h_html_ab34810136037068a0847bcca2518112ca89690cf17e4dd810bc40e657ac1d6213"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112ca89690cf17e4dd810bc40e657ac1d6213">AST_FAX_STATE_COMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00075">res_fax.h:75</a></div></div>
<div class="ttc" id="res__fax_8h_html_a70598462f8d1c09bb43e7a7091498e53"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a70598462f8d1c09bb43e7a7091498e53">ast_fax_state_to_str</a></div><div class="ttdeci">const char * ast_fax_state_to_str(enum ast_fax_state state)</div><div class="ttdoc">convert an ast_fax_state to a string </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d60/res__fax_8c_source.html#l01013">res_fax.c:1013</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_ad75375cdd336e91cbcee4a829fcdabfe"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">ast_fax_session_details::caps</a></div><div class="ttdeci">enum ast_fax_capabilities caps</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00113">res_fax.h:113</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a6209294447011868d1a0ec7373bb90b5"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a6209294447011868d1a0ec7373bb90b5">spandsp_pvt::fax_state</a></div><div class="ttdeci">fax_state_t fax_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00150">res_fax_spandsp.c:150</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1358377ae5cb4e9a6f1b2f03c5555b0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1358377ae5cb4e9a6f1b2f03c5555b0e">&#9670;&nbsp;</a></span>spandsp_log()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spandsp_log </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send spandsp log messages to asterisk. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>the spandsp logging level </td></tr>
    <tr><td class="paramname">msg</td><td>the log message</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function is a callback function called by spandsp. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00433">433</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d60/res__fax_8c_source.html#l01036">ast_fax_log()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00241">LOG_DEBUG</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00444">set_logging()</a>.</p>
<div class="fragment"><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;{</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   <span class="keywordflow">if</span> (level == SPAN_LOG_ERROR) {</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s&quot;</span>, msg);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (level == SPAN_LOG_WARNING) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;%s&quot;</span>, msg);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <a class="code" href="../../db/d6a/res__fax_8h.html#abb5f973c1052179a51f936be5c43a852">ast_fax_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, msg);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="logger_8h_html_a6ff63e8955665c4a58b1598f2b07c51a"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00241">logger.h:241</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__fax_8h_html_abb5f973c1052179a51f936be5c43a852"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#abb5f973c1052179a51f936be5c43a852">ast_fax_log</a></div><div class="ttdeci">void ast_fax_log(int level, const char *file, const int line, const char *function, const char *msg)</div><div class="ttdoc">Log message at FAX or recommended level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d60/res__fax_8c_source.html#l01036">res_fax.c:1036</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46ff23b63408b9b6d29a0ed01cdb424d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46ff23b63408b9b6d29a0ed01cdb424d">&#9670;&nbsp;</a></span>spandsp_manager_fax_session()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spandsp_manager_fax_session </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id_text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01105">1105</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04254">ast_fax_session_operation_str()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l01013">ast_fax_state_to_str()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00067">AST_FAX_STATE_UNINITIALIZED</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00047">AST_FAX_TECH_GATEWAY</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00039">AST_FAX_TECH_RECEIVE</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00037">AST_FAX_TECH_SEND</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00049">AST_FAX_TECH_V21_DETECT</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00113">ast_fax_session_details::caps</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00208">ast_fax_session::details</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00204">ast_fax_session::id</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00218">ast_fax_session::state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00155">spandsp_pvt::stats</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00152">spandsp_pvt::t30_state</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00158">spandsp_pvt::t38_gw_state</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>.</p>
<div class="fragment"><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;{</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *message_string;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *span_pvt = session-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;   message_string = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(128);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   <span class="keywordflow">if</span> (!message_string) {</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   }</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(session);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   res = <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;SessionNumber: %u\r\n&quot;</span>, session-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;Operation: %s\r\n&quot;</span>, <a class="code" href="../../db/d6a/res__fax_8h.html#a1b9314c7e94b0f3b703c975b0854519f">ast_fax_session_operation_str</a>(session));</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;State: %s\r\n&quot;</span>, <a class="code" href="../../db/d6a/res__fax_8h.html#a70598462f8d1c09bb43e7a7091498e53">ast_fax_state_to_str</a>(session-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a>));</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a>) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      t38_stats_t <a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a> == <a class="code" href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112cad2e2632aa1b6333fcd0e89c554d0df54">AST_FAX_STATE_UNINITIALIZED</a>) {</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;         <span class="keywordflow">goto</span> skip_cap_additions;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      }</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      t38_gateway_get_transfer_statistics(&amp;span_pvt-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">t38_gw_state</a>, &amp;stats);</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;ErrorCorrectionMode: %s\r\n&quot;</span>,</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;         stats.error_correcting_mode ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;DataRate: %d\r\n&quot;</span>,</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;         stats.bit_rate);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;PageNumber: %d\r\n&quot;</span>,</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;         stats.pages_transferred + 1);</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(session-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c">AST_FAX_TECH_V21_DETECT</a>)) { <span class="comment">/* caps is SEND/RECEIVE */</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      t30_stats_t <a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">state</a> == <a class="code" href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112cad2e2632aa1b6333fcd0e89c554d0df54">AST_FAX_STATE_UNINITIALIZED</a>) {</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;         <span class="keywordflow">goto</span> skip_cap_additions;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      }</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      t30_get_transfer_statistics(span_pvt-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>, &amp;stats);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;ErrorCorrectionMode: %s\r\n&quot;</span>,</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;         stats.error_correcting_mode ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;DataRate: %d\r\n&quot;</span>,</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;         stats.bit_rate);</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;ImageResolution: %dx%d\r\n&quot;</span>,</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;         stats.x_resolution, stats.y_resolution);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="preprocessor">#if SPANDSP_RELEASE_DATE &gt;= 20090220</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;PageNumber: %d\r\n&quot;</span>,</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;         ((session-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a>) ? stats.pages_rx : stats.pages_tx) + 1);</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;PageNumber: %d\r\n&quot;</span>,</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;         stats.pages_transferred + 1);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;FileName: %s\r\n&quot;</span>,</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;         session-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a> ? span_pvt-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>-&gt;rx_file :</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;         span_pvt-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>-&gt;tx_file);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="preprocessor">#if SPANDSP_RELEASE_DATE &gt;= 20090220</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;PagesTransmitted: %d\r\n&quot;</span>,</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;         stats.pages_tx);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;PagesReceived: %d\r\n&quot;</span>,</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;         stats.pages_rx);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;PagesTransmitted: %d\r\n&quot;</span>,</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;         (session-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6adbf07d8224b1a548ccae3b994653003b">AST_FAX_TECH_SEND</a>) ? stats.pages_transferred : 0);</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;PagesReceived: %d\r\n&quot;</span>,</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;         (session-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a>) ? stats.pages_transferred : 0);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      res |= <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;message_string, 0, <span class="stringliteral">&quot;TotalBadLines: %d\r\n&quot;</span>,</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;         stats.bad_rows);</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   }</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;skip_cap_additions:</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(session);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <span class="comment">/* One or more of the ast_str_append attempts failed, cancel the message */</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(message_string);</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   }</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Event: FAXSession\r\n&quot;</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="stringliteral">&quot;\r\n&quot;</span>,</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      id_text,</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(message_string));</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(message_string);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;}</div><div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00047">res_fax.h:47</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6adbf07d8224b1a548ccae3b994653003b"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6adbf07d8224b1a548ccae3b994653003b">AST_FAX_TECH_SEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00037">res_fax.h:37</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a9138c48a79016bfccdd7cee6197cb21c">AST_FAX_TECH_V21_DETECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00049">res_fax.h:49</a></div></div>
<div class="ttc" id="structast__fax__session_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">ast_fax_session::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00204">res_fax.h:204</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="res__fax_8h_html_a1b9314c7e94b0f3b703c975b0854519f"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a1b9314c7e94b0f3b703c975b0854519f">ast_fax_session_operation_str</a></div><div class="ttdeci">const char * ast_fax_session_operation_str(struct ast_fax_session *s)</div><div class="ttdoc">get string representation of a FAX session&amp;#39;s operation </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d60/res__fax_8c_source.html#l04254">res_fax.c:4254</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00039">res_fax.h:39</a></div></div>
<div class="ttc" id="structast__fax__session_html_ae7b633178d301df70e8612b4ce1aeb77"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">ast_fax_session::details</a></div><div class="ttdeci">struct ast_fax_session_details * details</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00208">res_fax.h:208</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_ad8cd454d1a02eee0cc27ea8819530ecd"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#ad8cd454d1a02eee0cc27ea8819530ecd">spandsp_pvt::t38_gw_state</a></div><div class="ttdeci">t38_gateway_state_t t38_gw_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00158">res_fax_spandsp.c:158</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a1b5003edd88843375153c462a72343f3"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">spandsp_pvt::stats</a></div><div class="ttdeci">struct spandsp_fax_stats * stats</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00155">res_fax_spandsp.c:155</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_adcd6f30baf585999693211a967c2db61"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">spandsp_pvt::t30_state</a></div><div class="ttdeci">t30_state_t * t30_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00152">res_fax_spandsp.c:152</a></div></div>
<div class="ttc" id="structast__fax__session_html_ad8f346e1752edcc0b1a6b431b1749f0e"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ad8f346e1752edcc0b1a6b431b1749f0e">ast_fax_session::state</a></div><div class="ttdeci">enum ast_fax_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00218">res_fax.h:218</a></div></div>
<div class="ttc" id="res__fax_8h_html_a70598462f8d1c09bb43e7a7091498e53"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a70598462f8d1c09bb43e7a7091498e53">ast_fax_state_to_str</a></div><div class="ttdeci">const char * ast_fax_state_to_str(enum ast_fax_state state)</div><div class="ttdoc">convert an ast_fax_state to a string </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d60/res__fax_8c_source.html#l01013">res_fax.c:1013</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_ad75375cdd336e91cbcee4a829fcdabfe"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">ast_fax_session_details::caps</a></div><div class="ttdeci">enum ast_fax_capabilities caps</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00113">res_fax.h:113</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
<div class="ttc" id="res__fax_8h_html_ab34810136037068a0847bcca2518112cad2e2632aa1b6333fcd0e89c554d0df54"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#ab34810136037068a0847bcca2518112cad2e2632aa1b6333fcd0e89c554d0df54">AST_FAX_STATE_UNINITIALIZED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00067">res_fax.h:67</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a727760f4638f2c84101218ce5e89d567"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a727760f4638f2c84101218ce5e89d567">&#9670;&nbsp;</a></span>spandsp_modems()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int spandsp_modems </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/dc2/structast__fax__session__details.html">ast_fax_session_details</a> *&#160;</td>
          <td class="paramname"><em>details</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00499">499</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00055">AST_FAX_MODEM_V17</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00057">AST_FAX_MODEM_V27TER</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00059">AST_FAX_MODEM_V29</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00061">AST_FAX_MODEM_V34</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00115">ast_fax_session_details::modems</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00813">spandsp_fax_gateway_start()</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00929">spandsp_fax_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;{</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <span class="keywordtype">int</span> modems = 0;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/d6a/res__fax_8h.html#ab9287e81dc5d3047da0bcb1f6c89bd57a2faab4efa2a8027ed56a92cc758a7bb0">AST_FAX_MODEM_V17</a> &amp; details-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a38b557eee45ee4c0d92d514c04823f84">modems</a>) {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      modems |= T30_SUPPORT_V17;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   }</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/d6a/res__fax_8h.html#ab9287e81dc5d3047da0bcb1f6c89bd57ae3b2fd3e12f8b526273b642e0c0a342a">AST_FAX_MODEM_V27TER</a> &amp; details-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a38b557eee45ee4c0d92d514c04823f84">modems</a>) {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      modems |= T30_SUPPORT_V27TER;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/d6a/res__fax_8h.html#ab9287e81dc5d3047da0bcb1f6c89bd57a7f0a2c297f96556e6d4af522930d1ccc">AST_FAX_MODEM_V29</a> &amp; details-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a38b557eee45ee4c0d92d514c04823f84">modems</a>) {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      modems |= T30_SUPPORT_V29;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/d6a/res__fax_8h.html#ab9287e81dc5d3047da0bcb1f6c89bd57af68d38a189351562faca6609a162b5a6">AST_FAX_MODEM_V34</a> &amp; details-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a38b557eee45ee4c0d92d514c04823f84">modems</a>) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="preprocessor">#if defined(T30_SUPPORT_V34)</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      modems |= T30_SUPPORT_V34;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="preprocessor">#elif defined(T30_SUPPORT_V34HDX)</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      modems |= T30_SUPPORT_V34HDX;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;v34 not supported in this version of spandsp\n&quot;</span>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   <span class="keywordflow">return</span> modems;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__fax_8h_html_ab9287e81dc5d3047da0bcb1f6c89bd57a7f0a2c297f96556e6d4af522930d1ccc"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#ab9287e81dc5d3047da0bcb1f6c89bd57a7f0a2c297f96556e6d4af522930d1ccc">AST_FAX_MODEM_V29</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00059">res_fax.h:59</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__fax_8h_html_ab9287e81dc5d3047da0bcb1f6c89bd57a2faab4efa2a8027ed56a92cc758a7bb0"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#ab9287e81dc5d3047da0bcb1f6c89bd57a2faab4efa2a8027ed56a92cc758a7bb0">AST_FAX_MODEM_V17</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00055">res_fax.h:55</a></div></div>
<div class="ttc" id="res__fax_8h_html_ab9287e81dc5d3047da0bcb1f6c89bd57ae3b2fd3e12f8b526273b642e0c0a342a"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#ab9287e81dc5d3047da0bcb1f6c89bd57ae3b2fd3e12f8b526273b642e0c0a342a">AST_FAX_MODEM_V27TER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00057">res_fax.h:57</a></div></div>
<div class="ttc" id="res__fax_8h_html_ab9287e81dc5d3047da0bcb1f6c89bd57af68d38a189351562faca6609a162b5a6"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#ab9287e81dc5d3047da0bcb1f6c89bd57af68d38a189351562faca6609a162b5a6">AST_FAX_MODEM_V34</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00061">res_fax.h:61</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_a38b557eee45ee4c0d92d514c04823f84"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a38b557eee45ee4c0d92d514c04823f84">ast_fax_session_details::modems</a></div><div class="ttdeci">enum ast_fax_modems modems</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00115">res_fax.h:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="addd7277ae067b27b98632539c158c6bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addd7277ae067b27b98632539c158c6bf">&#9670;&nbsp;</a></span>spandsp_v21_cleanup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spandsp_v21_cleanup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00594">594</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00164">spandsp_pvt::tone_state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00603">spandsp_fax_destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;{</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   modem_connect_tones_rx_free(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a7a6ac9a55317a92c59f3542dea61cdae">tone_state</a>);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;}</div><div class="ttc" id="structspandsp__pvt_html_a7a6ac9a55317a92c59f3542dea61cdae"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a7a6ac9a55317a92c59f3542dea61cdae">spandsp_pvt::tone_state</a></div><div class="ttdeci">modem_connect_tones_rx_state_t * tone_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00164">res_fax_spandsp.c:164</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adaa7af133c27e45f416759d9552f0775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaa7af133c27e45f416759d9552f0775">&#9670;&nbsp;</a></span>spandsp_v21_detect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int spandsp_v21_detect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00673">673</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00091">ast_format_alaw</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00036">AST_FORMAT_CMP_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00086">ast_format_ulaw</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00208">ast_fax_session::details</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00189">ast_frame::flags</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">ast_frame::len</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">ast_frame::mallocd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">ast_fax_session_details::option</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">ast_frame::seqno</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">ast_frame::src</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00164">spandsp_pvt::tone_state</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00191">ast_frame::ts</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00163">spandsp_pvt::v21_detected</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00167">ast_fax_session_details::v21_detected</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00734">spandsp_fax_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;{</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <a class="code" href="../../da/d4e/db_8h.html#aa343fa3b3d06292b959ffdd4c4703b06">int16_t</a> *slndata;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   g711_state_t *decoder;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#aef5d68740b9dc01c4950275c22ae81f4">v21_detected</a>) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <span class="comment">/*invalid frame*/</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <span class="keywordflow">if</span> (!f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> || !f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   }</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;frame={ datalen=%d, samples=%d, mallocd=%d, src=%s, flags=%u, ts=%ld, len=%ld, seqno=%d, data.ptr=%p, subclass.format=%s  }\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">mallocd</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="comment">/* slinear frame can be passed to spandsp */</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      modem_connect_tones_rx(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a7a6ac9a55317a92c59f3542dea61cdae">tone_state</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <span class="comment">/* alaw/ulaw frame must be converted to slinear before passing to spandsp */</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a> ||</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;              <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a568c3f5838b53c38f11996dbe5ff5785">ast_format_ulaw</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordflow">if</span> (!(slndata = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*slndata) * f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>))) {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      decoder = g711_init(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a> ? G711_ALAW : G711_ULAW));</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      g711_decode(decoder, slndata, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;spandsp transcoding frame from %s to slinear for v21 detection\n&quot;</span>, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      modem_connect_tones_rx(p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a7a6ac9a55317a92c59f3542dea61cdae">tone_state</a>, slndata, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      g711_release(decoder);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="preprocessor">#if SPANDSP_RELEASE_DATE &gt;= 20090220</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      g711_free(decoder);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(slndata);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   <span class="comment">/* frame in other formats cannot be passed to spandsp, it could cause segfault */</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Frame format %s not supported, v.21 detection skipped\n&quot;</span>, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#aef5d68740b9dc01c4950275c22ae81f4">v21_detected</a>) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">option</a>.<a class="code" href="../../d8/dc2/structast__fax__session__details.html#aed36280452b10bbcf7cb35873db02762">v21_detected</a> = 1;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;v.21 detected\n&quot;</span>);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;}</div><div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00036">format.h:36</a></div></div>
<div class="ttc" id="structast__frame_html_ab793262012344621455faf9266acbac2"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">ast_frame::seqno</a></div><div class="ttdeci">int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">include/asterisk/frame.h:195</a></div></div>
<div class="ttc" id="db_8h_html_aa343fa3b3d06292b959ffdd4c4703b06"><div class="ttname"><a href="../../da/d4e/db_8h.html#aa343fa3b3d06292b959ffdd4c4703b06">int16_t</a></div><div class="ttdeci">short int16_t</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4e/db_8h_source.html#l00059">db.h:59</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_aef5d68740b9dc01c4950275c22ae81f4"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#aef5d68740b9dc01c4950275c22ae81f4">spandsp_pvt::v21_detected</a></div><div class="ttdeci">int v21_detected</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00163">res_fax_spandsp.c:163</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="format__cache_8h_html_a568c3f5838b53c38f11996dbe5ff5785"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a568c3f5838b53c38f11996dbe5ff5785">ast_format_ulaw</a></div><div class="ttdeci">struct ast_format * ast_format_ulaw</div><div class="ttdoc">Built-in cached ulaw format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00086">format_cache.c:86</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__frame_html_a1eb46dcb363821328c0d2a758549216b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ast_frame::ts</a></div><div class="ttdeci">long ts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00191">include/asterisk/frame.h:191</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_a3ab211dbe8780b7292257f6b3dba1952"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a3ab211dbe8780b7292257f6b3dba1952">ast_fax_session_details::option</a></div><div class="ttdeci">union ast_fax_session_details::@290 option</div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="structast__frame_html_af51e37c9331049b1e3d250a7c8bc3c26"><div class="ttname"><a href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">ast_frame::src</a></div><div class="ttdeci">const char * src</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">include/asterisk/frame.h:181</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structast__fax__session_html_ae7b633178d301df70e8612b4ce1aeb77"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">ast_fax_session::details</a></div><div class="ttdeci">struct ast_fax_session_details * details</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00208">res_fax.h:208</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a7a6ac9a55317a92c59f3542dea61cdae"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a7a6ac9a55317a92c59f3542dea61cdae">spandsp_pvt::tone_state</a></div><div class="ttdeci">modem_connect_tones_rx_state_t * tone_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00164">res_fax_spandsp.c:164</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_aed36280452b10bbcf7cb35873db02762"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#aed36280452b10bbcf7cb35873db02762">ast_fax_session_details::v21_detected</a></div><div class="ttdeci">uint32_t v21_detected</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00167">res_fax.h:167</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__frame_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ac92588540e8c1d014a08cd8a45462b19">ast_frame::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00189">include/asterisk/frame.h:189</a></div></div>
<div class="ttc" id="structast__frame_html_aed16590d48f41d89f31e0cf347f5cd99"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">ast_frame::mallocd</a></div><div class="ttdeci">int mallocd</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">include/asterisk/frame.h:175</a></div></div>
<div class="ttc" id="format__cache_8h_html_a95c058fe6adef68780f026d6aec2481c"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a></div><div class="ttdeci">struct ast_format * ast_format_alaw</div><div class="ttdoc">Built-in cached alaw format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00091">format_cache.c:91</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
<div class="ttc" id="structast__frame_html_aaccba9d5adc3f6c39aad767db95ba484"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">ast_frame::len</a></div><div class="ttdeci">long len</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">include/asterisk/frame.h:193</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac663d21c565affc72b520a9581181897"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac663d21c565affc72b520a9581181897">&#9670;&nbsp;</a></span>spandsp_v21_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int spandsp_v21_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00485">485</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00664">spandsp_v21_tone()</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00164">spandsp_pvt::tone_state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00525">spandsp_fax_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <span class="comment">/* XXX Here we use MODEM_CONNECT_TONES_FAX_CED_OR_PREAMBLE even though</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">    * we don&#39;t care about CED tones. Using MODEM_CONNECT_TONES_PREAMBLE</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">    * doesn&#39;t seem to work right all the time.</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a7a6ac9a55317a92c59f3542dea61cdae">tone_state</a> = modem_connect_tones_rx_init(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, MODEM_CONNECT_TONES_FAX_CED_OR_PREAMBLE, <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a42d6e20cfd39f4a22d9ea31270f45ebf">spandsp_v21_tone</a>, p);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a7a6ac9a55317a92c59f3542dea61cdae">tone_state</a>) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;}</div><div class="ttc" id="res__fax__spandsp_8c_html_a42d6e20cfd39f4a22d9ea31270f45ebf"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a42d6e20cfd39f4a22d9ea31270f45ebf">spandsp_v21_tone</a></div><div class="ttdeci">static void spandsp_v21_tone(void *data, int code, int level, int delay)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00664">res_fax_spandsp.c:664</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a7a6ac9a55317a92c59f3542dea61cdae"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a7a6ac9a55317a92c59f3542dea61cdae">spandsp_pvt::tone_state</a></div><div class="ttdeci">modem_connect_tones_rx_state_t * tone_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00164">res_fax_spandsp.c:164</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a42d6e20cfd39f4a22d9ea31270f45ebf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42d6e20cfd39f4a22d9ea31270f45ebf">&#9670;&nbsp;</a></span>spandsp_v21_tone()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spandsp_v21_tone </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00664">664</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00163">spandsp_pvt::v21_detected</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00485">spandsp_v21_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;{</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = data;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   <span class="keywordflow">if</span> (code == MODEM_CONNECT_TONES_FAX_PREAMBLE) {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#aef5d68740b9dc01c4950275c22ae81f4">v21_detected</a> = 1;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   }</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div><div class="ttc" id="structspandsp__pvt_html_aef5d68740b9dc01c4950275c22ae81f4"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#aef5d68740b9dc01c4950275c22ae81f4">spandsp_pvt::v21_detected</a></div><div class="ttdeci">int v21_detected</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00163">res_fax_spandsp.c:163</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a12890f182233a7dfd042518081c71cce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12890f182233a7dfd042518081c71cce">&#9670;&nbsp;</a></span>t30_phase_e_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void t30_phase_e_handler </td>
          <td>(</td>
          <td class="paramtype">t30_state_t *&#160;</td>
          <td class="paramname"><em>t30_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>completion_code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Phase E handler callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t30_state</td><td>the span t30 state </td></tr>
    <tr><td class="paramname">data</td><td>this will be the <a class="el" href="../../d1/d16/structast__fax__session.html" title="The data required to handle a fax session. ">ast_fax_session</a> </td></tr>
    <tr><td class="paramname">completion_code</td><td>the result of the fax session</td></tr>
  </table>
  </dd>
</dl>
<p>This function pulls stats from the spandsp stack and stores them for res_fax to use later. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00378">378</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00039">AST_FAX_TECH_RECEIVE</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00550">ast_string_field_build</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00113">ast_fax_session_details::caps</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00208">ast_fax_session::details</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00204">ast_fax_session::id</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00148">spandsp_pvt::isdone</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00144">ast_fax_session_details::pages_transferred</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00142">ast_fax_session_details::result</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00142">ast_fax_session_details::resultstr</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00155">spandsp_pvt::stats</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00257">update_stats()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00929">spandsp_fax_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;{</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s = data;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <span class="keywordtype">char</span> headerinfo[T30_MAX_PAGE_HEADER_INFO + 1];</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   t30_stats_t <a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;FAX session &#39;%u&#39; entering phase E\n&quot;</span>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#af2bd73f7c4fe9e40a5d5cb75dcbca598">isdone</a> = 1;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#adf5e0a963a0c910f4affa63d1ba1353e">update_stats</a>(p, completion_code);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   t30_get_transfer_statistics(<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>, &amp;stats);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <span class="keywordflow">if</span> (completion_code == T30_ERR_OK) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>, <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, <span class="stringliteral">&quot;SUCCESS&quot;</span>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>, <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, <span class="stringliteral">&quot;FAILED&quot;</span>);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>, <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>, t30_completion_code_to_str(completion_code));</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>, resultstr, t30_completion_code_to_str(completion_code));</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;FAX session &#39;%u&#39; completed with result: %s (%s)\n&quot;</span>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a17c89d9cdcac0df0f2039f065b7cf0ed">result</a>, s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#a8e155783a5296f8607948dfbe5783933">resultstr</a>);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <span class="keywordflow">if</span> ((c = t30_get_tx_ident(<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>))) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>, localstationid, c);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <span class="keywordflow">if</span> ((c = t30_get_rx_ident(<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>))) {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>, remotestationid, c);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="preprocessor">#if SPANDSP_RELEASE_DATE &gt;= 20090220</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ac579558087dfa900a4c5384cb6e09dd8">pages_transferred</a> = (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a>) ? stats.pages_rx : stats.pages_tx;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;#<span class="keywordflow">else</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ac579558087dfa900a4c5384cb6e09dd8">pages_transferred</a> = stats.pages_transferred;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;#endif</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>, transfer_rate, <span class="stringliteral">&quot;%d&quot;</span>, stats.bit_rate);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>, resolution, <span class="stringliteral">&quot;%dx%d&quot;</span>, stats.x_resolution, stats.y_resolution);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   t30_get_tx_page_header_info(<a class="code" href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">t30_state</a>, headerinfo);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>, headerinfo, headerinfo);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div><div class="ttc" id="structast__fax__session__details_html_a17c89d9cdcac0df0f2039f065b7cf0ed"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a17c89d9cdcac0df0f2039f065b7cf0ed">ast_fax_session_details::result</a></div><div class="ttdeci">const ast_string_field result</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00142">res_fax.h:142</a></div></div>
<div class="ttc" id="structast__fax__session_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ab7ce6f462afaf105224b0ca772a33c43">ast_fax_session::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00204">res_fax.h:204</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6a77bcc28b15614142ddbf4a180d263602">AST_FAX_TECH_RECEIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00039">res_fax.h:39</a></div></div>
<div class="ttc" id="structast__fax__session_html_ae7b633178d301df70e8612b4ce1aeb77"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">ast_fax_session::details</a></div><div class="ttdeci">struct ast_fax_session_details * details</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00208">res_fax.h:208</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a1b5003edd88843375153c462a72343f3"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">spandsp_pvt::stats</a></div><div class="ttdeci">struct spandsp_fax_stats * stats</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00155">res_fax_spandsp.c:155</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_ac579558087dfa900a4c5384cb6e09dd8"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#ac579558087dfa900a4c5384cb6e09dd8">ast_fax_session_details::pages_transferred</a></div><div class="ttdeci">unsigned int pages_transferred</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00144">res_fax.h:144</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_adf5e0a963a0c910f4affa63d1ba1353e"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#adf5e0a963a0c910f4affa63d1ba1353e">update_stats</a></div><div class="ttdeci">static int update_stats(struct spandsp_pvt *p, int completion_code)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00257">res_fax_spandsp.c:257</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_af2bd73f7c4fe9e40a5d5cb75dcbca598"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#af2bd73f7c4fe9e40a5d5cb75dcbca598">spandsp_pvt::isdone</a></div><div class="ttdeci">unsigned int isdone</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00148">res_fax_spandsp.c:148</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_adcd6f30baf585999693211a967c2db61"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#adcd6f30baf585999693211a967c2db61">spandsp_pvt::t30_state</a></div><div class="ttdeci">t30_state_t * t30_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00152">res_fax_spandsp.c:152</a></div></div>
<div class="ttc" id="stringfields_8h_html_a8b9f4347fc72720cc5cead952b54abe9"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a></div><div class="ttdeci">#define ast_string_field_build(x, field, fmt, args...)</div><div class="ttdoc">Set a field to a complex (built) value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00550">stringfields.h:550</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structast__fax__session_html"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html">ast_fax_session</a></div><div class="ttdoc">The data required to handle a fax session. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00202">res_fax.h:202</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_ad75375cdd336e91cbcee4a829fcdabfe"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">ast_fax_session_details::caps</a></div><div class="ttdeci">enum ast_fax_capabilities caps</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00113">res_fax.h:113</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_a8e155783a5296f8607948dfbe5783933"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#a8e155783a5296f8607948dfbe5783933">ast_fax_session_details::resultstr</a></div><div class="ttdeci">const ast_string_field resultstr</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00142">res_fax.h:142</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a24efd6f18c67b0deb9973607e23f2bac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24efd6f18c67b0deb9973607e23f2bac">&#9670;&nbsp;</a></span>t38_tx_packet_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int t38_tx_packet_handler </td>
          <td>(</td>
          <td class="paramtype">t38_core_state_t *&#160;</td>
          <td class="paramname"><em>t38_core_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00217">217</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00232">AST_FAX_FRFLAG_GATEWAY</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00047">AST_FAX_TECH_GATEWAY</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00123">AST_FRAME_MODEM</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00208">AST_FRAME_SET_BUFFER</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">ast_frisolate</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00241">AST_MODEM_T38</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01139">ast_queue_frame()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00149">spandsp_pvt::ast_t38_state</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05189">ast_write()</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00113">ast_fax_session_details::caps</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00224">ast_fax_session::chan</a>, <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00208">ast_fax_session::details</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d2/d70/structspandsp__pvt.html#a2ae422e03f0063ccdd76b75bad9624ec">spandsp_pvt::read_frames</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00884">T38_STATE_NEGOTIATED</a>, and <a class="el" href="../../db/d6a/res__fax_8h_source.html#l00216">ast_fax_session::tech_pvt</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00813">spandsp_fax_gateway_start()</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00525">spandsp_fax_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d16/structast__fax__session.html">ast_fax_session</a> *s = data;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *p = s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> fax_frame = {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">AST_FRAME_MODEM</a>,</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      .subclass.integer = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a3a510e4e2673c6870ed5fe0f1eb53732">AST_MODEM_T38</a>,</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      .src = <span class="stringliteral">&quot;res_fax_spandsp_t38&quot;</span>,</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   };</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = &amp;fax_frame;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   <span class="comment">/* TODO: Asterisk does not provide means of resending the same packet multiple</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">     times so count is ignored at the moment */</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8bc210573f6b9c55ef38662bddc4675">AST_FRAME_SET_BUFFER</a>(f, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, 0, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="keywordflow">if</span> (!(f = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a>(f))) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">details</a>-&gt;<a class="code" href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">caps</a> &amp; <a class="code" href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a>) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(f, <a class="code" href="../../db/d6a/res__fax_8h.html#a748e0695940b2d6145b9646387daa4db">AST_FAX_FRFLAG_GATEWAY</a>);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#add1eaf99c12ebcef83fa7c1d4ca52f9f">ast_t38_state</a> == <a class="code" href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1af142c79721a025bd65edad812f0725e0">T38_STATE_NEGOTIATED</a>) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;         res = <a class="code" href="../../d5/d7b/channel_8h.html#a79c413d51b7135404d5cacf811649a61">ast_write</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, f);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;         res = <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(s-&gt;<a class="code" href="../../d1/d16/structast__fax__session.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, f);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="comment">/* no need to lock, this all runs in the same thread */</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a2ae422e03f0063ccdd76b75bad9624ec">read_frames</a>, f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      res = 0;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div><div class="ttc" id="res__fax_8h_html_a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a54eb45ad548b874cf12d0a599631e3f6add135550dca7400fb80e250a63a54887">AST_FAX_TECH_GATEWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00047">res_fax.h:47</a></div></div>
<div class="ttc" id="res__fax_8h_html_a748e0695940b2d6145b9646387daa4db"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a748e0695940b2d6145b9646387daa4db">AST_FAX_FRFLAG_GATEWAY</a></div><div class="ttdeci">#define AST_FAX_FRFLAG_GATEWAY</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00232">res_fax.h:232</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structast__fax__session_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a84d1435c5b8d387806714ea7079304b7">ast_fax_session::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00224">res_fax.h:224</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a2ae422e03f0063ccdd76b75bad9624ec"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a2ae422e03f0063ccdd76b75bad9624ec">spandsp_pvt::read_frames</a></div><div class="ttdeci">struct spandsp_pvt::frame_queue read_frames</div></div>
<div class="ttc" id="structast__fax__session_html_ae7b633178d301df70e8612b4ce1aeb77"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#ae7b633178d301df70e8612b4ce1aeb77">ast_fax_session::details</a></div><div class="ttdeci">struct ast_fax_session_details * details</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00208">res_fax.h:208</a></div></div>
<div class="ttc" id="channel_8h_html_a6cbcba5661d55216968cde8fdf913c89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">AST_FRAME_MODEM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00123">include/asterisk/frame.h:123</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8bc210573f6b9c55ef38662bddc4675"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8bc210573f6b9c55ef38662bddc4675">AST_FRAME_SET_BUFFER</a></div><div class="ttdeci">#define AST_FRAME_SET_BUFFER(fr, _base, _ofs, _datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00208">include/asterisk/frame.h:208</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_add1eaf99c12ebcef83fa7c1d4ca52f9f"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#add1eaf99c12ebcef83fa7c1d4ca52f9f">spandsp_pvt::ast_t38_state</a></div><div class="ttdeci">enum ast_t38_state ast_t38_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00149">res_fax_spandsp.c:149</a></div></div>
<div class="ttc" id="channel_8h_html_a79c413d51b7135404d5cacf811649a61"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a79c413d51b7135404d5cacf811649a61">ast_write</a></div><div class="ttdeci">int ast_write(struct ast_channel *chan, struct ast_frame *frame)</div><div class="ttdoc">Write a frame to a channel This function writes the given frame to the indicated channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05189">channel.c:5189</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a314496ce1d74ed7fdb9c5319c5e2e953"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a></div><div class="ttdeci">#define ast_frisolate(fr)</div><div class="ttdoc">Makes a frame independent of any static storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">include/asterisk/frame.h:577</a></div></div>
<div class="ttc" id="channel_8h_html_a4cd990f4c1cd0c2af6e4c63f6d15b4e1af142c79721a025bd65edad812f0725e0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1af142c79721a025bd65edad812f0725e0">T38_STATE_NEGOTIATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00884">channel.h:884</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__fax__session_html"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html">ast_fax_session</a></div><div class="ttdoc">The data required to handle a fax session. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00202">res_fax.h:202</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a3a510e4e2673c6870ed5fe0f1eb53732"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a3a510e4e2673c6870ed5fe0f1eb53732">AST_MODEM_T38</a></div><div class="ttdeci">#define AST_MODEM_T38</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00241">include/asterisk/frame.h:241</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__fax__session__details_html_ad75375cdd336e91cbcee4a829fcdabfe"><div class="ttname"><a href="../../d8/dc2/structast__fax__session__details.html#ad75375cdd336e91cbcee4a829fcdabfe">ast_fax_session_details::caps</a></div><div class="ttdeci">enum ast_fax_capabilities caps</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00113">res_fax.h:113</a></div></div>
<div class="ttc" id="structast__fax__session_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../d1/d16/structast__fax__session.html#a19aa04db5508cf9496602e694dc69e2f">ast_fax_session::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/res__fax_8h_source.html#l00216">res_fax.h:216</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structspandsp__pvt_html"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00146">res_fax_spandsp.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>unload res_fax_spandsp </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01241">1241</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d60/res__fax_8c_source.html#l00992">ast_fax_tech_unregister()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01249">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;{</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   <a class="code" href="../../db/d6a/res__fax_8h.html#a0212d23b36bd4b0777c0002ef6758bd9">ast_fax_tech_unregister</a>(&amp;<a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a2519968d99ee93a67244dd8c53a92dad">spandsp_fax_tech</a>);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;<a class="code" href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a>.lock);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;}</div><div class="ttc" id="res__fax_8h_html_a0212d23b36bd4b0777c0002ef6758bd9"><div class="ttname"><a href="../../db/d6a/res__fax_8h.html#a0212d23b36bd4b0777c0002ef6758bd9">ast_fax_tech_unregister</a></div><div class="ttdeci">void ast_fax_tech_unregister(struct ast_fax_tech *tech)</div><div class="ttdoc">unregister a fax technology </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d60/res__fax_8c_source.html#l00992">res_fax.c:992</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a589319dce057e148f17f370ca3ba2a95"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a589319dce057e148f17f370ca3ba2a95">spandsp_global_stats</a></div><div class="ttdeci">static struct @462 spandsp_global_stats</div></div>
<div class="ttc" id="res__fax__spandsp_8c_html_a2519968d99ee93a67244dd8c53a92dad"><div class="ttname"><a href="../../d5/d47/res__fax__spandsp_8c.html#a2519968d99ee93a67244dd8c53a92dad">spandsp_fax_tech</a></div><div class="ttdeci">static struct ast_fax_tech spandsp_fax_tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00095">res_fax_spandsp.c:95</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adf5e0a963a0c910f4affa63d1ba1353e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf5e0a963a0c910f4affa63d1ba1353e">&#9670;&nbsp;</a></span>update_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d70/structspandsp__pvt.html">spandsp_pvt</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>completion_code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The CED tone exceeded 5s</p>
<p>Timed out waiting for initial communication</p>
<p>Timed out waiting for the first message</p>
<p>Timed out waiting for procedural interrupt</p>
<p>The HDLC carrier did not stop in a timely manner</p>
<p>Failed to train with any of the compatible modems</p>
<p>Operator intervention failed</p>
<p>Far end is not compatible</p>
<p>Far end is not able to receive</p>
<p>Far end is not able to transmit</p>
<p>Far end cannot receive at the resolution of the image</p>
<p>Far end cannot receive at the size of image</p>
<p>Unexpected message received</p>
<p>Received bad response to DCS or training</p>
<p>Received a DCN from remote after sending a page</p>
<p>Invalid ECM response received from receiver</p>
<p>Received a DCN while waiting for a DIS</p>
<p>Invalid response after sending a page</p>
<p>Received other than DIS while waiting for DIS</p>
<p>Received no response to DCS, training or TCF</p>
<p>No response after sending a page</p>
<p>Timed out waiting for receiver ready (ECM mode)</p>
<p>Invalid ECM response received from transmitter</p>
<p>DCS received while waiting for DTC</p>
<p>Unexpected command after page received</p>
<p>Carrier lost during fax receive</p>
<p>Timed out while waiting for EOL (end Of line)</p>
<p>Timed out while waiting for first line</p>
<p>Timer T2 expired while waiting for DCN</p>
<p>Timer T2 expired while waiting for phase D</p>
<p>Timer T2 expired while waiting for fax page</p>
<p>Timer T2 expired while waiting for next fax page</p>
<p>Timer T2 expired while waiting for RR command</p>
<p>Timer T2 expired while waiting for NSS, DCS or MCF</p>
<p>Unexpected DCN while waiting for DCS or DIS</p>
<p>Unexpected DCN while waiting for image data</p>
<p>Unexpected DCN while waiting for EOM, EOP or MPS</p>
<p>Unexpected DCN after EOM or MPS sequence</p>
<p>Unexpected DCN after RR/RNR sequence</p>
<p>Unexpected DCN after requested retransmission</p>
<p>TIFF/F file cannot be opened</p>
<p>TIFF/F page not found</p>
<p>TIFF/F format is not compatible</p>
<p>TIFF/F page number tag missing</p>
<p>Incorrect values for TIFF/F tags</p>
<p>Bad TIFF/F header - incorrect values in fields</p>
<p>Cannot allocate memory for more pages</p>
<p>Disconnected after permitted retries</p>
<p>The call dropped prematurely</p>
<p>Poll not accepted</p>
<p>Far end's ident is not acceptable</p>
<p>Far end's sub-address is not acceptable</p>
<p>Far end's selective polling address is not acceptable</p>
<p>Far end's polled sub-address is not acceptable</p>
<p>Far end's sender identification is not acceptable</p>
<p>Far end's password is not acceptable</p>
<p>Far end's transmitting subscriber internet address is not acceptable</p>
<p>Far end's internet routing address is not acceptable</p>
<p>Far end's calling subscriber internet address is not acceptable</p>
<p>Far end's internet selective polling address is not acceptable</p>
<p>Far end's called subscriber internet address is not acceptable </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00257">257</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00135">spandsp_fax_stats::call_dropped</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00128">spandsp_fax_stats::failed_to_train</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00133">spandsp_fax_stats::file_error</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00134">spandsp_fax_stats::mem_error</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00127">spandsp_fax_stats::neg_failed</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00126">spandsp_fax_stats::nofax</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00131">spandsp_fax_stats::protocol_error</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00132">spandsp_fax_stats::retries_exceeded</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00129">spandsp_fax_stats::rx_protocol_error</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00155">spandsp_pvt::stats</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00125">spandsp_fax_stats::success</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00130">spandsp_fax_stats::tx_protocol_error</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00136">spandsp_fax_stats::unknown_error</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00378">t30_phase_e_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keywordflow">switch</span> (completion_code) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <span class="keywordflow">case</span> T30_ERR_OK:</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#a6538a52840afd2ad6aba6a1ea5d89e50">success</a>, 1);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="comment">/* Link problems */</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   <span class="keywordflow">case</span> T30_ERR_CEDTONE:            <span class="comment">/*! The CED tone exceeded 5s */</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   <span class="keywordflow">case</span> T30_ERR_T0_EXPIRED:         <span class="comment">/*! Timed out waiting for initial communication */</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   <span class="keywordflow">case</span> T30_ERR_T1_EXPIRED:         <span class="comment">/*! Timed out waiting for the first message */</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <span class="keywordflow">case</span> T30_ERR_T3_EXPIRED:         <span class="comment">/*! Timed out waiting for procedural interrupt */</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="keywordflow">case</span> T30_ERR_HDLC_CARRIER:       <span class="comment">/*! The HDLC carrier did not stop in a timely manner */</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="keywordflow">case</span> T30_ERR_CANNOT_TRAIN:       <span class="comment">/*! Failed to train with any of the compatible modems */</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#a4962a14c99b722d1f2a27ecc05811166">failed_to_train</a>, 1);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;   <span class="keywordflow">case</span> T30_ERR_OPER_INT_FAIL:      <span class="comment">/*! Operator intervention failed */</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <span class="keywordflow">case</span> T30_ERR_INCOMPATIBLE:       <span class="comment">/*! Far end is not compatible */</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_INCAPABLE:       <span class="comment">/*! Far end is not able to receive */</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keywordflow">case</span> T30_ERR_TX_INCAPABLE:       <span class="comment">/*! Far end is not able to transmit */</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   <span class="keywordflow">case</span> T30_ERR_NORESSUPPORT:       <span class="comment">/*! Far end cannot receive at the resolution of the image */</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <span class="keywordflow">case</span> T30_ERR_NOSIZESUPPORT:      <span class="comment">/*! Far end cannot receive at the size of image */</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#a4072f28e52076d5ac4bcb6d3ddd5d30b">neg_failed</a>, 1);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <span class="keywordflow">case</span> T30_ERR_UNEXPECTED:         <span class="comment">/*! Unexpected message received */</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#ac41507da01dbee3fa458c4eebb085bce">protocol_error</a>, 1);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <span class="comment">/* Phase E status values returned to a transmitter */</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <span class="keywordflow">case</span> T30_ERR_TX_BADDCS:          <span class="comment">/*! Received bad response to DCS or training */</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <span class="keywordflow">case</span> T30_ERR_TX_BADPG:           <span class="comment">/*! Received a DCN from remote after sending a page */</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <span class="keywordflow">case</span> T30_ERR_TX_ECMPHD:          <span class="comment">/*! Invalid ECM response received from receiver */</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keywordflow">case</span> T30_ERR_TX_GOTDCN:          <span class="comment">/*! Received a DCN while waiting for a DIS */</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   <span class="keywordflow">case</span> T30_ERR_TX_INVALRSP:        <span class="comment">/*! Invalid response after sending a page */</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <span class="keywordflow">case</span> T30_ERR_TX_NODIS:           <span class="comment">/*! Received other than DIS while waiting for DIS */</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <span class="keywordflow">case</span> T30_ERR_TX_PHBDEAD:         <span class="comment">/*! Received no response to DCS, training or TCF */</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keywordflow">case</span> T30_ERR_TX_PHDDEAD:         <span class="comment">/*! No response after sending a page */</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <span class="keywordflow">case</span> T30_ERR_TX_T5EXP:           <span class="comment">/*! Timed out waiting for receiver ready (ECM mode) */</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#ad1e948fb3a2a49d70040c6c7470f00f4">tx_protocol_error</a>, 1);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="comment">/* Phase E status values returned to a receiver */</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_ECMPHD:          <span class="comment">/*! Invalid ECM response received from transmitter */</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_GOTDCS:          <span class="comment">/*! DCS received while waiting for DTC */</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_INVALCMD:        <span class="comment">/*! Unexpected command after page received */</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_NOCARRIER:       <span class="comment">/*! Carrier lost during fax receive */</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_NOEOL:           <span class="comment">/*! Timed out while waiting for EOL (end Of line) */</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#a7592938aeab0c3337363075cb27e3a3e">rx_protocol_error</a>, 1);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_NOFAX:           <span class="comment">/*! Timed out while waiting for first line */</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#a7156cb5e1d68d88369be68ad26ba8502">nofax</a>, 1);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_T2EXPDCN:        <span class="comment">/*! Timer T2 expired while waiting for DCN */</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_T2EXPD:          <span class="comment">/*! Timer T2 expired while waiting for phase D */</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_T2EXPFAX:        <span class="comment">/*! Timer T2 expired while waiting for fax page */</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_T2EXPMPS:        <span class="comment">/*! Timer T2 expired while waiting for next fax page */</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_T2EXPRR:         <span class="comment">/*! Timer T2 expired while waiting for RR command */</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_T2EXP:           <span class="comment">/*! Timer T2 expired while waiting for NSS, DCS or MCF */</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_DCNWHY:          <span class="comment">/*! Unexpected DCN while waiting for DCS or DIS */</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_DCNDATA:         <span class="comment">/*! Unexpected DCN while waiting for image data */</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_DCNFAX:          <span class="comment">/*! Unexpected DCN while waiting for EOM, EOP or MPS */</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_DCNPHD:          <span class="comment">/*! Unexpected DCN after EOM or MPS sequence */</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_DCNRRD:          <span class="comment">/*! Unexpected DCN after RR/RNR sequence */</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RX_DCNNORTN:        <span class="comment">/*! Unexpected DCN after requested retransmission */</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#a7592938aeab0c3337363075cb27e3a3e">rx_protocol_error</a>, 1);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="comment">/* TIFF file problems */</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   <span class="keywordflow">case</span> T30_ERR_FILEERROR:          <span class="comment">/*! TIFF/F file cannot be opened */</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   <span class="keywordflow">case</span> T30_ERR_NOPAGE:             <span class="comment">/*! TIFF/F page not found */</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="keywordflow">case</span> T30_ERR_BADTIFF:            <span class="comment">/*! TIFF/F format is not compatible */</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   <span class="keywordflow">case</span> T30_ERR_BADPAGE:            <span class="comment">/*! TIFF/F page number tag missing */</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;   <span class="keywordflow">case</span> T30_ERR_BADTAG:             <span class="comment">/*! Incorrect values for TIFF/F tags */</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <span class="keywordflow">case</span> T30_ERR_BADTIFFHDR:         <span class="comment">/*! Bad TIFF/F header - incorrect values in fields */</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#a90dbed02abe7da6da26595204c44758e">file_error</a>, 1);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <span class="keywordflow">case</span> T30_ERR_NOMEM:              <span class="comment">/*! Cannot allocate memory for more pages */</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#a5b41c47056e4587415bbf70507281a72">mem_error</a>, 1);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <span class="comment">/* General problems */</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <span class="keywordflow">case</span> T30_ERR_RETRYDCN:           <span class="comment">/*! Disconnected after permitted retries */</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#a8f4d51f1065dae0b6d2544dc53572177">retries_exceeded</a>, 1);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   <span class="keywordflow">case</span> T30_ERR_CALLDROPPED:        <span class="comment">/*! The call dropped prematurely */</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#a9c107baadbd6f9d2dba24b4337422f85">call_dropped</a>, 1);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <span class="comment">/* Feature negotiation issues */</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   <span class="keywordflow">case</span> T30_ERR_NOPOLL:             <span class="comment">/*! Poll not accepted */</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <span class="keywordflow">case</span> T30_ERR_IDENT_UNACCEPTABLE: <span class="comment">/*! Far end&#39;s ident is not acceptable */</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <span class="keywordflow">case</span> T30_ERR_SUB_UNACCEPTABLE:   <span class="comment">/*! Far end&#39;s sub-address is not acceptable */</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   <span class="keywordflow">case</span> T30_ERR_SEP_UNACCEPTABLE:   <span class="comment">/*! Far end&#39;s selective polling address is not acceptable */</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <span class="keywordflow">case</span> T30_ERR_PSA_UNACCEPTABLE:   <span class="comment">/*! Far end&#39;s polled sub-address is not acceptable */</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="keywordflow">case</span> T30_ERR_SID_UNACCEPTABLE:   <span class="comment">/*! Far end&#39;s sender identification is not acceptable */</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="keywordflow">case</span> T30_ERR_PWD_UNACCEPTABLE:   <span class="comment">/*! Far end&#39;s password is not acceptable */</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordflow">case</span> T30_ERR_TSA_UNACCEPTABLE:   <span class="comment">/*! Far end&#39;s transmitting subscriber internet address is not acceptable */</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   <span class="keywordflow">case</span> T30_ERR_IRA_UNACCEPTABLE:   <span class="comment">/*! Far end&#39;s internet routing address is not acceptable */</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <span class="keywordflow">case</span> T30_ERR_CIA_UNACCEPTABLE:   <span class="comment">/*! Far end&#39;s calling subscriber internet address is not acceptable */</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <span class="keywordflow">case</span> T30_ERR_ISP_UNACCEPTABLE:   <span class="comment">/*! Far end&#39;s internet selective polling address is not acceptable */</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keywordflow">case</span> T30_ERR_CSA_UNACCEPTABLE:   <span class="comment">/*! Far end&#39;s called subscriber internet address is not acceptable */</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#a4072f28e52076d5ac4bcb6d3ddd5d30b">neg_failed</a>, 1);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;p-&gt;<a class="code" href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">stats</a>-&gt;<a class="code" href="../../dd/df2/structspandsp__fax__stats.html#ab2fe1c75b626347f20ab4c37ac6d4c60">unknown_error</a>, 1);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;unknown FAX session result &#39;%d&#39; (%s)\n&quot;</span>, completion_code, t30_completion_code_to_str(completion_code));</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div><div class="ttc" id="structspandsp__fax__stats_html_a4072f28e52076d5ac4bcb6d3ddd5d30b"><div class="ttname"><a href="../../dd/df2/structspandsp__fax__stats.html#a4072f28e52076d5ac4bcb6d3ddd5d30b">spandsp_fax_stats::neg_failed</a></div><div class="ttdeci">int neg_failed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00127">res_fax_spandsp.c:127</a></div></div>
<div class="ttc" id="structspandsp__fax__stats_html_a4962a14c99b722d1f2a27ecc05811166"><div class="ttname"><a href="../../dd/df2/structspandsp__fax__stats.html#a4962a14c99b722d1f2a27ecc05811166">spandsp_fax_stats::failed_to_train</a></div><div class="ttdeci">int failed_to_train</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00128">res_fax_spandsp.c:128</a></div></div>
<div class="ttc" id="structspandsp__fax__stats_html_a7592938aeab0c3337363075cb27e3a3e"><div class="ttname"><a href="../../dd/df2/structspandsp__fax__stats.html#a7592938aeab0c3337363075cb27e3a3e">spandsp_fax_stats::rx_protocol_error</a></div><div class="ttdeci">int rx_protocol_error</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00129">res_fax_spandsp.c:129</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structspandsp__fax__stats_html_ac41507da01dbee3fa458c4eebb085bce"><div class="ttname"><a href="../../dd/df2/structspandsp__fax__stats.html#ac41507da01dbee3fa458c4eebb085bce">spandsp_fax_stats::protocol_error</a></div><div class="ttdeci">int protocol_error</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00131">res_fax_spandsp.c:131</a></div></div>
<div class="ttc" id="structspandsp__fax__stats_html_a9c107baadbd6f9d2dba24b4337422f85"><div class="ttname"><a href="../../dd/df2/structspandsp__fax__stats.html#a9c107baadbd6f9d2dba24b4337422f85">spandsp_fax_stats::call_dropped</a></div><div class="ttdeci">int call_dropped</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00135">res_fax_spandsp.c:135</a></div></div>
<div class="ttc" id="structspandsp__fax__stats_html_ab2fe1c75b626347f20ab4c37ac6d4c60"><div class="ttname"><a href="../../dd/df2/structspandsp__fax__stats.html#ab2fe1c75b626347f20ab4c37ac6d4c60">spandsp_fax_stats::unknown_error</a></div><div class="ttdeci">int unknown_error</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00136">res_fax_spandsp.c:136</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structspandsp__fax__stats_html_a5b41c47056e4587415bbf70507281a72"><div class="ttname"><a href="../../dd/df2/structspandsp__fax__stats.html#a5b41c47056e4587415bbf70507281a72">spandsp_fax_stats::mem_error</a></div><div class="ttdeci">int mem_error</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00134">res_fax_spandsp.c:134</a></div></div>
<div class="ttc" id="structspandsp__pvt_html_a1b5003edd88843375153c462a72343f3"><div class="ttname"><a href="../../d2/d70/structspandsp__pvt.html#a1b5003edd88843375153c462a72343f3">spandsp_pvt::stats</a></div><div class="ttdeci">struct spandsp_fax_stats * stats</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00155">res_fax_spandsp.c:155</a></div></div>
<div class="ttc" id="structspandsp__fax__stats_html_a7156cb5e1d68d88369be68ad26ba8502"><div class="ttname"><a href="../../dd/df2/structspandsp__fax__stats.html#a7156cb5e1d68d88369be68ad26ba8502">spandsp_fax_stats::nofax</a></div><div class="ttdeci">int nofax</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00126">res_fax_spandsp.c:126</a></div></div>
<div class="ttc" id="structspandsp__fax__stats_html_a90dbed02abe7da6da26595204c44758e"><div class="ttname"><a href="../../dd/df2/structspandsp__fax__stats.html#a90dbed02abe7da6da26595204c44758e">spandsp_fax_stats::file_error</a></div><div class="ttdeci">int file_error</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00133">res_fax_spandsp.c:133</a></div></div>
<div class="ttc" id="structspandsp__fax__stats_html_a6538a52840afd2ad6aba6a1ea5d89e50"><div class="ttname"><a href="../../dd/df2/structspandsp__fax__stats.html#a6538a52840afd2ad6aba6a1ea5d89e50">spandsp_fax_stats::success</a></div><div class="ttdeci">int success</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00125">res_fax_spandsp.c:125</a></div></div>
<div class="ttc" id="structspandsp__fax__stats_html_ad1e948fb3a2a49d70040c6c7470f00f4"><div class="ttname"><a href="../../dd/df2/structspandsp__fax__stats.html#ad1e948fb3a2a49d70040c6c7470f00f4">spandsp_fax_stats::tx_protocol_error</a></div><div class="ttdeci">int tx_protocol_error</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00130">res_fax_spandsp.c:130</a></div></div>
<div class="ttc" id="structspandsp__fax__stats_html_a8f4d51f1065dae0b6d2544dc53572177"><div class="ttname"><a href="../../dd/df2/structspandsp__fax__stats.html#a8f4d51f1065dae0b6d2544dc53572177">spandsp_fax_stats::retries_exceeded</a></div><div class="ttdeci">int retries_exceeded</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d47/res__fax__spandsp_8c_source.html#l00132">res_fax_spandsp.c:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a54af2a9b29d140908cc9dffd0618951b">AST_MODFLAG_DEFAULT</a> , .description = &quot;Spandsp G.711 and T.38 FAX Technologies&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_EXTENDED, .load = load_module, .unload = unload_module, .enhances = &quot;res_fax&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01270">1270</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01270">1270</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

</div>
</div>
<a id="a28cf77eecd22cd8b53d3ec4e967c13c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28cf77eecd22cd8b53d3ec4e967c13c2">&#9670;&nbsp;</a></span>g711</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/df2/structspandsp__fax__stats.html">spandsp_fax_stats</a> g711</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00142">142</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

</div>
</div>
<a id="adf04f66344e3fb0a6f6a69bf39d19902"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf04f66344e3fb0a6f6a69bf39d19902">&#9670;&nbsp;</a></span>lock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> lock</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00141">141</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

</div>
</div>
<a id="a2519968d99ee93a67244dd8c53a92dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2519968d99ee93a67244dd8c53a92dad">&#9670;&nbsp;</a></span>spandsp_fax_tech</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d0e/structast__fax__tech.html">ast_fax_tech</a> spandsp_fax_tech</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00095">95</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

</div>
</div>
<a id="a589319dce057e148f17f370ca3ba2a95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a589319dce057e148f17f370ca3ba2a95">&#9670;&nbsp;</a></span>spandsp_global_stats</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   spandsp_global_stats</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01249">load_module()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01197">spandsp_fax_cli_show_stats()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00525">spandsp_fax_new()</a>, <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01021">spandsp_fax_switch_to_t38()</a>, and <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l01241">unload_module()</a>.</p>

</div>
</div>
<a id="ae948616ce1a6c11f9ffebbdd0239aa6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae948616ce1a6c11f9ffebbdd0239aa6f">&#9670;&nbsp;</a></span>t38</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/df2/structspandsp__fax__stats.html">spandsp_fax_stats</a> t38</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html#l00143">143</a> of file <a class="el" href="../../d5/d47/res__fax__spandsp_8c_source.html">res_fax_spandsp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dde/app__fax_8c_source.html#l00603">transmit_t38()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:24 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
