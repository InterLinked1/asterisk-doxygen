<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: localtime.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">localtime.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Custom localtime functions for multiple timezones.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;locale.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for localtime.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d6a/localtime_8h__incl.png" border="0" usemap="#localtime_8h" alt=""/></div>
<map name="localtime_8h" id="localtime_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d5d/localtime_8h__dep__incl.png" border="0" usemap="#localtime_8hdep" alt=""/></div>
<map name="localtime_8hdep" id="localtime_8hdep">
<area shape="rect" id="node2" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="2346,80,2406,107"/>
<area shape="rect" id="node9" href="../../dc/d5c/app__alarmreceiver_8c.html" title="Central Station Alarm receiver for Ademco Contact ID. " alt="" coords="212,379,362,405"/>
<area shape="rect" id="node22" href="../../de/dfe/app__minivm_8c.html" title="MiniVoiceMail &#45; A Minimal Voicemail System for Asterisk. " alt="" coords="4154,379,4265,405"/>
<area shape="rect" id="node27" href="../../dc/df4/app__voicemail_8c.html" title="Comedian Mail &#45; Voicemail System. " alt="" coords="3904,379,4028,405"/>
<area shape="rect" id="node28" href="../../d5/dff/chan__iax2_8c.html" title="Implementation of Inter&#45;Asterisk eXchange Version 2 as specified in RFC 5456. " alt="" coords="4289,379,4386,405"/>
<area shape="rect" id="node29" href="../../d8/d52/func__sayfiles_8c.html" title="Returns files played by Say applications. " alt="" coords="387,379,502,405"/>
<area shape="rect" id="node30" href="../../d9/d1e/func__strings_8c.html" title="String manipulation dialplan functions. " alt="" coords="792,379,902,405"/>
<area shape="rect" id="node31" href="../../df/d98/json_8c.html" title="JSON abstraction layer. " alt="" coords="51,379,110,405"/>
<area shape="rect" id="node32" href="../../d7/d01/say_8c.html" title="Say numbers and dates (maybe words one day too) " alt="" coords="134,379,187,405"/>
<area shape="rect" id="node37" href="../../d3/d0c/pbx__timing_8c.html" title="PBX timing routines. " alt="" coords="3618,304,3721,331"/>
<area shape="rect" id="node38" href="../../d9/df8/localtime_8c.html" title="localtime.c" alt="" coords="3503,304,3594,331"/>
<area shape="rect" id="node40" href="../../d5/dfe/chan__sip_8c.html" title="Implementation of Session Initiation Protocol. " alt="" coords="4449,379,4538,405"/>
<area shape="rect" id="node45" href="../../d1/dfd/test__locale_8c.html" title="Locale Test. " alt="" coords="4734,379,4837,405"/>
<area shape="rect" id="node49" href="../../de/d6a/ie_8c.html" title="Interface to mISDN. " alt="" coords="4874,80,4918,107"/>
<area shape="rect" id="node50" href="../../d5/db8/res_2prometheus_2cli_8c.html" title="Prometheus CLI Commands. " alt="" coords="4942,80,4989,107"/>
<area shape="rect" id="node3" href="../../dc/d4d/alertpipe_8h.html" title="alertpipe.h" alt="" coords="1730,155,1820,181"/>
<area shape="rect" id="node4" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1786,304,1870,331"/>
<area shape="rect" id="node5" href="../../d3/d51/chan__mobile_8c.html" title="Bluetooth Mobile Device channel driver. " alt="" coords="3404,379,3519,405"/>
<area shape="rect" id="node6" href="../../d3/d45/chan__ooh323_8h.html" title="chan_ooh323.h" alt="" coords="2008,379,2128,405"/>
<area shape="rect" id="node7" href="../../dd/d18/res__config__mysql_8c.html" title="MySQL CDR backend. " alt="" coords="3594,379,3737,405"/>
<area shape="rect" id="node8" href="../../db/d62/app__adsiprog_8c.html" title="Program Asterisk ADSI Scripts into phone. " alt="" coords="926,379,1045,405"/>
<area shape="rect" id="node10" href="../../d9/daa/app__audiosocket_8c.html" title="AudioSocket application â€“ transmit and receive audio through a TCP socket. " alt="" coords="1699,379,1840,405"/>
<area shape="rect" id="node11" href="../../d6/d0f/app__authenticate_8c.html" title="Execute arbitrary authenticate commands. " alt="" coords="1121,379,1266,405"/>
<area shape="rect" id="node12" href="../../dc/d22/app__bridgewait_8c.html" title="Application to place the channel into a holding Bridge. " alt="" coords="1545,379,1674,405"/>
<area shape="rect" id="node13" href="../../dc/d04/app__chanspy_8c.html" title="ChanSpy: Listen in on any channel. " alt="" coords="1406,379,1520,405"/>
<area shape="rect" id="node14" href="../../dc/d4e/stasis__bridges_8h.html" title="stasis_bridges.h" alt="" coords="2803,379,2928,405"/>
<area shape="rect" id="node15" href="../../da/dfb/app__queue_8c.html" title="True call queues with optional send URL on answer. " alt="" coords="2763,453,2867,480"/>
<area shape="rect" id="node16" href="../../d9/d12/app__dial_8c.html" title="dial() &amp; retrydial() &#45; Trivial application to dial a channel and send an URL on answer ..." alt="" coords="681,379,768,405"/>
<area shape="rect" id="node17" href="../../de/d26/app__externalivr_8c.html" title="External IVR application interface. " alt="" coords="526,379,656,405"/>
<area shape="rect" id="node18" href="../../d5/dd6/app__festival_8c.html" title="Connect to festival. " alt="" coords="2488,379,2598,405"/>
<area shape="rect" id="node19" href="../../dd/d55/app__followme_8c.html" title="Find&#45;Me Follow&#45;Me application. " alt="" coords="1864,379,1984,405"/>
<area shape="rect" id="node20" href="../../d0/d1b/app__macro_8c.html" title="Dial plan macro Implementation. " alt="" coords="2622,379,2728,405"/>
<area shape="rect" id="node21" href="../../df/d44/app__meetme_8c.html" title="Meet me conference bridge and Shared Line Appearances. " alt="" coords="3761,379,3880,405"/>
<area shape="rect" id="node23" href="../../d6/d27/app__osplookup_8c.html" title="Open Settlement Protocol (OSP) Applications. " alt="" coords="2153,379,2282,405"/>
<area shape="rect" id="node24" href="../../d3/da4/app__page_8c.html" title="page() &#45; Paging application " alt="" coords="2952,379,3048,405"/>
<area shape="rect" id="node25" href="../../d7/d17/app__privacy_8c.html" title="Block all calls without Caller*ID, require phone # to be entered. " alt="" coords="2358,379,2464,405"/>
<area shape="rect" id="node26" href="../../d7/d81/app__sms_8c.html" title="SMS application &#45; ETSI ES 201 912 protocol 1 implementation. " alt="" coords="1291,379,1382,405"/>
<area shape="rect" id="node33" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="3351,229,3428,256"/>
<area shape="rect" id="node34" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="2148,304,2207,331"/>
<area shape="rect" id="node35" href="../../d6/dde/app__controlplayback_8c.html" title="Trivial application to control playback of a sound file. " alt="" coords="3216,379,3380,405"/>
<area shape="rect" id="node36" href="../../d0/de2/app__directory_8c.html" title="Provide a directory of extensions. " alt="" coords="3073,379,3192,405"/>
<area shape="rect" id="node39" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="3148,155,3274,181"/>
<area shape="rect" id="node41" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="2543,229,2615,256"/>
<area shape="rect" id="node42" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="3848,304,3956,331"/>
<area shape="rect" id="node43" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="3793,229,3864,256"/>
<area shape="rect" id="node44" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="2231,304,2314,331"/>
<area shape="rect" id="node46" href="../../d2/d0f/indications_8h.html" title="Tone Indication Support. " alt="" coords="680,304,782,331"/>
<area shape="rect" id="node47" href="../../d4/ddf/tcptls_8h.html" title="Generic support for tcp/tls servers in Asterisk. " alt="" coords="632,155,702,181"/>
<area shape="rect" id="node48" href="../../dc/d33/mwi_8h.html" title="Asterisk MWI API. " alt="" coords="4284,304,4343,331"/>
</map>
</div>
</div>
<p><a href="../../d5/deb/localtime_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa1cf0f088102cb6e943efa94a8d59d3d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/deb/localtime_8h.html#aa1cf0f088102cb6e943efa94a8d59d3d">AST_ISO8601_FORMAT</a>&#160;&#160;&#160;&quot;%FT%T.%q%z&quot;</td></tr>
<tr class="memdesc:aa1cf0f088102cb6e943efa94a8d59d3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">ast_strftime for ISO8601 formatting timestamps.  <a href="#aa1cf0f088102cb6e943efa94a8d59d3d">More...</a><br /></td></tr>
<tr class="separator:aa1cf0f088102cb6e943efa94a8d59d3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a028152a627b7f520720834d35fd5ce9f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/deb/localtime_8h.html#a028152a627b7f520720834d35fd5ce9f">AST_ISO8601_LEN</a>&#160;&#160;&#160;29</td></tr>
<tr class="memdesc:a028152a627b7f520720834d35fd5ce9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max length of an null terminated, millisecond resolution, ISO8601 timestamp string.  <a href="#a028152a627b7f520720834d35fd5ce9f">More...</a><br /></td></tr>
<tr class="separator:a028152a627b7f520720834d35fd5ce9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa1f5af873d05619cbcf7901e194b292c"><td class="memItemLeft" align="right" valign="top">typedef void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/deb/localtime_8h.html#aa1f5af873d05619cbcf7901e194b292c">locale_t</a></td></tr>
<tr class="separator:aa1f5af873d05619cbcf7901e194b292c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aad52af6afe205a03aecf3fa6518dbdb0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/deb/localtime_8h.html#aad52af6afe205a03aecf3fa6518dbdb0">ast_get_dst_info</a> (const time_t *const timep, int *dst_enabled, time_t *dst_start, time_t *dst_end, int *gmt_off, const char *const zone)</td></tr>
<tr class="separator:aad52af6afe205a03aecf3fa6518dbdb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9fbda728350a9a5b9c09b29214d718e"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a> (const struct timeval *timep, struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a> *p_tm, const char *zone)</td></tr>
<tr class="memdesc:ae9fbda728350a9a5b9c09b29214d718e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timezone-independent version of <a class="el" href="../../d5/d60/utils_8h.html#a9e7c6104cccbed67c8f0fd510cd5c099">localtime_r(3)</a>.  <a href="#ae9fbda728350a9a5b9c09b29214d718e">More...</a><br /></td></tr>
<tr class="separator:ae9fbda728350a9a5b9c09b29214d718e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78e7355614199810d4e2574f3ab8e424"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/deb/localtime_8h.html#a78e7355614199810d4e2574f3ab8e424">ast_localtime_wakeup_monitor</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *info)</td></tr>
<tr class="separator:a78e7355614199810d4e2574f3ab8e424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0843e4dbbd1fed36d2676dda58e0c44"><td class="memItemLeft" align="right" valign="top">struct timeval&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/deb/localtime_8h.html#ae0843e4dbbd1fed36d2676dda58e0c44">ast_mktime</a> (struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a> *const <a class="el" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, const char *zone)</td></tr>
<tr class="memdesc:ae0843e4dbbd1fed36d2676dda58e0c44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timezone-independent version of mktime(3).  <a href="#ae0843e4dbbd1fed36d2676dda58e0c44">More...</a><br /></td></tr>
<tr class="separator:ae0843e4dbbd1fed36d2676dda58e0c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a593a5d58d04c3a32ef22894c636f1eff"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/deb/localtime_8h.html#a593a5d58d04c3a32ef22894c636f1eff">ast_setlocale</a> (const char *<a class="el" href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a>)</td></tr>
<tr class="memdesc:a593a5d58d04c3a32ef22894c636f1eff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the thread-local representation of the current locale.  <a href="#a593a5d58d04c3a32ef22894c636f1eff">More...</a><br /></td></tr>
<tr class="separator:a593a5d58d04c3a32ef22894c636f1eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8e63928b14a347bd3973d680b885f93"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a> (char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a> *tm)</td></tr>
<tr class="memdesc:aa8e63928b14a347bd3973d680b885f93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Special version of strftime(3) that handles fractions of a second. Takes the same arguments as strftime(3), with the addition of q, which specifies microseconds.  <a href="#aa8e63928b14a347bd3973d680b885f93">More...</a><br /></td></tr>
<tr class="separator:aa8e63928b14a347bd3973d680b885f93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5092e0e84f5959f275d6de28438250e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/deb/localtime_8h.html#ad5092e0e84f5959f275d6de28438250e">ast_strftime_locale</a> (char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, const struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a> *tm, const char *<a class="el" href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a>)</td></tr>
<tr class="separator:ad5092e0e84f5959f275d6de28438250e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eb2c73accce1b149ce597de80d1677a"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/deb/localtime_8h.html#a3eb2c73accce1b149ce597de80d1677a">ast_strptime</a> (const char *s, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a> *tm)</td></tr>
<tr class="memdesc:a3eb2c73accce1b149ce597de80d1677a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Special version of strptime(3) which places the answer in the common structure <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a>. Also, unlike strptime(3), <a class="el" href="../../d5/deb/localtime_8h.html#a3eb2c73accce1b149ce597de80d1677a" title="Special version of strptime(3) which places the answer in the common structure ast_tm. Also, unlike strptime(3), ast_strptime() initializes its memory prior to use. ">ast_strptime()</a> initializes its memory prior to use.  <a href="#a3eb2c73accce1b149ce597de80d1677a">More...</a><br /></td></tr>
<tr class="separator:a3eb2c73accce1b149ce597de80d1677a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89cd0569a31aa8abaeecfe4eeeb0df53"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/deb/localtime_8h.html#a89cd0569a31aa8abaeecfe4eeeb0df53">ast_strptime_locale</a> (const char *s, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a> *tm, const char *<a class="el" href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a>)</td></tr>
<tr class="separator:a89cd0569a31aa8abaeecfe4eeeb0df53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Custom localtime functions for multiple timezones. </p>

<p class="definition">Definition in file <a class="el" href="../../d5/deb/localtime_8h_source.html">localtime.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa1cf0f088102cb6e943efa94a8d59d3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1cf0f088102cb6e943efa94a8d59d3d">&#9670;&nbsp;</a></span>AST_ISO8601_FORMAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_ISO8601_FORMAT&#160;&#160;&#160;&quot;%FT%T.%q%z&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ast_strftime for ISO8601 formatting timestamps. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/deb/localtime_8h_source.html#l00103">103</a> of file <a class="el" href="../../d5/deb/localtime_8h_source.html">localtime.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d98/json_8c_source.html#l00649">ast_json_timeval()</a>.</p>

</div>
</div>
<a id="a028152a627b7f520720834d35fd5ce9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a028152a627b7f520720834d35fd5ce9f">&#9670;&nbsp;</a></span>AST_ISO8601_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_ISO8601_LEN&#160;&#160;&#160;29</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Max length of an null terminated, millisecond resolution, ISO8601 timestamp string. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/deb/localtime_8h_source.html#l00105">105</a> of file <a class="el" href="../../d5/deb/localtime_8h_source.html">localtime.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d98/json_8c_source.html#l00649">ast_json_timeval()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="aa1f5af873d05619cbcf7901e194b292c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1f5af873d05619cbcf7901e194b292c">&#9670;&nbsp;</a></span>locale_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void* <a class="el" href="../../d5/deb/localtime_8h.html#aa1f5af873d05619cbcf7901e194b292c">locale_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/deb/localtime_8h_source.html#l00032">32</a> of file <a class="el" href="../../d5/deb/localtime_8h_source.html">localtime.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aad52af6afe205a03aecf3fa6518dbdb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad52af6afe205a03aecf3fa6518dbdb0">&#9670;&nbsp;</a></span>ast_get_dst_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_get_dst_info </td>
          <td>(</td>
          <td class="paramtype">const time_t *const&#160;</td>
          <td class="paramname"><em>timep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>dst_enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t *&#160;</td>
          <td class="paramname"><em>dst_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t *&#160;</td>
          <td class="paramname"><em>dst_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>gmt_off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>zone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/df8/localtime_8c_source.html#l01754">1754</a> of file <a class="el" href="../../d9/df8/localtime_8c_source.html">localtime.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/df8/localtime_8c_source.html#l01601">ast_tzset()</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l00167">state::ats</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h_source.html#l00343">AVGSECSPERYEAR</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l00166">state::goahead</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l00165">state::goback</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h_source.html#l00152">int_fast64_t</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l00162">state::timecnt</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l00133">ttinfo::tt_gmtoff</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l00134">ttinfo::tt_isdst</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l00169">state::ttis</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l00163">state::typecnt</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l00168">state::types</a>, and <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h_source.html#l00335">YEARSPERREPEAT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/de9/res__phoneprov_8c_source.html#l00431">set_timezone_variables()</a>.</p>
<div class="fragment"><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;{</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;   <span class="keywordtype">int</span> transition1 = -1;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;   <span class="keywordtype">int</span> transition2 = -1;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   time_t      seconds;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;   <span class="keywordtype">int</span>  bounds_exceeded = 0;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   time_t  t = *timep;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d88/structstate.html">state</a> *sp;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == dst_enabled)</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;   *dst_enabled = 0;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == dst_start || <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == dst_end || <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == gmt_off)</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;   *gmt_off = 0;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;   sp = <a class="code" href="../../d9/df8/localtime_8c.html#a093cc6736e9bd033c2de06909e96fd32">ast_tzset</a>(zone);</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == sp)</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;   <span class="comment">/* If the desired time exceeds the bounds of the defined time transitions</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;<span class="comment">   * then give up on determining DST info and simply look for gmt offset</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="comment">   * This requires that I adjust the given time using increments of Gregorian</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;<span class="comment">   * repeats to place the time within the defined time transitions in the</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;<span class="comment">   * timezone structure.</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;   <span class="keywordflow">if</span> ((sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a2673165d739a554bca5de774c50e4be1">goback</a> &amp;&amp; t &lt; sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a4509623ad925758e6f33ead8935ab268">ats</a>[0]) ||</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;         (sp-&gt;<a class="code" href="../../d4/d88/structstate.html#ac9ff4ce036117be2251d8e4e4c02fd46">goahead</a> &amp;&amp; t &gt; sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a4509623ad925758e6f33ead8935ab268">ats</a>[sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a6035af427143aa9f018d1dbf499d1c1b">timecnt</a> - 1])) {</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      time_t      tcycles;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#aada3eab56052f7847c2187c342cb11d2">int_fast64_t</a>   icycles;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <span class="keywordflow">if</span> (t &lt; sp-&gt;ats[0])</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;         seconds = sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a4509623ad925758e6f33ead8935ab268">ats</a>[0] - t;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      <span class="keywordflow">else</span>  seconds = t - sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a4509623ad925758e6f33ead8935ab268">ats</a>[sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a6035af427143aa9f018d1dbf499d1c1b">timecnt</a> - 1];</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;      --seconds;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      tcycles = seconds / <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#abfda64cd9c2adcfb0d9d7780f06e08a5">YEARSPERREPEAT</a> / <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#a43037bd5c750ed5100b35d2dda4c4ea0">AVGSECSPERYEAR</a>;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      ++tcycles;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      icycles = tcycles;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordflow">if</span> (tcycles - icycles &gt;= 1 || icycles - tcycles &gt;= 1)</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      seconds = icycles;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      seconds *= <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#abfda64cd9c2adcfb0d9d7780f06e08a5">YEARSPERREPEAT</a>;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      seconds *= <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#a43037bd5c750ed5100b35d2dda4c4ea0">AVGSECSPERYEAR</a>;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <span class="keywordflow">if</span> (t &lt; sp-&gt;ats[0])</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;         t += seconds;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;         t -= seconds;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;      <span class="keywordflow">if</span> (t &lt; sp-&gt;ats[0] || t &gt; sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a4509623ad925758e6f33ead8935ab268">ats</a>[sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a6035af427143aa9f018d1dbf499d1c1b">timecnt</a> - 1])</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;         <span class="keywordflow">return</span>;  <span class="comment">/* &quot;cannot happen&quot; */</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;      bounds_exceeded = 1;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;   }</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;   <span class="keywordflow">if</span> (sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a6035af427143aa9f018d1dbf499d1c1b">timecnt</a> == 0 || t &lt; sp-&gt;ats[0]) {</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      <span class="comment">/* I have no transition times or I&#39;m before time */</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      *dst_enabled = 0;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;      <span class="comment">/* Find where I can get gmtoff */</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      i = 0;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      <span class="keywordflow">while</span> (sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a9b9717d762927b5cd3ad33ea8e400e33">ttis</a>[i].<a class="code" href="../../db/db4/structttinfo.html#a6a7790e950b3e36831bc53f4216ad9b2">tt_isdst</a>) {</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;         <span class="keywordflow">if</span> (++i &gt;= sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a04ec6babf8c0a1bda31e414d4964090d">typecnt</a>) {</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            i = 0;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;         }</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      }</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      *gmt_off = sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a9b9717d762927b5cd3ad33ea8e400e33">ttis</a>[i].<a class="code" href="../../db/db4/structttinfo.html#a782693343700e53e6749e693391874e5">tt_gmtoff</a>;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;   }</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;   <span class="keywordflow">for</span> (i = 1; i &lt; sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a6035af427143aa9f018d1dbf499d1c1b">timecnt</a>; ++i) {</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;      <span class="keywordflow">if</span> (t &lt; sp-&gt;ats[i]) {</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;         transition1 = sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a9f3a6df4e5685559b1ebb963e97ef60a">types</a>[i - 1];</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;         transition2 = sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a9f3a6df4e5685559b1ebb963e97ef60a">types</a>[i];</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      }</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;   }</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;   <span class="comment">/* if I found transition times that do not bounded the given time and these correspond to</span></div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="comment">      or the bounding zones do not reflect a changes in day light savings, then I do not have dst active */</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;   <span class="keywordflow">if</span> (i &gt;= sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a6035af427143aa9f018d1dbf499d1c1b">timecnt</a> || 0 &gt; transition1 || 0 &gt; transition2 ||</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;         (sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a9b9717d762927b5cd3ad33ea8e400e33">ttis</a>[transition1].<a class="code" href="../../db/db4/structttinfo.html#a6a7790e950b3e36831bc53f4216ad9b2">tt_isdst</a> == sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a9b9717d762927b5cd3ad33ea8e400e33">ttis</a>[transition2].<a class="code" href="../../db/db4/structttinfo.html#a6a7790e950b3e36831bc53f4216ad9b2">tt_isdst</a>)) {</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      *dst_enabled = 0;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;      *gmt_off = sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a9b9717d762927b5cd3ad33ea8e400e33">ttis</a>[sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a9f3a6df4e5685559b1ebb963e97ef60a">types</a>[sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a6035af427143aa9f018d1dbf499d1c1b">timecnt</a> -1]].<a class="code" href="../../db/db4/structttinfo.html#a782693343700e53e6749e693391874e5">tt_gmtoff</a>;</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      <span class="comment">/* I have valid daylight savings information. */</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      <span class="keywordflow">if</span>(sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a9b9717d762927b5cd3ad33ea8e400e33">ttis</a>[transition2].<a class="code" href="../../db/db4/structttinfo.html#a6a7790e950b3e36831bc53f4216ad9b2">tt_isdst</a>)</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;         *gmt_off = sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a9b9717d762927b5cd3ad33ea8e400e33">ttis</a>[transition1].<a class="code" href="../../db/db4/structttinfo.html#a782693343700e53e6749e693391874e5">tt_gmtoff</a>;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;         *gmt_off = sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a9b9717d762927b5cd3ad33ea8e400e33">ttis</a>[transition2].<a class="code" href="../../db/db4/structttinfo.html#a782693343700e53e6749e693391874e5">tt_gmtoff</a>;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      <span class="comment">/* If I adjusted the time earlier, indicate that the dst is invalid */</span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      <span class="keywordflow">if</span> (!bounds_exceeded) {</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;         *dst_enabled = 1;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;         <span class="comment">/* Determine which of the bounds is the start of daylight savings and which is the end */</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;         <span class="keywordflow">if</span>(sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a9b9717d762927b5cd3ad33ea8e400e33">ttis</a>[transition2].<a class="code" href="../../db/db4/structttinfo.html#a6a7790e950b3e36831bc53f4216ad9b2">tt_isdst</a>) {</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;            *dst_start = sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a4509623ad925758e6f33ead8935ab268">ats</a>[i];</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;            *dst_end = sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a4509623ad925758e6f33ead8935ab268">ats</a>[i -1];</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;            *dst_start = sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a4509623ad925758e6f33ead8935ab268">ats</a>[i -1];</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            *dst_end = sp-&gt;<a class="code" href="../../d4/d88/structstate.html#a4509623ad925758e6f33ead8935ab268">ats</a>[i];</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;         }</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;      }</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   }</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;}</div><div class="ttc" id="structstate_html_a04ec6babf8c0a1bda31e414d4964090d"><div class="ttname"><a href="../../d4/d88/structstate.html#a04ec6babf8c0a1bda31e414d4964090d">state::typecnt</a></div><div class="ttdeci">int typecnt</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00163">localtime.c:163</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structttinfo_html_a782693343700e53e6749e693391874e5"><div class="ttname"><a href="../../db/db4/structttinfo.html#a782693343700e53e6749e693391874e5">ttinfo::tt_gmtoff</a></div><div class="ttdeci">long tt_gmtoff</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00133">localtime.c:133</a></div></div>
<div class="ttc" id="structstate_html_ac9ff4ce036117be2251d8e4e4c02fd46"><div class="ttname"><a href="../../d4/d88/structstate.html#ac9ff4ce036117be2251d8e4e4c02fd46">state::goahead</a></div><div class="ttdeci">int goahead</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00166">localtime.c:166</a></div></div>
<div class="ttc" id="structstate_html_a2673165d739a554bca5de774c50e4be1"><div class="ttname"><a href="../../d4/d88/structstate.html#a2673165d739a554bca5de774c50e4be1">state::goback</a></div><div class="ttdeci">int goback</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00165">localtime.c:165</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_abfda64cd9c2adcfb0d9d7780f06e08a5"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#abfda64cd9c2adcfb0d9d7780f06e08a5">YEARSPERREPEAT</a></div><div class="ttdeci">#define YEARSPERREPEAT</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/main_2stdtime_2private_8h_source.html#l00335">main/stdtime/private.h:335</a></div></div>
<div class="ttc" id="structttinfo_html_a6a7790e950b3e36831bc53f4216ad9b2"><div class="ttname"><a href="../../db/db4/structttinfo.html#a6a7790e950b3e36831bc53f4216ad9b2">ttinfo::tt_isdst</a></div><div class="ttdeci">int tt_isdst</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00134">localtime.c:134</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_a43037bd5c750ed5100b35d2dda4c4ea0"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#a43037bd5c750ed5100b35d2dda4c4ea0">AVGSECSPERYEAR</a></div><div class="ttdeci">#define AVGSECSPERYEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/main_2stdtime_2private_8h_source.html#l00343">main/stdtime/private.h:343</a></div></div>
<div class="ttc" id="structstate_html_a4509623ad925758e6f33ead8935ab268"><div class="ttname"><a href="../../d4/d88/structstate.html#a4509623ad925758e6f33ead8935ab268">state::ats</a></div><div class="ttdeci">time_t ats[TZ_MAX_TIMES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00167">localtime.c:167</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_aada3eab56052f7847c2187c342cb11d2"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#aada3eab56052f7847c2187c342cb11d2">int_fast64_t</a></div><div class="ttdeci">you may need to compile with DHAVE_STDINT_H typedef long int_fast64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/main_2stdtime_2private_8h_source.html#l00152">main/stdtime/private.h:152</a></div></div>
<div class="ttc" id="structstate_html_a9f3a6df4e5685559b1ebb963e97ef60a"><div class="ttname"><a href="../../d4/d88/structstate.html#a9f3a6df4e5685559b1ebb963e97ef60a">state::types</a></div><div class="ttdeci">unsigned char types[TZ_MAX_TIMES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00168">localtime.c:168</a></div></div>
<div class="ttc" id="localtime_8c_html_a093cc6736e9bd033c2de06909e96fd32"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#a093cc6736e9bd033c2de06909e96fd32">ast_tzset</a></div><div class="ttdeci">static const struct state * ast_tzset(const char *zone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01601">localtime.c:1601</a></div></div>
<div class="ttc" id="structstate_html_a9b9717d762927b5cd3ad33ea8e400e33"><div class="ttname"><a href="../../d4/d88/structstate.html#a9b9717d762927b5cd3ad33ea8e400e33">state::ttis</a></div><div class="ttdeci">struct ttinfo ttis[TZ_MAX_TYPES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00169">localtime.c:169</a></div></div>
<div class="ttc" id="structstate_html_a6035af427143aa9f018d1dbf499d1c1b"><div class="ttname"><a href="../../d4/d88/structstate.html#a6035af427143aa9f018d1dbf499d1c1b">state::timecnt</a></div><div class="ttdeci">int timecnt</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00162">localtime.c:162</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae9fbda728350a9a5b9c09b29214d718e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9fbda728350a9a5b9c09b29214d718e">&#9670;&nbsp;</a></span>ast_localtime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a>* ast_localtime </td>
          <td>(</td>
          <td class="paramtype">const struct timeval *&#160;</td>
          <td class="paramname"><em>timep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a> *&#160;</td>
          <td class="paramname"><em>p_tm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>zone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timezone-independent version of <a class="el" href="../../d5/d60/utils_8h.html#a9e7c6104cccbed67c8f0fd510cd5c099">localtime_r(3)</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timep</td><td>Current time, including microseconds </td></tr>
    <tr><td class="paramname">p_tm</td><td>Pointer to memory where the broken-out time will be stored </td></tr>
    <tr><td class="paramname">zone</td><td>Text string of a standard system zoneinfo file. If NULL, the system localtime will be used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">p_tm</td><td>is returned for convenience </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d9/df8/localtime_8c_source.html#l01739">1739</a> of file <a class="el" href="../../d9/df8/localtime_8c_source.html">localtime.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/df8/localtime_8c_source.html#l01601">ast_tzset()</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l01648">localsub()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01362">acf_strftime()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06318">action_corestatus()</a>, <a class="el" href="../../d4/d4c/cdr__csv_8c_source.html#l00192">append_date()</a>, <a class="el" href="../../da/dc9/cel_8c_source.html#l00660">ast_cel_fabricate_channel_from_event()</a>, <a class="el" href="../../d3/d0c/pbx__timing_8c_source.html#l00251">ast_check_timing2()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00456">ast_http_send()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00649">ast_json_timeval()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l00894">ast_queue_log()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03871">ast_say_date_da()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03920">ast_say_date_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03842">ast_say_date_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04002">ast_say_date_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08180">ast_say_date_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04123">ast_say_date_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03970">ast_say_date_hu()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04157">ast_say_date_is()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08216">ast_say_date_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09348">ast_say_date_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04031">ast_say_date_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04096">ast_say_date_pt()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04060">ast_say_date_th()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04493">ast_say_date_with_format_da()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04695">ast_say_date_with_format_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04246">ast_say_date_with_format_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l05442">ast_say_date_with_format_es()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l05633">ast_say_date_with_format_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08455">ast_say_date_with_format_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l05295">ast_say_date_with_format_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04898">ast_say_date_with_format_is()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l05829">ast_say_date_with_format_it()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08627">ast_say_date_with_format_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l06061">ast_say_date_with_format_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l06264">ast_say_date_with_format_pl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l06481">ast_say_date_with_format_pt()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l05110">ast_say_date_with_format_th()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08895">ast_say_date_with_format_vi()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l06773">ast_say_date_with_format_zh()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07464">ast_say_datetime_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07397">ast_say_datetime_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07493">ast_say_datetime_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07821">ast_say_datetime_from_now_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07859">ast_say_datetime_from_now_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07947">ast_say_datetime_from_now_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09444">ast_say_datetime_from_now_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07897">ast_say_datetime_from_now_pt()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08355">ast_say_datetime_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07737">ast_say_datetime_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07479">ast_say_datetime_hu()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08388">ast_say_datetime_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09425">ast_say_datetime_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07534">ast_say_datetime_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07553">ast_say_datetime_pt()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07620">ast_say_datetime_pt_BR()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07634">ast_say_datetime_th()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07677">ast_say_datetime_zh()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07125">ast_say_time_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07076">ast_say_time_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07168">ast_say_time_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08260">ast_say_time_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07326">ast_say_time_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07145">ast_say_time_hu()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08308">ast_say_time_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09391">ast_say_time_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07187">ast_say_time_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07207">ast_say_time_pt()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07236">ast_say_time_pt_BR()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07266">ast_say_time_th()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07284">ast_say_time_zh()</a>, <a class="el" href="../../de/d62/test__time_8c_source.html#l00048">AST_TEST_DEFINE()</a>, <a class="el" href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00162">beanstalk_put()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l06501">build_device()</a>, <a class="el" href="../../d7/d83/cdr__radius_8c_source.html#l00098">build_radius_record()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00739">callerid_genmsg()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03035">cdr_get_tv()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00248">cdr_read_callback()</a>, <a class="el" href="../../d1/d0c/cel__beanstalkd_8c_source.html#l00089">cel_bs_put()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l02727">cli_prompt()</a>, <a class="el" href="../../de/dfa/pjsip__scheduler_8c_source.html#l00490">cli_show_tasks()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../de/d6a/ie_8c_source.html#l00860">enc_ie_date()</a>, <a class="el" href="../../d7/dc3/res__calendar_8c_source.html#l01587">epoch_to_string()</a>, <a class="el" href="../../d2/d23/res__calendar__exchange_8c_source.html#l00532">exchangecal_get_events_between()</a>, <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00071">execute_cb()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04500">find_conf_realtime()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l01682">format_log_message_ap()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l00977">get_date()</a>, <a class="el" href="../../d2/d4f/res__calendar__ews_8c_source.html#l00650">get_ewscal_ids_for()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00716">handle_cli_odbc_show()</a>, <a class="el" href="../../d1/dfd/test__locale_8c_source.html#l00049">handle_cli_test_locales()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l03185">handle_minivm_show_stats()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00450">handle_show_settings()</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00091">http_callback()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l04746">iax2_datetime()</a>, <a class="el" href="../../d7/d81/app__sms_8c_source.html#l00303">isodate()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01912">leave_voicemail()</a>, <a class="el" href="../../dd/d62/stdtime_2test_8c_source.html#l00008">main()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l05085">make_email_file()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l00617">make_logchannel()</a>, <a class="el" href="../../df/d5a/cdr__manager_8c_source.html#l00273">manager_log()</a>, <a class="el" href="../../d2/d4f/res__calendar__ews_8c_source.html#l00470">mstime()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00172">mysql_log()</a>, <a class="el" href="../../df/ddb/cdr__adaptive__odbc_8c_source.html#l00379">odbc_log()</a>, <a class="el" href="../../d7/d81/app__sms_8c_source.html#l00553">packdate()</a>, <a class="el" href="../../dd/d22/cdr__pgsql_8c_source.html#l00214">pgsql_log()</a>, <a class="el" href="../../da/dde/chan__phone_8c_source.html#l00300">phone_call()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08638">play_message_datetime()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l04895">prep_email_sub_vars()</a>, <a class="el" href="../../d5/db8/res_2prometheus_2cli_8c_source.html#l00063">prometheus_show_status()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02523">rt_extend_conf()</a>, <a class="el" href="../../d7/d1b/app__playback_8c_source.html#l00320">say_date_generic()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l01784">send_date_time()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l01803">send_date_time2()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l01826">send_date_time3()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01234">sendmail()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l02115">set_header()</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c_source.html#l00431">set_timezone_variables()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21643">sip_show_registry()</a>, <a class="el" href="../../d7/d81/app__sms_8c_source.html#l01213">sms_compose2()</a>, <a class="el" href="../../d7/d81/app__sms_8c_source.html#l01262">sms_handleincoming_proto2()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00240">static_callback()</a>, <a class="el" href="../../de/dec/func__timeout_8c_source.html#l00121">timeout_write()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l03190">transmit_definetimedate()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02527">transmit_notify_request_with_callerid()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l04979">vmu_tm()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l02281">write_history()</a>, and <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00321">write_metadata()</a>.</p>
<div class="fragment"><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;{</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d88/structstate.html">state</a> *sp = <a class="code" href="../../d9/df8/localtime_8c.html#a093cc6736e9bd033c2de06909e96fd32">ast_tzset</a>(zone);</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;   memset(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, 0, <span class="keyword">sizeof</span>(*<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>));</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;   <span class="keywordflow">return</span> sp ? <a class="code" href="../../d9/df8/localtime_8c.html#a8371be21ee5b80ea5d3bb8d4cb0a19c2">localsub</a>(timep, 0L, <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, sp) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;}</div><div class="ttc" id="localtime_8c_html_a8371be21ee5b80ea5d3bb8d4cb0a19c2"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#a8371be21ee5b80ea5d3bb8d4cb0a19c2">localsub</a></div><div class="ttdeci">static struct ast_tm * localsub(const struct timeval *timep, const long offset, struct ast_tm *tmp, const struct state *sp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01648">localtime.c:1648</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="localtime_8c_html_a093cc6736e9bd033c2de06909e96fd32"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#a093cc6736e9bd033c2de06909e96fd32">ast_tzset</a></div><div class="ttdeci">static const struct state * ast_tzset(const char *zone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01601">localtime.c:1601</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a78e7355614199810d4e2574f3ab8e424"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78e7355614199810d4e2574f3ab8e424">&#9670;&nbsp;</a></span>ast_localtime_wakeup_monitor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_localtime_wakeup_monitor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/df8/localtime_8c_source.html#l00795">795</a> of file <a class="el" href="../../d9/df8/localtime_8c_source.html">localtime.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d62/test__time_8c_source.html#l00048">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;{</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   <span class="keyword">struct </span>timeval wait_now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <span class="keyword">struct </span>timespec wait_time = { .tv_sec = wait_now.tv_sec + 2, .tv_nsec = wait_now.tv_usec * 1000 };</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/df8/localtime_8c.html#ab00ae0d2103701c435d843170ed6c96d">inotify_thread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d3/d3e/structzonelist.html">zonelist</a>);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <a class="code" href="../../d8/d89/structtest.html">test</a> = <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      pthread_kill(<a class="code" href="../../d9/df8/localtime_8c.html#ab00ae0d2103701c435d843170ed6c96d">inotify_thread</a>, SIGURG);</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;<a class="code" href="../../d9/df8/localtime_8c.html#a4b851149b13fa12af09fa8cd38c67975">initialization</a>, &amp;(&amp;<a class="code" href="../../d3/d3e/structzonelist.html">zonelist</a>)-&gt;<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;wait_time);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <a class="code" href="../../d8/d89/structtest.html">test</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d3/d3e/structzonelist.html">zonelist</a>);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="localtime_8c_html_a4b851149b13fa12af09fa8cd38c67975"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#a4b851149b13fa12af09fa8cd38c67975">initialization</a></div><div class="ttdeci">static ast_cond_t initialization</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00322">localtime.c:322</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="structzonelist_html"><div class="ttname"><a href="../../d3/d3e/structzonelist.html">zonelist</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00312">localtime.c:312</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="localtime_8c_html_ab00ae0d2103701c435d843170ed6c96d"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#ab00ae0d2103701c435d843170ed6c96d">inotify_thread</a></div><div class="ttdeci">static pthread_t inotify_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00321">localtime.c:321</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae0843e4dbbd1fed36d2676dda58e0c44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0843e4dbbd1fed36d2676dda58e0c44">&#9670;&nbsp;</a></span>ast_mktime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timeval ast_mktime </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a> *const&#160;</td>
          <td class="paramname"><em>tmp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>zone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timezone-independent version of mktime(3). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmp</td><td>Current broken-out time, including microseconds </td></tr>
    <tr><td class="paramname">zone</td><td>Text string of a standard system zoneinfo file. If NULL, the system localtime will be used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">A</td><td>structure containing both seconds and fractional thereof since January 1st, 1970 UTC </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d9/df8/localtime_8c_source.html#l02357">2357</a> of file <a class="el" href="../../d9/df8/localtime_8c_source.html">localtime.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/df8/localtime_8c_source.html#l01601">ast_tzset()</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l01648">localsub()</a>, and <a class="el" href="../../d9/df8/localtime_8c_source.html#l02292">time1()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01396">acf_strptime()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04500">find_conf_realtime()</a>, <a class="el" href="../../dc/d18/res__calendar__caldav_8c_source.html#l00324">icalfloat_to_timet()</a>, <a class="el" href="../../d2/d4f/res__calendar__ews_8c_source.html#l00163">mstime_to_time_t()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02523">rt_extend_conf()</a>, <a class="el" href="../../d7/d81/app__sms_8c_source.html#l01262">sms_handleincoming_proto2()</a>, <a class="el" href="../../d7/d81/app__sms_8c_source.html#l00827">sms_readfile()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08292">testtime_write()</a>, and <a class="el" href="../../d7/d81/app__sms_8c_source.html#l00579">unpackdate()</a>.</p>
<div class="fragment"><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;{</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d88/structstate.html">state</a> *sp;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;   <span class="keywordflow">if</span> (!(sp = <a class="code" href="../../d9/df8/localtime_8c.html#a093cc6736e9bd033c2de06909e96fd32">ast_tzset</a>(zone)))</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/df8/localtime_8c.html#a1b8ea0e8c8b3cdd567bb15730566eec1">WRONG</a>;</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/df8/localtime_8c.html#aecff377689b9165c40c7badfadb03b23">time1</a>(tmp, <a class="code" href="../../d9/df8/localtime_8c.html#a8371be21ee5b80ea5d3bb8d4cb0a19c2">localsub</a>, 0L, sp);</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;}</div><div class="ttc" id="localtime_8c_html_a8371be21ee5b80ea5d3bb8d4cb0a19c2"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#a8371be21ee5b80ea5d3bb8d4cb0a19c2">localsub</a></div><div class="ttdeci">static struct ast_tm * localsub(const struct timeval *timep, const long offset, struct ast_tm *tmp, const struct state *sp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01648">localtime.c:1648</a></div></div>
<div class="ttc" id="localtime_8c_html_a1b8ea0e8c8b3cdd567bb15730566eec1"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#a1b8ea0e8c8b3cdd567bb15730566eec1">WRONG</a></div><div class="ttdeci">static const struct timeval WRONG</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00111">localtime.c:111</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="localtime_8c_html_aecff377689b9165c40c7badfadb03b23"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#aecff377689b9165c40c7badfadb03b23">time1</a></div><div class="ttdeci">static struct timeval time1(struct ast_tm *tmp, struct ast_tm *(*const funcp)(const struct timeval *, long, struct ast_tm *, const struct state *), const long offset, const struct state *sp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02292">localtime.c:2292</a></div></div>
<div class="ttc" id="localtime_8c_html_a093cc6736e9bd033c2de06909e96fd32"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#a093cc6736e9bd033c2de06909e96fd32">ast_tzset</a></div><div class="ttdeci">static const struct state * ast_tzset(const char *zone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01601">localtime.c:1601</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a593a5d58d04c3a32ef22894c636f1eff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a593a5d58d04c3a32ef22894c636f1eff">&#9670;&nbsp;</a></span>ast_setlocale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_setlocale </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>locale</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the thread-local representation of the current locale. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/df8/localtime_8c_source.html#l02420">2420</a> of file <a class="el" href="../../d9/df8/localtime_8c_source.html">localtime.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l02377">find_by_name()</a>, <a class="el" href="../../da/df3/structlocale__entry.html#af5abf2fc138ad903e83cffbbf9618ab2">locale_entry::list</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l00244">locale_entry::locale</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l00245">locale_entry::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/df8/localtime_8c_source.html#l02388">store_by_locale()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/df8/localtime_8c_source.html#l02452">ast_strftime_locale()</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l02529">ast_strptime_locale()</a>, and <a class="el" href="../../d1/dfd/test__locale_8c_source.html#l00049">handle_cli_test_locales()</a>.</p>
<div class="fragment"><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;{</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structlocale__entry.html">locale_entry</a> *cur;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#aa1f5af873d05619cbcf7901e194b292c">locale_t</a> prevlocale = LC_GLOBAL_LOCALE;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/df8/localtime_8c.html#a66f22e79839837444ec7d34152782d85">store_by_locale</a>(uselocale(LC_GLOBAL_LOCALE));</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;   }</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d1/dbf/structlocalelist.html">localelist</a>);</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;   <span class="keywordflow">if</span> ((cur = <a class="code" href="../../d9/df8/localtime_8c.html#abc2444b9e210568f063ce65a2d6f2d95">find_by_name</a>(<a class="code" href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a>))) {</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      prevlocale = uselocale(cur-&gt;<a class="code" href="../../da/df3/structlocale__entry.html#a1a89c34f66b2ad6ef9f6a6de87c8616d">locale</a>);</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;   }</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;   <span class="keywordflow">if</span> (!cur) {</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;      <span class="keywordflow">if</span> ((cur = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*cur) + strlen(<a class="code" href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a>) + 1))) {</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;         cur-&gt;<a class="code" href="../../da/df3/structlocale__entry.html#a1a89c34f66b2ad6ef9f6a6de87c8616d">locale</a> = newlocale(LC_ALL_MASK, <a class="code" href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;         strcpy(cur-&gt;<a class="code" href="../../da/df3/structlocale__entry.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, <a class="code" href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a>); <span class="comment">/* SAFE */</span></div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d1/dbf/structlocalelist.html">localelist</a>, cur, <a class="code" href="../../da/df3/structlocale__entry.html#af5abf2fc138ad903e83cffbbf9618ab2">list</a>);</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;         prevlocale = uselocale(cur-&gt;<a class="code" href="../../da/df3/structlocale__entry.html#a1a89c34f66b2ad6ef9f6a6de87c8616d">locale</a>);</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      }</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;   }</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d1/dbf/structlocalelist.html">localelist</a>);</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/df8/localtime_8c.html#a66f22e79839837444ec7d34152782d85">store_by_locale</a>(prevlocale);</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structlocale__entry_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../da/df3/structlocale__entry.html#afd3f693e384b1ee0a0c44d58351eb87d">locale_entry::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00245">localtime.c:245</a></div></div>
<div class="ttc" id="localtime_8h_html_aa1f5af873d05619cbcf7901e194b292c"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#aa1f5af873d05619cbcf7901e194b292c">locale_t</a></div><div class="ttdeci">void * locale_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/deb/localtime_8h_source.html#l00032">localtime.h:32</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_ad4786cc0738d237b7697e5448da7d22e"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a></div><div class="ttdeci">static char locale[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00918">app_voicemail.c:918</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="localtime_8c_html_abc2444b9e210568f063ce65a2d6f2d95"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#abc2444b9e210568f063ce65a2d6f2d95">find_by_name</a></div><div class="ttdeci">static struct locale_entry * find_by_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02377">localtime.c:2377</a></div></div>
<div class="ttc" id="structlocale__entry_html"><div class="ttname"><a href="../../da/df3/structlocale__entry.html">locale_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00242">localtime.c:242</a></div></div>
<div class="ttc" id="structlocalelist_html"><div class="ttname"><a href="../../d1/dbf/structlocalelist.html">localelist</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00314">localtime.c:314</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="structlocale__entry_html_a1a89c34f66b2ad6ef9f6a6de87c8616d"><div class="ttname"><a href="../../da/df3/structlocale__entry.html#a1a89c34f66b2ad6ef9f6a6de87c8616d">locale_entry::locale</a></div><div class="ttdeci">locale_t locale</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00244">localtime.c:244</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structlocale__entry_html_af5abf2fc138ad903e83cffbbf9618ab2"><div class="ttname"><a href="../../da/df3/structlocale__entry.html#af5abf2fc138ad903e83cffbbf9618ab2">locale_entry::list</a></div><div class="ttdeci">struct locale_entry::@424 list</div></div>
<div class="ttc" id="localtime_8c_html_a66f22e79839837444ec7d34152782d85"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#a66f22e79839837444ec7d34152782d85">store_by_locale</a></div><div class="ttdeci">static const char * store_by_locale(locale_t prevlocale)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02388">localtime.c:2388</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8e63928b14a347bd3973d680b885f93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8e63928b14a347bd3973d680b885f93">&#9670;&nbsp;</a></span>ast_strftime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_strftime </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a> *&#160;</td>
          <td class="paramname"><em>tm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Special version of strftime(3) that handles fractions of a second. Takes the same arguments as strftime(3), with the addition of q, which specifies microseconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Address in memory where the resulting string will be stored. </td></tr>
    <tr><td class="paramname">len</td><td>Size of the chunk of memory buf. </td></tr>
    <tr><td class="paramname">format</td><td>A string specifying the format of time to be placed into buf. </td></tr>
    <tr><td class="paramname">tm</td><td>Pointer to the broken out time to be used for the format. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">An</td><td>integer value specifying the number of bytes placed into buf or -1 on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d9/df8/localtime_8c_source.html#l02524">2524</a> of file <a class="el" href="../../d9/df8/localtime_8c_source.html">localtime.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/df8/localtime_8c_source.html#l02452">ast_strftime_locale()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01362">acf_strftime()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06318">action_corestatus()</a>, <a class="el" href="../../d4/d4c/cdr__csv_8c_source.html#l00192">append_date()</a>, <a class="el" href="../../da/dc9/cel_8c_source.html#l00660">ast_cel_fabricate_channel_from_event()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00456">ast_http_send()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00649">ast_json_timeval()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l00894">ast_queue_log()</a>, <a class="el" href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00162">beanstalk_put()</a>, <a class="el" href="../../d7/d83/cdr__radius_8c_source.html#l00098">build_radius_record()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03035">cdr_get_tv()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00248">cdr_read_callback()</a>, <a class="el" href="../../d1/d0c/cel__beanstalkd_8c_source.html#l00089">cel_bs_put()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l02727">cli_prompt()</a>, <a class="el" href="../../de/dfa/pjsip__scheduler_8c_source.html#l00490">cli_show_tasks()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../d2/d72/parser_8c_source.html#l00173">dump_datetime()</a>, <a class="el" href="../../d7/dc3/res__calendar_8c_source.html#l01587">epoch_to_string()</a>, <a class="el" href="../../d2/d23/res__calendar__exchange_8c_source.html#l00532">exchangecal_get_events_between()</a>, <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00071">execute_cb()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04500">find_conf_realtime()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l01682">format_log_message_ap()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l00977">get_date()</a>, <a class="el" href="../../d2/d4f/res__calendar__ews_8c_source.html#l00650">get_ewscal_ids_for()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00716">handle_cli_odbc_show()</a>, <a class="el" href="../../d1/dfd/test__locale_8c_source.html#l00049">handle_cli_test_locales()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l03185">handle_minivm_show_stats()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00450">handle_show_settings()</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00091">http_callback()</a>, <a class="el" href="../../d7/d81/app__sms_8c_source.html#l00303">isodate()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01912">leave_voicemail()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l05085">make_email_file()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l00617">make_logchannel()</a>, <a class="el" href="../../df/d5a/cdr__manager_8c_source.html#l00273">manager_log()</a>, <a class="el" href="../../d2/d4f/res__calendar__ews_8c_source.html#l00470">mstime()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00172">mysql_log()</a>, <a class="el" href="../../df/ddb/cdr__adaptive__odbc_8c_source.html#l00379">odbc_log()</a>, <a class="el" href="../../dd/d22/cdr__pgsql_8c_source.html#l00214">pgsql_log()</a>, <a class="el" href="../../d5/db8/res_2prometheus_2cli_8c_source.html#l00063">prometheus_show_status()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02523">rt_extend_conf()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01234">sendmail()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l05571">sendpage()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l02115">set_header()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21643">sip_show_registry()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00240">static_callback()</a>, <a class="el" href="../../de/dec/func__timeout_8c_source.html#l00121">timeout_write()</a>, and <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00321">write_metadata()</a>.</p>
<div class="fragment"><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;{</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/df8/localtime_8c.html#a664237612bbea63d002bae8c48a7ff59">ast_strftime_locale</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="localtime_8c_html_a664237612bbea63d002bae8c48a7ff59"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#a664237612bbea63d002bae8c48a7ff59">ast_strftime_locale</a></div><div class="ttdeci">int ast_strftime_locale(char *buf, size_t len, const char *tmp, const struct ast_tm *tm, const char *locale)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02452">localtime.c:2452</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5092e0e84f5959f275d6de28438250e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5092e0e84f5959f275d6de28438250e">&#9670;&nbsp;</a></span>ast_strftime_locale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_strftime_locale </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a> *&#160;</td>
          <td class="paramname"><em>tm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>locale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/df8/localtime_8c_source.html#l02452">2452</a> of file <a class="el" href="../../d9/df8/localtime_8c_source.html">localtime.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00228">ast_realloc</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l02420">ast_setlocale()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../d5/deb/localtime_8h_source.html#l00048">ast_tm::tm_usec</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/df8/localtime_8c_source.html#l02524">ast_strftime()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l05085">make_email_file()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l04895">prep_email_sub_vars()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l05571">sendpage()</a>.</p>
<div class="fragment"><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;{</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;   <span class="keywordtype">size_t</span> fmtlen = strlen(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>) + 1;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, fmtlen), *fptr = <a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, *newfmt;</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;   <span class="keywordtype">int</span> decimals = -1, i, res;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;   <span class="keywordtype">long</span> fraction;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *prevlocale;</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;<span class="comment">/* Ensure the buffer is initialized. */</span></div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;   <span class="keywordflow">if</span> (!format) {</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;   }</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;   <span class="keywordflow">for</span> (; *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>; <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>++) {</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;      <span class="keywordflow">if</span> (*<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> == <span class="charliteral">&#39;%&#39;</span>) {</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;         <span class="keywordflow">switch</span> (<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[1]) {</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;1&#39;</span>:</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;2&#39;</span>:</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;3&#39;</span>:</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;4&#39;</span>:</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;5&#39;</span>:</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;6&#39;</span>:</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[2] != <span class="charliteral">&#39;q&#39;</span>) {</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;               <span class="keywordflow">goto</span> defcase;</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;            }</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;            decimals = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[1] - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;            <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>++;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;            <span class="comment">/* Fall through */</span></div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;q&#39;</span>: <span class="comment">/* Milliseconds */</span></div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;            <span class="keywordflow">if</span> (decimals == -1) {</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;               decimals = 3;</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;            }</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;            <span class="comment">/* Juggle some memory to fit the item */</span></div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;            newfmt = <a class="code" href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a>(format, fmtlen + decimals);</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;            <span class="keywordflow">if</span> (!newfmt) {</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(format);</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;               <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;            }</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;            fptr = fptr - format + newfmt;</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;            format = newfmt;</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;            fmtlen += decimals;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;            <span class="comment">/* Reduce the fraction of time to the accuracy needed */</span></div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;            <span class="keywordflow">for</span> (i = 6, fraction = tm-&gt;<a class="code" href="../../d5/d84/structast__tm.html#aefbab7d1223d156a8cfaaf3ff170540b">tm_usec</a>; i &gt; decimals; i--) {</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;               fraction /= 10;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;            }</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;            fptr += sprintf(fptr, <span class="stringliteral">&quot;%0*ld&quot;</span>, decimals, fraction);</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;            <span class="comment">/* Reset, in case more than one &#39;q&#39; specifier exists */</span></div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;            decimals = -1;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;            <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>++;</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;            <span class="keywordflow">goto</span> defcase;</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;         }</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;defcase: *fptr++ = *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      }</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;   }</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;   *fptr = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;<span class="preprocessor">#undef strftime</span></div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a>) {</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      prevlocale = <a class="code" href="../../d9/df8/localtime_8c.html#a593a5d58d04c3a32ef22894c636f1eff">ast_setlocale</a>(<a class="code" href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a>);</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;   }</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;   res = (int)strftime(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, format, (<span class="keyword">struct</span> tm *)tm);</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a>) {</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;      <a class="code" href="../../d9/df8/localtime_8c.html#a593a5d58d04c3a32ef22894c636f1eff">ast_setlocale</a>(prevlocale);</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;   }</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(format);</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;}</div><div class="ttc" id="astmm_8h_html_aa6bcdb74dc1508c22986f0adf171a0f2"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a></div><div class="ttdeci">#define ast_realloc(p, len)</div><div class="ttdoc">A wrapper for realloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00228">astmm.h:228</a></div></div>
<div class="ttc" id="structast__tm_html_aefbab7d1223d156a8cfaaf3ff170540b"><div class="ttname"><a href="../../d5/d84/structast__tm.html#aefbab7d1223d156a8cfaaf3ff170540b">ast_tm::tm_usec</a></div><div class="ttdeci">int tm_usec</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/deb/localtime_8h_source.html#l00048">localtime.h:48</a></div></div>
<div class="ttc" id="localtime_8c_html_a593a5d58d04c3a32ef22894c636f1eff"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#a593a5d58d04c3a32ef22894c636f1eff">ast_setlocale</a></div><div class="ttdeci">const char * ast_setlocale(const char *locale)</div><div class="ttdoc">Set the thread-local representation of the current locale. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02420">localtime.c:2420</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_ad4786cc0738d237b7697e5448da7d22e"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a></div><div class="ttdeci">static char locale[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00918">app_voicemail.c:918</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3eb2c73accce1b149ce597de80d1677a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3eb2c73accce1b149ce597de80d1677a">&#9670;&nbsp;</a></span>ast_strptime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_strptime </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a> *&#160;</td>
          <td class="paramname"><em>tm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Special version of strptime(3) which places the answer in the common structure <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a>. Also, unlike strptime(3), <a class="el" href="../../d5/deb/localtime_8h.html#a3eb2c73accce1b149ce597de80d1677a" title="Special version of strptime(3) which places the answer in the common structure ast_tm. Also, unlike strptime(3), ast_strptime() initializes its memory prior to use. ">ast_strptime()</a> initializes its memory prior to use. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>A string specifying some portion of a date and time. </td></tr>
    <tr><td class="paramname">format</td><td>The format in which the string, s, is expected. </td></tr>
    <tr><td class="paramname">tm</td><td>The broken-out time structure into which the parsed data is expected. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">A</td><td>pointer to the first character within s not used to parse the date and time. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d9/df8/localtime_8c_source.html#l02550">2550</a> of file <a class="el" href="../../d9/df8/localtime_8c_source.html">localtime.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/df8/localtime_8c_source.html#l02529">ast_strptime_locale()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01396">acf_strptime()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04500">find_conf_realtime()</a>, <a class="el" href="../../d2/d4f/res__calendar__ews_8c_source.html#l00163">mstime_to_time_t()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02523">rt_extend_conf()</a>, and <a class="el" href="../../db/d94/pbx_8c_source.html#l08292">testtime_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;{</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/df8/localtime_8c.html#a89cd0569a31aa8abaeecfe4eeeb0df53">ast_strptime_locale</a>(s, <a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="localtime_8c_html_a89cd0569a31aa8abaeecfe4eeeb0df53"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#a89cd0569a31aa8abaeecfe4eeeb0df53">ast_strptime_locale</a></div><div class="ttdeci">char * ast_strptime_locale(const char *s, const char *format, struct ast_tm *tm, const char *locale)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02529">localtime.c:2529</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a89cd0569a31aa8abaeecfe4eeeb0df53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89cd0569a31aa8abaeecfe4eeeb0df53">&#9670;&nbsp;</a></span>ast_strptime_locale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_strptime_locale </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/d84/structast__tm.html">ast_tm</a> *&#160;</td>
          <td class="paramname"><em>tm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>locale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/df8/localtime_8c_source.html#l02529">2529</a> of file <a class="el" href="../../d9/df8/localtime_8c_source.html">localtime.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/df8/localtime_8c_source.html#l02420">ast_setlocale()</a>, <a class="el" href="../../d5/deb/localtime_8h_source.html#l00044">ast_tm::tm_isdst</a>, and <a class="el" href="../../d5/deb/localtime_8h_source.html#l00048">ast_tm::tm_usec</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/df8/localtime_8c_source.html#l02550">ast_strptime()</a>.</p>
<div class="fragment"><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;{</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;   <span class="keyword">struct </span>tm tm2 = { 0, };</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;   <span class="keywordtype">char</span> *res;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *prevlocale;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;   prevlocale = <a class="code" href="../../d9/df8/localtime_8c.html#a593a5d58d04c3a32ef22894c636f1eff">ast_setlocale</a>(<a class="code" href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a>);</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;   res = strptime(s, <a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, &amp;tm2);</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;   <a class="code" href="../../d9/df8/localtime_8c.html#a593a5d58d04c3a32ef22894c636f1eff">ast_setlocale</a>(prevlocale);</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;   <span class="comment">/* ast_time and tm are not the same size - tm is a subset of</span></div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;<span class="comment">    * ast_time.  Hence, the size of tm needs to be used for the</span></div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;<span class="comment">    * memcpy</span></div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;   memcpy(tm, &amp;tm2, <span class="keyword">sizeof</span>(tm2));</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;   tm-&gt;<a class="code" href="../../d5/d84/structast__tm.html#aefbab7d1223d156a8cfaaf3ff170540b">tm_usec</a> = 0;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;   <span class="comment">/* strptime(3) doesn&#39;t set .tm_isdst correctly, so to force ast_mktime(3)</span></div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;<span class="comment">    * to deal with it correctly, we set it to -1. */</span></div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;   tm-&gt;<a class="code" href="../../d5/d84/structast__tm.html#a7d102a87f898878ebf37ebd87504e099">tm_isdst</a> = -1;</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;}</div><div class="ttc" id="structast__tm_html_aefbab7d1223d156a8cfaaf3ff170540b"><div class="ttname"><a href="../../d5/d84/structast__tm.html#aefbab7d1223d156a8cfaaf3ff170540b">ast_tm::tm_usec</a></div><div class="ttdeci">int tm_usec</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/deb/localtime_8h_source.html#l00048">localtime.h:48</a></div></div>
<div class="ttc" id="localtime_8c_html_a593a5d58d04c3a32ef22894c636f1eff"><div class="ttname"><a href="../../d9/df8/localtime_8c.html#a593a5d58d04c3a32ef22894c636f1eff">ast_setlocale</a></div><div class="ttdeci">const char * ast_setlocale(const char *locale)</div><div class="ttdoc">Set the thread-local representation of the current locale. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02420">localtime.c:2420</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_ad4786cc0738d237b7697e5448da7d22e"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#ad4786cc0738d237b7697e5448da7d22e">locale</a></div><div class="ttdeci">static char locale[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00918">app_voicemail.c:918</a></div></div>
<div class="ttc" id="structast__tm_html_a7d102a87f898878ebf37ebd87504e099"><div class="ttname"><a href="../../d5/d84/structast__tm.html#a7d102a87f898878ebf37ebd87504e099">ast_tm::tm_isdst</a></div><div class="ttdeci">int tm_isdst</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/deb/localtime_8h_source.html#l00044">localtime.h:44</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:02 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
