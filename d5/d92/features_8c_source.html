<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: features.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">features.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/d92/features_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Asterisk -- An open source telephony toolkit.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 1999 - 2012, Digium, Inc.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright (C) 2012, Russell Bryant</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * Mark Spencer &lt;markster@digium.com&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * See http://www.asterisk.org for more information about</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * the Asterisk project. Please do not directly contact</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * any of the maintainers of this project for assistance;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * the project provides a web site, mailing lists and IRC</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * channels for your use.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * This program is free software, distributed under the terms of</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * at the top of the source tree.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/*! \file</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * \brief Routines implementing call features as call pickup, parking and transfer</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * \author Mark Spencer &lt;markster@digium.com&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/*! \li \ref features.c uses the configuration file \ref features.conf</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * \addtogroup configuration_file Configuration Files</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * \page features.conf features.conf</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * \verbinclude features.conf.sample</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/*** MODULEINFO</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">   &lt;support_level&gt;core&lt;/support_level&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/db2/asterisk_8h.html">asterisk.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d78/__private_8h.html">asterisk/_private.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html">features_config.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;pthread.h&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;netinet/in.h&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d42/lock_8h.html">asterisk/lock.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4d/file_8h.html">asterisk/file.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d7b/channel_8h.html">asterisk/channel.h</a>&quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/de0/pbx_8h.html">asterisk/pbx.h</a>&quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/da3/causes_8h.html">asterisk/causes.h</a>&quot;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d16/module_8h.html">asterisk/module.h</a>&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d39/translate_8h.html">asterisk/translate.h</a>&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html">asterisk/app.h</a>&quot;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/dce/say_8h.html">asterisk/say.h</a>&quot;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d47/features_8h.html">asterisk/features.h</a>&quot;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d07/musiconhold_8h.html">asterisk/musiconhold.h</a>&quot;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html">asterisk/config.h</a>&quot;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/db0/cli_8h.html">asterisk/cli.h</a>&quot;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d45/manager_8h.html">asterisk/manager.h</a>&quot;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d60/utils_8h.html">asterisk/utils.h</a>&quot;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/da2/devicestate_8h.html">asterisk/devicestate.h</a>&quot;</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d79/audiohook_8h.html">asterisk/audiohook.h</a>&quot;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/dc3/global__datastores_8h.html">asterisk/global_datastores.h</a>&quot;</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/da5/astobj2_8h.html">asterisk/astobj2.h</a>&quot;</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/ddc/test_8h.html">asterisk/test.h</a>&quot;</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d56/bridge_8h.html">asterisk/bridge.h</a>&quot;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d7a/bridge__features_8h.html">asterisk/bridge_features.h</a>&quot;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d1e/bridge__basic_8h.html">asterisk/bridge_basic.h</a>&quot;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d85/bridge__after_8h.html">asterisk/bridge_after.h</a>&quot;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d79/stasis_8h.html">asterisk/stasis.h</a>&quot;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d4a/stasis__channels_8h.html">asterisk/stasis_channels.h</a>&quot;</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html">asterisk/features_config.h</a>&quot;</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d93/max__forwards_8h.html">asterisk/max_forwards.h</a>&quot;</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d95/stream_8h.html">asterisk/stream.h</a>&quot;</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">/*** DOCUMENTATION</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">   &lt;application name=&quot;Bridge&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">         Bridge two channels.</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">         &lt;parameter name=&quot;channel&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">            &lt;para&gt;The current channel is bridged to the channel</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">            identified by the channel name, channel name prefix, or channel</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">            uniqueid.&lt;/para&gt;</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">         &lt;parameter name=&quot;options&quot;&gt;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">            &lt;optionlist&gt;</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">               &lt;option name=&quot;p&quot;&gt;</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">                  &lt;para&gt;Play a courtesy tone to &lt;replaceable&gt;channel&lt;/replaceable&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">               &lt;option name=&quot;F&quot; argsep=&quot;^&quot;&gt;</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">                  &lt;argument name=&quot;context&quot; required=&quot;false&quot; /&gt;</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">                  &lt;argument name=&quot;exten&quot; required=&quot;false&quot; /&gt;</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">                  &lt;argument name=&quot;priority&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">                  &lt;para&gt;When the bridger hangs up, transfer the &lt;emphasis&gt;bridged&lt;/emphasis&gt; party</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">                  to the specified destination and &lt;emphasis&gt;start&lt;/emphasis&gt; execution at that location.&lt;/para&gt;</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">                  &lt;note&gt;</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">                     &lt;para&gt;Any channel variables you want the called channel to inherit from the caller channel must be</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">                     prefixed with one or two underbars (&#39;_&#39;).&lt;/para&gt;</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">                  &lt;/note&gt;</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">                  &lt;note&gt;</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">                     &lt;para&gt;This option will override the &#39;x&#39; option&lt;/para&gt;</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">                  &lt;/note&gt;</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">               &lt;option name=&quot;F&quot;&gt;</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">                  &lt;para&gt;When the bridger hangs up, transfer the &lt;emphasis&gt;bridged&lt;/emphasis&gt; party</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">                  to the next priority of the current extension and &lt;emphasis&gt;start&lt;/emphasis&gt; execution</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">                  at that location.&lt;/para&gt;</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">                  &lt;note&gt;</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">                     &lt;para&gt;Any channel variables you want the called channel to inherit from the caller channel must be</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">                     prefixed with one or two underbars (&#39;_&#39;).&lt;/para&gt;</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">                  &lt;/note&gt;</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">                  &lt;note&gt;</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">                     &lt;para&gt;Using this option from a Macro() or GoSub() might not make sense as there would be no return points.&lt;/para&gt;</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">                  &lt;/note&gt;</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">                  &lt;note&gt;</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">                     &lt;para&gt;This option will override the &#39;x&#39; option&lt;/para&gt;</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">                  &lt;/note&gt;</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">               &lt;option name=&quot;h&quot;&gt;</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">                  &lt;para&gt;Allow the called party to hang up by sending the</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">                  &lt;replaceable&gt;*&lt;/replaceable&gt; DTMF digit.&lt;/para&gt;</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">               &lt;option name=&quot;H&quot;&gt;</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">                  &lt;para&gt;Allow the calling party to hang up by pressing the</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">                  &lt;replaceable&gt;*&lt;/replaceable&gt; DTMF digit.&lt;/para&gt;</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">               &lt;option name=&quot;k&quot;&gt;</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">                  &lt;para&gt;Allow the called party to enable parking of the call by sending</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">                  the DTMF sequence defined for call parking in &lt;filename&gt;features.conf&lt;/filename&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">               &lt;option name=&quot;K&quot;&gt;</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">                  &lt;para&gt;Allow the calling party to enable parking of the call by sending</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">                   the DTMF sequence defined for call parking in &lt;filename&gt;features.conf&lt;/filename&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">               &lt;option name=&quot;L(x[:y][:z])&quot;&gt;</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">                  &lt;para&gt;Limit the call to &lt;replaceable&gt;x&lt;/replaceable&gt; ms. Play a warning</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">                  when &lt;replaceable&gt;y&lt;/replaceable&gt; ms are left. Repeat the warning every</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">                  &lt;replaceable&gt;z&lt;/replaceable&gt; ms. The following special variables can be</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">                  used with this option:&lt;/para&gt;</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">                  &lt;variablelist&gt;</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">                     &lt;variable name=&quot;LIMIT_PLAYAUDIO_CALLER&quot;&gt;</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">                        &lt;para&gt;Play sounds to the caller. yes|no (default yes)&lt;/para&gt;</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">                     &lt;/variable&gt;</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">                     &lt;variable name=&quot;LIMIT_PLAYAUDIO_CALLEE&quot;&gt;</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">                        &lt;para&gt;Play sounds to the callee. yes|no&lt;/para&gt;</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">                     &lt;/variable&gt;</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">                     &lt;variable name=&quot;LIMIT_TIMEOUT_FILE&quot;&gt;</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">                        &lt;para&gt;File to play when time is up.&lt;/para&gt;</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">                     &lt;/variable&gt;</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">                     &lt;variable name=&quot;LIMIT_CONNECT_FILE&quot;&gt;</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">                        &lt;para&gt;File to play when call begins.&lt;/para&gt;</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">                     &lt;/variable&gt;</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">                     &lt;variable name=&quot;LIMIT_WARNING_FILE&quot;&gt;</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">                        &lt;para&gt;File to play as warning if &lt;replaceable&gt;y&lt;/replaceable&gt; is</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">                        defined. The default is to say the time remaining.&lt;/para&gt;</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">                     &lt;/variable&gt;</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">                  &lt;/variablelist&gt;</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">               &lt;option name=&quot;S(x)&quot;&gt;</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">                  &lt;para&gt;Hang up the call after &lt;replaceable&gt;x&lt;/replaceable&gt; seconds *after* the called party has answered the call.&lt;/para&gt;</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">               &lt;option name=&quot;t&quot;&gt;</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">                  &lt;para&gt;Allow the called party to transfer the calling party by sending the</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">                  DTMF sequence defined in &lt;filename&gt;features.conf&lt;/filename&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">               &lt;option name=&quot;T&quot;&gt;</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">                  &lt;para&gt;Allow the calling party to transfer the called party by sending the</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">                  DTMF sequence defined in &lt;filename&gt;features.conf&lt;/filename&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">               &lt;option name=&quot;w&quot;&gt;</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">                  &lt;para&gt;Allow the called party to enable recording of the call by sending</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">                  the DTMF sequence defined for one-touch recording in &lt;filename&gt;features.conf&lt;/filename&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">               &lt;option name=&quot;W&quot;&gt;</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">                  &lt;para&gt;Allow the calling party to enable recording of the call by sending</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">                  the DTMF sequence defined for one-touch recording in &lt;filename&gt;features.conf&lt;/filename&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">               &lt;option name=&quot;x&quot;&gt;</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">                  &lt;para&gt;Cause the called party to be hung up after the bridge, instead of being</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">                  restarted in the dialplan.&lt;/para&gt;</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">            &lt;/optionlist&gt;</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">         &lt;para&gt;Allows the ability to bridge two channels via the dialplan.&lt;/para&gt;</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">         &lt;para&gt;This application sets the following channel variable upon completion:&lt;/para&gt;</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">         &lt;variablelist&gt;</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">            &lt;variable name=&quot;BRIDGERESULT&quot;&gt;</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">               &lt;para&gt;The result of the bridge attempt as a text string.&lt;/para&gt;</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">               &lt;value name=&quot;SUCCESS&quot; /&gt;</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">               &lt;value name=&quot;FAILURE&quot; /&gt;</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">               &lt;value name=&quot;LOOP&quot; /&gt;</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">               &lt;value name=&quot;NONEXISTENT&quot; /&gt;</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">            &lt;/variable&gt;</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">         &lt;/variablelist&gt;</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">      &lt;see-also&gt;</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">         &lt;ref type=&quot;manager&quot;&gt;Bridge&lt;/ref&gt;</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">         &lt;ref type=&quot;managerEvent&quot;&gt;BridgeCreate&lt;/ref&gt;</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">         &lt;ref type=&quot;managerEvent&quot;&gt;BridgeEnter&lt;/ref&gt;</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">      &lt;/see-also&gt;</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">   &lt;/application&gt;</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">   &lt;manager name=&quot;Bridge&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">         Bridge two channels already in the PBX.</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">         &lt;parameter name=&quot;Channel1&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">            &lt;para&gt;Channel to Bridge to Channel2.&lt;/para&gt;</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">         &lt;parameter name=&quot;Channel2&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">            &lt;para&gt;Channel to Bridge to Channel1.&lt;/para&gt;</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">         &lt;parameter name=&quot;Tone&quot;&gt;</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">            &lt;para&gt;Play courtesy tone to Channel 2.&lt;/para&gt;</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">            &lt;enumlist&gt;</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">               &lt;enum name=&quot;no&quot; /&gt;</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">               &lt;enum name=&quot;Channel1&quot; /&gt;</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">               &lt;enum name=&quot;Channel2&quot; /&gt;</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">               &lt;enum name=&quot;Both&quot; /&gt;</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">            &lt;/enumlist&gt;</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">         &lt;para&gt;Bridge together two channels already in the PBX.&lt;/para&gt;</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">      &lt;see-also&gt;</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;Bridge&lt;/ref&gt;</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">         &lt;ref type=&quot;managerEvent&quot;&gt;BridgeCreate&lt;/ref&gt;</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">         &lt;ref type=&quot;managerEvent&quot;&gt;BridgeEnter&lt;/ref&gt;</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">         &lt;ref type=&quot;manager&quot;&gt;BridgeDestroy&lt;/ref&gt;</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">         &lt;ref type=&quot;manager&quot;&gt;BridgeInfo&lt;/ref&gt;</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">         &lt;ref type=&quot;manager&quot;&gt;BridgeKick&lt;/ref&gt;</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">         &lt;ref type=&quot;manager&quot;&gt;BridgeList&lt;/ref&gt;</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">      &lt;/see-also&gt;</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#ad734cf14eba6d25d25ffe0cbf9d5cac8">  249</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#ad734cf14eba6d25d25ffe0cbf9d5cac8abf76b8944a1ac35aafbe2f3552bef372">  250</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#ad734cf14eba6d25d25ffe0cbf9d5cac8abf76b8944a1ac35aafbe2f3552bef372">FEATURE_INTERPRET_DETECT</a>, <span class="comment">/* Used by ast_feature_detect */</span></div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#ad734cf14eba6d25d25ffe0cbf9d5cac8aa6bdffdbaadf19af543d4cabf4387810">  251</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#ad734cf14eba6d25d25ffe0cbf9d5cac8aa6bdffdbaadf19af543d4cabf4387810">FEATURE_INTERPRET_DO</a>,     <span class="comment">/* Used by feature_interpret */</span></div><div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#ad734cf14eba6d25d25ffe0cbf9d5cac8a8f5f0dd42458225662e3ddaabb1cb5d2">  252</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#ad734cf14eba6d25d25ffe0cbf9d5cac8a8f5f0dd42458225662e3ddaabb1cb5d2">FEATURE_INTERPRET_CHECK</a>,  <span class="comment">/* Used by feature_check */</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;} <a class="code" href="../../d5/d92/features_8c.html#ad734cf14eba6d25d25ffe0cbf9d5cac8">feature_interpret_op</a>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="../../da/db3/structast__dial__features.html">  255</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../da/db3/structast__dial__features.html">ast_dial_features</a> {<span class="comment"></span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">   /*! Channel&#39;s feature flags. */</span></div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="../../da/db3/structast__dial__features.html#a609df0c692a45ba1ef3b752a801442fc">  257</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> <a class="code" href="../../da/db3/structast__dial__features.html#a609df0c692a45ba1ef3b752a801442fc">my_features</a>;<span class="comment"></span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">   /*! Bridge peer&#39;s feature flags. */</span></div><div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="../../da/db3/structast__dial__features.html#a271c024c69e882b0c4bb3d99e9a30075">  259</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> <a class="code" href="../../da/db3/structast__dial__features.html#a271c024c69e882b0c4bb3d99e9a30075">peer_features</a>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;};</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#adef8fadeae29c7bd0b0f5133352f636d">  262</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../d5/d92/features_8c.html#adef8fadeae29c7bd0b0f5133352f636d">dial_features_duplicate</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;{</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/db3/structast__dial__features.html">ast_dial_features</a> *df = data, *df_copy;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   <span class="keywordflow">if</span> (!(df_copy = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*df)))) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   memcpy(df_copy, df, <span class="keyword">sizeof</span>(*df));</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <span class="keywordflow">return</span> df_copy;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#ad64a6ef22c99026de9de8fec189df84f">  275</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> <a class="code" href="../../d5/d92/features_8c.html#ad64a6ef22c99026de9de8fec189df84f">dial_features_info</a> = {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   .<a class="code" href="../../d9/dfb/structast__datastore__info.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a> = <span class="stringliteral">&quot;dial-features&quot;</span>,</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   .destroy = <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>,</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   .duplicate = <a class="code" href="../../d5/d92/features_8c.html#adef8fadeae29c7bd0b0f5133352f636d">dial_features_duplicate</a>,</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;};</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"> * \brief Set the features datastore if it doesn&#39;t exist.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"> * \param chan Channel to add features datastore</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"> * \param my_features The channel&#39;s feature flags</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"> * \param peer_features The channel&#39;s bridge peer feature flags</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"> * \retval TRUE if features datastore already existed.</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#aee1c825bbcfa66200e65818827287303">  291</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d92/features_8c.html#aee1c825bbcfa66200e65818827287303">add_features_datastore</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> *<a class="code" href="../../da/db3/structast__dial__features.html#a609df0c692a45ba1ef3b752a801442fc">my_features</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> *peer_features)</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/db3/structast__dial__features.html">ast_dial_features</a> *dialfeatures;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   datastore = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;dial_features_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keywordflow">if</span> (datastore) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="comment">/* Already exists. */</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <span class="comment">/* Create a new datastore with specified feature flags. */</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   datastore = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(&amp;dial_features_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <span class="keywordflow">if</span> (!datastore) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create channel features datastore.\n&quot;</span>);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   dialfeatures = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*dialfeatures));</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <span class="keywordflow">if</span> (!dialfeatures) {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate memory for feature flags.\n&quot;</span>);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a>(&amp;dialfeatures-&gt;<a class="code" href="../../da/db3/structast__dial__features.html#a609df0c692a45ba1ef3b752a801442fc">my_features</a>, my_features, <a class="code" href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a>);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a>(&amp;dialfeatures-&gt;<a class="code" href="../../da/db3/structast__dial__features.html#a271c024c69e882b0c4bb3d99e9a30075">peer_features</a>, peer_features, <a class="code" href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a>);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a79d869daa2e63a92b3e5f542446031bb">inheritance</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3a32e3014998d0066281c4dd8e278ae9">DATASTORE_INHERIT_FOREVER</a>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = dialfeatures;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(chan, datastore);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="../../d4/dd9/structast__bridge__thread__obj.html">  326</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/dd9/structast__bridge__thread__obj.html">ast_bridge_thread_obj</a></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;{</div><div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="../../d4/dd9/structast__bridge__thread__obj.html#a73a47a6002f06855dd9680bffbebe9eb">  328</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> bconfig;</div><div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="../../d4/dd9/structast__bridge__thread__obj.html#a84d1435c5b8d387806714ea7079304b7">  329</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/dd9/structast__bridge__thread__obj.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="../../d4/dd9/structast__bridge__thread__obj.html#a49ad9c522be37a447242ba7ff4a1e0db">  330</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/dd9/structast__bridge__thread__obj.html#a49ad9c522be37a447242ba7ff4a1e0db">peer</a>;</div><div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="../../d4/dd9/structast__bridge__thread__obj.html#acffa9c033850b0d1ab2b93ca1be518d1">  331</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/dd9/structast__bridge__thread__obj.html#acffa9c033850b0d1ab2b93ca1be518d1">return_to_pbx</a>:1;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;};</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#abe48b606047919032bb8fa51c0140965">  334</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d92/features_8c.html#abe48b606047919032bb8fa51c0140965">set_config_flags</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *<a class="code" href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>)</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;{</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(config, <a class="code" href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">features_caller</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ac20bb1f04868ac5ee4fe83a864aa2271">AST_FEATURE_DTMF_MASK</a>)) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(config, <a class="code" href="../../d5/d7b/channel_8h.html#a2bd5879255a0f6a758c99b58fcab2f27">AST_BRIDGE_DTMF_CHANNEL_0</a>);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">features_callee</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ac20bb1f04868ac5ee4fe83a864aa2271">AST_FEATURE_DTMF_MASK</a>)) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(config, <a class="code" href="../../d5/d7b/channel_8h.html#a7dbb6edabad3e02e80d605ca5d254c35">AST_BRIDGE_DTMF_CHANNEL_1</a>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(config, <a class="code" href="../../d5/d7b/channel_8h.html#a2bd5879255a0f6a758c99b58fcab2f27">AST_BRIDGE_DTMF_CHANNEL_0</a>) &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(config, <a class="code" href="../../d5/d7b/channel_8h.html#a7dbb6edabad3e02e80d605ca5d254c35">AST_BRIDGE_DTMF_CHANNEL_1</a>))) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *, applicationmap, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      applicationmap = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#a67cc1c1d8375847bc9140906c297cf58">ast_get_chan_applicationmap</a>(chan);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="keywordflow">if</span> (!applicationmap) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="comment">/* If an applicationmap exists for this channel at all, then the channel needs the DTMF flag set */</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(config, <a class="code" href="../../d5/d7b/channel_8h.html#a2bd5879255a0f6a758c99b58fcab2f27">AST_BRIDGE_DTMF_CHANNEL_0</a>);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d92/features_8c.html#a2cc97e866c50a8f3751b48684760b8db">ast_channel_log</a>(<span class="keywordtype">char</span> *title, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a2cc97e866c50a8f3751b48684760b8db">  363</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d92/features_8c.html#a2cc97e866c50a8f3751b48684760b8db">ast_channel_log</a>(<span class="keywordtype">char</span> *title, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan) <span class="comment">/* for debug, this is handy enough to justify keeping it in the source */</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;{</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;______ %s (%lx)______\n&quot;</span>, title, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) chan);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;CHAN: name: %s;  appl: %s; data: %s; contxt: %s;  exten: %s; pri: %d;\n&quot;</span>,</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#ac8b850ff95f945ad6cfeb2942799800a">ast_channel_appl</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a531fd832a2f8b0f4156735043a6158e1">ast_channel_data</a>(chan),</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a>(chan));</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;CHAN: acctcode: %s;  dialcontext: %s; amaflags: %x; maccontxt: %s;  macexten: %s; macpri: %d;\n&quot;</span>,</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#aae304e7129d84dd74fde2b4f4ae9dce4">ast_channel_dialcontext</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a938863dd527bbcac399636661623baf9">ast_channel_amaflags</a>(chan),</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#adf593d68a333075c1fcae8a73b68c069">ast_channel_macrocontext</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#ac967e3cfb7640aa743eb1c4811d46be0">ast_channel_macroexten</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a38839b63b5d31eabb850af939e2aa465">ast_channel_macropriority</a>(chan));</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;CHAN: masq: %p;  masqr: %p; uniqueID: %s; linkedID:%s\n&quot;</span>,</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a96d7e5eca937b7e71f27acc4360c3ee1">ast_channel_masq</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a954acd75e9468e701f656d60c8f374b0">ast_channel_masqr</a>(chan),</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#aa776071546e0bb0eb8cfc4c3a3159dfc">ast_channel_linkedid</a>(chan));</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a954acd75e9468e701f656d60c8f374b0">ast_channel_masqr</a>(chan)) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;CHAN: masquerading as: %s;  cdr: %p;\n&quot;</span>,</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a954acd75e9468e701f656d60c8f374b0">ast_channel_masqr</a>(chan)), <a class="code" href="../../d5/d7b/channel_8h.html#aba3f5f98138ce51792c44388a8d3ddcc">ast_channel_cdr</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a954acd75e9468e701f656d60c8f374b0">ast_channel_masqr</a>(chan)));</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;===== done ====\n&quot;</span>);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#aebf26a3de75e83d0137e596d85522436">  383</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d92/features_8c.html#aebf26a3de75e83d0137e596d85522436">set_bridge_features_on_config</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *<a class="code" href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *features)</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;{</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *feature;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(features)) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   }</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   <span class="keywordflow">for</span> (feature = features; *feature; feature++) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> *party;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">if</span> (isupper(*feature)) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;         party = &amp;config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">features_caller</a>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;         party = &amp;config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">features_callee</a>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      }</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="keywordflow">switch</span> (tolower(*feature)) {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span> :</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(party, <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1a33e339fbf78c26377f6c7057dda06ccc">AST_FEATURE_REDIRECT</a>);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;k&#39;</span> :</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(party, <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ace68898ce2f86298d8e39e0473a55e28">AST_FEATURE_PARKCALL</a>);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span> :</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(party, <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae4ef6bff70f5837c4ccfcef8d789a9cc">AST_FEATURE_DISCONNECT</a>);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;w&#39;</span> :</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(party, <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae16218a9dfb2123d391f959e3d078362">AST_FEATURE_AUTOMON</a>);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span> :</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(party, <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1a0a015b303a0970eda3ea8328714cbbae">AST_FEATURE_AUTOMIXMON</a>);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      default :</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Skipping unknown feature code &#39;%c&#39;\n&quot;</span>, *feature);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a3b41083253e12b6a71f4188e4e74a170">  423</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d92/features_8c.html#a3b41083253e12b6a71f4188e4e74a170">add_features_datastores</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *caller, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *callee, <span class="keyword">struct</span> <a class="code" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *<a class="code" href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>)</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d92/features_8c.html#aee1c825bbcfa66200e65818827287303">add_features_datastore</a>(caller, &amp;config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">features_caller</a>, &amp;config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">features_callee</a>)) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">       * If we don&#39;t return here, then when we do a builtin_atxfer we</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">       * will copy the disconnect flags over from the atxfer to the</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">       * callee (Party C).</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#aee1c825bbcfa66200e65818827287303">add_features_datastore</a>(callee, &amp;config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">features_callee</a>, &amp;config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">features_caller</a>);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a0ddb78e88a9126c588d8d07abd32f053">  437</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d92/features_8c.html#a0ddb78e88a9126c588d8d07abd32f053">bridge_config_set_limits_warning_values</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *<a class="code" href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, <span class="keyword">struct</span> <a class="code" href="../../d7/da5/structast__bridge__features__limits.html">ast_bridge_features_limits</a> *<a class="code" href="../../df/dfc/structlimits.html">limits</a>)</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;{</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   <span class="keywordflow">if</span> (config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a0b23b4ebfc857809d07d1ced94c9a6eb">end_sound</a>) {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(limits, duration_sound, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a0b23b4ebfc857809d07d1ced94c9a6eb">end_sound</a>);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <span class="keywordflow">if</span> (config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a>) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(limits, warning_sound, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   }</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   <span class="keywordflow">if</span> (config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af134a8361d8611e10872c9c0f806ba64">start_sound</a>) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(limits, connect_sound, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af134a8361d8611e10872c9c0f806ba64">start_sound</a>);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   limits-&gt;<a class="code" href="../../d7/da5/structast__bridge__features__limits.html#a3b008f2b9d73c272d595c38d2663dea1">frequency</a> = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   limits-&gt;<a class="code" href="../../d7/da5/structast__bridge__features__limits.html#a3cd36a1ca22dd411fcce7a3bdd7514ac">warning</a> = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"> * \internal brief Setup limit hook structures on calls that need limits</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment"> * \param config ast_bridge_config which provides the limit data</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment"> * \param caller_limits pointer to an ast_bridge_features_limits struct which will store the caller side limits</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment"> * \param callee_limits pointer to an ast_bridge_features_limits struct which will store the callee side limits</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00462"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a42feee36c86ad2f98158935cc0a3b272">  462</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d92/features_8c.html#a42feee36c86ad2f98158935cc0a3b272">bridge_config_set_limits</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *<a class="code" href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, <span class="keyword">struct</span> <a class="code" href="../../d7/da5/structast__bridge__features__limits.html">ast_bridge_features_limits</a> *caller_limits, <span class="keyword">struct</span> <a class="code" href="../../d7/da5/structast__bridge__features__limits.html">ast_bridge_features_limits</a> *callee_limits)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;{</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">features_caller</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae6373d88ce4e9e5d9b7031272a9bc5ab">AST_FEATURE_PLAY_WARNING</a>)) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <a class="code" href="../../d5/d92/features_8c.html#a0ddb78e88a9126c588d8d07abd32f053">bridge_config_set_limits_warning_values</a>(config, caller_limits);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">features_callee</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae6373d88ce4e9e5d9b7031272a9bc5ab">AST_FEATURE_PLAY_WARNING</a>)) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <a class="code" href="../../d5/d92/features_8c.html#a0ddb78e88a9126c588d8d07abd32f053">bridge_config_set_limits_warning_values</a>(config, callee_limits);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   }</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   caller_limits-&gt;<a class="code" href="../../d7/da5/structast__bridge__features__limits.html#a095ceb846c8c874cd3fcc5cdaf6ade81">duration</a> = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   callee_limits-&gt;<a class="code" href="../../d7/da5/structast__bridge__features__limits.html#a095ceb846c8c874cd3fcc5cdaf6ade81">duration</a> = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment"> * \brief Check if Monitor needs to be started on a channel.</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment"> * \param chan The bridge considers this channel the caller.</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"> * \param peer The bridge considers this channel the callee.</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00486"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#af28231fc268d53c9fd26b0eed2352514">  486</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d92/features_8c.html#af28231fc268d53c9fd26b0eed2352514">bridge_check_monitor</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer)</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;{</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *monitor_args = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *monitor_chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   value = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;AUTO_MONITOR&quot;</span>);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(value)) {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      monitor_args = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(value);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      monitor_chan = chan;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="keywordflow">if</span> (!monitor_chan) {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(peer);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      value = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(peer, <span class="stringliteral">&quot;AUTO_MONITOR&quot;</span>);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(value)) {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;         monitor_args = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(value);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         monitor_chan = peer;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(peer);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <span class="keywordflow">if</span> (monitor_chan) {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/da3/structast__app.html">ast_app</a> *monitor_app;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      monitor_app = <a class="code" href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a>(<span class="stringliteral">&quot;Monitor&quot;</span>);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="keywordflow">if</span> (monitor_app) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a>(monitor_chan, monitor_app, monitor_args);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment"> * \brief Send the peer channel on its way on bridge start failure.</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment"> * \param chan Chan to put into autoservice.</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"> * \param peer Chan to send to after bridge goto or run hangup handlers and hangup.</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00528"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#ac06adfce185b6dcc89bd7410e2ee344a">  528</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d92/features_8c.html#ac06adfce185b6dcc89bd7410e2ee344a">bridge_failed_peer_goto</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer)</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;{</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d85/bridge__after_8h.html#a6231027722f2bdd4093d15defa0d7b94">ast_bridge_setup_after_goto</a>(peer)</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      || <a class="code" href="../../db/de0/pbx_8h.html#a9a937fbb3b5f4e68880a9c5714a29ce5">ast_pbx_start</a>(peer)) {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae6c85ee3595b7e9ee6fc072a3b7da814">ast_autoservice_chan_hangup_peer</a>(chan, peer);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;}</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a19270bbca76aa0850d34134c16424063">  536</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d92/features_8c.html#a19270bbca76aa0850d34134c16424063">pre_bridge_setup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer, <span class="keyword">struct</span> <a class="code" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *<a class="code" href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>,</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *chan_features, <span class="keyword">struct</span> <a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *peer_features)</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;{</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ac7388257651bb6a92d3208512fab0ba6">SCOPE_TRACE</a>(1, <span class="stringliteral">&quot;%s Peer: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(peer));</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#aebf26a3de75e83d0137e596d85522436">set_bridge_features_on_config</a>(config, <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;BRIDGE_FEATURES&quot;</span>));</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#a3b41083253e12b6a71f4188e4e74a170">add_features_datastores</a>(chan, peer, config);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">    * This is an interesting case.  One example is if a ringing</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">    * channel gets redirected to an extension that picks up a</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">    * parked call.  This will make sure that the call taken out of</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">    * parking gets told that the channel it just got bridged to is</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">    * still ringing.</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#adfe39dc3611c6eda03b3dd3fbde10892">ast_channel_visible_indication</a>(peer) != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(peer, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#af28231fc268d53c9fd26b0eed2352514">bridge_check_monitor</a>(chan, peer);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#abe48b606047919032bb8fa51c0140965">set_config_flags</a>(chan, config);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <span class="comment">/* Answer if need be */</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   res = 0;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#a2da3b985de9a2d15f794d499bf94a184">ast_raw_answer_with_stream_topology</a>(chan, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a24c2c607bc3a6bf5f03cac90a9001e89">answer_topology</a>);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">if</span> (res != 0) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="preprocessor">#ifdef FOR_DEBUG</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="comment">/* show the two channels and cdrs involved in the bridge for debug &amp; devel purposes */</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#a2cc97e866c50a8f3751b48684760b8db">ast_channel_log</a>(<span class="stringliteral">&quot;Pre-bridge CHAN Channel info&quot;</span>, chan);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#a2cc97e866c50a8f3751b48684760b8db">ast_channel_log</a>(<span class="stringliteral">&quot;Pre-bridge PEER Channel info&quot;</span>, peer);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   res = 0;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <a class="code" href="../../d3/d93/max__forwards_8h.html#a9ae283e9d2c41ed0d767f6cb07e01040">ast_max_forwards_reset</a>(chan);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   res |= <a class="code" href="../../d4/d1e/bridge__basic_8h.html#abbf75b17211128395690d45b99aad6f4">ast_bridge_features_ds_append</a>(chan, &amp;config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">features_caller</a>);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(peer);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <a class="code" href="../../d3/d93/max__forwards_8h.html#a9ae283e9d2c41ed0d767f6cb07e01040">ast_max_forwards_reset</a>(peer);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   res |= <a class="code" href="../../d4/d1e/bridge__basic_8h.html#abbf75b17211128395690d45b99aad6f4">ast_bridge_features_ds_append</a>(peer, &amp;config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">features_callee</a>);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(peer);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keywordflow">if</span> (config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d7/da5/structast__bridge__features__limits.html">ast_bridge_features_limits</a> call_duration_limits_chan;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d7/da5/structast__bridge__features__limits.html">ast_bridge_features_limits</a> call_duration_limits_peer;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="keywordtype">int</span> abandon_call = 0; <span class="comment">/* TRUE if set limits fails so we can abandon the call. */</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a3d37f3df31f68efc380c63b999db43f0">ast_bridge_features_limits_construct</a>(&amp;call_duration_limits_chan)) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not construct caller duration limits. Bridge canceled.\n&quot;</span>);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a3d37f3df31f68efc380c63b999db43f0">ast_bridge_features_limits_construct</a>(&amp;call_duration_limits_peer)) {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not construct callee duration limits. Bridge canceled.\n&quot;</span>);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;         <a class="code" href="../../dc/d7a/bridge__features_8h.html#ae0b1bf34dd9aa570c5efd4dddfead1fb">ast_bridge_features_limits_destroy</a>(&amp;call_duration_limits_chan);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <a class="code" href="../../d5/d92/features_8c.html#a42feee36c86ad2f98158935cc0a3b272">bridge_config_set_limits</a>(config, &amp;call_duration_limits_chan, &amp;call_duration_limits_peer);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a27662864d9f07a05ef11b683c245d032">ast_bridge_features_set_limits</a>(chan_features, &amp;call_duration_limits_chan, 0)) {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;         abandon_call = 1;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      }</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a27662864d9f07a05ef11b683c245d032">ast_bridge_features_set_limits</a>(peer_features, &amp;call_duration_limits_peer, 0)) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;         abandon_call = 1;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      }</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="comment">/* At this point we are done with the limits structs since they have been copied to the individual feature sets. */</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ae0b1bf34dd9aa570c5efd4dddfead1fb">ast_bridge_features_limits_destroy</a>(&amp;call_duration_limits_chan);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ae0b1bf34dd9aa570c5efd4dddfead1fb">ast_bridge_features_limits_destroy</a>(&amp;call_duration_limits_peer);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">if</span> (abandon_call) {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not set duration limits on one or more sides of the call. Bridge canceled.\n&quot;</span>);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      }</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;}</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a8b286e6d3fdb7ca3a907c5b327e1b4a9">  633</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d92/features_8c.html#a8b286e6d3fdb7ca3a907c5b327e1b4a9">ast_bridge_call_with_flags</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer, <span class="keyword">struct</span> <a class="code" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *<a class="code" href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;{</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> chan_features;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *<a class="code" href="../../da/db3/structast__dial__features.html#a271c024c69e882b0c4bb3d99e9a30075">peer_features</a>;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ac7388257651bb6a92d3208512fab0ba6">SCOPE_TRACE</a>(1, <span class="stringliteral">&quot;%s Peer: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(peer));</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <span class="comment">/* Setup features. */</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   res = <a class="code" href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a>(&amp;chan_features);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   peer_features = <a class="code" href="../../dc/d7a/bridge__features_8h.html#abf9e5d393615c63d27e0bd530301a1ed">ast_bridge_features_new</a>();</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <span class="keywordflow">if</span> (res || !peer_features) {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(peer_features);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <a class="code" href="../../d5/d92/features_8c.html#ac06adfce185b6dcc89bd7410e2ee344a">bridge_failed_peer_goto</a>(chan, peer);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d92/features_8c.html#a19270bbca76aa0850d34134c16424063">pre_bridge_setup</a>(chan, peer, config, &amp;chan_features, peer_features)) {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(peer_features);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <a class="code" href="../../d5/d92/features_8c.html#ac06adfce185b6dcc89bd7410e2ee344a">bridge_failed_peer_goto</a>(chan, peer);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   <span class="comment">/* Create bridge */</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   bridge = <a class="code" href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a>();</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(peer_features);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <a class="code" href="../../d5/d92/features_8c.html#ac06adfce185b6dcc89bd7410e2ee344a">bridge_failed_peer_goto</a>(chan, peer);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   <a class="code" href="../../d4/d1e/bridge__basic_8h.html#a3532f26d87ff1bdddd1b7d945b6c5802">ast_bridge_basic_set_flags</a>(bridge, flags);</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <span class="comment">/* Put peer into the bridge */</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a>(bridge, peer, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, peer_features,</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a> | <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a9d897e78dc2fcd2447531e2ee0310933">AST_BRIDGE_IMPART_INHIBIT_JOIN_COLP</a>)) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(bridge, 0);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <a class="code" href="../../d5/d92/features_8c.html#ac06adfce185b6dcc89bd7410e2ee344a">bridge_failed_peer_goto</a>(chan, peer);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   }</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <span class="comment">/* Join bridge */</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a116a27b8e1e111729ee1828d4fab6b5a">ast_bridge_join</a>(bridge, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;chan_features, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#ad52005264bec898a8f825bd47d91cf93a9106169928c6eeccad5b5ebcf762ac9d">AST_BRIDGE_JOIN_PASS_REFERENCE</a> | <a class="code" href="../../d4/d56/bridge_8h.html#ad52005264bec898a8f825bd47d91cf93a3ebef74566687cfbc25d174725fc6d56">AST_BRIDGE_JOIN_INHIBIT_JOIN_COLP</a>);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">    * If the bridge was broken for a hangup that isn&#39;t real, then</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">    * don&#39;t run the h extension, because the channel isn&#39;t really</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">    * hung up.  This should really only happen with</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">    * AST_SOFTHANGUP_ASYNCGOTO.</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   res = -1;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a>(chan) &amp; <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a085c0c603de12dc2474a17a92e1cb5a4">AST_SOFTHANGUP_ASYNCGOTO</a>) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      res = 0;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <span class="keywordflow">if</span> (res &amp;&amp; config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a5fd13b216c2752f4f1fb843cae429558">end_bridge_callback</a>) {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a5fd13b216c2752f4f1fb843cae429558">end_bridge_callback</a>(config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a30cb875f49910a9515ee92d8dfdf8b83">end_bridge_callback_data</a>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;}</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment"> * \brief bridge the call and set CDR</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment"> * \param chan The bridge considers this channel the caller.</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment"> * \param peer The bridge considers this channel the callee.</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment"> * \param config Configuration for this bridge.</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment"> * Set start time, check for two channels,check if monitor on</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment"> * check for feature activation, create new CDR</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment"> * \retval res on success.</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment"> * \retval -1 on failure to bridge.</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00716"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a3fe7c7e43b8f3140716d836816bf827f">  716</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d92/features_8c.html#a3fe7c7e43b8f3140716d836816bf827f">ast_bridge_call</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer, <span class="keyword">struct</span> <a class="code" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *<a class="code" href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>)</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;{</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d92/features_8c.html#a8b286e6d3fdb7ca3a907c5b327e1b4a9">ast_bridge_call_with_flags</a>(chan, peer, config, 0);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2">  721</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2">play_tone_action</a> {</div><div class="line"><a name="l00722"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a7a847698b91ee8df79764edf2b1f1630">  722</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a7a847698b91ee8df79764edf2b1f1630">PLAYTONE_NONE</a> = 0,</div><div class="line"><a name="l00723"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a0742f5ef5a28f72b83328283be335f0f">  723</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a0742f5ef5a28f72b83328283be335f0f">PLAYTONE_CHANNEL1</a> = (1 &lt;&lt; 0),</div><div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a0c4492b730345653d652fcc7933d3410">  724</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a0c4492b730345653d652fcc7933d3410">PLAYTONE_CHANNEL2</a> = (1 &lt;&lt; 1),</div><div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2acce6aaaea7c3cb013cc91b091364bc7a">  725</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2acce6aaaea7c3cb013cc91b091364bc7a">PLAYTONE_BOTH</a> = <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a0742f5ef5a28f72b83328283be335f0f">PLAYTONE_CHANNEL1</a> | <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a0c4492b730345653d652fcc7933d3410">PLAYTONE_CHANNEL2</a>,</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;};</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#aca73779eed0a4f6644c0391f1e1b1d59">  728</a></span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2">play_tone_action</a> <a class="code" href="../../d5/d92/features_8c.html#aca73779eed0a4f6644c0391f1e1b1d59">parse_playtone</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *playtone_val)</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;{</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(playtone_val) || <a class="code" href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a>(playtone_val)) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a7a847698b91ee8df79764edf2b1f1630">PLAYTONE_NONE</a>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   } <span class="keywordflow">if</span> (!strcasecmp(playtone_val, <span class="stringliteral">&quot;channel1&quot;</span>)) {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a0742f5ef5a28f72b83328283be335f0f">PLAYTONE_CHANNEL1</a>;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(playtone_val, <span class="stringliteral">&quot;channel2&quot;</span>) || <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(playtone_val)) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a0c4492b730345653d652fcc7933d3410">PLAYTONE_CHANNEL2</a>;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(playtone_val, <span class="stringliteral">&quot;both&quot;</span>)) {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2acce6aaaea7c3cb013cc91b091364bc7a">PLAYTONE_BOTH</a>;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="comment">/* Invalid input. Assume none */</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a7a847698b91ee8df79764edf2b1f1630">PLAYTONE_NONE</a>;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;}</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment"> * \brief Bridge channels together</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment"> * \param s</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment"> * \param m</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment"> * Make sure valid channels were specified,</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment"> * send errors if any of the channels could not be found/locked, answer channels if needed,</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment"> * create the placeholder channels and grab the other channels</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment"> * make the channels compatible, send error if we fail doing so</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"> * setup the bridge thread object and start the bridge.</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment"> * \retval 0</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00757"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a51755e20bdcffb65c53468b7c4eead32">  757</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d92/features_8c.html#a51755e20bdcffb65c53468b7c4eead32">action_bridge</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;{</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *channela = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel1&quot;</span>);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *channelb = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel2&quot;</span>);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2">play_tone_action</a> <a class="code" href="../../d8/d8f/app__morsecode_8c.html#a9380cc3415113a4b2ecc49516e2e6f32">playtone</a> = <a class="code" href="../../d5/d92/features_8c.html#aca73779eed0a4f6644c0391f1e1b1d59">parse_playtone</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Tone&quot;</span>));</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chana, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chanb, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *chana_exten;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *chana_context;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   <span class="keywordtype">int</span> chana_priority;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *chanb_exten;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *chanb_context;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   <span class="keywordtype">int</span> chanb_priority;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[256];</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/db6/structast__features__xfer__config.html">ast_features_xfer_config</a> *, xfer_cfg_a, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/db6/structast__features__xfer__config.html">ast_features_xfer_config</a> *, xfer_cfg_b, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   <span class="comment">/* make sure valid channels were specified */</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(channela) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(channelb)) {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Missing channel parameter in request&quot;</span>);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   }</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Performing Bridge action on %s and %s\n&quot;</span>, channela, channelb);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <span class="comment">/* Start with chana */</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   chana = <a class="code" href="../../d5/d7b/channel_8h.html#a71d89dbc5107b1f851dcbf1686a0d9d9">ast_channel_get_by_name_prefix</a>(channela, strlen(channela));</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <span class="keywordflow">if</span> (!chana) {</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Channel1 does not exist: %s&quot;</span>, channela);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, buf);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   }</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chana);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   xfer_cfg_a = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#ab442de0580c9cee7ae5e10886e28ed8c">ast_get_chan_features_xfer_config</a>(chana);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   chana_exten = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(chana));</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   chana_context = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chana));</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   chana_priority = <a class="code" href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a>(chana);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chana), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a5ff4f7a94a36fcc2b8628186cb643d4b">AST_FLAG_IN_AUTOLOOP</a>)) {</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      chana_priority++;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   }</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chana);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   chanb = <a class="code" href="../../d5/d7b/channel_8h.html#a71d89dbc5107b1f851dcbf1686a0d9d9">ast_channel_get_by_name_prefix</a>(channelb, strlen(channelb));</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <span class="keywordflow">if</span> (!chanb) {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Channel2 does not exist: %s&quot;</span>, channelb);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, buf);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   }</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chanb);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   xfer_cfg_b = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#ab442de0580c9cee7ae5e10886e28ed8c">ast_get_chan_features_xfer_config</a>(chanb);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   chanb_exten = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(chanb));</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;   chanb_context = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chanb));</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   chanb_priority = <a class="code" href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a>(chanb);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chanb), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a5ff4f7a94a36fcc2b8628186cb643d4b">AST_FLAG_IN_AUTOLOOP</a>)) {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      chanb_priority++;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chanb);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   bridge = <a class="code" href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a>();</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Unable to create bridge\n&quot;</span>);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   <a class="code" href="../../d8/d85/bridge__after_8h.html#adbda216253e9248d9e9734f6c8a60dbc">ast_bridge_set_after_goto</a>(chana, chana_context, chana_exten, chana_priority);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d47/features_8h.html#aabeca6aae7e5db0dfe25ab88c1a40b07">ast_bridge_add_channel</a>(bridge, chana, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, playtone &amp; <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a0742f5ef5a28f72b83328283be335f0f">PLAYTONE_CHANNEL1</a>, xfer_cfg_a ? xfer_cfg_a-&gt;xfersound : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Unable to add Channel1 to bridge: %s&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chana));</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, buf);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(bridge, 0);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   }</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <a class="code" href="../../d8/d85/bridge__after_8h.html#adbda216253e9248d9e9734f6c8a60dbc">ast_bridge_set_after_goto</a>(chanb, chanb_context, chanb_exten, chanb_priority);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d47/features_8h.html#aabeca6aae7e5db0dfe25ab88c1a40b07">ast_bridge_add_channel</a>(bridge, chanb, NULL, playtone &amp; <a class="code" href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a0c4492b730345653d652fcc7933d3410">PLAYTONE_CHANNEL2</a>, xfer_cfg_b ? xfer_cfg_b-&gt;xfersound : NULL)) {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Unable to add Channel2 to bridge: %s&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chanb));</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, buf);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(bridge, 0);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Channels have been bridged&quot;</span>);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(bridge);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;}</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a30cf144e208ddc17e51b2f1e600052e8">  844</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d92/features_8c.html#a30cf144e208ddc17e51b2f1e600052e8">app_bridge</a> = <span class="stringliteral">&quot;Bridge&quot;</span>;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l00847"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eac6c5fc9f2156b5d690587dc1fdcbc6b3">  847</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eac6c5fc9f2156b5d690587dc1fdcbc6b3">BRIDGE_OPT_PLAYTONE</a> = (1 &lt;&lt; 0),</div><div class="line"><a name="l00848"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eab0eb8a377bf253cf368bf70f0b59fc31">  848</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eab0eb8a377bf253cf368bf70f0b59fc31">OPT_CALLEE_HANGUP</a> =  (1 &lt;&lt; 1),</div><div class="line"><a name="l00849"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea9f03cca4e2ee93778ae8ed2db279587d">  849</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea9f03cca4e2ee93778ae8ed2db279587d">OPT_CALLER_HANGUP</a> =  (1 &lt;&lt; 2),</div><div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea3de43f39b62e2f782e8eac89a7dcc164">  850</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea3de43f39b62e2f782e8eac89a7dcc164">OPT_DURATION_LIMIT</a> = (1 &lt;&lt; 3),</div><div class="line"><a name="l00851"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea532332f4745455d1129c3cf0d25cb5d3">  851</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea532332f4745455d1129c3cf0d25cb5d3">OPT_DURATION_STOP</a> =  (1 &lt;&lt; 4),</div><div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea6faa363811a3b467116d290d52d967da">  852</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea6faa363811a3b467116d290d52d967da">OPT_CALLEE_TRANSFER</a> = (1 &lt;&lt; 5),</div><div class="line"><a name="l00853"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eadb3ae0c7823e3bd3f4a45db3d03f33cb">  853</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eadb3ae0c7823e3bd3f4a45db3d03f33cb">OPT_CALLER_TRANSFER</a> = (1 &lt;&lt; 6),</div><div class="line"><a name="l00854"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea98ad2a6cc60abe9a8cfd5f040fa9b4a4">  854</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea98ad2a6cc60abe9a8cfd5f040fa9b4a4">OPT_CALLEE_MONITOR</a> = (1 &lt;&lt; 7),</div><div class="line"><a name="l00855"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea8b131c263901244154b7b85ec05e6521">  855</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea8b131c263901244154b7b85ec05e6521">OPT_CALLER_MONITOR</a> = (1 &lt;&lt; 8),</div><div class="line"><a name="l00856"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea35080c34427591a22d34370e0a8ebab4">  856</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea35080c34427591a22d34370e0a8ebab4">OPT_CALLEE_PARK</a> = (1 &lt;&lt; 9),</div><div class="line"><a name="l00857"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea82c1e40f3b210bce47d00d44dec0b8fd">  857</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea82c1e40f3b210bce47d00d44dec0b8fd">OPT_CALLER_PARK</a> = (1 &lt;&lt; 10),</div><div class="line"><a name="l00858"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eacc3e8440cd8f27440c7f0c27f67b3e3d">  858</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eacc3e8440cd8f27440c7f0c27f67b3e3d">OPT_CALLEE_KILL</a> = (1 &lt;&lt; 11),</div><div class="line"><a name="l00859"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea78690a8e97e0eac7d0982b81d5cadac8">  859</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea78690a8e97e0eac7d0982b81d5cadac8">OPT_CALLEE_GO_ON</a> = (1 &lt;&lt; 12),</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;};</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l00863"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876ab92f4dda872862b445c7ee78b5eca872">  863</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876ab92f4dda872862b445c7ee78b5eca872">OPT_ARG_DURATION_LIMIT</a> = 0,</div><div class="line"><a name="l00864"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876a22d5403ad37aee04f7beb26b97518b33">  864</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876a22d5403ad37aee04f7beb26b97518b33">OPT_ARG_DURATION_STOP</a>,</div><div class="line"><a name="l00865"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876a1d0a4362e89e71be70b2ca0d47616c99">  865</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876a1d0a4362e89e71be70b2ca0d47616c99">OPT_ARG_CALLEE_GO_ON</a>,</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   <span class="comment">/* note: this entry _MUST_ be the last one in the enum */</span></div><div class="line"><a name="l00867"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876aec7326f60e7edad15d96ff935e5616d6">  867</a></span>&#160;   <a class="code" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876aec7326f60e7edad15d96ff935e5616d6">OPT_ARG_ARRAY_SIZE</a>,</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;};</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a520a3c6b7d57903d9a616051da1a019d">AST_APP_OPTIONS</a>(<a class="code" href="../../d5/d92/features_8c.html#a1f1561f68468b6f13235b3bedce80962">bridge_exec_options</a>, <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ab451a4653176c211d131b899e1f91bde">BEGIN_OPTIONS</a></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;p&#39;</span>, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eac6c5fc9f2156b5d690587dc1fdcbc6b3">BRIDGE_OPT_PLAYTONE</a>),</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a7549377df87038be737e8cae73acaa9d">AST_APP_OPTION_ARG</a>(<span class="charliteral">&#39;F&#39;</span>, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea78690a8e97e0eac7d0982b81d5cadac8">OPT_CALLEE_GO_ON</a>, <a class="code" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876a1d0a4362e89e71be70b2ca0d47616c99">OPT_ARG_CALLEE_GO_ON</a>),</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;h&#39;</span>, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eab0eb8a377bf253cf368bf70f0b59fc31">OPT_CALLEE_HANGUP</a>),</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;H&#39;</span>, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea9f03cca4e2ee93778ae8ed2db279587d">OPT_CALLER_HANGUP</a>),</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;k&#39;</span>, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea35080c34427591a22d34370e0a8ebab4">OPT_CALLEE_PARK</a>),</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;K&#39;</span>, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea82c1e40f3b210bce47d00d44dec0b8fd">OPT_CALLER_PARK</a>),</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a7549377df87038be737e8cae73acaa9d">AST_APP_OPTION_ARG</a>(<span class="charliteral">&#39;L&#39;</span>, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea3de43f39b62e2f782e8eac89a7dcc164">OPT_DURATION_LIMIT</a>, <a class="code" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876ab92f4dda872862b445c7ee78b5eca872">OPT_ARG_DURATION_LIMIT</a>),</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a7549377df87038be737e8cae73acaa9d">AST_APP_OPTION_ARG</a>(<span class="charliteral">&#39;S&#39;</span>, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea532332f4745455d1129c3cf0d25cb5d3">OPT_DURATION_STOP</a>, <a class="code" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876a22d5403ad37aee04f7beb26b97518b33">OPT_ARG_DURATION_STOP</a>),</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;t&#39;</span>, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea6faa363811a3b467116d290d52d967da">OPT_CALLEE_TRANSFER</a>),</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;T&#39;</span>, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eadb3ae0c7823e3bd3f4a45db3d03f33cb">OPT_CALLER_TRANSFER</a>),</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;w&#39;</span>, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea98ad2a6cc60abe9a8cfd5f040fa9b4a4">OPT_CALLEE_MONITOR</a>),</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;W&#39;</span>, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea8b131c263901244154b7b85ec05e6521">OPT_CALLER_MONITOR</a>),</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;x&#39;</span>, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eacc3e8440cd8f27440c7f0c27f67b3e3d">OPT_CALLEE_KILL</a>),</div><div class="line"><a name="l00884"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a1f1561f68468b6f13235b3bedce80962">  884</a></span>&#160;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a2a1890787b3e55318c417c0a3e1432c7">END_OPTIONS</a> );</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#aa66e4da38daa333f3a871726d46eed96">  886</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d92/features_8c.html#aa66e4da38daa333f3a871726d46eed96">ast_bridge_timelimit</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *<a class="code" href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>,</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>, <span class="keyword">struct</span> timeval *calldurationlimit)</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;{</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   <span class="keywordtype">char</span> *stringp = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(parse);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   <span class="keywordtype">char</span> *limit_str, *warning_str, *warnfreq_str;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   <span class="keywordtype">int</span> play_to_caller = 0, play_to_callee = 0;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   <span class="keywordtype">int</span> delta;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   limit_str = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   warning_str = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   warnfreq_str = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;   config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> = atol(limit_str);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   <span class="keywordflow">if</span> (warning_str)</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> = atol(warning_str);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <span class="keywordflow">if</span> (warnfreq_str)</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a> = atol(warnfreq_str);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <span class="keywordflow">if</span> (!config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>) {</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Bridge does not accept L(%s)\n&quot;</span>, limit_str);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a> = 0;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <span class="keywordflow">return</span> -1; <span class="comment">/* error */</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (delta = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> - config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>) &gt; 0) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <span class="keywordtype">int</span> w = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a>;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">       * If the first warning is requested _after_ the entire call</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">       * would end, and no warning frequency is requested, then turn</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">       * off the warning. If a warning frequency is requested, reduce</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">       * the &#39;first warning&#39; time by that frequency until it falls</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">       * within the call&#39;s total time limit.</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">       * Graphically:</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">       *                timelim-&gt;|    delta        |&lt;-playwarning</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">       *      0__________________|_________________|</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">       *                       | w  |    |    |    |</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">       * so the number of intervals to cut is 1+(delta-1)/w</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="keywordflow">if</span> (w == 0) {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;         config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> = 0;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;         config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> -= w * ( 1 + (delta-1)/w );</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;         <span class="keywordflow">if</span> (config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> &lt; 1)</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a> = 0;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      }</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   }</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;LIMIT_PLAYAUDIO_CALLER&quot;</span>);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   play_to_caller = var ? <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(var) : 1;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;LIMIT_PLAYAUDIO_CALLEE&quot;</span>);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   play_to_callee = var ? <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(var) : 0;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;   <span class="keywordflow">if</span> (!play_to_caller &amp;&amp; !play_to_callee)</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      play_to_caller = 1;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;LIMIT_WARNING_FILE&quot;</span>);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a> = !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var) ? <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(var) : <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;timeleft&quot;</span>);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   <span class="comment">/* The code looking at config wants a NULL, not just &quot;&quot;, to decide</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">    * that the message should not be played, so we replace &quot;&quot; with NULL.</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">    * Note, pbx_builtin_getvar_helper _can_ return NULL if the variable is</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment">    * not found.</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;LIMIT_TIMEOUT_FILE&quot;</span>);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a0b23b4ebfc857809d07d1ced94c9a6eb">end_sound</a> = !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var) ? <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(var) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;LIMIT_CONNECT_FILE&quot;</span>);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af134a8361d8611e10872c9c0f806ba64">start_sound</a> = !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var) ? <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(var) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   <span class="comment">/* undo effect of S(x) in case they are both used */</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;   calldurationlimit-&gt;tv_sec = 0;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   calldurationlimit-&gt;tv_usec = 0;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   <span class="comment">/* more efficient to do it like S(x) does since no advanced opts */</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   <span class="keywordflow">if</span> (!config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> &amp;&amp; !config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af134a8361d8611e10872c9c0f806ba64">start_sound</a> &amp;&amp; !config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a0b23b4ebfc857809d07d1ced94c9a6eb">end_sound</a> &amp;&amp; config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>) {</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      calldurationlimit-&gt;tv_sec = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> / 1000;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      calldurationlimit-&gt;tv_usec = (config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> % 1000) * 1000;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Setting call duration limit to %.3lf seconds.\n&quot;</span>,</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;         calldurationlimit-&gt;tv_sec + calldurationlimit-&gt;tv_usec / 1000000.0);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      play_to_caller = 0;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      play_to_callee = 0;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> = 0;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> = 0;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a> = 0;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Limit Data for this call:\n&quot;</span>);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;timelimit      = %ld ms (%.3lf s)\n&quot;</span>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> / 1000.0);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;play_warning   = %ld ms (%.3lf s)\n&quot;</span>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> / 1000.0);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;play_to_caller = %s\n&quot;</span>, play_to_caller ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;play_to_callee = %s\n&quot;</span>, play_to_callee ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;warning_freq   = %ld ms (%.3lf s)\n&quot;</span>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a> / 1000.0);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;start_sound    = %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af134a8361d8611e10872c9c0f806ba64">start_sound</a>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;warning_sound  = %s\n&quot;</span>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a>);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;end_sound      = %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a0b23b4ebfc857809d07d1ced94c9a6eb">end_sound</a>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   <span class="keywordflow">if</span> (play_to_caller)</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;(config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">features_caller</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae6373d88ce4e9e5d9b7031272a9bc5ab">AST_FEATURE_PLAY_WARNING</a>);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   <span class="keywordflow">if</span> (play_to_callee)</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;(config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">features_callee</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae6373d88ce4e9e5d9b7031272a9bc5ab">AST_FEATURE_PLAY_WARNING</a>);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;}</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment"> * \brief Bridge channels</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment"> * \param chan</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment"> * \param data channel to bridge with.</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment"> * Split data, check we aren&#39;t bridging with ourself, check valid channel,</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment"> * answer call if not already, check compatible channels, setup bridge config</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment"> * now bridge call, if transferred party hangs up return to PBX extension.</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01007"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a5be9e06ba28b33987cb079049c00adf7"> 1007</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d92/features_8c.html#a5be9e06ba28b33987cb079049c00adf7">bridge_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *data)</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;{</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *current_dest_chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <span class="keywordtype">char</span> *tmp_data  = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> opts = { 0, };</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> bconfig = { { 0, }, };</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   <span class="keywordtype">char</span> *opt_args[<a class="code" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876aec7326f60e7edad15d96ff935e5616d6">OPT_ARG_ARRAY_SIZE</a>];</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   <span class="keyword">struct </span>timeval calldurationlimit = { 0, };</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d5a/structextension.html">extension</a>;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   <span class="keywordtype">int</span> bridge_add_failed;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> chan_features;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *<a class="code" href="../../da/db3/structast__dial__features.html#a271c024c69e882b0c4bb3d99e9a30075">peer_features</a>;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/db6/structast__features__xfer__config.html">ast_features_xfer_config</a> *xfer_cfg;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(dest_chan);</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   );</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;   tmp_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data ?: <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, tmp_data);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.options)) {</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a>(<a class="code" href="../../d5/d92/features_8c.html#a1f1561f68468b6f13235b3bedce80962">bridge_exec_options</a>, &amp;opts, opt_args, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.options);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <span class="comment">/* make sure we have a valid end point */</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.dest_chan)) {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      current_dest_chan = <a class="code" href="../../d5/d7b/channel_8h.html#a71d89dbc5107b1f851dcbf1686a0d9d9">ast_channel_get_by_name_prefix</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.dest_chan,</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;         strlen(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.dest_chan));</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;   }</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;   <span class="keywordflow">if</span> (!current_dest_chan) {</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Bridge failed because channel &#39;%s&#39; does not exist\n&quot;</span>,</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;         <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.dest_chan ?: <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;BRIDGERESULT&quot;</span>, <span class="stringliteral">&quot;NONEXISTENT&quot;</span>);</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   }</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   <span class="comment">/* avoid bridge with ourselves */</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;   <span class="keywordflow">if</span> (chan == current_dest_chan) {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(current_dest_chan);</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to bridge channel %s with itself\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;BRIDGERESULT&quot;</span>, <span class="stringliteral">&quot;LOOP&quot;</span>);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;   }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea3de43f39b62e2f782e8eac89a7dcc164">OPT_DURATION_LIMIT</a>)</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(opt_args[<a class="code" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876ab92f4dda872862b445c7ee78b5eca872">OPT_ARG_DURATION_LIMIT</a>])</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      &amp;&amp; <a class="code" href="../../d5/d92/features_8c.html#aa66e4da38daa333f3a871726d46eed96">ast_bridge_timelimit</a>(chan, &amp;bconfig, opt_args[OPT_ARG_DURATION_LIMIT], &amp;calldurationlimit)) {</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea6faa363811a3b467116d290d52d967da">OPT_CALLEE_TRANSFER</a>))</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;(bconfig.<a class="code" href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">features_callee</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1a33e339fbf78c26377f6c7057dda06ccc">AST_FEATURE_REDIRECT</a>);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eadb3ae0c7823e3bd3f4a45db3d03f33cb">OPT_CALLER_TRANSFER</a>))</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;(bconfig.<a class="code" href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">features_caller</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1a33e339fbf78c26377f6c7057dda06ccc">AST_FEATURE_REDIRECT</a>);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eab0eb8a377bf253cf368bf70f0b59fc31">OPT_CALLEE_HANGUP</a>))</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;(bconfig.<a class="code" href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">features_callee</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae4ef6bff70f5837c4ccfcef8d789a9cc">AST_FEATURE_DISCONNECT</a>);</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea9f03cca4e2ee93778ae8ed2db279587d">OPT_CALLER_HANGUP</a>))</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;(bconfig.<a class="code" href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">features_caller</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae4ef6bff70f5837c4ccfcef8d789a9cc">AST_FEATURE_DISCONNECT</a>);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea98ad2a6cc60abe9a8cfd5f040fa9b4a4">OPT_CALLEE_MONITOR</a>))</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;(bconfig.<a class="code" href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">features_callee</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae16218a9dfb2123d391f959e3d078362">AST_FEATURE_AUTOMON</a>);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea8b131c263901244154b7b85ec05e6521">OPT_CALLER_MONITOR</a>))</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;(bconfig.<a class="code" href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">features_caller</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae16218a9dfb2123d391f959e3d078362">AST_FEATURE_AUTOMON</a>);</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea35080c34427591a22d34370e0a8ebab4">OPT_CALLEE_PARK</a>))</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;(bconfig.<a class="code" href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">features_callee</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ace68898ce2f86298d8e39e0473a55e28">AST_FEATURE_PARKCALL</a>);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea82c1e40f3b210bce47d00d44dec0b8fd">OPT_CALLER_PARK</a>))</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;(bconfig.<a class="code" href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">features_caller</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ace68898ce2f86298d8e39e0473a55e28">AST_FEATURE_PARKCALL</a>);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <span class="comment">/* Setup after bridge goto location. */</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea78690a8e97e0eac7d0982b81d5cadac8">OPT_CALLEE_GO_ON</a>)) {</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      context = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan));</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      extension = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(chan));</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      priority = <a class="code" href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a>(chan);</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      <a class="code" href="../../d8/d85/bridge__after_8h.html#abffcfc07534d569ab73f8fdb19a94677">ast_bridge_set_after_go_on</a>(current_dest_chan, context, extension, priority,</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;         opt_args[<a class="code" href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876a1d0a4362e89e71be70b2ca0d47616c99">OPT_ARG_CALLEE_GO_ON</a>]);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eacc3e8440cd8f27440c7f0c27f67b3e3d">OPT_CALLEE_KILL</a>)) {</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(current_dest_chan);</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      context = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(current_dest_chan));</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      extension = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(current_dest_chan));</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      priority = <a class="code" href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a>(current_dest_chan);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(current_dest_chan);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <a class="code" href="../../d8/d85/bridge__after_8h.html#abffcfc07534d569ab73f8fdb19a94677">ast_bridge_set_after_go_on</a>(current_dest_chan, context, extension, priority, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   }</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a>(&amp;chan_features)) {</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;   }</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   peer_features = <a class="code" href="../../dc/d7a/bridge__features_8h.html#abf9e5d393615c63d27e0bd530301a1ed">ast_bridge_features_new</a>();</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;   <span class="keywordflow">if</span> (!peer_features) {</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   }</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d92/features_8c.html#a19270bbca76aa0850d34134c16424063">pre_bridge_setup</a>(chan, current_dest_chan, &amp;bconfig, &amp;chan_features, peer_features)) {</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(peer_features);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;   }</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   bridge = <a class="code" href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a>();</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(peer_features);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   }</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(current_dest_chan);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   xfer_cfg = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#ab442de0580c9cee7ae5e10886e28ed8c">ast_get_chan_features_xfer_config</a>(current_dest_chan);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(current_dest_chan);</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   bridge_add_failed = <a class="code" href="../../de/d47/features_8h.html#aabeca6aae7e5db0dfe25ab88c1a40b07">ast_bridge_add_channel</a>(bridge, current_dest_chan, peer_features,</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eac6c5fc9f2156b5d690587dc1fdcbc6b3">BRIDGE_OPT_PLAYTONE</a>),</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      xfer_cfg ? xfer_cfg-&gt;<a class="code" href="../../df/db6/structast__features__xfer__config.html#aa79f71a801e58cd6889780e185e9a5d3">xfersound</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(xfer_cfg);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   <span class="keywordflow">if</span> (bridge_add_failed) {</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(bridge, 0);</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   }</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <span class="comment">/* Don&#39;t keep the channel ref in case it was not already in a bridge. */</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;   current_dest_chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(current_dest_chan);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;   res = <a class="code" href="../../d4/d56/bridge_8h.html#a116a27b8e1e111729ee1828d4fab6b5a">ast_bridge_join</a>(bridge, chan, NULL, &amp;chan_features, NULL,</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#ad52005264bec898a8f825bd47d91cf93a9106169928c6eeccad5b5ebcf762ac9d">AST_BRIDGE_JOIN_PASS_REFERENCE</a>);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>:</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;   <span class="keywordflow">if</span> (res == -1) {</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;BRIDGERESULT&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;BRIDGERESULT&quot;</span>, <span class="stringliteral">&quot;SUCCESS&quot;</span>);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   }</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>((<span class="keywordtype">char</span> *) bconfig.<a class="code" href="../../d0/d13/structast__bridge__config.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a>);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>((<span class="keywordtype">char</span> *) bconfig.<a class="code" href="../../d0/d13/structast__bridge__config.html#a0b23b4ebfc857809d07d1ced94c9a6eb">end_sound</a>);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>((<span class="keywordtype">char</span> *) bconfig.<a class="code" href="../../d0/d13/structast__bridge__config.html#af134a8361d8611e10872c9c0f806ba64">start_sound</a>);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>(current_dest_chan);</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;}</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#ad09fa931f468002152a3cc2d5ce25eae"> 1157</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d92/features_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;{</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   <a class="code" href="../../de/d71/features__config_8c.html#aac16eff0ce00c1c8f228fc649dff15d0">unload_features_config</a>();</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;Bridge&quot;</span>);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(app_bridge);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;}</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9"> 1168</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d92/features_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;{</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;   res = <a class="code" href="../../de/d71/features__config_8c.html#ab2e74df8691039751d0423f2c217207b">load_features_config</a>();</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#a5fd926a7510f3d3fd0d69ae710ec1e89">ast_register_application2</a>(app_bridge, <a class="code" href="../../d5/d92/features_8c.html#a5be9e06ba28b33987cb079049c00adf7">bridge_exec</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a1d34461b8a3210b19e66f06bcdebfeb3">ast_manager_register_xml_core</a>(<span class="stringliteral">&quot;Bridge&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../d5/d92/features_8c.html#a51755e20bdcffb65c53468b7c4eead32">action_bridge</a>);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   <span class="keywordflow">return</span> res ? <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a> : <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;}</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<a class="code" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO</a>(<a class="code" href="../../d5/d16/module_8h.html#aba2c8d4be709a254658b21a834f8294a">ASTERISK_GPL_KEY</a>, <a class="code" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="code" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a>, <span class="stringliteral">&quot;Call Features&quot;</span>,</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;   .support_level = <a class="code" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>,</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;   .load = <a class="code" href="../../d5/d92/features_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>,</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   .unload = <a class="code" href="../../d5/d92/features_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>,</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   .<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> = <a class="code" href="../../de/d71/features__config_8c.html#aebe1b4388fc1e2c72997d5fd171742bb">reload_features_config</a>,</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   .load_pri = <a class="code" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a37c0718af4fc7bf8c860beb730161044">AST_MODPRI_CORE</a>,</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;   .requires = <span class="stringliteral">&quot;extconfig&quot;</span>,</div><div class="line"><a name="l01186"></a><span class="lineno"><a class="line" href="../../d5/d92/features_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae"> 1186</a></span>&#160;);</div><div class="ttc" id="features_8c_html_a0ddb78e88a9126c588d8d07abd32f053"><div class="ttname"><a href="../../d5/d92/features_8c.html#a0ddb78e88a9126c588d8d07abd32f053">bridge_config_set_limits_warning_values</a></div><div class="ttdeci">static void bridge_config_set_limits_warning_values(struct ast_bridge_config *config, struct ast_bridge_features_limits *limits)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00437">features.c:437</a></div></div>
<div class="ttc" id="structast__datastore__info_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_datastore_info::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00032">datastore.h:32</a></div></div>
<div class="ttc" id="structast__dial__features_html_a271c024c69e882b0c4bb3d99e9a30075"><div class="ttname"><a href="../../da/db3/structast__dial__features.html#a271c024c69e882b0c4bb3d99e9a30075">ast_dial_features::peer_features</a></div><div class="ttdeci">struct ast_flags peer_features</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00259">features.c:259</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="features_8c_html_adef8fadeae29c7bd0b0f5133352f636d"><div class="ttname"><a href="../../d5/d92/features_8c.html#adef8fadeae29c7bd0b0f5133352f636d">dial_features_duplicate</a></div><div class="ttdeci">static void * dial_features_duplicate(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00262">features.c:262</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="features_8c_html_ad64a6ef22c99026de9de8fec189df84f"><div class="ttname"><a href="../../d5/d92/features_8c.html#ad64a6ef22c99026de9de8fec189df84f">dial_features_info</a></div><div class="ttdeci">static const struct ast_datastore_info dial_features_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00275">features.c:275</a></div></div>
<div class="ttc" id="bridge__features_8h_html_aafc3026d777c0bf6899e93263178e102"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a></div><div class="ttdeci">void ast_bridge_features_cleanup(struct ast_bridge_features *features)</div><div class="ttdoc">Clean up the contents of a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03720">bridge.c:3720</a></div></div>
<div class="ttc" id="musiconhold_8h_html"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html">musiconhold.h</a></div><div class="ttdoc">Music on hold handling. </div></div>
<div class="ttc" id="features_8c_html_ad734cf14eba6d25d25ffe0cbf9d5cac8abf76b8944a1ac35aafbe2f3552bef372"><div class="ttname"><a href="../../d5/d92/features_8c.html#ad734cf14eba6d25d25ffe0cbf9d5cac8abf76b8944a1ac35aafbe2f3552bef372">FEATURE_INTERPRET_DETECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00250">features.c:250</a></div></div>
<div class="ttc" id="features_8c_html_a83f72dd946185574b53be115821f6876ab92f4dda872862b445c7ee78b5eca872"><div class="ttname"><a href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876ab92f4dda872862b445c7ee78b5eca872">OPT_ARG_DURATION_LIMIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00863">features.c:863</a></div></div>
<div class="ttc" id="features_8c_html_ad734cf14eba6d25d25ffe0cbf9d5cac8"><div class="ttname"><a href="../../d5/d92/features_8c.html#ad734cf14eba6d25d25ffe0cbf9d5cac8">feature_interpret_op</a></div><div class="ttdeci">feature_interpret_op</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00249">features.c:249</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structast__features__xfer__config_html"><div class="ttname"><a href="../../df/db6/structast__features__xfer__config.html">ast_features_xfer_config</a></div><div class="ttdoc">Feature configuration relating to transfers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00057">include/asterisk/features_config.h:57</a></div></div>
<div class="ttc" id="features_8c_html_a83f72dd946185574b53be115821f6876a1d0a4362e89e71be70b2ca0d47616c99"><div class="ttname"><a href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876a1d0a4362e89e71be70b2ca0d47616c99">OPT_ARG_CALLEE_GO_ON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00865">features.c:865</a></div></div>
<div class="ttc" id="lock_8h_html"><div class="ttname"><a href="../../dd/d42/lock_8h.html">lock.h</a></div><div class="ttdoc">Asterisk locking-related definitions: </div></div>
<div class="ttc" id="stasis__channels_8h_html"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html">stasis_channels.h</a></div></div>
<div class="ttc" id="asterisk_8h_html"><div class="ttname"><a href="../../db/db2/asterisk_8h.html">asterisk.h</a></div><div class="ttdoc">Asterisk main include file. File version handling, generic pbx functions. </div></div>
<div class="ttc" id="features_8c_html_af28231fc268d53c9fd26b0eed2352514"><div class="ttname"><a href="../../d5/d92/features_8c.html#af28231fc268d53c9fd26b0eed2352514">bridge_check_monitor</a></div><div class="ttdeci">static void bridge_check_monitor(struct ast_channel *chan, struct ast_channel *peer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00486">features.c:486</a></div></div>
<div class="ttc" id="structast__bridge__thread__obj_html_a49ad9c522be37a447242ba7ff4a1e0db"><div class="ttname"><a href="../../d4/dd9/structast__bridge__thread__obj.html#a49ad9c522be37a447242ba7ff4a1e0db">ast_bridge_thread_obj::peer</a></div><div class="ttdeci">struct ast_channel * peer</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00330">features.c:330</a></div></div>
<div class="ttc" id="features_8c_html_afaf9a3cf32370efd622b461ac53de64ea3de43f39b62e2f782e8eac89a7dcc164"><div class="ttname"><a href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea3de43f39b62e2f782e8eac89a7dcc164">OPT_DURATION_LIMIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00850">features.c:850</a></div></div>
<div class="ttc" id="features__config_8c_html_ab2e74df8691039751d0423f2c217207b"><div class="ttname"><a href="../../de/d71/features__config_8c.html#ab2e74df8691039751d0423f2c217207b">load_features_config</a></div><div class="ttdeci">int load_features_config(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01996">features_config.c:1996</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="features_8c_html_afaf9a3cf32370efd622b461ac53de64ea8b131c263901244154b7b85ec05e6521"><div class="ttname"><a href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea8b131c263901244154b7b85ec05e6521">OPT_CALLER_MONITOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00855">features.c:855</a></div></div>
<div class="ttc" id="channel_8h_html_aba3f5f98138ce51792c44388a8d3ddcc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aba3f5f98138ce51792c44388a8d3ddcc">ast_channel_cdr</a></div><div class="ttdeci">struct ast_cdr * ast_channel_cdr(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00589">channel_internal_api.c:589</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e3dbc57c03c23543354ef108c31fac8"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a></div><div class="ttdeci">int pbx_exec(struct ast_channel *c, struct ast_app *app, const char *data)</div><div class="ttdoc">Execute an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_app.c:471</a></div></div>
<div class="ttc" id="structast__bridge__thread__obj_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d4/dd9/structast__bridge__thread__obj.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_thread_obj::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00329">features.c:329</a></div></div>
<div class="ttc" id="module_8h_html_ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15"><div class="ttname"><a href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00121">module.h:121</a></div></div>
<div class="ttc" id="structast__bridge__config_html_a725b051d26c3350f8cd04467b4202c60"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">ast_bridge_config::features_callee</a></div><div class="ttdeci">struct ast_flags features_callee</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01079">channel.h:1079</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a27662864d9f07a05ef11b683c245d032"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a27662864d9f07a05ef11b683c245d032">ast_bridge_features_set_limits</a></div><div class="ttdeci">int ast_bridge_features_set_limits(struct ast_bridge_features *features, struct ast_bridge_features_limits *limits, enum ast_bridge_hook_remove_flags remove_flags)</div><div class="ttdoc">Limit the amount of time a channel may stay in the bridge and optionally play warning messages as tim...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03475">bridge.c:3475</a></div></div>
<div class="ttc" id="max__forwards_8h_html_a9ae283e9d2c41ed0d767f6cb07e01040"><div class="ttname"><a href="../../d3/d93/max__forwards_8h.html#a9ae283e9d2c41ed0d767f6cb07e01040">ast_max_forwards_reset</a></div><div class="ttdeci">int ast_max_forwards_reset(struct ast_channel *chan)</div><div class="ttdoc">Reset the max forwards on a channel to its starting value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddd/max__forwards_8c_source.html#l00151">max_forwards.c:151</a></div></div>
<div class="ttc" id="conf2ael_8c_html_a74bb62276efdf39dd94048e007fca05b"><div class="ttname"><a href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a></div><div class="ttdeci">char * config</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcc/conf2ael_8c_source.html#l00066">conf2ael.c:66</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_a67cc1c1d8375847bc9140906c297cf58"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#a67cc1c1d8375847bc9140906c297cf58">ast_get_chan_applicationmap</a></div><div class="ttdeci">struct ao2_container * ast_get_chan_applicationmap(struct ast_channel *chan)</div><div class="ttdoc">Get the applicationmap for a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01325">features_config.c:1325</a></div></div>
<div class="ttc" id="features_8c_html_a5be9e06ba28b33987cb079049c00adf7"><div class="ttname"><a href="../../d5/d92/features_8c.html#a5be9e06ba28b33987cb079049c00adf7">bridge_exec</a></div><div class="ttdeci">static int bridge_exec(struct ast_channel *chan, const char *data)</div><div class="ttdoc">Bridge channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l01007">features.c:1007</a></div></div>
<div class="ttc" id="structast__bridge__config_html_a24c2c607bc3a6bf5f03cac90a9001e89"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#a24c2c607bc3a6bf5f03cac90a9001e89">ast_bridge_config::answer_topology</a></div><div class="ttdeci">struct ast_stream_topology * answer_topology</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01100">channel.h:1100</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="module_8h_html_aa4f734041ffd9d75b07cefb0291e1e58a37c0718af4fc7bf8c860beb730161044"><div class="ttname"><a href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a37c0718af4fc7bf8c860beb730161044">AST_MODPRI_CORE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00324">module.h:324</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="devicestate_8h_html"><div class="ttname"><a href="../../da/da2/devicestate_8h.html">devicestate.h</a></div><div class="ttdoc">Device state management. </div></div>
<div class="ttc" id="translate_8h_html"><div class="ttname"><a href="../../db/d39/translate_8h.html">translate.h</a></div><div class="ttdoc">Support for translation of data formats. translate.c. </div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ab451a4653176c211d131b899e1f91bde"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ab451a4653176c211d131b899e1f91bde">BEGIN_OPTIONS</a></div><div class="ttdeci">#define BEGIN_OPTIONS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01343">include/asterisk/app.h:1343</a></div></div>
<div class="ttc" id="app__morsecode_8c_html_a9380cc3415113a4b2ecc49516e2e6f32"><div class="ttname"><a href="../../d8/d8f/app__morsecode_8c.html#a9380cc3415113a4b2ecc49516e2e6f32">playtone</a></div><div class="ttdeci">static int playtone(struct ast_channel *chan, int tone, int len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8f/app__morsecode_8c_source.html#l00170">app_morsecode.c:170</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="features_8c_html_afaf9a3cf32370efd622b461ac53de64ea9f03cca4e2ee93778ae8ed2db279587d"><div class="ttname"><a href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea9f03cca4e2ee93778ae8ed2db279587d">OPT_CALLER_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00849">features.c:849</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="features_8c_html_a83f72dd946185574b53be115821f6876a22d5403ad37aee04f7beb26b97518b33"><div class="ttname"><a href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876a22d5403ad37aee04f7beb26b97518b33">OPT_ARG_DURATION_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00864">features.c:864</a></div></div>
<div class="ttc" id="features_8c_html_a3b41083253e12b6a71f4188e4e74a170"><div class="ttname"><a href="../../d5/d92/features_8c.html#a3b41083253e12b6a71f4188e4e74a170">add_features_datastores</a></div><div class="ttdeci">static void add_features_datastores(struct ast_channel *caller, struct ast_channel *callee, struct ast_bridge_config *config)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00423">features.c:423</a></div></div>
<div class="ttc" id="features_8c_html_ad734cf14eba6d25d25ffe0cbf9d5cac8aa6bdffdbaadf19af543d4cabf4387810"><div class="ttname"><a href="../../d5/d92/features_8c.html#ad734cf14eba6d25d25ffe0cbf9d5cac8aa6bdffdbaadf19af543d4cabf4387810">FEATURE_INTERPRET_DO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00251">features.c:251</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="features_8c_html_afaf9a3cf32370efd622b461ac53de64eadb3ae0c7823e3bd3f4a45db3d03f33cb"><div class="ttname"><a href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eadb3ae0c7823e3bd3f4a45db3d03f33cb">OPT_CALLER_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00853">features.c:853</a></div></div>
<div class="ttc" id="stasis_8h_html"><div class="ttname"><a href="../../dd/d79/stasis_8h.html">stasis.h</a></div><div class="ttdoc">Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. </div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="pbx_8h_html_a9a937fbb3b5f4e68880a9c5714a29ce5"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9a937fbb3b5f4e68880a9c5714a29ce5">ast_pbx_start</a></div><div class="ttdeci">enum ast_pbx_result ast_pbx_start(struct ast_channel *c)</div><div class="ttdoc">Create a new thread and start the PBX. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04712">pbx.c:4712</a></div></div>
<div class="ttc" id="audiohook_8h_html"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html">audiohook.h</a></div><div class="ttdoc">Audiohooks Architecture. </div></div>
<div class="ttc" id="channel_8h_html_a25f1c885c7f5230ea4c9bc48dde88fe1ae4ef6bff70f5837c4ccfcef8d789a9cc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae4ef6bff70f5837c4ccfcef8d789a9cc">AST_FEATURE_DISCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01066">channel.h:1066</a></div></div>
<div class="ttc" id="features_8c_html_afaf9a3cf32370efd622b461ac53de64eacc3e8440cd8f27440c7f0c27f67b3e3d"><div class="ttname"><a href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eacc3e8440cd8f27440c7f0c27f67b3e3d">OPT_CALLEE_KILL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00858">features.c:858</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3128b52009fb3dd764dce90ea377fce1"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a></div><div class="ttdeci">int ast_bridge_features_init(struct ast_bridge_features *features)</div><div class="ttdoc">Initialize bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03687">bridge.c:3687</a></div></div>
<div class="ttc" id="structast__dial__features_html"><div class="ttname"><a href="../../da/db3/structast__dial__features.html">ast_dial_features</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00255">features.c:255</a></div></div>
<div class="ttc" id="channel_8h_html_a2da3b985de9a2d15f794d499bf94a184"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2da3b985de9a2d15f794d499bf94a184">ast_raw_answer_with_stream_topology</a></div><div class="ttdeci">int ast_raw_answer_with_stream_topology(struct ast_channel *chan, struct ast_stream_topology *topology)</div><div class="ttdoc">Answer a channel passing in a stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02648">channel.c:2648</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="global__datastores_8h_html"><div class="ttname"><a href="../../d2/dc3/global__datastores_8h.html">global_datastores.h</a></div><div class="ttdoc">globally accessible channel datastores </div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_ab442de0580c9cee7ae5e10886e28ed8c"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#ab442de0580c9cee7ae5e10886e28ed8c">ast_get_chan_features_xfer_config</a></div><div class="ttdeci">struct ast_features_xfer_config * ast_get_chan_features_xfer_config(struct ast_channel *chan)</div><div class="ttdoc">Get the transfer configuration options for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01143">features_config.c:1143</a></div></div>
<div class="ttc" id="structast__bridge__thread__obj_html"><div class="ttname"><a href="../../d4/dd9/structast__bridge__thread__obj.html">ast_bridge_thread_obj</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00326">features.c:326</a></div></div>
<div class="ttc" id="test_8h_html"><div class="ttname"><a href="../../d2/ddc/test_8h.html">test.h</a></div><div class="ttdoc">Test Framework API. </div></div>
<div class="ttc" id="manager_8h_html_ab5db3cc603d7e798d61cb4cd94fbb4e2"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a></div><div class="ttdeci">#define EVENT_FLAG_CALL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00072">manager.h:72</a></div></div>
<div class="ttc" id="structast__datastore__info_html"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a></div><div class="ttdoc">Structure for a data store type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00031">datastore.h:31</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="bridge_8h_html_a4adad484788bb018b8699eeed2ddfedd"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a></div><div class="ttdeci">int ast_bridge_destroy(struct ast_bridge *bridge, int cause)</div><div class="ttdoc">Destroy a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00970">bridge.c:970</a></div></div>
<div class="ttc" id="features_8c_html_a987630c4be5b332f56b6f1119bbe87d2"><div class="ttname"><a href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2">play_tone_action</a></div><div class="ttdeci">play_tone_action</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00721">features.c:721</a></div></div>
<div class="ttc" id="features_8c_html_a987630c4be5b332f56b6f1119bbe87d2a0742f5ef5a28f72b83328283be335f0f"><div class="ttname"><a href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a0742f5ef5a28f72b83328283be335f0f">PLAYTONE_CHANNEL1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00723">features.c:723</a></div></div>
<div class="ttc" id="structast__dial__features_html_a609df0c692a45ba1ef3b752a801442fc"><div class="ttname"><a href="../../da/db3/structast__dial__features.html#a609df0c692a45ba1ef3b752a801442fc">ast_dial_features::my_features</a></div><div class="ttdeci">struct ast_flags my_features</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00257">features.c:257</a></div></div>
<div class="ttc" id="features_8c_html_abe48b606047919032bb8fa51c0140965"><div class="ttname"><a href="../../d5/d92/features_8c.html#abe48b606047919032bb8fa51c0140965">set_config_flags</a></div><div class="ttdeci">static void set_config_flags(struct ast_channel *chan, struct ast_bridge_config *config)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00334">features.c:334</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="utils_8h_html_ab9da1c7265610eff83ed6146f104dc6f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a></div><div class="ttdeci">#define ast_copy_flags(dest, src, flagz)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00084">utils.h:84</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="channel_8h_html_aad1e09cd7c79237d05cffb45d6cdfd7c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a></div><div class="ttdeci">struct ast_datastore * ast_channel_datastore_find(struct ast_channel *chan, const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Find a datastore on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02404">channel.c:2404</a></div></div>
<div class="ttc" id="features_8c_html_ac3382bf6da54c56b37069bd76bbdf4f9"><div class="ttname"><a href="../../d5/d92/features_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a></div><div class="ttdeci">static int load_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l01168">features.c:1168</a></div></div>
<div class="ttc" id="file_8h_html"><div class="ttname"><a href="../../d2/d4d/file_8h.html">file.h</a></div><div class="ttdoc">Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. </div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="manager_8h_html_a1d34461b8a3210b19e66f06bcdebfeb3"><div class="ttname"><a href="../../db/d45/manager_8h.html#a1d34461b8a3210b19e66f06bcdebfeb3">ast_manager_register_xml_core</a></div><div class="ttdeci">#define ast_manager_register_xml_core(action, authority, func)</div><div class="ttdoc">Register a manager callback using XML documentation to describe the manager. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00197">manager.h:197</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="features_8c_html_afaf9a3cf32370efd622b461ac53de64ea35080c34427591a22d34370e0a8ebab4"><div class="ttname"><a href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea35080c34427591a22d34370e0a8ebab4">OPT_CALLEE_PARK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00856">features.c:856</a></div></div>
<div class="ttc" id="features_8c_html_aca73779eed0a4f6644c0391f1e1b1d59"><div class="ttname"><a href="../../d5/d92/features_8c.html#aca73779eed0a4f6644c0391f1e1b1d59">parse_playtone</a></div><div class="ttdeci">static enum play_tone_action parse_playtone(const char *playtone_val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00728">features.c:728</a></div></div>
<div class="ttc" id="cdr__beanstalkd_8c_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a></div><div class="ttdeci">static int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">cdr_beanstalkd.c:76</a></div></div>
<div class="ttc" id="module_8h_html_ad2ca15621101154f29748cf1dac3c3cf"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a></div><div class="ttdeci">int ast_unregister_application(const char *app)</div><div class="ttdoc">Unregister an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00392">pbx_app.c:392</a></div></div>
<div class="ttc" id="features_8c_html_a8b286e6d3fdb7ca3a907c5b327e1b4a9"><div class="ttname"><a href="../../d5/d92/features_8c.html#a8b286e6d3fdb7ca3a907c5b327e1b4a9">ast_bridge_call_with_flags</a></div><div class="ttdeci">int ast_bridge_call_with_flags(struct ast_channel *chan, struct ast_channel *peer, struct ast_bridge_config *config, unsigned int flags)</div><div class="ttdoc">Bridge a call, and add additional flags to the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00633">features.c:633</a></div></div>
<div class="ttc" id="astmm_8h_html_ad42ab843b767e8b57162c10a158b75c3"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a></div><div class="ttdeci">void ast_free_ptr(void *ptr)</div><div class="ttdoc">free() wrapper </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01771">astmm.c:1771</a></div></div>
<div class="ttc" id="channel_8h_html_a6610c8171ced0a69738622c11736ff5e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a></div><div class="ttdeci">int ast_channel_priority(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00444">channel_internal_api.c:444</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ae0b1bf34dd9aa570c5efd4dddfead1fb"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ae0b1bf34dd9aa570c5efd4dddfead1fb">ast_bridge_features_limits_destroy</a></div><div class="ttdeci">void ast_bridge_features_limits_destroy(struct ast_bridge_features_limits *limits)</div><div class="ttdoc">Destructor function for ast_bridge_features_limits. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03470">bridge.c:3470</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ad3debd15062b4b9463e5703724dd9a1f"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a></div><div class="ttdeci">void ast_bridge_features_destroy(struct ast_bridge_features *features)</div><div class="ttdoc">Destroy an allocated bridge features struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03741">bridge.c:3741</a></div></div>
<div class="ttc" id="channel_8h_html_aa776071546e0bb0eb8cfc4c3a3159dfc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa776071546e0bb0eb8cfc4c3a3159dfc">ast_channel_linkedid</a></div><div class="ttdeci">const char * ast_channel_linkedid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00311">channel_internal_api.c:311</a></div></div>
<div class="ttc" id="structlimits_html"><div class="ttname"><a href="../../df/dfc/structlimits.html">limits</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d69/res__limit_8c_source.html#l00042">res_limit.c:42</a></div></div>
<div class="ttc" id="features_8c_html_afaf9a3cf32370efd622b461ac53de64ea98ad2a6cc60abe9a8cfd5f040fa9b4a4"><div class="ttname"><a href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea98ad2a6cc60abe9a8cfd5f040fa9b4a4">OPT_CALLEE_MONITOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00854">features.c:854</a></div></div>
<div class="ttc" id="structast__bridge__features__limits_html_a3cd36a1ca22dd411fcce7a3bdd7514ac"><div class="ttname"><a href="../../d7/da5/structast__bridge__features__limits.html#a3cd36a1ca22dd411fcce7a3bdd7514ac">ast_bridge_features_limits::warning</a></div><div class="ttdeci">unsigned int warning</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00346">bridge_features.h:346</a></div></div>
<div class="ttc" id="datastore_8h_html_aee27286888b30c6448a9bce928040a14"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a></div><div class="ttdeci">int ast_datastore_free(struct ast_datastore *datastore)</div><div class="ttdoc">Free a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00068">datastore.c:68</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="features_8c_html_a1f1561f68468b6f13235b3bedce80962"><div class="ttname"><a href="../../d5/d92/features_8c.html#a1f1561f68468b6f13235b3bedce80962">bridge_exec_options</a></div><div class="ttdeci">static const struct ast_app_option bridge_exec_options[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00884">features.c:884</a></div></div>
<div class="ttc" id="stream_8h_html"><div class="ttname"><a href="../../d8/d95/stream_8h.html">stream.h</a></div><div class="ttdoc">Media Stream API. </div></div>
<div class="ttc" id="features_8c_html_a19270bbca76aa0850d34134c16424063"><div class="ttname"><a href="../../d5/d92/features_8c.html#a19270bbca76aa0850d34134c16424063">pre_bridge_setup</a></div><div class="ttdeci">static int pre_bridge_setup(struct ast_channel *chan, struct ast_channel *peer, struct ast_bridge_config *config, struct ast_bridge_features *chan_features, struct ast_bridge_features *peer_features)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00536">features.c:536</a></div></div>
<div class="ttc" id="utils_8h_html"><div class="ttname"><a href="../../d5/d60/utils_8h.html">utils.h</a></div><div class="ttdoc">Utility functions. </div></div>
<div class="ttc" id="channel_8h_html_a71d89dbc5107b1f851dcbf1686a0d9d9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a71d89dbc5107b1f851dcbf1686a0d9d9">ast_channel_get_by_name_prefix</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name_prefix(const char *name, size_t name_len)</div><div class="ttdoc">Find a channel by a name prefix. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01434">channel.c:1434</a></div></div>
<div class="ttc" id="structast__bridge__config_html_af134a8361d8611e10872c9c0f806ba64"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#af134a8361d8611e10872c9c0f806ba64">ast_bridge_config::start_sound</a></div><div class="ttdeci">const char * start_sound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01089">channel.h:1089</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Get header from mananger transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_a25f1c885c7f5230ea4c9bc48dde88fe1ae6373d88ce4e9e5d9b7031272a9bc5ab"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae6373d88ce4e9e5d9b7031272a9bc5ab">AST_FEATURE_PLAY_WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01064">channel.h:1064</a></div></div>
<div class="ttc" id="structast__bridge__features__limits_html_a3b008f2b9d73c272d595c38d2663dea1"><div class="ttname"><a href="../../d7/da5/structast__bridge__features__limits.html#a3b008f2b9d73c272d595c38d2663dea1">ast_bridge_features_limits::frequency</a></div><div class="ttdeci">unsigned int frequency</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00348">bridge_features.h:348</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a520a3c6b7d57903d9a616051da1a019d"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a520a3c6b7d57903d9a616051da1a019d">AST_APP_OPTIONS</a></div><div class="ttdeci">#define AST_APP_OPTIONS(holder, options...)</div><div class="ttdoc">Declares an array of options for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01393">include/asterisk/app.h:1393</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a5992b274cfdcacdbc1fa8347fd01ebde"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a></div><div class="ttdeci">int done</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00048">test_amihooks.c:48</a></div></div>
<div class="ttc" id="features_8c_html_afaf9a3cf32370efd622b461ac53de64ea6faa363811a3b467116d290d52d967da"><div class="ttname"><a href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea6faa363811a3b467116d290d52d967da">OPT_CALLEE_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00852">features.c:852</a></div></div>
<div class="ttc" id="features_8c_html_a3fe7c7e43b8f3140716d836816bf827f"><div class="ttname"><a href="../../d5/d92/features_8c.html#a3fe7c7e43b8f3140716d836816bf827f">ast_bridge_call</a></div><div class="ttdeci">int ast_bridge_call(struct ast_channel *chan, struct ast_channel *peer, struct ast_bridge_config *config)</div><div class="ttdoc">bridge the call and set CDR </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00716">features.c:716</a></div></div>
<div class="ttc" id="features_8c_html_ad734cf14eba6d25d25ffe0cbf9d5cac8a8f5f0dd42458225662e3ddaabb1cb5d2"><div class="ttname"><a href="../../d5/d92/features_8c.html#ad734cf14eba6d25d25ffe0cbf9d5cac8a8f5f0dd42458225662e3ddaabb1cb5d2">FEATURE_INTERPRET_CHECK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00252">features.c:252</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html">config.h</a></div><div class="ttdoc">Configuration File Parser. </div></div>
<div class="ttc" id="features__config_8c_html_aebe1b4388fc1e2c72997d5fd171742bb"><div class="ttname"><a href="../../de/d71/features__config_8c.html#aebe1b4388fc1e2c72997d5fd171742bb">reload_features_config</a></div><div class="ttdeci">int reload_features_config(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01985">features_config.c:1985</a></div></div>
<div class="ttc" id="bridge_8h_html_ac086b7d74fb40c2ede8514274585b101a9d897e78dc2fcd2447531e2ee0310933"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a9d897e78dc2fcd2447531e2ee0310933">AST_BRIDGE_IMPART_INHIBIT_JOIN_COLP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00606">bridge.h:606</a></div></div>
<div class="ttc" id="features_8c_html_a987630c4be5b332f56b6f1119bbe87d2a7a847698b91ee8df79764edf2b1f1630"><div class="ttname"><a href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a7a847698b91ee8df79764edf2b1f1630">PLAYTONE_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00722">features.c:722</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html">features_config.h</a></div></div>
<div class="ttc" id="channel_8h_html_a25f1c885c7f5230ea4c9bc48dde88fe1ae16218a9dfb2123d391f959e3d078362"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae16218a9dfb2123d391f959e3d078362">AST_FEATURE_AUTOMON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01068">channel.h:1068</a></div></div>
<div class="ttc" id="features_8c_html_afaf9a3cf32370efd622b461ac53de64eab0eb8a377bf253cf368bf70f0b59fc31"><div class="ttname"><a href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eab0eb8a377bf253cf368bf70f0b59fc31">OPT_CALLEE_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00848">features.c:848</a></div></div>
<div class="ttc" id="bridge_8h_html_a582e1dd73a483ac881cff01fa07f39ae"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a></div><div class="ttdeci">int ast_bridge_impart(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap, struct ast_bridge_features *features, enum ast_bridge_impart_flags flags) attribute_warn_unused_result</div><div class="ttdoc">Impart a channel to a bridge (non-blocking) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01924">bridge.c:1924</a></div></div>
<div class="ttc" id="channel_8h_html"><div class="ttname"><a href="../../d5/d7b/channel_8h.html">channel.h</a></div><div class="ttdoc">General Asterisk PBX channel definitions. </div></div>
<div class="ttc" id="module_8h_html_a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223"><div class="ttname"><a href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00317">module.h:317</a></div></div>
<div class="ttc" id="channel_8h_html_a1d6833a829f7402bbf9cf0383ae3ca00"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a></div><div class="ttdeci">const char * ast_channel_accountcode(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__after_8h_html_adbda216253e9248d9e9734f6c8a60dbc"><div class="ttname"><a href="../../d8/d85/bridge__after_8h.html#adbda216253e9248d9e9734f6c8a60dbc">ast_bridge_set_after_goto</a></div><div class="ttdeci">void ast_bridge_set_after_goto(struct ast_channel *chan, const char *context, const char *exten, int priority)</div><div class="ttdoc">Set channel to goto specific location after the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/db6/bridge__after_8c_source.html#l00626">bridge_after.c:626</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="features_8c_html_ad09fa931f468002152a3cc2d5ce25eae"><div class="ttname"><a href="../../d5/d92/features_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a></div><div class="ttdeci">static int unload_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l01157">features.c:1157</a></div></div>
<div class="ttc" id="channel_8h_html_a38839b63b5d31eabb850af939e2aa465"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a38839b63b5d31eabb850af939e2aa465">ast_channel_macropriority</a></div><div class="ttdeci">int ast_channel_macropriority(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00436">channel_internal_api.c:436</a></div></div>
<div class="ttc" id="features_8c_html_afaf9a3cf32370efd622b461ac53de64eac6c5fc9f2156b5d690587dc1fdcbc6b3"><div class="ttname"><a href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64eac6c5fc9f2156b5d690587dc1fdcbc6b3">BRIDGE_OPT_PLAYTONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00847">features.c:847</a></div></div>
<div class="ttc" id="channel_8h_html_adfe39dc3611c6eda03b3dd3fbde10892"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adfe39dc3611c6eda03b3dd3fbde10892">ast_channel_visible_indication</a></div><div class="ttdeci">int ast_channel_visible_indication(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00477">channel_internal_api.c:477</a></div></div>
<div class="ttc" id="features_8c_html_afaf9a3cf32370efd622b461ac53de64ea532332f4745455d1129c3cf0d25cb5d3"><div class="ttname"><a href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea532332f4745455d1129c3cf0d25cb5d3">OPT_DURATION_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00851">features.c:851</a></div></div>
<div class="ttc" id="bridge__basic_8h_html_a3532f26d87ff1bdddd1b7d945b6c5802"><div class="ttname"><a href="../../d4/d1e/bridge__basic_8h.html#a3532f26d87ff1bdddd1b7d945b6c5802">ast_bridge_basic_set_flags</a></div><div class="ttdeci">void ast_bridge_basic_set_flags(struct ast_bridge *bridge, unsigned int flags)</div><div class="ttdoc">Set feature flags on a basic bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/bridge__basic_8c_source.html#l03630">bridge_basic.c:3630</a></div></div>
<div class="ttc" id="astobj2_8h_html"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html">astobj2.h</a></div></div>
<div class="ttc" id="features_8c_html_a987630c4be5b332f56b6f1119bbe87d2acce6aaaea7c3cb013cc91b091364bc7a"><div class="ttname"><a href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2acce6aaaea7c3cb013cc91b091364bc7a">PLAYTONE_BOTH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00725">features.c:725</a></div></div>
<div class="ttc" id="structast__bridge__config_html"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a></div><div class="ttdoc">bridge configuration </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01077">channel.h:1077</a></div></div>
<div class="ttc" id="structast__bridge__config_html_a30cb875f49910a9515ee92d8dfdf8b83"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#a30cb875f49910a9515ee92d8dfdf8b83">ast_bridge_config::end_bridge_callback_data</a></div><div class="ttdeci">void * end_bridge_callback_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01092">channel.h:1092</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="structextension_html"><div class="ttname"><a href="../../d0/d5a/structextension.html">extension</a></div><div class="ttdoc">structure to hold extensions </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00287">res_phoneprov.c:287</a></div></div>
<div class="ttc" id="structast__bridge__config_html_a0b23b4ebfc857809d07d1ced94c9a6eb"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#a0b23b4ebfc857809d07d1ced94c9a6eb">ast_bridge_config::end_sound</a></div><div class="ttdeci">const char * end_sound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01088">channel.h:1088</a></div></div>
<div class="ttc" id="structast__bridge__config_html_af3d16394c849390df1c8f72569faeb37"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">ast_bridge_config::play_warning</a></div><div class="ttdeci">long play_warning</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01085">channel.h:1085</a></div></div>
<div class="ttc" id="structmansession_html"><div class="ttname"><a href="../../d2/d8a/structmansession.html">mansession</a></div><div class="ttdoc">In case you didn&amp;#39;t read that giant block of text above the mansession_session struct, the struct mansession is named this solely to keep the API the same in Asterisk. This structure really represents data that is different from Manager action to Manager action. The mansession_session pointer contained within points to session-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01625">manager.c:1625</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="channel_8h_html_a7dbb6edabad3e02e80d605ca5d254c35"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7dbb6edabad3e02e80d605ca5d254c35">AST_BRIDGE_DTMF_CHANNEL_1</a></div><div class="ttdeci">#define AST_BRIDGE_DTMF_CHANNEL_1</div><div class="ttdoc">Report DTMF on channel 1. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02384">channel.h:2384</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_af40039f1c49c16d0f6fa33fe9c43a0cb"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a></div><div class="ttdeci">int ast_app_parse_options(const struct ast_app_option *options, struct ast_flags *flags, char **args, char *optstr)</div><div class="ttdoc">Parses a string containing application options and sets flags/arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02906">main/app.c:2906</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="pbx_8h_html"><div class="ttname"><a href="../../db/de0/pbx_8h.html">pbx.h</a></div><div class="ttdoc">Core PBX routines and definitions. </div></div>
<div class="ttc" id="structast__bridge__config_html_aa9510db9c5a776dfbd1aaab8c48970f0"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">ast_bridge_config::features_caller</a></div><div class="ttdeci">struct ast_flags features_caller</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01078">channel.h:1078</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gafadf012f66a9fd7ecf985ec5b9dee101"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a></div><div class="ttdeci">int ast_manager_unregister(const char *action)</div><div class="ttdoc">Unregister a registered manager command. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07258">manager.c:7258</a></div></div>
<div class="ttc" id="manager_8h_html"><div class="ttname"><a href="../../db/d45/manager_8h.html">manager.h</a></div><div class="ttdoc">The AMI - Asterisk Manager Interface - is a TCP protocol created to manage Asterisk with third-party ...</div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="structast__bridge__features__limits_html_a095ceb846c8c874cd3fcc5cdaf6ade81"><div class="ttname"><a href="../../d7/da5/structast__bridge__features__limits.html#a095ceb846c8c874cd3fcc5cdaf6ade81">ast_bridge_features_limits::duration</a></div><div class="ttdeci">unsigned int duration</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00344">bridge_features.h:344</a></div></div>
<div class="ttc" id="features_8h_html_aabeca6aae7e5db0dfe25ab88c1a40b07"><div class="ttname"><a href="../../de/d47/features_8h.html#aabeca6aae7e5db0dfe25ab88c1a40b07">ast_bridge_add_channel</a></div><div class="ttdeci">int ast_bridge_add_channel(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_bridge_features *features, int play_tone, const char *xfersound)</div><div class="ttdoc">Add an arbitrary channel to a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l02519">bridge.c:2519</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3d37f3df31f68efc380c63b999db43f0"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3d37f3df31f68efc380c63b999db43f0">ast_bridge_features_limits_construct</a></div><div class="ttdeci">int ast_bridge_features_limits_construct(struct ast_bridge_features_limits *limits)</div><div class="ttdoc">Constructor function for ast_bridge_features_limits. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03459">bridge.c:3459</a></div></div>
<div class="ttc" id="channel_8h_html_a25f1c885c7f5230ea4c9bc48dde88fe1a33e339fbf78c26377f6c7057dda06ccc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1a33e339fbf78c26377f6c7057dda06ccc">AST_FEATURE_REDIRECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01065">channel.h:1065</a></div></div>
<div class="ttc" id="structast__bridge__features__limits_html"><div class="ttname"><a href="../../d7/da5/structast__bridge__features__limits.html">ast_bridge_features_limits</a></div><div class="ttdoc">Structure that contains configuration information for the limits feature. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00332">bridge_features.h:332</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a7549377df87038be737e8cae73acaa9d"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a7549377df87038be737e8cae73acaa9d">AST_APP_OPTION_ARG</a></div><div class="ttdeci">#define AST_APP_OPTION_ARG(option, flagno, argno)</div><div class="ttdoc">Declares an application option that accepts an argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01413">include/asterisk/app.h:1413</a></div></div>
<div class="ttc" id="features_8c_html_a30cf144e208ddc17e51b2f1e600052e8"><div class="ttname"><a href="../../d5/d92/features_8c.html#a30cf144e208ddc17e51b2f1e600052e8">app_bridge</a></div><div class="ttdeci">static char * app_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00844">features.c:844</a></div></div>
<div class="ttc" id="channel_8h_html_a25f1c885c7f5230ea4c9bc48dde88fe1a0a015b303a0970eda3ea8328714cbbae"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1a0a015b303a0970eda3ea8328714cbbae">AST_FEATURE_AUTOMIXMON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01070">channel.h:1070</a></div></div>
<div class="ttc" id="bridge_8h_html_ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00604">bridge.h:604</a></div></div>
<div class="ttc" id="channel_8h_html_a96d7e5eca937b7e71f27acc4360c3ee1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a96d7e5eca937b7e71f27acc4360c3ee1">ast_channel_masq</a></div><div class="ttdeci">struct ast_channel * ast_channel_masq(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00597">channel_internal_api.c:597</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="channel_8h_html_ac20bb1f04868ac5ee4fe83a864aa2271"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac20bb1f04868ac5ee4fe83a864aa2271">AST_FEATURE_DTMF_MASK</a></div><div class="ttdeci">#define AST_FEATURE_DTMF_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01073">channel.h:1073</a></div></div>
<div class="ttc" id="channel_8h_html_ac8b850ff95f945ad6cfeb2942799800a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac8b850ff95f945ad6cfeb2942799800a">ast_channel_appl</a></div><div class="ttdeci">const char * ast_channel_appl(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00317">channel_internal_api.c:317</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a5ff4f7a94a36fcc2b8628186cb643d4b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a5ff4f7a94a36fcc2b8628186cb643d4b">AST_FLAG_IN_AUTOLOOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00998">channel.h:998</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00041">channelstate.h:41</a></div></div>
<div class="ttc" id="features_8c_html_a987630c4be5b332f56b6f1119bbe87d2a0c4492b730345653d652fcc7933d3410"><div class="ttname"><a href="../../d5/d92/features_8c.html#a987630c4be5b332f56b6f1119bbe87d2a0c4492b730345653d652fcc7933d3410">PLAYTONE_CHANNEL2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00724">features.c:724</a></div></div>
<div class="ttc" id="bridge_8h_html_ad52005264bec898a8f825bd47d91cf93a3ebef74566687cfbc25d174725fc6d56"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ad52005264bec898a8f825bd47d91cf93a3ebef74566687cfbc25d174725fc6d56">AST_BRIDGE_JOIN_INHIBIT_JOIN_COLP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00551">bridge.h:551</a></div></div>
<div class="ttc" id="channel_8h_html_aae304e7129d84dd74fde2b4f4ae9dce4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aae304e7129d84dd74fde2b4f4ae9dce4">ast_channel_dialcontext</a></div><div class="ttdeci">const char * ast_channel_dialcontext(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ad1982509765f4870f1f63412a53ea668"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a></div><div class="ttdeci">static int reload(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00741">cdr_mysql.c:741</a></div></div>
<div class="ttc" id="features_8c_html_aee1c825bbcfa66200e65818827287303"><div class="ttname"><a href="../../d5/d92/features_8c.html#aee1c825bbcfa66200e65818827287303">add_features_datastore</a></div><div class="ttdeci">static int add_features_datastore(struct ast_channel *chan, const struct ast_flags *my_features, const struct ast_flags *peer_features)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00291">features.c:291</a></div></div>
<div class="ttc" id="utils_8h_html_afb8683b4d96960d7a82a86a974a57599"><div class="ttname"><a href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a></div><div class="ttdeci">#define AST_FLAGS_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00196">utils.h:196</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a></div><div class="ttdoc">Module could not be loaded properly. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00102">module.h:102</a></div></div>
<div class="ttc" id="features_8c_html_afaf9a3cf32370efd622b461ac53de64ea78690a8e97e0eac7d0982b81d5cadac8"><div class="ttname"><a href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea78690a8e97e0eac7d0982b81d5cadac8">OPT_CALLEE_GO_ON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00859">features.c:859</a></div></div>
<div class="ttc" id="max__forwards_8h_html"><div class="ttname"><a href="../../d3/d93/max__forwards_8h.html">max_forwards.h</a></div></div>
<div class="ttc" id="__private_8h_html"><div class="ttname"><a href="../../d4/d78/__private_8h.html">_private.h</a></div><div class="ttdoc">Prototypes for public functions only of internal interest,. </div></div>
<div class="ttc" id="features__config_8c_html_aac16eff0ce00c1c8f228fc649dff15d0"><div class="ttname"><a href="../../de/d71/features__config_8c.html#aac16eff0ce00c1c8f228fc649dff15d0">unload_features_config</a></div><div class="ttdeci">void unload_features_config(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01976">features_config.c:1976</a></div></div>
<div class="ttc" id="channel_8h_html_a3a32e3014998d0066281c4dd8e278ae9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3a32e3014998d0066281c4dd8e278ae9">DATASTORE_INHERIT_FOREVER</a></div><div class="ttdeci">#define DATASTORE_INHERIT_FOREVER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00193">channel.h:193</a></div></div>
<div class="ttc" id="structast__datastore_html_a79d869daa2e63a92b3e5f542446031bb"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a79d869daa2e63a92b3e5f542446031bb">ast_datastore::inheritance</a></div><div class="ttdeci">unsigned int inheritance</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00073">datastore.h:73</a></div></div>
<div class="ttc" id="bridge__basic_8h_html"><div class="ttname"><a href="../../d4/d1e/bridge__basic_8h.html">bridge_basic.h</a></div><div class="ttdoc">Basic bridge subclass API. </div></div>
<div class="ttc" id="channel_8h_html_ae6c85ee3595b7e9ee6fc072a3b7da814"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae6c85ee3595b7e9ee6fc072a3b7da814">ast_autoservice_chan_hangup_peer</a></div><div class="ttdeci">void ast_autoservice_chan_hangup_peer(struct ast_channel *chan, struct ast_channel *peer)</div><div class="ttdoc">Put chan into autoservice while hanging up peer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00342">autoservice.c:342</a></div></div>
<div class="ttc" id="features_8c_html_a51755e20bdcffb65c53468b7c4eead32"><div class="ttname"><a href="../../d5/d92/features_8c.html#a51755e20bdcffb65c53468b7c4eead32">action_bridge</a></div><div class="ttdeci">static int action_bridge(struct mansession *s, const struct message *m)</div><div class="ttdoc">Bridge channels together. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00757">features.c:757</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="bridge_8h_html_a116a27b8e1e111729ee1828d4fab6b5a"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a116a27b8e1e111729ee1828d4fab6b5a">ast_bridge_join</a></div><div class="ttdeci">int ast_bridge_join(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap, struct ast_bridge_features *features, struct ast_bridge_tech_optimizations *tech_args, enum ast_bridge_join_flags flags)</div><div class="ttdoc">Join a channel to a bridge (blocking) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01667">bridge.c:1667</a></div></div>
<div class="ttc" id="res__phoneprov_8c_html_addaa208b0ed785225e24490fb9f28a80"><div class="ttname"><a href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO</a></div><div class="ttdeci">AST_MODULE_INFO(ASTERISK_GPL_KEY, AST_MODFLAG_GLOBAL_SYMBOLS|AST_MODFLAG_LOAD_ORDER, &quot;HTTP Phone Provisioning&quot;,.support_level=AST_MODULE_SUPPORT_EXTENDED,.load=load_module,.unload=unload_module,.reload=reload,.load_pri=AST_MODPRI_CHANNEL_DEPEND,.requires=&quot;http&quot;,)</div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a085c0c603de12dc2474a17a92e1cb5a4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a085c0c603de12dc2474a17a92e1cb5a4">AST_SOFTHANGUP_ASYNCGOTO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01127">channel.h:1127</a></div></div>
<div class="ttc" id="channel_8h_html_a531fd832a2f8b0f4156735043a6158e1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a531fd832a2f8b0f4156735043a6158e1">ast_channel_data</a></div><div class="ttdeci">const char * ast_channel_data(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00334">channel_internal_api.c:334</a></div></div>
<div class="ttc" id="bridge__features_8h_html_abf9e5d393615c63d27e0bd530301a1ed"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#abf9e5d393615c63d27e0bd530301a1ed">ast_bridge_features_new</a></div><div class="ttdeci">struct ast_bridge_features * ast_bridge_features_new(void)</div><div class="ttdoc">Allocate a new bridge features struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03750">bridge.c:3750</a></div></div>
<div class="ttc" id="structast__bridge__config_html_a5fd13b216c2752f4f1fb843cae429558"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#a5fd13b216c2752f4f1fb843cae429558">ast_bridge_config::end_bridge_callback</a></div><div class="ttdeci">void(* end_bridge_callback)(void *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01091">channel.h:1091</a></div></div>
<div class="ttc" id="features_8c_html_aa66e4da38daa333f3a871726d46eed96"><div class="ttname"><a href="../../d5/d92/features_8c.html#aa66e4da38daa333f3a871726d46eed96">ast_bridge_timelimit</a></div><div class="ttdeci">int ast_bridge_timelimit(struct ast_channel *chan, struct ast_bridge_config *config, char *parse, struct timeval *calldurationlimit)</div><div class="ttdoc">parse L option and read associated channel variables to set warning, warning frequency, and timelimit </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00886">features.c:886</a></div></div>
<div class="ttc" id="features_8c_html_a83f72dd946185574b53be115821f6876aec7326f60e7edad15d96ff935e5616d6"><div class="ttname"><a href="../../d5/d92/features_8c.html#a83f72dd946185574b53be115821f6876aec7326f60e7edad15d96ff935e5616d6">OPT_ARG_ARRAY_SIZE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00867">features.c:867</a></div></div>
<div class="ttc" id="channel_8h_html_adac99999f1e55833e7f903979d67b48b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a></div><div class="ttdeci">int ast_channel_softhangup_internal_flag(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00997">channel_internal_api.c:997</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="bridge__basic_8h_html_a1410fb71fa67f9ee92f15b18439b7571"><div class="ttname"><a href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a></div><div class="ttdeci">struct ast_bridge * ast_bridge_basic_new(void)</div><div class="ttdoc">Create a new basic class bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/bridge__basic_8c_source.html#l03617">bridge_basic.c:3617</a></div></div>
<div class="ttc" id="bridge__basic_8h_html_abbf75b17211128395690d45b99aad6f4"><div class="ttname"><a href="../../d4/d1e/bridge__basic_8h.html#abbf75b17211128395690d45b99aad6f4">ast_bridge_features_ds_append</a></div><div class="ttdeci">int ast_bridge_features_ds_append(struct ast_channel *chan, struct ast_flags *flags)</div><div class="ttdoc">Append basic bridge DTMF feature flags on the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/bridge__basic_8c_source.html#l00263">bridge_basic.c:263</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="bridge__after_8h_html"><div class="ttname"><a href="../../d8/d85/bridge__after_8h.html">bridge_after.h</a></div><div class="ttdoc">After Bridge Execution API. </div></div>
<div class="ttc" id="features_8c_html_a42feee36c86ad2f98158935cc0a3b272"><div class="ttname"><a href="../../d5/d92/features_8c.html#a42feee36c86ad2f98158935cc0a3b272">bridge_config_set_limits</a></div><div class="ttdeci">static void bridge_config_set_limits(struct ast_bridge_config *config, struct ast_bridge_features_limits *caller_limits, struct ast_bridge_features_limits *callee_limits)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00462">features.c:462</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cli_8h_html"><div class="ttname"><a href="../../dc/db0/cli_8h.html">cli.h</a></div><div class="ttdoc">Standard Command Line Interface. </div></div>
<div class="ttc" id="logger_8h_html_ac7388257651bb6a92d3208512fab0ba6"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ac7388257651bb6a92d3208512fab0ba6">SCOPE_TRACE</a></div><div class="ttdeci">#define SCOPE_TRACE(level,...)</div><div class="ttdoc">Print a trace message with details when a scope is entered or existed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00749">logger.h:749</a></div></div>
<div class="ttc" id="channel_8h_html_a25f1c885c7f5230ea4c9bc48dde88fe1ace68898ce2f86298d8e39e0473a55e28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ace68898ce2f86298d8e39e0473a55e28">AST_FEATURE_PARKCALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01069">channel.h:1069</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__app_html"><div class="ttname"><a href="../../d0/da3/structast__app.html">ast_app</a></div><div class="ttdoc">ast_app: A registered application </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00045">pbx_app.c:45</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="strings_8h_html_a6c3dc0bad204e9dd9890325c1c861e38"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a></div><div class="ttdeci">int attribute_pure ast_false(const char *val)</div><div class="ttdoc">Make sure something is false. Determine if a string containing a boolean value is &quot;false&quot;...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01968">main/utils.c:1968</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a2a1890787b3e55318c417c0a3e1432c7"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a2a1890787b3e55318c417c0a3e1432c7">END_OPTIONS</a></div><div class="ttdeci">#define END_OPTIONS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01344">include/asterisk/app.h:1344</a></div></div>
<div class="ttc" id="features_8c_html_afaf9a3cf32370efd622b461ac53de64ea82c1e40f3b210bce47d00d44dec0b8fd"><div class="ttname"><a href="../../d5/d92/features_8c.html#afaf9a3cf32370efd622b461ac53de64ea82c1e40f3b210bce47d00d44dec0b8fd">OPT_CALLER_PARK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00857">features.c:857</a></div></div>
<div class="ttc" id="causes_8h_html"><div class="ttname"><a href="../../d4/da3/causes_8h.html">causes.h</a></div><div class="ttdoc">Internal Asterisk hangup causes. </div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">include/asterisk/frame.h:280</a></div></div>
<div class="ttc" id="module_8h_html_a5fd926a7510f3d3fd0d69ae710ec1e89"><div class="ttname"><a href="../../d5/d16/module_8h.html#a5fd926a7510f3d3fd0d69ae710ec1e89">ast_register_application2</a></div><div class="ttdeci">int ast_register_application2(const char *app, int(*execute)(struct ast_channel *, const char *), const char *synopsis, const char *description, void *mod)</div><div class="ttdoc">Register an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00103">pbx_app.c:103</a></div></div>
<div class="ttc" id="features_8c_html_aebf26a3de75e83d0137e596d85522436"><div class="ttname"><a href="../../d5/d92/features_8c.html#aebf26a3de75e83d0137e596d85522436">set_bridge_features_on_config</a></div><div class="ttdeci">static void set_bridge_features_on_config(struct ast_bridge_config *config, const char *features)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00383">features.c:383</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="bridge__after_8h_html_abffcfc07534d569ab73f8fdb19a94677"><div class="ttname"><a href="../../d8/d85/bridge__after_8h.html#abffcfc07534d569ab73f8fdb19a94677">ast_bridge_set_after_go_on</a></div><div class="ttdeci">void ast_bridge_set_after_go_on(struct ast_channel *chan, const char *context, const char *exten, int priority, const char *parseable_goto)</div><div class="ttdoc">Set channel to go on in the dialplan after the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/db6/bridge__after_8c_source.html#l00636">bridge_after.c:636</a></div></div>
<div class="ttc" id="datastore_8h_html_a666afb07fd77d50782cc10f83e029159"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a></div><div class="ttdeci">#define ast_datastore_alloc(info, uid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00089">datastore.h:89</a></div></div>
<div class="ttc" id="structast__bridge__config_html_a1fa6cb6235cf4abe198a8561e3c18bae"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#a1fa6cb6235cf4abe198a8561e3c18bae">ast_bridge_config::warning_sound</a></div><div class="ttdeci">const char * warning_sound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01087">channel.h:1087</a></div></div>
<div class="ttc" id="structast__bridge__config_html_abc09654c9b36de6b0bd0bfd92d31c0c0"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">ast_bridge_config::warning_freq</a></div><div class="ttdeci">long warning_freq</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01086">channel.h:1086</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="features_8h_html"><div class="ttname"><a href="../../de/d47/features_8h.html">features.h</a></div><div class="ttdoc">Call Parking and Pickup API Includes code and algorithms from the Zapata library. ...</div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_aca036489931bf5571e2472331c8ac80b"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a></div><div class="ttdeci">#define AST_APP_OPTION(option, flagno)</div><div class="ttdoc">Declares an application option that does not accept an argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01402">include/asterisk/app.h:1402</a></div></div>
<div class="ttc" id="features_8c_html_a2cc97e866c50a8f3751b48684760b8db"><div class="ttname"><a href="../../d5/d92/features_8c.html#a2cc97e866c50a8f3751b48684760b8db">ast_channel_log</a></div><div class="ttdeci">void ast_channel_log(char *title, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00363">features.c:363</a></div></div>
<div class="ttc" id="module_8h_html_a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c"><div class="ttname"><a href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00316">module.h:316</a></div></div>
<div class="ttc" id="structast__bridge__config_html_ab88b1e2ff0d0fed0616512352e723162"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">ast_bridge_config::timelimit</a></div><div class="ttdeci">long timelimit</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01084">channel.h:1084</a></div></div>
<div class="ttc" id="channel_8h_html_adf593d68a333075c1fcae8a73b68c069"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adf593d68a333075c1fcae8a73b68c069">ast_channel_macrocontext</a></div><div class="ttdeci">const char * ast_channel_macrocontext(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00362">channel_internal_api.c:362</a></div></div>
<div class="ttc" id="pbx_8h_html_ad4a6912dcd2ad44a186d0a284afafc51"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a></div><div class="ttdeci">struct ast_app * pbx_findapp(const char *app)</div><div class="ttdoc">Look up an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00165">ael_main.c:165</a></div></div>
<div class="ttc" id="say_8h_html"><div class="ttname"><a href="../../db/dce/say_8h.html">say.h</a></div><div class="ttdoc">Say numbers and dates (maybe words one day too) </div></div>
<div class="ttc" id="bridge_8h_html_ad52005264bec898a8f825bd47d91cf93a9106169928c6eeccad5b5ebcf762ac9d"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ad52005264bec898a8f825bd47d91cf93a9106169928c6eeccad5b5ebcf762ac9d">AST_BRIDGE_JOIN_PASS_REFERENCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00549">bridge.h:549</a></div></div>
<div class="ttc" id="structast__features__xfer__config_html_aa79f71a801e58cd6889780e185e9a5d3"><div class="ttname"><a href="../../df/db6/structast__features__xfer__config.html#aa79f71a801e58cd6889780e185e9a5d3">ast_features_xfer_config::xfersound</a></div><div class="ttdeci">const ast_string_field xfersound</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00075">include/asterisk/features_config.h:75</a></div></div>
<div class="ttc" id="module_8h_html_aba2c8d4be709a254658b21a834f8294a"><div class="ttname"><a href="../../d5/d16/module_8h.html#aba2c8d4be709a254658b21a834f8294a">ASTERISK_GPL_KEY</a></div><div class="ttdeci">#define ASTERISK_GPL_KEY</div><div class="ttdoc">The text the key() function should return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00046">module.h:46</a></div></div>
<div class="ttc" id="bridge_8h_html"><div class="ttname"><a href="../../d4/d56/bridge_8h.html">bridge.h</a></div><div class="ttdoc">Bridging API. </div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="module_8h_html"><div class="ttname"><a href="../../d5/d16/module_8h.html">module.h</a></div><div class="ttdoc">Asterisk module definitions. </div></div>
<div class="ttc" id="structast__bridge__thread__obj_html_acffa9c033850b0d1ab2b93ca1be518d1"><div class="ttname"><a href="../../d4/dd9/structast__bridge__thread__obj.html#acffa9c033850b0d1ab2b93ca1be518d1">ast_bridge_thread_obj::return_to_pbx</a></div><div class="ttdeci">unsigned int return_to_pbx</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00331">features.c:331</a></div></div>
<div class="ttc" id="channel_8h_html_a938863dd527bbcac399636661623baf9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a938863dd527bbcac399636661623baf9">ast_channel_amaflags</a></div><div class="ttdeci">enum ama_flags ast_channel_amaflags(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00406">channel_internal_api.c:406</a></div></div>
<div class="ttc" id="channel_8h_html_a1ed3e98d33d5587948a0e2ef67a81f52"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a></div><div class="ttdeci">int ast_channel_datastore_add(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Add a datastore to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02390">channel.c:2390</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html">app.h</a></div><div class="ttdoc">Application convenience functions, designed to give consistent look and feel to Asterisk apps...</div></div>
<div class="ttc" id="channel_8h_html_a954acd75e9468e701f656d60c8f374b0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a954acd75e9468e701f656d60c8f374b0">ast_channel_masqr</a></div><div class="ttdeci">struct ast_channel * ast_channel_masqr(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00605">channel_internal_api.c:605</a></div></div>
<div class="ttc" id="bridge__after_8h_html_a6231027722f2bdd4093d15defa0d7b94"><div class="ttname"><a href="../../d8/d85/bridge__after_8h.html#a6231027722f2bdd4093d15defa0d7b94">ast_bridge_setup_after_goto</a></div><div class="ttdeci">int ast_bridge_setup_after_goto(struct ast_channel *chan)</div><div class="ttdoc">Setup any after bridge goto location to begin execution. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/db6/bridge__after_8c_source.html#l00447">bridge_after.c:447</a></div></div>
<div class="ttc" id="channel_8h_html_ac967e3cfb7640aa743eb1c4811d46be0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac967e3cfb7640aa743eb1c4811d46be0">ast_channel_macroexten</a></div><div class="ttdeci">const char * ast_channel_macroexten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00370">channel_internal_api.c:370</a></div></div>
<div class="ttc" id="features_8c_html_ac06adfce185b6dcc89bd7410e2ee344a"><div class="ttname"><a href="../../d5/d92/features_8c.html#ac06adfce185b6dcc89bd7410e2ee344a">bridge_failed_peer_goto</a></div><div class="ttdeci">static void bridge_failed_peer_goto(struct ast_channel *chan, struct ast_channel *peer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00528">features.c:528</a></div></div>
<div class="ttc" id="channel_8h_html_a2bd5879255a0f6a758c99b58fcab2f27"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2bd5879255a0f6a758c99b58fcab2f27">AST_BRIDGE_DTMF_CHANNEL_0</a></div><div class="ttdeci">#define AST_BRIDGE_DTMF_CHANNEL_0</div><div class="ttdoc">Report DTMF on channel 0. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02382">channel.h:2382</a></div></div>
<div class="ttc" id="bridge__features_8h_html"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html">bridge_features.h</a></div><div class="ttdoc">Channel Bridging API. </div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:43:44 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
