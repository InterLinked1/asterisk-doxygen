<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: test_dns_recurring.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">test_dns_recurring.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;arpa/nameser.h&gt;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d51/dns__core_8h_source.html">asterisk/dns_core.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/da7/dns__resolver_8h_source.html">asterisk/dns_resolver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/dea/dns__recurring_8h_source.html">asterisk/dns_recurring.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d07/dns__internal_8h_source.html">asterisk/dns_internal.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_dns_recurring.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d45/test__dns__recurring_8c__incl.png" border="0" usemap="#test__dns__recurring_8c" alt=""/></div>
<map name="test__dns__recurring_8c" id="test__dns__recurring_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="979,162,1063,189"/>
<area shape="rect" id="node24" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="1434,80,1547,107"/>
<area shape="rect" id="node30" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1609,162,1745,189"/>
<area shape="rect" id="node31" href="../../d6/d51/dns__core_8h.html" title="Core DNS API. " alt="" coords="1623,80,1769,107"/>
<area shape="rect" id="node35" href="../../d9/da7/dns__resolver_8h.html" title="DNS Resolver API. " alt="" coords="1793,80,1961,107"/>
<area shape="rect" id="node36" href="../../de/dea/dns__recurring_8h.html" title="DNS Recurring Resolution API. " alt="" coords="1986,80,2161,107"/>
<area shape="rect" id="node37" href="../../d4/d07/dns__internal_8h.html" title="Internal DNS structure definitions. " alt="" coords="2185,80,2351,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="352,244,507,271"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="881,244,1018,271"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="1042,244,1177,271"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="5,319,152,345"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="177,319,319,345"/>
<area shape="rect" id="node25" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1484,162,1585,189"/>
<area shape="rect" id="node27" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1411,244,1541,271"/>
<area shape="rect" id="node26" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1566,244,1717,271"/>
<area shape="rect" id="node28" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1595,319,1709,345"/>
<area shape="rect" id="node29" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1665,393,1791,420"/>
<area shape="rect" id="node32" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="1820,162,1967,189"/>
<area shape="rect" id="node38" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="2125,162,2251,189"/>
<area shape="rect" id="node39" href="../../d7/d38/dns__query__set_8h.html" title="DNS Query Set API. " alt="" coords="2275,155,2418,196"/>
</map>
</div>
</div>
<p><a href="../../d5/d36/test__dns__recurring_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d69/structrecurring__data.html">recurring_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afc97a77c6a0610ac45975194f89a1e96"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#afc97a77c6a0610ac45975194f89a1e96">DNS_ANSWER</a>&#160;&#160;&#160;&quot;Yes sirree&quot;</td></tr>
<tr class="separator:afc97a77c6a0610ac45975194f89a1e96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31888cf993f4e4e7afbec462ea65e6fc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#a31888cf993f4e4e7afbec462ea65e6fc">DNS_ANSWER_SIZE</a>&#160;&#160;&#160;strlen(<a class="el" href="../../d5/d36/test__dns__recurring_8c.html#afc97a77c6a0610ac45975194f89a1e96">DNS_ANSWER</a>)</td></tr>
<tr class="separator:a31888cf993f4e4e7afbec462ea65e6fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a942a4f4e70e8fe73d041ab6b2670066d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#a942a4f4e70e8fe73d041ab6b2670066d">AST_TEST_DEFINE</a> (recurring_query)</td></tr>
<tr class="separator:a942a4f4e70e8fe73d041ab6b2670066d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5da4344d7bbd617ae792f9762a2f775e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#a5da4344d7bbd617ae792f9762a2f775e">AST_TEST_DEFINE</a> (recurring_query_off_nominal)</td></tr>
<tr class="separator:a5da4344d7bbd617ae792f9762a2f775e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49188f80109cdaa4a250e90fe5e62264"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#a49188f80109cdaa4a250e90fe5e62264">AST_TEST_DEFINE</a> (recurring_query_cancel_between)</td></tr>
<tr class="separator:a49188f80109cdaa4a250e90fe5e62264"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a386b2c315b4c0d3f053f1eddf3b8751b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#a386b2c315b4c0d3f053f1eddf3b8751b">AST_TEST_DEFINE</a> (recurring_query_cancel_during)</td></tr>
<tr class="separator:a386b2c315b4c0d3f053f1eddf3b8751b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed3c37596cb5a728433115e6d427b92d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#aed3c37596cb5a728433115e6d427b92d">async_callback</a> (const struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="separator:aed3c37596cb5a728433115e6d427b92d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9d18ca4fc298a6c1590a3b76c092aab"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#af9d18ca4fc298a6c1590a3b76c092aab">fail_resolve</a> (struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="separator:af9d18ca4fc298a6c1590a3b76c092aab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab509b090f00665ea27ed454da370b35c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#ab509b090f00665ea27ed454da370b35c">recurring_cancel</a> (struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="memdesc:ab509b090f00665ea27ed454da370b35c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolver's cancel() method.  <a href="#ab509b090f00665ea27ed454da370b35c">More...</a><br /></td></tr>
<tr class="separator:ab509b090f00665ea27ed454da370b35c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdf9e9302270946644f5a364c8084897"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/d69/structrecurring__data.html">recurring_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#afdf9e9302270946644f5a364c8084897">recurring_data_alloc</a> (void)</td></tr>
<tr class="separator:afdf9e9302270946644f5a364c8084897"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaac4f4650a6f43a27d53a38fbe2ba238"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#aaac4f4650a6f43a27d53a38fbe2ba238">recurring_data_destructor</a> (void *obj)</td></tr>
<tr class="separator:aaac4f4650a6f43a27d53a38fbe2ba238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addd3fe6a0247da540b18af1cfa855b93"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#addd3fe6a0247da540b18af1cfa855b93">recurring_resolve</a> (struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="memdesc:addd3fe6a0247da540b18af1cfa855b93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolver's resolve() method.  <a href="#addd3fe6a0247da540b18af1cfa855b93">More...</a><br /></td></tr>
<tr class="separator:addd3fe6a0247da540b18af1cfa855b93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2607b002d7ef2ee9587fc97f431dda66"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#a2607b002d7ef2ee9587fc97f431dda66">resolution_thread</a> (void *dns_query)</td></tr>
<tr class="memdesc:a2607b002d7ef2ee9587fc97f431dda66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread that performs asynchronous resolution.  <a href="#a2607b002d7ef2ee9587fc97f431dda66">More...</a><br /></td></tr>
<tr class="separator:a2607b002d7ef2ee9587fc97f431dda66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9297cc5991195f91e0753ab66e8ea1c4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#a9297cc5991195f91e0753ab66e8ea1c4">stub_callback</a> (const struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="separator:a9297cc5991195f91e0753ab66e8ea1c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f41ce4b5edac703c91c6aa4aba14a5d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#a5f41ce4b5edac703c91c6aa4aba14a5d">stub_cancel</a> (struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="separator:a5f41ce4b5edac703c91c6aa4aba14a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a233cffe0079e7d40569cbd1d572093a1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#a233cffe0079e7d40569cbd1d572093a1">wait_for_resolution</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, struct <a class="el" href="../../d7/d69/structrecurring__data.html">recurring_data</a> *rdata, int expected_lapse, int num_resolves, int num_completed, int canceled)</td></tr>
<tr class="memdesc:a233cffe0079e7d40569cbd1d572093a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for a successful resolution to complete.  <a href="#a233cffe0079e7d40569cbd1d572093a1">More...</a><br /></td></tr>
<tr class="separator:a233cffe0079e7d40569cbd1d572093a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Recurring DNS query <a class="el" href="../../de/da6/structtests.html">tests</a>&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13bbe6afd2ec5a375f35dfbcee8ed341"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d36/test__dns__recurring_8c.html#a13bbe6afd2ec5a375f35dfbcee8ed341">recurring_resolver</a></td></tr>
<tr class="separator:a13bbe6afd2ec5a375f35dfbcee8ed341"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afc97a77c6a0610ac45975194f89a1e96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc97a77c6a0610ac45975194f89a1e96">&#9670;&nbsp;</a></span>DNS_ANSWER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DNS_ANSWER&#160;&#160;&#160;&quot;Yes sirree&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00080">80</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00093">resolution_thread()</a>.</p>

</div>
</div>
<a id="a31888cf993f4e4e7afbec462ea65e6fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31888cf993f4e4e7afbec462ea65e6fc">&#9670;&nbsp;</a></span>DNS_ANSWER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DNS_ANSWER_SIZE&#160;&#160;&#160;strlen(<a class="el" href="../../d5/d36/test__dns__recurring_8c.html#afc97a77c6a0610ac45975194f89a1e96">DNS_ANSWER</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00081">81</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00093">resolution_thread()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00647">647</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00647">647</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00647">647</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

</div>
</div>
<a id="a942a4f4e70e8fe73d041ab6b2670066d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a942a4f4e70e8fe73d041ab6b2670066d">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">recurring_query&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00269">269</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/dad/dns__recurring_8c_source.html#l00109">ast_dns_resolve_recurring()</a>, <a class="el" href="../../d8/dad/dns__recurring_8c_source.html#l00138">ast_dns_resolve_recurring_cancel()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00630">ast_dns_resolver_register()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00680">ast_dns_resolver_unregister()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00257">async_callback()</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00065">recurring_data_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00205">wait_for_resolution()</a>.</p>
<div class="fragment"><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;{</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a> *, recurring_query, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d69/structrecurring__data.html">recurring_data</a> *, rdata, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <span class="keywordtype">int</span> expected_lapse;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;recurring_query&quot;</span>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/dns/recurring/&quot;</span>;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test nominal asynchronous recurring DNS queries&quot;</span>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;         <span class="stringliteral">&quot;This tests nominal recurring queries in the following ways:\n&quot;</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;         <span class="stringliteral">&quot;\t* An asynchronous query is sent to a mock resolver\n&quot;</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;         <span class="stringliteral">&quot;\t* The mock resolver returns two records with different TTLs\n&quot;</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;         <span class="stringliteral">&quot;\t* We ensure that the query re-occurs according to the lower of the TTLs\n&quot;</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;         <span class="stringliteral">&quot;\t* The mock resolver returns two records, this time with different TTLs\n&quot;</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;         <span class="stringliteral">&quot;\t  from the first time the query was resolved\n&quot;</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;         <span class="stringliteral">&quot;\t* We ensure that the query re-occurs according to the new lower TTL&quot;</span>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a>(&amp;<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a13bbe6afd2ec5a375f35dfbcee8ed341">recurring_resolver</a>)) {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to register recurring DNS resolver\n&quot;</span>);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   rdata = <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#afdf9e9302270946644f5a364c8084897">recurring_data_alloc</a>();</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   <span class="keywordflow">if</span> (!rdata) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to allocate data necessary for recurring test\n&quot;</span>);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   expected_lapse = 0;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   rdata-&gt;ttl1 = 5;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   rdata-&gt;ttl2 = 20;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   recurring_query = <a class="code" href="../../de/dea/dns__recurring_8h.html#acf19a61369e464bcaa0c2e53eef04b57">ast_dns_resolve_recurring</a>(<span class="stringliteral">&quot;asterisk.org&quot;</span>, T_A, C_IN, <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#aed3c37596cb5a728433115e6d427b92d">async_callback</a>, rdata);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordflow">if</span> (!recurring_query) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to create recurring DNS query\n&quot;</span>);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <span class="comment">/* This should be near instantaneous */</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a233cffe0079e7d40569cbd1d572093a1">wait_for_resolution</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, rdata, expected_lapse, 1, 1, 0)) {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   expected_lapse = rdata-&gt;ttl1;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   rdata-&gt;ttl1 = 45;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   rdata-&gt;ttl2 = 10;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   <span class="comment">/* This should take approximately 5 seconds */</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a233cffe0079e7d40569cbd1d572093a1">wait_for_resolution</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, rdata, expected_lapse, 2, 2, 0)) {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   expected_lapse = rdata-&gt;ttl2;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   <span class="comment">/* This should take approximately 10 seconds */</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a233cffe0079e7d40569cbd1d572093a1">wait_for_resolution</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, rdata, expected_lapse, 3, 3, 0)) {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   <span class="keywordflow">if</span> (recurring_query) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="comment">/* XXX I don&#39;t like calling this here since I&#39;m not testing</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">       * canceling recurring queries, but I&#39;m forced into it here</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <a class="code" href="../../de/dea/dns__recurring_8h.html#a5ad6283f06f9607297f81d879ead1c62">ast_dns_resolve_recurring_cancel</a>(recurring_query);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a>(&amp;<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a13bbe6afd2ec5a375f35dfbcee8ed341">recurring_resolver</a>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}</div><div class="ttc" id="structrecurring__data_html"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html">recurring_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00036">test_dns_recurring.c:36</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_a13bbe6afd2ec5a375f35dfbcee8ed341"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#a13bbe6afd2ec5a375f35dfbcee8ed341">recurring_resolver</a></div><div class="ttdeci">static struct ast_dns_resolver recurring_resolver</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00185">test_dns_recurring.c:185</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_aef7d827099f07e77891ab28255079399"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a></div><div class="ttdeci">void ast_dns_resolver_unregister(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Unregister a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00680">dns_core.c:680</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_afdf9e9302270946644f5a364c8084897"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#afdf9e9302270946644f5a364c8084897">recurring_data_alloc</a></div><div class="ttdeci">static struct recurring_data * recurring_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00065">test_dns_recurring.c:65</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="dns__recurring_8h_html_acf19a61369e464bcaa0c2e53eef04b57"><div class="ttname"><a href="../../de/dea/dns__recurring_8h.html#acf19a61369e464bcaa0c2e53eef04b57">ast_dns_resolve_recurring</a></div><div class="ttdeci">struct ast_dns_query_recurring * ast_dns_resolve_recurring(const char *name, int rr_type, int rr_class, ast_dns_resolve_callback callback, void *data)</div><div class="ttdoc">Asynchronously resolve a DNS query, and continue resolving it according to the lowest TTL available...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dad/dns__recurring_8c_source.html#l00109">dns_recurring.c:109</a></div></div>
<div class="ttc" id="dns__recurring_8h_html_a5ad6283f06f9607297f81d879ead1c62"><div class="ttname"><a href="../../de/dea/dns__recurring_8h.html#a5ad6283f06f9607297f81d879ead1c62">ast_dns_resolve_recurring_cancel</a></div><div class="ttdeci">int ast_dns_resolve_recurring_cancel(struct ast_dns_query_recurring *recurring)</div><div class="ttdoc">Cancel an asynchronous recurring DNS resolution. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dad/dns__recurring_8c_source.html#l00138">dns_recurring.c:138</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_a233cffe0079e7d40569cbd1d572093a1"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#a233cffe0079e7d40569cbd1d572093a1">wait_for_resolution</a></div><div class="ttdeci">static int wait_for_resolution(struct ast_test *test, struct recurring_data *rdata, int expected_lapse, int num_resolves, int num_completed, int canceled)</div><div class="ttdoc">Wait for a successful resolution to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00205">test_dns_recurring.c:205</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a7cf990e0d32f790b61b1cdffc6f005a2"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a></div><div class="ttdeci">int ast_dns_resolver_register(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Register a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00630">dns_core.c:630</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_aed3c37596cb5a728433115e6d427b92d"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#aed3c37596cb5a728433115e6d427b92d">async_callback</a></div><div class="ttdeci">static void async_callback(const struct ast_dns_query *query)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00257">test_dns_recurring.c:257</a></div></div>
<div class="ttc" id="structast__dns__query__recurring_html"><div class="ttname"><a href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a></div><div class="ttdoc">A recurring DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00157">dns_internal.h:157</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5da4344d7bbd617ae792f9762a2f775e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5da4344d7bbd617ae792f9762a2f775e">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">recurring_query_off_nominal&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00368">368</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d8/dad/dns__recurring_8c_source.html#l00109">ast_dns_resolve_recurring()</a>, <a class="el" href="../../d8/dad/dns__recurring_8c_source.html#l00138">ast_dns_resolve_recurring_cancel()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00630">ast_dns_resolver_register()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00680">ast_dns_resolver_unregister()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00353">fail_resolve()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d9/da7/dns__resolver_8h_source.html#l00034">ast_dns_resolver::name</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00046">recurring_data::resolves</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00363">stub_callback()</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00358">stub_cancel()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;{</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a> terrible_resolver = {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      .<a class="code" href="../../de/d6f/structast__dns__resolver.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <span class="stringliteral">&quot;Harold P. Warren&#39;s Filmography&quot;</span>,</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      .priority = 0,</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      .resolve = <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#af9d18ca4fc298a6c1590a3b76c092aab">fail_resolve</a>,</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      .cancel = <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a5f41ce4b5edac703c91c6aa4aba14a5d">stub_cancel</a>,</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   };</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a> *recurring;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   <span class="keyword">struct </span>dns_resolve_data {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="keywordtype">int</span> rr_type;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keywordtype">int</span> rr_class;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <a class="code" href="../../d6/d51/dns__core_8h.html#a64f08db76c6a6c41dbf6603bbc333b93">ast_dns_resolve_callback</a> callback;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   } resolves [] = {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      { <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,           T_A,       C_IN,      <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a9297cc5991195f91e0753ab66e8ea1c4">stub_callback</a> },</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      { <span class="stringliteral">&quot;asterisk.org&quot;</span>, -1,        C_IN,      stub_callback },</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      { <span class="stringliteral">&quot;asterisk.org&quot;</span>, 65536 + 1, C_IN,      stub_callback },</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      { <span class="stringliteral">&quot;asterisk.org&quot;</span>, T_A,       -1,        stub_callback },</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      { <span class="stringliteral">&quot;asterisk.org&quot;</span>, T_A,       65536 + 1, stub_callback },</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      { <span class="stringliteral">&quot;asterisk.org&quot;</span>, T_A,       C_IN,      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   };</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;recurring_query_off_nominal&quot;</span>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/dns/recurring/&quot;</span>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test off-nominal recurring DNS resolution&quot;</span>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;         <span class="stringliteral">&quot;This test performs several off-nominal recurring DNS resolutions:\n&quot;</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;         <span class="stringliteral">&quot;\t* Attempt resolution with NULL name\n&quot;</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;         <span class="stringliteral">&quot;\t* Attempt resolution with invalid RR type\n&quot;</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;         <span class="stringliteral">&quot;\t* Attempt resolution with invalid RR class\n&quot;</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;         <span class="stringliteral">&quot;\t* Attempt resolution with NULL callback pointer\n&quot;</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;         <span class="stringliteral">&quot;\t* Attempt resolution with resolver that returns an error&quot;</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a>(&amp;<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a13bbe6afd2ec5a375f35dfbcee8ed341">recurring_resolver</a>)) {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to register test resolver\n&quot;</span>);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(resolves); ++i) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      recurring = <a class="code" href="../../de/dea/dns__recurring_8h.html#acf19a61369e464bcaa0c2e53eef04b57">ast_dns_resolve_recurring</a>(resolves[i].<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, resolves[i].rr_type, resolves[i].rr_class,</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            resolves[i].callback, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="keywordflow">if</span> (recurring) {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Successfully performed recurring resolution with invalid data\n&quot;</span>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;         <a class="code" href="../../de/dea/dns__recurring_8h.html#a5ad6283f06f9607297f81d879ead1c62">ast_dns_resolve_recurring_cancel</a>(recurring);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(recurring, -1);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a>(&amp;<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a13bbe6afd2ec5a375f35dfbcee8ed341">recurring_resolver</a>);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a>(&amp;terrible_resolver)) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to register the DNS resolver\n&quot;</span>);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   recurring = <a class="code" href="../../de/dea/dns__recurring_8h.html#acf19a61369e464bcaa0c2e53eef04b57">ast_dns_resolve_recurring</a>(<span class="stringliteral">&quot;asterisk.org&quot;</span>, T_A, C_IN, <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a9297cc5991195f91e0753ab66e8ea1c4">stub_callback</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a>(&amp;terrible_resolver);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   <span class="keywordflow">if</span> (recurring) {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Successfully performed recurring resolution with invalid data\n&quot;</span>);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <a class="code" href="../../de/dea/dns__recurring_8h.html#a5ad6283f06f9607297f81d879ead1c62">ast_dns_resolve_recurring_cancel</a>(recurring);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(recurring, -1);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_a13bbe6afd2ec5a375f35dfbcee8ed341"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#a13bbe6afd2ec5a375f35dfbcee8ed341">recurring_resolver</a></div><div class="ttdeci">static struct ast_dns_resolver recurring_resolver</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00185">test_dns_recurring.c:185</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_aef7d827099f07e77891ab28255079399"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a></div><div class="ttdeci">void ast_dns_resolver_unregister(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Unregister a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00680">dns_core.c:680</a></div></div>
<div class="ttc" id="dns__core_8h_html_a64f08db76c6a6c41dbf6603bbc333b93"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a64f08db76c6a6c41dbf6603bbc333b93">ast_dns_resolve_callback</a></div><div class="ttdeci">void(* ast_dns_resolve_callback)(const struct ast_dns_query *query)</div><div class="ttdoc">Callback invoked when a query completes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d51/dns__core_8h_source.html#l00171">dns_core.h:171</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="structast__dns__resolver_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../de/d6f/structast__dns__resolver.html#a8f8f80d37794cde9472343e4487ba3eb">ast_dns_resolver::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">The name of the resolver implementation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da7/dns__resolver_8h_source.html#l00034">dns_resolver.h:34</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="dns__recurring_8h_html_acf19a61369e464bcaa0c2e53eef04b57"><div class="ttname"><a href="../../de/dea/dns__recurring_8h.html#acf19a61369e464bcaa0c2e53eef04b57">ast_dns_resolve_recurring</a></div><div class="ttdeci">struct ast_dns_query_recurring * ast_dns_resolve_recurring(const char *name, int rr_type, int rr_class, ast_dns_resolve_callback callback, void *data)</div><div class="ttdoc">Asynchronously resolve a DNS query, and continue resolving it according to the lowest TTL available...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dad/dns__recurring_8c_source.html#l00109">dns_recurring.c:109</a></div></div>
<div class="ttc" id="dns__recurring_8h_html_a5ad6283f06f9607297f81d879ead1c62"><div class="ttname"><a href="../../de/dea/dns__recurring_8h.html#a5ad6283f06f9607297f81d879ead1c62">ast_dns_resolve_recurring_cancel</a></div><div class="ttdeci">int ast_dns_resolve_recurring_cancel(struct ast_dns_query_recurring *recurring)</div><div class="ttdoc">Cancel an asynchronous recurring DNS resolution. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dad/dns__recurring_8c_source.html#l00138">dns_recurring.c:138</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a7cf990e0d32f790b61b1cdffc6f005a2"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a></div><div class="ttdeci">int ast_dns_resolver_register(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Register a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00630">dns_core.c:630</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_af9d18ca4fc298a6c1590a3b76c092aab"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#af9d18ca4fc298a6c1590a3b76c092aab">fail_resolve</a></div><div class="ttdeci">static int fail_resolve(struct ast_dns_query *query)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00353">test_dns_recurring.c:353</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_a9297cc5991195f91e0753ab66e8ea1c4"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#a9297cc5991195f91e0753ab66e8ea1c4">stub_callback</a></div><div class="ttdeci">static void stub_callback(const struct ast_dns_query *query)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00363">test_dns_recurring.c:363</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structast__dns__resolver_html"><div class="ttname"><a href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a></div><div class="ttdoc">DNS resolver implementation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da7/dns__resolver_8h_source.html#l00032">dns_resolver.h:32</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__dns__query__recurring_html"><div class="ttname"><a href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a></div><div class="ttdoc">A recurring DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00157">dns_internal.h:157</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_a5f41ce4b5edac703c91c6aa4aba14a5d"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#a5f41ce4b5edac703c91c6aa4aba14a5d">stub_cancel</a></div><div class="ttdeci">static int stub_cancel(struct ast_dns_query *query)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00358">test_dns_recurring.c:358</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a49188f80109cdaa4a250e90fe5e62264"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49188f80109cdaa4a250e90fe5e62264">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">recurring_query_cancel_between&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00449">449</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../d8/dad/dns__recurring_8c_source.html#l00109">ast_dns_resolve_recurring()</a>, <a class="el" href="../../d8/dad/dns__recurring_8c_source.html#l00138">ast_dns_resolve_recurring_cancel()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00630">ast_dns_resolver_register()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00680">ast_dns_resolver_unregister()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00177">ast_tsnow()</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00257">async_callback()</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00065">recurring_data_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00205">wait_for_resolution()</a>.</p>
<div class="fragment"><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;{</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a> *, recurring_query, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d69/structrecurring__data.html">recurring_data</a> *, rdata, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;recurring_query_cancel_between&quot;</span>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/dns/recurring/&quot;</span>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test canceling a recurring DNS query during the downtime between queries&quot;</span>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test does the following:\n&quot;</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;         <span class="stringliteral">&quot;\t* Issue a recurring DNS query.\n&quot;</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;         <span class="stringliteral">&quot;\t* Once results have been returned, cancel the recurring query.\n&quot;</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;         <span class="stringliteral">&quot;\t* Wait a while to ensure that no more queries are occurring.&quot;</span>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a>(&amp;<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a13bbe6afd2ec5a375f35dfbcee8ed341">recurring_resolver</a>)) {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to register recurring DNS resolver\n&quot;</span>);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   rdata = <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#afdf9e9302270946644f5a364c8084897">recurring_data_alloc</a>();</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <span class="keywordflow">if</span> (!rdata) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to allocate data necessary for recurring test\n&quot;</span>);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   rdata-&gt;ttl1 = 5;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   rdata-&gt;ttl2 = 20;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   recurring_query = <a class="code" href="../../de/dea/dns__recurring_8h.html#acf19a61369e464bcaa0c2e53eef04b57">ast_dns_resolve_recurring</a>(<span class="stringliteral">&quot;asterisk.org&quot;</span>, T_A, C_IN, <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#aed3c37596cb5a728433115e6d427b92d">async_callback</a>, rdata);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <span class="keywordflow">if</span> (!recurring_query) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unable to make recurring query\n&quot;</span>);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a233cffe0079e7d40569cbd1d572093a1">wait_for_resolution</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, rdata, 0, 1, 1, 0)) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   }</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/dea/dns__recurring_8h.html#a5ad6283f06f9607297f81d879ead1c62">ast_dns_resolve_recurring_cancel</a>(recurring_query)) {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to cancel recurring query\n&quot;</span>);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   }</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   <span class="comment">/* Query has been canceled, so let&#39;s wait to make sure that we don&#39;t get</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">    * told another query has occurred.</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = <a class="code" href="../../de/df7/time_8h.html#a231d7586bf7d913fe4756047fd8def5e">ast_tsnow</a>();</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>.tv_sec += 10;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;rdata-&gt;lock);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <span class="keywordflow">while</span> (!rdata-&gt;query_complete) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;rdata-&gt;cond, &amp;rdata-&gt;lock, &amp;<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>) == ETIMEDOUT) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;rdata-&gt;lock);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="keywordflow">if</span> (rdata-&gt;query_complete) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Recurring query occurred after cancellation\n&quot;</span>);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a>(&amp;<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a13bbe6afd2ec5a375f35dfbcee8ed341">recurring_resolver</a>);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;}</div><div class="ttc" id="structrecurring__data_html"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html">recurring_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00036">test_dns_recurring.c:36</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_a13bbe6afd2ec5a375f35dfbcee8ed341"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#a13bbe6afd2ec5a375f35dfbcee8ed341">recurring_resolver</a></div><div class="ttdeci">static struct ast_dns_resolver recurring_resolver</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00185">test_dns_recurring.c:185</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_aef7d827099f07e77891ab28255079399"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a></div><div class="ttdeci">void ast_dns_resolver_unregister(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Unregister a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00680">dns_core.c:680</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_afdf9e9302270946644f5a364c8084897"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#afdf9e9302270946644f5a364c8084897">recurring_data_alloc</a></div><div class="ttdeci">static struct recurring_data * recurring_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00065">test_dns_recurring.c:65</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="dns__recurring_8h_html_acf19a61369e464bcaa0c2e53eef04b57"><div class="ttname"><a href="../../de/dea/dns__recurring_8h.html#acf19a61369e464bcaa0c2e53eef04b57">ast_dns_resolve_recurring</a></div><div class="ttdeci">struct ast_dns_query_recurring * ast_dns_resolve_recurring(const char *name, int rr_type, int rr_class, ast_dns_resolve_callback callback, void *data)</div><div class="ttdoc">Asynchronously resolve a DNS query, and continue resolving it according to the lowest TTL available...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dad/dns__recurring_8c_source.html#l00109">dns_recurring.c:109</a></div></div>
<div class="ttc" id="dns__recurring_8h_html_a5ad6283f06f9607297f81d879ead1c62"><div class="ttname"><a href="../../de/dea/dns__recurring_8h.html#a5ad6283f06f9607297f81d879ead1c62">ast_dns_resolve_recurring_cancel</a></div><div class="ttdeci">int ast_dns_resolve_recurring_cancel(struct ast_dns_query_recurring *recurring)</div><div class="ttdoc">Cancel an asynchronous recurring DNS resolution. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dad/dns__recurring_8c_source.html#l00138">dns_recurring.c:138</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_a233cffe0079e7d40569cbd1d572093a1"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#a233cffe0079e7d40569cbd1d572093a1">wait_for_resolution</a></div><div class="ttdeci">static int wait_for_resolution(struct ast_test *test, struct recurring_data *rdata, int expected_lapse, int num_resolves, int num_completed, int canceled)</div><div class="ttdoc">Wait for a successful resolution to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00205">test_dns_recurring.c:205</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a7cf990e0d32f790b61b1cdffc6f005a2"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a></div><div class="ttdeci">int ast_dns_resolver_register(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Register a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00630">dns_core.c:630</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_aed3c37596cb5a728433115e6d427b92d"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#aed3c37596cb5a728433115e6d427b92d">async_callback</a></div><div class="ttdeci">static void async_callback(const struct ast_dns_query *query)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00257">test_dns_recurring.c:257</a></div></div>
<div class="ttc" id="structast__dns__query__recurring_html"><div class="ttname"><a href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a></div><div class="ttdoc">A recurring DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00157">dns_internal.h:157</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="time_8h_html_a231d7586bf7d913fe4756047fd8def5e"><div class="ttname"><a href="../../de/df7/time_8h.html#a231d7586bf7d913fe4756047fd8def5e">ast_tsnow</a></div><div class="ttdeci">struct timespec ast_tsnow(void)</div><div class="ttdoc">Returns current timespec. Meant to avoid calling ast_tvnow() just to create a timespec from the timev...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00177">time.h:177</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a386b2c315b4c0d3f053f1eddf3b8751b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a386b2c315b4c0d3f053f1eddf3b8751b">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">recurring_query_cancel_during&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00529">529</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00203">ast_cond_wait</a>, <a class="el" href="../../d8/dad/dns__recurring_8c_source.html#l00109">ast_dns_resolve_recurring()</a>, <a class="el" href="../../d8/dad/dns__recurring_8c_source.html#l00138">ast_dns_resolve_recurring_cancel()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00630">ast_dns_resolver_register()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00680">ast_dns_resolver_unregister()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00177">ast_tsnow()</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00257">async_callback()</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00065">recurring_data_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00205">wait_for_resolution()</a>.</p>
<div class="fragment"><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;{</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a> *, recurring_query, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d69/structrecurring__data.html">recurring_data</a> *, rdata, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;recurring_query_cancel_during&quot;</span>;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/dns/recurring/&quot;</span>;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Cancel a recurring DNS query while a query is actually happening&quot;</span>;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test does the following:\n&quot;</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;         <span class="stringliteral">&quot;\t* Initiate a recurring DNS query.\n&quot;</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;         <span class="stringliteral">&quot;\t* Allow the initial query to complete, and a second query to start\n&quot;</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;         <span class="stringliteral">&quot;\t* Cancel the recurring query while the second query is executing\n&quot;</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;         <span class="stringliteral">&quot;\t* Ensure that the resolver&#39;s cancel() method was called\n&quot;</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;         <span class="stringliteral">&quot;\t* Wait a while to make sure that recurring queries are no longer occurring&quot;</span>;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a>(&amp;<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a13bbe6afd2ec5a375f35dfbcee8ed341">recurring_resolver</a>)) {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to register recurring DNS resolver\n&quot;</span>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   rdata = <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#afdf9e9302270946644f5a364c8084897">recurring_data_alloc</a>();</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <span class="keywordflow">if</span> (!rdata) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to allocate data necessary for recurring test\n&quot;</span>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   rdata-&gt;ttl1 = 5;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   rdata-&gt;ttl2 = 20;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   recurring_query = <a class="code" href="../../de/dea/dns__recurring_8h.html#acf19a61369e464bcaa0c2e53eef04b57">ast_dns_resolve_recurring</a>(<span class="stringliteral">&quot;asterisk.org&quot;</span>, T_A, C_IN, <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#aed3c37596cb5a728433115e6d427b92d">async_callback</a>, rdata);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordflow">if</span> (!recurring_query) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to make recurring DNS query\n&quot;</span>);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a233cffe0079e7d40569cbd1d572093a1">wait_for_resolution</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, rdata, 0, 1, 1, 0)) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="comment">/* Initial query has completed. Now let&#39;s make the next query expect a cancelation */</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   rdata-&gt;cancel_expected = 1;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <span class="comment">/* Wait to be told that the query should be canceled  */</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;rdata-&gt;lock);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   <span class="keywordflow">while</span> (!rdata-&gt;cancel_ready) {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;rdata-&gt;cond, &amp;rdata-&gt;lock);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   rdata-&gt;cancel_expected = 0;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;rdata-&gt;lock);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/dea/dns__recurring_8h.html#a5ad6283f06f9607297f81d879ead1c62">ast_dns_resolve_recurring_cancel</a>(recurring_query)) {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to cancel recurring DNS query\n&quot;</span>);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   <span class="comment">/* Query has been canceled. We&#39;ll be told that the query in flight has completed. */</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a233cffe0079e7d40569cbd1d572093a1">wait_for_resolution</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, rdata, 0, 2, 1, 1)) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <span class="comment">/* Now ensure that no more queries get completed after cancellation. */</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = <a class="code" href="../../de/df7/time_8h.html#a231d7586bf7d913fe4756047fd8def5e">ast_tsnow</a>();</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>.tv_sec += 10;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;rdata-&gt;lock);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <span class="keywordflow">while</span> (!rdata-&gt;query_complete) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;rdata-&gt;cond, &amp;rdata-&gt;lock, &amp;<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>) == ETIMEDOUT) {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;rdata-&gt;lock);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <span class="keywordflow">if</span> (rdata-&gt;query_complete) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Recurring query occurred after cancellation\n&quot;</span>);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   }</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a>(&amp;<a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a13bbe6afd2ec5a375f35dfbcee8ed341">recurring_resolver</a>);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;}</div><div class="ttc" id="structrecurring__data_html"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html">recurring_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00036">test_dns_recurring.c:36</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_a13bbe6afd2ec5a375f35dfbcee8ed341"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#a13bbe6afd2ec5a375f35dfbcee8ed341">recurring_resolver</a></div><div class="ttdeci">static struct ast_dns_resolver recurring_resolver</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00185">test_dns_recurring.c:185</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_aef7d827099f07e77891ab28255079399"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a></div><div class="ttdeci">void ast_dns_resolver_unregister(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Unregister a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00680">dns_core.c:680</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_afdf9e9302270946644f5a364c8084897"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#afdf9e9302270946644f5a364c8084897">recurring_data_alloc</a></div><div class="ttdeci">static struct recurring_data * recurring_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00065">test_dns_recurring.c:65</a></div></div>
<div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="dns__recurring_8h_html_acf19a61369e464bcaa0c2e53eef04b57"><div class="ttname"><a href="../../de/dea/dns__recurring_8h.html#acf19a61369e464bcaa0c2e53eef04b57">ast_dns_resolve_recurring</a></div><div class="ttdeci">struct ast_dns_query_recurring * ast_dns_resolve_recurring(const char *name, int rr_type, int rr_class, ast_dns_resolve_callback callback, void *data)</div><div class="ttdoc">Asynchronously resolve a DNS query, and continue resolving it according to the lowest TTL available...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dad/dns__recurring_8c_source.html#l00109">dns_recurring.c:109</a></div></div>
<div class="ttc" id="dns__recurring_8h_html_a5ad6283f06f9607297f81d879ead1c62"><div class="ttname"><a href="../../de/dea/dns__recurring_8h.html#a5ad6283f06f9607297f81d879ead1c62">ast_dns_resolve_recurring_cancel</a></div><div class="ttdeci">int ast_dns_resolve_recurring_cancel(struct ast_dns_query_recurring *recurring)</div><div class="ttdoc">Cancel an asynchronous recurring DNS resolution. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dad/dns__recurring_8c_source.html#l00138">dns_recurring.c:138</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_a233cffe0079e7d40569cbd1d572093a1"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#a233cffe0079e7d40569cbd1d572093a1">wait_for_resolution</a></div><div class="ttdeci">static int wait_for_resolution(struct ast_test *test, struct recurring_data *rdata, int expected_lapse, int num_resolves, int num_completed, int canceled)</div><div class="ttdoc">Wait for a successful resolution to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00205">test_dns_recurring.c:205</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a7cf990e0d32f790b61b1cdffc6f005a2"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a></div><div class="ttdeci">int ast_dns_resolver_register(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Register a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00630">dns_core.c:630</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_aed3c37596cb5a728433115e6d427b92d"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#aed3c37596cb5a728433115e6d427b92d">async_callback</a></div><div class="ttdeci">static void async_callback(const struct ast_dns_query *query)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00257">test_dns_recurring.c:257</a></div></div>
<div class="ttc" id="structast__dns__query__recurring_html"><div class="ttname"><a href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a></div><div class="ttdoc">A recurring DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00157">dns_internal.h:157</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="time_8h_html_a231d7586bf7d913fe4756047fd8def5e"><div class="ttname"><a href="../../de/df7/time_8h.html#a231d7586bf7d913fe4756047fd8def5e">ast_tsnow</a></div><div class="ttdeci">struct timespec ast_tsnow(void)</div><div class="ttdoc">Returns current timespec. Meant to avoid calling ast_tvnow() just to create a timespec from the timev...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00177">time.h:177</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed3c37596cb5a728433115e6d427b92d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed3c37596cb5a728433115e6d427b92d">&#9670;&nbsp;</a></span>async_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void async_callback </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00257">257</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00072">ast_dns_query_get_data()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00054">recurring_data::cond</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00053">recurring_data::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00042">recurring_data::query_complete</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00269">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d69/structrecurring__data.html">recurring_data</a> *rdata = <a class="code" href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a>(query);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(rdata != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#abe355af6efe0fff89eb152a02b35e973">query_complete</a> = 1;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;}</div><div class="ttc" id="structrecurring__data_html"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html">recurring_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00036">test_dns_recurring.c:36</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="dns__core_8h_html_a4c14cc60e6bf38af12b6af632ffb1fff"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a></div><div class="ttdeci">void * ast_dns_query_get_data(const struct ast_dns_query *query)</div><div class="ttdoc">Get the user specific data of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00072">dns_core.c:72</a></div></div>
<div class="ttc" id="structrecurring__data_html_abe355af6efe0fff89eb152a02b35e973"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#abe355af6efe0fff89eb152a02b35e973">recurring_data::query_complete</a></div><div class="ttdeci">int query_complete</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00042">test_dns_recurring.c:42</a></div></div>
<div class="ttc" id="structrecurring__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">recurring_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00053">test_dns_recurring.c:53</a></div></div>
<div class="ttc" id="structrecurring__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a1c7181c39f99ee801943a0d0aa9872b9">recurring_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00054">test_dns_recurring.c:54</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9d18ca4fc298a6c1590a3b76c092aab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9d18ca4fc298a6c1590a3b76c092aab">&#9670;&nbsp;</a></span>fail_resolve()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fail_resolve </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00353">353</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00368">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;{</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00637">637</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00127">AST_TEST_REGISTER</a>.</p>
<div class="fragment"><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;{</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(recurring_query);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(recurring_query_off_nominal);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(recurring_query_cancel_between);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(recurring_query_cancel_during);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a34f64a69c09d98ceb693b077efd7ef97"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a></div><div class="ttdeci">#define AST_TEST_REGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00127">test.h:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab509b090f00665ea27ed454da370b35c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab509b090f00665ea27ed454da370b35c">&#9670;&nbsp;</a></span>recurring_cancel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int recurring_cancel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resolver's cancel() method. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">query</td><td>The query to cancel </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00172">172</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00072">ast_dns_query_get_data()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00052">recurring_data::canceled</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00054">recurring_data::cond</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00053">recurring_data::lock</a>, and <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00161">ast_dns_query_recurring::user_data</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a> *recurring = <a class="code" href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a>(query);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d69/structrecurring__data.html">recurring_data</a> *rdata = recurring-&gt;<a class="code" href="../../d3/d8e/structast__dns__query__recurring.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a>;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a7a04d6ad2bbf6f268250358467407c37">canceled</a> = 1;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;}</div><div class="ttc" id="structrecurring__data_html"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html">recurring_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00036">test_dns_recurring.c:36</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structast__dns__query__recurring_html_a0f53d287ac7c064d1a49d4bd93ca1cb9"><div class="ttname"><a href="../../d3/d8e/structast__dns__query__recurring.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">ast_dns_query_recurring::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdoc">User-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00161">dns_internal.h:161</a></div></div>
<div class="ttc" id="dns__core_8h_html_a4c14cc60e6bf38af12b6af632ffb1fff"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a></div><div class="ttdeci">void * ast_dns_query_get_data(const struct ast_dns_query *query)</div><div class="ttdoc">Get the user specific data of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00072">dns_core.c:72</a></div></div>
<div class="ttc" id="structrecurring__data_html_a7a04d6ad2bbf6f268250358467407c37"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a7a04d6ad2bbf6f268250358467407c37">recurring_data::canceled</a></div><div class="ttdeci">int canceled</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00052">test_dns_recurring.c:52</a></div></div>
<div class="ttc" id="structast__dns__query__recurring_html"><div class="ttname"><a href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a></div><div class="ttdoc">A recurring DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00157">dns_internal.h:157</a></div></div>
<div class="ttc" id="structrecurring__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">recurring_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00053">test_dns_recurring.c:53</a></div></div>
<div class="ttc" id="structrecurring__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a1c7181c39f99ee801943a0d0aa9872b9">recurring_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00054">test_dns_recurring.c:54</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afdf9e9302270946644f5a364c8084897"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdf9e9302270946644f5a364c8084897">&#9670;&nbsp;</a></span>recurring_data_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d7/d69/structrecurring__data.html">recurring_data</a>* recurring_data_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00065">65</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00054">recurring_data::cond</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00053">recurring_data::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00057">recurring_data_destructor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00269">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d69/structrecurring__data.html">recurring_data</a> *rdata;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   rdata = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*rdata), <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#aaac4f4650a6f43a27d53a38fbe2ba238">recurring_data_destructor</a>);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;   <span class="keywordflow">if</span> (!rdata) {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;   }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;   <span class="keywordflow">return</span> rdata;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div><div class="ttc" id="structrecurring__data_html"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html">recurring_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00036">test_dns_recurring.c:36</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_aaac4f4650a6f43a27d53a38fbe2ba238"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#aaac4f4650a6f43a27d53a38fbe2ba238">recurring_data_destructor</a></div><div class="ttdeci">static void recurring_data_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00057">test_dns_recurring.c:57</a></div></div>
<div class="ttc" id="structrecurring__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">recurring_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00053">test_dns_recurring.c:53</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="structrecurring__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a1c7181c39f99ee801943a0d0aa9872b9">recurring_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00054">test_dns_recurring.c:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaac4f4650a6f43a27d53a38fbe2ba238"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaac4f4650a6f43a27d53a38fbe2ba238">&#9670;&nbsp;</a></span>recurring_data_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void recurring_data_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00057">57</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00054">recurring_data::cond</a>, and <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00053">recurring_data::lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00065">recurring_data_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d69/structrecurring__data.html">recurring_data</a> *rdata = obj;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div><div class="ttc" id="structrecurring__data_html"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html">recurring_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00036">test_dns_recurring.c:36</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="structrecurring__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">recurring_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00053">test_dns_recurring.c:53</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="structrecurring__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a1c7181c39f99ee801943a0d0aa9872b9">recurring_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00054">test_dns_recurring.c:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="addd3fe6a0247da540b18af1cfa855b93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addd3fe6a0247da540b18af1cfa855b93">&#9670;&nbsp;</a></span>recurring_resolve()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int recurring_resolve </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resolver's resolve() method. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">query</td><td>The query that is to be resolved </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successfully created thread to perform the resolution </td></tr>
    <tr><td class="paramname">non-zero</td><td>Failed to create resolution thread </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00155">155</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00072">ast_dns_query_get_data()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00563">ast_pthread_create_detached</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00093">resolution_thread()</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00046">recurring_data::resolves</a>, and <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00161">ast_dns_query_recurring::user_data</a>.</p>
<div class="fragment"><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a> *recurring = <a class="code" href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a>(query);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d69/structrecurring__data.html">recurring_data</a> *rdata = recurring-&gt;<a class="code" href="../../d3/d8e/structast__dns__query__recurring.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   pthread_t resolver_thread;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(rdata != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   ++rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a0ec75a485ab57fcee968ddec3bbe229e">resolves</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a>(&amp;resolver_thread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a2607b002d7ef2ee9587fc97f431dda66">resolution_thread</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(query));</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div><div class="ttc" id="structrecurring__data_html"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html">recurring_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00036">test_dns_recurring.c:36</a></div></div>
<div class="ttc" id="utils_8h_html_a832647380b1f97e7ac1b4492f8816d46"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a></div><div class="ttdeci">#define ast_pthread_create_detached(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00563">utils.h:563</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__dns__query__recurring_html_a0f53d287ac7c064d1a49d4bd93ca1cb9"><div class="ttname"><a href="../../d3/d8e/structast__dns__query__recurring.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">ast_dns_query_recurring::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdoc">User-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00161">dns_internal.h:161</a></div></div>
<div class="ttc" id="dns__core_8h_html_a4c14cc60e6bf38af12b6af632ffb1fff"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a></div><div class="ttdeci">void * ast_dns_query_get_data(const struct ast_dns_query *query)</div><div class="ttdoc">Get the user specific data of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00072">dns_core.c:72</a></div></div>
<div class="ttc" id="structrecurring__data_html_a0ec75a485ab57fcee968ddec3bbe229e"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a0ec75a485ab57fcee968ddec3bbe229e">recurring_data::resolves</a></div><div class="ttdeci">int resolves</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00046">test_dns_recurring.c:46</a></div></div>
<div class="ttc" id="structast__dns__query__recurring_html"><div class="ttname"><a href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a></div><div class="ttdoc">A recurring DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00157">dns_internal.h:157</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_a2607b002d7ef2ee9587fc97f431dda66"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#a2607b002d7ef2ee9587fc97f431dda66">resolution_thread</a></div><div class="ttdeci">static void * resolution_thread(void *dns_query)</div><div class="ttdoc">Thread that performs asynchronous resolution. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00093">test_dns_recurring.c:93</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2607b002d7ef2ee9587fc97f431dda66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2607b002d7ef2ee9587fc97f431dda66">&#9670;&nbsp;</a></span>resolution_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* resolution_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dns_query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thread that performs asynchronous resolution. </p>
<p>This thread uses the query's user data to determine how to perform the resolution. The query may either be canceled or it may be completed with records.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dns_query</td><td>The <a class="el" href="../../dd/daa/structast__dns__query.html" title="A DNS query. ">ast_dns_query</a> that is being performed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00093">93</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00203">ast_cond_wait</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00072">ast_dns_query_get_data()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00535">ast_dns_resolver_add_record()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00599">ast_dns_resolver_completed()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00456">ast_dns_resolver_set_result()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00048">recurring_data::cancel_expected</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00050">recurring_data::cancel_ready</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00052">recurring_data::canceled</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00044">recurring_data::complete_resolutions</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00054">recurring_data::cond</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00080">DNS_ANSWER</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00081">DNS_ANSWER_SIZE</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00053">recurring_data::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00038">recurring_data::ttl1</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00040">recurring_data::ttl2</a>, and <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00161">ast_dns_query_recurring::user_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00155">recurring_resolve()</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query = dns_query;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *ADDR1 = <span class="stringliteral">&quot;127.0.0.1&quot;</span>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> ADDR1_BUFSIZE = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>in_addr);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   <span class="keywordtype">char</span> addr1_buf[ADDR1_BUFSIZE];</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *ADDR2 = <span class="stringliteral">&quot;192.168.0.1&quot;</span>;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> ADDR2_BUFSIZE = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>in_addr);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   <span class="keywordtype">char</span> addr2_buf[ADDR2_BUFSIZE];</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a> *recurring = <a class="code" href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a>(query);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d69/structrecurring__data.html">recurring_data</a> *rdata = recurring-&gt;<a class="code" href="../../d3/d8e/structast__dns__query__recurring.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(rdata != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <span class="comment">/* Canceling is an interesting dance. This thread needs to signal that it is</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">    * ready to be canceled. Then it needs to wait until the query is actually canceled.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   <span class="keywordflow">if</span> (rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#afaa5c7ceb0e885fd504a7fa590843f8f">cancel_expected</a>) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#aa629dfd59e5ed02f471499ec4e681475">cancel_ready</a> = 1;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordflow">while</span> (!rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a7a04d6ad2bbf6f268250358467407c37">canceled</a>) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, &amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <a class="code" href="../../d9/da7/dns__resolver_8h.html#a3eae81285310e1c64e8cb9e59e79d2e9">ast_dns_resolver_completed</a>(query);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(query, -1);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   <span class="comment">/* When the query isn&#39;t canceled, we set the TTL of the results based on what</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">    * we&#39;ve been told to set it to</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#a321df8f3250551f796c99524dbcc2567">ast_dns_resolver_set_result</a>(query, 0, 0, NOERROR, <span class="stringliteral">&quot;asterisk.org&quot;</span>, <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#afc97a77c6a0610ac45975194f89a1e96">DNS_ANSWER</a>, <a class="code" href="../../d5/d36/test__dns__recurring_8c.html#a31888cf993f4e4e7afbec462ea65e6fc">DNS_ANSWER_SIZE</a>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   inet_pton(AF_INET, ADDR1, addr1_buf);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#ae88ff57fdf06ba45b931609978be2611">ast_dns_resolver_add_record</a>(query, T_A, C_IN, rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a80e1791806056dd75035dcf23eb0400f">ttl1</a>, addr1_buf, ADDR1_BUFSIZE);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   inet_pton(AF_INET, ADDR2, addr2_buf);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#ae88ff57fdf06ba45b931609978be2611">ast_dns_resolver_add_record</a>(query, T_A, C_IN, rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a5b37afd836ccaa1e3412c2b540cb539b">ttl2</a>, addr2_buf, ADDR2_BUFSIZE);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   ++rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a9ba6b065a86adc9cb2128dc65a2f34de">complete_resolutions</a>;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#a3eae81285310e1c64e8cb9e59e79d2e9">ast_dns_resolver_completed</a>(query);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(query, -1);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div><div class="ttc" id="dns__resolver_8h_html_ae88ff57fdf06ba45b931609978be2611"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#ae88ff57fdf06ba45b931609978be2611">ast_dns_resolver_add_record</a></div><div class="ttdeci">int ast_dns_resolver_add_record(struct ast_dns_query *query, int rr_type, int rr_class, int ttl, const char *data, const size_t size)</div><div class="ttdoc">Add a DNS record to the result of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00535">dns_core.c:535</a></div></div>
<div class="ttc" id="structrecurring__data_html"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html">recurring_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00036">test_dns_recurring.c:36</a></div></div>
<div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_a31888cf993f4e4e7afbec462ea65e6fc"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#a31888cf993f4e4e7afbec462ea65e6fc">DNS_ANSWER_SIZE</a></div><div class="ttdeci">#define DNS_ANSWER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00081">test_dns_recurring.c:81</a></div></div>
<div class="ttc" id="structrecurring__data_html_a9ba6b065a86adc9cb2128dc65a2f34de"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a9ba6b065a86adc9cb2128dc65a2f34de">recurring_data::complete_resolutions</a></div><div class="ttdeci">int complete_resolutions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00044">test_dns_recurring.c:44</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structrecurring__data_html_afaa5c7ceb0e885fd504a7fa590843f8f"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#afaa5c7ceb0e885fd504a7fa590843f8f">recurring_data::cancel_expected</a></div><div class="ttdeci">int cancel_expected</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00048">test_dns_recurring.c:48</a></div></div>
<div class="ttc" id="structast__dns__query__recurring_html_a0f53d287ac7c064d1a49d4bd93ca1cb9"><div class="ttname"><a href="../../d3/d8e/structast__dns__query__recurring.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">ast_dns_query_recurring::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdoc">User-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00161">dns_internal.h:161</a></div></div>
<div class="ttc" id="dns__core_8h_html_a4c14cc60e6bf38af12b6af632ffb1fff"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a></div><div class="ttdeci">void * ast_dns_query_get_data(const struct ast_dns_query *query)</div><div class="ttdoc">Get the user specific data of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00072">dns_core.c:72</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="test__dns__recurring_8c_html_afc97a77c6a0610ac45975194f89a1e96"><div class="ttname"><a href="../../d5/d36/test__dns__recurring_8c.html#afc97a77c6a0610ac45975194f89a1e96">DNS_ANSWER</a></div><div class="ttdeci">#define DNS_ANSWER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00080">test_dns_recurring.c:80</a></div></div>
<div class="ttc" id="structrecurring__data_html_a80e1791806056dd75035dcf23eb0400f"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a80e1791806056dd75035dcf23eb0400f">recurring_data::ttl1</a></div><div class="ttdeci">int ttl1</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00038">test_dns_recurring.c:38</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a3eae81285310e1c64e8cb9e59e79d2e9"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a3eae81285310e1c64e8cb9e59e79d2e9">ast_dns_resolver_completed</a></div><div class="ttdeci">void ast_dns_resolver_completed(struct ast_dns_query *query)</div><div class="ttdoc">Mark a DNS query as having been completed. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00599">dns_core.c:599</a></div></div>
<div class="ttc" id="structast__dns__query_html"><div class="ttname"><a href="../../dd/daa/structast__dns__query.html">ast_dns_query</a></div><div class="ttdoc">A DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00137">dns_internal.h:137</a></div></div>
<div class="ttc" id="structrecurring__data_html_a5b37afd836ccaa1e3412c2b540cb539b"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a5b37afd836ccaa1e3412c2b540cb539b">recurring_data::ttl2</a></div><div class="ttdeci">int ttl2</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00040">test_dns_recurring.c:40</a></div></div>
<div class="ttc" id="structrecurring__data_html_aa629dfd59e5ed02f471499ec4e681475"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#aa629dfd59e5ed02f471499ec4e681475">recurring_data::cancel_ready</a></div><div class="ttdeci">int cancel_ready</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00050">test_dns_recurring.c:50</a></div></div>
<div class="ttc" id="structrecurring__data_html_a7a04d6ad2bbf6f268250358467407c37"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a7a04d6ad2bbf6f268250358467407c37">recurring_data::canceled</a></div><div class="ttdeci">int canceled</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00052">test_dns_recurring.c:52</a></div></div>
<div class="ttc" id="structast__dns__query__recurring_html"><div class="ttname"><a href="../../d3/d8e/structast__dns__query__recurring.html">ast_dns_query_recurring</a></div><div class="ttdoc">A recurring DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00157">dns_internal.h:157</a></div></div>
<div class="ttc" id="structrecurring__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">recurring_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00053">test_dns_recurring.c:53</a></div></div>
<div class="ttc" id="structrecurring__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a1c7181c39f99ee801943a0d0aa9872b9">recurring_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00054">test_dns_recurring.c:54</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a321df8f3250551f796c99524dbcc2567"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a321df8f3250551f796c99524dbcc2567">ast_dns_resolver_set_result</a></div><div class="ttdeci">int ast_dns_resolver_set_result(struct ast_dns_query *query, unsigned int secure, unsigned int bogus, unsigned int rcode, const char *canonical, const char *answer, size_t answer_size)</div><div class="ttdoc">Set result information for a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00456">dns_core.c:456</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9297cc5991195f91e0753ab66e8ea1c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9297cc5991195f91e0753ab66e8ea1c4">&#9670;&nbsp;</a></span>stub_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stub_callback </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00363">363</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00368">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;{</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a5f41ce4b5edac703c91c6aa4aba14a5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f41ce4b5edac703c91c6aa4aba14a5d">&#9670;&nbsp;</a></span>stub_cancel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stub_cancel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00358">358</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00368">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;{</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00627">627</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/ddc/test_8h_source.html#l00128">AST_TEST_UNREGISTER</a>.</p>
<div class="fragment"><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;{</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(recurring_query);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(recurring_query_off_nominal);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(recurring_query_cancel_between);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(recurring_query_cancel_during);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;}</div><div class="ttc" id="test_8h_html_a79bc64a935b14b1b181156e5ada58ead"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a></div><div class="ttdeci">#define AST_TEST_UNREGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00128">test.h:128</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a233cffe0079e7d40569cbd1d572093a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a233cffe0079e7d40569cbd1d572093a1">&#9670;&nbsp;</a></span>wait_for_resolution()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int wait_for_resolution </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d69/structrecurring__data.html">recurring_data</a> *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>expected_lapse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_resolves</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_completed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>canceled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait for a successful resolution to complete. </p>
<p>This is called whenever a successful DNS resolution occurs. This function serves to ensure that parameters are as we expect them to be.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">test</td><td>The test being executed </td></tr>
    <tr><td class="paramname">rdata</td><td>DNS query user data </td></tr>
    <tr><td class="paramname">expected_lapse</td><td>The amount of time we expect to wait for the query to complete </td></tr>
    <tr><td class="paramname">num_resolves</td><td>The number of DNS resolutions that have been executed </td></tr>
    <tr><td class="paramname">num_completed</td><td>The number of DNS resolutions we expect to have completed successfully </td></tr>
    <tr><td class="paramname">canceled</td><td>Whether the query is expected to have been canceled </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00205">205</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00177">ast_tsnow()</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00052">recurring_data::canceled</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00044">recurring_data::complete_resolutions</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00054">recurring_data::cond</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00053">recurring_data::lock</a>, <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00042">recurring_data::query_complete</a>, and <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00046">recurring_data::resolves</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00269">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;{</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   <span class="keyword">struct </span>timespec begin;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <span class="keywordtype">int</span> secdiff;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   begin = <a class="code" href="../../de/df7/time_8h.html#a231d7586bf7d913fe4756047fd8def5e">ast_tsnow</a>();</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>.tv_sec = begin.tv_sec + 20;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>.tv_nsec = begin.tv_nsec;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <span class="keywordflow">while</span> (!rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#abe355af6efe0fff89eb152a02b35e973">query_complete</a>) {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, &amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>) == ETIMEDOUT) {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <span class="keywordflow">if</span> (!rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#abe355af6efe0fff89eb152a02b35e973">query_complete</a>) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Query timed out\n&quot;</span>);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#abe355af6efe0fff89eb152a02b35e973">query_complete</a> = 0;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = <a class="code" href="../../de/df7/time_8h.html#a231d7586bf7d913fe4756047fd8def5e">ast_tsnow</a>();</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   secdiff = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>.tv_sec - begin.tv_sec;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="comment">/* Give ourselves some wiggle room */</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   <span class="keywordflow">if</span> (secdiff &lt; expected_lapse - 2 || secdiff &gt; expected_lapse + 2) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Query did not complete in expected time\n&quot;</span>);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   <span class="keywordflow">if</span> (rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a0ec75a485ab57fcee968ddec3bbe229e">resolves</a> != num_resolves || rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a9ba6b065a86adc9cb2128dc65a2f34de">complete_resolutions</a> != num_completed) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Query has not undergone expected number of resolutions\n&quot;</span>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keywordflow">if</span> (rdata-&gt;<a class="code" href="../../d7/d69/structrecurring__data.html#a7a04d6ad2bbf6f268250358467407c37">canceled</a> != canceled) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Query was canceled unexpectedly\n&quot;</span>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Query completed in expected time frame\n&quot;</span>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structrecurring__data_html_a9ba6b065a86adc9cb2128dc65a2f34de"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a9ba6b065a86adc9cb2128dc65a2f34de">recurring_data::complete_resolutions</a></div><div class="ttdeci">int complete_resolutions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00044">test_dns_recurring.c:44</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="structrecurring__data_html_a0ec75a485ab57fcee968ddec3bbe229e"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a0ec75a485ab57fcee968ddec3bbe229e">recurring_data::resolves</a></div><div class="ttdeci">int resolves</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00046">test_dns_recurring.c:46</a></div></div>
<div class="ttc" id="structrecurring__data_html_abe355af6efe0fff89eb152a02b35e973"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#abe355af6efe0fff89eb152a02b35e973">recurring_data::query_complete</a></div><div class="ttdeci">int query_complete</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00042">test_dns_recurring.c:42</a></div></div>
<div class="ttc" id="structrecurring__data_html_a7a04d6ad2bbf6f268250358467407c37"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a7a04d6ad2bbf6f268250358467407c37">recurring_data::canceled</a></div><div class="ttdeci">int canceled</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00052">test_dns_recurring.c:52</a></div></div>
<div class="ttc" id="structrecurring__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#adf04f66344e3fb0a6f6a69bf39d19902">recurring_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00053">test_dns_recurring.c:53</a></div></div>
<div class="ttc" id="time_8h_html_a231d7586bf7d913fe4756047fd8def5e"><div class="ttname"><a href="../../de/df7/time_8h.html#a231d7586bf7d913fe4756047fd8def5e">ast_tsnow</a></div><div class="ttdeci">struct timespec ast_tsnow(void)</div><div class="ttdoc">Returns current timespec. Meant to avoid calling ast_tvnow() just to create a timespec from the timev...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00177">time.h:177</a></div></div>
<div class="ttc" id="structrecurring__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d7/d69/structrecurring__data.html#a1c7181c39f99ee801943a0d0aa9872b9">recurring_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/test__dns__recurring_8c_source.html#l00054">test_dns_recurring.c:54</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Recurring DNS query <a class="el" href="../../de/da6/structtests.html">tests</a>&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00647">647</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00647">647</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

</div>
</div>
<a id="a13bbe6afd2ec5a375f35dfbcee8ed341"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13bbe6afd2ec5a375f35dfbcee8ed341">&#9670;&nbsp;</a></span>recurring_resolver</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a> recurring_resolver</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html#l00185">185</a> of file <a class="el" href="../../d5/d36/test__dns__recurring_8c_source.html">test_dns_recurring.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:55 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
