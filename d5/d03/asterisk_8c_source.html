<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: asterisk.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">asterisk.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/d03/asterisk_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Asterisk -- An open source telephony toolkit.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 1999 - 2018, Digium, Inc.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Mark Spencer &lt;markster@digium.com&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * See http://www.asterisk.org for more information about</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the Asterisk project. Please do not directly contact</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * any of the maintainers of this project for assistance;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * the project provides a web site, mailing lists and IRC</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * channels for your use.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * This program is free software, distributed under the terms of</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * at the top of the source tree.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/* Doxygenified Copyright Header */</span><span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * \mainpage Asterisk -- The Open Source Telephony Project</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * \par Welcome</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * This documentation created by the Doxygen project clearly explains the</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * internals of the Asterisk software. This documentation contains basic</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * examples, developer documentation, support information, and information</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * for upgrading.</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> * \section community Community</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * Asterisk is a big project and has a busy community. Look at the</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * resources for questions and stick around to help answer questions.</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * \li \ref asterisk_community_resources</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * \par Developer Documentation for Asterisk</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * This is the main developer documentation for Asterisk. It is</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> * generated by running &quot;make progdocs&quot; from the Asterisk source tree.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> * In addition to the information available on the Asterisk source code,</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> * please see the appendices for information on coding guidelines,</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> * release management, commit policies, and more.</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> * \arg \ref AsteriskArchitecture</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> * \par Additional documentation</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> * \arg \ref Licensing</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"> * \arg \ref DevDoc</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"> * \arg \ref configuration_file</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"> * \arg \ref channel_drivers</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"> * \arg \ref applications</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"> * \section copyright Copyright and Author</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"> * Copyright (C) 1999 - 2021, Sangoma Technologies Corporation.</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"> * Asterisk is a &lt;a href=&quot;https://cdn.sangoma.com/wp-content/uploads/Sangoma-Trademark-Policy.pdf&quot;&gt;registered trademark&lt;/a&gt;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> * of &lt;a rel=&quot;nofollow&quot; href=&quot;http://www.sangoma.com&quot;&gt;Sangoma Technologies Corporation&lt;/a&gt;.</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"> * \author Mark Spencer &lt;markster@digium.com&gt;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> * See http://www.asterisk.org for more information about</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> * the Asterisk project. Please do not directly contact</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> * any of the maintainers of this project for assistance;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> * the project provides a web site, mailing lists, and IRC</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> * channels for your use.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"> * \page asterisk_community_resources Asterisk Community Resources</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> * \par Websites</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"> * \li http://www.asterisk.org Asterisk Homepage</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"> * \li http://wiki.asterisk.org Asterisk Wiki</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"> * \par Mailing Lists</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"> * \par</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"> * All lists: http://lists.digium.com/mailman/listinfo</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> * \li aadk-commits  SVN commits to the AADK repository</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> * \li asterisk-addons-commits   SVN commits to the Asterisk addons project</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> * \li asterisk-announce   [no description available]</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"> * \li asterisk-biz  Commercial and Business-Oriented Asterisk Discussion</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"> * \li Asterisk-BSD  Asterisk on BSD discussion</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"> * \li asterisk-bugs [no description available]</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"> * \li asterisk-commits SVN commits to the Asterisk project</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"> * \li asterisk-dev  Asterisk Developers Mailing List</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"> * \li asterisk-doc  Discussions regarding The Asterisk Documentation Project</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"> * \li asterisk-embedded   Asterisk Embedded Development</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"> * \li asterisk-gui  Asterisk GUI project discussion</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"> * \li asterisk-gui-commits   SVN commits to the Asterisk-GUI project</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> * \li asterisk-ha-clustering Asterisk High Availability and Clustering List - Non-Commercial Discussion</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> * \li Asterisk-i18n Discussion of Asterisk internationalization</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> * \li asterisk-r2   [no description available]</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> * \li asterisk-scf-commits   Commits to the Asterisk SCF project code repositories</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> * \li asterisk-scf-committee Asterisk SCF Steering Committee discussions</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> * \li asterisk-scf-dev Asterisk SCF Developers Mailing List</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"> * \li asterisk-scf-wiki-changes Changes to the Asterisk SCF space on wiki.asterisk.org</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> * \li asterisk-security   Asterisk Security Discussion</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"> * \li asterisk-speech-rec Use of speech recognition in Asterisk</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"> * \li asterisk-ss7  [no description available]</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"> * \li asterisk-users   Asterisk Users Mailing List - Non-Commercial Discussion</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"> * \li asterisk-video   Development discussion of video media support in Asterisk</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"> * \li asterisk-wiki-changes  Changes to the Asterisk space on wiki.asterisk.org</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"> * \li asterisknow   AsteriskNOW Discussion</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> * \li dahdi-commits SVN commits to the DAHDI project</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"> * \li digium-announce  Digium Product Announcements</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"> * \li Dundi   Distributed Universal Number Discovery</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"> * \li libiax2-commits  SVN commits to the libiax2 project</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"> * \li libpri-commits   SVN commits to the libpri project</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"> * \li libss7-commits   SVN commits to the libss7 project</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"> * \li svn-commits   SVN commits to the Digium repositories</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"> * \li Test-results  Results from automated testing</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"> * \li thirdparty-commits  SVN commits to the Digium third-party software repository</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"> * \li zaptel-commits   SVN commits to the Zaptel project</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"> * \par Forums</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"> * \li Forums are located at http://forums.asterisk.org/</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"> * \par IRC</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"> * \par</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"> * Use https://libera.chat IRC server to connect with Asterisk</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"> * developers and users in realtime.</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"> * \li \verbatim #asterisk \endverbatim Asterisk Users Room</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> * \li \verbatim #asterisk-dev \endverbatim Asterisk Developers Room</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> * \par More</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"> * \par</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"> * If you would like to add a resource to this list please create an issue</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"> * on the issue tracker with a patch.</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">/*! \file</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"> * \brief Top level source file for Asterisk - the Open Source PBX.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"> * Implementation of PBX core functions and CLI interface.</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">/*! \li \ref asterisk.c uses the configuration file \ref asterisk.conf</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"> * \addtogroup configuration_file</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">/*! \page asterisk.conf asterisk.conf</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"> * \verbinclude asterisk.conf.sample</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">/*** MODULEINFO</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">   &lt;support_level&gt;core&lt;/support_level&gt;</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/db2/asterisk_8h.html">asterisk.h</a>&quot;</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d78/__private_8h.html">asterisk/_private.h</a>&quot;</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor">#undef sched_setscheduler</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">#undef setpriority</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d7/d00/sched_8h.html">sched.h</a>&gt;</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#include &lt;sys/un.h&gt;</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#include &lt;sys/wait.h&gt;</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#include &lt;sys/resource.h&gt;</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#include &lt;grp.h&gt;</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#include &lt;pwd.h&gt;</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">#if defined(HAVE_SYSINFO)</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">#include &lt;sys/sysinfo.h&gt;</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">#elif defined(HAVE_SYSCTL)</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">#include &lt;sys/param.h&gt;</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">#include &lt;sys/sysctl.h&gt;</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#include &lt;sys/vmmeter.h&gt;</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#if defined(__FreeBSD__) || defined(__DragonFly__)</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">#include &lt;vm/vm_param.h&gt;</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">#if defined(HAVE_SWAPCTL)</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">#include &lt;sys/swap.h&gt;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">#include &lt;regex.h&gt;</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#include &lt;histedit.h&gt;</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#if defined(SOLARIS)</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="keywordtype">int</span> daemon(<span class="keywordtype">int</span>, <span class="keywordtype">int</span>);  <span class="comment">/* defined in libresolv of all places */</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">#include &lt;sys/loadavg.h&gt;</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">#ifdef linux</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor">#include &lt;sys/prctl.h&gt;</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor">#ifdef HAVE_CAP</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="preprocessor">#include &lt;sys/capability.h&gt;</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* HAVE_CAP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* linux */</span><span class="preprocessor"></span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">/* we define here the variables so to better agree on the prototype */</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/df2/paths_8h.html">asterisk/paths.h</a>&quot;</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d94/network_8h.html">asterisk/network.h</a>&quot;</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/db0/cli_8h.html">asterisk/cli.h</a>&quot;</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d7b/channel_8h.html">asterisk/channel.h</a>&quot;</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d39/translate_8h.html">asterisk/translate.h</a>&quot;</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/dbc/pickup_8h.html">asterisk/pickup.h</a>&quot;</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d59/acl_8h.html">asterisk/acl.h</a>&quot;</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/dc2/ulaw_8h.html">asterisk/ulaw.h</a>&quot;</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/db5/alaw_8h.html">asterisk/alaw.h</a>&quot;</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d47/callerid_8h.html">asterisk/callerid.h</a>&quot;</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/db2/image_8h.html">asterisk/image.h</a>&quot;</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/df6/tdd_8h.html">asterisk/tdd.h</a>&quot;</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d45/term_8h.html">asterisk/term.h</a>&quot;</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d45/manager_8h.html">asterisk/manager.h</a>&quot;</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d07/cdr_8h.html">asterisk/cdr.h</a>&quot;</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/de0/pbx_8h.html">asterisk/pbx.h</a>&quot;</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html">asterisk/app.h</a>&quot;</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d33/mwi_8h.html">asterisk/mwi.h</a>&quot;</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d42/lock_8h.html">asterisk/lock.h</a>&quot;</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d60/utils_8h.html">asterisk/utils.h</a>&quot;</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4d/file_8h.html">asterisk/file.h</a>&quot;</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/dac/io_8h.html">asterisk/io.h</a>&quot;</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html">asterisk/config.h</a>&quot;</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/db9/ast__version_8h.html">asterisk/ast_version.h</a>&quot;</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d90/linkedlists_8h.html">asterisk/linkedlists.h</a>&quot;</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/da2/devicestate_8h.html">asterisk/devicestate.h</a>&quot;</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/dd7/presencestate_8h.html">asterisk/presencestate.h</a>&quot;</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d16/module_8h.html">asterisk/module.h</a>&quot;</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d35/buildinfo_8h.html">asterisk/buildinfo.h</a>&quot;</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d99/xmldoc_8h.html">asterisk/xmldoc.h</a>&quot;</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/dfb/poll-compat_8h.html">asterisk/poll-compat.h</a>&quot;</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/ddc/test_8h.html">asterisk/test.h</a>&quot;</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/dde/rtp__engine_8h.html">asterisk/rtp_engine.h</a>&quot;</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d0a/format_8h.html">asterisk/format.h</a>&quot;</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/db3/aoc_8h.html">asterisk/aoc.h</a>&quot;</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d1d/uuid_8h.html">asterisk/uuid.h</a>&quot;</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d25/sorcery_8h.html">asterisk/sorcery.h</a>&quot;</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d94/bucket_8h.html">asterisk/bucket.h</a>&quot;</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d79/stasis_8h.html">asterisk/stasis.h</a>&quot;</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d05/json_8h.html">asterisk/json.h</a>&quot;</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d44/stasis__endpoints_8h.html">asterisk/stasis_endpoints.h</a>&quot;</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/df0/stasis__system_8h.html">asterisk/stasis_system.h</a>&quot;</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d29/include_2asterisk_2security__events_8h.html">asterisk/security_events.h</a>&quot;</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d61/endpoints_8h.html">asterisk/endpoints.h</a>&quot;</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d16/codec_8h.html">asterisk/codec.h</a>&quot;</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d1c/format__cache_8h.html">asterisk/format_cache.h</a>&quot;</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d16/media__cache_8h.html">asterisk/media_cache.h</a>&quot;</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d4a/astdb_8h.html">asterisk/astdb.h</a>&quot;</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d5b/options_8h.html">asterisk/options.h</a>&quot;</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d7c/utf8_8h.html">asterisk/utf8.h</a>&quot;</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor">#include &quot;../defaults.h&quot;</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">/*** DOCUMENTATION</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;FullyBooted&quot;&gt;</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_SYSTEM&quot;&gt;</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when all Asterisk initialization procedures have finished.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">            &lt;parameter name=&quot;Status&quot;&gt;</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">               &lt;para&gt;Informational message&lt;/para&gt;</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">            &lt;parameter name=&quot;Uptime&quot;&gt;</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">               &lt;para&gt;Seconds since start&lt;/para&gt;</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">            &lt;parameter name=&quot;LastReload&quot;&gt;</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">               &lt;para&gt;Seconds since last reload&lt;/para&gt;</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;Shutdown&quot;&gt;</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_SYSTEM&quot;&gt;</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when Asterisk is shutdown or restarted.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">            &lt;parameter name=&quot;Shutdown&quot;&gt;</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">               &lt;para&gt;Whether the shutdown is proceeding cleanly (all channels</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">               were hungup successfully) or uncleanly (channels will be</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">               terminated)&lt;/para&gt;</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">               &lt;enumlist&gt;</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">                  &lt;enum name=&quot;Uncleanly&quot;/&gt;</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">                  &lt;enum name=&quot;Cleanly&quot;/&gt;</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">               &lt;/enumlist&gt;</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">            &lt;parameter name=&quot;Restart&quot;&gt;</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">               &lt;para&gt;Whether or not a restart will occur.&lt;/para&gt;</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">               &lt;enumlist&gt;</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">                  &lt;enum name=&quot;True&quot;/&gt;</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">                  &lt;enum name=&quot;False&quot;/&gt;</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">               &lt;/enumlist&gt;</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor">#ifndef AF_LOCAL</span></div><div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ae24f1f9ea44fcce3affcb2137f593dc1">  292</a></span>&#160;<span class="preprocessor">#define AF_LOCAL AF_UNIX</span></div><div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a521c315ca2a2a4e6345878e84af4085e">  293</a></span>&#160;<span class="preprocessor">#define PF_LOCAL PF_UNIX</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a6d5a16b321d54d9be2b0592881329fdf">  296</a></span>&#160;<span class="preprocessor">#define AST_MAX_CONNECTS 128</span></div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a8259bbeef0c598730055df66c5e7e9e5">  297</a></span>&#160;<span class="preprocessor">#define NUM_MSGS 64</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">/*! Displayed copyright tag */</span></div><div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a850def08dc62ba3f1c34d459ff9d37c5">  300</a></span>&#160;<span class="preprocessor">#define COPYRIGHT_TAG &quot;Copyright (C) 1999 - 2021, Sangoma Technologies Corporation and others.&quot;</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">/*! \brief Welcome message when starting a CLI interface */</span></div><div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a4102c912e07db36235dbf80dc4f9728a">  303</a></span>&#160;<span class="preprocessor">#define WELCOME_MESSAGE \</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor">    ast_verbose(&quot;Asterisk %s, &quot; COPYRIGHT_TAG &quot;\n&quot; \</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="preprocessor">                &quot;Created by Mark Spencer &lt;markster@digium.com&gt;\n&quot; \</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="preprocessor">                &quot;Asterisk comes with ABSOLUTELY NO WARRANTY; type &#39;core show warranty&#39; for details.\n&quot; \</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">                &quot;This is free software, with components licensed under the GNU General Public\n&quot; \</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="preprocessor">                &quot;License version 2 and other licenses; you are welcome to redistribute it under\n&quot; \</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="preprocessor">                &quot;certain conditions. Type &#39;core show license&#39; for details.\n&quot; \</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="preprocessor">                &quot;=========================================================================\n&quot;, ast_get_version()) \</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="preprocessor"></span></div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">  312</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a> = -1;      <span class="comment">/*!&lt; UNIX Socket for allowing remote control */</span></div><div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a0de92246f6a87060b319bf4a27c2737d">  313</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a0de92246f6a87060b319bf4a27c2737d">ast_socket_is_sd</a> = 0; <span class="comment">/*!&lt; Is socket activation responsible for ast_socket? */</span></div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">  314</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a> = -1;     <span class="comment">/*!&lt; UNIX Socket for controlling another asterisk */</span></div><div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="../../d4/dc5/extconf_8c.html#ae1517891417ae2f6e398e95ae79dadf1">  315</a></span>&#160;pid_t <a class="code" href="../../d5/d03/asterisk_8c.html#ae1517891417ae2f6e398e95ae79dadf1">ast_mainpid</a>;</div><div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="../../df/d87/structconsole.html">  316</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d87/structconsole.html">console</a> {</div><div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">  317</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>;           <span class="comment">/*!&lt; File descriptor */</span></div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="../../df/d87/structconsole.html#a67bfc5276dfe3c0f1174ebc9ce9d7d31">  318</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#a67bfc5276dfe3c0f1174ebc9ce9d7d31">p</a>[2];         <span class="comment">/*!&lt; Pipe */</span></div><div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="../../df/d87/structconsole.html#aa49d6a06775253352589280dc7f30018">  319</a></span>&#160;   pthread_t <a class="code" href="../../df/d87/structconsole.html#aa49d6a06775253352589280dc7f30018">t</a>;         <span class="comment">/*!&lt; Thread of handler */</span></div><div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="../../df/d87/structconsole.html#a29128ae5c15a12dea5fe4f263ba6cec1">  320</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a>;         <span class="comment">/*!&lt; Is the console muted for logs */</span></div><div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="../../df/d87/structconsole.html#a60a34315f460179939054acaf3ed8163">  321</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#a60a34315f460179939054acaf3ed8163">uid</a>;       <span class="comment">/*!&lt; Remote user ID. */</span></div><div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="../../df/d87/structconsole.html#a6567680a890171fbaa1a026477a858d3">  322</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#a6567680a890171fbaa1a026477a858d3">gid</a>;       <span class="comment">/*!&lt; Remote group ID. */</span></div><div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="../../df/d87/structconsole.html#af74c640613d859156463a4ba7436f023">  323</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#af74c640613d859156463a4ba7436f023">levels</a>[<a class="code" href="../../d1/d8c/logger_8h.html#a3d02ffd5809bdb049c815df859bbfcf4">NUMLOGLEVELS</a>];  <span class="comment">/*!&lt; Which log levels are enabled for the console */</span><span class="comment"></span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">   /*! Verbosity level of this console. */</span></div><div class="line"><a name="l00325"></a><span class="lineno"><a class="line" href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">  325</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;};</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="../../d0/d68/structast__atexit.html">  328</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d0/d68/structast__atexit.html">ast_atexit</a> {</div><div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">  329</a></span>&#160;   void (*func)(void);</div><div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="../../d0/d68/structast__atexit.html#a2eaef6e7b886d88be1c28b39da79f7de">  330</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d68/structast__atexit.html#a2eaef6e7b886d88be1c28b39da79f7de">is_cleanup</a>;</div><div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="../../d0/d68/structast__atexit.html#ac5b1ea746b32bcaace4b664dda9a9309">  331</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../d0/d68/structast__atexit.html">ast_atexit</a>) list;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;};</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="../../dd/dca/structatexits.html#adf04f66344e3fb0a6f6a69bf39d19902">  334</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../df/d90/linkedlists_8h.html#a10f9ed9242a397abf76de1ed1fa33c3b">AST_LIST_HEAD_STATIC</a>(<a class="code" href="../../dd/dca/structatexits.html">atexits</a>, <a class="code" href="../../d0/d68/structast__atexit.html">ast_atexit</a>);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#acd462f81fa607939af36a9fa33cdbf9d">  336</a></span>&#160;<span class="keyword">struct </span>timeval <a class="code" href="../../d5/d03/asterisk_8c.html#acd462f81fa607939af36a9fa33cdbf9d">ast_startuptime</a>;</div><div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a7cdafc5a121e87659887ffc9abe36760">  337</a></span>&#160;<span class="keyword">struct </span>timeval <a class="code" href="../../d5/d03/asterisk_8c.html#a7cdafc5a121e87659887ffc9abe36760">ast_lastreloadtime</a>;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">  339</a></span>&#160;<span class="keyword">static</span> History *<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a>;</div><div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">  340</a></span>&#160;<span class="keyword">static</span> EditLine *<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>;</div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a04e7dcc4737a260fa91c5241b81c0101">  341</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a04e7dcc4737a260fa91c5241b81c0101">remotehostname</a>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">  343</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d87/structconsole.html">console</a> <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[<a class="code" href="../../d5/d03/asterisk_8c.html#a6d5a16b321d54d9be2b0592881329fdf">AST_MAX_CONNECTS</a>];</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a027ab2a74bcb1638e70418055feb57b9">ast_el_add_history</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a696f0073d9bd15b5b2b4262a6d8ec7d1">ast_el_read_history</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ac3c33bdbdf88cc876d630cd277242fbc">ast_el_write_history</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ac718cef19833170af662c53525d9c8c9">ast_el_read_default_histfile</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ae15faa0b9305355ac46a8875f99480a1">ast_el_write_default_histfile</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a4cf123ec6105d24d21de01a951b46b17">asterisk_daemon</a>(<span class="keywordtype">int</span> isroot, <span class="keyword">const</span> <span class="keywordtype">char</span> *runuser, <span class="keyword">const</span> <span class="keywordtype">char</span> *rungroup);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#aac76ac35350d1efd9ddfe5b56739c649">  354</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#aac76ac35350d1efd9ddfe5b56739c649">_argv</a>[256];</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59">  356</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {<span class="comment"></span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">   /*! Normal operation */</span></div><div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59ad56f4e18962cb2a4927acb257b5e40f6">  358</a></span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59ad56f4e18962cb2a4927acb257b5e40f6">NOT_SHUTTING_DOWN</a>,<span class="comment"></span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">   /*! Committed to shutting down.  Final phase */</span></div><div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59acf10aef13967cc149a7b37d7a4e5e693">  360</a></span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59acf10aef13967cc149a7b37d7a4e5e693">SHUTTING_DOWN_FINAL</a>,<span class="comment"></span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">   /*! Committed to shutting down.  Initial phase */</span></div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59aa864d272f8aa33e6b56ec6e2e58a08e2">  362</a></span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59aa864d272f8aa33e6b56ec6e2e58a08e2">SHUTTING_DOWN</a>,<span class="comment"></span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">    * Valid values for quit_handler() niceness below.</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">    * These shutdown/restart levels can be cancelled.</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">    * Remote console exit right now</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a12d28a6e5875c59040c79f31255b3cbd">  369</a></span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a12d28a6e5875c59040c79f31255b3cbd">SHUTDOWN_FAST</a>,<span class="comment"></span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">   /*! core stop/restart now */</span></div><div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a2a9246405d49261dae3926e7d5612d2c">  371</a></span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a2a9246405d49261dae3926e7d5612d2c">SHUTDOWN_NORMAL</a>,<span class="comment"></span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">   /*! core stop/restart gracefully */</span></div><div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a704981d4ddccbee50fabd8bed58b01dd">  373</a></span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a704981d4ddccbee50fabd8bed58b01dd">SHUTDOWN_NICE</a>,<span class="comment"></span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">   /*! core stop/restart when convenient */</span></div><div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59aa3d6008dbedd1154cfadf33b24f3efa6">  375</a></span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59aa3d6008dbedd1154cfadf33b24f3efa6">SHUTDOWN_REALLY_NICE</a></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;} <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59">shutdown_nice_t</a>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">  378</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59">shutdown_nice_t</a> <a class="code" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a> = <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59ad56f4e18962cb2a4927acb257b5e40f6">NOT_SHUTTING_DOWN</a>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">/*! Prevent new channel allocation for shutdown. */</span></div><div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a775b228bc60d1c59c296268f70a1252d">  381</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a775b228bc60d1c59c296268f70a1252d">shutdown_pending</a>;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a8fbb0f40e9c839384d728aa8e0958dfb">  383</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a8fbb0f40e9c839384d728aa8e0958dfb">restartnow</a>;</div><div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">  384</a></span>&#160;<span class="keyword">static</span> pthread_t <a class="code" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a5e99a7d549dd33ed14b3bb1a673f1f47">  385</a></span>&#160;<span class="keyword">static</span> pthread_t <a class="code" href="../../d5/d03/asterisk_8c.html#a5e99a7d549dd33ed14b3bb1a673f1f47">mon_sig_flags</a>;</div><div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ab2acd3f561950f0ab6546314677ad57d">  386</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ab2acd3f561950f0ab6546314677ad57d">canary_pid</a> = 0;</div><div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a459b692028914da1bf3641b5de9ba6ea">  387</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a459b692028914da1bf3641b5de9ba6ea">canary_filename</a>[128];</div><div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ae3d7cfbb91d822868f8ef6160fbcee52">  388</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ae3d7cfbb91d822868f8ef6160fbcee52">multi_thread_safe</a>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a3a662046fe963f773c09fc3b998d3a44">  390</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a3a662046fe963f773c09fc3b998d3a44">randompool</a>[256];</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="preprocessor">#ifdef HAVE_CAP</span></div><div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a0e01e4a7836c72a22f08f824d366ffb0">  393</a></span>&#160;<span class="keyword">static</span> cap_t <a class="code" href="../../d5/d03/asterisk_8c.html#a0e01e4a7836c72a22f08f824d366ffb0">child_cap</a>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a7bb419fdb0040da24ecbb651b12395fc">  396</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a7bb419fdb0040da24ecbb651b12395fc">sig_alert_pipe</a>[2] = { -1, -1 };</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a2c0628cd8683a1fb31dd77db1c566d01">  398</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a2c0628cd8683a1fb31dd77db1c566d01">need_reload</a>:1;</div><div class="line"><a name="l00399"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a59ebc425c4a47d7a5fb011e9448f7806">  399</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a59ebc425c4a47d7a5fb011e9448f7806">need_quit</a>:1;</div><div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ab24464bfc7f3af1c20fdd18deb3c8aab">  400</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ab24464bfc7f3af1c20fdd18deb3c8aab">need_quit_handler</a>:1;</div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a527aad812c87964e08ac9d7b288e28ec">  401</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a527aad812c87964e08ac9d7b288e28ec">need_el_end</a>:1;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;} <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="../../d3/dba/structthread__list__t.html">  405</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d3/dba/structthread__list__t.html">thread_list_t</a> {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ac63e9e237da22b6faf3be4edfc4f5a11">AST_RWLIST_ENTRY</a>(<a class="code" href="../../d3/dba/structthread__list__t.html">thread_list_t</a>) list;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   pthread_t <a class="code" href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <span class="keywordtype">int</span> lwp;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;};</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="../../d1/dc3/structthread__list.html#ace4e0066a5b24f84b90536e9906619f6">  412</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../df/d90/linkedlists_8h.html#a39918fd433ac42184b152c86016ef139">AST_RWLIST_HEAD_STATIC</a>(<a class="code" href="../../d1/dc3/structthread__list.html">thread_list</a>, <a class="code" href="../../d3/dba/structthread__list__t.html">thread_list_t</a>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a8e450762024db98313129c1a2ea07d0c">  414</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a8e450762024db98313129c1a2ea07d0c">ast_register_thread</a>(<span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;{</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/dba/structthread__list__t.html">thread_list_t</a> *<span class="keyword">new</span> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*<span class="keyword">new</span>));</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <span class="keywordflow">if</span> (!<span class="keyword">new</span>)</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#ae3d7cfbb91d822868f8ef6160fbcee52">multi_thread_safe</a>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   <span class="keyword">new</span>-&gt;id = pthread_self();</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   <span class="keyword">new</span>-&gt;lwp = <a class="code" href="../../d5/d60/utils_8h.html#a78ce13d749925cbdaa7625e8dbdcbf7f">ast_get_tid</a>();</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   <span class="keyword">new</span>-&gt;name = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>; <span class="comment">/* steal the allocated memory for the thread name */</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d1/dc3/structthread__list.html">thread_list</a>);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d1/dc3/structthread__list.html">thread_list</a>, <span class="keyword">new</span>, list);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d1/dc3/structthread__list.html">thread_list</a>);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9795c12483e42e95d18eae6a92482677">  430</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a9795c12483e42e95d18eae6a92482677">ast_unregister_thread</a>(<span class="keywordtype">void</span> *<span class="keywordtype">id</span>)</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;{</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/dba/structthread__list__t.html">thread_list_t</a> *x;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d1/dc3/structthread__list.html">thread_list</a>);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d1/dc3/structthread__list.html">thread_list</a>, x, list) {</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">if</span> ((<span class="keywordtype">void</span> *) x-&gt;id == <span class="keywordtype">id</span>) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(list);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d1/dc3/structthread__list.html">thread_list</a>);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <span class="keywordflow">if</span> (x) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(x-&gt;name);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(x);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;}</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">/*! \brief Give an overview of core settings */</span></div><div class="line"><a name="l00450"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ad66301d131d35faea1df2e7c5b1a1bf2">  450</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#ad66301d131d35faea1df2e7c5b1a1bf2">handle_show_settings</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;{</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[BUFSIZ];</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> tm;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   <span class="keywordtype">char</span> eid_str[128];</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <span class="keyword">struct </span>rlimit limits;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   <span class="keywordtype">char</span> pbx_uuid[<a class="code" href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a>];</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core show settings&quot;</span>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> = <span class="stringliteral">&quot;Usage: core show settings\n&quot;</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="stringliteral">&quot;       Show core misc settings&quot;</span>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a6d9b899df42ca9ba23260752dd136ac5">ast_pbx_uuid_get</a>(pbx_uuid, <span class="keyword">sizeof</span>(pbx_uuid));</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\nPBX Core settings\n&quot;</span>);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;-----------------\n&quot;</span>);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Version:                     %s\n&quot;</span>, <a class="code" href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a>());</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Build Options:               %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d5/db9/ast__version_8h.html#a8a80e93d07dd404319c28c0eaa216672">ast_get_build_opts</a>(), <span class="stringliteral">&quot;(none)&quot;</span>));</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd6/group__main__options.html#ga6d3ecf74255f4bfc355ebd1540c316c1">ast_option_maxcalls</a>)</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Maximum calls:               %d (Current %d)\n&quot;</span>, <a class="code" href="../../d6/dd6/group__main__options.html#ga6d3ecf74255f4bfc355ebd1540c316c1">ast_option_maxcalls</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9704ae96ab849e9e5a20040c13d29705">ast_active_channels</a>());</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Maximum calls:               Not set\n&quot;</span>);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   <span class="keywordflow">if</span> (getrlimit(RLIMIT_NOFILE, &amp;limits)) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Maximum open file handles:   Error because of %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (limits.rlim_cur == RLIM_INFINITY) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Maximum open file handles:   Unlimited\n&quot;</span>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (limits.rlim_cur &lt; <a class="code" href="../../d6/dd6/group__main__options.html#ga3fe7b544e835ccfde10b88b76eb0e8ea">ast_option_maxfiles</a>) {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Maximum open file handles:   %d (is) %d (requested)\n&quot;</span>, (<span class="keywordtype">int</span>) limits.rlim_cur, <a class="code" href="../../d6/dd6/group__main__options.html#ga3fe7b544e835ccfde10b88b76eb0e8ea">ast_option_maxfiles</a>);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Maximum open file handles:   %d\n&quot;</span>, (<span class="keywordtype">int</span>) limits.rlim_cur);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Root console verbosity:      %d\n&quot;</span>, <a class="code" href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a>);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Current console verbosity:   %d\n&quot;</span>, <a class="code" href="../../d1/d8c/logger_8h.html#ae20a38a15eebc85a55879b97f02185de">ast_verb_console_get</a>());</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Debug level:                 %d\n&quot;</span>, <a class="code" href="../../d6/dd6/group__main__options.html#ga40f8fb2e731031d99f732f515cec680f">option_debug</a>);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Trace level:                 %d\n&quot;</span>, <a class="code" href="../../d6/dd6/group__main__options.html#gaef564ce28f5579dcd6752b8c6f5318ba">option_trace</a>);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Maximum load average:        %lf\n&quot;</span>, <a class="code" href="../../d6/dd6/group__main__options.html#ga908239c63cc433cbefa4aa6f5efcb830">ast_option_maxload</a>);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="preprocessor">#if defined(HAVE_SYSINFO)</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Minimum free memory:         %ld MB\n&quot;</span>, <a class="code" href="../../d6/dd6/group__main__options.html#gade53ca08a5e71308f410de870fa7338b">option_minmemfree</a>);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#acd462f81fa607939af36a9fa33cdbf9d">ast_startuptime</a>, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%H:%M:%S&quot;</span>, &amp;tm);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Startup time:                %s\n&quot;</span>, buf);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a7cdafc5a121e87659887ffc9abe36760">ast_lastreloadtime</a>, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%H:%M:%S&quot;</span>, &amp;tm);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Last reload time:            %s\n&quot;</span>, buf);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  System:                      %s/%s built by %s on %s %s\n&quot;</span>, <a class="code" href="../../de/d35/buildinfo_8h.html#a00b5464ec2f306ae8f17f73a0a81f28d">ast_build_os</a>, <a class="code" href="../../de/d35/buildinfo_8h.html#af89b2913397f19dc15adb9014bcb5d5a">ast_build_kernel</a>, <a class="code" href="../../de/d35/buildinfo_8h.html#ac67b18fb7444d973a733a9757c1ff8f9">ast_build_user</a>, <a class="code" href="../../de/d35/buildinfo_8h.html#a6d456a43bdae713459ee5ee67439670c">ast_build_machine</a>, <a class="code" href="../../de/d35/buildinfo_8h.html#af1708cda257f6db95f77b34f112ef64b">ast_build_date</a>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  System name:                 %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#ab9f9346c7a41bdf3720f7b1ed02ec703">ast_config_AST_SYSTEM_NAME</a>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Entity ID:                   %s\n&quot;</span>, eid_str);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  PBX UUID:                    %s\n&quot;</span>, pbx_uuid);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Default language:            %s\n&quot;</span>, <a class="code" href="../../d7/d5b/options_8h.html#afe3489254f2f498c33e974ae8ead8bb3">ast_defaultlanguage</a>);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Language prefix:             %s\n&quot;</span>, <a class="code" href="../../d7/d5b/options_8h.html#a248e5c086666b04d29a9cd876ad370b3">ast_language_is_prefix</a> ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  User name and group:         %s/%s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a37ae09a4cc0e3b46e7b2a2052bde4965">ast_config_AST_RUN_USER</a>, <a class="code" href="../../dd/df2/paths_8h.html#a2434757afbc16110ff1c7483f3d7ba51">ast_config_AST_RUN_GROUP</a>);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Executable includes:         %s\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a1ec197321d89052601ec7e5482009807">AST_OPT_FLAG_EXEC_INCLUDES</a>) ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Transcode via SLIN:          %s\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a1c360c0f064303244790f6857bd2d847">AST_OPT_FLAG_TRANSCODE_VIA_SLIN</a>) ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Transmit silence during rec: %s\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a48c2766ad365c08930d7966fbcde4dd6">AST_OPT_FLAG_TRANSMIT_SILENCE</a>) ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Generic PLC:                 %s\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a14749bb9d97b6d2beec3e2b2688149d2">AST_OPT_FLAG_GENERIC_PLC</a>) ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Generic PLC on equal codecs: %s\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a751f779a67786068c5a2fa43f9a5c16b">AST_OPT_FLAG_GENERIC_PLC_ON_EQUAL_CODECS</a>) ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Hide Msg Chan AMI events:    %s\n&quot;</span>, <a class="code" href="../../d7/d5b/options_8h.html#aab068d1d19325ebde561113748207756">ast_opt_hide_messaging_ami_events</a> ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Min DTMF duration::          %u\n&quot;</span>, <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a>);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Cache media frames:          %s\n&quot;</span>, <a class="code" href="../../d7/d5b/options_8h.html#af3b50b1627a6cd46395abfe665848438">ast_opt_cache_media_frames</a> ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  RTP use dynamic payloads:    %u\n&quot;</span>, <a class="code" href="../../d6/dd6/group__main__options.html#ga2834e29d260312cf03f1e463a112631b">ast_option_rtpusedynamic</a>);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd6/group__main__options.html#gaa241e9e2481830111df49cf5addaab99">ast_option_rtpptdynamic</a> == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0aec28074ae9e42a635acf7995b14793">AST_RTP_PT_LAST_REASSIGN</a>) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  RTP dynamic payload types:   %u,%u-%u\n&quot;</span>,</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;              <a class="code" href="../../d6/dd6/group__main__options.html#gaa241e9e2481830111df49cf5addaab99">ast_option_rtpptdynamic</a>,</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;              <a class="code" href="../../d5/dde/rtp__engine_8h.html#a93f4ec51ddb2654b816f260287c6182c">AST_RTP_PT_FIRST_DYNAMIC</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a> - 1);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd6/group__main__options.html#gaa241e9e2481830111df49cf5addaab99">ast_option_rtpptdynamic</a> &lt; <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0aec28074ae9e42a635acf7995b14793">AST_RTP_PT_LAST_REASSIGN</a>) {</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  RTP dynamic payload types:   %u-%u,%u-%u\n&quot;</span>,</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;              <a class="code" href="../../d6/dd6/group__main__options.html#gaa241e9e2481830111df49cf5addaab99">ast_option_rtpptdynamic</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0aec28074ae9e42a635acf7995b14793">AST_RTP_PT_LAST_REASSIGN</a>,</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;              <a class="code" href="../../d5/dde/rtp__engine_8h.html#a93f4ec51ddb2654b816f260287c6182c">AST_RTP_PT_FIRST_DYNAMIC</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a> - 1);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  RTP dynamic payload types:   %u-%u\n&quot;</span>,</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;              <a class="code" href="../../d5/dde/rtp__engine_8h.html#a93f4ec51ddb2654b816f260287c6182c">AST_RTP_PT_FIRST_DYNAMIC</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a> - 1);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n* Subsystems\n&quot;</span>);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  -------------\n&quot;</span>);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Manager (AMI):               %s\n&quot;</span>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga1a2e7df8657b820c5a6663b397f23bc9">ast_manager_check_enabled</a>() ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Web Manager (AMI/HTTP):      %s\n&quot;</span>, <a class="code" href="../../df/d72/group__Group__AMI.html#ga22f6d55529c1ca69bc308af9d9ef0bb2">ast_webmanager_check_enabled</a>() ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Call data records:           %s\n&quot;</span>, <a class="code" href="../../dc/d07/cdr_8h.html#a1819c3aecd7b59e2734810f52b219059">ast_cdr_is_enabled</a>() ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Realtime Architecture (ARA): %s\n&quot;</span>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6344200b56202a76de8db05af680f3ac">ast_realtime_enabled</a>() ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">   /*! \todo we could check musiconhold, voicemail, smdi, adsi, queues  */</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n* Directories\n&quot;</span>);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  -------------\n&quot;</span>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Configuration file:          %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#adea5f0a0a8720d1dbb47ca434fe78778">ast_config_AST_CONFIG_FILE</a>);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Configuration directory:     %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a7d3836e5581e433c9f5edd30300cc187">ast_config_AST_CONFIG_DIR</a>);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Module directory:            %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a5852d8e3bf5485c09b0f3d2c2375eec3">ast_config_AST_MODULE_DIR</a>);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Spool directory:             %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a95c5b4ffe620dc96d1ea9311b35c4d4f">ast_config_AST_SPOOL_DIR</a>);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Log directory:               %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#aea5e16ca2517e2093fdfa0e7fd112f0f">ast_config_AST_LOG_DIR</a>);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Run/Sockets directory:       %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a6014e29009d7db30e546a244c2cc95b6">ast_config_AST_RUN_DIR</a>);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  PID file:                    %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a59860442b922398568da0236c1576039">ast_config_AST_PID</a>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  VarLib directory:            %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#ab6e1cd3d774ab1b31836a8777d3a812d">ast_config_AST_VAR_DIR</a>);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Data directory:              %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a63af4213b5b83f717398d8d62008a50d">ast_config_AST_DATA_DIR</a>);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  ASTDB:                       %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#af89b8aa53d5b08a03b56f5163805bd97">ast_config_AST_DB</a>);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  IAX2 Keys directory:         %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a0334adace37c0e8de8ea89c8651336a2">ast_config_AST_KEY_DIR</a>);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  AGI Scripts directory:       %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a9b39aef5b661559fc470307cb315a417">ast_config_AST_AGI_DIR</a>);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n\n&quot;</span>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;}</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a3d42dc32df764617e2201c3637f824cc">  565</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a3d42dc32df764617e2201c3637f824cc">handle_show_threads</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;{</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/dba/structthread__list__t.html">thread_list_t</a> *cur;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core show threads&quot;</span>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;         <span class="stringliteral">&quot;Usage: core show threads\n&quot;</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;         <span class="stringliteral">&quot;       List threads currently active in the system.\n&quot;</span>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d1/dc3/structthread__list.html">thread_list</a>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d1/dc3/structthread__list.html">thread_list</a>, cur, list) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%p %d %s\n&quot;</span>, (<span class="keywordtype">void</span> *)cur-&gt;id, cur-&gt;lwp, cur-&gt;name);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      count++;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d1/dc3/structthread__list.html">thread_list</a>);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%d threads listed.\n&quot;</span>, count);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;}</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="preprocessor">#if defined (HAVE_SYSCTL) &amp;&amp; defined(HAVE_SWAPCTL)</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment"> * swapmode is rewritten by Tobias Weingartner &lt;weingart@openbsd.org&gt;</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment"> * to be based on the new swapctl(2) system call.</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> swapmode(<span class="keywordtype">int</span> *used, <span class="keywordtype">int</span> *<a class="code" href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a>)</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;{</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <span class="keyword">struct </span>swapent *swdev;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   <span class="keywordtype">int</span> nswap, rnswap, i;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   nswap = swapctl(SWAP_NSWAP, 0, 0);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="keywordflow">if</span> (nswap == 0)</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   swdev = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(nswap, <span class="keyword">sizeof</span>(*swdev));</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <span class="keywordflow">if</span> (swdev == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   rnswap = swapctl(SWAP_STATS, swdev, nswap);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <span class="keywordflow">if</span> (rnswap == -1) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(swdev);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   <span class="comment">/* if rnswap != nswap, then what? */</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <span class="comment">/* Total things up */</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   *total = *used = 0;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; nswap; i++) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="keywordflow">if</span> (swdev[i].se_flags &amp; SWF_ENABLE) {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;         *used += (swdev[i].se_inuse / (1024 / DEV_BSIZE));</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;         *total += (swdev[i].se_nblks / (1024 / DEV_BSIZE));</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(swdev);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;}</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="preprocessor">#if defined(HAVE_SYSINFO) || defined(HAVE_SYSCTL)</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">/*! \brief Give an overview of system statistics */</span></div><div class="line"><a name="l00631"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a7ae8b6656af65f29c76982647d743fcc">  631</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a7ae8b6656af65f29c76982647d743fcc">handle_show_sysinfo</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;{</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   uint64_t physmem, freeram;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="preprocessor">#if defined(HAVE_SYSINFO) || defined(HAVE_SWAPCTL)</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   <span class="keywordtype">int</span> totalswap = 0;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   uint64_t freeswap = 0;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="keywordtype">int</span> nprocs = 0;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   <span class="keywordtype">long</span> uptime = 0;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="preprocessor">#if defined(HAVE_SYSINFO)</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <span class="keyword">struct </span>sysinfo sys_info;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="preprocessor">#elif defined(HAVE_SYSCTL)</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">int</span> pageshift;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <span class="keyword">struct </span>vmtotal vmtotal;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <span class="keyword">struct </span>timeval boottime;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   time_t   now;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   <span class="keywordtype">int</span> mib[2], pagesize;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="preprocessor">#if defined(HAVE_SWAPCTL)</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   <span class="keywordtype">int</span> usedswap = 0;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core show sysinfo&quot;</span>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;         <span class="stringliteral">&quot;Usage: core show sysinfo\n&quot;</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;         <span class="stringliteral">&quot;       List current system information.\n&quot;</span>;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   }</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="preprocessor">#if defined(HAVE_SYSINFO)</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   sysinfo(&amp;sys_info);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   uptime = sys_info.uptime / 3600;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   physmem = sys_info.totalram * sys_info.mem_unit;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   freeram = (sys_info.freeram * sys_info.mem_unit) / 1024;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   totalswap = (sys_info.totalswap * sys_info.mem_unit) / 1024;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   freeswap = (sys_info.freeswap * sys_info.mem_unit) / 1024;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   nprocs = sys_info.procs;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="preprocessor">#elif defined(HAVE_SYSCTL)</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   <span class="comment">/* calculate the uptime by looking at boottime */</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   time(&amp;now);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   mib[0] = CTL_KERN;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   mib[1] = KERN_BOOTTIME;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   len = <span class="keyword">sizeof</span>(boottime);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <span class="keywordflow">if</span> (sysctl(mib, 2, &amp;boottime, &amp;len, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0) != -1) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      uptime = now - boottime.tv_sec;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   uptime = uptime/3600;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <span class="comment">/* grab total physical memory  */</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   mib[0] = CTL_HW;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="preprocessor">#if defined(HW_PHYSMEM64)</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   mib[1] = HW_PHYSMEM64;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   mib[1] = HW_PHYSMEM;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   len = <span class="keyword">sizeof</span>(physmem);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   sysctl(mib, 2, &amp;physmem, &amp;len, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   pagesize = getpagesize();</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   pageshift = 0;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keywordflow">while</span> (pagesize &gt; 1) {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      pageshift++;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      pagesize &gt;&gt;= 1;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <span class="comment">/* we only need the amount of log(2)1024 for our conversion */</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   pageshift -= 10;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   <span class="comment">/* grab vm totals */</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   mib[0] = CTL_VM;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   mib[1] = VM_METER;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   len = <span class="keyword">sizeof</span>(vmtotal);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   sysctl(mib, 2, &amp;vmtotal, &amp;len, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   freeram = (vmtotal.t_free &lt;&lt; pageshift);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   <span class="comment">/* generate swap usage and totals */</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="preprocessor">#if defined(HAVE_SWAPCTL)</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   swapmode(&amp;usedswap, &amp;totalswap);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   freeswap = (totalswap - usedswap);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   <span class="comment">/* grab number of processes */</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="preprocessor">#if defined(__OpenBSD__)</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   mib[0] = CTL_KERN;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   mib[1] = KERN_NPROCS;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   len = <span class="keyword">sizeof</span>(nprocs);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   sysctl(mib, 2, &amp;nprocs, &amp;len, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\nSystem Statistics\n&quot;</span>);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;-----------------\n&quot;</span>);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  System Uptime:             %ld hours\n&quot;</span>, uptime);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Total RAM:                 %&quot;</span> PRIu64 <span class="stringliteral">&quot; KiB\n&quot;</span>, physmem / 1024);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Free RAM:                  %&quot;</span> PRIu64 <span class="stringliteral">&quot; KiB\n&quot;</span>, freeram);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="preprocessor">#if defined(HAVE_SYSINFO)</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Buffer RAM:                %&quot;</span> PRIu64 <span class="stringliteral">&quot; KiB\n&quot;</span>, ((uint64_t) sys_info.bufferram * sys_info.mem_unit) / 1024);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="preprocessor">#if defined(HAVE_SYSINFO) || defined(HAVE_SWAPCTL)</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Total Swap Space:          %d KiB\n&quot;</span>, totalswap);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Free Swap Space:           %&quot;</span> PRIu64 <span class="stringliteral">&quot; KiB\n\n&quot;</span>, freeswap);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Number of Processes:       %d \n\n&quot;</span>, nprocs);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;}</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno"><a class="line" href="../../da/d4e/structprofile__entry.html">  740</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../da/d4e/structprofile__entry.html">profile_entry</a> {</div><div class="line"><a name="l00741"></a><span class="lineno"><a class="line" href="../../da/d4e/structprofile__entry.html#afcd1706c9144e6d6eee6127661ae3be2">  741</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d4e/structprofile__entry.html#afcd1706c9144e6d6eee6127661ae3be2">name</a>;</div><div class="line"><a name="l00742"></a><span class="lineno"><a class="line" href="../../da/d4e/structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">  742</a></span>&#160;   uint64_t <a class="code" href="../../da/d4e/structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">scale</a>;   <span class="comment">/* if non-zero, values are scaled by this */</span></div><div class="line"><a name="l00743"></a><span class="lineno"><a class="line" href="../../da/d4e/structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">  743</a></span>&#160;   int64_t  <a class="code" href="../../da/d4e/structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a>;</div><div class="line"><a name="l00744"></a><span class="lineno"><a class="line" href="../../da/d4e/structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">  744</a></span>&#160;   int64_t  <a class="code" href="../../da/d4e/structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a>;</div><div class="line"><a name="l00745"></a><span class="lineno"><a class="line" href="../../da/d4e/structprofile__entry.html#a15cf6039b397e491e02d273d76f3485e">  745</a></span>&#160;   int64_t  <a class="code" href="../../da/d4e/structprofile__entry.html#a15cf6039b397e491e02d273d76f3485e">events</a>;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;};</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno"><a class="line" href="../../dc/d6f/structprofile__data.html">  748</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dc/d6f/structprofile__data.html">profile_data</a> {</div><div class="line"><a name="l00749"></a><span class="lineno"><a class="line" href="../../dc/d6f/structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">  749</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dc/d6f/structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">entries</a>;</div><div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="../../dc/d6f/structprofile__data.html#a98ca8117bc73d9d7520727c4ce8772e6">  750</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dc/d6f/structprofile__data.html#a98ca8117bc73d9d7520727c4ce8772e6">max_size</a>;</div><div class="line"><a name="l00751"></a><span class="lineno"><a class="line" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">  751</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d4e/structprofile__entry.html">profile_entry</a> e[0];</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;};</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">  754</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dc/d6f/structprofile__data.html">profile_data</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ! LOW_MEMORY */</span><span class="preprocessor"></span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">/*! \brief allocates a counter with a given name and scale.</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment"> * \return Returns the identifier of the counter.</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00760"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a334294b1940f73a5fec03aceb70a9e2d">  760</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a334294b1940f73a5fec03aceb70a9e2d">ast_add_profile</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, uint64_t scale)</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;{</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="keywordtype">int</span> l = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../dc/d6f/structprofile__data.html">profile_data</a>);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   <span class="keywordtype">int</span> n = 10; <span class="comment">/* default entries */</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   <span class="keywordflow">if</span> (prof_data == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      prof_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, l + n*<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../da/d4e/structprofile__entry.html">profile_entry</a>));</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="keywordflow">if</span> (prof_data == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">entries</a> = 0;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#a98ca8117bc73d9d7520727c4ce8772e6">max_size</a> = n;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   }</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   <span class="keywordflow">if</span> (prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">entries</a> &gt;= prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#a98ca8117bc73d9d7520727c4ce8772e6">max_size</a>) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordtype">void</span> *<a class="code" href="../../df/d87/structconsole.html#a67bfc5276dfe3c0f1174ebc9ce9d7d31">p</a>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      n = prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#a98ca8117bc73d9d7520727c4ce8772e6">max_size</a> + 20;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      p = <a class="code" href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a>(prof_data, l + n*<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../da/d4e/structprofile__entry.html">profile_entry</a>));</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <span class="keywordflow">if</span> (p == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      prof_data = <a class="code" href="../../df/d87/structconsole.html#a67bfc5276dfe3c0f1174ebc9ce9d7d31">p</a>;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#a98ca8117bc73d9d7520727c4ce8772e6">max_size</a> = n;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   }</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   n = prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">entries</a>++;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[n].<a class="code" href="../../da/d4e/structprofile__entry.html#afcd1706c9144e6d6eee6127661ae3be2">name</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(name);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[n].<a class="code" href="../../da/d4e/structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a> = 0;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[n].<a class="code" href="../../da/d4e/structprofile__entry.html#a15cf6039b397e491e02d273d76f3485e">events</a> = 0;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[n].<a class="code" href="../../da/d4e/structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a> = 0;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[n].<a class="code" href="../../da/d4e/structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">scale</a> = scale;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   <span class="keywordflow">return</span> n;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* if defined(LOW_MEMORY) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;}</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#af97fa49b90705f0b818d7cc77aaae54c">  794</a></span>&#160;int64_t <a class="code" href="../../d5/d03/asterisk_8c.html#af97fa49b90705f0b818d7cc77aaae54c">ast_profile</a>(<span class="keywordtype">int</span> i, int64_t delta)</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;{</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   <span class="keywordflow">if</span> (!prof_data || i &lt; 0 || i &gt; prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">entries</a>) <span class="comment">/* invalid index */</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   <span class="keywordflow">if</span> (prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">scale</a> &gt; 1)</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      delta /= prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">scale</a>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a> += delta;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#a15cf6039b397e491e02d273d76f3485e">events</a>++;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   <span class="keywordflow">return</span> prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a>;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* if defined(LOW_MEMORY) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;}</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">/* The RDTSC instruction was introduced on the Pentium processor and is not</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment"> * implemented on certain clones, like the Cyrix 586. Hence, the previous</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment"> * expectation of __i386__ was in error. */</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="preprocessor">#if defined ( __i686__) &amp;&amp; (defined(__FreeBSD__) || defined(linux))</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="preprocessor">#if defined(__FreeBSD__)</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="preprocessor">#include &lt;machine/cpufunc.h&gt;</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="preprocessor">#elif defined(linux)</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="keyword">static</span> __inline uint64_t</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<a class="code" href="../../d5/d03/asterisk_8c.html#a4840b412d71c9ff725760b9d5d3bfe25">rdtsc</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;{</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   uint64_t rv;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   __asm __volatile(<span class="stringliteral">&quot;.byte 0x0f, 0x31&quot;</span> : <span class="stringliteral">&quot;=A&quot;</span> (rv));</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <span class="keywordflow">return</span> (rv);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* supply a dummy function on other platforms */</span><span class="preprocessor"></span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="keyword">static</span> __inline uint64_t</div><div class="line"><a name="l00828"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a4840b412d71c9ff725760b9d5d3bfe25">  828</a></span>&#160;<a class="code" href="../../d5/d03/asterisk_8c.html#a4840b412d71c9ff725760b9d5d3bfe25">rdtsc</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;{</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;}</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ! LOW_MEMORY */</span><span class="preprocessor"></span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a080b9ad27161383b1b3f76f04b59753b">  835</a></span>&#160;int64_t <a class="code" href="../../d5/d03/asterisk_8c.html#a080b9ad27161383b1b3f76f04b59753b">ast_mark</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> startstop)</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;{</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   <span class="keywordflow">if</span> (!prof_data || i &lt; 0 || i &gt; prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">entries</a>) <span class="comment">/* invalid index */</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <span class="keywordflow">if</span> (startstop == 1)</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a> = <a class="code" href="../../d5/d03/asterisk_8c.html#a4840b412d71c9ff725760b9d5d3bfe25">rdtsc</a>();</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   <span class="keywordflow">else</span> {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a> = (<a class="code" href="../../d5/d03/asterisk_8c.html#a4840b412d71c9ff725760b9d5d3bfe25">rdtsc</a>() - prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a>);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keywordflow">if</span> (prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">scale</a> &gt; 1)</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;         prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a> /= prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">scale</a>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a> += prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a>;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#a15cf6039b397e491e02d273d76f3485e">events</a>++;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   }</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;   <span class="keywordflow">return</span> prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">mark</a>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* if defined(LOW_MEMORY) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;}</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l00856"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ab0975860bf91fec3bf674341a7cba5ec">  856</a></span>&#160;<span class="preprocessor">#define DEFINE_PROFILE_MIN_MAX_VALUES min = 0; \</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="preprocessor">   max = prof_data-&gt;entries;\</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="preprocessor">   if  (a-&gt;argc &gt; 3) { </span><span class="comment">/* specific entries */</span><span class="preprocessor"> \</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="preprocessor">      if (isdigit(a-&gt;argv[3][0])) { \</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="preprocessor">         min = atoi(a-&gt;argv[3]); \</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="preprocessor">         if (a-&gt;argc == 5 &amp;&amp; strcmp(a-&gt;argv[4], &quot;-&quot;)) \</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="preprocessor">            max = atoi(a-&gt;argv[4]); \</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="preprocessor">      } else \</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="preprocessor">         search = a-&gt;argv[3]; \</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="preprocessor">   } \</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="preprocessor">   if (max &gt; prof_data-&gt;entries) \</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="preprocessor">      max = prof_data-&gt;entries;</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#acd2b29cf44212391e7c62499f7394db5">  869</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#acd2b29cf44212391e7c62499f7394db5">handle_show_profile</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;{</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   <span class="keywordtype">int</span> i, <a class="code" href="../../dc/dc2/f2c_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>, <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *search = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core show profile&quot;</span>;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> = <span class="stringliteral">&quot;Usage: core show profile\n&quot;</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            <span class="stringliteral">&quot;       show profile information&quot;</span>;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   }</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   <span class="keywordflow">if</span> (prof_data == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#ab0975860bf91fec3bf674341a7cba5ec">DEFINE_PROFILE_MIN_MAX_VALUES</a>;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;profile values (%d, allocated %d)\n-------------------\n&quot;</span>,</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">entries</a>, prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#a98ca8117bc73d9d7520727c4ce8772e6">max_size</a>);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%6s   %8s  %10s %12s %12s  %s\n&quot;</span>, <span class="stringliteral">&quot;ID&quot;</span>, <span class="stringliteral">&quot;Scale&quot;</span>, <span class="stringliteral">&quot;Events&quot;</span>,</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;         <span class="stringliteral">&quot;Value&quot;</span>, <span class="stringliteral">&quot;Average&quot;</span>, <span class="stringliteral">&quot;Name&quot;</span>);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   <span class="keywordflow">for</span> (i = min; i &lt; <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>; i++) {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../da/d4e/structprofile__entry.html">profile_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a> = &amp;prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i];</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      <span class="keywordflow">if</span> (!search || strstr(entry-&gt;<a class="code" href="../../da/d4e/structprofile__entry.html#afcd1706c9144e6d6eee6127661ae3be2">name</a>, search))</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;          <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%6d: [%8ld] %10ld %12lld %12lld  %s\n&quot;</span>,</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;         i,</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;         (<span class="keywordtype">long</span>)entry-&gt;<a class="code" href="../../da/d4e/structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">scale</a>,</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;         (<span class="keywordtype">long</span>)entry-&gt;<a class="code" href="../../da/d4e/structprofile__entry.html#a15cf6039b397e491e02d273d76f3485e">events</a>, (<span class="keywordtype">long</span> <span class="keywordtype">long</span>)entry-&gt;<a class="code" href="../../da/d4e/structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a>,</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;         (<span class="keywordtype">long</span> <span class="keywordtype">long</span>)(entry-&gt;<a class="code" href="../../da/d4e/structprofile__entry.html#a15cf6039b397e491e02d273d76f3485e">events</a> ? entry-&gt;<a class="code" href="../../da/d4e/structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a> / entry-&gt;<a class="code" href="../../da/d4e/structprofile__entry.html#a15cf6039b397e491e02d273d76f3485e">events</a> : entry-&gt;<a class="code" href="../../da/d4e/structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a>),</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;         entry-&gt;<a class="code" href="../../da/d4e/structprofile__entry.html#afcd1706c9144e6d6eee6127661ae3be2">name</a>);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   }</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;}</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#aa1b8f26984e7b4f8359502eec3a8cd24">  904</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#aa1b8f26984e7b4f8359502eec3a8cd24">handle_clear_profile</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;{</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   <span class="keywordtype">int</span> i, <a class="code" href="../../dc/dc2/f2c_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>, <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *search = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core clear profile&quot;</span>;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> = <span class="stringliteral">&quot;Usage: core clear profile\n&quot;</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            <span class="stringliteral">&quot;       clear profile information&quot;</span>;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;   }</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;   <span class="keywordflow">if</span> (prof_data == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#ab0975860bf91fec3bf674341a7cba5ec">DEFINE_PROFILE_MIN_MAX_VALUES</a>;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   <span class="keywordflow">for</span> (i= min; i &lt; <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>; i++) {</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <span class="keywordflow">if</span> (!search || strstr(prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#afcd1706c9144e6d6eee6127661ae3be2">name</a>, search)) {</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;         prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a> = 0;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;         prof_data-&gt;<a class="code" href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">e</a>[i].<a class="code" href="../../da/d4e/structprofile__entry.html#a15cf6039b397e491e02d273d76f3485e">events</a> = 0;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      }</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   }</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;}</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="preprocessor">#undef DEFINE_PROFILE_MIN_MAX_VALUES</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ! LOW_MEMORY */</span><span class="preprocessor"></span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a6d9b899df42ca9ba23260752dd136ac5">  934</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a6d9b899df42ca9ba23260752dd136ac5">ast_pbx_uuid_get</a>(<span class="keywordtype">char</span> *pbx_uuid, <span class="keywordtype">int</span> length)</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;{</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a>(<span class="stringliteral">&quot;pbx&quot;</span>, <span class="stringliteral">&quot;UUID&quot;</span>, pbx_uuid, length);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;}</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a2dfc2ba9fce08ba9b43f067fd888a9de">  939</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a2dfc2ba9fce08ba9b43f067fd888a9de">publish_fully_booted</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;{</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_object;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   <span class="keywordtype">int</span> uptime = 0;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   <span class="keywordtype">int</span> lastreloaded = 0;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;   <span class="keyword">struct </span>timeval tmp;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <span class="keyword">struct </span>timeval curtime = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#acd462f81fa607939af36a9fa33cdbf9d">ast_startuptime</a>.tv_sec) {</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      tmp = <a class="code" href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a>(curtime, <a class="code" href="../../d5/d03/asterisk_8c.html#acd462f81fa607939af36a9fa33cdbf9d">ast_startuptime</a>);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      uptime = (int) tmp.tv_sec;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   }</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a7cdafc5a121e87659887ffc9abe36760">ast_lastreloadtime</a>.tv_sec) {</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      tmp = <a class="code" href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a>(curtime, <a class="code" href="../../d5/d03/asterisk_8c.html#a7cdafc5a121e87659887ffc9abe36760">ast_lastreloadtime</a>);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      lastreloaded = (int) tmp.tv_sec;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   }</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: i, s: i}&quot;</span>,</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;         <span class="stringliteral">&quot;Status&quot;</span>, <span class="stringliteral">&quot;Fully Booted&quot;</span>,</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;         <span class="stringliteral">&quot;Uptime&quot;</span>, uptime,</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;         <span class="stringliteral">&quot;LastReload&quot;</span>, lastreloaded);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga546caee8e3d040d0074bc32e96d53b7d">ast_manager_publish_event</a>(<span class="stringliteral">&quot;FullyBooted&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a>, json_object);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_object);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;}</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div><div class="line"><a name="l00965"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a1e7c04328076f732cc303a2c853466be">  965</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a1e7c04328076f732cc303a2c853466be">ast_run_atexits</a>(<span class="keywordtype">int</span> run_cleanups)</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;{</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d68/structast__atexit.html">ast_atexit</a> *ae;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../dd/dca/structatexits.html">atexits</a>);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   <span class="keywordflow">while</span> ((ae = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;<a class="code" href="../../dd/dca/structatexits.html">atexits</a>, <a class="code" href="../../d0/d68/structast__atexit.html#a50b5dd77cb70dfecbc6098fab1b9b36d">list</a>))) {</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      <span class="keywordflow">if</span> (ae-&gt;<a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a> &amp;&amp; (!ae-&gt;<a class="code" href="../../d0/d68/structast__atexit.html#a2eaef6e7b886d88be1c28b39da79f7de">is_cleanup</a> || run_cleanups)) {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;         ae-&gt;<a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a>();</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      }</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ae);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../dd/dca/structatexits.html">atexits</a>);</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;}</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a070bedd0d8451003b874cf081c1fe837">  979</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a070bedd0d8451003b874cf081c1fe837">__ast_unregister_atexit</a>(<span class="keywordtype">void</span> (*<a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a>)(<span class="keywordtype">void</span>))</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;{</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d68/structast__atexit.html">ast_atexit</a> *ae;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../dd/dca/structatexits.html">atexits</a>, ae, <a class="code" href="../../d0/d68/structast__atexit.html#a50b5dd77cb70dfecbc6098fab1b9b36d">list</a>) {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <span class="keywordflow">if</span> (ae-&gt;<a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a> == <a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a>) {</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d0/d68/structast__atexit.html#a50b5dd77cb70dfecbc6098fab1b9b36d">list</a>);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ae);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      }</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;}</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#aac8d6a969414c09eb22e50714079b79b">  993</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#aac8d6a969414c09eb22e50714079b79b">register_atexit</a>(<span class="keywordtype">void</span> (*<a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a>)(<span class="keywordtype">void</span>), <span class="keywordtype">int</span> <a class="code" href="../../d0/d68/structast__atexit.html#a2eaef6e7b886d88be1c28b39da79f7de">is_cleanup</a>)</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;{</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d68/structast__atexit.html">ast_atexit</a> *ae;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   ae = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*ae));</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <span class="keywordflow">if</span> (!ae) {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;   }</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;   ae-&gt;<a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a> = <a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a>;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;   ae-&gt;<a class="code" href="../../d0/d68/structast__atexit.html#a2eaef6e7b886d88be1c28b39da79f7de">is_cleanup</a> = <a class="code" href="../../d0/d68/structast__atexit.html#a2eaef6e7b886d88be1c28b39da79f7de">is_cleanup</a>;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../dd/dca/structatexits.html">atexits</a>);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a070bedd0d8451003b874cf081c1fe837">__ast_unregister_atexit</a>(<a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a>);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../dd/dca/structatexits.html">atexits</a>, ae, <a class="code" href="../../d0/d68/structast__atexit.html#a50b5dd77cb70dfecbc6098fab1b9b36d">list</a>);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../dd/dca/structatexits.html">atexits</a>);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;}</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div><div class="line"><a name="l01012"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9b09e95876dfecb9a8573819da0b255e"> 1012</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a9b09e95876dfecb9a8573819da0b255e">ast_register_atexit</a>(<span class="keywordtype">void</span> (*<a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a>)(<span class="keywordtype">void</span>))</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;{</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d03/asterisk_8c.html#aac8d6a969414c09eb22e50714079b79b">register_atexit</a>(<a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a>, 0);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;}</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div><div class="line"><a name="l01017"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a412442e1beffe5bec07ed2e9ea72afc3"> 1017</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<span class="keywordtype">void</span> (*<a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a>)(<span class="keywordtype">void</span>))</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;{</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d03/asterisk_8c.html#aac8d6a969414c09eb22e50714079b79b">register_atexit</a>(<a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a>, 1);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;}</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a7f60f486e8e4a322ae5132d791a94bcc"> 1022</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a7f60f486e8e4a322ae5132d791a94bcc">ast_unregister_atexit</a>(<span class="keywordtype">void</span> (*<a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a>)(<span class="keywordtype">void</span>))</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;{</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../dd/dca/structatexits.html">atexits</a>);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a070bedd0d8451003b874cf081c1fe837">__ast_unregister_atexit</a>(<a class="code" href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">func</a>);</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../dd/dca/structatexits.html">atexits</a>);</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;}</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">/* Sending commands from consoles back to the daemon requires a terminating NULL */</span></div><div class="line"><a name="l01030"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ac07499a06d0a0cf1d9ea14cf0693330a"> 1030</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ac07499a06d0a0cf1d9ea14cf0693330a">fdsend</a>(<span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *s)</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;{</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   <span class="keywordflow">return</span> write(fd, s, strlen(s) + 1);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;}</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="comment">/* Sending messages from the daemon back to the display requires _excluding_ the terminating NULL */</span></div><div class="line"><a name="l01036"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a5fdbbc0b9ac75fff436821b5c16c3442"> 1036</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a5fdbbc0b9ac75fff436821b5c16c3442">fdprint</a>(<span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *s)</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;{</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   <span class="keywordflow">return</span> write(fd, s, strlen(s));</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;}</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment">/*! \brief NULL handler so we can collect the child exit status */</span></div><div class="line"><a name="l01042"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a77938ca1fe1e56efb43da193009f9b14"> 1042</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a77938ca1fe1e56efb43da193009f9b14">_null_sig_handler</a>(<span class="keywordtype">int</span> sig)</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;{</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;}</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#af59e664e072227c9f6a77d1d0352e62b"> 1046</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span>sigaction <a class="code" href="../../d5/d03/asterisk_8c.html#af59e664e072227c9f6a77d1d0352e62b">null_sig_handler</a> = {</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;   .sa_handler = <a class="code" href="../../d5/d03/asterisk_8c.html#a77938ca1fe1e56efb43da193009f9b14">_null_sig_handler</a>,</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   .sa_flags = SA_RESTART,</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;};</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div><div class="line"><a name="l01051"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#af564c03a30a792b904af28762fdd5029"> 1051</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span>sigaction <a class="code" href="../../d5/d03/asterisk_8c.html#af564c03a30a792b904af28762fdd5029">ignore_sig_handler</a> = {</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;   .sa_handler = SIG_IGN,</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;};</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26"> 1055</a></span>&#160;<a class="code" href="../../dd/d42/lock_8h.html#ac840092853644cea0a186efdc58985f5">AST_MUTEX_DEFINE_STATIC</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);<span class="comment"></span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">/*! \brief Keep track of how many threads are currently trying to wait*() on</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment"> *  a child process</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01059"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a36152b6805cc14c6a2a41c2d283b422a"> 1059</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a36152b6805cc14c6a2a41c2d283b422a">safe_system_level</a> = 0;</div><div class="line"><a name="l01060"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a5ca7205e797dd971ff261830c15f8ea1"> 1060</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span>sigaction <a class="code" href="../../d5/d03/asterisk_8c.html#a5ca7205e797dd971ff261830c15f8ea1">safe_system_prev_handler</a>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a6de8ef28c39cc39978497de1918bfd70"> 1062</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a6de8ef28c39cc39978497de1918bfd70">ast_replace_sigchld</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;{</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> level;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;   level = safe_system_level++;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;   <span class="comment">/* only replace the handler if it has not already been done */</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   <span class="keywordflow">if</span> (level == 0) {</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      sigaction(SIGCHLD, &amp;null_sig_handler, &amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a5ca7205e797dd971ff261830c15f8ea1">safe_system_prev_handler</a>);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   }</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;}</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ad7c2a7da4125347c06d9719580731228"> 1077</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ad7c2a7da4125347c06d9719580731228">ast_unreplace_sigchld</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;{</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> level;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   level = --<a class="code" href="../../d5/d03/asterisk_8c.html#a36152b6805cc14c6a2a41c2d283b422a">safe_system_level</a>;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   <span class="comment">/* only restore the handler if we are the last one */</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;   <span class="keywordflow">if</span> (level == 0) {</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      sigaction(SIGCHLD, &amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a5ca7205e797dd971ff261830c15f8ea1">safe_system_prev_handler</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   }</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;}</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">/*! \brief fork and perform other preparations for spawning applications */</span></div><div class="line"><a name="l01093"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9d6508ab6069e90b2680429618326b3f"> 1093</a></span>&#160;<span class="keyword">static</span> pid_t <a class="code" href="../../d5/d03/asterisk_8c.html#a9d6508ab6069e90b2680429618326b3f">safe_exec_prep</a>(<span class="keywordtype">int</span> dualfork)</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;{</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   pid_t pid;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="preprocessor">#if defined(HAVE_WORKING_FORK) || defined(HAVE_WORKING_VFORK)</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a6de8ef28c39cc39978497de1918bfd70">ast_replace_sigchld</a>();</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="preprocessor">#ifdef HAVE_WORKING_FORK</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   pid = fork();</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;   pid = vfork();</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   <span class="keywordflow">if</span> (pid == 0) {</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="preprocessor">#ifdef HAVE_CAP</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      cap_set_proc(<a class="code" href="../../d5/d03/asterisk_8c.html#a0e01e4a7836c72a22f08f824d366ffb0">child_cap</a>);</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="preprocessor">#ifdef HAVE_WORKING_FORK</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a8445b47cb18dde73b1b233358a25ed68">ast_opt_high_priority</a>) {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a4c46b35c4f4320b2f841520a849eee91">ast_set_priority</a>(0);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      }</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      <span class="comment">/* Close file descriptors and launch system command */</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#afcbfdd6dfc8c5f0f549b0a5d7e263e97">ast_close_fds_above_n</a>(STDERR_FILENO);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">if</span> (dualfork) {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="preprocessor">#ifdef HAVE_WORKING_FORK</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;         pid = fork();</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;         pid = vfork();</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;         <span class="keywordflow">if</span> (pid &lt; 0) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            <span class="comment">/* Second fork failed. */</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            <span class="comment">/* No logger available. */</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            _exit(1);</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;         }</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;         <span class="keywordflow">if</span> (pid &gt; 0) {</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            <span class="comment">/* This is the first fork, exit so the reaper finishes right away. */</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            _exit(0);</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;         }</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;         <span class="comment">/* This is the second fork.  The first fork will exit immediately so</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">          * Asterisk doesn&#39;t have to wait for completion.</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">          * ast_safe_system(&quot;cmd &amp;&quot;) would run in the background, but the &#39;&amp;&#39;</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">          * cannot be added with ast_safe_execvp, so we have to double fork.</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;   }</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;   <span class="keywordflow">if</span> (pid &lt; 0) {</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Fork failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   }</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Fork failed: %s\n&quot;</span>, strerror(ENOTSUP));</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   pid = -1;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   <span class="keywordflow">return</span> pid;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;}</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">/*! \brief wait for spawned application to complete and unreplace sigchld */</span></div><div class="line"><a name="l01154"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a31165a09181d49dfcbdadaa2223c5479"> 1154</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a31165a09181d49dfcbdadaa2223c5479">safe_exec_wait</a>(pid_t pid)</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;{</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="preprocessor">#if defined(HAVE_WORKING_FORK) || defined(HAVE_WORKING_VFORK)</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   <span class="keywordflow">if</span> (pid &gt; 0) {</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;         <span class="keywordtype">int</span> <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;         res = waitpid(pid, &amp;status, 0);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;         <span class="keywordflow">if</span> (res &gt; -1) {</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            res = <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#aa5fda3caf01a15f80a9f2542ccc67b94">WIFEXITED</a>(status) ? <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#a77f17ed4771a558a0f16e5f3aecee222">WEXITSTATUS</a>(status) : -1;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;         }</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EINTR) {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;         }</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      }</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;   }</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#ad7c2a7da4125347c06d9719580731228">ast_unreplace_sigchld</a>();</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;}</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div><div class="line"><a name="l01180"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a410801e106c09f15f766d98f27b2852d"> 1180</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a410801e106c09f15f766d98f27b2852d">ast_safe_execvp</a>(<span class="keywordtype">int</span> dualfork, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, <span class="keywordtype">char</span> *<span class="keyword">const</span> argv[])</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;{</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   pid_t pid = <a class="code" href="../../d5/d03/asterisk_8c.html#a9d6508ab6069e90b2680429618326b3f">safe_exec_prep</a>(dualfork);</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   <span class="keywordflow">if</span> (pid == 0) {</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      execvp(file, argv);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      _exit(1);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <span class="comment">/* noreturn from _exit */</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;   }</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a31165a09181d49dfcbdadaa2223c5479">safe_exec_wait</a>(pid);</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;}</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9fb5cf0385848033ee3e98625e5f9784"> 1193</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a9fb5cf0385848033ee3e98625e5f9784">ast_safe_system</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s)</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;{</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;   pid_t pid = <a class="code" href="../../d5/d03/asterisk_8c.html#a9d6508ab6069e90b2680429618326b3f">safe_exec_prep</a>(0);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   <span class="keywordflow">if</span> (pid == 0) {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      execl(<span class="stringliteral">&quot;/bin/sh&quot;</span>, <span class="stringliteral">&quot;/bin/sh&quot;</span>, <span class="stringliteral">&quot;-c&quot;</span>, s, (<span class="keywordtype">char</span> *) <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      _exit(1);</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="comment">/* noreturn from _exit */</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   }</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a31165a09181d49dfcbdadaa2223c5479">safe_exec_wait</a>(pid);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;}</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment"> * \brief enable or disable a logging level to a specified console</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01209"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a4f8c3e6c4cf3b41470b9df95f046a48d"> 1209</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a4f8c3e6c4cf3b41470b9df95f046a48d">ast_console_toggle_loglevel</a>(<span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, <span class="keywordtype">int</span> level, <span class="keywordtype">int</span> <a class="code" href="../../d4/d88/structstate.html">state</a>)</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;{</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;   <span class="keywordflow">if</span> (level &gt;= <a class="code" href="../../d1/d8c/logger_8h.html#a3d02ffd5809bdb049c815df859bbfcf4">NUMLOGLEVELS</a>) {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      level = <a class="code" href="../../d1/d8c/logger_8h.html#a3d02ffd5809bdb049c815df859bbfcf4">NUMLOGLEVELS</a> - 1;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;   }</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;   <span class="keywordflow">for</span> (x = 0;x &lt; <a class="code" href="../../d5/d03/asterisk_8c.html#a6d5a16b321d54d9be2b0592881329fdf">AST_MAX_CONNECTS</a>; x++) {</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      <span class="keywordflow">if</span> (fd == <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].fd) {</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment">          * Since the logging occurs when levels are false, set to</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">          * flipped iinput because this function accepts 0 as off and 1 as on</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#af74c640613d859156463a4ba7436f023">levels</a>[level] = state ? 0 : 1;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      }</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   }</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;}</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment"> * \brief mute or unmute a console from logging</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01232"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a564debc26032b2a42212ac285b4113de"> 1232</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a564debc26032b2a42212ac285b4113de">ast_console_toggle_mute</a>(<span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, <span class="keywordtype">int</span> silent)</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;{</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   <span class="keywordflow">for</span> (x = 0;x &lt; <a class="code" href="../../d5/d03/asterisk_8c.html#a6d5a16b321d54d9be2b0592881329fdf">AST_MAX_CONNECTS</a>; x++) {</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      <span class="keywordflow">if</span> (fd == <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].fd) {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a>) {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a> = 0;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            <span class="keywordflow">if</span> (!silent)</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;Console is not muted anymore.\n&quot;</span>);</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a> = 1;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            <span class="keywordflow">if</span> (!silent)</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;Console is muted.\n&quot;</span>);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;         }</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      }</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;Couldn&#39;t find remote console.\n&quot;</span>);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;}</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment"> * \brief log the string to all attached network console clients</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01255"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a36814ac1908cc05a3bd075505323484c"> 1255</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a36814ac1908cc05a3bd075505323484c">ast_network_puts_mutable</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">string</span>, <span class="keywordtype">int</span> level, <span class="keywordtype">int</span> sublevel)</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;{</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d5/d03/asterisk_8c.html#a6d5a16b321d54d9be2b0592881329fdf">AST_MAX_CONNECTS</a>; ++x) {</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a> &lt; 0</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;         || <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;         || <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#af74c640613d859156463a4ba7436f023">levels</a>[level]</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;         || (level == <a class="code" href="../../d1/d8c/logger_8h.html#aa11fae1314f286da3d57ae8c07ec4bca">__LOG_VERBOSE</a> &amp;&amp; <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a> &lt; sublevel)) {</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      }</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a5fdbbc0b9ac75fff436821b5c16c3442">fdprint</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a67bfc5276dfe3c0f1174ebc9ce9d7d31">p</a>[1], <span class="keywordtype">string</span>);</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;   }</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;}</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment"> * \brief log the string to the root console, and all attached</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment"> * network console clients</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01274"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a6b74ef8709c2a8f00f06c0933ca993a1"> 1274</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a6b74ef8709c2a8f00f06c0933ca993a1">ast_console_puts_mutable</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">string</span>, <span class="keywordtype">int</span> level)</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;{</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#ae7ff139d2c02940102c3881091670f47">ast_console_puts_mutable_full</a>(<span class="keywordtype">string</span>, level, 0);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;}</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a7fc8eb444c6b6297888929ccb6828761">console_print</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ae7ff139d2c02940102c3881091670f47"> 1281</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ae7ff139d2c02940102c3881091670f47">ast_console_puts_mutable_full</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>, <span class="keywordtype">int</span> level, <span class="keywordtype">int</span> sublevel)</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;{</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;   <span class="comment">/* Send to the root console */</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a7fc8eb444c6b6297888929ccb6828761">console_print</a>(message);</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;   <span class="comment">/* Wake up a poll()ing console */</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a4fe31af40146104d64d4a31535e44400">ast_opt_console</a> &amp;&amp; <a class="code" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      pthread_kill(<a class="code" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a>, SIGURG);</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;   }</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;   <span class="comment">/* Send to any network console clients */</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a36814ac1908cc05a3bd075505323484c">ast_network_puts_mutable</a>(message, level, sublevel);</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;}</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment"> * \brief write the string to all attached console clients</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01298"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a72d371bd0b4daedd44ad33b25dd52ca6"> 1298</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a72d371bd0b4daedd44ad33b25dd52ca6">ast_network_puts</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">string</span>)</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;{</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d5/d03/asterisk_8c.html#a6d5a16b321d54d9be2b0592881329fdf">AST_MAX_CONNECTS</a>; ++x) {</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a> &lt; 0) {</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      }</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a5fdbbc0b9ac75fff436821b5c16c3442">fdprint</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a67bfc5276dfe3c0f1174ebc9ce9d7d31">p</a>[1], <span class="keywordtype">string</span>);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;   }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;}</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment"> * \brief write the string to the root console, and all attached</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="comment"> * network console clients</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01314"></a><span class="lineno"><a class="line" href="../../d4/dc5/extconf_8c.html#a7eae484e1a5e9cfb728cf9e4aea88fc7"> 1314</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a7eae484e1a5e9cfb728cf9e4aea88fc7">ast_console_puts</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">string</span>)</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;{</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   <span class="comment">/* Send to the root console */</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   fputs(<span class="keywordtype">string</span>, stdout);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   fflush(stdout);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;   <span class="comment">/* Send to any network console clients */</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a72d371bd0b4daedd44ad33b25dd52ca6">ast_network_puts</a>(<span class="keywordtype">string</span>);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;}</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div><div class="line"><a name="l01324"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a34ba5e4743afbb6fffbd2eb9900622ca"> 1324</a></span>&#160;<span class="keyword">static</span> pthread_t <a class="code" href="../../d5/d03/asterisk_8c.html#a34ba5e4743afbb6fffbd2eb9900622ca">lthread</a>;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment"> * \brief read() function supporting the reception of user credentials.</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment"> * \param fd Socket file descriptor.</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="comment"> * \param buffer Receive buffer.</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment"> * \param size &#39;buffer&#39; size.</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="comment"> * \param con Console structure to set received credentials</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment"> * \retval -1 on error</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment"> * \retval the number of bytes received on success.</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01336"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a7440e4273bc09db8927cebbfe6adfdbe"> 1336</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a7440e4273bc09db8927cebbfe6adfdbe">read_credentials</a>(<span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, <span class="keywordtype">char</span> *buffer, <span class="keywordtype">size_t</span> size, <span class="keyword">struct</span> <a class="code" href="../../df/d87/structconsole.html">console</a> *con)</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;{</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="preprocessor">#if defined(SO_PEERCRED)</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="preprocessor">#ifdef HAVE_STRUCT_SOCKPEERCRED_UID</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="preprocessor">#define HAVE_STRUCT_UCRED_UID</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   <span class="keyword">struct </span>sockpeercred cred;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   <span class="keyword">struct </span>ucred cred;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;   socklen_t <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = <span class="keyword">sizeof</span>(cred);</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="preprocessor">#if defined(HAVE_GETPEEREID)</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   uid_t <a class="code" href="../../df/d87/structconsole.html#a60a34315f460179939054acaf3ed8163">uid</a>;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;   gid_t <a class="code" href="../../df/d87/structconsole.html#a6567680a890171fbaa1a026477a858d3">gid</a>;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#a60a34315f460179939054acaf3ed8163">uid</a>, <a class="code" href="../../df/d87/structconsole.html#a6567680a890171fbaa1a026477a858d3">gid</a>;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;   result = read(fd, buffer, size);</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   <span class="keywordflow">if</span> (result &lt; 0) {</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   }</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="preprocessor">#if defined(SO_PEERCRED) &amp;&amp; (defined(HAVE_STRUCT_UCRED_UID) || defined(HAVE_STRUCT_UCRED_CR_UID))</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;   <span class="keywordflow">if</span> (getsockopt(fd, SOL_SOCKET, SO_PEERCRED, &amp;cred, &amp;len)) {</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   }</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="preprocessor">#if defined(HAVE_STRUCT_UCRED_UID)</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   uid = cred.uid;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   gid = cred.gid;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* defined(HAVE_STRUCT_UCRED_CR_UID) */</span><span class="preprocessor"></span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;   uid = cred.cr_uid;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   gid = cred.cr_gid;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* defined(HAVE_STRUCT_UCRED_UID) */</span><span class="preprocessor"></span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="preprocessor">#elif defined(HAVE_GETPEEREID)</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;   <span class="keywordflow">if</span> (getpeereid(fd, &amp;uid, &amp;gid)) {</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   }</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;   con-&gt;<a class="code" href="../../df/d87/structconsole.html#a60a34315f460179939054acaf3ed8163">uid</a> = <a class="code" href="../../df/d87/structconsole.html#a60a34315f460179939054acaf3ed8163">uid</a>;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;   con-&gt;<a class="code" href="../../df/d87/structconsole.html#a6567680a890171fbaa1a026477a858d3">gid</a> = <a class="code" href="../../df/d87/structconsole.html#a6567680a890171fbaa1a026477a858d3">gid</a>;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;}</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">/* This is the thread running the remote console on the main process. */</span></div><div class="line"><a name="l01386"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a606ead257c7d0251adf7739b1a5aac53"> 1386</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a606ead257c7d0251adf7739b1a5aac53">netconsole</a>(<span class="keywordtype">void</span> *vconsole)</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;{</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d87/structconsole.html">console</a> *con = vconsole;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a1b83df0dadc999c990245143b83292a0">hostname</a>[<a class="code" href="../../d9/d94/network_8h.html#afd80ecbe3170ca4fc85b65cda8659f82">MAXHOSTNAMELEN</a>] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dc/df4/app__voicemail_8c.html#ac70fbae4ed48b5b48ff4b49f01e29f86">inbuf</a>[512];</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <span class="keywordtype">char</span> outbuf[512];</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> end_buf = inbuf + <span class="keyword">sizeof</span>(<a class="code" href="../../dc/df4/app__voicemail_8c.html#ac70fbae4ed48b5b48ff4b49f01e29f86">inbuf</a>);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;   <span class="keywordtype">char</span> *start_read = <a class="code" href="../../dc/df4/app__voicemail_8c.html#ac70fbae4ed48b5b48ff4b49f01e29f86">inbuf</a>;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;   <span class="keyword">struct </span>pollfd fds[2];</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;   <span class="keywordflow">if</span> (gethostname(hostname, <span class="keyword">sizeof</span>(hostname)-1))</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(hostname, <span class="stringliteral">&quot;&lt;Unknown&gt;&quot;</span>, <span class="keyword">sizeof</span>(hostname));</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;   snprintf(outbuf, <span class="keyword">sizeof</span>(outbuf), <span class="stringliteral">&quot;%s/%ld/%s\n&quot;</span>, hostname, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d03/asterisk_8c.html#ae1517891417ae2f6e398e95ae79dadf1">ast_mainpid</a>, <a class="code" href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a>());</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a5fdbbc0b9ac75fff436821b5c16c3442">fdprint</a>(con-&gt;<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, outbuf);</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a32a16834a00172c3284070e6d6d38f47">ast_verb_console_register</a>(&amp;con-&gt;<a class="code" href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a>);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      fds[0].fd = con-&gt;<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      fds[0].events = POLLIN;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      fds[0].revents = 0;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      fds[1].fd = con-&gt;<a class="code" href="../../df/d87/structconsole.html#a67bfc5276dfe3c0f1174ebc9ce9d7d31">p</a>[0];</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      fds[1].events = POLLIN;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      fds[1].revents = 0;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      res = <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(fds, 2, -1);</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EINTR)</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;poll returned &lt; 0: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      }</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      <span class="keywordflow">if</span> (fds[0].revents) {</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;         <span class="keywordtype">int</span> cmds_read, bytes_read;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;         <span class="keywordflow">if</span> ((bytes_read = <a class="code" href="../../d5/d03/asterisk_8c.html#a7440e4273bc09db8927cebbfe6adfdbe">read_credentials</a>(con-&gt;<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, start_read, end_buf - start_read, con)) &lt; 1) {</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;         }</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;         <span class="comment">/* XXX This will only work if it is the first command, and I&#39;m not sure fixing it is worth the effort. */</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;         <span class="keywordflow">if</span> (strncmp(inbuf, <span class="stringliteral">&quot;cli quit after &quot;</span>, 15) == 0) {</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#ab1d4a1fb19a2a81cc450e1173b346eca">ast_cli_command_multiple_full</a>(con-&gt;<a class="code" href="../../df/d87/structconsole.html#a60a34315f460179939054acaf3ed8163">uid</a>, con-&gt;<a class="code" href="../../df/d87/structconsole.html#a6567680a890171fbaa1a026477a858d3">gid</a>, con-&gt;<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, bytes_read - 15, inbuf + 15);</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;         }</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;         <span class="comment">/* ast_cli_command_multiple_full will only process individual commands terminated by a</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment">          * NULL and not trailing partial commands. */</span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;         <span class="keywordflow">if</span> (!(cmds_read = <a class="code" href="../../dc/db0/cli_8h.html#ab1d4a1fb19a2a81cc450e1173b346eca">ast_cli_command_multiple_full</a>(con-&gt;<a class="code" href="../../df/d87/structconsole.html#a60a34315f460179939054acaf3ed8163">uid</a>, con-&gt;<a class="code" href="../../df/d87/structconsole.html#a6567680a890171fbaa1a026477a858d3">gid</a>, con-&gt;<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, bytes_read + start_read - inbuf, inbuf))) {</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;            <span class="comment">/* No commands were read. We either have a short read on the first command</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment">             * with space left, or a command that is too long */</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;            <span class="keywordflow">if</span> (start_read + bytes_read &lt; end_buf) {</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;               start_read += bytes_read;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Command too long! Skipping\n&quot;</span>);</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;               start_read = <a class="code" href="../../dc/df4/app__voicemail_8c.html#ac70fbae4ed48b5b48ff4b49f01e29f86">inbuf</a>;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;            }</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;         }</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;         <span class="keywordflow">if</span> (start_read[bytes_read - 1] == <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            <span class="comment">/* The read ended on a command boundary, start reading again at the head of inbuf */</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;            start_read = <a class="code" href="../../dc/df4/app__voicemail_8c.html#ac70fbae4ed48b5b48ff4b49f01e29f86">inbuf</a>;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;         }</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;         <span class="comment">/* If we get this far, we have left over characters that have not been processed.</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="comment">          * Advance to the character after the last command read by ast_cli_command_multiple_full.</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment">          * We are guaranteed to have at least cmds_read NULLs */</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;         <span class="keywordflow">while</span> (cmds_read-- &amp;&amp; (start_read = strchr(start_read, <span class="charliteral">&#39;\0&#39;</span>))) {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            start_read++;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;         }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;         memmove(inbuf, start_read, end_buf - start_read);</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;         start_read = end_buf - start_read + <a class="code" href="../../dc/df4/app__voicemail_8c.html#ac70fbae4ed48b5b48ff4b49f01e29f86">inbuf</a>;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      }</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      <span class="keywordflow">if</span> (fds[1].revents) {</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;         res = <a class="code" href="../../d5/d03/asterisk_8c.html#a7440e4273bc09db8927cebbfe6adfdbe">read_credentials</a>(con-&gt;<a class="code" href="../../df/d87/structconsole.html#a67bfc5276dfe3c0f1174ebc9ce9d7d31">p</a>[0], outbuf, <span class="keyword">sizeof</span>(outbuf), con);</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;         <span class="keywordflow">if</span> (res &lt; 1) {</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;read returned %d\n&quot;</span>, res);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;         }</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;         res = write(con-&gt;<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, outbuf, res);</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;         <span class="keywordflow">if</span> (res &lt; 1)</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      }</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   }</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a29974a7eb3d1e79c16d6923189a82f53">ast_verb_console_unregister</a>();</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d5b/options_8h.html#a6b1d9f4913ebf24f80c68a75bb002700">ast_opt_hide_connect</a>) {</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Remote UNIX connection disconnected\n&quot;</span>);</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;   }</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;   close(con-&gt;<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;   close(con-&gt;<a class="code" href="../../df/d87/structconsole.html#a67bfc5276dfe3c0f1174ebc9ce9d7d31">p</a>[0]);</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;   close(con-&gt;<a class="code" href="../../df/d87/structconsole.html#a67bfc5276dfe3c0f1174ebc9ce9d7d31">p</a>[1]);</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;   con-&gt;<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = -1;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;}</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div><div class="line"><a name="l01476"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34"> 1476</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>(<span class="keywordtype">void</span> *unused)</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;{</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   <span class="keyword">struct </span>sockaddr_un sunaddr;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;   <span class="keywordtype">int</span> s;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;   socklen_t <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;   <span class="keywordtype">int</span> poll_result;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   <span class="keyword">struct </span>pollfd fds[1];</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a> &lt; 0) {</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;      }</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      fds[0].fd = <a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a>;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;      fds[0].events = POLLIN;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      poll_result = <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(fds, 1, -1);</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      pthread_testcancel();</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      <span class="keywordflow">if</span> (poll_result &lt; 0) {</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EINTR) {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;poll returned error: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;         }</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      }</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      len = <span class="keyword">sizeof</span>(sunaddr);</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      s = accept(<a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a>, (<span class="keyword">struct</span> sockaddr *)&amp;sunaddr, &amp;len);</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      <span class="keywordflow">if</span> (s &lt; 0) {</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EINTR)</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Accept returned %d: %s\n&quot;</span>, s, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<span class="preprocessor">#if defined(SO_PASSCRED)</span></div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;         <span class="keywordtype">int</span> sckopt = 1;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;         <span class="comment">/* turn on socket credentials passing. */</span></div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;         <span class="keywordflow">if</span> (setsockopt(s, SOL_SOCKET, SO_PASSCRED, &amp;sckopt, <span class="keyword">sizeof</span>(sckopt)) &lt; 0) {</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to turn on socket credentials passing\n&quot;</span>);</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;            close(s);</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;         {</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;            <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d5/d03/asterisk_8c.html#a6d5a16b321d54d9be2b0592881329fdf">AST_MAX_CONNECTS</a>; x++) {</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a> &gt;= 0) {</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;               }</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;               <span class="keywordflow">if</span> (socketpair(<a class="code" href="../../d5/d03/asterisk_8c.html#ae24f1f9ea44fcce3affcb2137f593dc1">AF_LOCAL</a>, SOCK_STREAM, 0, <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a67bfc5276dfe3c0f1174ebc9ce9d7d31">p</a>)) {</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create pipe: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                  <a class="code" href="../../d5/d03/asterisk_8c.html#a5fdbbc0b9ac75fff436821b5c16c3442">fdprint</a>(s, <span class="stringliteral">&quot;Server failed to create pipe\n&quot;</span>);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                  close(s);</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;               }</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#a85392708ff0d7ed6fb86ff83f0e714c3">ast_fd_set_flags</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].p[1], O_NONBLOCK);</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;               <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a> = 1; <span class="comment">/* Default is muted, we will un-mute if necessary */</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;               <span class="comment">/* Default uid and gid to -2, so then in cli.c/cli_has_permissions() we will be able</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<span class="comment">                  to know if the user didn&#39;t send the credentials. */</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;               <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a60a34315f460179939054acaf3ed8163">uid</a> = -2;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;               <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a6567680a890171fbaa1a026477a858d3">gid</a> = -2;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;               <span class="comment">/* Server default of remote console verbosity level is OFF. */</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;               <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a> = 0;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;               <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = s;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#aa73be876e3a4024b91ce2e09d8b945d1">ast_pthread_create_detached_background</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#aa49d6a06775253352589280dc7f30018">t</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d03/asterisk_8c.html#a606ead257c7d0251adf7739b1a5aac53">netconsole</a>, &amp;<a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x])) {</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                  <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = -1;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to spawn thread to handle connection: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                  close(<a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].p[0]);</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                  close(<a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].p[1]);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                  <a class="code" href="../../d5/d03/asterisk_8c.html#a5fdbbc0b9ac75fff436821b5c16c3442">fdprint</a>(s, <span class="stringliteral">&quot;Server failed to spawn thread\n&quot;</span>);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                  close(s);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;               }</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;            }</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;            <span class="keywordflow">if</span> (x &gt;= AST_MAX_CONNECTS) {</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;               <a class="code" href="../../d5/d03/asterisk_8c.html#a5fdbbc0b9ac75fff436821b5c16c3442">fdprint</a>(s, <span class="stringliteral">&quot;No more connections allowed\n&quot;</span>);</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No more connections allowed\n&quot;</span>);</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;               close(s);</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a> &gt; -1) &amp;&amp; (!<a class="code" href="../../d7/d5b/options_8h.html#a6b1d9f4913ebf24f80c68a75bb002700">ast_opt_hide_connect</a>)) {</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Remote UNIX connection\n&quot;</span>);</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;            }</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;         }</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      }</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   }</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;}</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ab08a4af1fa3e6efc9a1242ded75e0437"> 1556</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ab08a4af1fa3e6efc9a1242ded75e0437">ast_makesocket</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;{</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;   <span class="keyword">struct </span>sockaddr_un sunaddr;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;   uid_t <a class="code" href="../../df/d87/structconsole.html#a60a34315f460179939054acaf3ed8163">uid</a> = -1;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;   gid_t <a class="code" href="../../df/d87/structconsole.html#a6567680a890171fbaa1a026477a858d3">gid</a> = -1;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d5/d03/asterisk_8c.html#a6d5a16b321d54d9be2b0592881329fdf">AST_MAX_CONNECTS</a>; x++) {</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a>[x].<a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = -1;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;   }</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a0de92246f6a87060b319bf4a27c2737d">ast_socket_is_sd</a>) {</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a> = <a class="code" href="../../dc/dac/io_8h.html#acdeb34f795e42860ee8ea37a277c16d5">ast_sd_get_fd_un</a>(SOCK_STREAM, <a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>);</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;      <span class="keywordflow">goto</span> start_lthread;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;   }</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;   unlink(<a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>);</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a> = socket(<a class="code" href="../../d5/d03/asterisk_8c.html#a521c315ca2a2a4e6345878e84af4085e">PF_LOCAL</a>, SOCK_STREAM, 0);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a> &lt; 0) {</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create control socket: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;   }</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;   memset(&amp;sunaddr, 0, <span class="keyword">sizeof</span>(sunaddr));</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;   sunaddr.sun_family = <a class="code" href="../../d5/d03/asterisk_8c.html#ae24f1f9ea44fcce3affcb2137f593dc1">AF_LOCAL</a>;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(sunaddr.sun_path, <a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>, <span class="keyword">sizeof</span>(sunaddr.sun_path));</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;   res = bind(<a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a>, (<span class="keyword">struct</span> sockaddr *)&amp;sunaddr, <span class="keyword">sizeof</span>(sunaddr));</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to bind socket to %s: %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      close(<a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a>);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a> = -1;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   }</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   res = listen(<a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a>, 2);</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to listen on socket %s: %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      close(<a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a>);</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a> = -1;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;   }</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;start_lthread:</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a>(&amp;lthread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create listener thread.\n&quot;</span>);</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      close(<a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a>);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;   }</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a0de92246f6a87060b319bf4a27c2737d">ast_socket_is_sd</a>) {</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      <span class="comment">/* owner/group/permissions are set by systemd, we might not even have access</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="comment">       * to socket file so leave it alone */</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;   }</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../dd/df2/paths_8h.html#af5c83ec4559539e0f9602d376a2fac2f">ast_config_AST_CTL_OWNER</a>)) {</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="keyword">struct </span>passwd *pw;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      <span class="keywordflow">if</span> ((pw = getpwnam(<a class="code" href="../../dd/df2/paths_8h.html#af5c83ec4559539e0f9602d376a2fac2f">ast_config_AST_CTL_OWNER</a>)) == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to find uid of user %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#af5c83ec4559539e0f9602d376a2fac2f">ast_config_AST_CTL_OWNER</a>);</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;         uid = pw-&gt;pw_uid;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;   }</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../dd/df2/paths_8h.html#a4ff6abee16f0d7503985adb203b06223">ast_config_AST_CTL_GROUP</a>)) {</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d3/d08/structgroup.html">group</a> *grp;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <span class="keywordflow">if</span> ((grp = getgrnam(<a class="code" href="../../dd/df2/paths_8h.html#a4ff6abee16f0d7503985adb203b06223">ast_config_AST_CTL_GROUP</a>)) == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to find gid of group %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a4ff6abee16f0d7503985adb203b06223">ast_config_AST_CTL_GROUP</a>);</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;         gid = grp-&gt;gr_gid;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;   }</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;   <span class="keywordflow">if</span> (chown(<a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>, uid, gid) &lt; 0)</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to change ownership of %s: %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../dd/df2/paths_8h.html#a3c65414632642690e67a142dd9b594d3">ast_config_AST_CTL_PERMISSIONS</a>)) {</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p1;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      mode_t <a class="code" href="../../df/d87/structconsole.html#a67bfc5276dfe3c0f1174ebc9ce9d7d31">p</a>;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      sscanf(<a class="code" href="../../dd/df2/paths_8h.html#a3c65414632642690e67a142dd9b594d3">ast_config_AST_CTL_PERMISSIONS</a>, <span class="stringliteral">&quot;%30o&quot;</span>, &amp;p1);</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      p = p1;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      <span class="keywordflow">if</span> ((chmod(<a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>, p)) &lt; 0)</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to change file permissions of %s: %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;   }</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;}</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;</div><div class="line"><a name="l01642"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ab48b6f8cdddee48aed2f4fba4a6c18fe"> 1642</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ab48b6f8cdddee48aed2f4fba4a6c18fe">ast_tryconnect</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;{</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;   <span class="keyword">struct </span>sockaddr_un sunaddr;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a> = socket(<a class="code" href="../../d5/d03/asterisk_8c.html#a521c315ca2a2a4e6345878e84af4085e">PF_LOCAL</a>, SOCK_STREAM, 0);</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a> &lt; 0) {</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;Unable to create socket: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   }</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;   memset(&amp;sunaddr, 0, <span class="keyword">sizeof</span>(sunaddr));</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;   sunaddr.sun_family = <a class="code" href="../../d5/d03/asterisk_8c.html#ae24f1f9ea44fcce3affcb2137f593dc1">AF_LOCAL</a>;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(sunaddr.sun_path, <a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>, <span class="keyword">sizeof</span>(sunaddr.sun_path));</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;   res = connect(<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>, (<span class="keyword">struct</span> sockaddr *)&amp;sunaddr, <span class="keyword">sizeof</span>(sunaddr));</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      close(<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>);</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a> = -1;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;}</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment">/*! \brief Urgent handler</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment"> * Called by soft_hangup to interrupt the poll, read, or other</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="comment"> * system call.  We don&#39;t actually need to do anything though.</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="comment"> * Remember: Cannot EVER ast_log from within a signal handler</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01669"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a14a2a4e74d0139c8299a5b1042957ca0"> 1669</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a14a2a4e74d0139c8299a5b1042957ca0">_urg_handler</a>(<span class="keywordtype">int</span> num)</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;{</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;}</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;</div><div class="line"><a name="l01674"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#afc5c3c753e2bc7d51948a7c70430253f"> 1674</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span>sigaction <a class="code" href="../../d5/d03/asterisk_8c.html#afc5c3c753e2bc7d51948a7c70430253f">urg_handler</a> = {</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;   .sa_handler = <a class="code" href="../../d5/d03/asterisk_8c.html#a14a2a4e74d0139c8299a5b1042957ca0">_urg_handler</a>,</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;};</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;</div><div class="line"><a name="l01678"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a34228ebf05a22e6cdfe13385312f090a"> 1678</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a34228ebf05a22e6cdfe13385312f090a">_hup_handler</a>(<span class="keywordtype">int</span> num)</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;{</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;   <span class="keywordtype">int</span> save_errno = <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a8fbb0f40e9c839384d728aa8e0958dfb">restartnow</a>) {</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>) {</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;         el_end(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>);</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;      }</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      execvp(<a class="code" href="../../d5/d03/asterisk_8c.html#aac76ac35350d1efd9ddfe5b56739c649">_argv</a>[0], <a class="code" href="../../d5/d03/asterisk_8c.html#aac76ac35350d1efd9ddfe5b56739c649">_argv</a>);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;   }</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;   printf(<span class="stringliteral">&quot;Received HUP signal -- Reloading configs\n&quot;</span>);</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_reload = 1;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d4d/alertpipe_8h.html#a3c1d9ad40416df5adef7cc213e87d88b">ast_alertpipe_write</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a7bb419fdb0040da24ecbb651b12395fc">sig_alert_pipe</a>)) {</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;hup_handler: write() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;   }</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;   <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = save_errno;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;}</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;</div><div class="line"><a name="l01697"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a5e5307545c681757e6715442933918d3"> 1697</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span>sigaction <a class="code" href="../../d5/d03/asterisk_8c.html#a5e5307545c681757e6715442933918d3">hup_handler</a> = {</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;   .sa_handler = <a class="code" href="../../d5/d03/asterisk_8c.html#a34228ebf05a22e6cdfe13385312f090a">_hup_handler</a>,</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;   .sa_flags = SA_RESTART,</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;};</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;</div><div class="line"><a name="l01702"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a6b728a12124051e12d74874f1b1cce02"> 1702</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a6b728a12124051e12d74874f1b1cce02">_child_handler</a>(<span class="keywordtype">int</span> sig)</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;{</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;   <span class="comment">/* Must not ever ast_log or ast_verbose within signal handler */</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;   <span class="keywordtype">int</span> n, <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>, save_errno = <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;<span class="comment">    * Reap all dead children -- not just one</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;   <span class="keywordflow">for</span> (n = 0; waitpid(-1, &amp;status, WNOHANG) &gt; 0; n++)</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;      ;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;   <span class="keywordflow">if</span> (n == 0 &amp;&amp; <a class="code" href="../../d6/dd6/group__main__options.html#ga40f8fb2e731031d99f732f515cec680f">option_debug</a>)</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      printf(<span class="stringliteral">&quot;Huh?  Child handler, but nobody there?\n&quot;</span>);</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;   <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = save_errno;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;}</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;</div><div class="line"><a name="l01717"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a48b71b849c3bd235fa38ea4eb5411b43"> 1717</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span>sigaction <a class="code" href="../../d5/d03/asterisk_8c.html#a48b71b849c3bd235fa38ea4eb5411b43">child_handler</a> = {</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;   .sa_handler = <a class="code" href="../../d5/d03/asterisk_8c.html#a6b728a12124051e12d74874f1b1cce02">_child_handler</a>,</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;   .sa_flags = SA_RESTART,</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;};</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="comment">/*! \brief Set an X-term or screen title */</span></div><div class="line"><a name="l01723"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#aabb54677daf95f5c6f575645b1ccf46d"> 1723</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#aabb54677daf95f5c6f575645b1ccf46d">set_title</a>(<span class="keywordtype">char</span> *<a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>)</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;{</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;   <span class="keywordflow">if</span> (getenv(<span class="stringliteral">&quot;TERM&quot;</span>) &amp;&amp; strstr(getenv(<span class="stringliteral">&quot;TERM&quot;</span>), <span class="stringliteral">&quot;xterm&quot;</span>))</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      fprintf(stdout, <span class="stringliteral">&quot;\033]2;%s\007&quot;</span>, text);</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;}</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;</div><div class="line"><a name="l01729"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#aebef75d1917768a6921d6157becf0780"> 1729</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#aebef75d1917768a6921d6157becf0780">set_icon</a>(<span class="keywordtype">char</span> *<a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>)</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;{</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;   <span class="keywordflow">if</span> (getenv(<span class="stringliteral">&quot;TERM&quot;</span>) &amp;&amp; strstr(getenv(<span class="stringliteral">&quot;TERM&quot;</span>), <span class="stringliteral">&quot;xterm&quot;</span>))</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      fprintf(stdout, <span class="stringliteral">&quot;\033]1;%s\007&quot;</span>, text);</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;}</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;<span class="comment">/*! \brief Check whether we were set to high(er) priority. */</span></div><div class="line"><a name="l01736"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a5140408e6e156df6199d396995663335"> 1736</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a5140408e6e156df6199d396995663335">has_priority</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;{</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;   <span class="comment">/* Neither of these calls should fail with these arguments. */</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="preprocessor">#ifdef __linux__</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;   <span class="comment">/* For SCHED_OTHER, SCHED_BATCH and SCHED_IDLE, this will return</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;<span class="comment">    * 0. For the realtime priorities SCHED_RR and SCHED_FIFO, it</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="comment">    * will return something &gt;= 1. */</span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;   <span class="keywordflow">return</span> sched_getscheduler(0);</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;   <span class="comment">/* getpriority() can return a value in -20..19 (or even -INF..20)</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;<span class="comment">    * where negative numbers are high priority. We don&#39;t bother</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="comment">    * checking errno. If the query fails and it returns -1, we&#39;ll</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="comment">    * assume that we&#39;re running at high prio; a safe assumption</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;<span class="comment">    * that will enable the resource starvation monitor (canary)</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="comment">    * just in case. */</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;   <span class="keywordflow">return</span> (getpriority(PRIO_PROCESS, 0) &lt; 0);</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;}</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="comment">/*! \brief Set priority on all known threads. */</span></div><div class="line"><a name="l01756"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a63d2216bb22fe88d5f1e964a1b8e8c3f"> 1756</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a63d2216bb22fe88d5f1e964a1b8e8c3f">set_priority_all</a>(<span class="keywordtype">int</span> pri)</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;{</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="preprocessor">#if !defined(__linux__)</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   <span class="comment">/* The non-linux version updates the entire process prio. */</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a4c46b35c4f4320b2f841520a849eee91">ast_set_priority</a>(pri);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="preprocessor">#elif defined(LOW_MEMORY)</span></div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to enumerate all threads to update priority\n&quot;</span>);</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a4c46b35c4f4320b2f841520a849eee91">ast_set_priority</a>(pri);</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/dba/structthread__list__t.html">thread_list_t</a> *cur;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;   <span class="keyword">struct </span>sched_param sched;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;   <span class="keywordtype">char</span> <span class="keyword">const</span> *policy_str;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;   <span class="keywordtype">int</span> policy;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;   memset(&amp;sched, 0, <span class="keyword">sizeof</span>(sched));</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;   <span class="keywordflow">if</span> (pri) {</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      policy = SCHED_RR;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      policy_str = <span class="stringliteral">&quot;realtime&quot;</span>;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      sched.sched_priority = 10;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      policy = SCHED_OTHER;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      policy_str = <span class="stringliteral">&quot;regular&quot;</span>;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      sched.sched_priority = 0;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;   }</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/db2/asterisk_8h.html#a6d2a9d4bb3ad87d2d532018e5348dadb">sched_setscheduler</a>(getpid(), policy, &amp;sched)) {</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set %s thread priority on main thread\n&quot;</span>, policy_str);</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;   }</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(1, <span class="stringliteral">&quot;Setting %s thread priority on all threads\n&quot;</span>, policy_str);</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d1/dc3/structthread__list.html">thread_list</a>);</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d1/dc3/structthread__list.html">thread_list</a>, cur, list) {</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      <span class="comment">/* Don&#39;t care about the return value. It should work. */</span></div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <a class="code" href="../../db/db2/asterisk_8h.html#a6d2a9d4bb3ad87d2d532018e5348dadb">sched_setscheduler</a>(cur-&gt;lwp, policy, &amp;sched);</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;   }</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d1/dc3/structthread__list.html">thread_list</a>);</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;}</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;<span class="comment">/*! \brief We set ourselves to a high priority, that we might pre-empt</span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="comment"> * everything else.  If your PBX has heavy activity on it, this is a</span></div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;<span class="comment"> * good thing.</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01799"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a4c46b35c4f4320b2f841520a849eee91"> 1799</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a4c46b35c4f4320b2f841520a849eee91">ast_set_priority</a>(<span class="keywordtype">int</span> pri)</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;{</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;   <span class="keyword">struct </span>sched_param sched;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;   memset(&amp;sched, 0, <span class="keyword">sizeof</span>(sched));</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="preprocessor">#ifdef __linux__</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;   <span class="keywordflow">if</span> (pri) {</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;      sched.sched_priority = 10;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/db2/asterisk_8h.html#a6d2a9d4bb3ad87d2d532018e5348dadb">sched_setscheduler</a>(0, SCHED_RR, &amp;sched)) {</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;      }</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;      sched.sched_priority = 0;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      <span class="comment">/* According to the manpage, these parameters can never fail. */</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      <a class="code" href="../../db/db2/asterisk_8h.html#a6d2a9d4bb3ad87d2d532018e5348dadb">sched_setscheduler</a>(0, SCHED_OTHER, &amp;sched);</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;   }</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;   <span class="keywordflow">if</span> (pri) {</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/db2/asterisk_8h.html#aa074a86999c2684cd7ed271c4d275081">setpriority</a>(PRIO_PROCESS, 0, -10) == -1) {</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set high priority\n&quot;</span>);</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(1, <span class="stringliteral">&quot;Set to high priority\n&quot;</span>);</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      <span class="comment">/* According to the manpage, these parameters can never fail. */</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      <a class="code" href="../../db/db2/asterisk_8h.html#aa074a86999c2684cd7ed271c4d275081">setpriority</a>(PRIO_PROCESS, 0, 0);</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;   }</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;}</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;</div><div class="line"><a name="l01829"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a0eb0441c04955094ce5845fb0258645a"> 1829</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a0eb0441c04955094ce5845fb0258645a">ast_shutdown_final</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;{</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a> == <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59acf10aef13967cc149a7b37d7a4e5e693">SHUTTING_DOWN_FINAL</a>;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;}</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div><div class="line"><a name="l01834"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a6b112b17aed018d85c397e7591948793"> 1834</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a6b112b17aed018d85c397e7591948793">ast_shutting_down</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;{</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a775b228bc60d1c59c296268f70a1252d">shutdown_pending</a>;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;}</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;</div><div class="line"><a name="l01839"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a6e86798cc2f458f440d5130817d2ec7c"> 1839</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a6e86798cc2f458f440d5130817d2ec7c">ast_cancel_shutdown</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;{</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;   <span class="keywordtype">int</span> shutdown_aborted = 0;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a> &gt;= <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a12d28a6e5875c59040c79f31255b3cbd">SHUTDOWN_FAST</a>) {</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a> = <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59ad56f4e18962cb2a4927acb257b5e40f6">NOT_SHUTTING_DOWN</a>;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a775b228bc60d1c59c296268f70a1252d">shutdown_pending</a> = 0;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      shutdown_aborted = 1;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;   }</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;   <span class="keywordflow">return</span> shutdown_aborted;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;}</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;<span class="comment"> * \brief Initiate system shutdown -- prevents new channels from being allocated.</span></div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01857"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a65ac892ffadf889740bfac52a8061b50"> 1857</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a65ac892ffadf889740bfac52a8061b50">ast_begin_shutdown</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;{</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a> != <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59ad56f4e18962cb2a4927acb257b5e40f6">NOT_SHUTTING_DOWN</a>) {</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a775b228bc60d1c59c296268f70a1252d">shutdown_pending</a> = 1;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;   }</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;}</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#aaa1dc0162e321990505b87af8c8f7d50">can_safely_quit</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59">shutdown_nice_t</a> niceness, <span class="keywordtype">int</span> restart);</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ade931d879a5d2b6f4e91e16ded37cb74">really_quit</a>(<span class="keywordtype">int</span> num, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59">shutdown_nice_t</a> niceness, <span class="keywordtype">int</span> restart);</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;</div><div class="line"><a name="l01869"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd"> 1869</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(<span class="keywordtype">int</span> num, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59">shutdown_nice_t</a> niceness, <span class="keywordtype">int</span> restart)</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;{</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#aaa1dc0162e321990505b87af8c8f7d50">can_safely_quit</a>(niceness, restart)) {</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#ade931d879a5d2b6f4e91e16ded37cb74">really_quit</a>(num, niceness, restart);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      <span class="comment">/* No one gets here. */</span></div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;   }</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;   <span class="comment">/* It wasn&#39;t our time. */</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;}</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#aa405c1064890ab81b6d56c27d8e645ac"> 1878</a></span>&#160;<span class="preprocessor">#define SHUTDOWN_TIMEOUT   15 </span><span class="comment">/* Seconds */</span><span class="preprocessor"></span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="comment"> * \brief Wait for all channels to die, a timeout, or shutdown cancelled.</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment"> * \since 13.3.0</span></div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment"> * \param niceness Shutdown niceness in effect</span></div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="comment"> * \param seconds Number of seconds to wait or less than zero if indefinitely.</span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;<span class="comment"> * \retval zero if waiting wasn&#39;t necessary.  We were idle.</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="comment"> * \retval non-zero if we had to wait.</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01891"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#aad6040e397b4ed391082631a4fcefdda"> 1891</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#aad6040e397b4ed391082631a4fcefdda">wait_for_channels_to_die</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59">shutdown_nice_t</a> niceness, <span class="keywordtype">int</span> seconds)</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;{</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;   time_t start;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;   time_t now;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;   <span class="keywordtype">int</span> waited = 0;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;   time(&amp;start);</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a7d555920d6a7169e88251888010bf4de">ast_undestroyed_channels</a>() || <a class="code" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a> != niceness) {</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;      }</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      <span class="keywordflow">if</span> (seconds &lt; 0) {</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;         <span class="comment">/* No timeout so just poll every second */</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;         sleep(1);</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;         time(&amp;now);</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;         <span class="comment">/* Wait up to the given seconds for all channels to go away */</span></div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;         <span class="keywordflow">if</span> (seconds &lt; (now - start)) {</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;         }</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;         <span class="comment">/* Sleep 1/10 of a second */</span></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;         usleep(100000);</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      }</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      waited = 1;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;   }</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;   <span class="keywordflow">return</span> waited;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;}</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;</div><div class="line"><a name="l01921"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#aaa1dc0162e321990505b87af8c8f7d50"> 1921</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#aaa1dc0162e321990505b87af8c8f7d50">can_safely_quit</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59">shutdown_nice_t</a> niceness, <span class="keywordtype">int</span> restart)</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;{</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;   <span class="keywordtype">int</span> waited = 0;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;   <span class="comment">/* Check if someone else isn&#39;t already doing this. */</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a> != <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59ad56f4e18962cb2a4927acb257b5e40f6">NOT_SHUTTING_DOWN</a> &amp;&amp; niceness &gt;= <a class="code" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a>) {</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;      <span class="comment">/* Already in progress and other request was less nice. */</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Ignoring asterisk %s request, already in progress.\n&quot;</span>, restart ? <span class="stringliteral">&quot;restart&quot;</span> : <span class="stringliteral">&quot;shutdown&quot;</span>);</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;   }</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a> = niceness;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;   <span class="comment">/* Try to get as many CDRs as possible submitted to the backend engines</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="comment">    * (if in batch mode). really_quit happens to call it again when running</span></div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;<span class="comment">    * the atexit handlers, otherwise this would be a bit early. */</span></div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;   <a class="code" href="../../dc/d07/cdr_8h.html#a5634f8ea707fb2fdf87abdd55a539764">ast_cdr_engine_term</a>();</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;<span class="comment">    * Shutdown the message queue for the technology agnostic message channel.</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="comment">    * This has to occur before we pause shutdown pending ast_undestroyed_channels.</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment">    * XXX This is not reversed on shutdown cancel.</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#a1d5619ebb98bc129dfadf3a7a565f412">ast_msg_shutdown</a>();</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;   <span class="keywordflow">if</span> (niceness == <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a2a9246405d49261dae3926e7d5612d2c">SHUTDOWN_NORMAL</a>) {</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      <span class="comment">/* Begin shutdown routine, hanging up active channels */</span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a65ac892ffadf889740bfac52a8061b50">ast_begin_shutdown</a>();</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a4fe31af40146104d64d4a31535e44400">ast_opt_console</a>) {</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(0, <span class="stringliteral">&quot;Beginning asterisk %s....\n&quot;</span>, restart ? <span class="stringliteral">&quot;restart&quot;</span> : <span class="stringliteral">&quot;shutdown&quot;</span>);</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      }</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a0af1a0f8665f21a658864a731eea78c0">ast_softhangup_all</a>();</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      waited |= <a class="code" href="../../d5/d03/asterisk_8c.html#aad6040e397b4ed391082631a4fcefdda">wait_for_channels_to_die</a>(niceness, <a class="code" href="../../d5/d03/asterisk_8c.html#aa405c1064890ab81b6d56c27d8e645ac">SHUTDOWN_TIMEOUT</a>);</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (niceness &gt;= <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a704981d4ddccbee50fabd8bed58b01dd">SHUTDOWN_NICE</a>) {</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;      <span class="keywordflow">if</span> (niceness != <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59aa3d6008dbedd1154cfadf33b24f3efa6">SHUTDOWN_REALLY_NICE</a>) {</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a65ac892ffadf889740bfac52a8061b50">ast_begin_shutdown</a>();</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;      }</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a4fe31af40146104d64d4a31535e44400">ast_opt_console</a>) {</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(0, <span class="stringliteral">&quot;Waiting for inactivity to perform %s...\n&quot;</span>, restart ? <span class="stringliteral">&quot;restart&quot;</span> : <span class="stringliteral">&quot;halt&quot;</span>);</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      }</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      waited |= <a class="code" href="../../d5/d03/asterisk_8c.html#aad6040e397b4ed391082631a4fcefdda">wait_for_channels_to_die</a>(niceness, -1);</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;   }</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;   <span class="comment">/* Re-acquire lock and check if someone changed the niceness, in which</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;<span class="comment">    * case someone else has taken over the shutdown.</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a> != niceness) {</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a> == <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59ad56f4e18962cb2a4927acb257b5e40f6">NOT_SHUTTING_DOWN</a> &amp;&amp; <a class="code" href="../../d7/d5b/options_8h.html#a4fe31af40146104d64d4a31535e44400">ast_opt_console</a>) {</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(0, <span class="stringliteral">&quot;Asterisk %s cancelled.\n&quot;</span>, restart ? <span class="stringliteral">&quot;restart&quot;</span> : <span class="stringliteral">&quot;shutdown&quot;</span>);</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;      }</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;   }</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;   <span class="keywordflow">if</span> (niceness &gt;= <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59aa3d6008dbedd1154cfadf33b24f3efa6">SHUTDOWN_REALLY_NICE</a>) {</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a> = <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59aa864d272f8aa33e6b56ec6e2e58a08e2">SHUTTING_DOWN</a>;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      <span class="comment">/* No more Mr. Nice guy.  We are committed to shutting down now. */</span></div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a65ac892ffadf889740bfac52a8061b50">ast_begin_shutdown</a>();</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a0af1a0f8665f21a658864a731eea78c0">ast_softhangup_all</a>();</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      waited |= <a class="code" href="../../d5/d03/asterisk_8c.html#aad6040e397b4ed391082631a4fcefdda">wait_for_channels_to_die</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59aa864d272f8aa33e6b56ec6e2e58a08e2">SHUTTING_DOWN</a>, <a class="code" href="../../d5/d03/asterisk_8c.html#aa405c1064890ab81b6d56c27d8e645ac">SHUTDOWN_TIMEOUT</a>);</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;   }</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a> = <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59acf10aef13967cc149a7b37d7a4e5e693">SHUTTING_DOWN_FINAL</a>;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a>);</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;   <span class="keywordflow">if</span> (niceness &gt;= <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a2a9246405d49261dae3926e7d5612d2c">SHUTDOWN_NORMAL</a> &amp;&amp; waited) {</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;<span class="comment">       * We were not idle.  Give things in progress a chance to</span></div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;<span class="comment">       * recognize the final shutdown phase.</span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;      sleep(1);</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;   }</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;}</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;<span class="comment">/*! Called when exiting is certain. */</span></div><div class="line"><a name="l02004"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ade931d879a5d2b6f4e91e16ded37cb74"> 2004</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ade931d879a5d2b6f4e91e16ded37cb74">really_quit</a>(<span class="keywordtype">int</span> num, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59">shutdown_nice_t</a> niceness, <span class="keywordtype">int</span> restart)</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;{</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;   <span class="keywordtype">int</span> active_channels;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_object = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;   <span class="keywordtype">int</span> run_cleanups = niceness &gt;= <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a704981d4ddccbee50fabd8bed58b01dd">SHUTDOWN_NICE</a>;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;   <span class="keywordflow">if</span> (run_cleanups &amp;&amp; <a class="code" href="../../d4/d78/__private_8h.html#a090952bbd448a14d7cad9b960f520c32">modules_shutdown</a>()) {</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(0, <span class="stringliteral">&quot;Some modules could not be unloaded, switching to fast shutdown\n&quot;</span>);</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;      run_cleanups = 0;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;   }</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;   <span class="keywordflow">if</span> (!restart) {</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;      <a class="code" href="../../dc/dac/io_8h.html#ac0cde8a3fde83180d994ad3c95f8bf49">ast_sd_notify</a>(<span class="stringliteral">&quot;STOPPING=1&quot;</span>);</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;   }</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a4fe31af40146104d64d4a31535e44400">ast_opt_console</a> || (<a class="code" href="../../d7/d5b/options_8h.html#a17d4d9ef04ffa9034f6c6b6c1fd2bb0b">ast_opt_remote</a> &amp;&amp; !<a class="code" href="../../d7/d5b/options_8h.html#a301d032d1d86ba46348691f6d135e98a">ast_opt_exec</a>)) {</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#ae15faa0b9305355ac46a8875f99480a1">ast_el_write_default_histfile</a>();</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a> == <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a> || <a class="code" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a> == pthread_self()) {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;         <span class="comment">/* Only end if we are the consolethread, otherwise there&#39;s a race with that thread. */</span></div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;            el_end(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>);</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;         }</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;            history_end(<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a>);</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;         }</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!restart) {</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_el_end = 1;</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;         pthread_kill(<a class="code" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a>, SIGURG);</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;      }</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;   }</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;   active_channels = <a class="code" href="../../d5/d7b/channel_8h.html#a9704ae96ab849e9e5a20040c13d29705">ast_active_channels</a>();</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;   <span class="comment">/* Don&#39;t publish messages if we&#39;re a remote console - we won&#39;t have all of the Stasis</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;<span class="comment">    * topics or message types</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d5b/options_8h.html#a17d4d9ef04ffa9034f6c6b6c1fd2bb0b">ast_opt_remote</a>) {</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: s}&quot;</span>,</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;            <span class="stringliteral">&quot;Shutdown&quot;</span>, active_channels ? <span class="stringliteral">&quot;Uncleanly&quot;</span> : <span class="stringliteral">&quot;Cleanly&quot;</span>,</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;            <span class="stringliteral">&quot;Restart&quot;</span>, restart ? <span class="stringliteral">&quot;True&quot;</span> : <span class="stringliteral">&quot;False&quot;</span>);</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga546caee8e3d040d0074bc32e96d53b7d">ast_manager_publish_event</a>(<span class="stringliteral">&quot;Shutdown&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a>, json_object);</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_object);</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      json_object = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;   }</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(0, <span class="stringliteral">&quot;Asterisk %s ending (%d).\n&quot;</span>,</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;      active_channels ? <span class="stringliteral">&quot;uncleanly&quot;</span> : <span class="stringliteral">&quot;cleanly&quot;</span>, num);</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(0, <span class="stringliteral">&quot;Executing last minute cleanups\n&quot;</span>);</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a1e7c04328076f732cc303a2c853466be">ast_run_atexits</a>(run_cleanups);</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Asterisk ending (%d).\n&quot;</span>, num);</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a> &gt; -1) {</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      pthread_cancel(lthread);</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;      close(<a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a>);</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a> = -1;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d03/asterisk_8c.html#a0de92246f6a87060b319bf4a27c2737d">ast_socket_is_sd</a>) {</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;         unlink(<a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>);</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      }</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      pthread_kill(lthread, SIGURG);</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      pthread_join(lthread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;   }</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a> &gt; -1)</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      close(<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>);</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d5b/options_8h.html#a17d4d9ef04ffa9034f6c6b6c1fd2bb0b">ast_opt_remote</a>)</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      unlink(<a class="code" href="../../dd/df2/paths_8h.html#a59860442b922398568da0236c1576039">ast_config_AST_PID</a>);</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;   <a class="code" href="../../dc/d4d/alertpipe_8h.html#a2ccba8179d9e136fba008e801daf2c5f">ast_alertpipe_close</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a7bb419fdb0040da24ecbb651b12395fc">sig_alert_pipe</a>);</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;   printf(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#af8c8e45db028216c47dd06bb2c64adec">term_quit</a>());</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;   <span class="keywordflow">if</span> (restart) {</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(0, <span class="stringliteral">&quot;Preparing for Asterisk restart...\n&quot;</span>);</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;      <span class="comment">/* Mark all FD&#39;s for closing on exec */</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <span class="keywordflow">for</span> (i = 3; i &lt; 32768; i++) {</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;         fcntl(i, F_SETFD, FD_CLOEXEC);</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;      }</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(0, <span class="stringliteral">&quot;Asterisk is now restarting...\n&quot;</span>);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a8fbb0f40e9c839384d728aa8e0958dfb">restartnow</a> = 1;</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;      <span class="comment">/* close logger */</span></div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;      <a class="code" href="../../d4/d78/__private_8h.html#a472851d5655c8a9b9492c40e5ff32d2d">close_logger</a>();</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      <a class="code" href="../../d4/d78/__private_8h.html#a9b2fd54beda5904b6ce50a06351bc8db">clean_time_zones</a>();</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <span class="comment">/* If there is a consolethread running send it a SIGHUP</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;<span class="comment">         so it can execvp, otherwise we can do it ourselves */</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) &amp;&amp; (<a class="code" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a> != pthread_self())) {</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;         pthread_kill(<a class="code" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a>, SIGHUP);</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;         <span class="comment">/* Give the signal handler some time to complete */</span></div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;         sleep(2);</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;         execvp(<a class="code" href="../../d5/d03/asterisk_8c.html#aac76ac35350d1efd9ddfe5b56739c649">_argv</a>[0], <a class="code" href="../../d5/d03/asterisk_8c.html#aac76ac35350d1efd9ddfe5b56739c649">_argv</a>);</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;      <span class="comment">/* close logger */</span></div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;      <a class="code" href="../../d4/d78/__private_8h.html#a472851d5655c8a9b9492c40e5ff32d2d">close_logger</a>();</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      <a class="code" href="../../d4/d78/__private_8h.html#a9b2fd54beda5904b6ce50a06351bc8db">clean_time_zones</a>();</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;   }</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;   exit(0);</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;}</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;</div><div class="line"><a name="l02100"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ae60d292daa4fe3a13b0a0d01c5beb305"> 2100</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ae60d292daa4fe3a13b0a0d01c5beb305">__quit_handler</a>(<span class="keywordtype">int</span> num)</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;{</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit = 1;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d4d/alertpipe_8h.html#a3c1d9ad40416df5adef7cc213e87d88b">ast_alertpipe_write</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a7bb419fdb0040da24ecbb651b12395fc">sig_alert_pipe</a>)) {</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;quit_handler: write() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;   }</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;   <span class="comment">/* There is no need to restore the signal handler here, since the app</span></div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;<span class="comment">    * is going to exit */</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;}</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;</div><div class="line"><a name="l02110"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a128997a8231cdc87af7181da9ac78b7b"> 2110</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a128997a8231cdc87af7181da9ac78b7b">__remote_quit_handler</a>(<span class="keywordtype">int</span> num)</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;{</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit = 1;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;}</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;</div><div class="line"><a name="l02115"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a4193798095f3247b047f09cb1cdf67a8"> 2115</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a4193798095f3247b047f09cb1cdf67a8">set_header</a>(<span class="keywordtype">char</span> *outbuf, <span class="keywordtype">int</span> maxout, <span class="keywordtype">char</span> level)</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;{</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *cmp;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;   <span class="keywordtype">char</span> date[40];</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;   <span class="keywordflow">switch</span> (level) {</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;   <span class="keywordflow">case</span> 0: cmp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;   <span class="keywordflow">case</span> 1: cmp = <a class="code" href="../../d1/d8c/logger_8h.html#aad3298cde7f9cc6ea7f3f60b797cef11">VERBOSE_PREFIX_1</a>;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;   <span class="keywordflow">case</span> 2: cmp = <a class="code" href="../../d1/d8c/logger_8h.html#a5623b2747e49964e0eae2795057bc92e">VERBOSE_PREFIX_2</a>;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;   <span class="keywordflow">case</span> 3: cmp = <a class="code" href="../../d1/d8c/logger_8h.html#a24b0f46e22f4ea3226fa082e955dd4ef">VERBOSE_PREFIX_3</a>;</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;   <span class="keywordflow">default</span>: cmp = <a class="code" href="../../d1/d8c/logger_8h.html#a9aaf93f121b63d51444d573673d4b791">VERBOSE_PREFIX_4</a>;</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;   }</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a8b68b62e712208bdd68cc743b937fcc3">ast_opt_timestamp</a>) {</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> tm;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;      <span class="keyword">struct </span>timeval now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;      <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;now, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(date, <span class="keyword">sizeof</span>(date), <a class="code" href="../../d1/d8c/logger_8h.html#a742631da92caaaf27152c0397f53ae31">ast_logger_get_dateformat</a>(), &amp;tm);</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;   }</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;   snprintf(outbuf, maxout, <span class="stringliteral">&quot;%s%s%s%s%s%s&quot;</span>,</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <a class="code" href="../../d7/d5b/options_8h.html#a8b68b62e712208bdd68cc743b937fcc3">ast_opt_timestamp</a> ? <span class="stringliteral">&quot;[&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <a class="code" href="../../d7/d5b/options_8h.html#a8b68b62e712208bdd68cc743b937fcc3">ast_opt_timestamp</a> ? date : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      <a class="code" href="../../d7/d5b/options_8h.html#a8b68b62e712208bdd68cc743b937fcc3">ast_opt_timestamp</a> ? <span class="stringliteral">&quot;] &quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      cmp ? <a class="code" href="../../db/d45/term_8h.html#aa86a4efe2acaee184cf754ccc5248599">ast_term_color</a>(<a class="code" href="../../db/d45/term_8h.html#a3aaf3b0287d26dfb6ecb3b1c46e950c8">COLOR_GRAY</a>, 0) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      cmp ? cmp : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      cmp ? <a class="code" href="../../db/d45/term_8h.html#a11b0efffc76ab7f40399993cb468e46a">ast_term_reset</a>() : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;}</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;</div><div class="line"><a name="l02149"></a><span class="lineno"><a class="line" href="../../d5/d4d/structconsole__state__data.html"> 2149</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d5/d4d/structconsole__state__data.html">console_state_data</a> {</div><div class="line"><a name="l02150"></a><span class="lineno"><a class="line" href="../../d5/d4d/structconsole__state__data.html#a7ca1285c1b68ed3defe1546edae1bb42"> 2150</a></span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d5/d4d/structconsole__state__data.html#a7ca1285c1b68ed3defe1546edae1bb42">verbose_line_level</a>;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;};</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div><div class="line"><a name="l02153"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a1fe2708ec6a030f377b236efe61c94e6"> 2153</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a1fe2708ec6a030f377b236efe61c94e6">console_state_init</a>(<span class="keywordtype">void</span> *ptr)</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;{</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d4d/structconsole__state__data.html">console_state_data</a> *<a class="code" href="../../d4/d88/structstate.html">state</a> = ptr;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;   state-&gt;<a class="code" href="../../d5/d4d/structconsole__state__data.html#a7ca1285c1b68ed3defe1546edae1bb42">verbose_line_level</a> = 0;</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;}</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;</div><div class="line"><a name="l02160"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#aae40d25114a12067bc0052c23eef8814"> 2160</a></span>&#160;<a class="code" href="../../dc/d7d/threadstorage_8h.html#a3fb5391416c5bf7a18d5f7f7b84c4b81">AST_THREADSTORAGE_CUSTOM</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#aae40d25114a12067bc0052c23eef8814">console_state</a>, <a class="code" href="../../d5/d03/asterisk_8c.html#a1fe2708ec6a030f377b236efe61c94e6">console_state_init</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;</div><div class="line"><a name="l02162"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a7fc8eb444c6b6297888929ccb6828761"> 2162</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a7fc8eb444c6b6297888929ccb6828761">console_print</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s)</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;{</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d4d/structconsole__state__data.html">console_state_data</a> *<a class="code" href="../../d4/d88/structstate.html">state</a> =</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;      <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#aae40d25114a12067bc0052c23eef8814">console_state</a>, <span class="keyword">sizeof</span>(*state));</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>[80];</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;   <span class="keywordtype">int</span> num, res = 0;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> newline;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;   <span class="keywordflow">do</span> {</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/logger_8h.html#aec814517e775308a149299022ac92833">VERBOSE_HASMAGIC</a>(s)) {</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;         <span class="comment">/* always use the given line&#39;s level, otherwise</span></div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;<span class="comment">            we&#39;ll use the last line&#39;s level */</span></div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;         state-&gt;<a class="code" href="../../d5/d4d/structconsole__state__data.html#a7ca1285c1b68ed3defe1546edae1bb42">verbose_line_level</a> = <a class="code" href="../../d1/d8c/logger_8h.html#ae665bf123e3e1b721a4b170618153a45">VERBOSE_MAGIC2LEVEL</a>(s);</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;         <span class="comment">/* move past magic */</span></div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;         s++;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a4193798095f3247b047f09cb1cdf67a8">set_header</a>(prefix, <span class="keyword">sizeof</span>(prefix), state-&gt;<a class="code" href="../../d5/d4d/structconsole__state__data.html#a7ca1285c1b68ed3defe1546edae1bb42">verbose_line_level</a>);</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;         *prefix = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;      }</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      c = s;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      <span class="comment">/* for a given line separate on verbose magic, newline, and eol */</span></div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;      <span class="keywordflow">if</span> ((s = strchr(c, <span class="charliteral">&#39;\n&#39;</span>))) {</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;         ++s;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;         newline = 1;</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;         s = strchr(c, <span class="charliteral">&#39;\0&#39;</span>);</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;         newline = 0;</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;      }</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;      <span class="comment">/* check if we should write this line after calculating begin/end</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;<span class="comment">         so we process the case of a higher level line embedded within</span></div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;<span class="comment">         two lower level lines */</span></div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;      <span class="keywordflow">if</span> (state-&gt;<a class="code" href="../../d5/d4d/structconsole__state__data.html#a7ca1285c1b68ed3defe1546edae1bb42">verbose_line_level</a> &gt; <a class="code" href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a>) {</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;      }</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(prefix)) {</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;         fputs(prefix, stdout);</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;      }</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      num = s - <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;      <span class="keywordflow">if</span> (fwrite(c, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>), num, stdout) &lt; num) {</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      }</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;         <span class="comment">/* if at least some info has been written</span></div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;<span class="comment">            we&#39;ll want to return true */</span></div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;         res = 1;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;      }</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;   } <span class="keywordflow">while</span> (*s);</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;   <span class="keywordflow">if</span> (newline) {</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;      <span class="comment">/* if ending on a newline then reset last level to zero</span></div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="comment">          since what follows may be not be logging output */</span></div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;      state-&gt;<a class="code" href="../../d5/d4d/structconsole__state__data.html#a7ca1285c1b68ed3defe1546edae1bb42">verbose_line_level</a> = 0;</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;   }</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      fflush(stdout);</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;   }</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;}</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;</div><div class="line"><a name="l02233"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#aa0fd8617e78d3b101aee3fe8d1c803f1"> 2233</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#aa0fd8617e78d3b101aee3fe8d1c803f1">ast_all_zeros</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s)</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;{</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;   <span class="keywordflow">while</span> (*s) {</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      <span class="keywordflow">if</span> (*s &gt; 32)</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;      s++;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;   }</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;}</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;<span class="comment">/* This is the main console CLI command handler.  Run by the main() thread. */</span></div><div class="line"><a name="l02244"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9a28eb590fad0670d6a05fb703f4f0cd"> 2244</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a9a28eb590fad0670d6a05fb703f4f0cd">consolehandler</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s)</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;{</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;   printf(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a253f1aaaac4bf7e88ca402bddbe7fe6f">term_end</a>());</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;   fflush(stdout);</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;   <span class="comment">/* Called when readline data is available */</span></div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d03/asterisk_8c.html#aa0fd8617e78d3b101aee3fe8d1c803f1">ast_all_zeros</a>(s))</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a027ab2a74bcb1638e70418055feb57b9">ast_el_add_history</a>(s);</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;   <span class="comment">/* The real handler for bang */</span></div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;   <span class="keywordflow">if</span> (s[0] == <span class="charliteral">&#39;!&#39;</span>) {</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      <span class="keywordflow">if</span> (s[1])</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a9fb5cf0385848033ee3e98625e5f9784">ast_safe_system</a>(s+1);</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a9fb5cf0385848033ee3e98625e5f9784">ast_safe_system</a>(getenv(<span class="stringliteral">&quot;SHELL&quot;</span>) ? getenv(<span class="stringliteral">&quot;SHELL&quot;</span>) : <span class="stringliteral">&quot;/bin/sh&quot;</span>);</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9">ast_cli_command</a>(STDOUT_FILENO, s);</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;}</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;</div><div class="line"><a name="l02262"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a27fdbb6caaef2f56f1379c779c1e74b5"> 2262</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a27fdbb6caaef2f56f1379c779c1e74b5">remoteconsolehandler</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s)</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;{</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;   <span class="keywordtype">int</span> ret = 0;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;   <span class="comment">/* Called when readline data is available */</span></div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d03/asterisk_8c.html#aa0fd8617e78d3b101aee3fe8d1c803f1">ast_all_zeros</a>(s))</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a027ab2a74bcb1638e70418055feb57b9">ast_el_add_history</a>(s);</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;   <span class="keywordflow">while</span> (isspace(*s)) {</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      s++;</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;   }</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;   <span class="comment">/* The real handler for bang */</span></div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;   <span class="keywordflow">if</span> (s[0] == <span class="charliteral">&#39;!&#39;</span>) {</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      <span class="keywordflow">if</span> (s[1])</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a9fb5cf0385848033ee3e98625e5f9784">ast_safe_system</a>(s+1);</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a9fb5cf0385848033ee3e98625e5f9784">ast_safe_system</a>(getenv(<span class="stringliteral">&quot;SHELL&quot;</span>) ? getenv(<span class="stringliteral">&quot;SHELL&quot;</span>) : <span class="stringliteral">&quot;/bin/sh&quot;</span>);</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;      ret = 1;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((strncasecmp(s, <span class="stringliteral">&quot;quit&quot;</span>, 4) == 0 || strncasecmp(s, <span class="stringliteral">&quot;exit&quot;</span>, 4) == 0) &amp;&amp;</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;       (s[4] == <span class="charliteral">&#39;\0&#39;</span> || isspace(s[4]))) {</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(0, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a12d28a6e5875c59040c79f31255b3cbd">SHUTDOWN_FAST</a>, 0);</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      ret = 1;</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;   }</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;}</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;</div><div class="line"><a name="l02290"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a828de0b261785adf20714bbcdf9391c6"> 2290</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a828de0b261785adf20714bbcdf9391c6">handle_version</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;{</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core show version&quot;</span>;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;         <span class="stringliteral">&quot;Usage: core show version\n&quot;</span></div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;         <span class="stringliteral">&quot;       Shows Asterisk version information.\n&quot;</span>;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;   }</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3)</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Asterisk %s built by %s @ %s on a %s running %s on %s\n&quot;</span>,</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;      <a class="code" href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a>(), <a class="code" href="../../de/d35/buildinfo_8h.html#ac67b18fb7444d973a733a9757c1ff8f9">ast_build_user</a>, <a class="code" href="../../de/d35/buildinfo_8h.html#aae3c7406e483c475f34063c84048ab89">ast_build_hostname</a>,</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;      <a class="code" href="../../de/d35/buildinfo_8h.html#a6d456a43bdae713459ee5ee67439670c">ast_build_machine</a>, <a class="code" href="../../de/d35/buildinfo_8h.html#a00b5464ec2f306ae8f17f73a0a81f28d">ast_build_os</a>, <a class="code" href="../../de/d35/buildinfo_8h.html#af1708cda257f6db95f77b34f112ef64b">ast_build_date</a>);</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;}</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div><div class="line"><a name="l02311"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ae70030dcf6d4e96327fcd5bc0285b9d7"> 2311</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#ae70030dcf6d4e96327fcd5bc0285b9d7">handle_stop_now</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;{</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core stop now&quot;</span>;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;         <span class="stringliteral">&quot;Usage: core stop now\n&quot;</span></div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;         <span class="stringliteral">&quot;       Shuts down a running Asterisk immediately, hanging up all active calls .\n&quot;</span>;</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a9df37f8701bbc0ba731c034e89eda2a5">ast_cli_allow_at_shutdown</a>(e);</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;   }</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>)</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(0, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a2a9246405d49261dae3926e7d5612d2c">SHUTDOWN_NORMAL</a>, 0 <span class="comment">/* not restart */</span>);</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;}</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;</div><div class="line"><a name="l02331"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a6bd02774fe0979cefec3d88594749076"> 2331</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a6bd02774fe0979cefec3d88594749076">handle_stop_gracefully</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;{</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core stop gracefully&quot;</span>;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;         <span class="stringliteral">&quot;Usage: core stop gracefully\n&quot;</span></div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;         <span class="stringliteral">&quot;       Causes Asterisk to not accept new calls, and exit when all\n&quot;</span></div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;         <span class="stringliteral">&quot;       active calls have terminated normally.\n&quot;</span>;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a9df37f8701bbc0ba731c034e89eda2a5">ast_cli_allow_at_shutdown</a>(e);</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   }</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>)</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(0, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a704981d4ddccbee50fabd8bed58b01dd">SHUTDOWN_NICE</a>, 0 <span class="comment">/* no restart */</span>);</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;}</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;</div><div class="line"><a name="l02352"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#acc0f80a205edf9eff08b24f2748f9247"> 2352</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#acc0f80a205edf9eff08b24f2748f9247">handle_stop_when_convenient</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;{</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core stop when convenient&quot;</span>;</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;         <span class="stringliteral">&quot;Usage: core stop when convenient\n&quot;</span></div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;         <span class="stringliteral">&quot;       Causes Asterisk to perform a shutdown when all active calls have ended.\n&quot;</span>;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a9df37f8701bbc0ba731c034e89eda2a5">ast_cli_allow_at_shutdown</a>(e);</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;   }</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>)</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Waiting for inactivity to perform halt\n&quot;</span>);</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(0, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59aa3d6008dbedd1154cfadf33b24f3efa6">SHUTDOWN_REALLY_NICE</a>, 0 <span class="comment">/* don&#39;t restart */</span>);</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;}</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div><div class="line"><a name="l02373"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a2da6d477c1f0b2dd06e8010645b495da"> 2373</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a2da6d477c1f0b2dd06e8010645b495da">handle_restart_now</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;{</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core restart now&quot;</span>;</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;         <span class="stringliteral">&quot;Usage: core restart now\n&quot;</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;         <span class="stringliteral">&quot;       Causes Asterisk to hangup all calls and exec() itself performing a cold\n&quot;</span></div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;         <span class="stringliteral">&quot;       restart.\n&quot;</span>;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a9df37f8701bbc0ba731c034e89eda2a5">ast_cli_allow_at_shutdown</a>(e);</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;   }</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>)</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(0, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a2a9246405d49261dae3926e7d5612d2c">SHUTDOWN_NORMAL</a>, 1 <span class="comment">/* restart */</span>);</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;}</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;</div><div class="line"><a name="l02394"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ac8a53f8c12fe766728372e845a99c822"> 2394</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#ac8a53f8c12fe766728372e845a99c822">handle_restart_gracefully</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;{</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core restart gracefully&quot;</span>;</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;         <span class="stringliteral">&quot;Usage: core restart gracefully\n&quot;</span></div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;         <span class="stringliteral">&quot;       Causes Asterisk to stop accepting new calls and exec() itself performing a cold\n&quot;</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;         <span class="stringliteral">&quot;       restart when all active calls have ended.\n&quot;</span>;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a9df37f8701bbc0ba731c034e89eda2a5">ast_cli_allow_at_shutdown</a>(e);</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;   }</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>)</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(0, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a704981d4ddccbee50fabd8bed58b01dd">SHUTDOWN_NICE</a>, 1 <span class="comment">/* restart */</span>);</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;}</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;</div><div class="line"><a name="l02415"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a3f98716c804b0bea3acc983956483ebd"> 2415</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a3f98716c804b0bea3acc983956483ebd">handle_restart_when_convenient</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;{</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core restart when convenient&quot;</span>;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;         <span class="stringliteral">&quot;Usage: core restart when convenient\n&quot;</span></div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;         <span class="stringliteral">&quot;       Causes Asterisk to perform a cold restart when all active calls have ended.\n&quot;</span>;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a9df37f8701bbc0ba731c034e89eda2a5">ast_cli_allow_at_shutdown</a>(e);</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;   }</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>)</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Waiting for inactivity to perform restart\n&quot;</span>);</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(0, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59aa3d6008dbedd1154cfadf33b24f3efa6">SHUTDOWN_REALLY_NICE</a>, 1 <span class="comment">/* restart */</span>);</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;}</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;</div><div class="line"><a name="l02436"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ac4fd79d36385b27a0b8f995f53e47f23"> 2436</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#ac4fd79d36385b27a0b8f995f53e47f23">handle_abort_shutdown</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;{</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core abort shutdown&quot;</span>;</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;         <span class="stringliteral">&quot;Usage: core abort shutdown\n&quot;</span></div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;         <span class="stringliteral">&quot;       Causes Asterisk to abort an executing shutdown or restart, and resume normal\n&quot;</span></div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;         <span class="stringliteral">&quot;       call operations.\n&quot;</span>;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a9df37f8701bbc0ba731c034e89eda2a5">ast_cli_allow_at_shutdown</a>(e);</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;   }</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>)</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a6e86798cc2f458f440d5130817d2ec7c">ast_cancel_shutdown</a>();</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;}</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;</div><div class="line"><a name="l02459"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a2eac41ec93c1f53371ed01a94b7640ac"> 2459</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a2eac41ec93c1f53371ed01a94b7640ac">handle_bang</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;{</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;!&quot;</span>;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;         <span class="stringliteral">&quot;Usage: !&lt;command&gt;\n&quot;</span></div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;         <span class="stringliteral">&quot;       Executes a given shell command\n&quot;</span>;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;   }</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;}</div><div class="line"><a name="l02474"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a7d9339be3f345df196e3b9f26dc51253"> 2474</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a7d9339be3f345df196e3b9f26dc51253">warranty_lines</a>[] = {</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;   <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;   <span class="stringliteral">&quot;            NO WARRANTY\n&quot;</span></div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;   <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;   <span class="stringliteral">&quot;BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n&quot;</span></div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;   <span class="stringliteral">&quot;FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n&quot;</span></div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;   <span class="stringliteral">&quot;OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n&quot;</span></div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;   <span class="stringliteral">&quot;PROVIDE THE PROGRAM \&quot;AS IS\&quot; WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n&quot;</span></div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;   <span class="stringliteral">&quot;OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n&quot;</span></div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;   <span class="stringliteral">&quot;MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n&quot;</span></div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;   <span class="stringliteral">&quot;TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n&quot;</span></div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;   <span class="stringliteral">&quot;PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\n&quot;</span></div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;   <span class="stringliteral">&quot;REPAIR OR CORRECTION.\n&quot;</span></div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;   <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;   <span class="stringliteral">&quot;IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\n&quot;</span></div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;   <span class="stringliteral">&quot;WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\n&quot;</span></div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;   <span class="stringliteral">&quot;REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,\n&quot;</span></div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;   <span class="stringliteral">&quot;INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING\n&quot;</span></div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;   <span class="stringliteral">&quot;OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED\n&quot;</span></div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;   <span class="stringliteral">&quot;TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\n&quot;</span></div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;   <span class="stringliteral">&quot;YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER\n&quot;</span></div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;   <span class="stringliteral">&quot;PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\n&quot;</span></div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;   <span class="stringliteral">&quot;POSSIBILITY OF SUCH DAMAGES.\n&quot;</span></div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;};</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;</div><div class="line"><a name="l02499"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a6113c4ebbbc993cf7054a1af8e99da9a"> 2499</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a6113c4ebbbc993cf7054a1af8e99da9a">show_warranty</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;{</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core show warranty&quot;</span>;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;         <span class="stringliteral">&quot;Usage: core show warranty\n&quot;</span></div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;         <span class="stringliteral">&quot;       Shows the warranty (if any) for this copy of Asterisk.\n&quot;</span>;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;   }</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s&quot;</span>, warranty_lines);</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;}</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;</div><div class="line"><a name="l02517"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ad715261b1b9cd2646cb66feac127aef0"> 2517</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ad715261b1b9cd2646cb66feac127aef0">license_lines</a>[] = {</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;   <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;   <span class="stringliteral">&quot;This program is free software; you can redistribute it and/or modify\n&quot;</span></div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;   <span class="stringliteral">&quot;it under the terms of the GNU General Public License version 2 as\n&quot;</span></div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;   <span class="stringliteral">&quot;published by the Free Software Foundation.\n&quot;</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;   <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;   <span class="stringliteral">&quot;This program also contains components licensed under other licenses.\n&quot;</span></div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;   <span class="stringliteral">&quot;They include:\n&quot;</span></div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;   <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;   <span class="stringliteral">&quot;This program is distributed in the hope that it will be useful,\n&quot;</span></div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;   <span class="stringliteral">&quot;but WITHOUT ANY WARRANTY; without even the implied warranty of\n&quot;</span></div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;   <span class="stringliteral">&quot;MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n&quot;</span></div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;   <span class="stringliteral">&quot;GNU General Public License for more details.\n&quot;</span></div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;   <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;   <span class="stringliteral">&quot;You should have received a copy of the GNU General Public License\n&quot;</span></div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;   <span class="stringliteral">&quot;along with this program; if not, write to the Free Software\n&quot;</span></div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;   <span class="stringliteral">&quot;Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n&quot;</span></div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;};</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;</div><div class="line"><a name="l02536"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a162ffd8e3544ee0038895ad79971dc8a"> 2536</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a162ffd8e3544ee0038895ad79971dc8a">show_license</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;{</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core show license&quot;</span>;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;         <span class="stringliteral">&quot;Usage: core show license\n&quot;</span></div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;         <span class="stringliteral">&quot;       Shows the license(s) for this copy of Asterisk.\n&quot;</span>;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;   }</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s&quot;</span>, license_lines);</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;}</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02554"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a5c70f918dc3849f6f6e22425394ddb5f"> 2554</a></span>&#160;<span class="preprocessor">#define ASTERISK_PROMPT &quot;*CLI&gt; &quot;</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;<span class="comment"> * \brief Shutdown Asterisk CLI commands.</span></div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;<span class="comment"> * \note These CLI commands cannot be unregistered at shutdown</span></div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;<span class="comment"> * because one of them is likely the reason for the shutdown.</span></div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;<span class="comment"> * The CLI generates a warning if a command is in-use when it is</span></div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;<span class="comment"> * unregistered.</span></div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02564"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a9a6fe5060ef94ade0acae2ad7c982a68"> 2564</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> <a class="code" href="../../d5/d03/asterisk_8c.html#a9a6fe5060ef94ade0acae2ad7c982a68">cli_asterisk_shutdown</a>[] = {</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#ae70030dcf6d4e96327fcd5bc0285b9d7">handle_stop_now</a>, <span class="stringliteral">&quot;Shut down Asterisk immediately&quot;</span>),</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a6bd02774fe0979cefec3d88594749076">handle_stop_gracefully</a>, <span class="stringliteral">&quot;Gracefully shut down Asterisk&quot;</span>),</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#acc0f80a205edf9eff08b24f2748f9247">handle_stop_when_convenient</a>, <span class="stringliteral">&quot;Shut down Asterisk at empty call volume&quot;</span>),</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a2da6d477c1f0b2dd06e8010645b495da">handle_restart_now</a>, <span class="stringliteral">&quot;Restart Asterisk immediately&quot;</span>),</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#ac8a53f8c12fe766728372e845a99c822">handle_restart_gracefully</a>, <span class="stringliteral">&quot;Restart Asterisk gracefully&quot;</span>),</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a3f98716c804b0bea3acc983956483ebd">handle_restart_when_convenient</a>, <span class="stringliteral">&quot;Restart Asterisk at empty call volume&quot;</span>),</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;};</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;</div><div class="line"><a name="l02573"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#abb2456dfd78af8ed6d6876d214e7e064"> 2573</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> <a class="code" href="../../d5/d03/asterisk_8c.html#abb2456dfd78af8ed6d6876d214e7e064">cli_asterisk</a>[] = {</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#ac4fd79d36385b27a0b8f995f53e47f23">handle_abort_shutdown</a>, <span class="stringliteral">&quot;Cancel a running shutdown&quot;</span>),</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a6113c4ebbbc993cf7054a1af8e99da9a">show_warranty</a>, <span class="stringliteral">&quot;Show the warranty (if any) for this copy of Asterisk&quot;</span>),</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a162ffd8e3544ee0038895ad79971dc8a">show_license</a>, <span class="stringliteral">&quot;Show the license(s) for this copy of Asterisk&quot;</span>),</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a828de0b261785adf20714bbcdf9391c6">handle_version</a>, <span class="stringliteral">&quot;Display version info&quot;</span>),</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a2eac41ec93c1f53371ed01a94b7640ac">handle_bang</a>, <span class="stringliteral">&quot;Execute a shell command&quot;</span>),</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a3d42dc32df764617e2201c3637f824cc">handle_show_threads</a>, <span class="stringliteral">&quot;Show running threads&quot;</span>),</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;<span class="preprocessor">#if defined(HAVE_SYSINFO) || defined(HAVE_SYSCTL)</span></div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a7ae8b6656af65f29c76982647d743fcc">handle_show_sysinfo</a>, <span class="stringliteral">&quot;Show System Information&quot;</span>),</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#acd2b29cf44212391e7c62499f7394db5">handle_show_profile</a>, <span class="stringliteral">&quot;Display profiling info&quot;</span>),</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#ad66301d131d35faea1df2e7c5b1a1bf2">handle_show_settings</a>, <span class="stringliteral">&quot;Show some core settings&quot;</span>),</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#aa1b8f26984e7b4f8359502eec3a8cd24">handle_clear_profile</a>, <span class="stringliteral">&quot;Clear profiling info&quot;</span>),</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ! LOW_MEMORY */</span><span class="preprocessor"></span></div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;};</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;</div><div class="line"><a name="l02590"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a583bacf8cedc00da6854899e5d39f410"> 2590</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a583bacf8cedc00da6854899e5d39f410">send_rasterisk_connect_commands</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;{</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[80];</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;<span class="comment">    * Tell the server asterisk instance about the verbose level</span></div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;<span class="comment">    * initially desired.</span></div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a>) {</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;      snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;core set verbose atleast %d silent&quot;</span>, <a class="code" href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a>);</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#ac07499a06d0a0cf1d9ea14cf0693330a">fdsend</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>, buf);</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;   }</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd6/group__main__options.html#ga40f8fb2e731031d99f732f515cec680f">option_debug</a>) {</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;      snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;core set debug atleast %d&quot;</span>, <a class="code" href="../../d6/dd6/group__main__options.html#ga40f8fb2e731031d99f732f515cec680f">option_debug</a>);</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#ac07499a06d0a0cf1d9ea14cf0693330a">fdsend</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>, buf);</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;   }</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;   <span class="comment">/* Leave verbose filtering to the server. */</span></div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;   <a class="code" href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a> = INT_MAX;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d5b/options_8h.html#a83121f1ce9acec9e71313b69066aaf79">ast_opt_mute</a>) {</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#ac07499a06d0a0cf1d9ea14cf0693330a">fdsend</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>, <span class="stringliteral">&quot;logger mute silent&quot;</span>);</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;      printf(<span class="stringliteral">&quot;log and verbose output currently muted (&#39;logger mute&#39; to unmute)\n&quot;</span>);</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;   }</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;}</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="preprocessor">#ifdef HAVE_LIBEDIT_IS_UNICODE</span></div><div class="line"><a name="l02619"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a19b7f160bd731112f69cfd4a925d8b55"> 2619</a></span>&#160;<span class="preprocessor">#define CHAR_T_LIBEDIT wchar_t</span></div><div class="line"><a name="l02620"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a75887fd405b024a9f8a2067fa051d781"> 2620</a></span>&#160;<span class="preprocessor">#define CHAR_TO_LIBEDIT(c) btowc(c)</span></div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;<span class="preprocessor">#define CHAR_T_LIBEDIT char</span></div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;<span class="preprocessor">#define CHAR_TO_LIBEDIT(c) c</span></div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;</div><div class="line"><a name="l02626"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a43af335a570187abea70ea3ebde8aa23"> 2626</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a43af335a570187abea70ea3ebde8aa23">ast_el_read_char</a>(EditLine *editline, <a class="code" href="../../d5/d03/asterisk_8c.html#a19b7f160bd731112f69cfd4a925d8b55">CHAR_T_LIBEDIT</a> *cp)</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;{</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;   <span class="keywordtype">int</span> num_read = 0;</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;   <span class="keywordtype">int</span> lastpos = 0;</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;   <span class="keyword">struct </span>pollfd fds[2];</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;<span class="preprocessor">#define EL_BUF_SIZE 512</span></div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[<a class="code" href="../../d5/d03/asterisk_8c.html#a85cb51aebe0254ccf6f12cd8a35223de">EL_BUF_SIZE</a>];</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;      max = 1;</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;      fds[0].fd = <a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;      fds[0].events = POLLIN;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d5b/options_8h.html#a301d032d1d86ba46348691f6d135e98a">ast_opt_exec</a>) {</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;         fds[1].fd = STDIN_FILENO;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;         fds[1].events = POLLIN;</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;         max++;</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;      }</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;      res = <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(fds, max, -1);</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit || <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit_handler || <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_el_end) {</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;         }</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EINTR) {</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;         }</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;poll failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;      }</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d5b/options_8h.html#a301d032d1d86ba46348691f6d135e98a">ast_opt_exec</a> &amp;&amp; fds[1].revents) {</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;         <span class="keywordtype">char</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;         num_read = read(STDIN_FILENO, &amp;c, 1);</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;         <span class="keywordflow">if</span> (num_read &lt; 1) {</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;         }</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;         *cp = <a class="code" href="../../d5/d03/asterisk_8c.html#a75887fd405b024a9f8a2067fa051d781">CHAR_TO_LIBEDIT</a>(c);</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;         <span class="keywordflow">return</span> num_read;</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;      }</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;      <span class="keywordflow">if</span> (fds[0].revents) {</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;         res = read(<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>, buf, <span class="keyword">sizeof</span>(buf) - 1);</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;         <span class="comment">/* if the remote side disappears exit */</span></div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;         <span class="keywordflow">if</span> (res &lt; 1) {</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;\nDisconnected from Asterisk server\n&quot;</span>);</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d5b/options_8h.html#a49c5512f6feedb3629d559dd9f5f4416">ast_opt_reconnect</a>) {</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;               <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(0, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a12d28a6e5875c59040c79f31255b3cbd">SHUTDOWN_FAST</a>, 0);</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;               <span class="keywordtype">int</span> tries;</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;               <span class="keywordtype">int</span> reconnects_per_second = 20;</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;               fprintf(stderr, <span class="stringliteral">&quot;Attempting to reconnect for 30 seconds\n&quot;</span>);</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;               <span class="keywordflow">for</span> (tries = 0; tries &lt; 30 * reconnects_per_second; tries++) {</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#ab48b6f8cdddee48aed2f4fba4a6c18fe">ast_tryconnect</a>()) {</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;                     fprintf(stderr, <span class="stringliteral">&quot;Reconnect succeeded after %.3f seconds\n&quot;</span>, 1.0 / reconnects_per_second * tries);</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;                     printf(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#af8c8e45db028216c47dd06bb2c64adec">term_quit</a>());</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;                     <a class="code" href="../../d5/d03/asterisk_8c.html#a4102c912e07db36235dbf80dc4f9728a">WELCOME_MESSAGE</a>;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;                     <a class="code" href="../../d5/d03/asterisk_8c.html#a583bacf8cedc00da6854899e5d39f410">send_rasterisk_connect_commands</a>();</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;                  }</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;                  usleep(1000000 / reconnects_per_second);</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;               }</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;               <span class="keywordflow">if</span> (tries &gt;= 30 * reconnects_per_second) {</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;                  fprintf(stderr, <span class="stringliteral">&quot;Failed to reconnect for 30 seconds.  Quitting.\n&quot;</span>);</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;                  <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(0, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a12d28a6e5875c59040c79f31255b3cbd">SHUTDOWN_FAST</a>, 0);</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;               }</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;            }</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;         }</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;         buf[res] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;         <span class="comment">/* Write over the CLI prompt */</span></div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d5b/options_8h.html#a301d032d1d86ba46348691f6d135e98a">ast_opt_exec</a> &amp;&amp; !lastpos) {</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;            <span class="keywordflow">if</span> (write(STDOUT_FILENO, <span class="stringliteral">&quot;\r[0K&quot;</span>, 5) &lt; 0) {</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;            }</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;         }</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a7fc8eb444c6b6297888929ccb6828761">console_print</a>(buf);</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;         <span class="keywordflow">if</span> ((res &lt; <a class="code" href="../../d5/d03/asterisk_8c.html#a85cb51aebe0254ccf6f12cd8a35223de">EL_BUF_SIZE</a> - 1) &amp;&amp; ((buf[res-1] == <span class="charliteral">&#39;\n&#39;</span>) || (res &gt;= 2 &amp;&amp; buf[res-2] == <span class="charliteral">&#39;\n&#39;</span>))) {</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;            *cp = <a class="code" href="../../d5/d03/asterisk_8c.html#a75887fd405b024a9f8a2067fa051d781">CHAR_TO_LIBEDIT</a>(CC_REFRESH);</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;         }</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;         lastpos = 1;</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;      }</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;   }</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;   *cp = <a class="code" href="../../d5/d03/asterisk_8c.html#a75887fd405b024a9f8a2067fa051d781">CHAR_TO_LIBEDIT</a>(<span class="charliteral">&#39;\0&#39;</span>);</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;}</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;</div><div class="line"><a name="l02725"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136"> 2725</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;</div><div class="line"><a name="l02727"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a76e9858fdda453c648f37aede9f3005c"> 2727</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a76e9858fdda453c648f37aede9f3005c">cli_prompt</a>(EditLine *editline)</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;{</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[100];</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;   <span class="keywordtype">char</span> *pfmt;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;   <span class="keywordtype">int</span> color_used = 0;</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">int</span> cli_prompt_changes = 0;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;   <span class="keyword">struct </span>passwd *pw;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d08/structgroup.html">group</a> *gr;</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;   <span class="keywordflow">if</span> (prompt == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;      prompt = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(100);</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!cli_prompt_changes) {</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(prompt);</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(prompt);</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;   }</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;   <span class="keywordflow">if</span> ((pfmt = getenv(<span class="stringliteral">&quot;ASTERISK_PROMPT&quot;</span>))) {</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../df/d87/structconsole.html#aa49d6a06775253352589280dc7f30018">t</a> = pfmt;</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;      <span class="keyword">struct </span>timeval ts = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;      <span class="keywordflow">while</span> (*t != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;         <span class="keywordflow">if</span> (*t == <span class="charliteral">&#39;%&#39;</span>) {</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;            <span class="keywordtype">char</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a1b83df0dadc999c990245143b83292a0">hostname</a>[<a class="code" href="../../d9/d94/network_8h.html#afd80ecbe3170ca4fc85b65cda8659f82">MAXHOSTNAMELEN</a>] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;            <span class="keywordtype">int</span> i, which;</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> tm = { 0, };</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;            <span class="keywordtype">int</span> fgcolor = <a class="code" href="../../db/d45/term_8h.html#a9b44987ffdc2af19b635206b94334b69">COLOR_WHITE</a>, bgcolor = <a class="code" href="../../db/d45/term_8h.html#aba2a7fe77a7501e5844370eec0185207">COLOR_BLACK</a>;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;            t++;</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;            <span class="keywordflow">switch</span> (*t) {</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;C&#39;</span>: <span class="comment">/* color */</span></div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;               t++;</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;               <span class="keywordflow">if</span> (sscanf(t, <span class="stringliteral">&quot;%30d;%30d%n&quot;</span>, &amp;fgcolor, &amp;bgcolor, &amp;i) == 2) {</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;                  <a class="code" href="../../db/d45/term_8h.html#a5793417e507670e905f441b1d6e30f86">ast_term_color_code</a>(&amp;prompt, fgcolor, bgcolor);</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;                  t += i - 1;</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sscanf(t, <span class="stringliteral">&quot;%30d%n&quot;</span>, &amp;fgcolor, &amp;i) == 1) {</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;                  <a class="code" href="../../db/d45/term_8h.html#a5793417e507670e905f441b1d6e30f86">ast_term_color_code</a>(&amp;prompt, fgcolor, 0);</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;                  t += i - 1;</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;               }</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;               <span class="comment">/* If the color has been reset correctly, then there&#39;s no need to reset it later */</span></div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;               color_used = ((fgcolor == <a class="code" href="../../db/d45/term_8h.html#a9b44987ffdc2af19b635206b94334b69">COLOR_WHITE</a>) &amp;&amp; (bgcolor == <a class="code" href="../../db/d45/term_8h.html#aba2a7fe77a7501e5844370eec0185207">COLOR_BLACK</a>)) ? 0 : 1;</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>: <span class="comment">/* date */</span></div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;ts, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;                  <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%Y-%m-%d&quot;</span>, &amp;tm);</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%s&quot;</span>, tmp);</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;                  cli_prompt_changes++;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;               }</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;g&#39;</span>: <span class="comment">/* group */</span></div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;               <span class="keywordflow">if</span> ((gr = getgrgid(getgid()))) {</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%s&quot;</span>, gr-&gt;gr_name);</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;               }</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>: <span class="comment">/* hostname */</span></div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;               <span class="keywordflow">if</span> (!gethostname(hostname, <span class="keyword">sizeof</span>(hostname) - 1)) {</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%s&quot;</span>, hostname);</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;localhost&quot;</span>);</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;               }</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;H&#39;</span>: <span class="comment">/* short hostname */</span></div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;               <span class="keywordflow">if</span> (!gethostname(hostname, <span class="keyword">sizeof</span>(hostname) - 1)) {</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;                  <span class="keywordtype">char</span> *dotptr;</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;                  <span class="keywordflow">if</span> ((dotptr = strchr(hostname, <span class="charliteral">&#39;.&#39;</span>))) {</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;                     *dotptr = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;                  }</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%s&quot;</span>, hostname);</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;localhost&quot;</span>);</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;               }</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;<span class="preprocessor">#ifdef HAVE_GETLOADAVG</span></div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>: <span class="comment">/* load avg */</span></div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;               t++;</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;               <span class="keywordflow">if</span> (sscanf(t, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;which) == 1 &amp;&amp; which &gt; 0 &amp;&amp; which &lt;= 3) {</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;                  <span class="keywordtype">double</span> list[3];</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;                  <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40e0da58ab6964e3264b90f79ad6d476">getloadavg</a>(list, 3);</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%.2f&quot;</span>, list[which - 1]);</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;                  cli_prompt_changes++;</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;               }</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>: <span class="comment">/* Asterisk system name (from asterisk.conf) */</span></div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#ab9f9346c7a41bdf3720f7b1ed02ec703">ast_config_AST_SYSTEM_NAME</a>);</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>: <span class="comment">/* time */</span></div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;ts, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;                  <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%H:%M:%S&quot;</span>, &amp;tm);</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%s&quot;</span>, tmp);</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;                  cli_prompt_changes++;</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;               }</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>: <span class="comment">/* username */</span></div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;               <span class="keywordflow">if</span> ((pw = getpwuid(getuid()))) {</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%s&quot;</span>, pw-&gt;pw_name);</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;               }</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;#&#39;</span>: <span class="comment">/* process console or remote? */</span></div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%c&quot;</span>, <a class="code" href="../../d7/d5b/options_8h.html#a17d4d9ef04ffa9034f6c6b6c1fd2bb0b">ast_opt_remote</a> ? <span class="charliteral">&#39;&gt;&#39;</span> : <span class="charliteral">&#39;#&#39;</span>);</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;%&#39;</span>: <span class="comment">/* literal % */</span></div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%c&quot;</span>, <span class="charliteral">&#39;%&#39;</span>);</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;\0&#39;</span>: <span class="comment">/* % is last character - prevent bug */</span></div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;               t--;</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;            }</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%c&quot;</span>, *t);</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;         }</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;         t++;</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;      }</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;      <span class="keywordflow">if</span> (color_used) {</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;         <span class="comment">/* Force colors back to normal at end */</span></div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;         <a class="code" href="../../db/d45/term_8h.html#a5793417e507670e905f441b1d6e30f86">ast_term_color_code</a>(&amp;prompt, 0, 0);</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;      }</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;prompt, 0, <span class="stringliteral">&quot;%s%s&quot;</span>,</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a04e7dcc4737a260fa91c5241b81c0101">remotehostname</a> ? <a class="code" href="../../d5/d03/asterisk_8c.html#a04e7dcc4737a260fa91c5241b81c0101">remotehostname</a> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a5c70f918dc3849f6f6e22425394ddb5f">ASTERISK_PROMPT</a>);</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;   }</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(prompt);</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;}</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;</div><div class="line"><a name="l02853"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a60dd5f46a02b1199d4fdaf46b99125db"> 2853</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span>ast_vector_string *<a class="code" href="../../d5/d03/asterisk_8c.html#a60dd5f46a02b1199d4fdaf46b99125db">ast_el_strtoarr</a>(<span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>)</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;{</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;   <span class="keywordtype">char</span> *retstr;</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;   <span class="keyword">struct </span>ast_vector_string *vec = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*vec));</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;   <span class="keywordflow">if</span> (!vec) {</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;   }</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;   <span class="keywordflow">while</span> ((retstr = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;buf, <span class="stringliteral">&quot; &quot;</span>))) {</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;      <span class="keywordflow">if</span> (!strcmp(retstr, <a class="code" href="../../dc/db0/cli_8h.html#a4970cad1f99a12bc6f6838d538496079">AST_CLI_COMPLETE_EOF</a>)) {</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;      }</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;      retstr = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(retstr);</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;      <span class="keywordflow">if</span> (!retstr || <a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(vec, retstr)) {</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(retstr);</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;         <span class="keywordflow">goto</span> vector_cleanup;</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;      }</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;   }</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(vec)) {</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;      <span class="keywordflow">goto</span> vector_cleanup;</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;   }</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;   <span class="keywordflow">return</span> vec;</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;vector_cleanup:</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a>(vec, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#ad6ca5d1cf84a649801a2775c3b81da62">AST_VECTOR_PTR_FREE</a>(vec);</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;}</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;</div><div class="line"><a name="l02887"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a33a9992da9e5903817b8fec92e0bd7f9"> 2887</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a33a9992da9e5903817b8fec92e0bd7f9">ast_cli_display_match_list</a>(<span class="keyword">struct</span> ast_vector_string *matches, <span class="keywordtype">int</span> <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;{</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;   <span class="keywordtype">int</span> idx = 1;</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;   <span class="comment">/* find out how many entries can be put on one line, with two spaces between strings */</span></div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;   <span class="keywordtype">int</span> limit = <a class="code" href="../../dc/dac/io_8h.html#a8942a1f4804edc930a130dd74f91ed17">ast_get_termcols</a>(STDOUT_FILENO) / (max + 2);</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;   <span class="keywordflow">if</span> (limit == 0) {</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;      limit = 1;</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;   }</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;      <span class="keywordtype">int</span> numoutputline;</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;      <span class="keywordflow">for</span> (numoutputline = 0; numoutputline &lt; limit &amp;&amp; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(matches); idx++) {</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;         numoutputline++;</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;         fprintf(stdout, <span class="stringliteral">&quot;%-*s  &quot;</span>, max, <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(matches, idx));</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;      }</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;      <span class="keywordflow">if</span> (!numoutputline) {</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;      }</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;      fprintf(stdout, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;   }</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;}</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;</div><div class="line"><a name="l02914"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a31d30092ec56ba10a14cfdfcb613d1b2"> 2914</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a31d30092ec56ba10a14cfdfcb613d1b2">cli_complete</a>(EditLine *editline, <span class="keywordtype">int</span> ch)</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;{</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = 0;</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;   <span class="keywordtype">char</span> *ptr;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;   <span class="keyword">struct </span>ast_vector_string *matches;</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a> = CC_ERROR;</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;   <span class="keywordtype">char</span> savechr;</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;   LineInfo *lf = (LineInfo *)el_line(editline);</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;   savechr = *(<span class="keywordtype">char</span> *)lf-&gt;cursor;</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;   *(<span class="keywordtype">char</span> *)lf-&gt;cursor = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;   ptr = (<span class="keywordtype">char</span> *)lf-&gt;cursor;</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;   <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> (ptr) {</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;      <span class="keywordflow">while</span> (ptr &gt; lf-&gt;buffer) {</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;         <span class="keywordflow">if</span> (isspace(*ptr)) {</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;            ptr++;</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;         }</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;         ptr--;</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;      }</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;   }</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;   len = lf-&gt;cursor - ptr;</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a17d4d9ef04ffa9034f6c6b6c1fd2bb0b">ast_opt_remote</a>) {</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;<span class="preprocessor">#define CMD_MATCHESARRAY &quot;_COMMAND MATCHESARRAY \&quot;%s\&quot; \&quot;%s\&quot;&quot;</span></div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;      <span class="keywordtype">char</span> *mbuf;</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;      <span class="keywordtype">char</span> *new_mbuf;</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;      <span class="keywordtype">int</span> mlen = 0;</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;      <span class="keywordtype">int</span> maxmbuf = <a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;mbuf, <a class="code" href="../../d5/d03/asterisk_8c.html#a461f6bc3b4edc52e5c04284f13e8d8dc">CMD_MATCHESARRAY</a>, lf-&gt;buffer, ptr);</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;      <span class="keywordflow">if</span> (maxmbuf == -1) {</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;         *((<span class="keywordtype">char</span> *) lf-&gt;cursor) = savechr;</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;         <span class="keywordflow">return</span> (<span class="keywordtype">char</span> *)(CC_ERROR);</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;      }</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#ac07499a06d0a0cf1d9ea14cf0693330a">fdsend</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>, mbuf);</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;      res = 0;</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;      mlen = 0;</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;      mbuf[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;      <span class="keywordflow">while</span> (!strstr(mbuf, <a class="code" href="../../dc/db0/cli_8h.html#a4970cad1f99a12bc6f6838d538496079">AST_CLI_COMPLETE_EOF</a>) &amp;&amp; res != -1) {</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;         <span class="keywordflow">if</span> (mlen + 1024 &gt; maxmbuf) {</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;            <span class="comment">/* Expand buffer to the next 1024 byte increment plus a NULL terminator. */</span></div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;            maxmbuf = mlen + 1024;</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;            new_mbuf = <a class="code" href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a>(mbuf, maxmbuf + 1);</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;            <span class="keywordflow">if</span> (!new_mbuf) {</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(mbuf);</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;               *((<span class="keywordtype">char</span> *) lf-&gt;cursor) = savechr;</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;               <span class="keywordflow">return</span> (<span class="keywordtype">char</span> *)(CC_ERROR);</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;            }</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;            mbuf = new_mbuf;</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;         }</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;         <span class="comment">/* Only read 1024 bytes at a time */</span></div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;         res = read(<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>, mbuf + mlen, 1024);</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;         <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;            mlen += res;</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;            mbuf[mlen] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;         }</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;      }</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;      mbuf[mlen] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;      matches = <a class="code" href="../../d5/d03/asterisk_8c.html#a60dd5f46a02b1199d4fdaf46b99125db">ast_el_strtoarr</a>(mbuf);</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(mbuf);</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;      matches = <a class="code" href="../../dc/db0/cli_8h.html#a75f19bbd3b41504a62ae727c6083f8af">ast_cli_completion_vector</a>((<span class="keywordtype">char</span> *)lf-&gt;buffer, ptr);</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;   }</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;   <span class="keywordflow">if</span> (matches) {</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;      <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;      <span class="keywordtype">int</span> maxlen, match_len;</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *best_match = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(matches, 0);</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(best_match)) {</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;         el_deletestr(editline, (<span class="keywordtype">int</span>) len);</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;         el_insertstr(editline, best_match);</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;         retval = CC_REFRESH;</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;      }</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(matches) == 2) {</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;         <span class="comment">/* Found an exact match */</span></div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;         el_insertstr(editline, <span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;         retval = CC_REFRESH;</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;         <span class="comment">/* Must be more than one match */</span></div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;         <span class="keywordflow">for</span> (i = 1, maxlen = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(matches); i++) {</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;            match_len = strlen(<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(matches, i));</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;            <span class="keywordflow">if</span> (match_len &gt; maxlen) {</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;               maxlen = match_len;</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;            }</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;         }</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;         fprintf(stdout, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a33a9992da9e5903817b8fec92e0bd7f9">ast_cli_display_match_list</a>(matches, maxlen);</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;         retval = CC_REDISPLAY;</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;      }</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a>(matches, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#ad6ca5d1cf84a649801a2775c3b81da62">AST_VECTOR_PTR_FREE</a>(matches);</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;   }</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;   *((<span class="keywordtype">char</span> *) lf-&gt;cursor) = savechr;</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;   <span class="keywordflow">return</span> (<span class="keywordtype">char</span> *)(long)retval;</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;}</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;</div><div class="line"><a name="l03023"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a6314c179e2d65f03b48aab48fcfc430f"> 3023</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a6314c179e2d65f03b48aab48fcfc430f">ast_el_initialize</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;{</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;   HistEvent ev;</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;   <span class="keywordtype">char</span> *editor, *editrc = getenv(<span class="stringliteral">&quot;EDITRC&quot;</span>);</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;   <span class="keywordflow">if</span> (!(editor = getenv(<span class="stringliteral">&quot;AST_EDITMODE&quot;</span>))) {</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      <span class="keywordflow">if</span> (!(editor = getenv(<span class="stringliteral">&quot;AST_EDITOR&quot;</span>))) {</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;         editor = <span class="stringliteral">&quot;emacs&quot;</span>;</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;      }</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;   }</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;      el_end(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>);</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;      history_end(<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a>);</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a> = el_init(<span class="stringliteral">&quot;asterisk&quot;</span>, stdin, stdout, stderr);</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_PROMPT, <a class="code" href="../../d5/d03/asterisk_8c.html#a76e9858fdda453c648f37aede9f3005c">cli_prompt</a>);</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_EDITMODE, 1);</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_EDITOR, editor);</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a> = history_init();</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a> || !<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a>)</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;   <span class="comment">/* setup history with 100 entries */</span></div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;   history(<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a>, &amp;ev, H_SETSIZE, 100);</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_HIST, history, <a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a>);</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_ADDFN, <span class="stringliteral">&quot;ed-complete&quot;</span>, <span class="stringliteral">&quot;Complete argument&quot;</span>, <a class="code" href="../../d5/d03/asterisk_8c.html#a31d30092ec56ba10a14cfdfcb613d1b2">cli_complete</a>);</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;   <span class="comment">/* Bind &lt;tab&gt; to command completion */</span></div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_BIND, <span class="stringliteral">&quot;^I&quot;</span>, <span class="stringliteral">&quot;ed-complete&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;   <span class="comment">/* Bind ? to command completion */</span></div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_BIND, <span class="stringliteral">&quot;?&quot;</span>, <span class="stringliteral">&quot;ed-complete&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;   <span class="comment">/* Bind ^D to redisplay */</span></div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_BIND, <span class="stringliteral">&quot;^D&quot;</span>, <span class="stringliteral">&quot;ed-redisplay&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;   <span class="comment">/* Bind Delete to delete char left */</span></div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_BIND, <span class="stringliteral">&quot;\\e[3~&quot;</span>, <span class="stringliteral">&quot;ed-delete-next-char&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;   <span class="comment">/* Bind Home and End to move to line start and end */</span></div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_BIND, <span class="stringliteral">&quot;\\e[1~&quot;</span>, <span class="stringliteral">&quot;ed-move-to-beg&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_BIND, <span class="stringliteral">&quot;\\e[4~&quot;</span>, <span class="stringliteral">&quot;ed-move-to-end&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;   <span class="comment">/* Bind C-left and C-right to move by word (not all terminals) */</span></div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_BIND, <span class="stringliteral">&quot;\\eOC&quot;</span>, <span class="stringliteral">&quot;vi-next-word&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_BIND, <span class="stringliteral">&quot;\\eOD&quot;</span>, <span class="stringliteral">&quot;vi-prev-word&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;   <span class="keywordflow">if</span> (editrc) {</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;      el_source(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, editrc);</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;   }</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;}</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;</div><div class="line"><a name="l03076"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a8912c9eedfa2f08023a2a0901bac3af3"> 3076</a></span>&#160;<span class="preprocessor">#define MAX_HISTORY_COMMAND_LENGTH 256</span></div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;</div><div class="line"><a name="l03078"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a027ab2a74bcb1638e70418055feb57b9"> 3078</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a027ab2a74bcb1638e70418055feb57b9">ast_el_add_history</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>)</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;{</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;   HistEvent ev;</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;   <span class="keywordtype">char</span> *stripped_buf;</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || <a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a6314c179e2d65f03b48aab48fcfc430f">ast_el_initialize</a>();</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;   }</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;   <span class="keywordflow">if</span> (strlen(buf) &gt; (<a class="code" href="../../d5/d03/asterisk_8c.html#a8912c9eedfa2f08023a2a0901bac3af3">MAX_HISTORY_COMMAND_LENGTH</a> - 1)) {</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;   }</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;   stripped_buf = <a class="code" href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a>(<a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(buf));</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;   <span class="comment">/* HISTCONTROL=ignoredups */</span></div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;   <span class="keywordflow">if</span> (!history(<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a>, &amp;ev, H_FIRST) &amp;&amp; strcmp(ev.str, stripped_buf) == 0) {</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;   }</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;   <span class="keywordflow">return</span> history(<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a>, &amp;ev, H_ENTER, stripped_buf);</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;}</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;</div><div class="line"><a name="l03100"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ac3c33bdbdf88cc876d630cd277242fbc"> 3100</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ac3c33bdbdf88cc876d630cd277242fbc">ast_el_write_history</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *filename)</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;{</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;   HistEvent ev;</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || <a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a6314c179e2d65f03b48aab48fcfc430f">ast_el_initialize</a>();</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;   <span class="keywordflow">return</span> (history(<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a>, &amp;ev, H_SAVE, filename));</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;}</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;</div><div class="line"><a name="l03110"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a696f0073d9bd15b5b2b4262a6d8ec7d1"> 3110</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a696f0073d9bd15b5b2b4262a6d8ec7d1">ast_el_read_history</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *filename)</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;{</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;   HistEvent ev;</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || <a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a6314c179e2d65f03b48aab48fcfc430f">ast_el_initialize</a>();</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;   }</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;   <span class="keywordflow">return</span> history(<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a>, &amp;ev, H_LOAD, filename);</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;}</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;</div><div class="line"><a name="l03121"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ac718cef19833170af662c53525d9c8c9"> 3121</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ac718cef19833170af662c53525d9c8c9">ast_el_read_default_histfile</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;{</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;   <span class="keywordtype">char</span> histfile[80] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *home = getenv(<span class="stringliteral">&quot;HOME&quot;</span>);</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(home)) {</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;      snprintf(histfile, <span class="keyword">sizeof</span>(histfile), <span class="stringliteral">&quot;%s/.asterisk_history&quot;</span>, home);</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a696f0073d9bd15b5b2b4262a6d8ec7d1">ast_el_read_history</a>(histfile);</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;   }</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;}</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;</div><div class="line"><a name="l03132"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ae15faa0b9305355ac46a8875f99480a1"> 3132</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ae15faa0b9305355ac46a8875f99480a1">ast_el_write_default_histfile</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;{</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;   <span class="keywordtype">char</span> histfile[80] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *home = getenv(<span class="stringliteral">&quot;HOME&quot;</span>);</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(home)) {</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;      snprintf(histfile, <span class="keyword">sizeof</span>(histfile), <span class="stringliteral">&quot;%s/.asterisk_history&quot;</span>, home);</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#ac3c33bdbdf88cc876d630cd277242fbc">ast_el_write_history</a>(histfile);</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;   }</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;}</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;</div><div class="line"><a name="l03143"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a8f0bd75717a5fd70f289769dd7698339"> 3143</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a8f0bd75717a5fd70f289769dd7698339">ast_remotecontrol</a>(<span class="keywordtype">char</span> *data)</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;{</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[256] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a1b83df0dadc999c990245143b83292a0">hostname</a>;</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;   <span class="keywordtype">char</span> *cpid;</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a>;</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;   <span class="keywordtype">int</span> pid;</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;   <span class="keywordtype">char</span> *stringp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;   <span class="keywordtype">char</span> *ebuf;</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;   <span class="keywordtype">int</span> num = 0;</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#a1997b4ca4fdf17e715fddf00f44c9651">ast_term_init</a>();</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;   printf(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a253f1aaaac4bf7e88ca402bddbe7fe6f">term_end</a>());</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;   fflush(stdout);</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;   memset(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>));</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;   signal(SIGINT, <a class="code" href="../../d5/d03/asterisk_8c.html#a128997a8231cdc87af7181da9ac78b7b">__remote_quit_handler</a>);</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;   signal(SIGTERM, <a class="code" href="../../d5/d03/asterisk_8c.html#a128997a8231cdc87af7181da9ac78b7b">__remote_quit_handler</a>);</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;   signal(SIGHUP, <a class="code" href="../../d5/d03/asterisk_8c.html#a128997a8231cdc87af7181da9ac78b7b">__remote_quit_handler</a>);</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;   <span class="keywordflow">if</span> (read(<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>, buf, <span class="keyword">sizeof</span>(buf) - 1) &lt; 0) {</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;read() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;   }</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;   <span class="keywordflow">if</span> (data) {</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>[] = <span class="stringliteral">&quot;cli quit after &quot;</span>;</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(strlen(data) + strlen(prefix) + 1);</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;      sprintf(tmp, <span class="stringliteral">&quot;%s%s&quot;</span>, prefix, data);</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;      <span class="keywordflow">if</span> (write(<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>, tmp, strlen(tmp) + 1) &lt; 0) {</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;write() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit || <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit_handler || <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_el_end) {</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;         }</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;      }</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;   }</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;   stringp = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;   hostname = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;/&quot;</span>);</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;   cpid = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;/&quot;</span>);</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;   version = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;   <span class="keywordflow">if</span> (!version)</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;      version = <span class="stringliteral">&quot;&lt;Version Unknown&gt;&quot;</span>;</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;   stringp = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a1b83df0dadc999c990245143b83292a0">hostname</a>;</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;   <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;.&quot;</span>);</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;   <span class="keywordflow">if</span> (cpid)</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;      pid = atoi(cpid);</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;      pid = -1;</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;   <span class="keywordflow">if</span> (!data) {</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a583bacf8cedc00da6854899e5d39f410">send_rasterisk_connect_commands</a>();</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;   }</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a301d032d1d86ba46348691f6d135e98a">ast_opt_exec</a> &amp;&amp; data) {  <span class="comment">/* hack to print output then exit if asterisk -rx is used */</span></div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;      <span class="keywordtype">int</span> linefull = 1, prev_linefull = 1, prev_line_verbose = 0;</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;      <span class="keyword">struct </span>pollfd fds;</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;      fds.fd = <a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>;</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;      fds.events = POLLIN;</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;      fds.revents = 0;</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(&amp;fds, 1, 60000) &gt; 0) {</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;         <span class="keywordtype">char</span> buffer[512] = <span class="stringliteral">&quot;&quot;</span>, *curline = buffer, *nextline;</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;         <span class="keywordtype">int</span> not_written = 1;</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit || <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit_handler || <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_el_end) {</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;         }</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;         <span class="keywordflow">if</span> (read(<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>, buffer, <span class="keyword">sizeof</span>(buffer) - 1) &lt;= 0) {</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;         }</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;         <span class="keywordflow">do</span> {</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;            prev_linefull = linefull;</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;            <span class="keywordflow">if</span> ((nextline = strchr(curline, <span class="charliteral">&#39;\n&#39;</span>))) {</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;               linefull = 1;</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;               nextline++;</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;               linefull = 0;</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;               nextline = strchr(curline, <span class="charliteral">&#39;\0&#39;</span>);</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;            }</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;            <span class="comment">/* Skip verbose lines */</span></div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;            <span class="comment">/* Prev line full? | Line is verbose | Last line verbose? | Print</span></div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;<span class="comment">             * TRUE            | TRUE*           | TRUE               | FALSE</span></div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;<span class="comment">             * TRUE            | TRUE*           | FALSE              | FALSE</span></div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;<span class="comment">             * TRUE            | FALSE*          | TRUE               | TRUE</span></div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;<span class="comment">             * TRUE            | FALSE*          | FALSE              | TRUE</span></div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;<span class="comment">             * FALSE           | TRUE            | TRUE*              | FALSE</span></div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;<span class="comment">             * FALSE           | TRUE            | FALSE*             | TRUE</span></div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;<span class="comment">             * FALSE           | FALSE           | TRUE*              | FALSE</span></div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;<span class="comment">             * FALSE           | FALSE           | FALSE*             | TRUE</span></div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;            <span class="keywordflow">if</span> ((!prev_linefull &amp;&amp; !prev_line_verbose) || (prev_linefull &amp;&amp; *curline &gt; 0)) {</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;               prev_line_verbose = 0;</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;               not_written = 0;</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;               <span class="keywordflow">if</span> (write(STDOUT_FILENO, curline, nextline - curline) &lt; 0) {</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;write() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;               }</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;               prev_line_verbose = 1;</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;            }</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;            curline = nextline;</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;         } <span class="keywordflow">while</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(curline));</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;         <span class="comment">/* No non-verbose output in 60 seconds. */</span></div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;         <span class="keywordflow">if</span> (not_written) {</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;         }</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;      }</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;   }</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;   <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Connected to Asterisk %s currently running on %s (pid = %d)\n&quot;</span>, version, hostname, pid);</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a5d8b3e9d6d1e828877fab83401fcbfe4">ast_init_logger_for_socket_console</a>();</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a04e7dcc4737a260fa91c5241b81c0101">remotehostname</a> = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a1b83df0dadc999c990245143b83292a0">hostname</a>;</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || <a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a6314c179e2d65f03b48aab48fcfc430f">ast_el_initialize</a>();</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#ac718cef19833170af662c53525d9c8c9">ast_el_read_default_histfile</a>();</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;   el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_GETCFN, <a class="code" href="../../d5/d03/asterisk_8c.html#a43af335a570187abea70ea3ebde8aa23">ast_el_read_char</a>);</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;      ebuf = (<span class="keywordtype">char</span> *)el_gets(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, &amp;num);</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit || <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit_handler || <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_el_end) {</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;      }</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;      <span class="keywordflow">if</span> (!ebuf &amp;&amp; write(1, <span class="stringliteral">&quot;&quot;</span>, 1) &lt; 0)</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(ebuf)) {</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;         <span class="keywordflow">if</span> (ebuf[strlen(ebuf)-1] == <span class="charliteral">&#39;\n&#39;</span>)</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;            ebuf[strlen(ebuf)-1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d03/asterisk_8c.html#a27fdbb6caaef2f56f1379c779c1e74b5">remoteconsolehandler</a>(ebuf)) {</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;            res = write(<a class="code" href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a>, ebuf, strlen(ebuf) + 1);</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;            <span class="keywordflow">if</span> (res &lt; 1) {</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to write: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;            }</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;         }</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;      }</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;   }</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;   printf(<span class="stringliteral">&quot;\nDisconnected from Asterisk server\n&quot;</span>);</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;}</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;</div><div class="line"><a name="l03291"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a2ea358bef646393c728f1c81bd649bae"> 3291</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a2ea358bef646393c728f1c81bd649bae">show_version</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;{</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;   printf(<span class="stringliteral">&quot;Asterisk %s\n&quot;</span>, <a class="code" href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a>());</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;}</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;</div><div class="line"><a name="l03297"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ac4583a51482ac439c1aef7615f7379cd"> 3297</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ac4583a51482ac439c1aef7615f7379cd">show_cli_help</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;{</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;   printf(<span class="stringliteral">&quot;Asterisk %s, &quot;</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a850def08dc62ba3f1c34d459ff9d37c5">COPYRIGHT_TAG</a> <span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a>());</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;   printf(<span class="stringliteral">&quot;Usage: asterisk [OPTIONS]\n&quot;</span>);</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;   printf(<span class="stringliteral">&quot;Valid Options:\n&quot;</span>);</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;   printf(<span class="stringliteral">&quot;   -V              Display version number and exit\n&quot;</span>);</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;   printf(<span class="stringliteral">&quot;   -C &lt;configfile&gt; Use an alternate configuration file\n&quot;</span>);</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;   printf(<span class="stringliteral">&quot;   -G &lt;group&gt;      Run as a group other than the caller\n&quot;</span>);</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;   printf(<span class="stringliteral">&quot;   -U &lt;user&gt;       Run as a user other than the caller\n&quot;</span>);</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;   printf(<span class="stringliteral">&quot;   -c              Provide console CLI\n&quot;</span>);</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;   printf(<span class="stringliteral">&quot;   -d              Increase debugging (multiple d&#39;s = more debugging)\n&quot;</span>);</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;<span class="preprocessor">#if HAVE_WORKING_FORK</span></div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;   printf(<span class="stringliteral">&quot;   -f              Do not fork\n&quot;</span>);</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;   printf(<span class="stringliteral">&quot;   -F              Always fork\n&quot;</span>);</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;   printf(<span class="stringliteral">&quot;   -g              Dump core in case of a crash\n&quot;</span>);</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;   printf(<span class="stringliteral">&quot;   -h              This help screen\n&quot;</span>);</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;   printf(<span class="stringliteral">&quot;   -i              Initialize crypto keys at startup\n&quot;</span>);</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;   printf(<span class="stringliteral">&quot;   -L &lt;load&gt;       Limit the maximum load average before rejecting new calls\n&quot;</span>);</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;   printf(<span class="stringliteral">&quot;   -M &lt;value&gt;      Limit the maximum number of calls to the specified value\n&quot;</span>);</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;   printf(<span class="stringliteral">&quot;   -m              Mute debugging and console output on the console\n&quot;</span>);</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;   printf(<span class="stringliteral">&quot;   -n              Disable console colorization\n&quot;</span>);</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;   printf(<span class="stringliteral">&quot;   -p              Run as pseudo-realtime thread\n&quot;</span>);</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;   printf(<span class="stringliteral">&quot;   -q              Quiet mode (suppress output)\n&quot;</span>);</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;   printf(<span class="stringliteral">&quot;   -r              Connect to Asterisk on this machine\n&quot;</span>);</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;   printf(<span class="stringliteral">&quot;   -R              Same as -r, except attempt to reconnect if disconnected\n&quot;</span>);</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;   printf(<span class="stringliteral">&quot;   -s &lt;socket&gt;     Connect to Asterisk via socket &lt;socket&gt; (only valid with -r)\n&quot;</span>);</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;   printf(<span class="stringliteral">&quot;   -t              Record soundfiles in /var/tmp and move them where they\n&quot;</span>);</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;   printf(<span class="stringliteral">&quot;                   belong after they are done\n&quot;</span>);</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;   printf(<span class="stringliteral">&quot;   -T              Display the time in [Mmm dd hh:mm:ss] format for each line\n&quot;</span>);</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;   printf(<span class="stringliteral">&quot;                   of output to the CLI\n&quot;</span>);</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;   printf(<span class="stringliteral">&quot;   -v              Increase verbosity (multiple v&#39;s = more verbose)\n&quot;</span>);</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;   printf(<span class="stringliteral">&quot;   -x &lt;cmd&gt;        Execute command &lt;cmd&gt; (implies -r)\n&quot;</span>);</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;   printf(<span class="stringliteral">&quot;   -X              Enable use of #exec in asterisk.conf\n&quot;</span>);</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;   printf(<span class="stringliteral">&quot;   -W              Adjust terminal colors to compensate for a light background\n&quot;</span>);</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;   printf(<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;}</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;</div><div class="line"><a name="l03336"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ad25ecaec9013588c4f6f8537912a8137"> 3336</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ad25ecaec9013588c4f6f8537912a8137">read_pjproject_startup_options</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;{</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee">CONFIG_FLAG_NOCACHE</a> | <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fa466e6ea3d284a9f45202a54686c090aa">CONFIG_FLAG_NOREALTIME</a> };</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;   <a class="code" href="../../d6/dd6/group__main__options.html#ga8f2f99ca0289d77ed55044e2ae6a11b2">ast_option_pjproject_log_level</a> = <a class="code" href="../../d7/d5b/options_8h.html#ad9cd3c90c415686a25a4eb51e558999e">DEFAULT_PJ_LOG_MAX_LEVEL</a>;</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;   <a class="code" href="../../d6/dd6/group__main__options.html#gad108222bf97f7f56db7631fa239c0d4d">ast_option_pjproject_cache_pools</a> = <a class="code" href="../../d7/d5b/options_8h.html#a4ba559b3374e340f54546ae9bb64af5e">DEFAULT_PJPROJECT_CACHE_POOLS</a>;</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;   cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a>(<span class="stringliteral">&quot;pjproject.conf&quot;</span>, <span class="stringliteral">&quot;&quot;</span> <span class="comment">/* core, can&#39;t reload */</span>, config_flags);</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;   <span class="keywordflow">if</span> (!cfg</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;      || cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a></div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;      || cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;      <span class="comment">/* We&#39;ll have to use defaults */</span></div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;   }</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;   <span class="keywordflow">for</span> (v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, <span class="stringliteral">&quot;startup&quot;</span>); v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;log_level&quot;</span>)) {</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;         <span class="keywordflow">if</span> (sscanf(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;<a class="code" href="../../d6/dd6/group__main__options.html#ga8f2f99ca0289d77ed55044e2ae6a11b2">ast_option_pjproject_log_level</a>) != 1) {</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;            <a class="code" href="../../d6/dd6/group__main__options.html#ga8f2f99ca0289d77ed55044e2ae6a11b2">ast_option_pjproject_log_level</a> = <a class="code" href="../../d7/d5b/options_8h.html#ad9cd3c90c415686a25a4eb51e558999e">DEFAULT_PJ_LOG_MAX_LEVEL</a>;</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd6/group__main__options.html#ga8f2f99ca0289d77ed55044e2ae6a11b2">ast_option_pjproject_log_level</a> &lt; 0) {</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;            <a class="code" href="../../d6/dd6/group__main__options.html#ga8f2f99ca0289d77ed55044e2ae6a11b2">ast_option_pjproject_log_level</a> = 0;</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a274e5a8fe9d6ccc24286203941e406b7">MAX_PJ_LOG_MAX_LEVEL</a> &lt; <a class="code" href="../../d6/dd6/group__main__options.html#ga8f2f99ca0289d77ed55044e2ae6a11b2">ast_option_pjproject_log_level</a>) {</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;            <a class="code" href="../../d6/dd6/group__main__options.html#ga8f2f99ca0289d77ed55044e2ae6a11b2">ast_option_pjproject_log_level</a> = <a class="code" href="../../d7/d5b/options_8h.html#a274e5a8fe9d6ccc24286203941e406b7">MAX_PJ_LOG_MAX_LEVEL</a>;</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;         }</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;cache_pools&quot;</span>)) {</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;         <a class="code" href="../../d6/dd6/group__main__options.html#gad108222bf97f7f56db7631fa239c0d4d">ast_option_pjproject_cache_pools</a> = !<a class="code" href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;      }</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;   }</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;}</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;</div><div class="line"><a name="l03370"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a643319c1ef479a7d90ed02ec9c8b1a68"> 3370</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a643319c1ef479a7d90ed02ec9c8b1a68">monitor_sig_flags</a>(<span class="keywordtype">void</span> *unused)</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;{</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;      <span class="keyword">struct </span>pollfd p = { <a class="code" href="../../d5/d03/asterisk_8c.html#a7bb419fdb0040da24ecbb651b12395fc">sig_alert_pipe</a>[0], POLLIN, 0 };</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;      <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(&amp;p, 1, -1);</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_reload) {</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_reload = 0;</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;         <a class="code" href="../../d5/d16/module_8h.html#af9e3b4ae730e43312e00fcbc1707588b">ast_module_reload</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;      }</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit) {</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit = 0;</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;         <span class="keywordflow">if</span> ((<a class="code" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) &amp;&amp; (<a class="code" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a> != pthread_self())) {</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;            <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit_handler = 1;</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;            pthread_kill(<a class="code" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a>, SIGURG);</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;            <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(0, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a2a9246405d49261dae3926e7d5612d2c">SHUTDOWN_NORMAL</a>, 0);</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;         }</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;      }</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;      <a class="code" href="../../dc/d4d/alertpipe_8h.html#ac503d210cefe419a8c43d2e713c97bf9">ast_alertpipe_read</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a7bb419fdb0040da24ecbb651b12395fc">sig_alert_pipe</a>);</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;   }</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;}</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;</div><div class="line"><a name="l03395"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a1dab70ac26334f4acece46d997255563"> 3395</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../d5/d03/asterisk_8c.html#a1dab70ac26334f4acece46d997255563">canary_thread</a>(<span class="keywordtype">void</span> *unused)</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;{</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;   <span class="keyword">struct </span>stat canary_stat;</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;   <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;   <span class="comment">/* Give the canary time to sing */</span></div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;   sleep(120);</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;      now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;      <span class="keywordflow">if</span> (stat(<a class="code" href="../../d5/d03/asterisk_8c.html#a459b692028914da1bf3641b5de9ba6ea">canary_filename</a>, &amp;canary_stat) || now.tv_sec &gt; canary_stat.st_mtime + 60) {</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;            <span class="stringliteral">&quot;The canary is no more.  He has ceased to be!  &quot;</span></div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;            <span class="stringliteral">&quot;He&#39;s expired and gone to meet his maker!  &quot;</span></div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;            <span class="stringliteral">&quot;He&#39;s a stiff!  Bereft of life, he rests in peace.  &quot;</span></div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;            <span class="stringliteral">&quot;His metabolic processes are now history!  He&#39;s off the twig!  &quot;</span></div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;            <span class="stringliteral">&quot;He&#39;s kicked the bucket.  He&#39;s shuffled off his mortal coil, &quot;</span></div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;            <span class="stringliteral">&quot;run down the curtain, and joined the bleeding choir invisible!!  &quot;</span></div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;            <span class="stringliteral">&quot;THIS is an EX-CANARY.  (Reducing priority)\n&quot;</span>);</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a63d2216bb22fe88d5f1e964a1b8e8c3f">set_priority_all</a>(0);</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;         pthread_exit(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;      }</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;      <span class="comment">/* Check the canary once a minute */</span></div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;      sleep(60);</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;   }</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;}</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;<span class="comment">/* Used by libc&#39;s atexit(3) function */</span></div><div class="line"><a name="l03424"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a0fb077af6d08a4c0be395841196b12fd"> 3424</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a0fb077af6d08a4c0be395841196b12fd">canary_exit</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;{</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#ab2acd3f561950f0ab6546314677ad57d">canary_pid</a> &gt; 0) {</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;      kill(<a class="code" href="../../d5/d03/asterisk_8c.html#ab2acd3f561950f0ab6546314677ad57d">canary_pid</a>, SIGKILL);</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;      waitpid(<a class="code" href="../../d5/d03/asterisk_8c.html#ab2acd3f561950f0ab6546314677ad57d">canary_pid</a>, &amp;status, 0);</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;   }</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;}</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;<span class="comment">/* Execute CLI commands on startup.  Run by main() thread. */</span></div><div class="line"><a name="l03434"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ac3e31dd03ea540885ef4359f5f4443a9"> 3434</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ac3e31dd03ea540885ef4359f5f4443a9">run_startup_commands</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;{</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>;</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> cfg_flags = { 0 };</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;   <span class="keywordflow">if</span> (!(cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a>(<span class="stringliteral">&quot;cli.conf&quot;</span>, <span class="stringliteral">&quot;&quot;</span> <span class="comment">/* core, can&#39;t reload */</span>, cfg_flags)))</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;   <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a39bacaabcacf47583204c7634e64a2a0">CONFIG_STATUS_FILEMISSING</a> || cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a> || cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;   }</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;   fd = open(<span class="stringliteral">&quot;/dev/null&quot;</span>, O_RDWR);</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;   <span class="keywordflow">if</span> (fd &lt; 0) {</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;   }</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;   <span class="keywordflow">for</span> (v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, <span class="stringliteral">&quot;startup_commands&quot;</span>); v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>))</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9">ast_cli_command</a>(fd, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;   }</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;   close(fd);</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;}</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;</div><div class="line"><a name="l03462"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#ac93a7a9b76beefd78e435cf9f9969bc8"> 3462</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#ac93a7a9b76beefd78e435cf9f9969bc8">env_init</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;{</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;   <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_SYSTEMNAME&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#ab9f9346c7a41bdf3720f7b1ed02ec703">ast_config_AST_SYSTEM_NAME</a>, 1);</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;   <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_BUILD_HOST&quot;</span>, <a class="code" href="../../de/d35/buildinfo_8h.html#aae3c7406e483c475f34063c84048ab89">ast_build_hostname</a>, 1);</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;   <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_BUILD_DATE&quot;</span>, <a class="code" href="../../de/d35/buildinfo_8h.html#af1708cda257f6db95f77b34f112ef64b">ast_build_date</a>, 1);</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;   <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_BUILD_KERNEL&quot;</span>, <a class="code" href="../../de/d35/buildinfo_8h.html#af89b2913397f19dc15adb9014bcb5d5a">ast_build_kernel</a>, 1);</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;   <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_BUILD_MACHINE&quot;</span>, <a class="code" href="../../de/d35/buildinfo_8h.html#a6d456a43bdae713459ee5ee67439670c">ast_build_machine</a>, 1);</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;   <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_BUILD_OS&quot;</span>, <a class="code" href="../../de/d35/buildinfo_8h.html#a00b5464ec2f306ae8f17f73a0a81f28d">ast_build_os</a>, 1);</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;   <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_BUILD_USER&quot;</span>, <a class="code" href="../../de/d35/buildinfo_8h.html#ac67b18fb7444d973a733a9757c1ff8f9">ast_build_user</a>, 1);</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;   <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a>(<span class="stringliteral">&quot;AST_VERSION&quot;</span>, <a class="code" href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a>(), 1);</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;}</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;</div><div class="line"><a name="l03474"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#aec94f23bfed8fd1476e3c6f8b3dce3e0"> 3474</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#aec94f23bfed8fd1476e3c6f8b3dce3e0">print_intro_message</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *runuser, <span class="keyword">const</span> <span class="keywordtype">char</span> *rungroup)</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;{</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a4fe31af40146104d64d4a31535e44400">ast_opt_console</a> || <a class="code" href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a> || (<a class="code" href="../../d7/d5b/options_8h.html#a17d4d9ef04ffa9034f6c6b6c1fd2bb0b">ast_opt_remote</a> &amp;&amp; !<a class="code" href="../../d7/d5b/options_8h.html#a301d032d1d86ba46348691f6d135e98a">ast_opt_exec</a>)) {</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a4102c912e07db36235dbf80dc4f9728a">WELCOME_MESSAGE</a>;</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;      <span class="keywordflow">if</span> (runuser) {</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Running as user &#39;%s&#39;\n&quot;</span>, runuser);</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;      }</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;      <span class="keywordflow">if</span> (rungroup) {</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Running under group &#39;%s&#39;\n&quot;</span>, rungroup);</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;      }</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;   }</div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;}</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;</div><div class="line"><a name="l03487"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a302c7c993903d5596dcada4e41db65f4"> 3487</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a302c7c993903d5596dcada4e41db65f4">main_atexit</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;{</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(cli_asterisk, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(cli_asterisk));</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;}</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;</div><div class="line"><a name="l03492"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a0ddf1224851353fc92bfbff6f499fa97"> 3492</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;{</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;   <span class="keywordtype">int</span> isroot = 1, rundir_exists = 0;</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, runuser, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, rungroup, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, xarg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;   <span class="keyword">struct </span>rlimit l;</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *getopt_settings = <span class="stringliteral">&quot;BC:cde:FfG:ghIiL:M:mnpqRrs:TtU:VvWXx:&quot;</span>;</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;   <span class="comment">/* Remember original args for restart */</span></div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;   <span class="keywordflow">if</span> (argc &gt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#aac76ac35350d1efd9ddfe5b56739c649">_argv</a>) - 1) {</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;Truncating argument size to %d\n&quot;</span>, (<span class="keywordtype">int</span>)<a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#aac76ac35350d1efd9ddfe5b56739c649">_argv</a>) - 1);</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;      argc = <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#aac76ac35350d1efd9ddfe5b56739c649">_argv</a>) - 1;</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;   }</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; argc; x++)</div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#aac76ac35350d1efd9ddfe5b56739c649">_argv</a>[x] = argv[x];</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#aac76ac35350d1efd9ddfe5b56739c649">_argv</a>[x] = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;   <span class="keywordflow">if</span> (geteuid() != 0)</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;      isroot = 0;</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;   <span class="comment">/* if the progname is rasterisk consider it a remote console */</span></div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;   <span class="keywordflow">if</span> (argv[0] &amp;&amp; (strstr(argv[0], <span class="stringliteral">&quot;rasterisk&quot;</span>)) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a3ee00a27b39985b8f392ef8bc082173f">AST_OPT_FLAG_NO_FORK</a> | <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343afa8b350fb1896cad6eef4ef5a0a9d00d">AST_OPT_FLAG_REMOTE</a>);</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;   }</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#ae1517891417ae2f6e398e95ae79dadf1">ast_mainpid</a> = getpid();</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;   <span class="comment">/* Process command-line options that effect asterisk.conf load. */</span></div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;   <span class="keywordflow">while</span> ((c = getopt(argc, argv, getopt_settings)) != -1) {</div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;      <span class="keywordflow">switch</span> (c) {</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;X&#39;</span>:</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a1ec197321d89052601ec7e5482009807">AST_OPT_FLAG_EXEC_INCLUDES</a>);</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;C&#39;</span>:</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;         <a class="code" href="../../d4/d78/__private_8h.html#a4ff56cc7f06770e8aedd59a812cc1d65">set_asterisk_conf_path</a>(optarg);</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;         <a class="code" href="../../d6/dd6/group__main__options.html#ga40f8fb2e731031d99f732f515cec680f">option_debug</a>++;</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#ac4583a51482ac439c1aef7615f7379cd">show_cli_help</a>();</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;         exit(0);</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;R&#39;</span>:</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:</div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;         <span class="comment">/* ast_opt_remote is checked during config load.  This is only part of what</span></div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;<span class="comment">          * these options do, see the second loop for the rest of the actions. */</span></div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343afa8b350fb1896cad6eef4ef5a0a9d00d">AST_OPT_FLAG_REMOTE</a>);</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;V&#39;</span>:</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a2ea358bef646393c728f1c81bd649bae">show_version</a>();</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;         exit(0);</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;v&#39;</span>:</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;         <a class="code" href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a>++;</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>:</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;         exit(1);</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;      }</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;   }</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;   <span class="comment">/* Initialize env so it is available if #exec is used in asterisk.conf. */</span></div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#ac93a7a9b76beefd78e435cf9f9969bc8">env_init</a>();</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#a2d38ad7979582e6d1b6f015d3dc79e17">load_asterisk_conf</a>();</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;   <span class="comment">/* Update env to include any systemname that was set. */</span></div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#ac93a7a9b76beefd78e435cf9f9969bc8">env_init</a>();</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;<span class="comment">   /*! \brief Check for options</span></div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;<span class="comment">    * \todo Document these options</span></div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;   optind = 1;</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;   <span class="keywordflow">while</span> ((c = getopt(argc, argv, getopt_settings)) != -1) {<span class="comment"></span></div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;<span class="comment">      /*!\note Please keep the ordering here to alphabetical, capital letters</span></div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;<span class="comment">       * first.  This will make it easier in the future to select unused</span></div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;<span class="comment">       * option flags for new features. */</span></div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;      <span class="keywordflow">switch</span> (c) {</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;B&#39;</span>: <span class="comment">/* Force black background */</span></div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343af68369edcd9b93645cfca1be521276a5">AST_OPT_FLAG_FORCE_BLACK_BACKGROUND</a>);</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343af6be95474d0021d99a2402b2e6f1e23e">AST_OPT_FLAG_LIGHT_BACKGROUND</a>);</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;X&#39;</span>:</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;         <span class="comment">/* The command-line -X option enables #exec for asterisk.conf only. */</span></div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;C&#39;</span>:</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;         <span class="comment">/* already processed. */</span></div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a3ee00a27b39985b8f392ef8bc082173f">AST_OPT_FLAG_NO_FORK</a> | <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343aec2be2c2ea39268bc434b19a19fa5f49">AST_OPT_FLAG_CONSOLE</a>);</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;         <span class="comment">/* already processed. */</span></div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;<span class="preprocessor">#if defined(HAVE_SYSINFO)</span></div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>:</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;         <span class="keywordflow">if</span> ((sscanf(&amp;optarg[1], <span class="stringliteral">&quot;%30ld&quot;</span>, &amp;<a class="code" href="../../d6/dd6/group__main__options.html#gade53ca08a5e71308f410de870fa7338b">option_minmemfree</a>) != 1) || (<a class="code" href="../../d6/dd6/group__main__options.html#gade53ca08a5e71308f410de870fa7338b">option_minmemfree</a> &lt; 0)) {</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;            <a class="code" href="../../d6/dd6/group__main__options.html#gade53ca08a5e71308f410de870fa7338b">option_minmemfree</a> = 0;</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;         }</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;<span class="preprocessor">#if HAVE_WORKING_FORK</span></div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;F&#39;</span>:</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a4db94b06d1fd0cf7e3f15fa89337d27b">AST_OPT_FLAG_ALWAYS_FORK</a>);</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a3ee00a27b39985b8f392ef8bc082173f">AST_OPT_FLAG_NO_FORK</a>);</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;G&#39;</span>:</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;         rungroup = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(optarg);</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;g&#39;</span>:</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343afdbd86f6d03de205a8b2f7a8afc1d919">AST_OPT_FLAG_DUMP_CORE</a>);</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;         <span class="comment">/* already processed. */</span></div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;I&#39;</span>:</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;         fprintf(stderr,</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;            <span class="stringliteral">&quot;NOTICE: The -I option is no longer needed.\n&quot;</span></div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;            <span class="stringliteral">&quot;  It will always be enabled if you have a timing module loaded.\n&quot;</span>);</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>:</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343ae6e12c269763841877fc651c0cbc7c52">AST_OPT_FLAG_INIT_KEYS</a>);</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;L&#39;</span>:</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;         <span class="keywordflow">if</span> ((sscanf(optarg, <span class="stringliteral">&quot;%30lf&quot;</span>, &amp;<a class="code" href="../../d6/dd6/group__main__options.html#ga908239c63cc433cbefa4aa6f5efcb830">ast_option_maxload</a>) != 1) || (<a class="code" href="../../d6/dd6/group__main__options.html#ga908239c63cc433cbefa4aa6f5efcb830">ast_option_maxload</a> &lt; 0.0)) {</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;            <a class="code" href="../../d6/dd6/group__main__options.html#ga908239c63cc433cbefa4aa6f5efcb830">ast_option_maxload</a> = 0.0;</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;         }</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;M&#39;</span>:</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;         <span class="keywordflow">if</span> ((sscanf(optarg, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;<a class="code" href="../../d6/dd6/group__main__options.html#ga6d3ecf74255f4bfc355ebd1540c316c1">ast_option_maxcalls</a>) != 1) || (<a class="code" href="../../d6/dd6/group__main__options.html#ga6d3ecf74255f4bfc355ebd1540c316c1">ast_option_maxcalls</a> &lt; 0)) {</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;            <a class="code" href="../../d6/dd6/group__main__options.html#ga6d3ecf74255f4bfc355ebd1540c316c1">ast_option_maxcalls</a> = 0;</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;         }</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a8f7161d6a92865af737b7624eb226bf4">AST_OPT_FLAG_MUTE</a>);</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a303915e0a28761be8b90018495d0a9ec">AST_OPT_FLAG_NO_COLOR</a>);</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>:</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a120f92831d8bb5ab6c714cbb8074079b">AST_OPT_FLAG_HIGH_PRIORITY</a>);</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;q&#39;</span>:</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a5a972bf8c28c241823fbe62ff4b215bc">AST_OPT_FLAG_QUIET</a>);</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;R&#39;</span>:</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a3ee00a27b39985b8f392ef8bc082173f">AST_OPT_FLAG_NO_FORK</a> | <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343afa8b350fb1896cad6eef4ef5a0a9d00d">AST_OPT_FLAG_REMOTE</a> | <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343afe9b9459a58a5f1a6ae3537a002e00b1">AST_OPT_FLAG_RECONNECT</a>);</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a3ee00a27b39985b8f392ef8bc082173f">AST_OPT_FLAG_NO_FORK</a> | <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343afa8b350fb1896cad6eef4ef5a0a9d00d">AST_OPT_FLAG_REMOTE</a>);</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a17d4d9ef04ffa9034f6c6b6c1fd2bb0b">ast_opt_remote</a>) {</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;            <a class="code" href="../../d4/d78/__private_8h.html#ae755d7283c9b43697630424166007013">set_socket_path</a>(optarg);</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;         }</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;T&#39;</span>:</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343ab67222445fbb614adeaeec26811e289e">AST_OPT_FLAG_TIMESTAMP</a>);</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343ad5a13ab624cf8420f6aa5aaa74b5e097">AST_OPT_FLAG_CACHE_RECORD_FILES</a>);</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;U&#39;</span>:</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;         runuser = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(optarg);</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;V&#39;</span>:</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;v&#39;</span>:</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;         <span class="comment">/* already processed. */</span></div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;W&#39;</span>: <span class="comment">/* White background */</span></div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343af6be95474d0021d99a2402b2e6f1e23e">AST_OPT_FLAG_LIGHT_BACKGROUND</a>);</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343af68369edcd9b93645cfca1be521276a5">AST_OPT_FLAG_FORCE_BLACK_BACKGROUND</a>);</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;         <span class="comment">/* -r is implied by -x so set the flags -r sets as well. */</span></div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a3ee00a27b39985b8f392ef8bc082173f">AST_OPT_FLAG_NO_FORK</a> | <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343afa8b350fb1896cad6eef4ef5a0a9d00d">AST_OPT_FLAG_REMOTE</a>);</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343ad2e1d34d01ce072525be7fa9b72ca833">AST_OPT_FLAG_EXEC</a> | <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a303915e0a28761be8b90018495d0a9ec">AST_OPT_FLAG_NO_COLOR</a>);</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;         xarg = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(optarg);</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>:</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;         <span class="comment">/* already processed. */</span></div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;      }</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;   }</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;   <span class="comment">/* For remote connections, change the name of the remote connection.</span></div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;<span class="comment">    * We do this for the benefit of init scripts (which need to know if/when</span></div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;<span class="comment">    * the main asterisk process has died yet). */</span></div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a17d4d9ef04ffa9034f6c6b6c1fd2bb0b">ast_opt_remote</a>) {</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;      strcpy(argv[0], <span class="stringliteral">&quot;rasterisk&quot;</span>);</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;      <span class="keywordflow">for</span> (x = 1; x &lt; argc; x++) {</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;         argv[x] = argv[0] + 10;</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;      }</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;   }</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d5b/options_8h.html#a248e5c086666b04d29a9cd876ad370b3">ast_language_is_prefix</a> &amp;&amp; !<a class="code" href="../../d7/d5b/options_8h.html#a17d4d9ef04ffa9034f6c6b6c1fd2bb0b">ast_opt_remote</a>) {</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;The &#39;languageprefix&#39; option in asterisk.conf is deprecated; in a future release it will be removed, and your sound files will need to be organized in the &#39;new style&#39; language layout.\n&quot;</span>);</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;   }</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a8d91ba28757f5a3b942673cd8dda40ae">ast_opt_always_fork</a> &amp;&amp; (<a class="code" href="../../d7/d5b/options_8h.html#a17d4d9ef04ffa9034f6c6b6c1fd2bb0b">ast_opt_remote</a> || <a class="code" href="../../d7/d5b/options_8h.html#a4fe31af40146104d64d4a31535e44400">ast_opt_console</a>)) {</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;&#39;alwaysfork&#39; is not compatible with console or remote console mode; ignored\n&quot;</span>);</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a4db94b06d1fd0cf7e3f15fa89337d27b">AST_OPT_FLAG_ALWAYS_FORK</a>);</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;   }</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a0c0575cf738010e8da8b1db869542493">ast_opt_dump_core</a>) {</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;      memset(&amp;l, 0, <span class="keyword">sizeof</span>(l));</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;      l.rlim_cur = RLIM_INFINITY;</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;      l.rlim_max = RLIM_INFINITY;</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;      <span class="keywordflow">if</span> (setrlimit(RLIMIT_CORE, &amp;l)) {</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Unable to disable core size resource limit: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;      }</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;   }</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;   <span class="keywordflow">if</span> (getrlimit(RLIMIT_NOFILE, &amp;l)) {</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;Unable to check file descriptor limit: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;   }</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;<span class="preprocessor">#if !defined(CONFIGURE_RAN_AS_ROOT)</span></div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;   <span class="comment">/* Check if select(2) will run with more file descriptors */</span></div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;   <span class="keywordflow">do</span> {</div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, fd2;</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;      <a class="code" href="../../dc/d81/structast__fdset.html">ast_fdset</a> readers;</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;      <span class="keyword">struct </span>timeval tv = { 0, };</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;      <span class="keywordflow">if</span> (l.rlim_cur &lt;= FD_SETSIZE) {</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;         <span class="comment">/* The limit of select()able FDs is irrelevant, because we&#39;ll never</span></div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;<span class="comment">          * open one that high. */</span></div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;      }</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;      <span class="keywordflow">if</span> (!(fd = open(<span class="stringliteral">&quot;/dev/null&quot;</span>, O_RDONLY))) {</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Cannot open a file descriptor at boot? %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;         <span class="keywordflow">break</span>; <span class="comment">/* XXX Should we exit() here? XXX */</span></div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;      }</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;      fd2 = ((l.rlim_cur &gt; <span class="keyword">sizeof</span>(readers) * 8) ? <span class="keyword">sizeof</span>(readers) * 8 : l.rlim_cur) - 1;</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;      <span class="keywordflow">if</span> (dup2(fd, fd2) &lt; 0) {</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Cannot open maximum file descriptor %d at boot? %s\n&quot;</span>, fd2, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;         close(fd);</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;      }</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;      <a class="code" href="../../d9/dab/select_8h.html#afe1ef49596dc9d1dd0bc61f51f7105be">FD_ZERO</a>(&amp;readers);</div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;      <a class="code" href="../../d9/dab/select_8h.html#a1d55bd4411acb4331a0f32028fdf05f5">FD_SET</a>(fd2, &amp;readers);</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/dab/select_8h.html#adbb7ffa6b2e8582cfca25e68e2ecb300">ast_select</a>(fd2 + 1, &amp;readers, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;tv) &lt; 0) {</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Maximum select()able file descriptor is %d\n&quot;</span>, FD_SETSIZE);</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;      }</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;      <a class="code" href="../../d9/dab/select_8h.html#a88ef74635f81b6aca53097ed160b9e9e">ast_FD_SETSIZE</a> = l.rlim_cur &gt; <a class="code" href="../../d9/dab/select_8h.html#a88420d5b33420466f294c981a0a48cc3">ast_FDMAX</a> ? <a class="code" href="../../d9/dab/select_8h.html#a88420d5b33420466f294c981a0a48cc3">ast_FDMAX</a> : l.rlim_cur;</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;      close(fd);</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;      close(fd2);</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;   } <span class="keywordflow">while</span> (0);</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;<span class="preprocessor">#elif defined(HAVE_VARIABLE_FDSET)</span></div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;   <a class="code" href="../../d9/dab/select_8h.html#a88ef74635f81b6aca53097ed160b9e9e">ast_FD_SETSIZE</a> = l.rlim_cur &gt; <a class="code" href="../../d9/dab/select_8h.html#a88420d5b33420466f294c981a0a48cc3">ast_FDMAX</a> ? <a class="code" href="../../d9/dab/select_8h.html#a88420d5b33420466f294c981a0a48cc3">ast_FDMAX</a> : l.rlim_cur;</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !defined(CONFIGURE_RAN_AS_ROOT) */</span><span class="preprocessor"></span></div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;   <span class="keywordflow">if</span> ((!rungroup) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../dd/df2/paths_8h.html#a2434757afbc16110ff1c7483f3d7ba51">ast_config_AST_RUN_GROUP</a>))</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;      rungroup = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../dd/df2/paths_8h.html#a2434757afbc16110ff1c7483f3d7ba51">ast_config_AST_RUN_GROUP</a>);</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;   <span class="keywordflow">if</span> ((!runuser) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../dd/df2/paths_8h.html#a37ae09a4cc0e3b46e7b2a2052bde4965">ast_config_AST_RUN_USER</a>))</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;      runuser = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../dd/df2/paths_8h.html#a37ae09a4cc0e3b46e7b2a2052bde4965">ast_config_AST_RUN_USER</a>);</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;   <span class="comment">/* Must install this signal handler up here to ensure that if the canary</span></div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;<span class="comment">    * fails to execute that it doesn&#39;t kill the Asterisk process.</span></div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;   sigaction(SIGCHLD, &amp;child_handler, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;   <span class="comment">/* It&#39;s common on some platforms to clear /var/run at boot.  Create the</span></div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;<span class="comment">    * socket file directory before we drop privileges. */</span></div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;   <span class="keywordflow">if</span> (mkdir(<a class="code" href="../../dd/df2/paths_8h.html#a6014e29009d7db30e546a244c2cc95b6">ast_config_AST_RUN_DIR</a>, 0755)) {</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EEXIST) {</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;         rundir_exists = 1;</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Unable to create socket file directory.  Remote consoles will not be able to connect! (%s)\n&quot;</span>, strerror(x));</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;      }</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;   }</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;<span class="preprocessor">#ifndef __CYGWIN__</span></div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;   <span class="keywordflow">if</span> (isroot) {</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a4c46b35c4f4320b2f841520a849eee91">ast_set_priority</a>(<a class="code" href="../../d7/d5b/options_8h.html#a8445b47cb18dde73b1b233358a25ed68">ast_opt_high_priority</a>);</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;   }</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;   <span class="keywordflow">if</span> (isroot &amp;&amp; rungroup) {</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d3/d08/structgroup.html">group</a> *gr;</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;      gr = getgrnam(rungroup);</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;      <span class="keywordflow">if</span> (!gr) {</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;No such group &#39;%s&#39;!\n&quot;</span>, rungroup);</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;         exit(1);</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;      }</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;      <span class="keywordflow">if</span> (!rundir_exists &amp;&amp; chown(<a class="code" href="../../dd/df2/paths_8h.html#a6014e29009d7db30e546a244c2cc95b6">ast_config_AST_RUN_DIR</a>, -1, gr-&gt;gr_gid)) {</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Unable to chgrp run directory to %d (%s)\n&quot;</span>, (<span class="keywordtype">int</span>) gr-&gt;gr_gid, rungroup);</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;      }</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;      <span class="keywordflow">if</span> (setgid(gr-&gt;gr_gid)) {</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Unable to setgid to %d (%s)\n&quot;</span>, (<span class="keywordtype">int</span>)gr-&gt;gr_gid, rungroup);</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;         exit(1);</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;      }</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;      <span class="keywordflow">if</span> (setgroups(0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Unable to drop unneeded groups\n&quot;</span>);</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;         exit(1);</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;      }</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;   }</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;   <span class="keywordflow">if</span> (runuser &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343afa8b350fb1896cad6eef4ef5a0a9d00d">AST_OPT_FLAG_REMOTE</a>)) {</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;<span class="preprocessor">#ifdef HAVE_CAP</span></div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;      <span class="keywordtype">int</span> has_cap = 1;</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* HAVE_CAP */</span><span class="preprocessor"></span></div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;      <span class="keyword">struct </span>passwd *pw;</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;      pw = getpwnam(runuser);</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;      <span class="keywordflow">if</span> (!pw) {</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;No such user &#39;%s&#39;!\n&quot;</span>, runuser);</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;         exit(1);</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;      }</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;      <span class="keywordflow">if</span> (chown(<a class="code" href="../../dd/df2/paths_8h.html#a6014e29009d7db30e546a244c2cc95b6">ast_config_AST_RUN_DIR</a>, pw-&gt;pw_uid, -1)) {</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Unable to chown run directory to %d (%s)\n&quot;</span>, (<span class="keywordtype">int</span>) pw-&gt;pw_uid, runuser);</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;      }</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;<span class="preprocessor">#ifdef HAVE_CAP</span></div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;      <span class="keywordflow">if</span> (prctl(PR_SET_KEEPCAPS, 1, 0, 0, 0)) {</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to keep capabilities.\n&quot;</span>);</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;         has_cap = 0;</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;      }</div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* HAVE_CAP */</span><span class="preprocessor"></span></div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;      <span class="keywordflow">if</span> (!isroot &amp;&amp; pw-&gt;pw_uid != geteuid()) {</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Asterisk started as nonroot, but runuser &#39;%s&#39; requested.\n&quot;</span>, runuser);</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;         exit(1);</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;      }</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;      <span class="keywordflow">if</span> (!rungroup) {</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;         <span class="keywordflow">if</span> (setgid(pw-&gt;pw_gid)) {</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;Unable to setgid to %d!\n&quot;</span>, (<span class="keywordtype">int</span>)pw-&gt;pw_gid);</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;            exit(1);</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;         }</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;         <span class="keywordflow">if</span> (isroot &amp;&amp; initgroups(pw-&gt;pw_name, pw-&gt;pw_gid)) {</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;Unable to init groups for &#39;%s&#39;\n&quot;</span>, runuser);</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;            exit(1);</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;         }</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;      }</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;      <span class="keywordflow">if</span> (setuid(pw-&gt;pw_uid)) {</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Unable to setuid to %d (%s)\n&quot;</span>, (<span class="keywordtype">int</span>)pw-&gt;pw_uid, runuser);</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;         exit(1);</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;      }</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;<span class="preprocessor">#ifdef HAVE_CAP</span></div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;      <span class="keywordflow">if</span> (has_cap) {</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;         cap_t cap;</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;         cap = cap_from_text(<span class="stringliteral">&quot;cap_net_admin=eip&quot;</span>);</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;         <span class="keywordflow">if</span> (cap_set_proc(cap)) {</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;Unable to install capabilities.\n&quot;</span>);</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;         }</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;         <span class="keywordflow">if</span> (cap_free(cap)) {</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;Unable to drop capabilities.\n&quot;</span>);</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;         }</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;      }</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* HAVE_CAP */</span><span class="preprocessor"></span></div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;   }</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __CYGWIN__ */</span><span class="preprocessor"></span></div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;<span class="preprocessor">#ifdef linux</span></div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;   <span class="keywordflow">if</span> (geteuid() &amp;&amp; <a class="code" href="../../d7/d5b/options_8h.html#a0c0575cf738010e8da8b1db869542493">ast_opt_dump_core</a>) {</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;      <span class="keywordflow">if</span> (prctl(PR_SET_DUMPABLE, 1, 0, 0, 0) &lt; 0) {</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Unable to set the process for core dumps after changing to a non-root user. %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;      }</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;   }</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;   {</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;<span class="preprocessor">#if defined(HAVE_EACCESS) || defined(HAVE_EUIDACCESS)</span></div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;<span class="preprocessor">#if defined(HAVE_EUIDACCESS) &amp;&amp; !defined(HAVE_EACCESS)</span></div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;<span class="preprocessor">#define eaccess euidaccess</span></div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;      <span class="keywordtype">char</span> dir[<a class="code" href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;      <span class="keywordflow">if</span> (!getcwd(dir, <span class="keyword">sizeof</span>(dir)) || eaccess(dir, R_OK | X_OK | F_OK)) {</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Unable to access the running directory (%s).  Changing to &#39;/&#39; for compatibility.\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;         <span class="comment">/* If we cannot access the CWD, then we couldn&#39;t dump core anyway,</span></div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;<span class="comment">          * so chdir(&quot;/&quot;) won&#39;t break anything. */</span></div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;         <span class="keywordflow">if</span> (chdir(<span class="stringliteral">&quot;/&quot;</span>)) {</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;            <span class="comment">/* chdir(/) should never fail, so this ends up being a no-op */</span></div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;chdir(\&quot;/\&quot;) failed?!! %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;         }</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* defined(HAVE_EACCESS) || defined(HAVE_EUIDACCESS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d5b/options_8h.html#a93b280adefdad68d13fb557f495d2ead">ast_opt_no_fork</a> &amp;&amp; !<a class="code" href="../../d7/d5b/options_8h.html#a0c0575cf738010e8da8b1db869542493">ast_opt_dump_core</a>) {</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;         <span class="comment">/* Backgrounding, but no cores, so chdir won&#39;t break anything. */</span></div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;         <span class="keywordflow">if</span> (chdir(<span class="stringliteral">&quot;/&quot;</span>)) {</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;Unable to chdir(\&quot;/\&quot;) ?!! %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;         }</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;      }</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;   }</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;   <span class="comment">/* Initial value of the maximum active system verbosity level. */</span></div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;   <a class="code" href="../../d6/dd6/group__main__options.html#ga683995800c0376125c2c8261eda2e6e0">ast_verb_sys_level</a> = <a class="code" href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">option_verbose</a>;</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/dac/io_8h.html#acdeb34f795e42860ee8ea37a277c16d5">ast_sd_get_fd_un</a>(SOCK_STREAM, <a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>) &gt; 0) {</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a0de92246f6a87060b319bf4a27c2737d">ast_socket_is_sd</a> = 1;</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;   }</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;   <span class="comment">/* DO NOT perform check for existing daemon if systemd has CLI socket activation */</span></div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d03/asterisk_8c.html#a0de92246f6a87060b319bf4a27c2737d">ast_socket_is_sd</a> &amp;&amp; <a class="code" href="../../d5/d03/asterisk_8c.html#ab48b6f8cdddee48aed2f4fba4a6c18fe">ast_tryconnect</a>()) {</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;      <span class="comment">/* One is already running */</span></div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a17d4d9ef04ffa9034f6c6b6c1fd2bb0b">ast_opt_remote</a>) {</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#ae3d7cfbb91d822868f8ef6160fbcee52">multi_thread_safe</a> = 1;</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a301d032d1d86ba46348691f6d135e98a">ast_opt_exec</a>) {</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;            <a class="code" href="../../d5/d03/asterisk_8c.html#a8f0bd75717a5fd70f289769dd7698339">ast_remotecontrol</a>(xarg);</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;            <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(0, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a12d28a6e5875c59040c79f31255b3cbd">SHUTDOWN_FAST</a>, 0);</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;            exit(0);</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;         }</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;         <a class="code" href="../../d4/d78/__private_8h.html#a1997b4ca4fdf17e715fddf00f44c9651">ast_term_init</a>();</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;         printf(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a253f1aaaac4bf7e88ca402bddbe7fe6f">term_end</a>());</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;         fflush(stdout);</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#aec94f23bfed8fd1476e3c6f8b3dce3e0">print_intro_message</a>(runuser, rungroup);</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;         printf(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#af8c8e45db028216c47dd06bb2c64adec">term_quit</a>());</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a8f0bd75717a5fd70f289769dd7698339">ast_remotecontrol</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(0, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a12d28a6e5875c59040c79f31255b3cbd">SHUTDOWN_FAST</a>, 0);</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;         exit(0);</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Asterisk already running on %s.  Use &#39;asterisk -r&#39; to connect.\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>);</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;         printf(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#af8c8e45db028216c47dd06bb2c64adec">term_quit</a>());</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;         exit(1);</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;      }</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a17d4d9ef04ffa9034f6c6b6c1fd2bb0b">ast_opt_remote</a> || <a class="code" href="../../d7/d5b/options_8h.html#a301d032d1d86ba46348691f6d135e98a">ast_opt_exec</a>) {</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;Unable to connect to remote asterisk (does %s exist?)\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a>);</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;      printf(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#af8c8e45db028216c47dd06bb2c64adec">term_quit</a>());</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;      exit(1);</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;   }</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;<span class="preprocessor">#ifdef HAVE_CAP</span></div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a0e01e4a7836c72a22f08f824d366ffb0">child_cap</a> = cap_from_text(<span class="stringliteral">&quot;cap_net_admin-eip&quot;</span>);</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;   <span class="comment">/* Not a remote console? Start the daemon. */</span></div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a4cf123ec6105d24d21de01a951b46b17">asterisk_daemon</a>(isroot, runuser, rungroup);</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;<span class="preprocessor">#ifdef HAS_CAP</span></div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;   cap_free(<a class="code" href="../../d5/d03/asterisk_8c.html#a0e01e4a7836c72a22f08f824d366ffb0">child_cap</a>);</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;}</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;</div><div class="line"><a name="l03934"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696"> 3934</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<span class="keywordtype">int</span> init_result, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)</div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;{</div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;   <span class="keywordflow">if</span> (init_result) {</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/logger_8h.html#a50a2e3bde19d6688d7f5f47b294c1ade">ast_is_logger_initialized</a>()) {</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s initialization failed.  ASTERISK EXITING!\n%s&quot;</span>, name, <a class="code" href="../../db/d45/term_8h.html#af8c8e45db028216c47dd06bb2c64adec">term_quit</a>());</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;%s initialization failed.  ASTERISK EXITING!\n%s&quot;</span>, name, <a class="code" href="../../db/d45/term_8h.html#af8c8e45db028216c47dd06bb2c64adec">term_quit</a>());</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;      }</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a1e7c04328076f732cc303a2c853466be">ast_run_atexits</a>(0);</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;      exit(init_result == -2 ? 2 : 1);</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;   }</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;}</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;</div><div class="line"><a name="l03947"></a><span class="lineno"><a class="line" href="../../d5/d03/asterisk_8c.html#a4cf123ec6105d24d21de01a951b46b17"> 3947</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/asterisk_8c.html#a4cf123ec6105d24d21de01a951b46b17">asterisk_daemon</a>(<span class="keywordtype">int</span> isroot, <span class="keyword">const</span> <span class="keywordtype">char</span> *runuser, <span class="keyword">const</span> <span class="keywordtype">char</span> *rungroup)</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;{</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;   FILE *f;</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;   sigset_t sigs;</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;   <span class="keywordtype">int</span> num;</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;   <span class="keywordtype">char</span> pbx_uuid[<a class="code" href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a>];</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;   <span class="comment">/* Set time as soon as possible */</span></div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a7cdafc5a121e87659887ffc9abe36760">ast_lastreloadtime</a> = <a class="code" href="../../d5/d03/asterisk_8c.html#acd462f81fa607939af36a9fa33cdbf9d">ast_startuptime</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;   <span class="comment">/* This needs to remain as high up in the initial start up as possible.</span></div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;<span class="comment">    * daemon causes a fork to occur, which has all sorts of unintended</span></div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;<span class="comment">    * consequences for things that interact with threads.  This call *must*</span></div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;<span class="comment">    * occur before anything in Asterisk spawns or manipulates thread related</span></div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;<span class="comment">    * primitives. */</span></div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;<span class="preprocessor">#if HAVE_WORKING_FORK</span></div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a8d91ba28757f5a3b942673cd8dda40ae">ast_opt_always_fork</a> || !<a class="code" href="../../d7/d5b/options_8h.html#a93b280adefdad68d13fb557f495d2ead">ast_opt_no_fork</a>) {</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;<span class="preprocessor">#ifndef HAVE_SBIN_LAUNCHD</span></div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;      <span class="keywordflow">if</span> (daemon(1, 0) &lt; 0) {</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;daemon() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#ae1517891417ae2f6e398e95ae79dadf1">ast_mainpid</a> = getpid();</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;      }</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;Mac OS X detected.  Use &#39;launchctl load /Library/LaunchDaemon/org.asterisk.asterisk.plist&#39;.\n&quot;</span>);</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;   }</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;   <span class="comment">/* At this point everything has been forked successfully,</span></div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;<span class="comment">    * we have determined that we aren&#39;t attempting to connect to</span></div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;<span class="comment">    * an Asterisk instance, and that there isn&#39;t one already running. */</span></div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#ae3d7cfbb91d822868f8ef6160fbcee52">multi_thread_safe</a> = 1;</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#a9b953ab394a5817e89cb8f7b2b898cd6">load_astmm_phase_1</a>();</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;   <span class="comment">/* Check whether high prio was succesfully set by us or some</span></div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;<span class="comment">    * other incantation. */</span></div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a5140408e6e156df6199d396995663335">has_priority</a>()) {</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a120f92831d8bb5ab6c714cbb8074079b">AST_OPT_FLAG_HIGH_PRIORITY</a>);</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a120f92831d8bb5ab6c714cbb8074079b">AST_OPT_FLAG_HIGH_PRIORITY</a>);</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;   }</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;   <span class="comment">/* Spawning of astcanary must happen AFTER the call to daemon(3) */</span></div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a8445b47cb18dde73b1b233358a25ed68">ast_opt_high_priority</a>) {</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;      snprintf(<a class="code" href="../../d5/d03/asterisk_8c.html#a459b692028914da1bf3641b5de9ba6ea">canary_filename</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d5/d03/asterisk_8c.html#a459b692028914da1bf3641b5de9ba6ea">canary_filename</a>), <span class="stringliteral">&quot;%s/alt.asterisk.canary.tweet.tweet.tweet&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a6014e29009d7db30e546a244c2cc95b6">ast_config_AST_RUN_DIR</a>);</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;      <span class="comment">/* Don&#39;t let the canary child kill Asterisk, if it dies immediately */</span></div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;      sigaction(SIGPIPE, &amp;ignore_sig_handler, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#ab2acd3f561950f0ab6546314677ad57d">canary_pid</a> = fork();</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#ab2acd3f561950f0ab6546314677ad57d">canary_pid</a> == 0) {</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;         <span class="keywordtype">char</span> canary_binary[<a class="code" href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>], ppid[12];</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;         <span class="comment">/* Reset signal handler */</span></div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;         signal(SIGCHLD, SIG_DFL);</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;         signal(SIGPIPE, SIG_DFL);</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;         <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#afcbfdd6dfc8c5f0f549b0a5d7e263e97">ast_close_fds_above_n</a>(0);</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a4c46b35c4f4320b2f841520a849eee91">ast_set_priority</a>(0);</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;         snprintf(ppid, <span class="keyword">sizeof</span>(ppid), <span class="stringliteral">&quot;%d&quot;</span>, (<span class="keywordtype">int</span>) <a class="code" href="../../d5/d03/asterisk_8c.html#ae1517891417ae2f6e398e95ae79dadf1">ast_mainpid</a>);</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;         <span class="comment">/* Use the astcanary binary that we installed */</span></div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;         snprintf(canary_binary, <span class="keyword">sizeof</span>(canary_binary), <span class="stringliteral">&quot;%s/astcanary&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#abd1a940d0d1399a0bf6714fe156443ce">ast_config_AST_SBIN_DIR</a>);</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;         execl(canary_binary, <span class="stringliteral">&quot;astcanary&quot;</span>, <a class="code" href="../../d5/d03/asterisk_8c.html#a459b692028914da1bf3641b5de9ba6ea">canary_filename</a>, ppid, (<span class="keywordtype">char</span> *)<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;         <span class="comment">/* Should never happen */</span></div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;         _exit(1);</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#ab2acd3f561950f0ab6546314677ad57d">canary_pid</a> &gt; 0) {</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;         pthread_t dont_care;</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a>(&amp;dont_care, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d03/asterisk_8c.html#a1dab70ac26334f4acece46d997255563">canary_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;      }</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;      <span class="comment">/* Kill the canary when we exit */</span></div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a9b09e95876dfecb9a8573819da0b255e">ast_register_atexit</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a0fb077af6d08a4c0be395841196b12fd">canary_exit</a>);</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;   }</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;   <span class="comment">/* Blindly write the PID file. */</span></div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;   unlink(<a class="code" href="../../dd/df2/paths_8h.html#a59860442b922398568da0236c1576039">ast_config_AST_PID</a>);</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;   f = fopen(<a class="code" href="../../dd/df2/paths_8h.html#a59860442b922398568da0236c1576039">ast_config_AST_PID</a>, <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;   <span class="keywordflow">if</span> (f) {</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;      fprintf(f, <span class="stringliteral">&quot;%ld\n&quot;</span>, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d03/asterisk_8c.html#ae1517891417ae2f6e398e95ae79dadf1">ast_mainpid</a>);</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;      fclose(f);</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;Unable to open pid file &#39;%s&#39;: %s\n&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a59860442b922398568da0236c1576039">ast_config_AST_PID</a>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;   }</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;   <span class="comment">/* Initialize the terminal.  Since all processes have been forked,</span></div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;<span class="comment">    * we can now start using the standard log messages.</span></div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#a1997b4ca4fdf17e715fddf00f44c9651">ast_term_init</a>();</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;   printf(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a253f1aaaac4bf7e88ca402bddbe7fe6f">term_end</a>());</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;   fflush(stdout);</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#aec94f23bfed8fd1476e3c6f8b3dce3e0">print_intro_message</a>(runuser, rungroup);</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#afd849f1845a148b2ea62cbd92c0112db">register_config_cli</a>();</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#abe6bfa12a840493461afe4cb65c935da">astobj2_init</a>(), <span class="stringliteral">&quot;AO2&quot;</span>);</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a92c8db31a6e3c29eb304ee8fe82834f5">ast_named_locks_init</a>(), <span class="stringliteral">&quot;Named Locks&quot;</span>);</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a4fe31af40146104d64d4a31535e44400">ast_opt_console</a>) {</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || <a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;         <a class="code" href="../../d5/d03/asterisk_8c.html#a6314c179e2d65f03b48aab48fcfc430f">ast_el_initialize</a>();</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#ac718cef19833170af662c53525d9c8c9">ast_el_read_default_histfile</a>();</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;   }</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;<span class="preprocessor">#ifdef AST_XML_DOCS</span></div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;   <span class="comment">/* Load XML documentation. */</span></div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#a9069f9a0490be2b041ca552ef07757f0">ast_xmldoc_load_documentation</a>();</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a52d9808db8eba7a1ff32fc6686042f04">astdb_init</a>(), <span class="stringliteral">&quot;ASTdb&quot;</span>);</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;   <a class="code" href="../../dd/d1d/uuid_8h.html#a13dd9e77212ada3759ade078768e3b4e">ast_uuid_init</a>();</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a6d9b899df42ca9ba23260752dd136ac5">ast_pbx_uuid_get</a>(pbx_uuid, <span class="keyword">sizeof</span>(pbx_uuid))) {</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;      <a class="code" href="../../dd/d1d/uuid_8h.html#abe6d0b550cd9a54964e7891960d1e5bc">ast_uuid_generate_str</a>(pbx_uuid, <span class="keyword">sizeof</span>(pbx_uuid));</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;      <a class="code" href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a>(<span class="stringliteral">&quot;pbx&quot;</span>, <span class="stringliteral">&quot;UUID&quot;</span>, pbx_uuid);</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;   }</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(0, <span class="stringliteral">&quot;PBX UUID: %s\n&quot;</span>, pbx_uuid);</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d05/json_8h.html#ad0a0a0298b611bf140c18c8870c23893">ast_json_init</a>(), <span class="stringliteral">&quot;libjansson&quot;</span>);</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;   <a class="code" href="../../d4/dc2/ulaw_8h.html#aad7e1afe4212418e036f434c4cca05ae">ast_ulaw_init</a>();</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;   <a class="code" href="../../d6/db5/alaw_8h.html#ae34ffa042dcd0ba03e43a3bca292810f">ast_alaw_init</a>();</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;   <a class="code" href="../../db/d7c/utf8_8h.html#a1c625c836aa003e2c8160326007b8023">ast_utf8_init</a>();</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;   <a class="code" href="../../da/df6/tdd_8h.html#af7a3dc2c6c96a4ef80ba95d2dcaf31d4">tdd_init</a>();</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;   <a class="code" href="../../de/d47/callerid_8h.html#a9c1767ffd4ca30651bcc241c16d1f071">callerid_init</a>();</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#aa0cfcd5a898ed77170a7f2c09581d91a">ast_builtins_init</a>();</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d5/d60/utils_8h.html#a7f67fc7c9501569b338913c796d86c45">ast_utils_init</a>(), <span class="stringliteral">&quot;Utilities&quot;</span>);</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a58f95b0d90cc7fe0d44ec5aae481c819">ast_tps_init</a>(), <span class="stringliteral">&quot;Task Processor Core&quot;</span>);</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../db/db2/asterisk_8h.html#ade4aafcd250b794e0fba6250c8b26a0b">ast_fd_init</a>(), <span class="stringliteral">&quot;File Descriptor Debugging&quot;</span>);</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../db/db2/asterisk_8h.html#a95d266ee6654ef26496356a20006c75c">ast_pbx_init</a>(), <span class="stringliteral">&quot;ast_pbx_init&quot;</span>);</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a29ecae53406176fe9d041445eabb2dfb">aco_init</a>(), <span class="stringliteral">&quot;Configuration Option Framework&quot;</span>);</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../dd/d79/stasis_8h.html#a5e674e1a85d014776968a99025bf7bce">stasis_init</a>(), <span class="stringliteral">&quot;Stasis&quot;</span>);</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a3bd0fe9ea648be22210b10a982cc2da1">ast_test_init</a>(), <span class="stringliteral">&quot;Test Framework&quot;</span>);</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../db/d39/translate_8h.html#afec16338d64bcbd935b1faf7db038965">ast_translate_init</a>(), <span class="stringliteral">&quot;Translator Core&quot;</span>);</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;   <a class="code" href="../../d6/db3/aoc_8h.html#a0a668676dce2ce44d90f6f4cace31a9f">ast_aoc_cli_init</a>();</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d8/d25/sorcery_8h.html#af4f32cd7e26c6876aa46a44202b0baa9">ast_sorcery_init</a>(), <span class="stringliteral">&quot;Sorcery&quot;</span>);</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d1/d16/codec_8h.html#a4b26fb9e0f4495a772a510e3c66d42dd">ast_codec_init</a>(), <span class="stringliteral">&quot;Codecs&quot;</span>);</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d0/d0a/format_8h.html#af7d30072c610d48e52b20892633fb337">ast_format_init</a>(), <span class="stringliteral">&quot;Formats&quot;</span>);</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a6f84427191dd4aa54f7cb59778e125cf">ast_format_cache_init</a>(), <span class="stringliteral">&quot;Format Cache&quot;</span>);</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d1/d16/codec_8h.html#ad6a2710a4753ce55e73879db2904e52d">ast_codec_builtin_init</a>(), <span class="stringliteral">&quot;Built-in Codecs&quot;</span>);</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../dd/d94/bucket_8h.html#ae723d06b2ac225f6a2b514029c10f37c">ast_bucket_init</a>(), <span class="stringliteral">&quot;Bucket API&quot;</span>);</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d3/df0/stasis__system_8h.html#adeea7913c2ed0f5b91ab213e578db841">ast_stasis_system_init</a>(), <span class="stringliteral">&quot;Stasis system-level information&quot;</span>);</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d7/d44/stasis__endpoints_8h.html#af268491213e6415d1b7c6f2df4a272e1">ast_endpoint_stasis_init</a>(), <span class="stringliteral">&quot;Stasis Endpoint&quot;</span>);</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#ab08a4af1fa3e6efc9a1242ded75e0437">ast_makesocket</a>();</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;   <span class="comment">/* GCC 4.9 gives a bogus &quot;right-hand operand of comma expression has</span></div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;<span class="comment">    * no effect&quot; warning */</span></div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;   (void) sigemptyset(&amp;sigs);</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;   (void) sigaddset(&amp;sigs, SIGHUP);</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;   (void) sigaddset(&amp;sigs, SIGTERM);</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;   (void) sigaddset(&amp;sigs, SIGINT);</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;   (void) sigaddset(&amp;sigs, SIGPIPE);</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;   (void) sigaddset(&amp;sigs, SIGWINCH);</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;   pthread_sigmask(SIG_BLOCK, &amp;sigs, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;   sigaction(SIGURG, &amp;urg_handler, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;   signal(SIGINT, <a class="code" href="../../d5/d03/asterisk_8c.html#ae60d292daa4fe3a13b0a0d01c5beb305">__quit_handler</a>);</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;   signal(SIGTERM, <a class="code" href="../../d5/d03/asterisk_8c.html#ae60d292daa4fe3a13b0a0d01c5beb305">__quit_handler</a>);</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;   sigaction(SIGHUP, &amp;hup_handler, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;   sigaction(SIGPIPE, &amp;ignore_sig_handler, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;   <span class="comment">/* ensure that the random number generators are seeded with a different value every time</span></div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;<span class="comment">      Asterisk is started</span></div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;   srand((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) getpid() + (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;   initstate((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) getpid() * 65536 + (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>), <a class="code" href="../../d5/d03/asterisk_8c.html#a3a662046fe963f773c09fc3b998d3a44">randompool</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d5/d03/asterisk_8c.html#a3a662046fe963f773c09fc3b998d3a44">randompool</a>));</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#a06393c3702f8ab3864a2fdd7857daa90">threadstorage_init</a>();</div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#aaa750bd60d48780b89622bb62520dff0">init_logger</a>(), <span class="stringliteral">&quot;Logger&quot;</span>);</div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a882bf438d813b4a9d27d8effcd4ad174">ast_rtp_engine_init</a>(), <span class="stringliteral">&quot;RTP Engine&quot;</span>);</div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;</div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#aa3322128c2188bf3d8405d7373c5c483">ast_autoservice_init</a>();</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a14d1423f33a1d054171143c28490368f">ast_timing_init</a>(), <span class="stringliteral">&quot;Timing&quot;</span>);</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#adb76df37ea8ca7aae2791a447db82430">ast_ssl_init</a>(), <span class="stringliteral">&quot;SSL&quot;</span>);</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#ad25ecaec9013588c4f6f8537912a8137">read_pjproject_startup_options</a>();</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a52ff446e28f2c955830ecb4f3c66eb06">ast_pj_init</a>(), <span class="stringliteral">&quot;Embedded PJProject&quot;</span>);</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a2e2efabbeb1c8c68790bb90ce01c4578">app_init</a>(), <span class="stringliteral">&quot;App Core&quot;</span>);</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga60caa723cc6cdb79618bc030ecfeba70">mwi_init</a>(), <span class="stringliteral">&quot;MWI Core&quot;</span>);</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../da/da2/devicestate_8h.html#aa45f4804461e848d1d2acdba9bfba9d2">devstate_init</a>(), <span class="stringliteral">&quot;Device State Core&quot;</span>);</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a698f7bb2f1591726001330e95cc8950f">ast_msg_init</a>(), <span class="stringliteral">&quot;Messaging API&quot;</span>);</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a9b09f889da3c4aa25ce350e3239e29d2">ast_channels_init</a>(), <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#ab556739547c23ff1cfb95818c2c1fd40">ast_endpoint_init</a>(), <span class="stringliteral">&quot;Endpoints&quot;</span>);</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../dd/dbc/pickup_8h.html#a9910076549cb71ff910510eb9e6d5f87">ast_pickup_init</a>(), <span class="stringliteral">&quot;Call Pickup&quot;</span>);</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a0ba7af47c666f5190ba798f4045bf041">ast_bridging_init</a>(), <span class="stringliteral">&quot;Bridging&quot;</span>);</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#af14c66aa8339e86774116fdf8c0c904d">ast_parking_stasis_init</a>(), <span class="stringliteral">&quot;Parking Core&quot;</span>);</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a1613dc2954f81c1131ad5acd24c1e574">ast_device_state_engine_init</a>(), <span class="stringliteral">&quot;Device State Engine&quot;</span>);</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d6/dd7/presencestate_8h.html#a9d4e693b57d9b19c51f277f2f1e1903a">ast_presence_state_engine_init</a>(), <span class="stringliteral">&quot;Presence State Engine&quot;</span>);</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#ab8031dfd325120267b9af244605e662a">dns_core_init</a>(), <span class="stringliteral">&quot;DNS Resolver Core&quot;</span>);</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#ac9d4a9fe0e63482e1eec386dfdeae359">ast_dns_system_resolver_init</a>(), <span class="stringliteral">&quot;Default DNS resolver&quot;</span>);</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d0/d29/include_2asterisk_2security__events_8h.html#a2bfccbad0896b673d8eb936aa3c2caeb">ast_security_stasis_init</a>(), <span class="stringliteral">&quot;Security Stasis Topic and Events&quot;</span>);</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d5/db2/image_8h.html#a370019746b1a87e8ad1a433af897ea9e">ast_image_init</a>(), <span class="stringliteral">&quot;Image&quot;</span>);</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#aeac4fbc3c21ddf2548bc7ae7fab717f3">ast_file_init</a>(), <span class="stringliteral">&quot;Generic File Format Support&quot;</span>);</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#ab9a2fcd7b22827d129fc37fc2777c6f4">load_pbx</a>(), <span class="stringliteral">&quot;load_pbx&quot;</span>);</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a7fa135bda8065ed90a142e5b5a49d013">load_pbx_builtins</a>(), <span class="stringliteral">&quot;Builtin PBX Applications&quot;</span>);</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a581d248a533ff2761c1e820697ad3161">load_pbx_functions_cli</a>(), <span class="stringliteral">&quot;PBX Functions Support&quot;</span>);</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a003fc21836881fda51f4fd83542ba4e2">load_pbx_variables</a>(), <span class="stringliteral">&quot;PBX Variables Support&quot;</span>);</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a845c1b098856e8fb31e9d5a401aa0239">load_pbx_switch</a>(), <span class="stringliteral">&quot;PBX Switch Support&quot;</span>);</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#ac1255fc570025089e11a688a2e38a7ff">load_pbx_app</a>(), <span class="stringliteral">&quot;PBX Application Support&quot;</span>);</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a70c2a89af6cfcf3c1eba77049efd5875">load_pbx_hangup_handler</a>(), <span class="stringliteral">&quot;PBX Hangup Handler Support&quot;</span>);</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a793027a091729ed260ef271e15557a60">ast_local_init</a>(), <span class="stringliteral">&quot;Local Proxy Channel Driver&quot;</span>);</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;   <span class="comment">/* We should avoid most config loads before this point as they can&#39;t use realtime. */</span></div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d4/d78/__private_8h.html#a19ce35b5edad956ec349975bdefb4d76">load_modules</a>(), <span class="stringliteral">&quot;Module&quot;</span>);</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;<span class="comment">    * This has to load after the dynamic modules load, as items in the media</span></div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;<span class="comment">    * cache can&#39;t be constructed from items in the AstDB without their</span></div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;<span class="comment">    * bucket backends.</span></div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a>(<a class="code" href="../../d3/d16/media__cache_8h.html#a4a33b1390953e6701ee3f8956b770d16">ast_media_cache_init</a>(), <span class="stringliteral">&quot;Media Cache&quot;</span>);</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;   <span class="comment">/* loads the cli_permissoins.conf file needed to implement cli restrictions. */</span></div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#ade6dbc4196f2fc99250aaafededfb41b">ast_cli_perms_init</a>(0);</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#a4a8773c9746e94aef4540938ab095a50">ast_stun_init</a>();</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;</div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#a0ede7ff922fb2764dfd455e49dc59bc8">dnsmgr_start_refresh</a>();</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a93b280adefdad68d13fb557f495d2ead">ast_opt_no_fork</a>) {</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a> = pthread_self();</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;   }</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;   <a class="code" href="../../dc/d4d/alertpipe_8h.html#a89830ce69038617b318b8e0c74def229">ast_alertpipe_init</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a7bb419fdb0040da24ecbb651b12395fc">sig_alert_pipe</a>);</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#a07bf5448c6189024cbc925a3e8ecb5e0">ast_process_pending_reloads</a>();</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;<a class="code" href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343ade4cf3231c69af57ad0527bd46244680">AST_OPT_FLAG_FULLY_BOOTED</a>);</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a2dfc2ba9fce08ba9b43f067fd888a9de">publish_fully_booted</a>();</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;   pthread_sigmask(SIG_UNBLOCK, &amp;sigs, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#a5bc910b5a37558aab197861a6820b8b8">load_astmm_phase_2</a>();</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(cli_asterisk_shutdown, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(cli_asterisk_shutdown));</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(cli_asterisk, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(cli_asterisk));</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a302c7c993903d5596dcada4e41db65f4">main_atexit</a>);</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#ac3e31dd03ea540885ef4359f5f4443a9">run_startup_commands</a>();</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;   <a class="code" href="../../dc/dac/io_8h.html#ac0cde8a3fde83180d994ad3c95f8bf49">ast_sd_notify</a>(<span class="stringliteral">&quot;READY=1&quot;</span>);</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(0, <a class="code" href="../../db/d45/term_8h.html#ae640996bf494da50000e83e165c5453e">COLORIZE_FMT</a> <span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#ae443185677b2d0586ded82d4fcde6992">COLORIZE</a>(<a class="code" href="../../db/d45/term_8h.html#a0149574f00c0892ce71ca7964e69672b">COLOR_BRGREEN</a>, 0, <span class="stringliteral">&quot;Asterisk Ready.&quot;</span>));</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;   <a class="code" href="../../d4/d78/__private_8h.html#a29011844a44a126bacfb81e3bddabaad">logger_queue_start</a>();</div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a4fe31af40146104d64d4a31535e44400">ast_opt_console</a>) {</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;      <span class="comment">/* Console stuff now... */</span></div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;      <span class="comment">/* Register our quit function */</span></div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;      <span class="keywordtype">char</span> title[256];</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a1b83df0dadc999c990245143b83292a0">hostname</a>[<a class="code" href="../../d9/d94/network_8h.html#afd80ecbe3170ca4fc85b65cda8659f82">MAXHOSTNAMELEN</a>] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;      <span class="keywordflow">if</span> (gethostname(hostname, <span class="keyword">sizeof</span>(hostname) - 1)) {</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(hostname, <span class="stringliteral">&quot;&lt;Unknown&gt;&quot;</span>, <span class="keyword">sizeof</span>(hostname));</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;      }</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a>(&amp;<a class="code" href="../../d5/d03/asterisk_8c.html#a5e99a7d549dd33ed14b3bb1a673f1f47">mon_sig_flags</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d03/asterisk_8c.html#a643319c1ef479a7d90ed02ec9c8b1a68">monitor_sig_flags</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#aebef75d1917768a6921d6157becf0780">set_icon</a>(<span class="stringliteral">&quot;Asterisk&quot;</span>);</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;      snprintf(title, <span class="keyword">sizeof</span>(title), <span class="stringliteral">&quot;Asterisk Console on &#39;%s&#39; (pid %ld)&quot;</span>, hostname, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d03/asterisk_8c.html#ae1517891417ae2f6e398e95ae79dadf1">ast_mainpid</a>);</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#aabb54677daf95f5c6f575645b1ccf46d">set_title</a>(title);</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;      el_set(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, EL_GETCFN, <a class="code" href="../../d5/d03/asterisk_8c.html#a43af335a570187abea70ea3ebde8aa23">ast_el_read_char</a>);</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;      <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_el_end) {</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;            el_end(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>);</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;         }</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit || <a class="code" href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a>.need_quit_handler) {</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;            <a class="code" href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a>(0, <a class="code" href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a12d28a6e5875c59040c79f31255b3cbd">SHUTDOWN_FAST</a>, 0);</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;         }</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;         buf = (<span class="keywordtype">char</span> *) el_gets(<a class="code" href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a>, &amp;num);</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;</div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;         <span class="keywordflow">if</span> (!buf &amp;&amp; write(1, <span class="stringliteral">&quot;&quot;</span>, 1) &lt; 0)</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;            <span class="keywordflow">return</span>; <span class="comment">/* quit */</span></div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;         <span class="keywordflow">if</span> (buf) {</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;            <span class="keywordflow">if</span> (buf[strlen(buf)-1] == <span class="charliteral">&#39;\n&#39;</span>)</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;               buf[strlen(buf)-1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;            <a class="code" href="../../d5/d03/asterisk_8c.html#a9a28eb590fad0670d6a05fb703f4f0cd">consolehandler</a>(buf);</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;         }</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;      }</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;   }</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;   <span class="comment">/* Stall until a quit signal is given */</span></div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;   <a class="code" href="../../d5/d03/asterisk_8c.html#a643319c1ef479a7d90ed02ec9c8b1a68">monitor_sig_flags</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;}</div><div class="ttc" id="__private_8h_html_a003fc21836881fda51f4fd83542ba4e2"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a003fc21836881fda51f4fd83542ba4e2">load_pbx_variables</a></div><div class="ttdeci">int load_pbx_variables(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01216">pbx_variables.c:1216</a></div></div>
<div class="ttc" id="term_8h_html_af8c8e45db028216c47dd06bb2c64adec"><div class="ttname"><a href="../../db/d45/term_8h.html#af8c8e45db028216c47dd06bb2c64adec">term_quit</a></div><div class="ttdeci">const char * term_quit(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de5/term_8c_source.html#l00361">term.c:361</a></div></div>
<div class="ttc" id="asterisk_8c_html_a070bedd0d8451003b874cf081c1fe837"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a070bedd0d8451003b874cf081c1fe837">__ast_unregister_atexit</a></div><div class="ttdeci">static void __ast_unregister_atexit(void(*func)(void))</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00979">asterisk.c:979</a></div></div>
<div class="ttc" id="asterisk_8c_html_a7bb419fdb0040da24ecbb651b12395fc"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a7bb419fdb0040da24ecbb651b12395fc">sig_alert_pipe</a></div><div class="ttdeci">static int sig_alert_pipe[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00396">asterisk.c:396</a></div></div>
<div class="ttc" id="buildinfo_8h_html"><div class="ttname"><a href="../../de/d35/buildinfo_8h.html">buildinfo.h</a></div></div>
<div class="ttc" id="asterisk_8c_html_ac8a53f8c12fe766728372e845a99c822"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ac8a53f8c12fe766728372e845a99c822">handle_restart_gracefully</a></div><div class="ttdeci">static char * handle_restart_gracefully(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02394">asterisk.c:2394</a></div></div>
<div class="ttc" id="alaw_8h_html"><div class="ttname"><a href="../../d6/db5/alaw_8h.html">alaw.h</a></div><div class="ttdoc">A-Law to Signed linear conversion. </div></div>
<div class="ttc" id="asterisk_8c_html_a2da6d477c1f0b2dd06e8010645b495da"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a2da6d477c1f0b2dd06e8010645b495da">handle_restart_now</a></div><div class="ttdeci">static char * handle_restart_now(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02373">asterisk.c:2373</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="paths_8h_html_a0334adace37c0e8de8ea89c8651336a2"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a0334adace37c0e8de8ea89c8651336a2">ast_config_AST_KEY_DIR</a></div><div class="ttdeci">const char * ast_config_AST_KEY_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00161">options.c:161</a></div></div>
<div class="ttc" id="utils_8h_html_a7f67fc7c9501569b338913c796d86c45"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7f67fc7c9501569b338913c796d86c45">ast_utils_init</a></div><div class="ttdeci">int ast_utils_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02369">main/utils.c:2369</a></div></div>
<div class="ttc" id="asterisk_8c_html_a2ea358bef646393c728f1c81bd649bae"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a2ea358bef646393c728f1c81bd649bae">show_version</a></div><div class="ttdeci">static int show_version(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03291">asterisk.c:3291</a></div></div>
<div class="ttc" id="asterisk_8c_html_a1dab70ac26334f4acece46d997255563"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a1dab70ac26334f4acece46d997255563">canary_thread</a></div><div class="ttdeci">static void * canary_thread(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03395">asterisk.c:3395</a></div></div>
<div class="ttc" id="codec_8h_html_ad6a2710a4753ce55e73879db2904e52d"><div class="ttname"><a href="../../d1/d16/codec_8h.html#ad6a2710a4753ce55e73879db2904e52d">ast_codec_builtin_init</a></div><div class="ttdeci">int ast_codec_builtin_init(void)</div><div class="ttdoc">Initialize built-in codecs within the core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d46/codec__builtin_8c_source.html#l00942">codec_builtin.c:942</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343a751f779a67786068c5a2fa43f9a5c16b"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a751f779a67786068c5a2fa43f9a5c16b">AST_OPT_FLAG_GENERIC_PLC_ON_EQUAL_CODECS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00100">options.h:100</a></div></div>
<div class="ttc" id="cli_8h_html_a5c4130cf8f1e93acfdd84416cebf1aef"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a></div><div class="ttdeci">#define AST_CLI_DEFINE(fn, txt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00197">cli.h:197</a></div></div>
<div class="ttc" id="__private_8h_html_aeac4fbc3c21ddf2548bc7ae7fab717f3"><div class="ttname"><a href="../../d4/d78/__private_8h.html#aeac4fbc3c21ddf2548bc7ae7fab717f3">ast_file_init</a></div><div class="ttdeci">int ast_file_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01983">file.c:1983</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="stasis_8h_html_a5e674e1a85d014776968a99025bf7bce"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5e674e1a85d014776968a99025bf7bce">stasis_init</a></div><div class="ttdeci">int stasis_init(void)</div><div class="ttdoc">Initialize the Stasis subsystem. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l03061">stasis.c:3061</a></div></div>
<div class="ttc" id="stasis__system_8h_html_adeea7913c2ed0f5b91ab213e578db841"><div class="ttname"><a href="../../d3/df0/stasis__system_8h.html#adeea7913c2ed0f5b91ab213e578db841">ast_stasis_system_init</a></div><div class="ttdeci">int ast_stasis_system_init(void)</div><div class="ttdoc">Initialize the stasis system topic and message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/da0/stasis__system_8c_source.html#l00373">stasis_system.c:373</a></div></div>
<div class="ttc" id="__private_8h_html_a52ff446e28f2c955830ecb4f3c66eb06"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a52ff446e28f2c955830ecb4f3c66eb06">ast_pj_init</a></div><div class="ttdeci">int ast_pj_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dd3/libasteriskpj_8c_source.html#l00045">libasteriskpj.c:45</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="group__main__options_html_ga3fe7b544e835ccfde10b88b76eb0e8ea"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#ga3fe7b544e835ccfde10b88b76eb0e8ea">ast_option_maxfiles</a></div><div class="ttdeci">int ast_option_maxfiles</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00081">options.c:81</a></div></div>
<div class="ttc" id="lock_8h_html"><div class="ttname"><a href="../../dd/d42/lock_8h.html">lock.h</a></div><div class="ttdoc">Asterisk locking-related definitions: </div></div>
<div class="ttc" id="asterisk_8h_html"><div class="ttname"><a href="../../db/db2/asterisk_8h.html">asterisk.h</a></div><div class="ttdoc">Asterisk main include file. File version handling, generic pbx functions. </div></div>
<div class="ttc" id="tdd_8h_html_af7a3dc2c6c96a4ef80ba95d2dcaf31d4"><div class="ttname"><a href="../../da/df6/tdd_8h.html#af7a3dc2c6c96a4ef80ba95d2dcaf31d4">tdd_init</a></div><div class="ttdeci">void tdd_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d68/tdd_8c_source.html#l00094">tdd.c:94</a></div></div>
<div class="ttc" id="asterisk_8c_html_a2eac41ec93c1f53371ed01a94b7640ac"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a2eac41ec93c1f53371ed01a94b7640ac">handle_bang</a></div><div class="ttdeci">static char * handle_bang(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02459">asterisk.c:2459</a></div></div>
<div class="ttc" id="__private_8h_html_a92c8db31a6e3c29eb304ee8fe82834f5"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a92c8db31a6e3c29eb304ee8fe82834f5">ast_named_locks_init</a></div><div class="ttdeci">int ast_named_locks_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db9/named__locks_8c_source.html#l00052">named_locks.c:52</a></div></div>
<div class="ttc" id="astmm_8h_html_aa6bcdb74dc1508c22986f0adf171a0f2"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a></div><div class="ttdeci">#define ast_realloc(p, len)</div><div class="ttdoc">A wrapper for realloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00228">astmm.h:228</a></div></div>
<div class="ttc" id="asterisk_8c_html_a0fb077af6d08a4c0be395841196b12fd"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a0fb077af6d08a4c0be395841196b12fd">canary_exit</a></div><div class="ttdeci">static void canary_exit(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03424">asterisk.c:3424</a></div></div>
<div class="ttc" id="buildinfo_8h_html_ac67b18fb7444d973a733a9757c1ff8f9"><div class="ttname"><a href="../../de/d35/buildinfo_8h.html#ac67b18fb7444d973a733a9757c1ff8f9">ast_build_user</a></div><div class="ttdeci">const char * ast_build_user</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d42/buildinfo_8c_source.html#l00034">buildinfo.c:34</a></div></div>
<div class="ttc" id="pickup_8h_html_a9910076549cb71ff910510eb9e6d5f87"><div class="ttname"><a href="../../dd/dbc/pickup_8h.html#a9910076549cb71ff910510eb9e6d5f87">ast_pickup_init</a></div><div class="ttdeci">int ast_pickup_init(void)</div><div class="ttdoc">Initialize pickup. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/pickup_8c_source.html#l00401">pickup.c:401</a></div></div>
<div class="ttc" id="structprofile__entry_html_afcd1706c9144e6d6eee6127661ae3be2"><div class="ttname"><a href="../../da/d4e/structprofile__entry.html#afcd1706c9144e6d6eee6127661ae3be2">profile_entry::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00741">asterisk.c:741</a></div></div>
<div class="ttc" id="asterisk_8c_html_a82f2111e80f216832412fd345d1020ac"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a82f2111e80f216832412fd345d1020ac">el_hist</a></div><div class="ttdeci">static History * el_hist</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00339">asterisk.c:339</a></div></div>
<div class="ttc" id="structthread__list__t_html"><div class="ttname"><a href="../../d3/dba/structthread__list__t.html">thread_list_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00405">asterisk.c:405</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="asterisk_8c_html_a60dd5f46a02b1199d4fdaf46b99125db"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a60dd5f46a02b1199d4fdaf46b99125db">ast_el_strtoarr</a></div><div class="ttdeci">static struct ast_vector_string * ast_el_strtoarr(char *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02853">asterisk.c:2853</a></div></div>
<div class="ttc" id="asterisk_8c_html_a6d5a16b321d54d9be2b0592881329fdf"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a6d5a16b321d54d9be2b0592881329fdf">AST_MAX_CONNECTS</a></div><div class="ttdeci">#define AST_MAX_CONNECTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00296">asterisk.c:296</a></div></div>
<div class="ttc" id="logger_8h_html_aad3298cde7f9cc6ea7f3f60b797cef11"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aad3298cde7f9cc6ea7f3f60b797cef11">VERBOSE_PREFIX_1</a></div><div class="ttdeci">#define VERBOSE_PREFIX_1</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00041">logger.h:41</a></div></div>
<div class="ttc" id="asterisk_8c_html_a3f98716c804b0bea3acc983956483ebd"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a3f98716c804b0bea3acc983956483ebd">handle_restart_when_convenient</a></div><div class="ttdeci">static char * handle_restart_when_convenient(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02415">asterisk.c:2415</a></div></div>
<div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="include_2asterisk_2security__events_8h_html"><div class="ttname"><a href="../../d0/d29/include_2asterisk_2security__events_8h.html">security_events.h</a></div><div class="ttdoc">Security Event Reporting API. </div></div>
<div class="ttc" id="cli_8h_html_a4970cad1f99a12bc6f6838d538496079"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a4970cad1f99a12bc6f6838d538496079">AST_CLI_COMPLETE_EOF</a></div><div class="ttdeci">#define AST_CLI_COMPLETE_EOF</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00052">cli.h:52</a></div></div>
<div class="ttc" id="__private_8h_html_aa3322128c2188bf3d8405d7373c5c483"><div class="ttname"><a href="../../d4/d78/__private_8h.html#aa3322128c2188bf3d8405d7373c5c483">ast_autoservice_init</a></div><div class="ttdeci">void ast_autoservice_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00380">autoservice.c:380</a></div></div>
<div class="ttc" id="asterisk_8c_html_ab08a4af1fa3e6efc9a1242ded75e0437"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ab08a4af1fa3e6efc9a1242ded75e0437">ast_makesocket</a></div><div class="ttdeci">static int ast_makesocket(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01556">asterisk.c:1556</a></div></div>
<div class="ttc" id="image_8h_html_a370019746b1a87e8ad1a433af897ea9e"><div class="ttname"><a href="../../d5/db2/image_8h.html#a370019746b1a87e8ad1a433af897ea9e">ast_image_init</a></div><div class="ttdeci">int ast_image_init(void)</div><div class="ttdoc">Initialize image stuff Initializes all the various image stuff. Basically just registers the cli stuf...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d10/image_8c_source.html#l00212">image.c:212</a></div></div>
<div class="ttc" id="asterisk_8c_html_af564c03a30a792b904af28762fdd5029"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#af564c03a30a792b904af28762fdd5029">ignore_sig_handler</a></div><div class="ttdeci">static struct sigaction ignore_sig_handler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01051">asterisk.c:1051</a></div></div>
<div class="ttc" id="asterisk_8c_html_ad715261b1b9cd2646cb66feac127aef0"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ad715261b1b9cd2646cb66feac127aef0">license_lines</a></div><div class="ttdeci">static const char license_lines[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02517">asterisk.c:2517</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a39918fd433ac42184b152c86016ef139"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a39918fd433ac42184b152c86016ef139">AST_RWLIST_HEAD_STATIC</a></div><div class="ttdeci">#define AST_RWLIST_HEAD_STATIC(name, type)</div><div class="ttdoc">Defines a structure to be used to hold a read/write list of specified type, statically initialized...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00332">linkedlists.h:332</a></div></div>
<div class="ttc" id="__private_8h_html_a29ecae53406176fe9d041445eabb2dfb"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a29ecae53406176fe9d041445eabb2dfb">aco_init</a></div><div class="ttdeci">int aco_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l01380">config_options.c:1380</a></div></div>
<div class="ttc" id="group__main__options_html_gac4f0ffd69871cc47ad3dc030127b8719"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a></div><div class="ttdeci">unsigned int option_dtmfminduration</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00083">options.c:83</a></div></div>
<div class="ttc" id="translate_8h_html_afec16338d64bcbd935b1faf7db038965"><div class="ttname"><a href="../../db/d39/translate_8h.html#afec16338d64bcbd935b1faf7db038965">ast_translate_init</a></div><div class="ttdeci">int ast_translate_init(void)</div><div class="ttdoc">Initialize the translation matrix and index to format conversion table. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l01630">translate.c:1630</a></div></div>
<div class="ttc" id="asterisk_8c_html_a10a88e77c386e16fbc483a1f80046696"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a10a88e77c386e16fbc483a1f80046696">check_init</a></div><div class="ttdeci">static void check_init(int init_result, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03934">asterisk.c:3934</a></div></div>
<div class="ttc" id="structconsole_html"><div class="ttname"><a href="../../df/d87/structconsole.html">console</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00316">asterisk.c:316</a></div></div>
<div class="ttc" id="__private_8h_html_aa0cfcd5a898ed77170a7f2c09581d91a"><div class="ttname"><a href="../../d4/d78/__private_8h.html#aa0cfcd5a898ed77170a7f2c09581d91a">ast_builtins_init</a></div><div class="ttdeci">void ast_builtins_init(void)</div><div class="ttdoc">initialize the _full_cmd string in * each of the builtins. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l02209">main/cli.c:2209</a></div></div>
<div class="ttc" id="structthread__list_html"><div class="ttname"><a href="../../d1/dc3/structthread__list.html">thread_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00412">asterisk.c:412</a></div></div>
<div class="ttc" id="term_8h_html_a3aaf3b0287d26dfb6ecb3b1c46e950c8"><div class="ttname"><a href="../../db/d45/term_8h.html#a3aaf3b0287d26dfb6ecb3b1c46e950c8">COLOR_GRAY</a></div><div class="ttdeci">#define COLOR_GRAY</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00048">term.h:48</a></div></div>
<div class="ttc" id="format_8h_html_af7d30072c610d48e52b20892633fb337"><div class="ttname"><a href="../../d0/d0a/format_8h.html#af7d30072c610d48e52b20892633fb337">ast_format_init</a></div><div class="ttdeci">int ast_format_init(void)</div><div class="ttdoc">Initialize media format support. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00077">format.c:77</a></div></div>
<div class="ttc" id="asterisk_8c_html_abb2456dfd78af8ed6d6876d214e7e064"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#abb2456dfd78af8ed6d6876d214e7e064">cli_asterisk</a></div><div class="ttdeci">static struct ast_cli_entry cli_asterisk[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02573">asterisk.c:2573</a></div></div>
<div class="ttc" id="asterisk_8c_html_ae70030dcf6d4e96327fcd5bc0285b9d7"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ae70030dcf6d4e96327fcd5bc0285b9d7">handle_stop_now</a></div><div class="ttdeci">static char * handle_stop_now(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02311">asterisk.c:2311</a></div></div>
<div class="ttc" id="uuid_8h_html_a127408e53d34dca0c589a099fabf1e13"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html#a127408e53d34dca0c589a099fabf1e13">AST_UUID_STR_LEN</a></div><div class="ttdeci">#define AST_UUID_STR_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1d/uuid_8h_source.html#l00027">uuid.h:27</a></div></div>
<div class="ttc" id="paths_8h_html_af89b8aa53d5b08a03b56f5163805bd97"><div class="ttname"><a href="../../dd/df2/paths_8h.html#af89b8aa53d5b08a03b56f5163805bd97">ast_config_AST_DB</a></div><div class="ttdeci">const char * ast_config_AST_DB</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00165">options.c:165</a></div></div>
<div class="ttc" id="callerid_8h_html"><div class="ttname"><a href="../../de/d47/callerid_8h.html">callerid.h</a></div><div class="ttdoc">CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr...</div></div>
<div class="ttc" id="paths_8h_html_abd1a940d0d1399a0bf6714fe156443ce"><div class="ttname"><a href="../../dd/df2/paths_8h.html#abd1a940d0d1399a0bf6714fe156443ce">ast_config_AST_SBIN_DIR</a></div><div class="ttdeci">const char * ast_config_AST_SBIN_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00163">options.c:163</a></div></div>
<div class="ttc" id="media__cache_8h_html_a4a33b1390953e6701ee3f8956b770d16"><div class="ttname"><a href="../../d3/d16/media__cache_8h.html#a4a33b1390953e6701ee3f8956b770d16">ast_media_cache_init</a></div><div class="ttdeci">int ast_media_cache_init(void)</div><div class="ttdoc">Initialize the media cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfb/media__cache_8c_source.html#l00688">media_cache.c:688</a></div></div>
<div class="ttc" id="utils_8h_html_a832647380b1f97e7ac1b4492f8816d46"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a></div><div class="ttdeci">#define ast_pthread_create_detached(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00563">utils.h:563</a></div></div>
<div class="ttc" id="asterisk_8c_html_afc5c3c753e2bc7d51948a7c70430253f"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#afc5c3c753e2bc7d51948a7c70430253f">urg_handler</a></div><div class="ttdeci">static struct sigaction urg_handler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01674">asterisk.c:1674</a></div></div>
<div class="ttc" id="ast__version_8h_html"><div class="ttname"><a href="../../d5/db9/ast__version_8h.html">ast_version.h</a></div><div class="ttdoc">Asterisk version information. </div></div>
<div class="ttc" id="__private_8h_html_ae755d7283c9b43697630424166007013"><div class="ttname"><a href="../../d4/d78/__private_8h.html#ae755d7283c9b43697630424166007013">set_socket_path</a></div><div class="ttdeci">void set_socket_path(const char *path)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00205">options.c:205</a></div></div>
<div class="ttc" id="asterisk_8c_html_a9c7c59d291f21aa5325e793a912d9c26"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9c7c59d291f21aa5325e793a912d9c26">safe_system_lock</a></div><div class="ttdeci">static ast_mutex_t safe_system_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01055">asterisk.c:1055</a></div></div>
<div class="ttc" id="structconsole_html_aa294d0efa6a89c1a3d162787cac4fff5"><div class="ttname"><a href="../../df/d87/structconsole.html#aa294d0efa6a89c1a3d162787cac4fff5">console::option_verbose</a></div><div class="ttdeci">int option_verbose</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00325">asterisk.c:325</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="asterisk_8c_html_ac4fd79d36385b27a0b8f995f53e47f23"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ac4fd79d36385b27a0b8f995f53e47f23">handle_abort_shutdown</a></div><div class="ttdeci">static char * handle_abort_shutdown(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02436">asterisk.c:2436</a></div></div>
<div class="ttc" id="io_8h_html_acdeb34f795e42860ee8ea37a277c16d5"><div class="ttname"><a href="../../dc/dac/io_8h.html#acdeb34f795e42860ee8ea37a277c16d5">ast_sd_get_fd_un</a></div><div class="ttdeci">int ast_sd_get_fd_un(int type, const char *path)</div><div class="ttdoc">Find a listening AF_LOCAL file descriptor provided by socket activation. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00454">io.c:454</a></div></div>
<div class="ttc" id="asterisk_8c_html_a6113c4ebbbc993cf7054a1af8e99da9a"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a6113c4ebbbc993cf7054a1af8e99da9a">show_warranty</a></div><div class="ttdeci">static char * show_warranty(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02499">asterisk.c:2499</a></div></div>
<div class="ttc" id="asterisk_8c_html_aa0fd8617e78d3b101aee3fe8d1c803f1"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#aa0fd8617e78d3b101aee3fe8d1c803f1">ast_all_zeros</a></div><div class="ttdeci">static int ast_all_zeros(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02233">asterisk.c:2233</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="group__main__options_html_ga40f8fb2e731031d99f732f515cec680f"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#ga40f8fb2e731031d99f732f515cec680f">option_debug</a></div><div class="ttdeci">int option_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00069">options.c:69</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aef636ed2f3d33f4c7a1ba67eb7c4d052"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a></div><div class="ttdeci">struct ast_variable * ast_variable_browse(const struct ast_config *config, const char *category_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01216">extconf.c:1216</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343a4db94b06d1fd0cf7e3f15fa89337d27b"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a4db94b06d1fd0cf7e3f15fa89337d27b">AST_OPT_FLAG_ALWAYS_FORK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00080">options.h:80</a></div></div>
<div class="ttc" id="devicestate_8h_html"><div class="ttname"><a href="../../da/da2/devicestate_8h.html">devicestate.h</a></div><div class="ttdoc">Device state management. </div></div>
<div class="ttc" id="translate_8h_html"><div class="ttname"><a href="../../db/d39/translate_8h.html">translate.h</a></div><div class="ttdoc">Support for translation of data formats. translate.c. </div></div>
<div class="ttc" id="group__Group__AMI_html_ga1a2e7df8657b820c5a6663b397f23bc9"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga1a2e7df8657b820c5a6663b397f23bc9">ast_manager_check_enabled</a></div><div class="ttdeci">int ast_manager_check_enabled(void)</div><div class="ttdoc">Check if AMI is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01949">manager.c:1949</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_afd849f1845a148b2ea62cbd92c0112db"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#afd849f1845a148b2ea62cbd92c0112db">register_config_cli</a></div><div class="ttdeci">int register_config_cli(void)</div><div class="ttdoc">Exposed initialization method for core process. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l04066">main/config.c:4066</a></div></div>
<div class="ttc" id="asterisk_8c_html_a7ae8b6656af65f29c76982647d743fcc"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a7ae8b6656af65f29c76982647d743fcc">handle_show_sysinfo</a></div><div class="ttdeci">static char * handle_show_sysinfo(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdoc">Give an overview of system statistics. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00631">asterisk.c:631</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="paths_8h_html_a5852d8e3bf5485c09b0f3d2c2375eec3"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a5852d8e3bf5485c09b0f3d2c2375eec3">ast_config_AST_MODULE_DIR</a></div><div class="ttdeci">const char * ast_config_AST_MODULE_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00153">options.c:153</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="ast__version_8h_html_a7765c608aea948584928643ab3963b2a"><div class="ttname"><a href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a></div><div class="ttdeci">const char * ast_get_version(void)</div><div class="ttdoc">Retrieve the Asterisk version string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0b/version_8c_source.html#l00016">version.c:16</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="logger_8h_html_a3d02ffd5809bdb049c815df859bbfcf4"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3d02ffd5809bdb049c815df859bbfcf4">NUMLOGLEVELS</a></div><div class="ttdeci">#define NUMLOGLEVELS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00314">logger.h:314</a></div></div>
<div class="ttc" id="asterisk_8c_html_a3d42dc32df764617e2201c3637f824cc"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a3d42dc32df764617e2201c3637f824cc">handle_show_threads</a></div><div class="ttdeci">static char * handle_show_threads(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00565">asterisk.c:565</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343af68369edcd9b93645cfca1be521276a5"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343af68369edcd9b93645cfca1be521276a5">AST_OPT_FLAG_FORCE_BLACK_BACKGROUND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00092">options.h:92</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343a8f7161d6a92865af737b7624eb226bf4"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a8f7161d6a92865af737b7624eb226bf4">AST_OPT_FLAG_MUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00082">options.h:82</a></div></div>
<div class="ttc" id="asterisk_8c_html_a2c0628cd8683a1fb31dd77db1c566d01"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a2c0628cd8683a1fb31dd77db1c566d01">need_reload</a></div><div class="ttdeci">unsigned int need_reload</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00398">asterisk.c:398</a></div></div>
<div class="ttc" id="asterisk_8c_html_a43af335a570187abea70ea3ebde8aa23"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a43af335a570187abea70ea3ebde8aa23">ast_el_read_char</a></div><div class="ttdeci">static int ast_el_read_char(EditLine *editline, CHAR_T_LIBEDIT *cp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02626">asterisk.c:2626</a></div></div>
<div class="ttc" id="asterisk_8c_html_aad6040e397b4ed391082631a4fcefdda"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#aad6040e397b4ed391082631a4fcefdda">wait_for_channels_to_die</a></div><div class="ttdeci">static int wait_for_channels_to_die(shutdown_nice_t niceness, int seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01891">asterisk.c:1891</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="options_8h_html_ad9cd3c90c415686a25a4eb51e558999e"><div class="ttname"><a href="../../d7/d5b/options_8h.html#ad9cd3c90c415686a25a4eb51e558999e">DEFAULT_PJ_LOG_MAX_LEVEL</a></div><div class="ttdeci">#define DEFAULT_PJ_LOG_MAX_LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00148">options.h:148</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="pickup_8h_html"><div class="ttname"><a href="../../dd/dbc/pickup_8h.html">pickup.h</a></div><div class="ttdoc">Call Pickup API. </div></div>
<div class="ttc" id="module_8h_html_af9e3b4ae730e43312e00fcbc1707588b"><div class="ttname"><a href="../../d5/d16/module_8h.html#af9e3b4ae730e43312e00fcbc1707588b">ast_module_reload</a></div><div class="ttdeci">enum ast_module_reload_result ast_module_reload(const char *name)</div><div class="ttdoc">Reload asterisk modules. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d96/loader_8c_source.html#l01562">loader.c:1562</a></div></div>
<div class="ttc" id="logger_8h_html_a24b0f46e22f4ea3226fa082e955dd4ef"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a24b0f46e22f4ea3226fa082e955dd4ef">VERBOSE_PREFIX_3</a></div><div class="ttdeci">#define VERBOSE_PREFIX_3</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00043">logger.h:43</a></div></div>
<div class="ttc" id="stasis_8h_html"><div class="ttname"><a href="../../dd/d79/stasis_8h.html">stasis.h</a></div><div class="ttdoc">Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. </div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga60caa723cc6cdb79618bc030ecfeba70"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga60caa723cc6cdb79618bc030ecfeba70">mwi_init</a></div><div class="ttdeci">int mwi_init(void)</div><div class="ttdoc">Initialize the mwi core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db4/mwi_8c_source.html#l00502">mwi.c:502</a></div></div>
<div class="ttc" id="structast__cli__entry_html"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a></div><div class="ttdoc">descriptor for a cli entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00171">cli.h:171</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="stasis__system_8h_html"><div class="ttname"><a href="../../d3/df0/stasis__system_8h.html">stasis_system.h</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="__private_8h_html_ab556739547c23ff1cfb95818c2c1fd40"><div class="ttname"><a href="../../d4/d78/__private_8h.html#ab556739547c23ff1cfb95818c2c1fd40">ast_endpoint_init</a></div><div class="ttdeci">int ast_endpoint_init(void)</div><div class="ttdoc">Endpoint support initialization. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00496">main/endpoints.c:496</a></div></div>
<div class="ttc" id="logger_8h_html_ae20a38a15eebc85a55879b97f02185de"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ae20a38a15eebc85a55879b97f02185de">ast_verb_console_get</a></div><div class="ttdeci">int ast_verb_console_get(void)</div><div class="ttdoc">Get this thread&amp;#39;s console verbosity level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l02323">logger.c:2323</a></div></div>
<div class="ttc" id="asterisk_8c_html_a7fc8eb444c6b6297888929ccb6828761"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a7fc8eb444c6b6297888929ccb6828761">console_print</a></div><div class="ttdeci">static int console_print(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02162">asterisk.c:2162</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="asterisk_8c_html_a31d30092ec56ba10a14cfdfcb613d1b2"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a31d30092ec56ba10a14cfdfcb613d1b2">cli_complete</a></div><div class="ttdeci">static char * cli_complete(EditLine *editline, int ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02914">asterisk.c:2914</a></div></div>
<div class="ttc" id="__private_8h_html_a9b953ab394a5817e89cb8f7b2b898cd6"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a9b953ab394a5817e89cb8f7b2b898cd6">load_astmm_phase_1</a></div><div class="ttdeci">void load_astmm_phase_1(void)</div><div class="ttdoc">Initialize malloc debug phase 1. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01557">astmm.c:1557</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="asterisk_8c_html_ae3d7cfbb91d822868f8ef6160fbcee52"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ae3d7cfbb91d822868f8ef6160fbcee52">multi_thread_safe</a></div><div class="ttdeci">static int multi_thread_safe</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00388">asterisk.c:388</a></div></div>
<div class="ttc" id="__private_8h_html_a845c1b098856e8fb31e9d5a401aa0239"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a845c1b098856e8fb31e9d5a401aa0239">load_pbx_switch</a></div><div class="ttdeci">int load_pbx_switch(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df2/pbx__switch_8c_source.html#l00125">pbx_switch.c:125</a></div></div>
<div class="ttc" id="__private_8h_html_a4ff56cc7f06770e8aedd59a812cc1d65"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a4ff56cc7f06770e8aedd59a812cc1d65">set_asterisk_conf_path</a></div><div class="ttdeci">void set_asterisk_conf_path(const char *path)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00200">options.c:200</a></div></div>
<div class="ttc" id="logger_8h_html_a742631da92caaaf27152c0397f53ae31"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a742631da92caaaf27152c0397f53ae31">ast_logger_get_dateformat</a></div><div class="ttdeci">const char * ast_logger_get_dateformat(void)</div><div class="ttdoc">Get the logger configured date format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l02577">logger.c:2577</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="asterisk_8c_html_a4102c912e07db36235dbf80dc4f9728a"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a4102c912e07db36235dbf80dc4f9728a">WELCOME_MESSAGE</a></div><div class="ttdeci">#define WELCOME_MESSAGE</div><div class="ttdoc">Welcome message when starting a CLI interface. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00303">asterisk.c:303</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="localtime_8h_html_ae9fbda728350a9a5b9c09b29214d718e"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a></div><div class="ttdeci">struct ast_tm * ast_localtime(const struct timeval *timep, struct ast_tm *p_tm, const char *zone)</div><div class="ttdoc">Timezone-independent version of localtime_r(3). </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01739">localtime.c:1739</a></div></div>
<div class="ttc" id="asterisk_8c_html_a128997a8231cdc87af7181da9ac78b7b"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a128997a8231cdc87af7181da9ac78b7b">__remote_quit_handler</a></div><div class="ttdeci">static void __remote_quit_handler(int num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02110">asterisk.c:2110</a></div></div>
<div class="ttc" id="buildinfo_8h_html_af1708cda257f6db95f77b34f112ef64b"><div class="ttname"><a href="../../de/d35/buildinfo_8h.html#af1708cda257f6db95f77b34f112ef64b">ast_build_date</a></div><div class="ttdeci">const char * ast_build_date</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d42/buildinfo_8c_source.html#l00033">buildinfo.c:33</a></div></div>
<div class="ttc" id="ast__version_8h_html_a8a80e93d07dd404319c28c0eaa216672"><div class="ttname"><a href="../../d5/db9/ast__version_8h.html#a8a80e93d07dd404319c28c0eaa216672">ast_get_build_opts</a></div><div class="ttdeci">const char * ast_get_build_opts(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0b/version_8c_source.html#l00026">version.c:26</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aab3eac8fa82a86a93c074deb7b77dbc9"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a></div><div class="ttdeci">struct ast_config * ast_config_load2(const char *filename, const char *who_asked, struct ast_flags flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03154">main/config.c:3154</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="select_8h_html_a88420d5b33420466f294c981a0a48cc3"><div class="ttname"><a href="../../d9/dab/select_8h.html#a88420d5b33420466f294c981a0a48cc3">ast_FDMAX</a></div><div class="ttdeci">#define ast_FDMAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/select_8h_source.html#l00041">select.h:41</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_afcbfdd6dfc8c5f0f549b0a5d7e263e97"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#afcbfdd6dfc8c5f0f549b0a5d7e263e97">ast_close_fds_above_n</a></div><div class="ttdeci">void ast_close_fds_above_n(int n)</div><div class="ttdoc">Common routine for child processes, to close all fds prior to exec(2) </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l03042">main/app.c:3042</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="asterisk_8c_html_a5ca7205e797dd971ff261830c15f8ea1"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a5ca7205e797dd971ff261830c15f8ea1">safe_system_prev_handler</a></div><div class="ttdeci">static struct sigaction safe_system_prev_handler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01060">asterisk.c:1060</a></div></div>
<div class="ttc" id="asterisk_8c_html_ac3c33bdbdf88cc876d630cd277242fbc"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ac3c33bdbdf88cc876d630cd277242fbc">ast_el_write_history</a></div><div class="ttdeci">static int ast_el_write_history(const char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03100">asterisk.c:3100</a></div></div>
<div class="ttc" id="presencestate_8h_html_a9d4e693b57d9b19c51f277f2f1e1903a"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#a9d4e693b57d9b19c51f277f2f1e1903a">ast_presence_state_engine_init</a></div><div class="ttdeci">int ast_presence_state_engine_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00495">presencestate.c:495</a></div></div>
<div class="ttc" id="uuid_8h_html"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html">uuid.h</a></div><div class="ttdoc">Universally unique identifier support. </div></div>
<div class="ttc" id="__private_8h_html_a58f95b0d90cc7fe0d44ec5aae481c819"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a58f95b0d90cc7fe0d44ec5aae481c819">ast_tps_init</a></div><div class="ttdeci">int ast_tps_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00301">taskprocessor.c:301</a></div></div>
<div class="ttc" id="buildinfo_8h_html_a00b5464ec2f306ae8f17f73a0a81f28d"><div class="ttname"><a href="../../de/d35/buildinfo_8h.html#a00b5464ec2f306ae8f17f73a0a81f28d">ast_build_os</a></div><div class="ttdeci">const char * ast_build_os</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d42/buildinfo_8c_source.html#l00032">buildinfo.c:32</a></div></div>
<div class="ttc" id="structconsole__state__data_html"><div class="ttname"><a href="../../d5/d4d/structconsole__state__data.html">console_state_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02149">asterisk.c:2149</a></div></div>
<div class="ttc" id="bucket_8h_html_ae723d06b2ac225f6a2b514029c10f37c"><div class="ttname"><a href="../../dd/d94/bucket_8h.html#ae723d06b2ac225f6a2b514029c10f37c">ast_bucket_init</a></div><div class="ttdeci">int ast_bucket_init(void)</div><div class="ttdoc">Initialize bucket support. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d43/bucket_8c_source.html#l00954">bucket.c:954</a></div></div>
<div class="ttc" id="term_8h_html_a5793417e507670e905f441b1d6e30f86"><div class="ttname"><a href="../../db/d45/term_8h.html#a5793417e507670e905f441b1d6e30f86">ast_term_color_code</a></div><div class="ttdeci">int ast_term_color_code(struct ast_str **str, int fgcolor, int bgcolor)</div><div class="ttdoc">Append a color sequence to an ast_str. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de5/term_8c_source.html#l00245">term.c:245</a></div></div>
<div class="ttc" id="__private_8h_html_a2d38ad7979582e6d1b6f015d3dc79e17"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a2d38ad7979582e6d1b6f015d3dc79e17">load_asterisk_conf</a></div><div class="ttdeci">void load_asterisk_conf(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00210">options.c:210</a></div></div>
<div class="ttc" id="test_8h_html"><div class="ttname"><a href="../../d2/ddc/test_8h.html">test.h</a></div><div class="ttdoc">Test Framework API. </div></div>
<div class="ttc" id="term_8h_html_a9b44987ffdc2af19b635206b94334b69"><div class="ttname"><a href="../../db/d45/term_8h.html#a9b44987ffdc2af19b635206b94334b69">COLOR_WHITE</a></div><div class="ttdeci">#define COLOR_WHITE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00061">term.h:61</a></div></div>
<div class="ttc" id="asterisk_8c_html_a34228ebf05a22e6cdfe13385312f090a"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a34228ebf05a22e6cdfe13385312f090a">_hup_handler</a></div><div class="ttdeci">static void _hup_handler(int num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01678">asterisk.c:1678</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343a5a972bf8c28c241823fbe62ff4b215bc"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a5a972bf8c28c241823fbe62ff4b215bc">AST_OPT_FLAG_QUIET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00044">options.h:44</a></div></div>
<div class="ttc" id="asterisk_8c_html_ac718cef19833170af662c53525d9c8c9"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ac718cef19833170af662c53525d9c8c9">ast_el_read_default_histfile</a></div><div class="ttdeci">static void ast_el_read_default_histfile(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03121">asterisk.c:3121</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="asterisk_8c_html_a9b4ad2e6c395e6cc57ad14dc70365d59acf10aef13967cc149a7b37d7a4e5e693"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59acf10aef13967cc149a7b37d7a4e5e693">SHUTTING_DOWN_FINAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00360">asterisk.c:360</a></div></div>
<div class="ttc" id="asterisk_8c_html_a617d1486ee651b4c894d02e1fe68fe04"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a617d1486ee651b4c894d02e1fe68fe04">el</a></div><div class="ttdeci">static EditLine * el</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00340">asterisk.c:340</a></div></div>
<div class="ttc" id="asterisk_8c_html_a2440f826f27f1682698a5d791e39ce42"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a2440f826f27f1682698a5d791e39ce42">prof_data</a></div><div class="ttdeci">static struct profile_data * prof_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00754">asterisk.c:754</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a33e91cd0cef6786e9e3a27ac67707207"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a></div><div class="ttdeci">if(!yyg-&gt;yy_init)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00868">ast_expr2f.c:868</a></div></div>
<div class="ttc" id="asterisk_8c_html_ad25ecaec9013588c4f6f8537912a8137"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ad25ecaec9013588c4f6f8537912a8137">read_pjproject_startup_options</a></div><div class="ttdeci">static void read_pjproject_startup_options(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03336">asterisk.c:3336</a></div></div>
<div class="ttc" id="asterisk_8c_html_a027ab2a74bcb1638e70418055feb57b9"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a027ab2a74bcb1638e70418055feb57b9">ast_el_add_history</a></div><div class="ttdeci">static int ast_el_add_history(const char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03078">asterisk.c:3078</a></div></div>
<div class="ttc" id="codec_8h_html"><div class="ttname"><a href="../../d1/d16/codec_8h.html">codec.h</a></div><div class="ttdoc">Codec API. </div></div>
<div class="ttc" id="asterisk_8c_html_aac76ac35350d1efd9ddfe5b56739c649"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#aac76ac35350d1efd9ddfe5b56739c649">_argv</a></div><div class="ttdeci">static char * _argv[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00354">asterisk.c:354</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fa466e6ea3d284a9f45202a54686c090aa"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fa466e6ea3d284a9f45202a54686c090aa">CONFIG_FLAG_NOREALTIME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00047">include/asterisk/config.h:47</a></div></div>
<div class="ttc" id="__private_8h_html_a0ba7af47c666f5190ba798f4045bf041"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a0ba7af47c666f5190ba798f4045bf041">ast_bridging_init</a></div><div class="ttdeci">int ast_bridging_init(void)</div><div class="ttdoc">Initialize the bridging system. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l05605">bridge.c:5605</a></div></div>
<div class="ttc" id="__private_8h_html_a9069f9a0490be2b041ca552ef07757f0"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a9069f9a0490be2b041ca552ef07757f0">ast_xmldoc_load_documentation</a></div><div class="ttdeci">int ast_xmldoc_load_documentation(void)</div><div class="ttdoc">Load XML documentation. Provided by xmldoc.c. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d2f/xmldoc_8c_source.html#l02879">xmldoc.c:2879</a></div></div>
<div class="ttc" id="include_2asterisk_2security__events_8h_html_a2bfccbad0896b673d8eb936aa3c2caeb"><div class="ttname"><a href="../../d0/d29/include_2asterisk_2security__events_8h.html#a2bfccbad0896b673d8eb936aa3c2caeb">ast_security_stasis_init</a></div><div class="ttdeci">int ast_security_stasis_init(void)</div><div class="ttdoc">initializes stasis topic/event types for ast_security_topic and ast_security_event_type ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d30/main_2security__events_8c_source.html#l00483">main/security_events.c:483</a></div></div>
<div class="ttc" id="asterisk_8c_html_ac4583a51482ac439c1aef7615f7379cd"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ac4583a51482ac439c1aef7615f7379cd">show_cli_help</a></div><div class="ttdeci">static int show_cli_help(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03297">asterisk.c:3297</a></div></div>
<div class="ttc" id="stasis__endpoints_8h_html_af268491213e6415d1b7c6f2df4a272e1"><div class="ttname"><a href="../../d7/d44/stasis__endpoints_8h.html#af268491213e6415d1b7c6f2df4a272e1">ast_endpoint_stasis_init</a></div><div class="ttdeci">int ast_endpoint_stasis_init(void)</div><div class="ttdoc">Initialization function for endpoint stasis support. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/daf/stasis__endpoints_8c_source.html#l00458">stasis_endpoints.c:458</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343ad2e1d34d01ce072525be7fa9b72ca833"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343ad2e1d34d01ce072525be7fa9b72ca833">AST_OPT_FLAG_EXEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00054">options.h:54</a></div></div>
<div class="ttc" id="options_8h_html_a4ba559b3374e340f54546ae9bb64af5e"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a4ba559b3374e340f54546ae9bb64af5e">DEFAULT_PJPROJECT_CACHE_POOLS</a></div><div class="ttdeci">#define DEFAULT_PJPROJECT_CACHE_POOLS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00177">options.h:177</a></div></div>
<div class="ttc" id="asterisk_8c_html_a76e9858fdda453c648f37aede9f3005c"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a76e9858fdda453c648f37aede9f3005c">cli_prompt</a></div><div class="ttdeci">static char * cli_prompt(EditLine *editline)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02727">asterisk.c:2727</a></div></div>
<div class="ttc" id="asterisk_8c_html_a77938ca1fe1e56efb43da193009f9b14"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a77938ca1fe1e56efb43da193009f9b14">_null_sig_handler</a></div><div class="ttdeci">static void _null_sig_handler(int sig)</div><div class="ttdoc">NULL handler so we can collect the child exit status. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01042">asterisk.c:1042</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="__private_8h_html_a3bd0fe9ea648be22210b10a982cc2da1"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a3bd0fe9ea648be22210b10a982cc2da1">ast_test_init</a></div><div class="ttdeci">int ast_test_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l01221">test.c:1221</a></div></div>
<div class="ttc" id="__private_8h_html_ac9d4a9fe0e63482e1eec386dfdeae359"><div class="ttname"><a href="../../d4/d78/__private_8h.html#ac9d4a9fe0e63482e1eec386dfdeae359">ast_dns_system_resolver_init</a></div><div class="ttdeci">int ast_dns_system_resolver_init(void)</div><div class="ttdoc">Initializes the resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/dns__system__resolver_8c_source.html#l00243">dns_system_resolver.c:243</a></div></div>
<div class="ttc" id="paths_8h_html_a6014e29009d7db30e546a244c2cc95b6"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a6014e29009d7db30e546a244c2cc95b6">ast_config_AST_RUN_DIR</a></div><div class="ttdeci">const char * ast_config_AST_RUN_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00162">options.c:162</a></div></div>
<div class="ttc" id="alaw_8h_html_ae34ffa042dcd0ba03e43a3bca292810f"><div class="ttname"><a href="../../d6/db5/alaw_8h.html#ae34ffa042dcd0ba03e43a3bca292810f">ast_alaw_init</a></div><div class="ttdeci">void ast_alaw_init(void)</div><div class="ttdoc">To init the alaw to slinear conversion stuff, this needs to be run. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d27/alaw_8c_source.html#l00152">alaw.c:152</a></div></div>
<div class="ttc" id="asterisk_8c_html_a59ebc425c4a47d7a5fb011e9448f7806"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a59ebc425c4a47d7a5fb011e9448f7806">need_quit</a></div><div class="ttdeci">unsigned int need_quit</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00399">asterisk.c:399</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="group__main__options_html_ga908239c63cc433cbefa4aa6f5efcb830"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#ga908239c63cc433cbefa4aa6f5efcb830">ast_option_maxload</a></div><div class="ttdeci">double ast_option_maxload</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00077">options.c:77</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="paths_8h_html_a37ae09a4cc0e3b46e7b2a2052bde4965"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a37ae09a4cc0e3b46e7b2a2052bde4965">ast_config_AST_RUN_USER</a></div><div class="ttdeci">const char * ast_config_AST_RUN_USER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00168">options.c:168</a></div></div>
<div class="ttc" id="app__queue_8c_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01508">app_queue.c:1508</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="network_8h_html_afd80ecbe3170ca4fc85b65cda8659f82"><div class="ttname"><a href="../../d9/d94/network_8h.html#afd80ecbe3170ca4fc85b65cda8659f82">MAXHOSTNAMELEN</a></div><div class="ttdeci">#define MAXHOSTNAMELEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00069">network.h:69</a></div></div>
<div class="ttc" id="format__cache_8h_html_a6f84427191dd4aa54f7cb59778e125cf"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a6f84427191dd4aa54f7cb59778e125cf">ast_format_cache_init</a></div><div class="ttdeci">int ast_format_cache_init(void)</div><div class="ttdoc">Initialize format cache support within the core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00370">format_cache.c:370</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="structconsole_html_a60a34315f460179939054acaf3ed8163"><div class="ttname"><a href="../../df/d87/structconsole.html#a60a34315f460179939054acaf3ed8163">console::uid</a></div><div class="ttdeci">int uid</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00321">asterisk.c:321</a></div></div>
<div class="ttc" id="endpoints_8h_html"><div class="ttname"><a href="../../d4/d61/endpoints_8h.html">endpoints.h</a></div><div class="ttdoc">Endpoint abstractions. </div></div>
<div class="ttc" id="asterisk_8c_html_a33a9992da9e5903817b8fec92e0bd7f9"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a33a9992da9e5903817b8fec92e0bd7f9">ast_cli_display_match_list</a></div><div class="ttdeci">static void ast_cli_display_match_list(struct ast_vector_string *matches, int max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02887">asterisk.c:2887</a></div></div>
<div class="ttc" id="asterisk_8c_html_a7cdafc5a121e87659887ffc9abe36760"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a7cdafc5a121e87659887ffc9abe36760">ast_lastreloadtime</a></div><div class="ttdeci">struct timeval ast_lastreloadtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00337">asterisk.c:337</a></div></div>
<div class="ttc" id="asterisk_8c_html_ae1517891417ae2f6e398e95ae79dadf1"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ae1517891417ae2f6e398e95ae79dadf1">ast_mainpid</a></div><div class="ttdeci">pid_t ast_mainpid</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00315">asterisk.c:315</a></div></div>
<div class="ttc" id="file_8h_html"><div class="ttname"><a href="../../d2/d4d/file_8h.html">file.h</a></div><div class="ttdoc">Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. </div></div>
<div class="ttc" id="logger_8h_html_a5d8b3e9d6d1e828877fab83401fcbfe4"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a5d8b3e9d6d1e828877fab83401fcbfe4">ast_init_logger_for_socket_console</a></div><div class="ttdeci">void ast_init_logger_for_socket_console(void)</div><div class="ttdoc">load logger.conf configuration for console socket connections </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l00684">logger.c:684</a></div></div>
<div class="ttc" id="structprofile__entry_html_a675daec89f956f8bafc1ff2dc3e86155"><div class="ttname"><a href="../../da/d4e/structprofile__entry.html#a675daec89f956f8bafc1ff2dc3e86155">profile_entry::mark</a></div><div class="ttdeci">int64_t mark</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00743">asterisk.c:743</a></div></div>
<div class="ttc" id="asterisk_8c_html_a334294b1940f73a5fec03aceb70a9e2d"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a334294b1940f73a5fec03aceb70a9e2d">ast_add_profile</a></div><div class="ttdeci">int ast_add_profile(const char *name, uint64_t scale)</div><div class="ttdoc">allocates a counter with a given name and scale. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00760">asterisk.c:760</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a93f4ec51ddb2654b816f260287c6182c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a93f4ec51ddb2654b816f260287c6182c">AST_RTP_PT_FIRST_DYNAMIC</a></div><div class="ttdeci">#define AST_RTP_PT_FIRST_DYNAMIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00092">rtp_engine.h:92</a></div></div>
<div class="ttc" id="asterisk_8c_html_a6e86798cc2f458f440d5130817d2ec7c"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a6e86798cc2f458f440d5130817d2ec7c">ast_cancel_shutdown</a></div><div class="ttdeci">int ast_cancel_shutdown(void)</div><div class="ttdoc">Cancel an existing shutdown and return to normal operation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01839">asterisk.c:1839</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_ac70fbae4ed48b5b48ff4b49f01e29f86"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#ac70fbae4ed48b5b48ff4b49f01e29f86">inbuf</a></div><div class="ttdeci">static int inbuf(struct baseio *bio, FILE *fi)</div><div class="ttdoc">utility used by inchar(), for base_encode() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l04770">app_voicemail.c:4770</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343af6be95474d0021d99a2402b2e6f1e23e"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343af6be95474d0021d99a2402b2e6f1e23e">AST_OPT_FLAG_LIGHT_BACKGROUND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00088">options.h:88</a></div></div>
<div class="ttc" id="io_8h_html"><div class="ttname"><a href="../../dc/dac/io_8h.html">io.h</a></div><div class="ttdoc">I/O Management (derived from Cheops-NG) </div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__atexit_html_a50b5dd77cb70dfecbc6098fab1b9b36d"><div class="ttname"><a href="../../d0/d68/structast__atexit.html#a50b5dd77cb70dfecbc6098fab1b9b36d">ast_atexit::list</a></div><div class="ttdeci">struct ast_atexit::@338 list</div></div>
<div class="ttc" id="asterisk_8c_html_a9795c12483e42e95d18eae6a92482677"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9795c12483e42e95d18eae6a92482677">ast_unregister_thread</a></div><div class="ttdeci">void ast_unregister_thread(void *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00430">asterisk.c:430</a></div></div>
<div class="ttc" id="asterisk_8c_html_a6b74ef8709c2a8f00f06c0933ca993a1"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a6b74ef8709c2a8f00f06c0933ca993a1">ast_console_puts_mutable</a></div><div class="ttdeci">void ast_console_puts_mutable(const char *string, int level)</div><div class="ttdoc">log the string to the root console, and all attached network console clients </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01274">asterisk.c:1274</a></div></div>
<div class="ttc" id="asterisk_8c_html_ab48b6f8cdddee48aed2f4fba4a6c18fe"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ab48b6f8cdddee48aed2f4fba4a6c18fe">ast_tryconnect</a></div><div class="ttdeci">static int ast_tryconnect(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01642">asterisk.c:1642</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="utf8_8h_html"><div class="ttname"><a href="../../db/d7c/utf8_8h.html">utf8.h</a></div><div class="ttdoc">UTF-8 information and validation functions. </div></div>
<div class="ttc" id="astmm_8h_html_ad42ab843b767e8b57162c10a158b75c3"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a></div><div class="ttdeci">void ast_free_ptr(void *ptr)</div><div class="ttdoc">free() wrapper </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01771">astmm.c:1771</a></div></div>
<div class="ttc" id="bucket_8h_html"><div class="ttname"><a href="../../dd/d94/bucket_8h.html">bucket.h</a></div><div class="ttdoc">Bucket File API. </div></div>
<div class="ttc" id="utils_8h_html_aa73be876e3a4024b91ce2e09d8b945d1"><div class="ttname"><a href="../../d5/d60/utils_8h.html#aa73be876e3a4024b91ce2e09d8b945d1">ast_pthread_create_detached_background</a></div><div class="ttdeci">#define ast_pthread_create_detached_background(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00572">utils.h:572</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structconsole_html_a6567680a890171fbaa1a026477a858d3"><div class="ttname"><a href="../../df/d87/structconsole.html#a6567680a890171fbaa1a026477a858d3">console::gid</a></div><div class="ttdeci">int gid</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00322">asterisk.c:322</a></div></div>
<div class="ttc" id="options_8h_html_a49c5512f6feedb3629d559dd9f5f4416"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a49c5512f6feedb3629d559dd9f5f4416">ast_opt_reconnect</a></div><div class="ttdeci">#define ast_opt_reconnect</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00123">options.h:123</a></div></div>
<div class="ttc" id="term_8h_html_a253f1aaaac4bf7e88ca402bddbe7fe6f"><div class="ttname"><a href="../../db/d45/term_8h.html#a253f1aaaac4bf7e88ca402bddbe7fe6f">term_end</a></div><div class="ttdeci">const char * term_end(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de5/term_8c_source.html#l00356">term.c:356</a></div></div>
<div class="ttc" id="__private_8h_html_a090952bbd448a14d7cad9b960f520c32"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a090952bbd448a14d7cad9b960f520c32">modules_shutdown</a></div><div class="ttdeci">int modules_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d96/loader_8c_source.html#l01182">loader.c:1182</a></div></div>
<div class="ttc" id="options_8h_html_a4fe31af40146104d64d4a31535e44400"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a4fe31af40146104d64d4a31535e44400">ast_opt_console</a></div><div class="ttdeci">#define ast_opt_console</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00109">options.h:109</a></div></div>
<div class="ttc" id="group__main__options_html_ga6d3ecf74255f4bfc355ebd1540c316c1"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#ga6d3ecf74255f4bfc355ebd1540c316c1">ast_option_maxcalls</a></div><div class="ttdeci">int ast_option_maxcalls</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00079">options.c:79</a></div></div>
<div class="ttc" id="buildinfo_8h_html_aae3c7406e483c475f34063c84048ab89"><div class="ttname"><a href="../../de/d35/buildinfo_8h.html#aae3c7406e483c475f34063c84048ab89">ast_build_hostname</a></div><div class="ttdeci">const char * ast_build_hostname</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d42/buildinfo_8c_source.html#l00029">buildinfo.c:29</a></div></div>
<div class="ttc" id="sorcery_8h_html_af4f32cd7e26c6876aa46a44202b0baa9"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#af4f32cd7e26c6876aa46a44202b0baa9">ast_sorcery_init</a></div><div class="ttdeci">int ast_sorcery_init(void)</div><div class="ttdoc">Initialize the sorcery API. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l00387">sorcery.c:387</a></div></div>
<div class="ttc" id="structprofile__data_html_a98ca8117bc73d9d7520727c4ce8772e6"><div class="ttname"><a href="../../dc/d6f/structprofile__data.html#a98ca8117bc73d9d7520727c4ce8772e6">profile_data::max_size</a></div><div class="ttdeci">int max_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00750">asterisk.c:750</a></div></div>
<div class="ttc" id="io_8h_html_a8942a1f4804edc930a130dd74f91ed17"><div class="ttname"><a href="../../dc/dac/io_8h.html#a8942a1f4804edc930a130dd74f91ed17">ast_get_termcols</a></div><div class="ttdeci">int ast_get_termcols(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00373">io.c:373</a></div></div>
<div class="ttc" id="asterisk_8c_html_a9b4ad2e6c395e6cc57ad14dc70365d59a704981d4ddccbee50fabd8bed58b01dd"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a704981d4ddccbee50fabd8bed58b01dd">SHUTDOWN_NICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00373">asterisk.c:373</a></div></div>
<div class="ttc" id="term_8h_html_ae443185677b2d0586ded82d4fcde6992"><div class="ttname"><a href="../../db/d45/term_8h.html#ae443185677b2d0586ded82d4fcde6992">COLORIZE</a></div><div class="ttdeci">#define COLORIZE(fg, bg, str)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00068">term.h:68</a></div></div>
<div class="ttc" id="codec_8h_html_a4b26fb9e0f4495a772a510e3c66d42dd"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a4b26fb9e0f4495a772a510e3c66d42dd">ast_codec_init</a></div><div class="ttdeci">int ast_codec_init(void)</div><div class="ttdoc">Initialize codec support within the core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00249">codec.c:249</a></div></div>
<div class="ttc" id="utils_8h_html"><div class="ttname"><a href="../../d5/d60/utils_8h.html">utils.h</a></div><div class="ttdoc">Utility functions. </div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="format_8h_html"><div class="ttname"><a href="../../d0/d0a/format_8h.html">format.h</a></div><div class="ttdoc">Media Format API. </div></div>
<div class="ttc" id="alertpipe_8h_html_a2ccba8179d9e136fba008e801daf2c5f"><div class="ttname"><a href="../../dc/d4d/alertpipe_8h.html#a2ccba8179d9e136fba008e801daf2c5f">ast_alertpipe_close</a></div><div class="ttdeci">void ast_alertpipe_close(int alert_pipe[2])</div><div class="ttdoc">Close an alert pipe. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7a/alertpipe_8c_source.html#l00079">alertpipe.c:79</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="buildinfo_8h_html_af89b2913397f19dc15adb9014bcb5d5a"><div class="ttname"><a href="../../de/d35/buildinfo_8h.html#af89b2913397f19dc15adb9014bcb5d5a">ast_build_kernel</a></div><div class="ttdeci">const char * ast_build_kernel</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d42/buildinfo_8c_source.html#l00030">buildinfo.c:30</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6344200b56202a76de8db05af680f3ac"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6344200b56202a76de8db05af680f3ac">ast_realtime_enabled</a></div><div class="ttdeci">int ast_realtime_enabled(void)</div><div class="ttdoc">Check if there&amp;#39;s any realtime engines loaded. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03377">main/config.c:3377</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga22f6d55529c1ca69bc308af9d9ef0bb2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga22f6d55529c1ca69bc308af9d9ef0bb2">ast_webmanager_check_enabled</a></div><div class="ttdeci">int ast_webmanager_check_enabled(void)</div><div class="ttdoc">Check if AMI/HTTP is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01954">manager.c:1954</a></div></div>
<div class="ttc" id="asterisk_8c_html_a81a879aa86de49b2de4dc9cd60b94abd"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a81a879aa86de49b2de4dc9cd60b94abd">quit_handler</a></div><div class="ttdeci">static void quit_handler(int num, shutdown_nice_t niceness, int restart)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01869">asterisk.c:1869</a></div></div>
<div class="ttc" id="select_8h_html_afe1ef49596dc9d1dd0bc61f51f7105be"><div class="ttname"><a href="../../d9/dab/select_8h.html#afe1ef49596dc9d1dd0bc61f51f7105be">FD_ZERO</a></div><div class="ttdeci">#define FD_ZERO(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/select_8h_source.html#l00049">select.h:49</a></div></div>
<div class="ttc" id="logger_8h_html_a32a16834a00172c3284070e6d6d38f47"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a32a16834a00172c3284070e6d6d38f47">ast_verb_console_register</a></div><div class="ttdeci">void ast_verb_console_register(int *level)</div><div class="ttdoc">Register this thread&amp;#39;s console verbosity level pointer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l02296">logger.c:2296</a></div></div>
<div class="ttc" id="utils_8h_html_a595e2f8aa398f4bd21e381c3211235fe"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a></div><div class="ttdeci">#define ast_pthread_create_background(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00567">utils.h:567</a></div></div>
<div class="ttc" id="paths_8h_html_ab9f9346c7a41bdf3720f7b1ed02ec703"><div class="ttname"><a href="../../dd/df2/paths_8h.html#ab9f9346c7a41bdf3720f7b1ed02ec703">ast_config_AST_SYSTEM_NAME</a></div><div class="ttdeci">const char * ast_config_AST_SYSTEM_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00170">options.c:170</a></div></div>
<div class="ttc" id="asterisk_8c_html_acc0f80a205edf9eff08b24f2748f9247"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#acc0f80a205edf9eff08b24f2748f9247">handle_stop_when_convenient</a></div><div class="ttdeci">static char * handle_stop_when_convenient(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02352">asterisk.c:2352</a></div></div>
<div class="ttc" id="asterisk_8c_html_a14a2a4e74d0139c8299a5b1042957ca0"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a14a2a4e74d0139c8299a5b1042957ca0">_urg_handler</a></div><div class="ttdeci">static void _urg_handler(int num)</div><div class="ttdoc">Urgent handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01669">asterisk.c:1669</a></div></div>
<div class="ttc" id="alertpipe_8h_html_a3c1d9ad40416df5adef7cc213e87d88b"><div class="ttname"><a href="../../dc/d4d/alertpipe_8h.html#a3c1d9ad40416df5adef7cc213e87d88b">ast_alertpipe_write</a></div><div class="ttdeci">ssize_t ast_alertpipe_write(int alert_pipe[2])</div><div class="ttdoc">Write an event to an alert pipe. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7a/alertpipe_8c_source.html#l00120">alertpipe.c:120</a></div></div>
<div class="ttc" id="select_8h_html_a1d55bd4411acb4331a0f32028fdf05f5"><div class="ttname"><a href="../../d9/dab/select_8h.html#a1d55bd4411acb4331a0f32028fdf05f5">FD_SET</a></div><div class="ttdeci">#define FD_SET(fd, fds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/select_8h_source.html#l00058">select.h:58</a></div></div>
<div class="ttc" id="structprofile__entry_html_ada66dc311f24213ab6af727a07d97205"><div class="ttname"><a href="../../da/d4e/structprofile__entry.html#ada66dc311f24213ab6af727a07d97205">profile_entry::scale</a></div><div class="ttdeci">uint64_t scale</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00742">asterisk.c:742</a></div></div>
<div class="ttc" id="cdr_8h_html_a1819c3aecd7b59e2734810f52b219059"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a1819c3aecd7b59e2734810f52b219059">ast_cdr_is_enabled</a></div><div class="ttdeci">int ast_cdr_is_enabled(void)</div><div class="ttdoc">Return TRUE if CDR subsystem is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02861">cdr.c:2861</a></div></div>
<div class="ttc" id="paths_8h_html_a2434757afbc16110ff1c7483f3d7ba51"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a2434757afbc16110ff1c7483f3d7ba51">ast_config_AST_RUN_GROUP</a></div><div class="ttdeci">const char * ast_config_AST_RUN_GROUP</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00169">options.c:169</a></div></div>
<div class="ttc" id="asterisk_8c_html_a4f8c3e6c4cf3b41470b9df95f046a48d"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a4f8c3e6c4cf3b41470b9df95f046a48d">ast_console_toggle_loglevel</a></div><div class="ttdeci">void ast_console_toggle_loglevel(int fd, int level, int state)</div><div class="ttdoc">enable or disable a logging level to a specified console </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01209">asterisk.c:1209</a></div></div>
<div class="ttc" id="asterisk_8c_html_a6de8ef28c39cc39978497de1918bfd70"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a6de8ef28c39cc39978497de1918bfd70">ast_replace_sigchld</a></div><div class="ttdeci">void ast_replace_sigchld(void)</div><div class="ttdoc">Replace the SIGCHLD handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01062">asterisk.c:1062</a></div></div>
<div class="ttc" id="cdr_8h_html"><div class="ttname"><a href="../../dc/d07/cdr_8h.html">cdr.h</a></div><div class="ttdoc">Call Detail Record API. </div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="asterisk_8c_html_ac93a7a9b76beefd78e435cf9f9969bc8"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ac93a7a9b76beefd78e435cf9f9969bc8">env_init</a></div><div class="ttdeci">static void env_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03462">asterisk.c:3462</a></div></div>
<div class="ttc" id="asterisk_8c_html_a6b728a12124051e12d74874f1b1cce02"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a6b728a12124051e12d74874f1b1cce02">_child_handler</a></div><div class="ttdeci">static void _child_handler(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01702">asterisk.c:1702</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html">config.h</a></div><div class="ttdoc">Configuration File Parser. </div></div>
<div class="ttc" id="__private_8h_html_a70c2a89af6cfcf3c1eba77049efd5875"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a70c2a89af6cfcf3c1eba77049efd5875">load_pbx_hangup_handler</a></div><div class="ttdeci">int load_pbx_hangup_handler(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d53/pbx__hangup__handler_8c_source.html#l00292">pbx_hangup_handler.c:292</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="buildinfo_8h_html_a6d456a43bdae713459ee5ee67439670c"><div class="ttname"><a href="../../de/d35/buildinfo_8h.html#a6d456a43bdae713459ee5ee67439670c">ast_build_machine</a></div><div class="ttdeci">const char * ast_build_machine</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d42/buildinfo_8c_source.html#l00031">buildinfo.c:31</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="paths_8h_html_adea5f0a0a8720d1dbb47ca434fe78778"><div class="ttname"><a href="../../dd/df2/paths_8h.html#adea5f0a0a8720d1dbb47ca434fe78778">ast_config_AST_CONFIG_FILE</a></div><div class="ttdeci">const char * ast_config_AST_CONFIG_FILE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00152">options.c:152</a></div></div>
<div class="ttc" id="asterisk_8c_html_acd462f81fa607939af36a9fa33cdbf9d"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#acd462f81fa607939af36a9fa33cdbf9d">ast_startuptime</a></div><div class="ttdeci">struct timeval ast_startuptime</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00336">asterisk.c:336</a></div></div>
<div class="ttc" id="utils_8h_html_a85392708ff0d7ed6fb86ff83f0e714c3"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a85392708ff0d7ed6fb86ff83f0e714c3">ast_fd_set_flags</a></div><div class="ttdeci">#define ast_fd_set_flags(fd, flags)</div><div class="ttdoc">Set flags on the given file descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l01009">utils.h:1009</a></div></div>
<div class="ttc" id="manager_8h_html_a420f0f755e1c3378b45ca7f6f0669ffa"><div class="ttname"><a href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a></div><div class="ttdeci">#define EVENT_FLAG_SYSTEM</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00071">manager.h:71</a></div></div>
<div class="ttc" id="asterisk_8c_html_a775b228bc60d1c59c296268f70a1252d"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a775b228bc60d1c59c296268f70a1252d">shutdown_pending</a></div><div class="ttdeci">static int shutdown_pending</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00381">asterisk.c:381</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structprofile__entry_html_a15cf6039b397e491e02d273d76f3485e"><div class="ttname"><a href="../../da/d4e/structprofile__entry.html#a15cf6039b397e491e02d273d76f3485e">profile_entry::events</a></div><div class="ttdeci">int64_t events</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00745">asterisk.c:745</a></div></div>
<div class="ttc" id="asterisk_8c_html_a5e99a7d549dd33ed14b3bb1a673f1f47"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a5e99a7d549dd33ed14b3bb1a673f1f47">mon_sig_flags</a></div><div class="ttdeci">static pthread_t mon_sig_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00385">asterisk.c:385</a></div></div>
<div class="ttc" id="asterisk_8c_html_a6bd02774fe0979cefec3d88594749076"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a6bd02774fe0979cefec3d88594749076">handle_stop_gracefully</a></div><div class="ttdeci">static char * handle_stop_gracefully(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02331">asterisk.c:2331</a></div></div>
<div class="ttc" id="image_8h_html"><div class="ttname"><a href="../../d5/db2/image_8h.html">image.h</a></div><div class="ttdoc">General Asterisk channel definitions for image handling. </div></div>
<div class="ttc" id="ulaw_8h_html"><div class="ttname"><a href="../../d4/dc2/ulaw_8h.html">ulaw.h</a></div><div class="ttdoc">u-Law to Signed linear conversion </div></div>
<div class="ttc" id="rtp__engine_8h_html_a6090669b517d32eacfd0e57dfc7a1efd"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a6090669b517d32eacfd0e57dfc7a1efd">AST_RTP_MAX_PT</a></div><div class="ttdeci">#define AST_RTP_MAX_PT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00083">rtp_engine.h:83</a></div></div>
<div class="ttc" id="aoc_8h_html"><div class="ttname"><a href="../../d6/db3/aoc_8h.html">aoc.h</a></div><div class="ttdoc">Generic Advice of Charge encode and decode routines. </div></div>
<div class="ttc" id="options_8h_html_aab068d1d19325ebde561113748207756"><div class="ttname"><a href="../../d7/d5b/options_8h.html#aab068d1d19325ebde561113748207756">ast_opt_hide_messaging_ami_events</a></div><div class="ttdeci">#define ast_opt_hide_messaging_ami_events</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00137">options.h:137</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343aec2be2c2ea39268bc434b19a19fa5f49"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343aec2be2c2ea39268bc434b19a19fa5f49">AST_OPT_FLAG_CONSOLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00046">options.h:46</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343a14749bb9d97b6d2beec3e2b2688149d2"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a14749bb9d97b6d2beec3e2b2688149d2">AST_OPT_FLAG_GENERIC_PLC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00098">options.h:98</a></div></div>
<div class="ttc" id="asterisk_8c_html_ae7ff139d2c02940102c3881091670f47"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ae7ff139d2c02940102c3881091670f47">ast_console_puts_mutable_full</a></div><div class="ttdeci">void ast_console_puts_mutable_full(const char *message, int level, int sublevel)</div><div class="ttdoc">log the string to the console, and all attached console clients </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01281">asterisk.c:1281</a></div></div>
<div class="ttc" id="cli_8h_html_a75f19bbd3b41504a62ae727c6083f8af"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a75f19bbd3b41504a62ae727c6083f8af">ast_cli_completion_vector</a></div><div class="ttdeci">struct ast_vector_string * ast_cli_completion_vector(const char *text, const char *word)</div><div class="ttdoc">Generates a vector of strings for CLI completion. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l02731">main/cli.c:2731</a></div></div>
<div class="ttc" id="__private_8h_html_a472851d5655c8a9b9492c40e5ff32d2d"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a472851d5655c8a9b9492c40e5ff32d2d">close_logger</a></div><div class="ttdeci">void close_logger(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l01912">logger.c:1912</a></div></div>
<div class="ttc" id="callerid_8h_html_a9c1767ffd4ca30651bcc241c16d1f071"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a9c1767ffd4ca30651bcc241c16d1f071">callerid_init</a></div><div class="ttdeci">void callerid_init(void)</div><div class="ttdoc">CallerID Initialization. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l00115">callerid.c:115</a></div></div>
<div class="ttc" id="logger_8h_html_a9aaf93f121b63d51444d573673d4b791"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a9aaf93f121b63d51444d573673d4b791">VERBOSE_PREFIX_4</a></div><div class="ttdeci">#define VERBOSE_PREFIX_4</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00044">logger.h:44</a></div></div>
<div class="ttc" id="channel_8h_html"><div class="ttname"><a href="../../d5/d7b/channel_8h.html">channel.h</a></div><div class="ttdoc">General Asterisk PBX channel definitions. </div></div>
<div class="ttc" id="json_8h_html"><div class="ttname"><a href="../../d4/d05/json_8h.html">json.h</a></div><div class="ttdoc">Asterisk JSON abstraction layer. </div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343a120f92831d8bb5ab6c714cbb8074079b"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a120f92831d8bb5ab6c714cbb8074079b">AST_OPT_FLAG_HIGH_PRIORITY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00048">options.h:48</a></div></div>
<div class="ttc" id="options_8h_html_a8b68b62e712208bdd68cc743b937fcc3"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a8b68b62e712208bdd68cc743b937fcc3">ast_opt_timestamp</a></div><div class="ttdeci">#define ast_opt_timestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00122">options.h:122</a></div></div>
<div class="ttc" id="__private_8h_html_a1997b4ca4fdf17e715fddf00f44c9651"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a1997b4ca4fdf17e715fddf00f44c9651">ast_term_init</a></div><div class="ttdeci">int ast_term_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de5/term_8c_source.html#l00092">term.c:92</a></div></div>
<div class="ttc" id="asterisk_8c_html_ae60d292daa4fe3a13b0a0d01c5beb305"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ae60d292daa4fe3a13b0a0d01c5beb305">__quit_handler</a></div><div class="ttdeci">static void __quit_handler(int num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02100">asterisk.c:2100</a></div></div>
<div class="ttc" id="group__main__options_html_gade53ca08a5e71308f410de870fa7338b"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gade53ca08a5e71308f410de870fa7338b">option_minmemfree</a></div><div class="ttdeci">long option_minmemfree</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00086">options.c:86</a></div></div>
<div class="ttc" id="logger_8h_html_a5623b2747e49964e0eae2795057bc92e"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a5623b2747e49964e0eae2795057bc92e">VERBOSE_PREFIX_2</a></div><div class="ttdeci">#define VERBOSE_PREFIX_2</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00042">logger.h:42</a></div></div>
<div class="ttc" id="paths_8h_html"><div class="ttname"><a href="../../dd/df2/paths_8h.html">paths.h</a></div><div class="ttdoc">Asterisk file paths, configured in asterisk.conf. </div></div>
<div class="ttc" id="options_8h_html_af3b50b1627a6cd46395abfe665848438"><div class="ttname"><a href="../../d7/d5b/options_8h.html#af3b50b1627a6cd46395abfe665848438">ast_opt_cache_media_frames</a></div><div class="ttdeci">#define ast_opt_cache_media_frames</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00121">options.h:121</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="io_8h_html_ac0cde8a3fde83180d994ad3c95f8bf49"><div class="ttname"><a href="../../dc/dac/io_8h.html#ac0cde8a3fde83180d994ad3c95f8bf49">ast_sd_notify</a></div><div class="ttdeci">int ast_sd_notify(const char *state)</div><div class="ttdoc">a wrapper for sd_notify(): notify systemd of any state changes. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00392">io.c:392</a></div></div>
<div class="ttc" id="paths_8h_html_a9b39aef5b661559fc470307cb315a417"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a9b39aef5b661559fc470307cb315a417">ast_config_AST_AGI_DIR</a></div><div class="ttdeci">const char * ast_config_AST_AGI_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00160">options.c:160</a></div></div>
<div class="ttc" id="utils_8h_html_a78ce13d749925cbdaa7625e8dbdcbf7f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a78ce13d749925cbdaa7625e8dbdcbf7f">ast_get_tid</a></div><div class="ttdeci">int ast_get_tid(void)</div><div class="ttdoc">Get current thread ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02504">main/utils.c:2504</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="asterisk_8c_html_a85cb51aebe0254ccf6f12cd8a35223de"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a85cb51aebe0254ccf6f12cd8a35223de">EL_BUF_SIZE</a></div><div class="ttdeci">#define EL_BUF_SIZE</div></div>
<div class="ttc" id="structprofile__data_html_ab4cf18122215bbe0b71258214db4048d"><div class="ttname"><a href="../../dc/d6f/structprofile__data.html#ab4cf18122215bbe0b71258214db4048d">profile_data::e</a></div><div class="ttdeci">struct profile_entry e[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00751">asterisk.c:751</a></div></div>
<div class="ttc" id="asterisk_8c_html_a4c46b35c4f4320b2f841520a849eee91"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a4c46b35c4f4320b2f841520a849eee91">ast_set_priority</a></div><div class="ttdeci">int ast_set_priority(int pri)</div><div class="ttdoc">We set ourselves to a high priority, that we might pre-empt everything else. If your PBX has heavy ac...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01799">asterisk.c:1799</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="__private_8h_html_ab8031dfd325120267b9af244605e662a"><div class="ttname"><a href="../../d4/d78/__private_8h.html#ab8031dfd325120267b9af244605e662a">dns_core_init</a></div><div class="ttdeci">int dns_core_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00614">dns_core.c:614</a></div></div>
<div class="ttc" id="poll-compat_8h_html_a5a0c58fa8311e94cd0ed34382aa822f9"><div class="ttname"><a href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a></div><div class="ttdeci">#define ast_poll(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/poll-compat_8h_source.html#l00088">poll-compat.h:88</a></div></div>
<div class="ttc" id="asterisk_8c_html_aabb54677daf95f5c6f575645b1ccf46d"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#aabb54677daf95f5c6f575645b1ccf46d">set_title</a></div><div class="ttdeci">static void set_title(char *text)</div><div class="ttdoc">Set an X-term or screen title. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01723">asterisk.c:1723</a></div></div>
<div class="ttc" id="acl_8h_html"><div class="ttname"><a href="../../d5/d59/acl_8h.html">acl.h</a></div><div class="ttdoc">Access Control of various sorts. </div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343afe9b9459a58a5f1a6ae3537a002e00b1"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343afe9b9459a58a5f1a6ae3537a002e00b1">AST_OPT_FLAG_RECONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00072">options.h:72</a></div></div>
<div class="ttc" id="paths_8h_html_a59860442b922398568da0236c1576039"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a59860442b922398568da0236c1576039">ast_config_AST_PID</a></div><div class="ttdeci">const char * ast_config_AST_PID</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00166">options.c:166</a></div></div>
<div class="ttc" id="channel_8h_html_a0af1a0f8665f21a658864a731eea78c0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0af1a0f8665f21a658864a731eea78c0">ast_softhangup_all</a></div><div class="ttdeci">void ast_softhangup_all(void)</div><div class="ttdoc">Soft hangup all active channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00493">channel.c:493</a></div></div>
<div class="ttc" id="options_8h_html_a248e5c086666b04d29a9cd876ad370b3"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a248e5c086666b04d29a9cd876ad370b3">ast_language_is_prefix</a></div><div class="ttdeci">int ast_language_is_prefix</div><div class="ttdoc">The following variable controls the layout of localized sound files. If 0, use the historical layout ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00067">file.c:67</a></div></div>
<div class="ttc" id="options_8h_html_afe3489254f2f498c33e974ae8ead8bb3"><div class="ttname"><a href="../../d7/d5b/options_8h.html#afe3489254f2f498c33e974ae8ead8bb3">ast_defaultlanguage</a></div><div class="ttdeci">char ast_defaultlanguage[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00098">options.c:98</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="strings_8h_html_ac92713b8d07a45720b2664be70810e55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a></div><div class="ttdeci">char * ast_strip(char *s)</div><div class="ttdoc">Strip leading/trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00219">strings.h:219</a></div></div>
<div class="ttc" id="sched_8h_html"><div class="ttname"><a href="../../d7/d00/sched_8h.html">sched.h</a></div><div class="ttdoc">Scheduler Routines (derived from cheops) </div></div>
<div class="ttc" id="asterisk_8c_html_a5e5307545c681757e6715442933918d3"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a5e5307545c681757e6715442933918d3">hup_handler</a></div><div class="ttdeci">static struct sigaction hup_handler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01697">asterisk.c:1697</a></div></div>
<div class="ttc" id="utf8_8h_html_a1c625c836aa003e2c8160326007b8023"><div class="ttname"><a href="../../db/d7c/utf8_8h.html#a1c625c836aa003e2c8160326007b8023">ast_utf8_init</a></div><div class="ttdeci">int ast_utf8_init(void)</div><div class="ttdoc">Register UTF-8 tests. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d51/utf8_8c_source.html#l00362">utf8.c:362</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="select_8h_html_adbb7ffa6b2e8582cfca25e68e2ecb300"><div class="ttname"><a href="../../d9/dab/select_8h.html#adbb7ffa6b2e8582cfca25e68e2ecb300">ast_select</a></div><div class="ttdeci">static int ast_select(int nfds, ast_fdset *rfds, ast_fdset *wfds, ast_fdset *efds, struct timeval *tvp)</div><div class="ttdoc">Waits for activity on a group of channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/select_8h_source.html#l00079">select.h:79</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343ad5a13ab624cf8420f6aa5aaa74b5e097"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343ad5a13ab624cf8420f6aa5aaa74b5e097">AST_OPT_FLAG_CACHE_RECORD_FILES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00066">options.h:66</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="term_8h_html_ae640996bf494da50000e83e165c5453e"><div class="ttname"><a href="../../db/d45/term_8h.html#ae640996bf494da50000e83e165c5453e">COLORIZE_FMT</a></div><div class="ttdeci">#define COLORIZE_FMT</div><div class="ttdoc">Shortcut macros for coloring a set of text. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00067">term.h:67</a></div></div>
<div class="ttc" id="devicestate_8h_html_aa45f4804461e848d1d2acdba9bfba9d2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#aa45f4804461e848d1d2acdba9bfba9d2">devstate_init</a></div><div class="ttdeci">int devstate_init(void)</div><div class="ttdoc">Initialize the device state core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00898">devicestate.c:898</a></div></div>
<div class="ttc" id="__private_8h_html_aaa750bd60d48780b89622bb62520dff0"><div class="ttname"><a href="../../d4/d78/__private_8h.html#aaa750bd60d48780b89622bb62520dff0">init_logger</a></div><div class="ttdeci">int init_logger(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l01870">logger.c:1870</a></div></div>
<div class="ttc" id="term_8h_html_a0149574f00c0892ce71ca7964e69672b"><div class="ttname"><a href="../../db/d45/term_8h.html#a0149574f00c0892ce71ca7964e69672b">COLOR_BRGREEN</a></div><div class="ttdeci">#define COLOR_BRGREEN</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00052">term.h:52</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="group__main__options_html_ga8f2f99ca0289d77ed55044e2ae6a11b2"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#ga8f2f99ca0289d77ed55044e2ae6a11b2">ast_option_pjproject_log_level</a></div><div class="ttdeci">int ast_option_pjproject_log_level</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00074">options.c:74</a></div></div>
<div class="ttc" id="asterisk_8c_html_a7d9339be3f345df196e3b9f26dc51253"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a7d9339be3f345df196e3b9f26dc51253">warranty_lines</a></div><div class="ttdeci">static const char warranty_lines[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02474">asterisk.c:2474</a></div></div>
<div class="ttc" id="asterisk_8c_html_a2dfc2ba9fce08ba9b43f067fd888a9de"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a2dfc2ba9fce08ba9b43f067fd888a9de">publish_fully_booted</a></div><div class="ttdeci">static void publish_fully_booted(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00939">asterisk.c:939</a></div></div>
<div class="ttc" id="paths_8h_html_a4ff6abee16f0d7503985adb203b06223"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a4ff6abee16f0d7503985adb203b06223">ast_config_AST_CTL_GROUP</a></div><div class="ttdeci">const char * ast_config_AST_CTL_GROUP</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00174">options.c:174</a></div></div>
<div class="ttc" id="alertpipe_8h_html_a89830ce69038617b318b8e0c74def229"><div class="ttname"><a href="../../dc/d4d/alertpipe_8h.html#a89830ce69038617b318b8e0c74def229">ast_alertpipe_init</a></div><div class="ttdeci">int ast_alertpipe_init(int alert_pipe[2])</div><div class="ttdoc">Initialize an alert pipe. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7a/alertpipe_8c_source.html#l00038">alertpipe.c:38</a></div></div>
<div class="ttc" id="linkedlists_8h_html"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html">linkedlists.h</a></div><div class="ttdoc">A set of macros to manage forward-linked lists. </div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9">ast_cli_command</a></div><div class="ttdeci">ast_cli_command</div><div class="ttdoc">calling arguments for new-style handlers. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00151">cli.h:151</a></div></div>
<div class="ttc" id="asterisk_8c_html_ae085d7d87fa48cd621ffa8675e274fd1"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ae085d7d87fa48cd621ffa8675e274fd1">ast_socket</a></div><div class="ttdeci">static int ast_socket</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00312">asterisk.c:312</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="asterisk_8c_html_af7e83931024e973b7157b87398b9a2bc"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#af7e83931024e973b7157b87398b9a2bc">consoles</a></div><div class="ttdeci">struct console consoles[AST_MAX_CONNECTS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00343">asterisk.c:343</a></div></div>
<div class="ttc" id="aoc_8h_html_a0a668676dce2ce44d90f6f4cace31a9f"><div class="ttname"><a href="../../d6/db3/aoc_8h.html#a0a668676dce2ce44d90f6f4cace31a9f">ast_aoc_cli_init</a></div><div class="ttdeci">int ast_aoc_cli_init(void)</div><div class="ttdoc">enable aoc cli options </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da6/aoc_8c_source.html#l02026">aoc.c:2026</a></div></div>
<div class="ttc" id="cli_8h_html_a9df37f8701bbc0ba731c034e89eda2a5"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a9df37f8701bbc0ba731c034e89eda2a5">ast_cli_allow_at_shutdown</a></div><div class="ttdeci">int ast_cli_allow_at_shutdown(struct ast_cli_entry *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l03026">main/cli.c:3026</a></div></div>
<div class="ttc" id="pbx_8h_html"><div class="ttname"><a href="../../db/de0/pbx_8h.html">pbx.h</a></div><div class="ttdoc">Core PBX routines and definitions. </div></div>
<div class="ttc" id="asterisk_8c_html_a9b4ad2e6c395e6cc57ad14dc70365d59"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59">shutdown_nice_t</a></div><div class="ttdeci">shutdown_nice_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00356">asterisk.c:356</a></div></div>
<div class="ttc" id="group__main__options_html_ga683995800c0376125c2c8261eda2e6e0"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#ga683995800c0376125c2c8261eda2e6e0">ast_verb_sys_level</a></div><div class="ttdeci">int ast_verb_sys_level</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00064">options.c:64</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="asterisk_8c_html_a583bacf8cedc00da6854899e5d39f410"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a583bacf8cedc00da6854899e5d39f410">send_rasterisk_connect_commands</a></div><div class="ttdeci">static void send_rasterisk_connect_commands(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02590">asterisk.c:2590</a></div></div>
<div class="ttc" id="asterisk_8c_html_a1033572e9888feae28360f3a454ab3d8"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a1033572e9888feae28360f3a454ab3d8">shuttingdown</a></div><div class="ttdeci">static shutdown_nice_t shuttingdown</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00378">asterisk.c:378</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a846844eb2c4eb44554445936b3770711"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEUNCHANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">include/asterisk/config.h:59</a></div></div>
<div class="ttc" id="network_8h_html"><div class="ttname"><a href="../../d9/d94/network_8h.html">network.h</a></div><div class="ttdoc">Wrapper for network related headers, masking differences between various operating systems...</div></div>
<div class="ttc" id="asterisk_8c_html_a19b7f160bd731112f69cfd4a925d8b55"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a19b7f160bd731112f69cfd4a925d8b55">CHAR_T_LIBEDIT</a></div><div class="ttdeci">#define CHAR_T_LIBEDIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02619">asterisk.c:2619</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a10f9ed9242a397abf76de1ed1fa33c3b"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a10f9ed9242a397abf76de1ed1fa33c3b">AST_LIST_HEAD_STATIC</a></div><div class="ttdeci">#define AST_LIST_HEAD_STATIC(name, type)</div><div class="ttdoc">Defines a structure to be used to hold a list of specified type, statically initialized. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00290">linkedlists.h:290</a></div></div>
<div class="ttc" id="structconsole_html_a29128ae5c15a12dea5fe4f263ba6cec1"><div class="ttname"><a href="../../df/d87/structconsole.html#a29128ae5c15a12dea5fe4f263ba6cec1">console::mute</a></div><div class="ttdeci">int mute</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00320">asterisk.c:320</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="structatexits_html"><div class="ttname"><a href="../../dd/dca/structatexits.html">atexits</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00334">asterisk.c:334</a></div></div>
<div class="ttc" id="paths_8h_html_a63af4213b5b83f717398d8d62008a50d"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a63af4213b5b83f717398d8d62008a50d">ast_config_AST_DATA_DIR</a></div><div class="ttdeci">const char * ast_config_AST_DATA_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00158">options.c:158</a></div></div>
<div class="ttc" id="manager_8h_html"><div class="ttname"><a href="../../db/d45/manager_8h.html">manager.h</a></div><div class="ttdoc">The AMI - Asterisk Manager Interface - is a TCP protocol created to manage Asterisk with third-party ...</div></div>
<div class="ttc" id="asterisk_8c_html_a60dce572870808fbda416eb4c9d60250"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a60dce572870808fbda416eb4c9d60250">consolethread</a></div><div class="ttdeci">static pthread_t consolethread</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00384">asterisk.c:384</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343a1c360c0f064303244790f6857bd2d847"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a1c360c0f064303244790f6857bd2d847">AST_OPT_FLAG_TRANSCODE_VIA_SLIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00060">options.h:60</a></div></div>
<div class="ttc" id="cdr_8h_html_a5634f8ea707fb2fdf87abdd55a539764"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a5634f8ea707fb2fdf87abdd55a539764">ast_cdr_engine_term</a></div><div class="ttdeci">void ast_cdr_engine_term(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l04577">cdr.c:4577</a></div></div>
<div class="ttc" id="term_8h_html_aba2a7fe77a7501e5844370eec0185207"><div class="ttname"><a href="../../db/d45/term_8h.html#aba2a7fe77a7501e5844370eec0185207">COLOR_BLACK</a></div><div class="ttdeci">#define COLOR_BLACK</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00047">term.h:47</a></div></div>
<div class="ttc" id="asterisk_8c_html_a1fe2708ec6a030f377b236efe61c94e6"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a1fe2708ec6a030f377b236efe61c94e6">console_state_init</a></div><div class="ttdeci">static int console_state_init(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02153">asterisk.c:2153</a></div></div>
<div class="ttc" id="asterisk_8c_html_a459b692028914da1bf3641b5de9ba6ea"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a459b692028914da1bf3641b5de9ba6ea">canary_filename</a></div><div class="ttdeci">static char canary_filename[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00387">asterisk.c:387</a></div></div>
<div class="ttc" id="asterisk_8c_html_a9b4ad2e6c395e6cc57ad14dc70365d59a12d28a6e5875c59040c79f31255b3cbd"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a12d28a6e5875c59040c79f31255b3cbd">SHUTDOWN_FAST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00369">asterisk.c:369</a></div></div>
<div class="ttc" id="__private_8h_html_a1613dc2954f81c1131ad5acd24c1e574"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a1613dc2954f81c1131ad5acd24c1e574">ast_device_state_engine_init</a></div><div class="ttdeci">int ast_device_state_engine_init(void)</div><div class="ttdoc">Initialize the device state engine in separate thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00618">devicestate.c:618</a></div></div>
<div class="ttc" id="asterisk_8c_html_a63d2216bb22fe88d5f1e964a1b8e8c3f"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a63d2216bb22fe88d5f1e964a1b8e8c3f">set_priority_all</a></div><div class="ttdeci">static int set_priority_all(int pri)</div><div class="ttdoc">Set priority on all known threads. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01756">asterisk.c:1756</a></div></div>
<div class="ttc" id="poll-compat_8h_html"><div class="ttname"><a href="../../d4/dfb/poll-compat_8h.html">poll-compat.h</a></div></div>
<div class="ttc" id="presencestate_8h_html"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html">presencestate.h</a></div><div class="ttdoc">Presence state management. </div></div>
<div class="ttc" id="structconsole__state__data_html_a7ca1285c1b68ed3defe1546edae1bb42"><div class="ttname"><a href="../../d5/d4d/structconsole__state__data.html#a7ca1285c1b68ed3defe1546edae1bb42">console_state_data::verbose_line_level</a></div><div class="ttdeci">char verbose_line_level</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02150">asterisk.c:2150</a></div></div>
<div class="ttc" id="asterisk_8c_html_ae15faa0b9305355ac46a8875f99480a1"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ae15faa0b9305355ac46a8875f99480a1">ast_el_write_default_histfile</a></div><div class="ttdeci">static void ast_el_write_default_histfile(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03132">asterisk.c:3132</a></div></div>
<div class="ttc" id="structconsole_html_a67bfc5276dfe3c0f1174ebc9ce9d7d31"><div class="ttname"><a href="../../df/d87/structconsole.html#a67bfc5276dfe3c0f1174ebc9ce9d7d31">console::p</a></div><div class="ttdeci">int p[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00318">asterisk.c:318</a></div></div>
<div class="ttc" id="asterisk_8c_html_ad7c2a7da4125347c06d9719580731228"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ad7c2a7da4125347c06d9719580731228">ast_unreplace_sigchld</a></div><div class="ttdeci">void ast_unreplace_sigchld(void)</div><div class="ttdoc">Restore the SIGCHLD handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01077">asterisk.c:1077</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fa3b68640f31a2c5493459c159abee08ee">CONFIG_FLAG_NOCACHE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00045">include/asterisk/config.h:45</a></div></div>
<div class="ttc" id="ulaw_8h_html_aad7e1afe4212418e036f434c4cca05ae"><div class="ttname"><a href="../../d4/dc2/ulaw_8h.html#aad7e1afe4212418e036f434c4cca05ae">ast_ulaw_init</a></div><div class="ttdeci">void ast_ulaw_init(void)</div><div class="ttdoc">Set up mu-law conversion table. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8b/ulaw_8c_source.html#l00173">ulaw.c:173</a></div></div>
<div class="ttc" id="structast__atexit_html_a2eaef6e7b886d88be1c28b39da79f7de"><div class="ttname"><a href="../../d0/d68/structast__atexit.html#a2eaef6e7b886d88be1c28b39da79f7de">ast_atexit::is_cleanup</a></div><div class="ttdeci">int is_cleanup</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00330">asterisk.c:330</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__atexit_html"><div class="ttname"><a href="../../d0/d68/structast__atexit.html">ast_atexit</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00328">asterisk.c:328</a></div></div>
<div class="ttc" id="uuid_8h_html_a13dd9e77212ada3759ade078768e3b4e"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html#a13dd9e77212ada3759ade078768e3b4e">ast_uuid_init</a></div><div class="ttdeci">void ast_uuid_init(void)</div><div class="ttdoc">Initialize the UUID system. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/da9/uuid_8c_source.html#l00194">uuid.c:194</a></div></div>
<div class="ttc" id="asterisk_8c_html_ac3e31dd03ea540885ef4359f5f4443a9"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ac3e31dd03ea540885ef4359f5f4443a9">run_startup_commands</a></div><div class="ttdeci">static void run_startup_commands(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03434">asterisk.c:3434</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="alertpipe_8h_html_ac503d210cefe419a8c43d2e713c97bf9"><div class="ttname"><a href="../../dc/d4d/alertpipe_8h.html#ac503d210cefe419a8c43d2e713c97bf9">ast_alertpipe_read</a></div><div class="ttdeci">ast_alert_status_t ast_alertpipe_read(int alert_pipe[2])</div><div class="ttdoc">Read an event from an alert pipe. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7a/alertpipe_8c_source.html#l00102">alertpipe.c:102</a></div></div>
<div class="ttc" id="__private_8h_html_a4a8773c9746e94aef4540938ab095a50"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a4a8773c9746e94aef4540938ab095a50">ast_stun_init</a></div><div class="ttdeci">void ast_stun_init(void)</div><div class="ttdoc">Initialize the STUN system in Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dbd/stun_8c_source.html#l00543">stun.c:543</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="asterisk_8c_html_ac07499a06d0a0cf1d9ea14cf0693330a"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ac07499a06d0a0cf1d9ea14cf0693330a">fdsend</a></div><div class="ttdeci">static int fdsend(int fd, const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01030">asterisk.c:1030</a></div></div>
<div class="ttc" id="group__main__options_html_gad108222bf97f7f56db7631fa239c0d4d"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gad108222bf97f7f56db7631fa239c0d4d">ast_option_pjproject_cache_pools</a></div><div class="ttdeci">int ast_option_pjproject_cache_pools</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00075">options.c:75</a></div></div>
<div class="ttc" id="asterisk_8c_html_a3a662046fe963f773c09fc3b998d3a44"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a3a662046fe963f773c09fc3b998d3a44">randompool</a></div><div class="ttdeci">static char randompool[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00390">asterisk.c:390</a></div></div>
<div class="ttc" id="asterisk_8c_html_a9b4ad2e6c395e6cc57ad14dc70365d59aa864d272f8aa33e6b56ec6e2e58a08e2"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59aa864d272f8aa33e6b56ec6e2e58a08e2">SHUTTING_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00362">asterisk.c:362</a></div></div>
<div class="ttc" id="asterisk_8c_html_ad66301d131d35faea1df2e7c5b1a1bf2"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ad66301d131d35faea1df2e7c5b1a1bf2">handle_show_settings</a></div><div class="ttdeci">static char * handle_show_settings(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdoc">Give an overview of core settings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00450">asterisk.c:450</a></div></div>
<div class="ttc" id="asterisk_8c_html_a696f0073d9bd15b5b2b4262a6d8ec7d1"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a696f0073d9bd15b5b2b4262a6d8ec7d1">ast_el_read_history</a></div><div class="ttdeci">static int ast_el_read_history(const char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03110">asterisk.c:3110</a></div></div>
<div class="ttc" id="asterisk_8c_html_a521c315ca2a2a4e6345878e84af4085e"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a521c315ca2a2a4e6345878e84af4085e">PF_LOCAL</a></div><div class="ttdeci">#define PF_LOCAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00293">asterisk.c:293</a></div></div>
<div class="ttc" id="structprofile__data_html_a05de9d2e9fdfcc8bf932ca13b95ede29"><div class="ttname"><a href="../../dc/d6f/structprofile__data.html#a05de9d2e9fdfcc8bf932ca13b95ede29">profile_data::entries</a></div><div class="ttdeci">int entries</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00749">asterisk.c:749</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="paths_8h_html_a7d3836e5581e433c9f5edd30300cc187"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a7d3836e5581e433c9f5edd30300cc187">ast_config_AST_CONFIG_DIR</a></div><div class="ttdeci">const char * ast_config_AST_CONFIG_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00151">options.c:151</a></div></div>
<div class="ttc" id="tdd_8h_html"><div class="ttname"><a href="../../da/df6/tdd_8h.html">tdd.h</a></div><div class="ttdoc">TTY/TDD Generation support. </div></div>
<div class="ttc" id="options_8h_html_a17d4d9ef04ffa9034f6c6b6c1fd2bb0b"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a17d4d9ef04ffa9034f6c6b6c1fd2bb0b">ast_opt_remote</a></div><div class="ttdeci">#define ast_opt_remote</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00112">options.h:112</a></div></div>
<div class="ttc" id="asterisk_8c_html_a6d9b899df42ca9ba23260752dd136ac5"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a6d9b899df42ca9ba23260752dd136ac5">ast_pbx_uuid_get</a></div><div class="ttdeci">int ast_pbx_uuid_get(char *pbx_uuid, int length)</div><div class="ttdoc">Retrieve the PBX UUID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00934">asterisk.c:934</a></div></div>
<div class="ttc" id="select_8h_html_a88ef74635f81b6aca53097ed160b9e9e"><div class="ttname"><a href="../../d9/dab/select_8h.html#a88ef74635f81b6aca53097ed160b9e9e">ast_FD_SETSIZE</a></div><div class="ttdeci">unsigned int ast_FD_SETSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d19/poll_8c_source.html#l00086">poll.c:86</a></div></div>
<div class="ttc" id="asterisk_8c_html_aae40d25114a12067bc0052c23eef8814"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#aae40d25114a12067bc0052c23eef8814">console_state</a></div><div class="ttdeci">static struct ast_threadstorage console_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02160">asterisk.c:2160</a></div></div>
<div class="ttc" id="__private_8h_html_af14c66aa8339e86774116fdf8c0c904d"><div class="ttname"><a href="../../d4/d78/__private_8h.html#af14c66aa8339e86774116fdf8c0c904d">ast_parking_stasis_init</a></div><div class="ttdeci">int ast_parking_stasis_init(void)</div><div class="ttdoc">initializes the rtp engine arrays </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2a/parking_8c_source.html#l00053">parking.c:53</a></div></div>
<div class="ttc" id="__private_8h_html_a793027a091729ed260ef271e15557a60"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a793027a091729ed260ef271e15557a60">ast_local_init</a></div><div class="ttdeci">int ast_local_init(void)</div><div class="ttdoc">Initialize the local proxy channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l01140">core_local.c:1140</a></div></div>
<div class="ttc" id="asterisk_8c_html_a9b09e95876dfecb9a8573819da0b255e"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9b09e95876dfecb9a8573819da0b255e">ast_register_atexit</a></div><div class="ttdeci">int ast_register_atexit(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01012">asterisk.c:1012</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="logger_8h_html_a29974a7eb3d1e79c16d6923189a82f53"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a29974a7eb3d1e79c16d6923189a82f53">ast_verb_console_unregister</a></div><div class="ttdeci">void ast_verb_console_unregister(void)</div><div class="ttdoc">Unregister this thread&amp;#39;s console verbosity level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l02312">logger.c:2312</a></div></div>
<div class="ttc" id="media__cache_8h_html"><div class="ttname"><a href="../../d3/d16/media__cache_8h.html">media_cache.h</a></div><div class="ttdoc">An in-memory media cache. </div></div>
<div class="ttc" id="logger_8h_html_a50a2e3bde19d6688d7f5f47b294c1ade"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a50a2e3bde19d6688d7f5f47b294c1ade">ast_is_logger_initialized</a></div><div class="ttdeci">int ast_is_logger_initialized(void)</div><div class="ttdoc">Test if logger is initialized. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l01841">logger.c:1841</a></div></div>
<div class="ttc" id="logger_8h_html_aec814517e775308a149299022ac92833"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aec814517e775308a149299022ac92833">VERBOSE_HASMAGIC</a></div><div class="ttdeci">#define VERBOSE_HASMAGIC(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00193">logger.h:193</a></div></div>
<div class="ttc" id="asterisk_8c_html_a606ead257c7d0251adf7739b1a5aac53"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a606ead257c7d0251adf7739b1a5aac53">netconsole</a></div><div class="ttdeci">static void * netconsole(void *vconsole)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01386">asterisk.c:1386</a></div></div>
<div class="ttc" id="asterisk_8c_html_ab0975860bf91fec3bf674341a7cba5ec"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ab0975860bf91fec3bf674341a7cba5ec">DEFINE_PROFILE_MIN_MAX_VALUES</a></div><div class="ttdeci">#define DEFINE_PROFILE_MIN_MAX_VALUES</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00856">asterisk.c:856</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="paths_8h_html_aea5e16ca2517e2093fdfa0e7fd112f0f"><div class="ttname"><a href="../../dd/df2/paths_8h.html#aea5e16ca2517e2093fdfa0e7fd112f0f">ast_config_AST_LOG_DIR</a></div><div class="ttdeci">const char * ast_config_AST_LOG_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00159">options.c:159</a></div></div>
<div class="ttc" id="__private_8h_html_abe6bfa12a840493461afe4cb65c935da"><div class="ttname"><a href="../../d4/d78/__private_8h.html#abe6bfa12a840493461afe4cb65c935da">astobj2_init</a></div><div class="ttdeci">int astobj2_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l01166">astobj2.c:1166</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a67508a613c8f337732e35d9367b43ae7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a></div><div class="ttdeci">#define AST_LIST_ENTRY(type)</div><div class="ttdoc">Declare a forward link structure inside a list entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00409">linkedlists.h:409</a></div></div>
<div class="ttc" id="asterisk_8c_html_a65ac892ffadf889740bfac52a8061b50"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a65ac892ffadf889740bfac52a8061b50">ast_begin_shutdown</a></div><div class="ttdeci">static void ast_begin_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01857">asterisk.c:1857</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="asterisk_8c_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01017">asterisk.c:1017</a></div></div>
<div class="ttc" id="asterisk_8c_html_a04e7dcc4737a260fa91c5241b81c0101"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a04e7dcc4737a260fa91c5241b81c0101">remotehostname</a></div><div class="ttdeci">static char * remotehostname</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00341">asterisk.c:341</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343ab67222445fbb614adeaeec26811e289e"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343ab67222445fbb614adeaeec26811e289e">AST_OPT_FLAG_TIMESTAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00068">options.h:68</a></div></div>
<div class="ttc" id="asterisk_8c_html_accf54a31ef76de94d205f44c61303f90"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#accf54a31ef76de94d205f44c61303f90">ast_consock</a></div><div class="ttdeci">static int ast_consock</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00314">asterisk.c:314</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a81b4b1c3c855fb371e7723b473f1ee78"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a81b4b1c3c855fb371e7723b473f1ee78">version</a></div><div class="ttdeci">static char version[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00391">chan_ooh323.c:391</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343ae6e12c269763841877fc651c0cbc7c52"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343ae6e12c269763841877fc651c0cbc7c52">AST_OPT_FLAG_INIT_KEYS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00050">options.h:50</a></div></div>
<div class="ttc" id="asterisk_8c_html_aebef75d1917768a6921d6157becf0780"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#aebef75d1917768a6921d6157becf0780">set_icon</a></div><div class="ttdeci">static void set_icon(char *text)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01729">asterisk.c:1729</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="asterisk_8c_html_a8f0bd75717a5fd70f289769dd7698339"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a8f0bd75717a5fd70f289769dd7698339">ast_remotecontrol</a></div><div class="ttdeci">static void ast_remotecontrol(char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03143">asterisk.c:3143</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="asterisk_8c_html_a7eae484e1a5e9cfb728cf9e4aea88fc7"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a7eae484e1a5e9cfb728cf9e4aea88fc7">ast_console_puts</a></div><div class="ttdeci">void ast_console_puts(const char *string)</div><div class="ttdoc">write the string to the root console, and all attached network console clients </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01314">asterisk.c:1314</a></div></div>
<div class="ttc" id="asterisk_8c_html_a9d6508ab6069e90b2680429618326b3f"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9d6508ab6069e90b2680429618326b3f">safe_exec_prep</a></div><div class="ttdeci">static pid_t safe_exec_prep(int dualfork)</div><div class="ttdoc">fork and perform other preparations for spawning applications </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01093">asterisk.c:1093</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structgroup_html"><div class="ttname"><a href="../../d3/d08/structgroup.html">group</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d35/func__dialgroup_8c_source.html#l00084">func_dialgroup.c:84</a></div></div>
<div class="ttc" id="asterisk_8c_html_a7440e4273bc09db8927cebbfe6adfdbe"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a7440e4273bc09db8927cebbfe6adfdbe">read_credentials</a></div><div class="ttdeci">static int read_credentials(int fd, char *buffer, size_t size, struct console *con)</div><div class="ttdoc">read() function supporting the reception of user credentials. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01336">asterisk.c:1336</a></div></div>
<div class="ttc" id="asterisk_8c_html_aa1b8f26984e7b4f8359502eec3a8cd24"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#aa1b8f26984e7b4f8359502eec3a8cd24">handle_clear_profile</a></div><div class="ttdeci">static char * handle_clear_profile(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00904">asterisk.c:904</a></div></div>
<div class="ttc" id="term_8h_html_a11b0efffc76ab7f40399993cb468e46a"><div class="ttname"><a href="../../db/d45/term_8h.html#a11b0efffc76ab7f40399993cb468e46a">ast_term_reset</a></div><div class="ttdeci">const char * ast_term_reset(void)</div><div class="ttdoc">Returns the terminal reset code. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de5/term_8c_source.html#l00306">term.c:306</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343a303915e0a28761be8b90018495d0a9ec"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a303915e0a28761be8b90018495d0a9ec">AST_OPT_FLAG_NO_COLOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00056">options.h:56</a></div></div>
<div class="ttc" id="asterisk_8c_html_a4cf123ec6105d24d21de01a951b46b17"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a4cf123ec6105d24d21de01a951b46b17">asterisk_daemon</a></div><div class="ttdeci">static void asterisk_daemon(int isroot, const char *runuser, const char *rungroup)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03947">asterisk.c:3947</a></div></div>
<div class="ttc" id="asterisk_8c_html_acd2b29cf44212391e7c62499f7394db5"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#acd2b29cf44212391e7c62499f7394db5">handle_show_profile</a></div><div class="ttdeci">static char * handle_show_profile(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00869">asterisk.c:869</a></div></div>
<div class="ttc" id="uuid_8h_html_abe6d0b550cd9a54964e7891960d1e5bc"><div class="ttname"><a href="../../dd/d1d/uuid_8h.html#abe6d0b550cd9a54964e7891960d1e5bc">ast_uuid_generate_str</a></div><div class="ttdeci">char * ast_uuid_generate_str(char *buf, size_t size)</div><div class="ttdoc">Generate a UUID string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/da9/uuid_8c_source.html#l00143">uuid.c:143</a></div></div>
<div class="ttc" id="asterisk_8c_html_a0eb0441c04955094ce5845fb0258645a"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a0eb0441c04955094ce5845fb0258645a">ast_shutdown_final</a></div><div class="ttdeci">int ast_shutdown_final(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01829">asterisk.c:1829</a></div></div>
<div class="ttc" id="xmldoc_8h_html"><div class="ttname"><a href="../../d1/d99/xmldoc_8h.html">xmldoc.h</a></div><div class="ttdoc">Asterisk XML Documentation API. </div></div>
<div class="ttc" id="__private_8h_html_a882bf438d813b4a9d27d8effcd4ad174"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a882bf438d813b4a9d27d8effcd4ad174">ast_rtp_engine_init</a></div><div class="ttdeci">int ast_rtp_engine_init(void)</div><div class="ttdoc">initializes the rtp engine arrays </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03622">rtp_engine.c:3622</a></div></div>
<div class="ttc" id="__private_8h_html"><div class="ttname"><a href="../../d4/d78/__private_8h.html">_private.h</a></div><div class="ttdoc">Prototypes for public functions only of internal interest,. </div></div>
<div class="ttc" id="asterisk_8c_html_ab2acd3f561950f0ab6546314677ad57d"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ab2acd3f561950f0ab6546314677ad57d">canary_pid</a></div><div class="ttdeci">static int canary_pid</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00386">asterisk.c:386</a></div></div>
<div class="ttc" id="asterisk_8c_html_aa405c1064890ab81b6d56c27d8e645ac"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#aa405c1064890ab81b6d56c27d8e645ac">SHUTDOWN_TIMEOUT</a></div><div class="ttdeci">#define SHUTDOWN_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01878">asterisk.c:1878</a></div></div>
<div class="ttc" id="paths_8h_html_a95c5b4ffe620dc96d1ea9311b35c4d4f"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a95c5b4ffe620dc96d1ea9311b35c4d4f">ast_config_AST_SPOOL_DIR</a></div><div class="ttdeci">const char * ast_config_AST_SPOOL_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00154">options.c:154</a></div></div>
<div class="ttc" id="options_8h_html_a8d91ba28757f5a3b942673cd8dda40ae"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a8d91ba28757f5a3b942673cd8dda40ae">ast_opt_always_fork</a></div><div class="ttdeci">#define ast_opt_always_fork</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00126">options.h:126</a></div></div>
<div class="ttc" id="localtime_8h_html_aa8e63928b14a347bd3973d680b885f93"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a></div><div class="ttdeci">int ast_strftime(char *buf, size_t len, const char *format, const struct ast_tm *tm)</div><div class="ttdoc">Special version of strftime(3) that handles fractions of a second. Takes the same arguments as strfti...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02524">localtime.c:2524</a></div></div>
<div class="ttc" id="term_8h_html_aa86a4efe2acaee184cf754ccc5248599"><div class="ttname"><a href="../../db/d45/term_8h.html#aa86a4efe2acaee184cf754ccc5248599">ast_term_color</a></div><div class="ttdeci">const char * ast_term_color(int fgcolor, int bgcolor)</div><div class="ttdoc">Return a color sequence string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de5/term_8c_source.html#l00290">term.c:290</a></div></div>
<div class="ttc" id="structconsole_html_af74c640613d859156463a4ba7436f023"><div class="ttname"><a href="../../df/d87/structconsole.html#af74c640613d859156463a4ba7436f023">console::levels</a></div><div class="ttdeci">int levels[NUMLOGLEVELS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00323">asterisk.c:323</a></div></div>
<div class="ttc" id="asterisk_8c_html_a48b71b849c3bd235fa38ea4eb5411b43"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a48b71b849c3bd235fa38ea4eb5411b43">child_handler</a></div><div class="ttdeci">static struct sigaction child_handler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01717">asterisk.c:1717</a></div></div>
<div class="ttc" id="__private_8h_html_a29011844a44a126bacfb81e3bddabaad"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a29011844a44a126bacfb81e3bddabaad">logger_queue_start</a></div><div class="ttdeci">void logger_queue_start(void)</div><div class="ttdoc">Start the ast_queue_log() logger. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l01854">logger.c:1854</a></div></div>
<div class="ttc" id="asterisk_8c_html_a302c7c993903d5596dcada4e41db65f4"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a302c7c993903d5596dcada4e41db65f4">main_atexit</a></div><div class="ttdeci">static void main_atexit(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03487">asterisk.c:3487</a></div></div>
<div class="ttc" id="astdb_8h_html_a6ab91701fa0db9fad7759fe42a581c17"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a></div><div class="ttdeci">int ast_db_get(const char *family, const char *key, char *value, int valuelen)</div><div class="ttdoc">Get key value specified by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00412">main/db.c:412</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="vector_8h_html_ad6ca5d1cf84a649801a2775c3b81da62"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad6ca5d1cf84a649801a2775c3b81da62">AST_VECTOR_PTR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_PTR_FREE(vec)</div><div class="ttdoc">Deallocates this vector pointer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00189">vector.h:189</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="asterisk_8c_html_a36152b6805cc14c6a2a41c2d283b422a"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a36152b6805cc14c6a2a41c2d283b422a">safe_system_level</a></div><div class="ttdeci">static unsigned int safe_system_level</div><div class="ttdoc">Keep track of how many threads are currently trying to wait*() on a child process. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01059">asterisk.c:1059</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="structprofile__entry_html_ac072af30c4ffbc834bb4c681f6ecb514"><div class="ttname"><a href="../../da/d4e/structprofile__entry.html#ac072af30c4ffbc834bb4c681f6ecb514">profile_entry::value</a></div><div class="ttdeci">int64_t value</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00744">asterisk.c:744</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ac63e9e237da22b6faf3be4edfc4f5a11"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ac63e9e237da22b6faf3be4edfc4f5a11">AST_RWLIST_ENTRY</a></div><div class="ttdeci">#define AST_RWLIST_ENTRY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00414">linkedlists.h:414</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="asterisk_8c_html_ae24f1f9ea44fcce3affcb2137f593dc1"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ae24f1f9ea44fcce3affcb2137f593dc1">AF_LOCAL</a></div><div class="ttdeci">#define AF_LOCAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00292">asterisk.c:292</a></div></div>
<div class="ttc" id="threadstorage_8h_html_a3fb5391416c5bf7a18d5f7f7b84c4b81"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#a3fb5391416c5bf7a18d5f7f7b84c4b81">AST_THREADSTORAGE_CUSTOM</a></div><div class="ttdeci">#define AST_THREADSTORAGE_CUSTOM(a, b, c)</div><div class="ttdoc">Define a thread storage variable, with custom initialization and cleanup. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00109">threadstorage.h:109</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a39bacaabcacf47583204c7634e64a2a0"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a39bacaabcacf47583204c7634e64a2a0">CONFIG_STATUS_FILEMISSING</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEMISSING</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00058">include/asterisk/config.h:58</a></div></div>
<div class="ttc" id="utils_8h_html_ad5db11fa27352e2b9a3c669adc76955f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a></div><div class="ttdeci">struct ast_eid ast_eid_default</div><div class="ttdoc">Global EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00093">options.c:93</a></div></div>
<div class="ttc" id="asterisk_8h_html_a6d2a9d4bb3ad87d2d532018e5348dadb"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a6d2a9d4bb3ad87d2d532018e5348dadb">sched_setscheduler</a></div><div class="ttdeci">#define sched_setscheduler</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00049">asterisk.h:49</a></div></div>
<div class="ttc" id="strings_8h_html_a8239b9ad10367bfc936e9b60ff7706a8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a></div><div class="ttdeci">void ast_str_reset(struct ast_str *buf)</div><div class="ttdoc">Reset the content of a dynamic string. Useful before a series of ast_str_append. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00653">strings.h:653</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="__private_8h_html_adb76df37ea8ca7aae2791a447db82430"><div class="ttname"><a href="../../d4/d78/__private_8h.html#adb76df37ea8ca7aae2791a447db82430">ast_ssl_init</a></div><div class="ttdeci">int ast_ssl_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dda/libasteriskssl_8c_source.html#l00130">libasteriskssl.c:130</a></div></div>
<div class="ttc" id="__private_8h_html_a5bc910b5a37558aab197861a6820b8b8"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a5bc910b5a37558aab197861a6820b8b8">load_astmm_phase_2</a></div><div class="ttdeci">void load_astmm_phase_2(void)</div><div class="ttdoc">Initialize malloc debug phase 2. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01561">astmm.c:1561</a></div></div>
<div class="ttc" id="structprofile__entry_html"><div class="ttname"><a href="../../da/d4e/structprofile__entry.html">profile_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00740">asterisk.c:740</a></div></div>
<div class="ttc" id="asterisk_8c_html_a0e01e4a7836c72a22f08f824d366ffb0"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a0e01e4a7836c72a22f08f824d366ffb0">child_cap</a></div><div class="ttdeci">static cap_t child_cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00393">asterisk.c:393</a></div></div>
<div class="ttc" id="__private_8h_html_a9b2fd54beda5904b6ce50a06351bc8db"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a9b2fd54beda5904b6ce50a06351bc8db">clean_time_zones</a></div><div class="ttdeci">void clean_time_zones(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01590">localtime.c:1590</a></div></div>
<div class="ttc" id="asterisk_8h_html_a95d266ee6654ef26496356a20006c75c"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a95d266ee6654ef26496356a20006c75c">ast_pbx_init</a></div><div class="ttdeci">int ast_pbx_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08982">pbx.c:8982</a></div></div>
<div class="ttc" id="cli_8h_html_ab1d4a1fb19a2a81cc450e1173b346eca"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab1d4a1fb19a2a81cc450e1173b346eca">ast_cli_command_multiple_full</a></div><div class="ttdeci">int ast_cli_command_multiple_full(int uid, int gid, int fd, size_t size, const char *s)</div><div class="ttdoc">Executes multiple CLI commands Interpret strings separated by NULL and execute each one...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l03004">main/cli.c:3004</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="options_8h_html_a274e5a8fe9d6ccc24286203941e406b7"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a274e5a8fe9d6ccc24286203941e406b7">MAX_PJ_LOG_MAX_LEVEL</a></div><div class="ttdeci">#define MAX_PJ_LOG_MAX_LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00140">options.h:140</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="logger_8h_html_ae665bf123e3e1b721a4b170618153a45"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ae665bf123e3e1b721a4b170618153a45">VERBOSE_MAGIC2LEVEL</a></div><div class="ttdeci">#define VERBOSE_MAGIC2LEVEL(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00192">logger.h:192</a></div></div>
<div class="ttc" id="options_8h_html_a301d032d1d86ba46348691f6d135e98a"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a301d032d1d86ba46348691f6d135e98a">ast_opt_exec</a></div><div class="ttdeci">#define ast_opt_exec</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00113">options.h:113</a></div></div>
<div class="ttc" id="group__main__options_html_gaa5dba371db31dc4ebecdff7c929ff263"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaa5dba371db31dc4ebecdff7c929ff263">ast_options</a></div><div class="ttdeci">struct ast_flags ast_options</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00061">options.c:61</a></div></div>
<div class="ttc" id="__private_8h_html_ac1255fc570025089e11a688a2e38a7ff"><div class="ttname"><a href="../../d4/d78/__private_8h.html#ac1255fc570025089e11a688a2e38a7ff">load_pbx_app</a></div><div class="ttdeci">int load_pbx_app(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00511">pbx_app.c:511</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="asterisk_8c_html_a564debc26032b2a42212ac285b4113de"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a564debc26032b2a42212ac285b4113de">ast_console_toggle_mute</a></div><div class="ttdeci">void ast_console_toggle_mute(int fd, int silent)</div><div class="ttdoc">mute or unmute a console from logging </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01232">asterisk.c:1232</a></div></div>
<div class="ttc" id="asterisk_8c_html_a34ba5e4743afbb6fffbd2eb9900622ca"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a34ba5e4743afbb6fffbd2eb9900622ca">lthread</a></div><div class="ttdeci">static pthread_t lthread</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01324">asterisk.c:1324</a></div></div>
<div class="ttc" id="asterisk_8c_html_a4193798095f3247b047f09cb1cdf67a8"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a4193798095f3247b047f09cb1cdf67a8">set_header</a></div><div class="ttdeci">static void set_header(char *outbuf, int maxout, char level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02115">asterisk.c:2115</a></div></div>
<div class="ttc" id="__private_8h_html_a06393c3702f8ab3864a2fdd7857daa90"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a06393c3702f8ab3864a2fdd7857daa90">threadstorage_init</a></div><div class="ttdeci">void threadstorage_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d19/threadstorage_8c_source.html#l00035">threadstorage.c:35</a></div></div>
<div class="ttc" id="asterisk_8c_html_a5fdbbc0b9ac75fff436821b5c16c3442"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a5fdbbc0b9ac75fff436821b5c16c3442">fdprint</a></div><div class="ttdeci">static int fdprint(int fd, const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01036">asterisk.c:1036</a></div></div>
<div class="ttc" id="cli_8h_html"><div class="ttname"><a href="../../dc/db0/cli_8h.html">cli.h</a></div><div class="ttdoc">Standard Command Line Interface. </div></div>
<div class="ttc" id="asterisk_8c_html_a6314c179e2d65f03b48aab48fcfc430f"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a6314c179e2d65f03b48aab48fcfc430f">ast_el_initialize</a></div><div class="ttdeci">static int ast_el_initialize(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03023">asterisk.c:3023</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="json_8h_html_ad0a0a0298b611bf140c18c8870c23893"><div class="ttname"><a href="../../d4/d05/json_8h.html#ad0a0a0298b611bf140c18c8870c23893">ast_json_init</a></div><div class="ttdeci">int ast_json_init(void)</div><div class="ttdoc">Initialize the JSON library. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00705">json.c:705</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="logger_8h_html_aa11fae1314f286da3d57ae8c07ec4bca"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aa11fae1314f286da3d57ae8c07ec4bca">__LOG_VERBOSE</a></div><div class="ttdeci">#define __LOG_VERBOSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00295">logger.h:295</a></div></div>
<div class="ttc" id="asterisk_8c_html_aac8d6a969414c09eb22e50714079b79b"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#aac8d6a969414c09eb22e50714079b79b">register_atexit</a></div><div class="ttdeci">static int register_atexit(void(*func)(void), int is_cleanup)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00993">asterisk.c:993</a></div></div>
<div class="ttc" id="strings_8h_html_a6c3dc0bad204e9dd9890325c1c861e38"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a></div><div class="ttdeci">int attribute_pure ast_false(const char *val)</div><div class="ttdoc">Make sure something is false. Determine if a string containing a boolean value is &quot;false&quot;...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01968">main/utils.c:1968</a></div></div>
<div class="ttc" id="asterisk_8c_html_a410801e106c09f15f766d98f27b2852d"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a410801e106c09f15f766d98f27b2852d">ast_safe_execvp</a></div><div class="ttdeci">int ast_safe_execvp(int dualfork, const char *file, char *const argv[])</div><div class="ttdoc">Safely spawn an external program while closing file descriptors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01180">asterisk.c:1180</a></div></div>
<div class="ttc" id="paths_8h_html_a2f174d3a0019aa9eecb92b83a463e9a6"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a2f174d3a0019aa9eecb92b83a463e9a6">ast_config_AST_SOCKET</a></div><div class="ttdeci">const char * ast_config_AST_SOCKET</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00167">options.c:167</a></div></div>
<div class="ttc" id="mwi_8h_html"><div class="ttname"><a href="../../dc/d33/mwi_8h.html">mwi.h</a></div><div class="ttdoc">Asterisk MWI API. </div></div>
<div class="ttc" id="__private_8h_html_a0ede7ff922fb2764dfd455e49dc59bc8"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a0ede7ff922fb2764dfd455e49dc59bc8">dnsmgr_start_refresh</a></div><div class="ttdeci">void dnsmgr_start_refresh(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00302">dnsmgr.c:302</a></div></div>
<div class="ttc" id="hsearch_8c_html_ad0f0f85b3cab490a81baa02c4b9edf45"><div class="ttname"><a href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a></div><div class="ttdeci">static ENTRY retval</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d37/hsearch_8c_source.html#l00050">hsearch.c:50</a></div></div>
<div class="ttc" id="asterisk_8c_html_a8912c9eedfa2f08023a2a0901bac3af3"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a8912c9eedfa2f08023a2a0901bac3af3">MAX_HISTORY_COMMAND_LENGTH</a></div><div class="ttdeci">#define MAX_HISTORY_COMMAND_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03076">asterisk.c:3076</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="asterisk_8c_html_a6b112b17aed018d85c397e7591948793"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a6b112b17aed018d85c397e7591948793">ast_shutting_down</a></div><div class="ttdeci">int ast_shutting_down(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01834">asterisk.c:1834</a></div></div>
<div class="ttc" id="asterisk_8h_html_aa074a86999c2684cd7ed271c4d275081"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#aa074a86999c2684cd7ed271c4d275081">setpriority</a></div><div class="ttdeci">#define setpriority</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00048">asterisk.h:48</a></div></div>
<div class="ttc" id="structconsole_html_aa49d6a06775253352589280dc7f30018"><div class="ttname"><a href="../../df/d87/structconsole.html#aa49d6a06775253352589280dc7f30018">console::t</a></div><div class="ttdeci">pthread_t t</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00319">asterisk.c:319</a></div></div>
<div class="ttc" id="asterisk_8c_html_aaa1dc0162e321990505b87af8c8f7d50"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#aaa1dc0162e321990505b87af8c8f7d50">can_safely_quit</a></div><div class="ttdeci">static int can_safely_quit(shutdown_nice_t niceness, int restart)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01921">asterisk.c:1921</a></div></div>
<div class="ttc" id="structprofile__data_html"><div class="ttname"><a href="../../dc/d6f/structprofile__data.html">profile_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00748">asterisk.c:748</a></div></div>
<div class="ttc" id="asterisk_8c_html_a9fb5cf0385848033ee3e98625e5f9784"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9fb5cf0385848033ee3e98625e5f9784">ast_safe_system</a></div><div class="ttdeci">int ast_safe_system(const char *s)</div><div class="ttdoc">Safely spawn an OS shell command while closing file descriptors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01193">asterisk.c:1193</a></div></div>
<div class="ttc" id="structast__atexit_html_a87cc763359903cf60b8a9f1b367476e8"><div class="ttname"><a href="../../d0/d68/structast__atexit.html#a87cc763359903cf60b8a9f1b367476e8">ast_atexit::func</a></div><div class="ttdeci">void(* func)(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00329">asterisk.c:329</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0aec28074ae9e42a635acf7995b14793"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0aec28074ae9e42a635acf7995b14793">AST_RTP_PT_LAST_REASSIGN</a></div><div class="ttdeci">#define AST_RTP_PT_LAST_REASSIGN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00095">rtp_engine.h:95</a></div></div>
<div class="ttc" id="res__adsi_8c_html_ac7af894858cf396a219d632f40afdc8d"><div class="ttname"><a href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a></div><div class="ttdeci">static int total</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d27/res__adsi_8c_source.html#l00968">res_adsi.c:968</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a1b83df0dadc999c990245143b83292a0"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a1b83df0dadc999c990245143b83292a0">hostname</a></div><div class="ttdeci">static struct ast_str * hostname</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00077">cdr_mysql.c:77</a></div></div>
<div class="ttc" id="asterisk_8c_html_a0de92246f6a87060b319bf4a27c2737d"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a0de92246f6a87060b319bf4a27c2737d">ast_socket_is_sd</a></div><div class="ttdeci">static int ast_socket_is_sd</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00313">asterisk.c:313</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40e0da58ab6964e3264b90f79ad6d476"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40e0da58ab6964e3264b90f79ad6d476">getloadavg</a></div><div class="ttdeci">int getloadavg(double *list, int nelem)</div></div>
<div class="ttc" id="group__main__options_html_ga2834e29d260312cf03f1e463a112631b"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#ga2834e29d260312cf03f1e463a112631b">ast_option_rtpusedynamic</a></div><div class="ttdeci">int ast_option_rtpusedynamic</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00088">options.c:88</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343afa8b350fb1896cad6eef4ef5a0a9d00d"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343afa8b350fb1896cad6eef4ef5a0a9d00d">AST_OPT_FLAG_REMOTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00052">options.h:52</a></div></div>
<div class="ttc" id="asterisk_8c_html_a828de0b261785adf20714bbcdf9391c6"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a828de0b261785adf20714bbcdf9391c6">handle_version</a></div><div class="ttdeci">static char * handle_version(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02290">asterisk.c:2290</a></div></div>
<div class="ttc" id="__private_8h_html_a19ce35b5edad956ec349975bdefb4d76"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a19ce35b5edad956ec349975bdefb4d76">load_modules</a></div><div class="ttdeci">int load_modules(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d96/loader_8c_source.html#l02338">loader.c:2338</a></div></div>
<div class="ttc" id="structast__cli__args_html"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html">ast_cli_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00158">cli.h:158</a></div></div>
<div class="ttc" id="options_8h_html"><div class="ttname"><a href="../../d7/d5b/options_8h.html">options.h</a></div><div class="ttdoc">Options provided by main asterisk program. </div></div>
<div class="ttc" id="asterisk_8c_html_a7f60f486e8e4a322ae5132d791a94bcc"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a7f60f486e8e4a322ae5132d791a94bcc">ast_unregister_atexit</a></div><div class="ttdeci">void ast_unregister_atexit(void(*func)(void))</div><div class="ttdoc">Unregister a function registered with ast_register_atexit(). </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01022">asterisk.c:1022</a></div></div>
<div class="ttc" id="asterisk_8c_html_a75887fd405b024a9f8a2067fa051d781"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a75887fd405b024a9f8a2067fa051d781">CHAR_TO_LIBEDIT</a></div><div class="ttdeci">#define CHAR_TO_LIBEDIT(c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02620">asterisk.c:2620</a></div></div>
<div class="ttc" id="asterisk_8c_html_a9a28eb590fad0670d6a05fb703f4f0cd"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9a28eb590fad0670d6a05fb703f4f0cd">consolehandler</a></div><div class="ttdeci">static void consolehandler(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02244">asterisk.c:2244</a></div></div>
<div class="ttc" id="structast__fdset_html"><div class="ttname"><a href="../../dc/d81/structast__fdset.html">ast_fdset</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/select_8h_source.html#l00042">select.h:42</a></div></div>
<div class="ttc" id="asterisk_8c_html_a5140408e6e156df6199d396995663335"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a5140408e6e156df6199d396995663335">has_priority</a></div><div class="ttdeci">static int has_priority(void)</div><div class="ttdoc">Check whether we were set to high(er) priority. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01736">asterisk.c:1736</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_a77f17ed4771a558a0f16e5f3aecee222"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#a77f17ed4771a558a0f16e5f3aecee222">WEXITSTATUS</a></div><div class="ttdeci">#define WEXITSTATUS(status)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/main_2stdtime_2private_8h_source.html#l00108">main/stdtime/private.h:108</a></div></div>
<div class="ttc" id="term_8h_html"><div class="ttname"><a href="../../db/d45/term_8h.html">term.h</a></div><div class="ttdoc">Handy terminal functions for vt* terms. </div></div>
<div class="ttc" id="astdb_8h_html_a0f14f6bff4f412c88b50aba34d3a5e35"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a></div><div class="ttdeci">int ast_db_put(const char *family, const char *key, const char *value)</div><div class="ttdoc">Store value addressed by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00327">main/db.c:327</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a1c8b16a3abcb4dc450a0a62b42c554dd"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a1c8b16a3abcb4dc450a0a62b42c554dd">setenv</a></div><div class="ttdeci">int setenv(const char *name, const char *value, int overwrite)</div></div>
<div class="ttc" id="time_8h_html_aa13b651c18bc6004cab21ac041d44dd8"><div class="ttname"><a href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a></div><div class="ttdeci">struct timeval ast_tvsub(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the difference of two timevals a - b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02298">extconf.c:2298</a></div></div>
<div class="ttc" id="app__queue_8c_html_acd1f0e9b4730ec60f62cb0806cb06ef1"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a></div><div class="ttdeci">enum queue_result id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01507">app_queue.c:1507</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="asterisk_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00040">asterisk.h:40</a></div></div>
<div class="ttc" id="asterisk_8c_html_a9b4ad2e6c395e6cc57ad14dc70365d59ad56f4e18962cb2a4927acb257b5e40f6"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59ad56f4e18962cb2a4927acb257b5e40f6">NOT_SHUTTING_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00358">asterisk.c:358</a></div></div>
<div class="ttc" id="__private_8h_html_a14d1423f33a1d054171143c28490368f"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a14d1423f33a1d054171143c28490368f">ast_timing_init</a></div><div class="ttdeci">int ast_timing_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00289">timing.c:289</a></div></div>
<div class="ttc" id="asterisk_8c_html_af59e664e072227c9f6a77d1d0352e62b"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#af59e664e072227c9f6a77d1d0352e62b">null_sig_handler</a></div><div class="ttdeci">static struct sigaction null_sig_handler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01046">asterisk.c:1046</a></div></div>
<div class="ttc" id="channel_8h_html_a7d555920d6a7169e88251888010bf4de"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7d555920d6a7169e88251888010bf4de">ast_undestroyed_channels</a></div><div class="ttdeci">int ast_undestroyed_channels(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00504">channel.c:504</a></div></div>
<div class="ttc" id="asterisk_8c_html_a27fdbb6caaef2f56f1379c779c1e74b5"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a27fdbb6caaef2f56f1379c779c1e74b5">remoteconsolehandler</a></div><div class="ttdeci">static int remoteconsolehandler(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02262">asterisk.c:2262</a></div></div>
<div class="ttc" id="asterisk_8c_html_a461f6bc3b4edc52e5c04284f13e8d8dc"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a461f6bc3b4edc52e5c04284f13e8d8dc">CMD_MATCHESARRAY</a></div><div class="ttdeci">#define CMD_MATCHESARRAY</div></div>
<div class="ttc" id="__private_8h_html_a581d248a533ff2761c1e820697ad3161"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a581d248a533ff2761c1e820697ad3161">load_pbx_functions_cli</a></div><div class="ttdeci">int load_pbx_functions_cli(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00732">pbx_functions.c:732</a></div></div>
<div class="ttc" id="asterisk_8c_html_a162ffd8e3544ee0038895ad79971dc8a"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a162ffd8e3544ee0038895ad79971dc8a">show_license</a></div><div class="ttdeci">static char * show_license(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02536">asterisk.c:2536</a></div></div>
<div class="ttc" id="asterisk_8c_html_a299365a3d8977a6c410c6cd924e33136"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a></div><div class="ttdeci">static struct ast_str * prompt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02725">asterisk.c:2725</a></div></div>
<div class="ttc" id="asterisk_8c_html_ab24464bfc7f3af1c20fdd18deb3c8aab"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ab24464bfc7f3af1c20fdd18deb3c8aab">need_quit_handler</a></div><div class="ttdeci">unsigned int need_quit_handler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00400">asterisk.c:400</a></div></div>
<div class="ttc" id="__private_8h_html_a1d5619ebb98bc129dfadf3a7a565f412"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a1d5619ebb98bc129dfadf3a7a565f412">ast_msg_shutdown</a></div><div class="ttdeci">void ast_msg_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01689">message.c:1689</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343a48c2766ad365c08930d7966fbcde4dd6"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a48c2766ad365c08930d7966fbcde4dd6">AST_OPT_FLAG_TRANSMIT_SILENCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00074">options.h:74</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343ade4cf3231c69af57ad0527bd46244680"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343ade4cf3231c69af57ad0527bd46244680">AST_OPT_FLAG_FULLY_BOOTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00058">options.h:58</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343a3ee00a27b39985b8f392ef8bc082173f"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a3ee00a27b39985b8f392ef8bc082173f">AST_OPT_FLAG_NO_FORK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00042">options.h:42</a></div></div>
<div class="ttc" id="asterisk_8c_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03492">asterisk.c:3492</a></div></div>
<div class="ttc" id="asterisk_8c_html_a8fbb0f40e9c839384d728aa8e0958dfb"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a8fbb0f40e9c839384d728aa8e0958dfb">restartnow</a></div><div class="ttdeci">static int restartnow</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00383">asterisk.c:383</a></div></div>
<div class="ttc" id="asterisk_8c_html_a31165a09181d49dfcbdadaa2223c5479"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a31165a09181d49dfcbdadaa2223c5479">safe_exec_wait</a></div><div class="ttdeci">static int safe_exec_wait(pid_t pid)</div><div class="ttdoc">wait for spawned application to complete and unreplace sigchld </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01154">asterisk.c:1154</a></div></div>
<div class="ttc" id="asterisk_8c_html_a527aad812c87964e08ac9d7b288e28ec"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a527aad812c87964e08ac9d7b288e28ec">need_el_end</a></div><div class="ttdeci">unsigned int need_el_end</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00401">asterisk.c:401</a></div></div>
<div class="ttc" id="structconsole_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../df/d87/structconsole.html#a6f8059414f0228f0256115e024eeed4b">console::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00317">asterisk.c:317</a></div></div>
<div class="ttc" id="asterisk_8c_html_a394b9a2f5196f841e9e1e8acd83f92b2"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a394b9a2f5196f841e9e1e8acd83f92b2">sig_flags</a></div><div class="ttdeci">static struct @337 sig_flags</div></div>
<div class="ttc" id="asterisk_8c_html_a72d371bd0b4daedd44ad33b25dd52ca6"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a72d371bd0b4daedd44ad33b25dd52ca6">ast_network_puts</a></div><div class="ttdeci">static void ast_network_puts(const char *string)</div><div class="ttdoc">write the string to all attached console clients </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01298">asterisk.c:1298</a></div></div>
<div class="ttc" id="asterisk_8c_html_a9b4ad2e6c395e6cc57ad14dc70365d59a2a9246405d49261dae3926e7d5612d2c"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59a2a9246405d49261dae3926e7d5612d2c">SHUTDOWN_NORMAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00371">asterisk.c:371</a></div></div>
<div class="ttc" id="rtp__engine_8h_html"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html">rtp_engine.h</a></div><div class="ttdoc">Pluggable RTP Architecture. </div></div>
<div class="ttc" id="options_8h_html_a6b1d9f4913ebf24f80c68a75bb002700"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a6b1d9f4913ebf24f80c68a75bb002700">ast_opt_hide_connect</a></div><div class="ttdeci">#define ast_opt_hide_connect</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00132">options.h:132</a></div></div>
<div class="ttc" id="module_8h_html"><div class="ttname"><a href="../../d5/d16/module_8h.html">module.h</a></div><div class="ttdoc">Asterisk module definitions. </div></div>
<div class="ttc" id="asterisk_8c_html_a5c70f918dc3849f6f6e22425394ddb5f"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a5c70f918dc3849f6f6e22425394ddb5f">ASTERISK_PROMPT</a></div><div class="ttdeci">#define ASTERISK_PROMPT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02554">asterisk.c:2554</a></div></div>
<div class="ttc" id="asterisk_8h_html_ade4aafcd250b794e0fba6250c8b26a0b"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#ade4aafcd250b794e0fba6250c8b26a0b">ast_fd_init</a></div><div class="ttdeci">int ast_fd_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de7/astfd_8c_source.html#l00370">astfd.c:370</a></div></div>
<div class="ttc" id="paths_8h_html_ab6e1cd3d774ab1b31836a8777d3a812d"><div class="ttname"><a href="../../dd/df2/paths_8h.html#ab6e1cd3d774ab1b31836a8777d3a812d">ast_config_AST_VAR_DIR</a></div><div class="ttdeci">const char * ast_config_AST_VAR_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00157">options.c:157</a></div></div>
<div class="ttc" id="__private_8h_html_a9b09f889da3c4aa25ce350e3239e29d2"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a9b09f889da3c4aa25ce350e3239e29d2">ast_channels_init</a></div><div class="ttdeci">int ast_channels_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08109">channel.c:8109</a></div></div>
<div class="ttc" id="options_8h_html_a83121f1ce9acec9e71313b69066aaf79"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a83121f1ce9acec9e71313b69066aaf79">ast_opt_mute</a></div><div class="ttdeci">#define ast_opt_mute</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00127">options.h:127</a></div></div>
<div class="ttc" id="asterisk_8c_html_a9a6fe5060ef94ade0acae2ad7c982a68"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9a6fe5060ef94ade0acae2ad7c982a68">cli_asterisk_shutdown</a></div><div class="ttdeci">static struct ast_cli_entry cli_asterisk_shutdown[]</div><div class="ttdoc">Shutdown Asterisk CLI commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02564">asterisk.c:2564</a></div></div>
<div class="ttc" id="__private_8h_html_a7fa135bda8065ed90a142e5b5a49d013"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a7fa135bda8065ed90a142e5b5a49d013">load_pbx_builtins</a></div><div class="ttdeci">int load_pbx_builtins(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1d/pbx__builtins_8c_source.html#l01556">pbx_builtins.c:1556</a></div></div>
<div class="ttc" id="channel_8h_html_a9704ae96ab849e9e5a20040c13d29705"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9704ae96ab849e9e5a20040c13d29705">ast_active_channels</a></div><div class="ttdeci">int ast_active_channels(void)</div><div class="ttdoc">returns number of active/allocated channels </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00499">channel.c:499</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343a1ec197321d89052601ec7e5482009807"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343a1ec197321d89052601ec7e5482009807">AST_OPT_FLAG_EXEC_INCLUDES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00040">options.h:40</a></div></div>
<div class="ttc" id="options_8h_html_a93b280adefdad68d13fb557f495d2ead"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a93b280adefdad68d13fb557f495d2ead">ast_opt_no_fork</a></div><div class="ttdeci">#define ast_opt_no_fork</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00107">options.h:107</a></div></div>
<div class="ttc" id="astdb_8h_html"><div class="ttname"><a href="../../de/d4a/astdb_8h.html">astdb.h</a></div><div class="ttdoc">Persistant data storage (akin to *doze registry) </div></div>
<div class="ttc" id="__private_8h_html_a698f7bb2f1591726001330e95cc8950f"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a698f7bb2f1591726001330e95cc8950f">ast_msg_init</a></div><div class="ttdeci">int ast_msg_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01730">message.c:1730</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_aa5fda3caf01a15f80a9f2542ccc67b94"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#aa5fda3caf01a15f80a9f2542ccc67b94">WIFEXITED</a></div><div class="ttdeci">#define WIFEXITED(status)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/main_2stdtime_2private_8h_source.html#l00105">main/stdtime/private.h:105</a></div></div>
<div class="ttc" id="f2c_8h_html_ac6afabdc09a49a433ee19d8a9486056d"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a></div><div class="ttdeci">#define min(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00197">f2c.h:197</a></div></div>
<div class="ttc" id="asterisk_8c_html_a9b4ad2e6c395e6cc57ad14dc70365d59aa3d6008dbedd1154cfadf33b24f3efa6"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a9b4ad2e6c395e6cc57ad14dc70365d59aa3d6008dbedd1154cfadf33b24f3efa6">SHUTDOWN_REALLY_NICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00375">asterisk.c:375</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html">app.h</a></div><div class="ttdoc">Application convenience functions, designed to give consistent look and feel to Asterisk apps...</div></div>
<div class="ttc" id="asterisk_8c_html_a36814ac1908cc05a3bd075505323484c"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a36814ac1908cc05a3bd075505323484c">ast_network_puts_mutable</a></div><div class="ttdeci">static void ast_network_puts_mutable(const char *string, int level, int sublevel)</div><div class="ttdoc">log the string to all attached network console clients </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01255">asterisk.c:1255</a></div></div>
<div class="ttc" id="options_8h_html_a0c0575cf738010e8da8b1db869542493"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a0c0575cf738010e8da8b1db869542493">ast_opt_dump_core</a></div><div class="ttdeci">#define ast_opt_dump_core</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00119">options.h:119</a></div></div>
<div class="ttc" id="asterisk_8c_html_aec94f23bfed8fd1476e3c6f8b3dce3e0"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#aec94f23bfed8fd1476e3c6f8b3dce3e0">print_intro_message</a></div><div class="ttdeci">static void print_intro_message(const char *runuser, const char *rungroup)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03474">asterisk.c:3474</a></div></div>
<div class="ttc" id="asterisk_8c_html_a850def08dc62ba3f1c34d459ff9d37c5"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a850def08dc62ba3f1c34d459ff9d37c5">COPYRIGHT_TAG</a></div><div class="ttdeci">#define COPYRIGHT_TAG</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00300">asterisk.c:300</a></div></div>
<div class="ttc" id="__private_8h_html_ab9a2fcd7b22827d129fc37fc2777c6f4"><div class="ttname"><a href="../../d4/d78/__private_8h.html#ab9a2fcd7b22827d129fc37fc2777c6f4">load_pbx</a></div><div class="ttdeci">int load_pbx(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08460">pbx.c:8460</a></div></div>
<div class="ttc" id="stasis__endpoints_8h_html"><div class="ttname"><a href="../../d7/d44/stasis__endpoints_8h.html">stasis_endpoints.h</a></div><div class="ttdoc">Endpoint abstractions. </div></div>
<div class="ttc" id="group__main__options_html_gaa241e9e2481830111df49cf5addaab99"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaa241e9e2481830111df49cf5addaab99">ast_option_rtpptdynamic</a></div><div class="ttdeci">unsigned int ast_option_rtpptdynamic</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00089">options.c:89</a></div></div>
<div class="ttc" id="asterisk_8c_html_a8e450762024db98313129c1a2ea07d0c"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a8e450762024db98313129c1a2ea07d0c">ast_register_thread</a></div><div class="ttdeci">void ast_register_thread(char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00414">asterisk.c:414</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
<div class="ttc" id="__private_8h_html_a07bf5448c6189024cbc925a3e8ecb5e0"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a07bf5448c6189024cbc925a3e8ecb5e0">ast_process_pending_reloads</a></div><div class="ttdeci">void ast_process_pending_reloads(void)</div><div class="ttdoc">Process reload requests received during startup. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d96/loader_8c_source.html#l01407">loader.c:1407</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="asterisk_8c_html_ade931d879a5d2b6f4e91e16ded37cb74"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#ade931d879a5d2b6f4e91e16ded37cb74">really_quit</a></div><div class="ttdeci">static void really_quit(int num, shutdown_nice_t niceness, int restart)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02004">asterisk.c:2004</a></div></div>
<div class="ttc" id="lock_8h_html_ac840092853644cea0a186efdc58985f5"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac840092853644cea0a186efdc58985f5">AST_MUTEX_DEFINE_STATIC</a></div><div class="ttdeci">#define AST_MUTEX_DEFINE_STATIC(mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00518">lock.h:518</a></div></div>
<div class="ttc" id="__private_8h_html_a52d9808db8eba7a1ff32fc6686042f04"><div class="ttname"><a href="../../d4/d78/__private_8h.html#a52d9808db8eba7a1ff32fc6686042f04">astdb_init</a></div><div class="ttdeci">int astdb_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l01082">main/db.c:1082</a></div></div>
<div class="ttc" id="asterisk_8c_html_af97fa49b90705f0b818d7cc77aaae54c"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#af97fa49b90705f0b818d7cc77aaae54c">ast_profile</a></div><div class="ttdeci">int64_t ast_profile(int i, int64_t delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00794">asterisk.c:794</a></div></div>
<div class="ttc" id="asterisk_8c_html_a643319c1ef479a7d90ed02ec9c8b1a68"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a643319c1ef479a7d90ed02ec9c8b1a68">monitor_sig_flags</a></div><div class="ttdeci">static void * monitor_sig_flags(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l03370">asterisk.c:3370</a></div></div>
<div class="ttc" id="__private_8h_html_ade6dbc4196f2fc99250aaafededfb41b"><div class="ttname"><a href="../../d4/d78/__private_8h.html#ade6dbc4196f2fc99250aaafededfb41b">ast_cli_perms_init</a></div><div class="ttdeci">int ast_cli_perms_init(int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l02081">main/cli.c:2081</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a2e2efabbeb1c8c68790bb90ce01c4578"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a2e2efabbeb1c8c68790bb90ce01c4578">app_init</a></div><div class="ttdeci">int app_init(void)</div><div class="ttdoc">Initialize the application core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l03205">main/app.c:3205</a></div></div>
<div class="ttc" id="asterisk_8c_html_a080b9ad27161383b1b3f76f04b59753b"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a080b9ad27161383b1b3f76f04b59753b">ast_mark</a></div><div class="ttdeci">int64_t ast_mark(int i, int startstop)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00835">asterisk.c:835</a></div></div>
<div class="ttc" id="asterisk_8c_html_a1e7c04328076f732cc303a2c853466be"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a1e7c04328076f732cc303a2c853466be">ast_run_atexits</a></div><div class="ttdeci">static void ast_run_atexits(int run_cleanups)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00965">asterisk.c:965</a></div></div>
<div class="ttc" id="vector_8h_html_aeb9853664dde8a7df8bc7ea180d73d54"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a></div><div class="ttdeci">#define AST_VECTOR_CALLBACK_VOID(vec, callback,...)</div><div class="ttdoc">Execute a callback on every element in a vector disregarding callback return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00865">vector.h:865</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga546caee8e3d040d0074bc32e96d53b7d"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga546caee8e3d040d0074bc32e96d53b7d">ast_manager_publish_event</a></div><div class="ttdeci">void ast_manager_publish_event(const char *type, int class_type, struct ast_json *obj)</div><div class="ttdoc">Publish an event to AMI. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01903">manager.c:1903</a></div></div>
<div class="ttc" id="options_8h_html_a8445b47cb18dde73b1b233358a25ed68"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a8445b47cb18dde73b1b233358a25ed68">ast_opt_high_priority</a></div><div class="ttdeci">#define ast_opt_high_priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00110">options.h:110</a></div></div>
<div class="ttc" id="format__cache_8h_html"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html">format_cache.h</a></div><div class="ttdoc">Media Format Cache API. </div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="sorcery_8h_html"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html">sorcery.h</a></div><div class="ttdoc">Sorcery Data Access Layer API. </div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="asterisk_8c_html_a4840b412d71c9ff725760b9d5d3bfe25"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a4840b412d71c9ff725760b9d5d3bfe25">rdtsc</a></div><div class="ttdeci">static __inline uint64_t rdtsc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00828">asterisk.c:828</a></div></div>
<div class="ttc" id="paths_8h_html_a3c65414632642690e67a142dd9b594d3"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a3c65414632642690e67a142dd9b594d3">ast_config_AST_CTL_PERMISSIONS</a></div><div class="ttdeci">const char * ast_config_AST_CTL_PERMISSIONS</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00172">options.c:172</a></div></div>
<div class="ttc" id="http_8c_html_a6f25bc812d09fedb86bf394c01061c56"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a></div><div class="ttdeci">static char prefix[MAX_PREFIX]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00141">http.c:141</a></div></div>
<div class="ttc" id="group__main__options_html_gaf2588453b3a373a770741ad3ce353343afdbd86f6d03de205a8b2f7a8afc1d919"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaf2588453b3a373a770741ad3ce353343afdbd86f6d03de205a8b2f7a8afc1d919">AST_OPT_FLAG_DUMP_CORE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00064">options.h:64</a></div></div>
<div class="ttc" id="group__main__options_html_gaef564ce28f5579dcd6752b8c6f5318ba"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gaef564ce28f5579dcd6752b8c6f5318ba">option_trace</a></div><div class="ttdeci">int option_trace</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00071">options.c:71</a></div></div>
<div class="ttc" id="structast__tm_html"><div class="ttname"><a href="../../d5/d84/structast__tm.html">ast_tm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/deb/localtime_8h_source.html#l00035">localtime.h:35</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
<div class="ttc" id="paths_8h_html_af5c83ec4559539e0f9602d376a2fac2f"><div class="ttname"><a href="../../dd/df2/paths_8h.html#af5c83ec4559539e0f9602d376a2fac2f">ast_config_AST_CTL_OWNER</a></div><div class="ttdeci">const char * ast_config_AST_CTL_OWNER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00173">options.c:173</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:43:06 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
