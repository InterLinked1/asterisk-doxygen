<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: autoservice.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">autoservice.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Automatic channel service routines.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d78/__private_8h_source.html">asterisk/_private.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html">asterisk/frame.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d00/sched_8h_source.html">asterisk/sched.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d4d/file_8h_source.html">asterisk/file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d39/translate_8h_source.html">asterisk/translate.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d45/manager_8h_source.html">asterisk/manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/de7/chanvars_8h_source.html">asterisk/chanvars.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d0f/indications_8h_source.html">asterisk/indications.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for autoservice.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/de7/autoservice_8c__incl.png" border="0" usemap="#autoservice_8c" alt=""/></div>
<map name="autoservice_8c" id="autoservice_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="234,453,318,480"/>
<area shape="rect" id="node15" href="../../d4/d78/__private_8h.html" title="Prototypes for public functions only of internal interest,. " alt="" coords="235,80,373,107"/>
<area shape="rect" id="node16" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="1822,80,1933,107"/>
<area shape="rect" id="node17" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1141,155,1280,181"/>
<area shape="rect" id="node19" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="564,379,679,405"/>
<area shape="rect" id="node20" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="990,528,1103,555"/>
<area shape="rect" id="node25" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1681,453,1831,480"/>
<area shape="rect" id="node27" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1769,304,1895,331"/>
<area shape="rect" id="node28" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="2019,229,2165,256"/>
<area shape="rect" id="node38" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="2554,304,2699,331"/>
<area shape="rect" id="node41" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="2047,155,2174,181"/>
<area shape="rect" id="node44" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="3008,80,3115,107"/>
<area shape="rect" id="node47" href="../../db/d39/translate_8h.html" title="Support for translation of data formats. translate.c. " alt="" coords="2427,155,2573,181"/>
<area shape="rect" id="node50" href="../../d2/d0f/indications_8h.html" title="Tone Indication Support. " alt="" coords="803,304,959,331"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="35,528,189,555"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="703,528,841,555"/>
<area shape="rect" id="node12" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="214,528,349,555"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="39,603,185,629"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="975,603,1118,629"/>
<area shape="rect" id="node21" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2484,453,2641,480"/>
<area shape="rect" id="node23" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="1819,379,1949,405"/>
<area shape="rect" id="node35" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="195,304,357,331"/>
<area shape="rect" id="node39" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="2554,379,2689,405"/>
<area shape="rect" id="node42" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="1741,155,1921,181"/>
<area shape="rect" id="node43" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="1230,453,1370,480"/>
<area shape="rect" id="node18" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="635,304,779,331"/>
<area shape="rect" id="node22" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="1534,304,1693,331"/>
<area shape="rect" id="node24" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="926,379,1061,405"/>
<area shape="rect" id="node26" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="635,229,799,256"/>
<area shape="rect" id="node29" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="483,304,610,331"/>
<area shape="rect" id="node30" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="824,229,931,256"/>
<area shape="rect" id="node31" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="2277,379,2427,405"/>
<area shape="rect" id="node32" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="2190,229,2351,256"/>
<area shape="rect" id="node33" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="187,379,357,405"/>
<area shape="rect" id="node34" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="291,229,407,256"/>
<area shape="rect" id="node36" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="1584,229,1741,256"/>
<area shape="rect" id="node37" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1232,229,1357,256"/>
<area shape="rect" id="node40" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1057,229,1207,256"/>
<area shape="rect" id="node48" href="../../d2/d66/plc_8h.html" title="SpanDSP &#45; a series of DSP components for telephony. " alt="" coords="2528,229,2635,256"/>
<area shape="rect" id="node49" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="2659,229,2835,256"/>
</map>
</div>
</div>
<p><a href="../../d5/d66/autoservice_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d4a/structasent.html">asent</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dae/structaslist.html">aslist</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afa009c9fb25a81a911f9dfa5036115c3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d66/autoservice_8c.html#afa009c9fb25a81a911f9dfa5036115c3">MAX_AUTOMONS</a>&#160;&#160;&#160;1500</td></tr>
<tr class="separator:afa009c9fb25a81a911f9dfa5036115c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae6c85ee3595b7e9ee6fc072a3b7da814"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d66/autoservice_8c.html#ae6c85ee3595b7e9ee6fc072a3b7da814">ast_autoservice_chan_hangup_peer</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer)</td></tr>
<tr class="memdesc:ae6c85ee3595b7e9ee6fc072a3b7da814"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put chan into autoservice while hanging up peer.  <a href="#ae6c85ee3595b7e9ee6fc072a3b7da814">More...</a><br /></td></tr>
<tr class="separator:ae6c85ee3595b7e9ee6fc072a3b7da814"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae632a8d3a62413bb222d25988ea65058"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d66/autoservice_8c.html#ae632a8d3a62413bb222d25988ea65058">ast_autoservice_ignore</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a> ftype)</td></tr>
<tr class="memdesc:ae632a8d3a62413bb222d25988ea65058"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ignore certain frame types.  <a href="#ae632a8d3a62413bb222d25988ea65058">More...</a><br /></td></tr>
<tr class="separator:ae632a8d3a62413bb222d25988ea65058"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3322128c2188bf3d8405d7373c5c483"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d66/autoservice_8c.html#aa3322128c2188bf3d8405d7373c5c483">ast_autoservice_init</a> (void)</td></tr>
<tr class="separator:aa3322128c2188bf3d8405d7373c5c483"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a8f6a50f3db42cb40cad7cfbd1d54f9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d66/autoservice_8c.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="memdesc:a7a8f6a50f3db42cb40cad7cfbd1d54f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Automatically service a channel for us...  <a href="#a7a8f6a50f3db42cb40cad7cfbd1d54f9">More...</a><br /></td></tr>
<tr class="separator:a7a8f6a50f3db42cb40cad7cfbd1d54f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08bde7d8cf72457fc8c519a4443b413b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d66/autoservice_8c.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="memdesc:a08bde7d8cf72457fc8c519a4443b413b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop servicing a channel for us...  <a href="#a08bde7d8cf72457fc8c519a4443b413b">More...</a><br /></td></tr>
<tr class="separator:a08bde7d8cf72457fc8c519a4443b413b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58680bb1c6a4a041afa2c482928bc4fb"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d66/autoservice_8c.html#a58680bb1c6a4a041afa2c482928bc4fb">autoservice_run</a> (void *ign)</td></tr>
<tr class="separator:a58680bb1c6a4a041afa2c482928bc4fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5b85de4352baf982ae5308b31ff994b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d66/autoservice_8c.html#ad5b85de4352baf982ae5308b31ff994b">autoservice_shutdown</a> (void)</td></tr>
<tr class="separator:ad5b85de4352baf982ae5308b31ff994b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1e82c20db7f5c906994e485b217ec72c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d66/autoservice_8c.html#a1e82c20db7f5c906994e485b217ec72c">as_chan_list_state</a></td></tr>
<tr class="separator:a1e82c20db7f5c906994e485b217ec72c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7704b73cf5cce4a768fbac243b94b543"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d66/autoservice_8c.html#a7704b73cf5cce4a768fbac243b94b543">as_cond</a></td></tr>
<tr class="separator:a7704b73cf5cce4a768fbac243b94b543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaecd80d565174f30d2f28f1bc421ad74"><td class="memItemLeft" align="right" valign="top">static volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d66/autoservice_8c.html#aaecd80d565174f30d2f28f1bc421ad74">asexit</a> = 0</td></tr>
<tr class="separator:aaecd80d565174f30d2f28f1bc421ad74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99f14adf00e39550a6cbe6a3d81d5cba"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/dae/structaslist.html">aslist</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d66/autoservice_8c.html#a99f14adf00e39550a6cbe6a3d81d5cba">aslist</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a99f14adf00e39550a6cbe6a3d81d5cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad780520c699a6c8102269e53c8119c96"><td class="memItemLeft" align="right" valign="top">static pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a> = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td></tr>
<tr class="separator:ad780520c699a6c8102269e53c8119c96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Automatic channel service routines. </p>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a> </dd>
<dd>
Russell Bryant <a href="#" onclick="location.href='mai'+'lto:'+'rus'+'se'+'ll@'+'di'+'giu'+'m.'+'com'; return false;">russe<span style="display: none;">.nosp@m.</span>ll@d<span style="display: none;">.nosp@m.</span>igium<span style="display: none;">.nosp@m.</span>.com</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d5/d66/autoservice_8c_source.html">autoservice.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afa009c9fb25a81a911f9dfa5036115c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa009c9fb25a81a911f9dfa5036115c3">&#9670;&nbsp;</a></span>MAX_AUTOMONS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_AUTOMONS&#160;&#160;&#160;1500</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00052">52</a> of file <a class="el" href="../../d5/d66/autoservice_8c_source.html">autoservice.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00078">autoservice_run()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae6c85ee3595b7e9ee6fc072a3b7da814"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6c85ee3595b7e9ee6fc072a3b7da814">&#9670;&nbsp;</a></span>ast_autoservice_chan_hangup_peer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_autoservice_chan_hangup_peer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Put chan into autoservice while hanging up peer. </p>
<dl class="section since"><dt>Since</dt><dd>11.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Chan to put into autoservice. </td></tr>
    <tr><td class="paramname">peer</td><td>Chan to run hangup handlers and hangup.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00342">342</a> of file <a class="el" href="../../d5/d66/autoservice_8c_source.html">autoservice.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">ast_autoservice_start()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00266">ast_autoservice_stop()</a>, and <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01339">app_exec()</a>, <a class="el" href="../../d5/d92/features_8c_source.html#l00528">bridge_failed_peer_goto()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06722">try_calling()</a>.</p>
<div class="fragment"><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <span class="keywordflow">if</span> (chan &amp;&amp; !<a class="code" href="../../d5/d66/autoservice_8c.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(chan)) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(peer);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <a class="code" href="../../d5/d66/autoservice_8c.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(peer);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;}</div><div class="ttc" id="autoservice_8c_html_a7a8f6a50f3db42cb40cad7cfbd1d54f9"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a></div><div class="ttdeci">int ast_autoservice_start(struct ast_channel *chan)</div><div class="ttdoc">Automatically service a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00200">autoservice.c:200</a></div></div>
<div class="ttc" id="autoservice_8c_html_a08bde7d8cf72457fc8c519a4443b413b"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a></div><div class="ttdeci">int ast_autoservice_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop servicing a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00266">autoservice.c:266</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae632a8d3a62413bb222d25988ea65058"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae632a8d3a62413bb222d25988ea65058">&#9670;&nbsp;</a></span>ast_autoservice_ignore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_autoservice_ignore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a>&#160;</td>
          <td class="paramname"><em>ftype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ignore certain frame types. </p>
<dl class="section note"><dt>Note</dt><dd>Normally, we cache DTMF, IMAGE, HTML, TEXT, and CONTROL frames while a channel is in autoservice and queue them up when taken out of autoservice. When this is not desireable, this API may be used to cause the channel to ignore those frametypes after the channel is put into autoservice, but before autoservice is stopped. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>channel is not in autoservice </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00352">352</a> of file <a class="el" href="../../d5/d66/autoservice_8c_source.html">autoservice.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00055">asent::chan</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00062">asent::ignore_frame_types</a>, and <a class="el" href="../../db/d4a/structasent.html#a7e9ab058282978b15c3414f44a65a687">asent::list</a>.</p>
<div class="fragment"><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;{</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d4a/structasent.html">asent</a> *as;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>, as, <a class="code" href="../../db/d4a/structasent.html#a7e9ab058282978b15c3414f44a65a687">list</a>) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">if</span> (as-&gt;<a class="code" href="../../db/d4a/structasent.html#a84d1435c5b8d387806714ea7079304b7">chan</a> == chan) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;         res = 0;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;         as-&gt;<a class="code" href="../../db/d4a/structasent.html#a064a64e35e8c6d944ad47eb55769daa5">ignore_frame_types</a> |= (1 &lt;&lt; ftype);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structasent_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../db/d4a/structasent.html#a84d1435c5b8d387806714ea7079304b7">asent::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00055">autoservice.c:55</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structasent_html"><div class="ttname"><a href="../../db/d4a/structasent.html">asent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00054">autoservice.c:54</a></div></div>
<div class="ttc" id="structaslist_html"><div class="ttname"><a href="../../d6/dae/structaslist.html">aslist</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00070">autoservice.c:70</a></div></div>
<div class="ttc" id="structasent_html_a064a64e35e8c6d944ad47eb55769daa5"><div class="ttname"><a href="../../db/d4a/structasent.html#a064a64e35e8c6d944ad47eb55769daa5">asent::ignore_frame_types</a></div><div class="ttdeci">unsigned int ignore_frame_types</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00062">autoservice.c:62</a></div></div>
<div class="ttc" id="structasent_html_a7e9ab058282978b15c3414f44a65a687"><div class="ttname"><a href="../../db/d4a/structasent.html#a7e9ab058282978b15c3414f44a65a687">asent::list</a></div><div class="ttdeci">struct asent::@346 list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3322128c2188bf3d8405d7373c5c483"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3322128c2188bf3d8405d7373c5c483">&#9670;&nbsp;</a></span>ast_autoservice_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_autoservice_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provided by autoservice.c </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00380">380</a> of file <a class="el" href="../../d5/d66/autoservice_8c_source.html">autoservice.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00071">as_cond</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00019">ast_register_cleanup()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00369">autoservice_shutdown()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03947">asterisk_daemon()</a>.</p>
<div class="fragment"><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;{</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../d5/d66/autoservice_8c.html#ad5b85de4352baf982ae5308b31ff994b">autoservice_shutdown</a>);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;<a class="code" href="../../d5/d66/autoservice_8c.html#a7704b73cf5cce4a768fbac243b94b543">as_cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;}</div><div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="autoservice_8c_html_ad5b85de4352baf982ae5308b31ff994b"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#ad5b85de4352baf982ae5308b31ff994b">autoservice_shutdown</a></div><div class="ttdeci">static void autoservice_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00369">autoservice.c:369</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="autoservice_8c_html_a7704b73cf5cce4a768fbac243b94b543"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#a7704b73cf5cce4a768fbac243b94b543">as_cond</a></div><div class="ttdeci">static ast_cond_t as_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00071">autoservice.c:71</a></div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a8f6a50f3db42cb40cad7cfbd1d54f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a8f6a50f3db42cb40cad7cfbd1d54f9">&#9670;&nbsp;</a></span>ast_autoservice_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_autoservice_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Automatically service a channel for us... </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure, or the channel is already being autoserviced </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">200</a> of file <a class="el" href="../../d5/d66/autoservice_8c_source.html">autoservice.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00071">as_cond</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01008">AST_FLAG_END_DTMF_ONLY</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00855">AST_LIST_REMOVE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00567">ast_pthread_create_background</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02996">ast_thread_is_user_interface()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00073">asthread</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00078">autoservice_run()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00055">asent::chan</a>, <a class="el" href="../../db/d4a/structasent.html#a7e9ab058282978b15c3414f44a65a687">asent::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00060">asent::orig_end_dtmf_flag</a>, and <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00059">asent::use_count</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d1b/app__macro_8c_source.html#l00236">_macro_exec()</a>, <a class="el" href="../../d2/d3c/func__curl_8c_source.html#l00663">acf_curl_helper()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01936">acf_jabberreceive_read()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00725">acf_odbc_read()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00509">acf_odbc_write()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02895">action_toggle_mute_participants()</a>, <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01339">app_exec()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00273">ast_app_exec_macro()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00370">ast_app_exec_sub()</a>, <a class="el" href="../../df/ddd/res__audiosocket_8c_source.html#l00099">ast_audiosocket_connect()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00342">ast_autoservice_chan_hangup_peer()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00981">ast_dtmf_stream()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>, <a class="el" href="../../d6/d76/srv_8c_source.html#l00260">ast_get_srv()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00995">ast_get_txt()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00967">ast_mf_stream()</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l00332">begin_dial_prerun()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01526">conf_play()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02544">confbridge_exec()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../d6/dde/pbx__lua_8c_source.html#l01405">exec()</a>, <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01033">findmeexec()</a>, <a class="el" href="../../db/d09/func__realtime_8c_source.html#l00182">function_realtime_read()</a>, <a class="el" href="../../db/d09/func__realtime_8c_source.html#l00412">function_realtime_readdestroy()</a>, <a class="el" href="../../db/d09/func__realtime_8c_source.html#l00364">function_realtime_store()</a>, <a class="el" href="../../db/d09/func__realtime_8c_source.html#l00249">function_realtime_write()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01679">join_conference_bridge()</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00410">lock_read()</a>, <a class="el" href="../../d6/dde/pbx__lua_8c_source.html#l00695">lua_autoservice_start()</a>, <a class="el" href="../../d6/dde/pbx__lua_8c_source.html#l00300">lua_get_variable_value()</a>, <a class="el" href="../../d6/dde/pbx__lua_8c_source.html#l00186">lua_pbx_exec()</a>, <a class="el" href="../../d6/dde/pbx__lua_8c_source.html#l00596">lua_set_variable()</a>, <a class="el" href="../../d6/dde/pbx__lua_8c_source.html#l00360">lua_set_variable_value()</a>, <a class="el" href="../../da/db1/app__originate_8c_source.html#l00173">originate_exec()</a>, <a class="el" href="../../d6/d27/app__osplookup_8c_source.html#l02337">osplookup_exec()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l02485">pbx_find_extension()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01923">playback_common()</a>, <a class="el" href="../../db/da3/conf__state__multi__marked_8c_source.html#l00182">post_join_play_begin()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01539">push_announcer()</a>, <a class="el" href="../../db/d09/func__realtime_8c_source.html#l00288">realtimefield_read()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l04639">ring_one()</a>, <a class="el" href="../../d2/d24/func__shell_8c_source.html#l00040">shell_helper()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l07006">sla_station_exec()</a>, <a class="el" href="../../d8/d96/res__smdi_8c_source.html#l01202">smdi_msg_retrieve_read()</a>, <a class="el" href="../../d9/d95/func__srv_8c_source.html#l00093">srv_datastore_setup()</a>, <a class="el" href="../../d8/d40/app__system_8c_source.html#l00115">system_exec_helper()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06722">try_calling()</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00422">trylock_read()</a>, and <a class="el" href="../../d9/d12/app__dial_8c_source.html#l01928">valid_priv_reply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d4a/structasent.html">asent</a> *as;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a015e7a1c3014aa7446f6e1696710088c">ast_thread_is_user_interface</a>()) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="comment">/* User interface threads do not handle channel media. */</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Thread is a user interface, not putting channel %s into autoservice\n&quot;</span>,</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>, as, <a class="code" href="../../db/d4a/structasent.html#a7e9ab058282978b15c3414f44a65a687">list</a>) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">if</span> (as-&gt;<a class="code" href="../../db/d4a/structasent.html#a84d1435c5b8d387806714ea7079304b7">chan</a> == chan) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;         as-&gt;<a class="code" href="../../db/d4a/structasent.html#a9dddf0b6c333316dd0671ea9191c666c">use_count</a>++;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <span class="keywordflow">if</span> (as) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="comment">/* Entry exists, autoservice is already handling this channel */</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <span class="keywordflow">if</span> (!(as = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*as))))</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   <span class="comment">/* New entry created */</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   as-&gt;<a class="code" href="../../db/d4a/structasent.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = <a class="code" href="../../db/d4a/structasent.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   as-&gt;<a class="code" href="../../db/d4a/structasent.html#a9dddf0b6c333316dd0671ea9191c666c">use_count</a> = 1;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   as-&gt;<a class="code" href="../../db/d4a/structasent.html#aa50829816f7602c8c61a07b3f694d42b">orig_end_dtmf_flag</a> = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a>) ? 1 : 0;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <span class="keywordflow">if</span> (!as-&gt;<a class="code" href="../../db/d4a/structasent.html#aa50829816f7602c8c61a07b3f694d42b">orig_end_dtmf_flag</a>)</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>) &amp;&amp; <a class="code" href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;<a class="code" href="../../d5/d66/autoservice_8c.html#a7704b73cf5cce4a768fbac243b94b543">as_cond</a>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>, as, <a class="code" href="../../db/d4a/structasent.html#a7e9ab058282978b15c3414f44a65a687">list</a>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a> == <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) { <span class="comment">/* need start the thread */</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a>(&amp;<a class="code" href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d66/autoservice_8c.html#a58680bb1c6a4a041afa2c482928bc4fb">autoservice_run</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create autoservice thread :(\n&quot;</span>);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;         <span class="comment">/* There will only be a single member in the list at this point,</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">            the one we just added. */</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>, as, <a class="code" href="../../db/d4a/structasent.html#a7e9ab058282978b15c3414f44a65a687">list</a>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(as);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;         <a class="code" href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;         res = -1;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;         pthread_kill(<a class="code" href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a>, SIGURG);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01008">channel.h:1008</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="autoservice_8c_html_a58680bb1c6a4a041afa2c482928bc4fb"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#a58680bb1c6a4a041afa2c482928bc4fb">autoservice_run</a></div><div class="ttdeci">static void * autoservice_run(void *ign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00078">autoservice.c:78</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa36e72b77f1b80881cd0a9fcca66ce19"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a></div><div class="ttdeci">#define AST_LIST_REMOVE(head, elm, field)</div><div class="ttdoc">Removes a specific entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00855">linkedlists.h:855</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="autoservice_8c_html_a7704b73cf5cce4a768fbac243b94b543"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#a7704b73cf5cce4a768fbac243b94b543">as_cond</a></div><div class="ttdeci">static ast_cond_t as_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00071">autoservice.c:71</a></div></div>
<div class="ttc" id="utils_8h_html_a595e2f8aa398f4bd21e381c3211235fe"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a></div><div class="ttdeci">#define ast_pthread_create_background(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00567">utils.h:567</a></div></div>
<div class="ttc" id="utils_8h_html_a015e7a1c3014aa7446f6e1696710088c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a015e7a1c3014aa7446f6e1696710088c">ast_thread_is_user_interface</a></div><div class="ttdeci">int ast_thread_is_user_interface(void)</div><div class="ttdoc">Indicates whether the current thread is a user interface. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02996">main/utils.c:2996</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structasent_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../db/d4a/structasent.html#a84d1435c5b8d387806714ea7079304b7">asent::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00055">autoservice.c:55</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="structasent_html_aa50829816f7602c8c61a07b3f694d42b"><div class="ttname"><a href="../../db/d4a/structasent.html#aa50829816f7602c8c61a07b3f694d42b">asent::orig_end_dtmf_flag</a></div><div class="ttdeci">unsigned int orig_end_dtmf_flag</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00060">autoservice.c:60</a></div></div>
<div class="ttc" id="structasent_html_a9dddf0b6c333316dd0671ea9191c666c"><div class="ttname"><a href="../../db/d4a/structasent.html#a9dddf0b6c333316dd0671ea9191c666c">asent::use_count</a></div><div class="ttdeci">unsigned int use_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00059">autoservice.c:59</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="autoservice_8c_html_ad780520c699a6c8102269e53c8119c96"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a></div><div class="ttdeci">static pthread_t asthread</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00073">autoservice.c:73</a></div></div>
<div class="ttc" id="structasent_html"><div class="ttname"><a href="../../db/d4a/structasent.html">asent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00054">autoservice.c:54</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structaslist_html"><div class="ttname"><a href="../../d6/dae/structaslist.html">aslist</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00070">autoservice.c:70</a></div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="structasent_html_a7e9ab058282978b15c3414f44a65a687"><div class="ttname"><a href="../../db/d4a/structasent.html#a7e9ab058282978b15c3414f44a65a687">asent::list</a></div><div class="ttdeci">struct asent::@346 list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a08bde7d8cf72457fc8c519a4443b413b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08bde7d8cf72457fc8c519a4443b413b">&#9670;&nbsp;</a></span>ast_autoservice_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_autoservice_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop servicing a channel for us... </p>
<dl class="section note"><dt>Note</dt><dd>if chan is locked prior to calling ast_autoservice_stop, it is likely that there will be a deadlock between the thread that calls ast_autoservice_stop and the autoservice thread. It is important that chan is not locked prior to this call</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>error, or the channel has been hungup </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00266">266</a> of file <a class="el" href="../../d5/d66/autoservice_8c_source.html">autoservice.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00076">as_chan_list_state</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00997">ast_channel_softhangup_internal_flag()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01008">AST_FLAG_END_DTMF_ONLY</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01144">ast_queue_frame_head()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02996">ast_thread_is_user_interface()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00073">asthread</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00055">asent::chan</a>, <a class="el" href="../../db/d4a/structasent.html#a77406089813b7edd02aca2a92777fb4b">asent::deferred_frames</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00062">asent::ignore_frame_types</a>, <a class="el" href="../../db/d4a/structasent.html#a7e9ab058282978b15c3414f44a65a687">asent::list</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00060">asent::orig_end_dtmf_flag</a>, and <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00059">asent::use_count</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d1b/app__macro_8c_source.html#l00236">_macro_exec()</a>, <a class="el" href="../../d2/d3c/func__curl_8c_source.html#l00663">acf_curl_helper()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01936">acf_jabberreceive_read()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00725">acf_odbc_read()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00509">acf_odbc_write()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02895">action_toggle_mute_participants()</a>, <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01339">app_exec()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01017">array()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00273">ast_app_exec_macro()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00370">ast_app_exec_sub()</a>, <a class="el" href="../../df/ddd/res__audiosocket_8c_source.html#l00099">ast_audiosocket_connect()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00342">ast_autoservice_chan_hangup_peer()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00981">ast_dtmf_stream()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>, <a class="el" href="../../d6/d76/srv_8c_source.html#l00260">ast_get_srv()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00995">ast_get_txt()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00967">ast_mf_stream()</a>, <a class="el" href="../../de/d43/dial_8c_source.html#l00332">begin_dial_prerun()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01526">conf_play()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02544">confbridge_exec()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../d6/dde/pbx__lua_8c_source.html#l01405">exec()</a>, <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01033">findmeexec()</a>, <a class="el" href="../../db/d09/func__realtime_8c_source.html#l00182">function_realtime_read()</a>, <a class="el" href="../../db/d09/func__realtime_8c_source.html#l00412">function_realtime_readdestroy()</a>, <a class="el" href="../../db/d09/func__realtime_8c_source.html#l00364">function_realtime_store()</a>, <a class="el" href="../../db/d09/func__realtime_8c_source.html#l00249">function_realtime_write()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01134">hangup_playback()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01679">join_conference_bridge()</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00410">lock_read()</a>, <a class="el" href="../../d6/dde/pbx__lua_8c_source.html#l00728">lua_autoservice_stop()</a>, <a class="el" href="../../d6/dde/pbx__lua_8c_source.html#l00300">lua_get_variable_value()</a>, <a class="el" href="../../d6/dde/pbx__lua_8c_source.html#l00186">lua_pbx_exec()</a>, <a class="el" href="../../d6/dde/pbx__lua_8c_source.html#l00596">lua_set_variable()</a>, <a class="el" href="../../d6/dde/pbx__lua_8c_source.html#l00360">lua_set_variable_value()</a>, <a class="el" href="../../da/db1/app__originate_8c_source.html#l00173">originate_exec()</a>, <a class="el" href="../../d6/d27/app__osplookup_8c_source.html#l02337">osplookup_exec()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l02485">pbx_find_extension()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01923">playback_common()</a>, <a class="el" href="../../db/da3/conf__state__multi__marked_8c_source.html#l00182">post_join_play_begin()</a>, <a class="el" href="../../db/d09/func__realtime_8c_source.html#l00288">realtimefield_read()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l04639">ring_one()</a>, <a class="el" href="../../d2/d24/func__shell_8c_source.html#l00040">shell_helper()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l07006">sla_station_exec()</a>, <a class="el" href="../../d8/d96/res__smdi_8c_source.html#l01202">smdi_msg_retrieve_read()</a>, <a class="el" href="../../d9/d95/func__srv_8c_source.html#l00093">srv_datastore_setup()</a>, <a class="el" href="../../d8/d40/app__system_8c_source.html#l00115">system_exec_helper()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06722">try_calling()</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00422">trylock_read()</a>, and <a class="el" href="../../d9/d12/app__dial_8c_source.html#l01928">valid_priv_reply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;{</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d4a/structasent.html">asent</a> *as, *removed = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   <span class="keywordtype">int</span> chan_list_state;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a015e7a1c3014aa7446f6e1696710088c">ast_thread_is_user_interface</a>()) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="comment">/* User interface threads do not handle channel media. */</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Thread is a user interface, not removing channel %s from autoservice\n&quot;</span>,</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   <span class="comment">/* Save the autoservice channel list state.  We _must_ verify that the channel</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">    * list has been rebuilt before we return.  Because, after we return, the channel</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">    * could get destroyed and we don&#39;t want our poor autoservice thread to step on</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">    * it after its gone! */</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   chan_list_state = <a class="code" href="../../d5/d66/autoservice_8c.html#a1e82c20db7f5c906994e485b217ec72c">as_chan_list_state</a>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <span class="comment">/* Find the entry, but do not free it because it still can be in the</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">      autoservice thread array */</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>, as, list) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">if</span> (as-&gt;<a class="code" href="../../db/d4a/structasent.html#a84d1435c5b8d387806714ea7079304b7">chan</a> == chan) {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;         as-&gt;<a class="code" href="../../db/d4a/structasent.html#a9dddf0b6c333316dd0671ea9191c666c">use_count</a>--;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;         <span class="keywordflow">if</span> (as-&gt;<a class="code" href="../../db/d4a/structasent.html#a9dddf0b6c333316dd0671ea9191c666c">use_count</a> &lt; 1) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(list);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            removed = as;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;         }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <span class="keywordflow">if</span> (removed &amp;&amp; <a class="code" href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      pthread_kill(<a class="code" href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a>, SIGURG);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   <span class="keywordflow">if</span> (!removed) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="comment">/* Wait while autoservice thread rebuilds its list. */</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordflow">while</span> (chan_list_state == <a class="code" href="../../d5/d66/autoservice_8c.html#a1e82c20db7f5c906994e485b217ec72c">as_chan_list_state</a>) {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      usleep(1000);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="comment">/* Now autoservice thread should have no references to our entry</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">      and we can safely destroy it */</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a>(chan)) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      res = 0;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keywordflow">if</span> (!as-&gt;<a class="code" href="../../db/d4a/structasent.html#aa50829816f7602c8c61a07b3f694d42b">orig_end_dtmf_flag</a>) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a>);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="keywordflow">while</span> ((f = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;as-&gt;<a class="code" href="../../db/d4a/structasent.html#a77406089813b7edd02aca2a92777fb4b">deferred_frames</a>, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>))) {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keywordflow">if</span> (!((1 &lt;&lt; f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) &amp; as-&gt;<a class="code" href="../../db/d4a/structasent.html#a064a64e35e8c6d944ad47eb55769daa5">ignore_frame_types</a>)) {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a5665eaabfca509388208e4bd83ed7532">ast_queue_frame_head</a>(chan, f);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(as);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01008">channel.h:1008</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="utils_8h_html_a015e7a1c3014aa7446f6e1696710088c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a015e7a1c3014aa7446f6e1696710088c">ast_thread_is_user_interface</a></div><div class="ttdeci">int ast_thread_is_user_interface(void)</div><div class="ttdoc">Indicates whether the current thread is a user interface. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02996">main/utils.c:2996</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="autoservice_8c_html_a1e82c20db7f5c906994e485b217ec72c"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#a1e82c20db7f5c906994e485b217ec72c">as_chan_list_state</a></div><div class="ttdeci">static int as_chan_list_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00076">autoservice.c:76</a></div></div>
<div class="ttc" id="structasent_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../db/d4a/structasent.html#a84d1435c5b8d387806714ea7079304b7">asent::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00055">autoservice.c:55</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="structasent_html_aa50829816f7602c8c61a07b3f694d42b"><div class="ttname"><a href="../../db/d4a/structasent.html#aa50829816f7602c8c61a07b3f694d42b">asent::orig_end_dtmf_flag</a></div><div class="ttdeci">unsigned int orig_end_dtmf_flag</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00060">autoservice.c:60</a></div></div>
<div class="ttc" id="structasent_html_a9dddf0b6c333316dd0671ea9191c666c"><div class="ttname"><a href="../../db/d4a/structasent.html#a9dddf0b6c333316dd0671ea9191c666c">asent::use_count</a></div><div class="ttdeci">unsigned int use_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00059">autoservice.c:59</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="autoservice_8c_html_ad780520c699a6c8102269e53c8119c96"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a></div><div class="ttdeci">static pthread_t asthread</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00073">autoservice.c:73</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="structasent_html"><div class="ttname"><a href="../../db/d4a/structasent.html">asent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00054">autoservice.c:54</a></div></div>
<div class="ttc" id="channel_8h_html_adac99999f1e55833e7f903979d67b48b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a></div><div class="ttdeci">int ast_channel_softhangup_internal_flag(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00997">channel_internal_api.c:997</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structasent_html_a77406089813b7edd02aca2a92777fb4b"><div class="ttname"><a href="../../db/d4a/structasent.html#a77406089813b7edd02aca2a92777fb4b">asent::deferred_frames</a></div><div class="ttdeci">struct asent::@345 deferred_frames</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structaslist_html"><div class="ttname"><a href="../../d6/dae/structaslist.html">aslist</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00070">autoservice.c:70</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structasent_html_a064a64e35e8c6d944ad47eb55769daa5"><div class="ttname"><a href="../../db/d4a/structasent.html#a064a64e35e8c6d944ad47eb55769daa5">asent::ignore_frame_types</a></div><div class="ttdeci">unsigned int ignore_frame_types</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00062">autoservice.c:62</a></div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="channel_8h_html_a5665eaabfca509388208e4bd83ed7532"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5665eaabfca509388208e4bd83ed7532">ast_queue_frame_head</a></div><div class="ttdeci">int ast_queue_frame_head(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to the head of a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01144">channel.c:1144</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a58680bb1c6a4a041afa2c482928bc4fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58680bb1c6a4a041afa2c482928bc4fb">&#9670;&nbsp;</a></span>autoservice_run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* autoservice_run </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ign</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00078">78</a> of file <a class="el" href="../../d5/d66/autoservice_8c_source.html">autoservice.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00076">as_chan_list_state</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00071">as_cond</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00074">asexit</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l01971">ast_callid_threadassoc_change()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00793">ast_channel_callid()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00445">ast_check_hangup()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00203">ast_cond_wait</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">AST_CONTROL_HANGUP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">AST_CONTROL_VIDUPDATE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">ast_frdup</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">ast_frisolate</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01467">ast_is_deferrable_frame()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04302">ast_read()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03166">ast_waitfor_n()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00073">asthread</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00098">ast_channel::callid</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00055">asent::chan</a>, <a class="el" href="../../db/d4a/structasent.html#a77406089813b7edd02aca2a92777fb4b">asent::deferred_frames</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../db/d4a/structasent.html#a7e9ab058282978b15c3414f44a65a687">asent::list</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00070">aslist::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00052">MAX_AUTOMONS</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, and <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00061">asent::video_update</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">ast_autoservice_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;{</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6db44a7e26f0bc42801fc7225817c6a1">ast_callid</a> callid = 0;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> hangup_frame = {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>,</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      .subclass.integer = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>,</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;   };</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../d5/d66/autoservice_8c.html#aaecd80d565174f30d2f28f1bc421ad74">asexit</a>) {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *mons[<a class="code" href="../../d5/d66/autoservice_8c.html#afa009c9fb25a81a911f9dfa5036115c3">MAX_AUTOMONS</a>];</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../db/d4a/structasent.html">asent</a> *ents[<a class="code" href="../../d5/d66/autoservice_8c.html#afa009c9fb25a81a911f9dfa5036115c3">MAX_AUTOMONS</a>];</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../db/d4a/structasent.html">asent</a> *as;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <span class="keywordtype">int</span> i, x = 0, ms = 50;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *defer_frame = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="comment">/* At this point, we know that no channels that have been removed are going</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">       * to get used again. */</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <a class="code" href="../../d5/d66/autoservice_8c.html#a1e82c20db7f5c906994e485b217ec72c">as_chan_list_state</a>++;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>)) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;<a class="code" href="../../d5/d66/autoservice_8c.html#a7704b73cf5cce4a768fbac243b94b543">as_cond</a>, &amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>.<a class="code" href="../../d6/dae/structaslist.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>, as, list) {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(as-&gt;<a class="code" href="../../db/d4a/structasent.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)) {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <span class="keywordflow">if</span> (x &lt; <a class="code" href="../../d5/d66/autoservice_8c.html#afa009c9fb25a81a911f9dfa5036115c3">MAX_AUTOMONS</a>) {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;               ents[x] = as;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;               mons[x++] = as-&gt;<a class="code" href="../../db/d4a/structasent.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Exceeded maximum number of automatic monitoring events.  Fix autoservice.c\n&quot;</span>);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;         }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      }</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/dae/structaslist.html">aslist</a>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordflow">if</span> (!x) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;         <span class="comment">/* If we don&#39;t sleep, this becomes a busy loop, which causes</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">          * problems when Asterisk runs at a different priority than other</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">          * user processes.  As long as we check for new channels at least</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">          * once every 10ms, we should be fine. */</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;         usleep(10000);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#aec8ce59b78afbd3651f3de011f13290a">ast_waitfor_n</a>(mons, x, &amp;ms);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      callid = <a class="code" href="../../d5/d7b/channel_8h.html#a6c2c406bdebd477029e61774cc300abd">ast_channel_callid</a>(chan);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a37b40349d0ef536a0f34b042f7803ab8">ast_callid_threadassoc_change</a>(callid);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      f = <a class="code" href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;         <span class="comment">/* No frame means the channel has been hung up.</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">          * A hangup frame needs to be queued here as ast_waitfor() may</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">          * never return again for the condition to be detected outside</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">          * of autoservice.  So, we&#39;ll leave a HANGUP queued up so the</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">          * thread in charge of this channel will know. */</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;         defer_frame = &amp;hangup_frame;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af040cd3070189adb70454717407a4315">ast_is_deferrable_frame</a>(f)) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;         defer_frame = f;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;         <span class="comment">/* Can&#39;t defer. Discard and continue with next. */</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; x; i++) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *dup_f;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;         <span class="keywordflow">if</span> (mons[i] != chan) {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;         }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;         <span class="keywordflow">if</span> (!f) { <span class="comment">/* defer_frame == &amp;hangup_frame */</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keywordflow">if</span> ((dup_f = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(defer_frame))) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;               <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;ents[i]-&gt;deferred_frames, dup_f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">if</span> (defer_frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a> &amp;&amp;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;               defer_frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a>) {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;               <span class="comment">/* If a video update is already queued don&#39;t needlessly queue another */</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;               <span class="keywordflow">if</span> (ents[i]-&gt;video_update) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                  <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(defer_frame);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;               }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;               ents[i]-&gt;<a class="code" href="../../db/d4a/structasent.html#aa622a072d903983796c4116a2f7909ba">video_update</a> = 1;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">if</span> ((dup_f = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a>(defer_frame))) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;               <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;ents[i]-&gt;deferred_frames, dup_f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="keywordflow">if</span> (dup_f != defer_frame) {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(defer_frame);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;         }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="comment">/* The ast_waitfor_n() call will only read frames from</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">       * the channels&#39; file descriptors. If ast_waitfor_n()</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">       * returns non-NULL, then one of the channels in the</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">       * mons array must have triggered the return. It&#39;s</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">       * therefore impossible that we got here while (i &gt;= x).</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">       * If we did, we&#39;d need to ast_frfree(f) if (f). */</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a37b40349d0ef536a0f34b042f7803ab8">ast_callid_threadassoc_change</a>(0);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   <a class="code" href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div><div class="ttc" id="autoservice_8c_html_aaecd80d565174f30d2f28f1bc421ad74"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#aaecd80d565174f30d2f28f1bc421ad74">asexit</a></div><div class="ttdeci">static volatile int asexit</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00074">autoservice.c:74</a></div></div>
<div class="ttc" id="channel_8h_html_aec8ce59b78afbd3651f3de011f13290a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aec8ce59b78afbd3651f3de011f13290a">ast_waitfor_n</a></div><div class="ttdeci">struct ast_channel * ast_waitfor_n(struct ast_channel **chan, int n, int *ms)</div><div class="ttdoc">Waits for input on a group of channels Wait for input on an array of channels for a given # of millis...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03166">channel.c:3166</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a417ee8a61074ec7570971202908e2c4f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a></div><div class="ttdeci">#define ast_frdup(fr)</div><div class="ttdoc">Copies a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">include/asterisk/frame.h:585</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structasent_html_aa622a072d903983796c4116a2f7909ba"><div class="ttname"><a href="../../db/d4a/structasent.html#aa622a072d903983796c4116a2f7909ba">asent::video_update</a></div><div class="ttdeci">unsigned int video_update</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00061">autoservice.c:61</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="autoservice_8c_html_afa009c9fb25a81a911f9dfa5036115c3"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#afa009c9fb25a81a911f9dfa5036115c3">MAX_AUTOMONS</a></div><div class="ttdeci">#define MAX_AUTOMONS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00052">autoservice.c:52</a></div></div>
<div class="ttc" id="logger_8h_html_a37b40349d0ef536a0f34b042f7803ab8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a37b40349d0ef536a0f34b042f7803ab8">ast_callid_threadassoc_change</a></div><div class="ttdeci">int ast_callid_threadassoc_change(ast_callid callid)</div><div class="ttdoc">Sets what is stored in the thread storage to the given callid if it does not match what is already th...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l01971">logger.c:1971</a></div></div>
<div class="ttc" id="channel_8h_html_a7ef6737309dc9e8b6c4a7cb4800638b1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a></div><div class="ttdeci">struct ast_frame * ast_read(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04302">channel.c:4302</a></div></div>
<div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="logger_8h_html_a6db44a7e26f0bc42801fc7225817c6a1"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6db44a7e26f0bc42801fc7225817c6a1">ast_callid</a></div><div class="ttdeci">unsigned int ast_callid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00087">logger.h:87</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structaslist_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d6/dae/structaslist.html#adf04f66344e3fb0a6f6a69bf39d19902">aslist::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00070">autoservice.c:70</a></div></div>
<div class="ttc" id="autoservice_8c_html_a7704b73cf5cce4a768fbac243b94b543"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#a7704b73cf5cce4a768fbac243b94b543">as_cond</a></div><div class="ttdeci">static ast_cond_t as_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00071">autoservice.c:71</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="autoservice_8c_html_a1e82c20db7f5c906994e485b217ec72c"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#a1e82c20db7f5c906994e485b217ec72c">as_chan_list_state</a></div><div class="ttdeci">static int as_chan_list_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00076">autoservice.c:76</a></div></div>
<div class="ttc" id="structasent_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../db/d4a/structasent.html#a84d1435c5b8d387806714ea7079304b7">asent::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00055">autoservice.c:55</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="channel_8h_html_a9c63fff1d736568d1ee332dd7ea502bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a></div><div class="ttdeci">int ast_check_hangup(struct ast_channel *chan)</div><div class="ttdoc">Check to see if a channel is needing hang up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00445">channel.c:445</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">include/asterisk/frame.h:278</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="autoservice_8c_html_ad780520c699a6c8102269e53c8119c96"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a></div><div class="ttdeci">static pthread_t asthread</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00073">autoservice.c:73</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a314496ce1d74ed7fdb9c5319c5e2e953"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a></div><div class="ttdeci">#define ast_frisolate(fr)</div><div class="ttdoc">Makes a frame independent of any static storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">include/asterisk/frame.h:577</a></div></div>
<div class="ttc" id="structasent_html"><div class="ttname"><a href="../../db/d4a/structasent.html">asent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00054">autoservice.c:54</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">include/asterisk/frame.h:295</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="channel_8h_html_af040cd3070189adb70454717407a4315"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af040cd3070189adb70454717407a4315">ast_is_deferrable_frame</a></div><div class="ttdeci">int ast_is_deferrable_frame(const struct ast_frame *frame)</div><div class="ttdoc">Should we keep this frame for later? </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01467">channel.c:1467</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structaslist_html"><div class="ttname"><a href="../../d6/dae/structaslist.html">aslist</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00070">autoservice.c:70</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="channel_8h_html_a6c2c406bdebd477029e61774cc300abd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6c2c406bdebd477029e61774cc300abd">ast_channel_callid</a></div><div class="ttdeci">ast_callid ast_channel_callid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00793">channel_internal_api.c:793</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5b85de4352baf982ae5308b31ff994b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5b85de4352baf982ae5308b31ff994b">&#9670;&nbsp;</a></span>autoservice_shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void autoservice_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00369">369</a> of file <a class="el" href="../../d5/d66/autoservice_8c_source.html">autoservice.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00071">as_cond</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00074">asexit</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00073">asthread</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00380">ast_autoservice_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;{</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   pthread_t th = <a class="code" href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <a class="code" href="../../d5/d66/autoservice_8c.html#aaecd80d565174f30d2f28f1bc421ad74">asexit</a> = 1;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="keywordflow">if</span> (th != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;<a class="code" href="../../d5/d66/autoservice_8c.html#a7704b73cf5cce4a768fbac243b94b543">as_cond</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      pthread_kill(th, SIGURG);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      pthread_join(th, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div><div class="ttc" id="autoservice_8c_html_aaecd80d565174f30d2f28f1bc421ad74"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#aaecd80d565174f30d2f28f1bc421ad74">asexit</a></div><div class="ttdeci">static volatile int asexit</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00074">autoservice.c:74</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="autoservice_8c_html_a7704b73cf5cce4a768fbac243b94b543"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#a7704b73cf5cce4a768fbac243b94b543">as_cond</a></div><div class="ttdeci">static ast_cond_t as_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00071">autoservice.c:71</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="autoservice_8c_html_ad780520c699a6c8102269e53c8119c96"><div class="ttname"><a href="../../d5/d66/autoservice_8c.html#ad780520c699a6c8102269e53c8119c96">asthread</a></div><div class="ttdeci">static pthread_t asthread</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00073">autoservice.c:73</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1e82c20db7f5c906994e485b217ec72c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e82c20db7f5c906994e485b217ec72c">&#9670;&nbsp;</a></span>as_chan_list_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int as_chan_list_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00076">76</a> of file <a class="el" href="../../d5/d66/autoservice_8c_source.html">autoservice.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00266">ast_autoservice_stop()</a>, and <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00078">autoservice_run()</a>.</p>

</div>
</div>
<a id="a7704b73cf5cce4a768fbac243b94b543"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7704b73cf5cce4a768fbac243b94b543">&#9670;&nbsp;</a></span>as_cond</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> as_cond</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00071">71</a> of file <a class="el" href="../../d5/d66/autoservice_8c_source.html">autoservice.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00380">ast_autoservice_init()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">ast_autoservice_start()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00078">autoservice_run()</a>, and <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00369">autoservice_shutdown()</a>.</p>

</div>
</div>
<a id="aaecd80d565174f30d2f28f1bc421ad74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaecd80d565174f30d2f28f1bc421ad74">&#9670;&nbsp;</a></span>asexit</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile int asexit = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00074">74</a> of file <a class="el" href="../../d5/d66/autoservice_8c_source.html">autoservice.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00078">autoservice_run()</a>, and <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00369">autoservice_shutdown()</a>.</p>

</div>
</div>
<a id="a99f14adf00e39550a6cbe6a3d81d5cba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99f14adf00e39550a6cbe6a3d81d5cba">&#9670;&nbsp;</a></span>aslist</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d6/dae/structaslist.html">aslist</a>   <a class="el" href="../../d6/dae/structaslist.html">aslist</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad780520c699a6c8102269e53c8119c96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad780520c699a6c8102269e53c8119c96">&#9670;&nbsp;</a></span>asthread</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t asthread = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00073">73</a> of file <a class="el" href="../../d5/d66/autoservice_8c_source.html">autoservice.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">ast_autoservice_start()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00266">ast_autoservice_stop()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00078">autoservice_run()</a>, and <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00369">autoservice_shutdown()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:44:51 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
