<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: message.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">message.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d0/d6d/message_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Asterisk -- An open source telephony toolkit.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 2010, Digium, Inc.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Russell Bryant &lt;russell@digium.com&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * See http://www.asterisk.org for more information about</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the Asterisk project. Please do not directly contact</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * any of the maintainers of this project for assistance;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * the project provides a web site, mailing lists and IRC</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * channels for your use.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * This program is free software, distributed under the terms of</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * at the top of the source tree.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/*! \file</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * \brief Out-of-call text message support</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * \author Russell Bryant &lt;russell@digium.com&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/*** MODULEINFO</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">   &lt;support_level&gt;core&lt;/support_level&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/db2/asterisk_8h.html">asterisk.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d78/__private_8h.html">asterisk/_private.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d16/module_8h.html">asterisk/module.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/db6/datastore_8h.html">asterisk/datastore.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/de0/pbx_8h.html">asterisk/pbx.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d45/manager_8h.html">asterisk/manager.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d90/strings_8h.html">asterisk/strings.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/da5/astobj2_8h.html">asterisk/astobj2.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d68/vector_8h.html">asterisk/vector.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html">asterisk/app.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d1e/taskprocessor_8h.html">asterisk/taskprocessor.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d0d/message_8h.html">asterisk/message.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">/*** DOCUMENTATION</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">   &lt;function name=&quot;MESSAGE&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">         Create a message or read fields from a message.</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">      &lt;syntax argsep=&quot;/&quot;&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">         &lt;parameter name=&quot;argument&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">         &lt;para&gt;Field of the message to get or set.&lt;/para&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">         &lt;enumlist&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">            &lt;enum name=&quot;to&quot;&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">               &lt;para&gt;When processing an</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">               incoming message, this will be set to the destination listed as</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">               the recipient of the message that was received by Asterisk.&lt;/para&gt;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">               &lt;para&gt;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">               &lt;/para&gt;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">               &lt;para&gt;For an outgoing message, this will set the To header in the</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">               outgoing SIP message.  This may be overridden by the &quot;to&quot; parameter</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">               of MessageSend.</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">               &lt;/para&gt;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">            &lt;/enum&gt;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">            &lt;enum name=&quot;from&quot;&gt;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">               &lt;para&gt;When processing an</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">               incoming message, this will be set to the source of the message.&lt;/para&gt;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">               &lt;para&gt;</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">               &lt;/para&gt;</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">               &lt;para&gt;For an outgoing message, this will set the From header in the</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">               outgoing SIP message. This may be overridden by the &quot;from&quot; parameter</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">               of MessageSend.</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">               &lt;/para&gt;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">            &lt;/enum&gt;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">            &lt;enum name=&quot;custom_data&quot;&gt;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">               &lt;para&gt;Write-only.  Mark or unmark all message headers for an outgoing</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">               message.  The following values can be set:&lt;/para&gt;</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">               &lt;enumlist&gt;</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">                  &lt;enum name=&quot;mark_all_outbound&quot;&gt;</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">                     &lt;para&gt;Mark all headers for an outgoing message.&lt;/para&gt;</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">                  &lt;/enum&gt;</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">                  &lt;enum name=&quot;clear_all_outbound&quot;&gt;</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">                     &lt;para&gt;Unmark all headers for an outgoing message.&lt;/para&gt;</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">                  &lt;/enum&gt;</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">               &lt;/enumlist&gt;</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">            &lt;/enum&gt;</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">            &lt;enum name=&quot;body&quot;&gt;</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">               &lt;para&gt;Read/Write.  The message body.  When processing an incoming</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">               message, this includes the body of the message that Asterisk</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">               received.  When MessageSend() is executed, the contents of this</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">               field are used as the body of the outgoing message.  The body</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">               will always be UTF-8.&lt;/para&gt;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">            &lt;/enum&gt;</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">         &lt;/enumlist&gt;</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">         &lt;para&gt;This function will read from or write a value to a text message.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">         It is used both to read the data out of an incoming message, as well as</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">         modify or create a message that will be sent outbound.&lt;/para&gt;</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">      &lt;see-also&gt;</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;MessageSend&lt;/ref&gt;</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">      &lt;/see-also&gt;</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">   &lt;/function&gt;</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">   &lt;function name=&quot;MESSAGE_DATA&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">         Read or write custom data attached to a message.</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">      &lt;syntax argsep=&quot;/&quot;&gt;</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">         &lt;parameter name=&quot;argument&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">         &lt;para&gt;Field of the message to get or set.&lt;/para&gt;</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">         &lt;para&gt;This function will read from or write a value to a text message.</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">         It is used both to read the data out of an incoming message, as well as</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">         modify a message that will be sent outbound.&lt;/para&gt;</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">         &lt;note&gt;</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">            &lt;para&gt;If you want to set an outbound message to carry data in the</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">            current message, do</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">            Set(MESSAGE_DATA(&lt;replaceable&gt;key&lt;/replaceable&gt;)=${MESSAGE_DATA(&lt;replaceable&gt;key&lt;/replaceable&gt;)}).&lt;/para&gt;</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">         &lt;/note&gt;</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">      &lt;see-also&gt;</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;MessageSend&lt;/ref&gt;</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">      &lt;/see-also&gt;</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">   &lt;/function&gt;</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">   &lt;application name=&quot;MessageSend&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">         Send a text message.</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">         &lt;parameter name=&quot;destination&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">            &lt;para&gt;A To URI for the message.&lt;/para&gt;</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/info[@name=&#39;MessageDestinationInfo&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">         &lt;parameter name=&quot;from&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">            &lt;para&gt;A From URI for the message if needed for the</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">            message technology being used to send this message. This can be a</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">            SIP(S) URI, such as &lt;literal&gt;Alice &amp;lt;sip:alice@atlanta.com&amp;gt;&lt;/literal&gt;,</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">            or a string in the format &lt;literal&gt;alice@atlanta.com&lt;/literal&gt;.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">            This will override a &lt;literal&gt;from&lt;/literal&gt;</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">            specified using the MESSAGE dialplan function or the &lt;literal&gt;from&lt;/literal&gt;</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">            that may have been on an incoming message.</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">            &lt;/para&gt;</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/info[@name=&#39;MessageFromInfo&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">         &lt;parameter name=&quot;to&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">            &lt;para&gt;A To URI for the message if needed for the</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">            message technology being used to send this message. This can be a</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">            SIP(S) URI, such as &lt;literal&gt;Alice &amp;lt;sip:alice@atlanta.com&amp;gt;&lt;/literal&gt;,</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">            or a string in the format &lt;literal&gt;alice@atlanta.com&lt;/literal&gt;.</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">            This will override a &lt;literal&gt;to&lt;/literal&gt;</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">            specified using the MESSAGE dialplan function or the &lt;literal&gt;to&lt;/literal&gt;</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">            that may have been on an incoming message.</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">            &lt;/para&gt;</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/info[@name=&#39;MessageToInfo&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">         &lt;para&gt;Send a text message.  The body of the message that will be</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">         sent is what is currently set to &lt;literal&gt;MESSAGE(body)&lt;/literal&gt;.</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">         This may he come from an incoming message.</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">         The technology chosen for sending the message is determined</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">         based on a prefix to the &lt;literal&gt;destination&lt;/literal&gt; parameter.&lt;/para&gt;</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">         &lt;para&gt;This application sets the following channel variables:&lt;/para&gt;</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">         &lt;variablelist&gt;</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">            &lt;variable name=&quot;MESSAGE_SEND_STATUS&quot;&gt;</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">               &lt;para&gt;This is the message delivery status returned by this application.&lt;/para&gt;</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">               &lt;value name=&quot;INVALID_PROTOCOL&quot;&gt;</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">                  No handler for the technology part of the URI was found.</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">               &lt;/value&gt;</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">               &lt;value name=&quot;INVALID_URI&quot;&gt;</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">                  The protocol handler reported that the URI was not valid.</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">               &lt;/value&gt;</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">               &lt;value name=&quot;SUCCESS&quot;&gt;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">                  Successfully passed on to the protocol handler, but delivery has not necessarily been guaranteed.</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">               &lt;/value&gt;</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">               &lt;value name=&quot;FAILURE&quot;&gt;</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">                  The protocol handler reported that it was unabled to deliver the message for some reason.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">               &lt;/value&gt;</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">            &lt;/variable&gt;</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">         &lt;/variablelist&gt;</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">   &lt;/application&gt;</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">   &lt;manager name=&quot;MessageSend&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">         Send an out of call message to an endpoint.</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">         &lt;parameter name=&quot;To&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">            &lt;para&gt;The URI the message is to be sent to.&lt;/para&gt;</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/info[@name=&#39;MessageToInfo&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">         &lt;parameter name=&quot;From&quot;&gt;</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">            &lt;para&gt;A From URI for the message if needed for the</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">            message technology being used to send this message.&lt;/para&gt;</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/info[@name=&#39;MessageFromInfo&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">         &lt;parameter name=&quot;Body&quot;&gt;</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">            &lt;para&gt;The message body text.  This must not contain any newlines as that</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">            conflicts with the AMI protocol.&lt;/para&gt;</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">         &lt;parameter name=&quot;Base64Body&quot;&gt;</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">            &lt;para&gt;Text bodies requiring the use of newlines have to be base64 encoded</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">            in this field.  Base64Body will be decoded before being sent out.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">            Base64Body takes precedence over Body.&lt;/para&gt;</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">         &lt;parameter name=&quot;Variable&quot;&gt;</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">            &lt;para&gt;Message variable to set, multiple Variable: headers are</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">            allowed.  The header value is a comma separated list of</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">            name=value pairs.&lt;/para&gt;</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="../../d3/d60/structmsg__data.html">  220</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a> {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a061580e89c55282a7140fa3fdfd52b6d">AST_DECLARE_STRING_FIELDS</a>(</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(<a class="code" href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>);</div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">  224</a></span>&#160;   );</div><div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="../../d3/d60/structmsg__data.html#abd0d95fa707f8b31fe34c7172280c437">  225</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d3/d60/structmsg__data.html#abd0d95fa707f8b31fe34c7172280c437">send</a>; <span class="comment">/* Whether to send out on outbound messages */</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;};</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="../../d6/d88/structouthead.html#a4aeccef4d369da35f44b098319d97b4a">  228</a></span>&#160;<a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(<a class="code" href="../../d6/d88/structouthead.html">outhead</a>, <a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment"> * \brief A message.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="../../df/da1/structast__msg.html">  233</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a061580e89c55282a7140fa3fdfd52b6d">AST_DECLARE_STRING_FIELDS</a>(<span class="comment"></span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">      /*! Where the message is going */</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(to);<span class="comment"></span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">      /*! Where we &quot;say&quot; the message came from */</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(<a class="code" href="../../d3/d60/structmsg__data.html#a765533dfc643627999c751f7e1514664">from</a>);<span class="comment"></span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">      /*! The text to send */</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(body);<span class="comment"></span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">      /*! The dialplan context for the message */</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>);<span class="comment"></span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">      /*! The dialplan extension for the message */</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>);<span class="comment"></span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">      /*! An endpoint associated with this message */</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(endpoint);<span class="comment"></span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">      /*! The technology of the endpoint associated with this message */</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(tech);</div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="../../df/da1/structast__msg.html#aa3d35b7db1e41abf114ef7c404ffb149">  249</a></span>&#160;   );<span class="comment"></span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">   /*! Technology/dialplan specific variables associated with the message */</span></div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="../../df/da1/structast__msg.html#a3493de2682f77ff3fe7314d092b721e4">  251</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../df/da1/structast__msg.html#a3493de2682f77ff3fe7314d092b721e4">vars</a>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;};</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">/*! \brief Lock for \c msg_techs vector */</span></div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a340a5494b3830d82fa35daa30bf3a40f">  255</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../dc/d9e/structast__rwlock__info.html">ast_rwlock_t</a> <a class="code" href="../../d0/d6d/message_8c.html#a340a5494b3830d82fa35daa30bf3a40f">msg_techs_lock</a>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">/*! \brief Vector of message technologies */</span></div><div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#af2608cbfce12316c5f57e528dcb073c6">  258</a></span>&#160;<a class="code" href="../../d0/d6d/message_8c.html#af2608cbfce12316c5f57e528dcb073c6">AST_VECTOR</a>(, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/dfc/structast__msg__tech.html">ast_msg_tech</a> *) msg_techs;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">/*! \brief Lock for \c msg_handlers vector */</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keyword">static</span> <a class="code" href="../../dc/d9e/structast__rwlock__info.html">ast_rwlock_t</a> msg_handlers_lock;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">/*! \brief Vector of received message handlers */</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<a class="code" href="../../d0/d6d/message_8c.html#af2608cbfce12316c5f57e528dcb073c6">AST_VECTOR</a>(, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a> *) msg_handlers;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *msg_q_tp;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> app_msg_send[] = <span class="stringliteral">&quot;MessageSend&quot;</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d6d/message_8c.html#a8cde310fda3077b3235e6beea16497de">msg_ds_destroy</a>(<span class="keywordtype">void</span> *data);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> msg_datastore = {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   .<a class="code" href="../../d9/dfb/structast__datastore__info.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a> = <span class="stringliteral">&quot;message&quot;</span>,</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;   .destroy = <a class="code" href="../../d0/d6d/message_8c.html#a8cde310fda3077b3235e6beea16497de">msg_ds_destroy</a>,</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;};</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a85c2e8d008f354ce1a5cc3c5264c49d4">msg_func_read</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">function</span>,</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordtype">char</span> *data, <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a80cbe1b7224b71fe992d2e22208587ef">msg_func_write</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">function</span>,</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordtype">char</span> *data, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a50cdc29633f1425ce3951398e49df281">  282</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> <a class="code" href="../../d0/d6d/message_8c.html#a50cdc29633f1425ce3951398e49df281">msg_function</a> = {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   .<a class="code" href="../../db/dc0/structast__custom__function.html#afcd1706c9144e6d6eee6127661ae3be2">name</a> = <span class="stringliteral">&quot;MESSAGE&quot;</span>,</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   .read = <a class="code" href="../../d0/d6d/message_8c.html#a85c2e8d008f354ce1a5cc3c5264c49d4">msg_func_read</a>,</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   .write = <a class="code" href="../../d0/d6d/message_8c.html#a80cbe1b7224b71fe992d2e22208587ef">msg_func_write</a>,</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;};</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a4d93b78cb49cb749e4c013bcef8a36db">msg_data_func_read</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">function</span>,</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordtype">char</span> *data, <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#aa8d0f8e413a94fa1ead06298b788f0f1">msg_data_func_write</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">function</span>,</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordtype">char</span> *data, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#aeae1100c0648a4bad17681fd59e24de1">  293</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> <a class="code" href="../../d0/d6d/message_8c.html#aeae1100c0648a4bad17681fd59e24de1">msg_data_function</a> = {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   .<a class="code" href="../../db/dc0/structast__custom__function.html#afcd1706c9144e6d6eee6127661ae3be2">name</a> = <span class="stringliteral">&quot;MESSAGE_DATA&quot;</span>,</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   .read = <a class="code" href="../../d0/d6d/message_8c.html#a4d93b78cb49cb749e4c013bcef8a36db">msg_data_func_read</a>,</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   .write = <a class="code" href="../../d0/d6d/message_8c.html#aa8d0f8e413a94fa1ead06298b788f0f1">msg_data_func_write</a>,</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;};</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *<a class="code" href="../../d0/d6d/message_8c.html#a6e4a1280611c15758b2338f5588b7148">chan_msg_read</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a3b4febdf0d676e535d24331910d61dd3">chan_msg_write</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a76f3470a9ffec2c57a8a010b28ecafa3">chan_msg_indicate</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> condition,</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>, <span class="keywordtype">size_t</span> <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a3144afa71134a44c6c6de90497281596">chan_msg_send_digit_begin</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a881685c8efc4c61993449bc32d7ff7fb">chan_msg_send_digit_end</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>,</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> duration);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"> * \brief A bare minimum channel technology</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment"> * This will not be registered as we never want anything to try</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"> * to create Message channels other than internally in this file.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#afce4a6d662471cce51961b92f7b75cb2">  314</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> <a class="code" href="../../d0/d6d/message_8c.html#afce4a6d662471cce51961b92f7b75cb2">msg_chan_tech_hack</a> = {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   .<a class="code" href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">type</a>             = <span class="stringliteral">&quot;Message&quot;</span>,</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   .description      = <span class="stringliteral">&quot;Internal Text Message Processing&quot;</span>,</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   .read             = <a class="code" href="../../d0/d6d/message_8c.html#a6e4a1280611c15758b2338f5588b7148">chan_msg_read</a>,</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   .write            = <a class="code" href="../../d0/d6d/message_8c.html#a3b4febdf0d676e535d24331910d61dd3">chan_msg_write</a>,</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   .indicate         = <a class="code" href="../../d0/d6d/message_8c.html#a76f3470a9ffec2c57a8a010b28ecafa3">chan_msg_indicate</a>,</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   .send_digit_begin = <a class="code" href="../../d0/d6d/message_8c.html#a3144afa71134a44c6c6de90497281596">chan_msg_send_digit_begin</a>,</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   .send_digit_end   = <a class="code" href="../../d0/d6d/message_8c.html#a881685c8efc4c61993449bc32d7ff7fb">chan_msg_send_digit_end</a>,</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;};</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment"> * \brief ast_channel_tech read callback</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment"> * This should never be called.  However, we say that about chan_iax2&#39;s</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"> * read callback, too, and it seems to randomly get called for some</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"> * reason.  If it does, a simple NULL frame will suffice.</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a6e4a1280611c15758b2338f5588b7148">  332</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *<a class="code" href="../../d0/d6d/message_8c.html#a6e4a1280611c15758b2338f5588b7148">chan_msg_read</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"> * \brief ast_channel_tech write callback</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment"> * Throw all frames away.  We don&#39;t care about any of them.</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a3b4febdf0d676e535d24331910d61dd3">  343</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a3b4febdf0d676e535d24331910d61dd3">chan_msg_write</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr)</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;{</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment"> * \brief ast_channel_tech indicate callback</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment"> * The indicate callback is here just so it can return success.</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment"> * We don&#39;t want any callers of ast_indicate() to think something</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment"> * has failed.  We also don&#39;t want ast_indicate() itself to try</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"> * to generate inband tones since we didn&#39;t tell it that we took</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment"> * care of it ourselves.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a76f3470a9ffec2c57a8a010b28ecafa3">  358</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a76f3470a9ffec2c57a8a010b28ecafa3">chan_msg_indicate</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> condition,</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>, <span class="keywordtype">size_t</span> <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>)</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;{</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"> * \brief ast_channel_tech send_digit_begin callback</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"> * This is here so that just in case a digit comes at a message channel</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"> * that the Asterisk core doesn&#39;t waste any time trying to generate</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"> * inband DTMF in audio.  It&#39;s a waste of resources.</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a3144afa71134a44c6c6de90497281596">  372</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a3144afa71134a44c6c6de90497281596">chan_msg_send_digit_begin</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;{</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"> * \brief ast_channel_tech send_digit_end callback</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment"> * This is here so that just in case a digit comes at a message channel</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment"> * that the Asterisk core doesn&#39;t waste any time trying to generate</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"> * inband DTMF in audio.  It&#39;s a waste of resources.</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a881685c8efc4c61993449bc32d7ff7fb">  385</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a881685c8efc4c61993449bc32d7ff7fb">chan_msg_send_digit_end</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>,</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> duration)</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;{</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a8cde310fda3077b3235e6beea16497de">  391</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d6d/message_8c.html#a8cde310fda3077b3235e6beea16497de">msg_ds_destroy</a>(<span class="keywordtype">void</span> *<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>)</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;{</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a> = data;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;}</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a2bae004309095c8c0d7e60e038218476">  398</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a2bae004309095c8c0d7e60e038218476">msg_data_cmp_fn</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;{</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a> *one = obj, *two = arg;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <span class="keywordflow">return</span> !strcasecmp(one-&gt;<a class="code" href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, two-&gt;name) ? <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a> : 0;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;}</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a92ac04b958a264b71eb8a4a68a88058b">  404</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d6d/message_8c.html#a92ac04b958a264b71eb8a4a68a88058b">msg_data_destructor</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a> *data = obj;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(data);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;}</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a03aae7913c875caba36e0b1716a3d86a">  410</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d6d/message_8c.html#a03aae7913c875caba36e0b1716a3d86a">msg_destructor</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;{</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a> = obj;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(msg);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a3493de2682f77ff3fe7314d092b721e4">vars</a>);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a0e4685c7cf1d71204087b992110e6357">  418</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d0/d6d/message_8c.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;{</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   <span class="keywordflow">if</span> (!(msg = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*msg), <a class="code" href="../../d0/d6d/message_8c.html#a03aae7913c875caba36e0b1716a3d86a">msg_destructor</a>))) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(msg, 128)) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a3493de2682f77ff3fe7314d092b721e4">vars</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/d6d/message_8c.html#a2bae004309095c8c0d7e60e038218476">msg_data_cmp_fn</a>);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   <span class="keywordflow">if</span> (!msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a3493de2682f77ff3fe7314d092b721e4">vars</a>) {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(msg, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="stringliteral">&quot;default&quot;</span>);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a28934ed2a0553c29d7bbcecdb1adf1fb">  442</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d0/d6d/message_8c.html#a28934ed2a0553c29d7bbcecdb1adf1fb">ast_msg_ref</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;{</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, 1);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a13b928949f293c3b6b9ba3ebe8d64075">  448</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d0/d6d/message_8c.html#a13b928949f293c3b6b9ba3ebe8d64075">ast_msg_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;{</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;}</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#acf4073638cf23022399e3666c804e178">  454</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;{</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   va_list ap;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a5dbef560766ab8260c045b54b1dfbccd">ast_string_field_build_va</a>(msg, <a class="code" href="../../df/da1/structast__msg.html#aa3d35b7db1e41abf114ef7c404ffb149">to</a>, fmt, ap);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   va_end(ap);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;}</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a02a688837f4e91ea078c0b1b48017ef8">  465</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a02a688837f4e91ea078c0b1b48017ef8">ast_msg_set_from</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;{</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   va_list ap;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a5dbef560766ab8260c045b54b1dfbccd">ast_string_field_build_va</a>(msg, <a class="code" href="../../d3/d60/structmsg__data.html#a765533dfc643627999c751f7e1514664">from</a>, fmt, ap);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   va_end(ap);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#aa21f081993590c1410b287d717a92282">  476</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#aa21f081993590c1410b287d717a92282">ast_msg_set_body</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;{</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;   va_list ap;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a5dbef560766ab8260c045b54b1dfbccd">ast_string_field_build_va</a>(msg, <a class="code" href="../../df/da1/structast__msg.html#aedb87548f30bdffa5641eb5860806f2c">body</a>, fmt, ap);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   va_end(ap);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a9e2045ad672c0afd5fb2616fec6bc666">  487</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;{</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   va_list ap;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a5dbef560766ab8260c045b54b1dfbccd">ast_string_field_build_va</a>(msg, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, fmt, ap);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   va_end(ap);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a71dd7465491023d1d7fd467f2920f2b8">  498</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;{</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   va_list ap;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a5dbef560766ab8260c045b54b1dfbccd">ast_string_field_build_va</a>(msg, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, fmt, ap);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   va_end(ap);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;}</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a757a64be14a9fc2b47a37f5ce9e742d5">  509</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a757a64be14a9fc2b47a37f5ce9e742d5">ast_msg_set_tech</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;{</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   va_list ap;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a5dbef560766ab8260c045b54b1dfbccd">ast_string_field_build_va</a>(msg, <a class="code" href="../../df/da1/structast__msg.html#a6379def8cefd9afdea29d5ed673cf8a0">tech</a>, fmt, ap);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   va_end(ap);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;}</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a53573a834e1a26d67c26ba58a9ad8274">  520</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a53573a834e1a26d67c26ba58a9ad8274">ast_msg_set_endpoint</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;{</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   va_list ap;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a5dbef560766ab8260c045b54b1dfbccd">ast_string_field_build_va</a>(msg, <a class="code" href="../../df/da1/structast__msg.html#aa3522da32a7960126d5eb2ac0c1c6c36">endpoint</a>, fmt, ap);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   va_end(ap);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#abd98509b6e22ab33822ff3c7a2e35756">  531</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d6d/message_8c.html#abd98509b6e22ab33822ff3c7a2e35756">ast_msg_get_body</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;{</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   <span class="keywordflow">return</span> msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#aedb87548f30bdffa5641eb5860806f2c">body</a>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;}</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a393525170186b56f9e6bbcebb9968139">  536</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d6d/message_8c.html#a393525170186b56f9e6bbcebb9968139">ast_msg_get_from</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;{</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <span class="keywordflow">return</span> msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a9649843650ff64b926c50f2fc2c93691">from</a>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;}</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a6ddbc20e42c0631602984bc83506aaf2">  541</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d6d/message_8c.html#a6ddbc20e42c0631602984bc83506aaf2">ast_msg_get_to</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;{</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keywordflow">return</span> msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#aa3d35b7db1e41abf114ef7c404ffb149">to</a>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#ac9a8163468646664e14338f6a34c6441">  546</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d6d/message_8c.html#ac9a8163468646664e14338f6a34c6441">ast_msg_get_tech</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;{</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <span class="keywordflow">return</span> msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a6379def8cefd9afdea29d5ed673cf8a0">tech</a>;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a7e523b0180c095ebef1c7e7c754fee85">  551</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d6d/message_8c.html#a7e523b0180c095ebef1c7e7c754fee85">ast_msg_get_endpoint</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;{</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keywordflow">return</span> msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#aa3522da32a7960126d5eb2ac0c1c6c36">endpoint</a>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;}</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#ae4e2f99b86bfa94ce262544223359b8a">  556</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a> *<a class="code" href="../../d0/d6d/message_8c.html#ae4e2f99b86bfa94ce262544223359b8a">msg_data_alloc</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;{</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a> *data;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <span class="keywordflow">if</span> (!(data = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*data), <a class="code" href="../../d0/d6d/message_8c.html#a92ac04b958a264b71eb8a4a68a88058b">msg_data_destructor</a>))) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(data, 32)) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, -1);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <span class="keywordflow">return</span> data;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a4b9221812cead98396012724552386ec">  572</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a> *<a class="code" href="../../d0/d6d/message_8c.html#a4b9221812cead98396012724552386ec">msg_data_find</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *vars, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;{</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a> tmp = {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      .<a class="code" href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> = <a class="code" href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   };</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(vars, &amp;tmp, <a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a>);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;}</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a145b7cac3d609b5d9331da008fe726f7">  580</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a145b7cac3d609b5d9331da008fe726f7">msg_set_var_full</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> outbound)</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;{</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a> *data;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <span class="keywordflow">if</span> (!(data = <a class="code" href="../../d0/d6d/message_8c.html#a4b9221812cead98396012724552386ec">msg_data_find</a>(msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a3493de2682f77ff3fe7314d092b721e4">vars</a>, name))) {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(value)) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      }</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <span class="keywordflow">if</span> (!(data = <a class="code" href="../../d0/d6d/message_8c.html#ae4e2f99b86bfa94ce262544223359b8a">msg_data_alloc</a>())) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      };</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(data, name, name);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(data, value, value);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      data-&gt;<a class="code" href="../../d3/d60/structmsg__data.html#abd0d95fa707f8b31fe34c7172280c437">send</a> = outbound;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a3493de2682f77ff3fe7314d092b721e4">vars</a>, data);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(value)) {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a3493de2682f77ff3fe7314d092b721e4">vars</a>, data);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(data, value, value);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;         data-&gt;<a class="code" href="../../d3/d60/structmsg__data.html#abd0d95fa707f8b31fe34c7172280c437">send</a> = outbound;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, -1);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;}</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#ad5ca4649880cd7535b381354a6d7b042">  610</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#ad5ca4649880cd7535b381354a6d7b042">ast_msg_set_var_outbound</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>)</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;{</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d6d/message_8c.html#a145b7cac3d609b5d9331da008fe726f7">msg_set_var_full</a>(msg, name, value, 1);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a926dc659d6f9d88782e9d0e463ba8c47">  615</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a926dc659d6f9d88782e9d0e463ba8c47">ast_msg_set_var</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>)</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;{</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d6d/message_8c.html#a145b7cac3d609b5d9331da008fe726f7">msg_set_var_full</a>(msg, name, value, 0);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;}</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a5e9d57452f36f2c594799b35d916c27b">  620</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d6d/message_8c.html#a5e9d57452f36f2c594799b35d916c27b">ast_msg_get_var</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;{</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a> *data;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d85/structval.html">val</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <span class="keywordflow">if</span> (!(data = <a class="code" href="../../d0/d6d/message_8c.html#a4b9221812cead98396012724552386ec">msg_data_find</a>(msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a3493de2682f77ff3fe7314d092b721e4">vars</a>, name))) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   }</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   <span class="comment">/* Yep, this definitely looks like val would be a dangling pointer</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">    * after the ref count is decremented.  As long as the message structure</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">    * is used in a thread safe manner, this will not be the case though.</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">    * The ast_msg holds a reference to this object in the msg-&gt;vars container. */</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   val = data-&gt;<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, -1);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <span class="keywordflow">return</span> val;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno"><a class="line" href="../../d6/d23/structast__msg__var__iterator.html">  639</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d6/d23/structast__msg__var__iterator.html">ast_msg_var_iterator</a> {</div><div class="line"><a name="l00640"></a><span class="lineno"><a class="line" href="../../d6/d23/structast__msg__var__iterator.html#ad124a1fa9e80dc3b4cd9d537ba16d3d4">  640</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l00641"></a><span class="lineno"><a class="line" href="../../d6/d23/structast__msg__var__iterator.html#aad781d2cc5f4cbe3b5186b8aefef4d2e">  641</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a> *<a class="code" href="../../d6/d23/structast__msg__var__iterator.html#aad781d2cc5f4cbe3b5186b8aefef4d2e">current_used</a>;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;};</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a2903b6879e5710a6226825c1a0b84bd7">  644</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d6/d23/structast__msg__var__iterator.html">ast_msg_var_iterator</a> *<a class="code" href="../../d0/d6d/message_8c.html#a2903b6879e5710a6226825c1a0b84bd7">ast_msg_var_iterator_init</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;{</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d23/structast__msg__var__iterator.html">ast_msg_var_iterator</a> *<a class="code" href="../../d6/d23/structast__msg__var__iterator.html#ad124a1fa9e80dc3b4cd9d537ba16d3d4">iter</a>;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   iter = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*iter));</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   <span class="keywordflow">if</span> (!iter) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   iter-&gt;<a class="code" href="../../d6/d23/structast__msg__var__iterator.html#ad124a1fa9e80dc3b4cd9d537ba16d3d4">iter</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a3493de2682f77ff3fe7314d092b721e4">vars</a>, 0);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d23/structast__msg__var__iterator.html#ad124a1fa9e80dc3b4cd9d537ba16d3d4">iter</a>;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;}</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a59105ea6bdc0e6c7219afab8d9d48745">  658</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a59105ea6bdc0e6c7219afab8d9d48745">ast_msg_var_iterator_get_next</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>,</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d6/d23/structast__msg__var__iterator.html">ast_msg_var_iterator</a> *<a class="code" href="../../d6/d23/structast__msg__var__iterator.html#ad124a1fa9e80dc3b4cd9d537ba16d3d4">iter</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> **<a class="code" href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> **<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>,</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d3/d60/structmsg__data.html#abd0d95fa707f8b31fe34c7172280c437">send</a>)</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;{</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a> *data;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   <span class="keywordflow">if</span> (!iter) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   }</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   <span class="comment">/* Skip any that we&#39;re told to */</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <span class="keywordflow">while</span> ((data = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter-&gt;<a class="code" href="../../d6/d23/structast__msg__var__iterator.html#ad124a1fa9e80dc3b4cd9d537ba16d3d4">iter</a>)) &amp;&amp; (data-&gt;<a class="code" href="../../d3/d60/structmsg__data.html#abd0d95fa707f8b31fe34c7172280c437">send</a> != send)) {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, -1);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   }</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <span class="keywordflow">if</span> (!data) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   <span class="keywordflow">if</span> (data-&gt;<a class="code" href="../../d3/d60/structmsg__data.html#abd0d95fa707f8b31fe34c7172280c437">send</a> == send) {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      *name = data-&gt;<a class="code" href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      *value = data-&gt;<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <span class="comment">/* Leave the refcount to be cleaned up by the caller with</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">    * ast_msg_var_unref_current after they finish with the pointers to the data */</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   iter-&gt;<a class="code" href="../../d6/d23/structast__msg__var__iterator.html#aad781d2cc5f4cbe3b5186b8aefef4d2e">current_used</a> = data;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a6060c18710de4d3cc8bdc87152234450">  689</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a6060c18710de4d3cc8bdc87152234450">ast_msg_var_iterator_next</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>, <span class="keyword">struct</span> <a class="code" href="../../d6/d23/structast__msg__var__iterator.html">ast_msg_var_iterator</a> *iter, <span class="keyword">const</span> <span class="keywordtype">char</span> **<a class="code" href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> **<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>)</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;{</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d6d/message_8c.html#a59105ea6bdc0e6c7219afab8d9d48745">ast_msg_var_iterator_get_next</a>(msg, iter, name, value, 1);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;}</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#acb1ec128301413ebf9343f01b176b59f">  694</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#acb1ec128301413ebf9343f01b176b59f">ast_msg_var_iterator_next_received</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>,</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;     <span class="keyword">struct</span> <a class="code" href="../../d6/d23/structast__msg__var__iterator.html">ast_msg_var_iterator</a> *iter, <span class="keyword">const</span> <span class="keywordtype">char</span> **<a class="code" href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> **<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>)</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;{</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d6d/message_8c.html#a59105ea6bdc0e6c7219afab8d9d48745">ast_msg_var_iterator_get_next</a>(msg, iter, name, value, 0);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#ad11b71dc312056abfcd80727fba68fa6">  700</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d6d/message_8c.html#ad11b71dc312056abfcd80727fba68fa6">ast_msg_var_unref_current</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d23/structast__msg__var__iterator.html">ast_msg_var_iterator</a> *iter)</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;{</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(iter-&gt;<a class="code" href="../../d6/d23/structast__msg__var__iterator.html#aad781d2cc5f4cbe3b5186b8aefef4d2e">current_used</a>);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   iter-&gt;<a class="code" href="../../d6/d23/structast__msg__var__iterator.html#aad781d2cc5f4cbe3b5186b8aefef4d2e">current_used</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;}</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a4303d30986de10390f263dc640d41a99">  706</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d6d/message_8c.html#a4303d30986de10390f263dc640d41a99">ast_msg_var_iterator_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d23/structast__msg__var__iterator.html">ast_msg_var_iterator</a> *iter)</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;{</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   <span class="keywordflow">if</span> (iter) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter-&gt;<a class="code" href="../../d6/d23/structast__msg__var__iterator.html#ad124a1fa9e80dc3b4cd9d537ba16d3d4">iter</a>);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <a class="code" href="../../d0/d6d/message_8c.html#ad11b71dc312056abfcd80727fba68fa6">ast_msg_var_unref_current</a>(iter);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(iter);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;}</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a580622ff291a435adb7f81cf0e1684f8">  715</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d0/d6d/message_8c.html#a580622ff291a435adb7f81cf0e1684f8">create_msg_q_chan</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;{</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *ds;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#a2f18aafad0442206e71033ac6676dbb5">ast_channel_alloc</a>(1, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>,</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0,</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;         <span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;Message/ast_msg_queue&quot;</span>);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   }</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#aab068d1d19325ebde561113748207756">ast_opt_hide_messaging_ami_events</a>) {</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      msg_chan_tech_hack.<a class="code" href="../../d4/d85/structast__channel__tech.html#a5f36febd4b26a025856e994a4e189a20">properties</a> |= <a class="code" href="../../d5/d7b/channel_8h.html#aa62371d642974c67a0c0efa77d54fcbda1cec91607109bb73e86c4fa1c2ae9344">AST_CHAN_TP_INTERNAL</a>;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   }</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af0566a4937a5bb1323825e4ef89c0e5a">ast_channel_tech_set</a>(chan, &amp;msg_chan_tech_hack);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a3dda07b27527beb0e8b4c92b90810834">ast_channel_unlink</a>(chan);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <span class="keywordflow">if</span> (!(ds = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(&amp;msg_datastore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   }</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(chan, ds);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <span class="keywordflow">return</span> chan;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;}</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment"> * \brief Run the dialplan for message processing</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"> * \pre The message has already been set up on the msg datastore</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment"> *      on this channel.</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00756"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#aaafef9d7e5e9a814f6d481f531706ced">  756</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d6d/message_8c.html#aaafef9d7e5e9a814f6d481f531706ced">msg_route</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;{</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/db8/structast__pbx__args.html">ast_pbx_args</a> pbx_args;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a9f840db4b5ef461ac2c0c975a57c9e89">ast_explicit_goto</a>(chan, msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a7faec841658b88ad0cfbc684853acad3">context</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#aaee31f4cc48985167efcd38ab252dac8">exten</a>, <span class="stringliteral">&quot;s&quot;</span>), 1);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   memset(&amp;pbx_args, 0, <span class="keyword">sizeof</span>(pbx_args));</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   pbx_args.<a class="code" href="../../da/db8/structast__pbx__args.html#a0449b0be05342e431e60937c47fc52f7">no_hangup_chan</a> = 1,</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a2c502c100b8b4791d9efe395e08d620b">ast_pbx_run_args</a>(chan, &amp;pbx_args);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;}</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment"> * \brief Clean up ast_channel after each message</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment"> * Reset various bits of state after routing each message so the same ast_channel</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment"> * can just be reused.</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00774"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a0b8648c71871250896132e5ad57df1c8">  774</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d6d/message_8c.html#a0b8648c71871250896132e5ad57df1c8">chan_cleanup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;{</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *msg_ds, *ds;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *headp;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *vardata;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *cur;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">    * Remove the msg datastore.  Free its data but keep around the datastore</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">    * object and just reuse it.</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <span class="keywordflow">if</span> ((msg_ds = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;msg_datastore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) &amp;&amp; msg_ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a>(chan, msg_ds);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg_ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>, -1);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      msg_ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   }</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">    * Destroy all other datastores.</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <span class="keywordflow">while</span> ((ds = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(chan), <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(ds);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   }</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">    * Destroy all channel variables.</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   headp = <a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(chan);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   <span class="keywordflow">while</span> ((vardata = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(headp, entries))) {</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <a class="code" href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a>(vardata);</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   }</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">    * Remove frames from read queue</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   <span class="keywordflow">while</span> ((cur = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan), <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>))) {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(cur);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">    * Restore msg datastore.</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keywordflow">if</span> (msg_ds) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(chan, msg_ds);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">    * Clear softhangup flags.</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a21c057f81ff8b02eb1120410ae86e657">ast_channel_clear_softhangup</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a3c8b31e0185aad7285b6083e1a0c88c8">AST_SOFTHANGUP_ALL</a>);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">    * Flush the alert pipe in case we miscounted somewhere when</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">    * messing with frames on the read queue, we had to flush the</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">    * read queue above, or we had an &quot;Exceptionally long queue</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">    * length&quot; event.</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a717ed1e100d6d9057e958b541a9d8a21">ast_channel_internal_alert_flush</a>(chan);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;}</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#ae8972ac2a270671ede66f2510b272b27">  838</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d6d/message_8c.html#ae8972ac2a270671ede66f2510b272b27">destroy_msg_q_chan</a>(<span class="keywordtype">void</span> *<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>)</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;{</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> **chan = <a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   <span class="keywordflow">if</span> (!*chan) {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   }</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a015abb5b26bfba6ca64f10fd9e0468ba">ast_channel_release</a>(*chan);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;}</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a8eeafc4ede747f5d2cbd093cc8060e00">  849</a></span>&#160;<a class="code" href="../../dc/d7d/threadstorage_8h.html#a3fb5391416c5bf7a18d5f7f7b84c4b81">AST_THREADSTORAGE_CUSTOM</a>(<a class="code" href="../../d0/d6d/message_8c.html#a8eeafc4ede747f5d2cbd093cc8060e00">msg_q_chan</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/d6d/message_8c.html#ae8972ac2a270671ede66f2510b272b27">destroy_msg_q_chan</a>);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">/*! \internal \brief Handle a message bound for the dialplan */</span></div><div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#ae2624551959f03c57a27fb2f6a065c96">  852</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#ae2624551959f03c57a27fb2f6a065c96">dialplan_handle_msg_cb</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;{</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> **chan_p, *chan;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *ds;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   <span class="keywordflow">if</span> (!(chan_p = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../d0/d6d/message_8c.html#a8eeafc4ede747f5d2cbd093cc8060e00">msg_q_chan</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *)))) {</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   }</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;   <span class="keywordflow">if</span> (!*chan_p) {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="keywordflow">if</span> (!(*chan_p = <a class="code" href="../../d0/d6d/message_8c.html#a580622ff291a435adb7f81cf0e1684f8">create_msg_q_chan</a>())) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      }</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   chan = *chan_p;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <span class="keywordflow">if</span> (!(ds = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;msg_datastore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, +1);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = <a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   <a class="code" href="../../d0/d6d/message_8c.html#aaafef9d7e5e9a814f6d481f531706ced">msg_route</a>(chan, msg);</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   <a class="code" href="../../d0/d6d/message_8c.html#a0b8648c71871250896132e5ad57df1c8">chan_cleanup</a>(chan);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;}</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">/*! \internal \brief Determine if a message has a destination in the dialplan */</span></div><div class="line"><a name="l00883"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#ae332bf0860c6b752b8d4abae58592a4a">  883</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#ae332bf0860c6b752b8d4abae58592a4a">dialplan_has_destination_cb</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;{</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a7faec841658b88ad0cfbc684853acad3">context</a>)) {</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;   }</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a7faec841658b88ad0cfbc684853acad3">context</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#aaee31f4cc48985167efcd38ab252dac8">exten</a>, <span class="stringliteral">&quot;s&quot;</span>), 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;}</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div><div class="line"><a name="l00892"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a3e5c57832b4569f59921faa278002c3e">  892</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a> <a class="code" href="../../d0/d6d/message_8c.html#a3e5c57832b4569f59921faa278002c3e">dialplan_msg_handler</a> = {</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   .<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <span class="stringliteral">&quot;dialplan&quot;</span>,</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   .handle_msg = <a class="code" href="../../d0/d6d/message_8c.html#ae2624551959f03c57a27fb2f6a065c96">dialplan_handle_msg_cb</a>,</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   .has_destination = <a class="code" href="../../d0/d6d/message_8c.html#ae332bf0860c6b752b8d4abae58592a4a">dialplan_has_destination_cb</a>,</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;};</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment"> * \brief Message queue task processor callback</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment"> * \retval 0 success</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment"> * \retval non-zero failure</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment"> * \note Even though this returns a value, the taskprocessor code ignores the value.</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a1ffb43d10701fb44b3095172861cb654">  907</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a1ffb43d10701fb44b3095172861cb654">msg_q_cb</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;{</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a> = data;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   <span class="keywordtype">int</span> res = 1;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;msg_handlers_lock);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;msg_handlers); i++) {</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a> *<a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a> = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;msg_handlers, i);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <span class="keywordflow">if</span> (!handler-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#ae84a1fe264a104f27ccd5384ac9b63f5">has_destination</a>(msg)) {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;Handler %s doesn&#39;t want message, moving on\n&quot;</span>, handler-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      }</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;Dispatching message to %s handler\n&quot;</span>, handler-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      res &amp;= handler-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a2dd0939e9aa5117cba237e5bdca0f39f">handle_msg</a>(msg);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_handlers_lock);</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   <span class="keywordflow">if</span> (res != 0) {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No handler processed message from %s to %s\n&quot;</span>,</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a9649843650ff64b926c50f2fc2c93691">from</a>, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>), <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#aa3d35b7db1e41abf114ef7c404ffb149">to</a>, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>));</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   }</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;}</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div><div class="line"><a name="l00937"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a76b4f941b1f576c4373ff2251aeb919d">  937</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;{</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = 0;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;msg_handlers_lock);</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;msg_handlers); i++) {</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a> *<a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a> = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;msg_handlers, i);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;Seeing if %s can handle message\n&quot;</span>, handler-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <span class="keywordflow">if</span> (handler-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#ae84a1fe264a104f27ccd5384ac9b63f5">has_destination</a>(msg)) {</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;%s can handle message\n&quot;</span>, handler-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;         result = 1;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      }</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   }</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_handlers_lock);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#adcb3fd70677c50be8626deec545a42c1">  958</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#adcb3fd70677c50be8626deec545a42c1">ast_msg_queue</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;{</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   res = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(msg_q_tp, <a class="code" href="../../d0/d6d/message_8c.html#a1ffb43d10701fb44b3095172861cb654">msg_q_cb</a>, msg);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <span class="keywordflow">if</span> (res == -1) {</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   }</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;}</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment"> * \brief Find or create a message datastore on a channel</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment"> * \pre chan is locked</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment"> * \param chan the relevant channel</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment"> * \return the channel&#39;s message datastore, or NULL on error</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00979"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#ab5bec0fc64b1603d3b60386025a24a87">  979</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *<a class="code" href="../../d0/d6d/message_8c.html#ab5bec0fc64b1603d3b60386025a24a87">msg_datastore_find_or_create</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;{</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *ds;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <span class="keywordflow">if</span> ((ds = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;msg_datastore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <span class="keywordflow">return</span> ds;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   }</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;   <span class="keywordflow">if</span> (!(ds = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(&amp;msg_datastore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   <span class="keywordflow">if</span> (!(ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = <a class="code" href="../../d0/d6d/message_8c.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a>())) {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(ds);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(chan, ds);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <span class="keywordflow">return</span> ds;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;}</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div><div class="line"><a name="l01001"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a85c2e8d008f354ce1a5cc3c5264c49d4"> 1001</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a85c2e8d008f354ce1a5cc3c5264c49d4">msg_func_read</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">function</span>,</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>, <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;{</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *ds;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No channel was provided to %s function.\n&quot;</span>, <span class="keyword">function</span>);</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   }</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   <span class="keywordflow">if</span> (!(ds = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;msg_datastore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No MESSAGE data found on the channel to read.\n&quot;</span>);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   }</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   msg = ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, +1);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(msg);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(data, <span class="stringliteral">&quot;to&quot;</span>)) {</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(buf, msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#aa3d35b7db1e41abf114ef7c404ffb149">to</a>, len);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(data, <span class="stringliteral">&quot;from&quot;</span>)) {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(buf, msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a9649843650ff64b926c50f2fc2c93691">from</a>, len);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(data, <span class="stringliteral">&quot;body&quot;</span>)) {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(buf, msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#aedb87548f30bdffa5641eb5860806f2c">body</a>, len);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid argument to MESSAGE(): &#39;%s&#39;\n&quot;</span>, data);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(msg);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;}</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a80cbe1b7224b71fe992d2e22208587ef"> 1042</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a80cbe1b7224b71fe992d2e22208587ef">msg_func_write</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">function</span>,</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <span class="keywordtype">char</span> *data, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>)</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;{</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *ds;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No channel was provided to %s function.\n&quot;</span>, <span class="keyword">function</span>);</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;   }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   <span class="keywordflow">if</span> (!(ds = <a class="code" href="../../d0/d6d/message_8c.html#ab5bec0fc64b1603d3b60386025a24a87">msg_datastore_find_or_create</a>(chan))) {</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;   }</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   msg = ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, +1);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(msg);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(data, <span class="stringliteral">&quot;to&quot;</span>)) {</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <a class="code" href="../../d0/d6d/message_8c.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a>(msg, <span class="stringliteral">&quot;%s&quot;</span>, value);</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(data, <span class="stringliteral">&quot;from&quot;</span>)) {</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <a class="code" href="../../d0/d6d/message_8c.html#a02a688837f4e91ea078c0b1b48017ef8">ast_msg_set_from</a>(msg, <span class="stringliteral">&quot;%s&quot;</span>, value);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(data, <span class="stringliteral">&quot;body&quot;</span>)) {</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <a class="code" href="../../d0/d6d/message_8c.html#aa21f081993590c1410b287d717a92282">ast_msg_set_body</a>(msg, <span class="stringliteral">&quot;%s&quot;</span>, value);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(data, <span class="stringliteral">&quot;custom_data&quot;</span>)) {</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      <span class="keywordtype">int</span> outbound = -1;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(value, <span class="stringliteral">&quot;mark_all_outbound&quot;</span>)) {</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;         outbound = 1;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(value, <span class="stringliteral">&quot;clear_all_outbound&quot;</span>)) {</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;         outbound = 0;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;&#39;%s&#39; is not a valid value for custom_data\n&quot;</span>, value);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      }</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <span class="keywordflow">if</span> (outbound != -1) {</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d3/d60/structmsg__data.html">msg_data</a> *hdr_data;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(msg-&gt;<a class="code" href="../../df/da1/structast__msg.html#a3493de2682f77ff3fe7314d092b721e4">vars</a>, 0);</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;         <span class="keywordflow">while</span> ((hdr_data = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter))) {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            hdr_data-&gt;<a class="code" href="../../d3/d60/structmsg__data.html#abd0d95fa707f8b31fe34c7172280c437">send</a> = outbound;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hdr_data, -1);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;         }</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      }</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;&#39;%s&#39; is not a valid write argument.\n&quot;</span>, data);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;   }</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(msg);</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;}</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a4d93b78cb49cb749e4c013bcef8a36db"> 1102</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a4d93b78cb49cb749e4c013bcef8a36db">msg_data_func_read</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">function</span>,</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      <span class="keywordtype">char</span> *data, <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;{</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *ds;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d85/structval.html">val</a>;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No channel was provided to %s function.\n&quot;</span>, <span class="keyword">function</span>);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;   }</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   <span class="keywordflow">if</span> (!(ds = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;msg_datastore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No MESSAGE data found on the channel to read.\n&quot;</span>);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   }</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   msg = ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, +1);</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(msg);</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   <span class="keywordflow">if</span> ((val = <a class="code" href="../../d0/d6d/message_8c.html#a5e9d57452f36f2c594799b35d916c27b">ast_msg_get_var</a>(msg, data))) {</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(buf, val, len);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   }</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(msg);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;}</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#aa8d0f8e413a94fa1ead06298b788f0f1"> 1138</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#aa8d0f8e413a94fa1ead06298b788f0f1">msg_data_func_write</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">function</span>,</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <span class="keywordtype">char</span> *data, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>)</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;{</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *ds;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No channel was provided to %s function.\n&quot;</span>, <span class="keyword">function</span>);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   }</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;   <span class="keywordflow">if</span> (!(ds = <a class="code" href="../../d0/d6d/message_8c.html#ab5bec0fc64b1603d3b60386025a24a87">msg_datastore_find_or_create</a>(chan))) {</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;   }</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   msg = ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, +1);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(msg);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   <a class="code" href="../../d0/d6d/message_8c.html#ad5ca4649880cd7535b381354a6d7b042">ast_msg_set_var_outbound</a>(msg, data, value);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(msg);</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;}</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment"> * \internal \brief Find a \c ast_msg_tech by its technology name</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment"> * \param tech_name The name of the message technology</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment"> * \note \c msg_techs should be locked via \c msg_techs_lock prior to</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment"> *       calling this function</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment"> * \retval NULL if no \c ast_msg_tech has been registered</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment"> * \retval \c ast_msg_tech if registered</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01181"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a36b93aa94088482efc94c9d13b19ae54"> 1181</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/dfc/structast__msg__tech.html">ast_msg_tech</a> *<a class="code" href="../../d0/d6d/message_8c.html#a36b93aa94088482efc94c9d13b19ae54">msg_find_by_tech_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *tech_name)</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;{</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/dfc/structast__msg__tech.html">ast_msg_tech</a> *current;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;msg_techs); i++) {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      current = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;msg_techs, i);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="keywordflow">if</span> (!strcmp(current-&gt;<a class="code" href="../../df/dfc/structast__msg__tech.html#acc128f98d9ceca227038c771308eff39">name</a>, tech_name)) {</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;         <span class="keywordflow">return</span> current;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;   }</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;}</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment"> * \internal \brief Find a \c ast_msg_handler by its technology name</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment"> * \param tech_name The name of the message technology</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment"> * \note \c msg_handlers should be locked via \c msg_handlers_lock</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment"> *       prior to calling this function</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment"> * \retval NULL if no \c ast_msg_handler has been registered</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment"> * \retval \c ast_msg_handler if registered</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01207"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a6f22abc58303085be436c81bd598eeca"> 1207</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a> *<a class="code" href="../../d0/d6d/message_8c.html#a6f22abc58303085be436c81bd598eeca">msg_handler_find_by_tech_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *tech_name)</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;{</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a> *current;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;msg_handlers); i++) {</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      current = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;msg_handlers, i);</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="keywordflow">if</span> (!strcmp(current-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, tech_name)) {</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;         <span class="keywordflow">return</span> current;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      }</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;   }</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;}</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment"> * \brief MessageSend() application</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01226"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a9f578efd386044ab116db578dbe189fb"> 1226</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a9f578efd386044ab116db578dbe189fb">msg_send_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *data)</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;{</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *ds;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;   <span class="keywordtype">char</span> *tech_name;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/dfc/structast__msg__tech.html">ast_msg_tech</a> *<a class="code" href="../../da/d83/res__pjsip__messaging_8c.html#adee47ce28cd17bbdc773df287fc062c5">msg_tech</a>;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d3/d60/structmsg__data.html#ae98a0878a8abb793b89317d904f8c00a">destination</a>);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d3/d60/structmsg__data.html#a765533dfc643627999c751f7e1514664">from</a>);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(to);</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   );</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;An argument is required to MessageSend()\n&quot;</span>);</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MESSAGE_SEND_STATUS&quot;</span>, <span class="stringliteral">&quot;INVALID_URI&quot;</span>);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   }</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.destination)) {</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;A &#39;to&#39; URI is required for MessageSend()\n&quot;</span>);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MESSAGE_SEND_STATUS&quot;</span>, <span class="stringliteral">&quot;INVALID_URI&quot;</span>);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;   <span class="keywordflow">if</span> (!(ds = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;msg_datastore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No message data found on channel to send.\n&quot;</span>);</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MESSAGE_SEND_STATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   }</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;   msg = ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, +1);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;   tech_name = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.destination);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;   tech_name = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;tech_name, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   msg_tech = <a class="code" href="../../d0/d6d/message_8c.html#a36b93aa94088482efc94c9d13b19ae54">msg_find_by_tech_name</a>(tech_name);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;   <span class="keywordflow">if</span> (!msg_tech) {</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No message technology &#39;%s&#39; found.\n&quot;</span>, tech_name);</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MESSAGE_SEND_STATUS&quot;</span>, <span class="stringliteral">&quot;INVALID_PROTOCOL&quot;</span>);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordflow">goto</span> exit_cleanup;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="comment">    * If there was a &quot;to&quot; in the call to MessageSend,</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="comment">    * replace the to already in the channel datastore.</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.to)) {</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(msg, to, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.to);</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;   }</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment">    * The message lock is held here to safely allow the technology</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="comment">    * implementation to access the message fields without worrying</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="comment">    * that they could change.</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(msg);</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   res = msg_tech-&gt;<a class="code" href="../../df/dfc/structast__msg__tech.html#a2a5acdb1cb93547c55bb532d5b761068">msg_send</a>(msg, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.destination, <span class="stringliteral">&quot;&quot;</span>), <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.from, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(msg);</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MESSAGE_SEND_STATUS&quot;</span>, res ? <span class="stringliteral">&quot;FAILURE&quot;</span> : <span class="stringliteral">&quot;SUCCESS&quot;</span>);</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;exit_cleanup:</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;}</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#ad17a1a2d3b629f3c8dc6048fe36d57ca"> 1306</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#ad17a1a2d3b629f3c8dc6048fe36d57ca">action_messagesend</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;{</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *to = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;To&quot;</span>));</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#a765533dfc643627999c751f7e1514664">from</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;From&quot;</span>);</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *body = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Body&quot;</span>);</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *base64body = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Base64Body&quot;</span>);</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;   <span class="keywordtype">char</span> base64decoded[1301] = { 0, };</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;   <span class="keywordtype">char</span> *tech_name = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *vars = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *data = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/dfc/structast__msg__tech.html">ast_msg_tech</a> *<a class="code" href="../../da/d83/res__pjsip__messaging_8c.html#adee47ce28cd17bbdc773df287fc062c5">msg_tech</a>;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(to)) {</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No &#39;To&#39; address specified.&quot;</span>);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(base64body)) {</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) base64decoded, base64body, <span class="keyword">sizeof</span>(base64decoded) - 1);</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      body = base64decoded;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;   }</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   tech_name = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(to);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   tech_name = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;tech_name, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;   msg_tech = <a class="code" href="../../d0/d6d/message_8c.html#a36b93aa94088482efc94c9d13b19ae54">msg_find_by_tech_name</a>(tech_name);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   <span class="keywordflow">if</span> (!msg_tech) {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Message technology not found.&quot;</span>);</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   }</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   <span class="keywordflow">if</span> (!(msg = <a class="code" href="../../d0/d6d/message_8c.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a>())) {</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Internal failure\n&quot;</span>);</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;   }</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;   data = <a class="code" href="../../df/d72/group__Group__AMI.html#gaa97739ea571e22b9dcd231658f6ce044">astman_get_variables_order</a>(m, <a class="code" href="../../db/d45/manager_8h.html#a5622d5b2d0baf505daf7b2a1e99c1140a68beaf6e96b2e55b9301d1883add4c0a">ORDER_NATURAL</a>);</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   <span class="keywordflow">for</span> (vars = data; <a class="code" href="../../df/da1/structast__msg.html#a3493de2682f77ff3fe7314d092b721e4">vars</a>; vars = vars-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      <a class="code" href="../../d0/d6d/message_8c.html#ad5ca4649880cd7535b381354a6d7b042">ast_msg_set_var_outbound</a>(msg, vars-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, vars-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   }</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;   <a class="code" href="../../d0/d6d/message_8c.html#aa21f081993590c1410b287d717a92282">ast_msg_set_body</a>(msg, <span class="stringliteral">&quot;%s&quot;</span>, body);</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;   res = msg_tech-&gt;<a class="code" href="../../df/dfc/structast__msg__tech.html#a2a5acdb1cb93547c55bb532d5b761068">msg_send</a>(msg, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(to, <span class="stringliteral">&quot;&quot;</span>), <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(from, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(vars);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Message failed to send.&quot;</span>);</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Message successfully sent&quot;</span>);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   }</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;}</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;</div><div class="line"><a name="l01369"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a156e69ed5bb6764a00bece684013d3cb"> 1369</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a156e69ed5bb6764a00bece684013d3cb">ast_msg_send</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/da1/structast__msg.html#aa3d35b7db1e41abf114ef7c404ffb149">to</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#a765533dfc643627999c751f7e1514664">from</a>)</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;{</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   <span class="keywordtype">char</span> *tech_name = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/dfc/structast__msg__tech.html">ast_msg_tech</a> *<a class="code" href="../../da/d83/res__pjsip__messaging_8c.html#adee47ce28cd17bbdc773df287fc062c5">msg_tech</a>;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(to)) {</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   }</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;   tech_name = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(to);</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;   tech_name = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;tech_name, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;   msg_tech = <a class="code" href="../../d0/d6d/message_8c.html#a36b93aa94088482efc94c9d13b19ae54">msg_find_by_tech_name</a>(tech_name);</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;   <span class="keywordflow">if</span> (!msg_tech) {</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unknown message tech: %s\n&quot;</span>, tech_name);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   }</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;   res = msg_tech-&gt;<a class="code" href="../../df/dfc/structast__msg__tech.html#a2a5acdb1cb93547c55bb532d5b761068">msg_send</a>(msg, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(to, <span class="stringliteral">&quot;&quot;</span>), <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(from, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;}</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="comment"> * \brief Structure used to transport a message through the frame core</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment"> * \since 13.22.0</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="comment"> * \since 15.5.0</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01406"></a><span class="lineno"><a class="line" href="../../d9/d44/structast__msg__data.html"> 1406</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> {<span class="comment"></span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">   /*! The length of this structure plus the actual length of the allocated buffer */</span></div><div class="line"><a name="l01408"></a><span class="lineno"><a class="line" href="../../d9/d44/structast__msg__data.html#ae809d5359ac030c60a30a8f0b2294b82"> 1408</a></span>&#160;   <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d44/structast__msg__data.html#ae809d5359ac030c60a30a8f0b2294b82">length</a>;</div><div class="line"><a name="l01409"></a><span class="lineno"><a class="line" href="../../d9/d44/structast__msg__data.html#a47d01f34a70933205aa514f418f70334"> 1409</a></span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga8e03c05d9a579130cae1af412fb6c580">ast_msg_data_source_type</a> source;<span class="comment"></span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">   /*! These are indices into the buffer where teh attribute starts */</span></div><div class="line"><a name="l01411"></a><span class="lineno"><a class="line" href="../../d9/d44/structast__msg__data.html#a9e5ae1aaeb5509d8d9c3be3613af179b"> 1411</a></span>&#160;   <span class="keywordtype">int</span> attribute_value_offsets[<a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22aa5f25a8885c828f3dbae51ec91daec9d">__AST_MSG_DATA_ATTR_LAST</a>];<span class="comment"></span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="comment">   /*! The buffer containing the NULL separated attributes */</span></div><div class="line"><a name="l01413"></a><span class="lineno"><a class="line" href="../../d9/d44/structast__msg__data.html#a103a957b017f6b717767bba130a02694"> 1413</a></span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[0];</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;};</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div><div class="line"><a name="l01416"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#ae6824ede2a0d0608e7beaabeabe6361a"> 1416</a></span>&#160;<span class="preprocessor">#define ATTRIBUTE_UNSET -1</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div><div class="line"><a name="l01418"></a><span class="lineno"><a class="line" href="../../d8/d0e/group__ast__msg__data.html#ga0f7d3a1a337b48830c3531ed90594b3a"> 1418</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *<a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga0f7d3a1a337b48830c3531ed90594b3a">ast_msg_data_alloc</a>(<span class="keyword">enum</span> <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga8e03c05d9a579130cae1af412fb6c580">ast_msg_data_source_type</a> <a class="code" href="../../d9/d44/structast__msg__data.html#a47d01f34a70933205aa514f418f70334">source</a>,</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d7/d04/structast__msg__data__attribute.html">ast_msg_data_attribute</a> attributes[], <span class="keywordtype">size_t</span> count)</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;{</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = <span class="keyword">sizeof</span>(*msg);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   <span class="keywordtype">size_t</span> i;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   <span class="keywordtype">size_t</span> current_offset = 0;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga44ac88ed1b656e254dcad5cf0dbd2a22">ast_msg_data_attribute_type</a> attr_type;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;   <span class="keywordflow">if</span> (!attributes) {</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(attributes != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   }</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;   <span class="keywordflow">if</span> (!count) {</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(count &gt; 0);</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   }</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;   <span class="comment">/* Calculate the length required for the buffer */</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;   <span class="keywordflow">for</span> (i=0; i &lt; count; i++) {</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      <span class="keywordflow">if</span> (!attributes[i].<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>) {</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(attributes[i].value != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      }</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      len += (strlen(attributes[i].value) + 1);</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;   }</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;   msg = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, len);</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;   }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;   msg-&gt;<a class="code" href="../../d9/d44/structast__msg__data.html#a47d01f34a70933205aa514f418f70334">source</a> = <a class="code" href="../../d9/d44/structast__msg__data.html#a47d01f34a70933205aa514f418f70334">source</a>;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;   msg-&gt;<a class="code" href="../../d9/d44/structast__msg__data.html#ae809d5359ac030c60a30a8f0b2294b82">length</a> = <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;   <span class="comment">/* Mark all of the attributes as unset */</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;   <span class="keywordflow">for</span> (attr_type = 0; attr_type &lt; <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22aa5f25a8885c828f3dbae51ec91daec9d">__AST_MSG_DATA_ATTR_LAST</a>; attr_type++) {</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      msg-&gt;<a class="code" href="../../d9/d44/structast__msg__data.html#a9e5ae1aaeb5509d8d9c3be3613af179b">attribute_value_offsets</a>[attr_type] = <a class="code" href="../../d0/d6d/message_8c.html#ae6824ede2a0d0608e7beaabeabe6361a">ATTRIBUTE_UNSET</a>;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;   }</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;   <span class="comment">/* Set the ones we have and increment the offset */</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;   <span class="keywordflow">for</span> (i=0; i &lt; count; i++) {</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      len = (strlen(attributes[i].<a class="code" href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">value</a>) + 1);</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(msg-&gt;<a class="code" href="../../d9/d44/structast__msg__data.html#a103a957b017f6b717767bba130a02694">buf</a> + current_offset, attributes[i].<a class="code" href="../../d7/d04/structast__msg__data__attribute.html#a4e9aec275e566b978a3ccb4e043d8c61">value</a>, len); <span class="comment">/* Safe */</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      msg-&gt;<a class="code" href="../../d9/d44/structast__msg__data.html#a9e5ae1aaeb5509d8d9c3be3613af179b">attribute_value_offsets</a>[attributes[i].<a class="code" href="../../d7/d04/structast__msg__data__attribute.html#a7274332d005eb44504af2efd26ed54dc">type</a>] = current_offset;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;      current_offset += <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;   }</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;}</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div><div class="line"><a name="l01469"></a><span class="lineno"><a class="line" href="../../d8/d0e/group__ast__msg__data.html#gac19d5671ce7ad4db2a7df0d4784d4cd3"> 1469</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *<a class="code" href="../../d8/d0e/group__ast__msg__data.html#gac19d5671ce7ad4db2a7df0d4784d4cd3">ast_msg_data_alloc2</a>(<span class="keyword">enum</span> <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga8e03c05d9a579130cae1af412fb6c580">ast_msg_data_source_type</a> source_type,</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *to, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d60/structmsg__data.html#a765533dfc643627999c751f7e1514664">from</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *content_type, <span class="keyword">const</span> <span class="keywordtype">char</span> *body)</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;{</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d04/structast__msg__data__attribute.html">ast_msg_data_attribute</a> attrs[] =</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;   {</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      {</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;         .<a class="code" href="../../d7/d04/structast__msg__data__attribute.html#a7274332d005eb44504af2efd26ed54dc">type</a> = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a>,</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;         .value = (<span class="keywordtype">char</span> *)<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(to, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      },</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;      {</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;         .type = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a>,</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;         .value = (<span class="keywordtype">char</span> *)<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(from, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      },</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;      {</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;         .type = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22ad68ccac32a7d354861a476fe99a88f2c">AST_MSG_DATA_ATTR_CONTENT_TYPE</a>,</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;         .value = (<span class="keywordtype">char</span> *)<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(content_type, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      },</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      {</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;         .type = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a>,</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;         .value = (<span class="keywordtype">char</span> *)<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(body, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      },</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   };</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga0f7d3a1a337b48830c3531ed90594b3a">ast_msg_data_alloc</a>(source_type, attrs, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(attrs));</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;}</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div><div class="line"><a name="l01495"></a><span class="lineno"><a class="line" href="../../d8/d0e/group__ast__msg__data.html#ga9c757943fd32c228f911b6f8e1e91046"> 1495</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *<a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga9c757943fd32c228f911b6f8e1e91046">ast_msg_data_dup</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;{</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *dest;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(msg != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   }</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   dest = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(msg-&gt;<a class="code" href="../../d9/d44/structast__msg__data.html#ae809d5359ac030c60a30a8f0b2294b82">length</a>);</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;   <span class="keywordflow">if</span> (!dest) {</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;   }</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   memcpy(dest, msg, msg-&gt;<a class="code" href="../../d9/d44/structast__msg__data.html#ae809d5359ac030c60a30a8f0b2294b82">length</a>);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;   <span class="keywordflow">return</span> dest;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;}</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;</div><div class="line"><a name="l01513"></a><span class="lineno"><a class="line" href="../../d8/d0e/group__ast__msg__data.html#gafe0003d5c882180061f9da68d89840c5"> 1513</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gafe0003d5c882180061f9da68d89840c5">ast_msg_data_get_length</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;{</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(msg != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;   }</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;   <span class="keywordflow">return</span> msg-&gt;<a class="code" href="../../d9/d44/structast__msg__data.html#ae809d5359ac030c60a30a8f0b2294b82">length</a>;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;}</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div><div class="line"><a name="l01523"></a><span class="lineno"><a class="line" href="../../d8/d0e/group__ast__msg__data.html#ga163fdfc6e33b995dc49e277d4b246ec8"> 1523</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga8e03c05d9a579130cae1af412fb6c580">ast_msg_data_source_type</a> <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga163fdfc6e33b995dc49e277d4b246ec8">ast_msg_data_get_source_type</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;{</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(msg != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga8e03c05d9a579130cae1af412fb6c580a711186ed6f4afa0cccc12908e40c511d">AST_MSG_DATA_SOURCE_TYPE_UNKNOWN</a>;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;   }</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;   <span class="keywordflow">return</span> msg-&gt;<a class="code" href="../../d9/d44/structast__msg__data.html#a47d01f34a70933205aa514f418f70334">source</a>;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;}</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div><div class="line"><a name="l01533"></a><span class="lineno"><a class="line" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665"> 1533</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>,</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga44ac88ed1b656e254dcad5cf0dbd2a22">ast_msg_data_attribute_type</a> attribute_type)</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;{</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(msg != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;   }</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="../../d9/d44/structast__msg__data.html#a9e5ae1aaeb5509d8d9c3be3613af179b">attribute_value_offsets</a>[attribute_type] &gt; <a class="code" href="../../d0/d6d/message_8c.html#ae6824ede2a0d0608e7beaabeabe6361a">ATTRIBUTE_UNSET</a>) {</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      <span class="keywordflow">return</span> msg-&gt;<a class="code" href="../../d9/d44/structast__msg__data.html#a103a957b017f6b717767bba130a02694">buf</a> + msg-&gt;<a class="code" href="../../d9/d44/structast__msg__data.html#a9e5ae1aaeb5509d8d9c3be3613af179b">attribute_value_offsets</a>[attribute_type];</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;   }</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;}</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;</div><div class="line"><a name="l01548"></a><span class="lineno"><a class="line" href="../../d8/d0e/group__ast__msg__data.html#gafd6d14befbb5e93cf537ef6052676362"> 1548</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gafd6d14befbb5e93cf537ef6052676362">ast_msg_data_queue_frame</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a>, <span class="keyword">struct</span> <a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *<a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>)</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;{</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   <span class="keywordflow">if</span> (!channel) {</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(channel != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;   }</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(msg != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;   }</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;   memset(&amp;f, 0, <span class="keyword">sizeof</span>(f));</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;   f.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741">AST_FRAME_TEXT_DATA</a>;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;   f.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = <a class="code" href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg</a>;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;   f.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = msg-&gt;<a class="code" href="../../d9/d44/structast__msg__data.html#ae809d5359ac030c60a30a8f0b2294b82">length</a>;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(channel, &amp;f);</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;}</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div><div class="line"><a name="l01569"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a98ae66acbd6268c5010acf52be7e40a4"> 1569</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a98ae66acbd6268c5010acf52be7e40a4">ast_msg_tech_register</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/dfc/structast__msg__tech.html">ast_msg_tech</a> *tech)</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;{</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/dfc/structast__msg__tech.html">ast_msg_tech</a> *<a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;   match = <a class="code" href="../../d0/d6d/message_8c.html#a36b93aa94088482efc94c9d13b19ae54">msg_find_by_tech_name</a>(tech-&gt;<a class="code" href="../../df/dfc/structast__msg__tech.html#acc128f98d9ceca227038c771308eff39">name</a>);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;   <span class="keywordflow">if</span> (match) {</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Message technology already registered for &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;              tech-&gt;<a class="code" href="../../df/dfc/structast__msg__tech.html#acc128f98d9ceca227038c771308eff39">name</a>);</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;   }</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;msg_techs, tech)) {</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to register message technology for &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;              tech-&gt;<a class="code" href="../../df/dfc/structast__msg__tech.html#acc128f98d9ceca227038c771308eff39">name</a>);</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;   }</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Message technology &#39;%s&#39; registered.\n&quot;</span>, tech-&gt;<a class="code" href="../../df/dfc/structast__msg__tech.html#acc128f98d9ceca227038c771308eff39">name</a>);</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;}</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="comment"> * \brief Comparison callback for \c ast_msg_tech vector removal</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;<span class="comment"> * \param vec_elem The element in the vector being compared</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="comment"> * \param srch The element being looked up</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="comment"> * \retval non-zero The items are equal</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment"> * \retval 0 The items are not equal</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01605"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a874827c03c7af053fb205162c1920bf3"> 1605</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a874827c03c7af053fb205162c1920bf3">msg_tech_cmp</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/dfc/structast__msg__tech.html">ast_msg_tech</a> *vec_elem, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/dfc/structast__msg__tech.html">ast_msg_tech</a> *srch)</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;{</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;   <span class="keywordflow">return</span> !strcmp(vec_elem-&gt;<a class="code" href="../../df/dfc/structast__msg__tech.html#acc128f98d9ceca227038c771308eff39">name</a>, srch-&gt;<a class="code" href="../../df/dfc/structast__msg__tech.html#acc128f98d9ceca227038c771308eff39">name</a>);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;}</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;</div><div class="line"><a name="l01610"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a8a1ffcfecf1ffbc22c526796cdf954a7"> 1610</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a8a1ffcfecf1ffbc22c526796cdf954a7">ast_msg_tech_unregister</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/dfc/structast__msg__tech.html">ast_msg_tech</a> *tech)</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;{</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   match = <a class="code" href="../../d6/d68/vector_8h.html#a671c51a3e6202230ef9d2330624ea996">AST_VECTOR_REMOVE_CMP_UNORDERED</a>(&amp;msg_techs, tech, <a class="code" href="../../d0/d6d/message_8c.html#a874827c03c7af053fb205162c1920bf3">msg_tech_cmp</a>,</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                                           <a class="code" href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a>);</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;   <span class="keywordflow">if</span> (match) {</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No &#39;%s&#39; message technology found.\n&quot;</span>, tech-&gt;<a class="code" href="../../df/dfc/structast__msg__tech.html#acc128f98d9ceca227038c771308eff39">name</a>);</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;   }</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Message technology &#39;%s&#39; unregistered.\n&quot;</span>, tech-&gt;<a class="code" href="../../df/dfc/structast__msg__tech.html#acc128f98d9ceca227038c771308eff39">name</a>);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;}</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;</div><div class="line"><a name="l01629"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3"> 1629</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a> *<a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>)</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;{</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a> *<a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;msg_handlers_lock);</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;   match = <a class="code" href="../../d0/d6d/message_8c.html#a6f22abc58303085be436c81bd598eeca">msg_handler_find_by_tech_name</a>(handler-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;   <span class="keywordflow">if</span> (match) {</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Message handler already registered for &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;              handler-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_handlers_lock);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;   }</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;msg_handlers, handler)) {</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to register message handler for &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;              handler-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_handlers_lock);</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   }</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Message handler &#39;%s&#39; registered.\n&quot;</span>, handler-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_handlers_lock);</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;}</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment"> * \brief Comparison callback for \c ast_msg_handler vector removal</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="comment"> * \param vec_elem The element in the vector being compared</span></div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="comment"> * \param srch The element being looked up</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment"> * \retval non-zero The items are equal</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment"> * \retval 0 The items are not equal</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01666"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a0d02014956ac1200c74dd897798b3216"> 1666</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a0d02014956ac1200c74dd897798b3216">msg_handler_cmp</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a> *vec_elem, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a> *srch)</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;{</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;   <span class="keywordflow">return</span> !strcmp(vec_elem-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, srch-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;}</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;</div><div class="line"><a name="l01671"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a35344e60cbd464b87c57fc74d072e255"> 1671</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a> *<a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>)</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;{</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;msg_handlers_lock);</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;   match = <a class="code" href="../../d6/d68/vector_8h.html#a671c51a3e6202230ef9d2330624ea996">AST_VECTOR_REMOVE_CMP_UNORDERED</a>(&amp;msg_handlers, handler, <a class="code" href="../../d0/d6d/message_8c.html#a0d02014956ac1200c74dd897798b3216">msg_handler_cmp</a>,</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                                           <a class="code" href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a>);</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;msg_handlers_lock);</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;   <span class="keywordflow">if</span> (match) {</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No &#39;%s&#39; message handler found.\n&quot;</span>, handler-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;   }</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Message handler &#39;%s&#39; unregistered.\n&quot;</span>, handler-&gt;<a class="code" href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;}</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div><div class="line"><a name="l01689"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a1d5619ebb98bc129dfadf3a7a565f412"> 1689</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/d6d/message_8c.html#a1d5619ebb98bc129dfadf3a7a565f412">ast_msg_shutdown</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;{</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;   <span class="keywordflow">if</span> (msg_q_tp) {</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      msg_q_tp = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(msg_q_tp);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;   }</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;}</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="comment"> * \brief Clean up other resources on Asterisk shutdown</span></div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment"> * \note This does not include the msg_q_tp object, which must be disposed</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment"> * of prior to Asterisk checking for channel destruction in its shutdown</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment"> * sequence.  The atexit handlers are executed after this occurs.</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01704"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a9611f0a1fb814d0a01b4d0b1fa322332"> 1704</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d6d/message_8c.html#a9611f0a1fb814d0a01b4d0b1fa322332">message_shutdown</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;{</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;   <a class="code" href="../../d0/d6d/message_8c.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a>(&amp;dialplan_msg_handler);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;msg_function);</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;msg_data_function);</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(app_msg_send);</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;MessageSend&quot;</span>);</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;msg_techs);</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab1d35b9611e8b5143ec695ead1b5d8d1">ast_rwlock_destroy</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;msg_handlers);</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab1d35b9611e8b5143ec695ead1b5d8d1">ast_rwlock_destroy</a>(&amp;msg_handlers_lock);</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;}</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="comment"> * \brief Initialize stuff during Asterisk startup.</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;<span class="comment"> * Cleanup isn&#39;t a big deal in this function.  If we return non-zero,</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;<span class="comment"> * Asterisk is going to exit.</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;<span class="comment"> * \retval 0 success</span></div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;<span class="comment"> * \retval non-zero failure</span></div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01730"></a><span class="lineno"><a class="line" href="../../d0/d6d/message_8c.html#a698f7bb2f1591726001330e95cc8950f"> 1730</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/d6d/message_8c.html#a698f7bb2f1591726001330e95cc8950f">ast_msg_init</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;{</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;   msg_q_tp = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a>(<span class="stringliteral">&quot;ast_msg_queue&quot;</span>, <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a>);</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;   <span class="keywordflow">if</span> (!msg_q_tp) {</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;   }</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a9b07039db138693d1ebe02c3e99ddcab">ast_rwlock_init</a>(&amp;msg_techs_lock);</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;msg_techs, 8)) {</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;   }</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a9b07039db138693d1ebe02c3e99ddcab">ast_rwlock_init</a>(&amp;msg_handlers_lock);</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;msg_handlers, 4)) {</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;   }</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;   res = <a class="code" href="../../d0/d6d/message_8c.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a>(&amp;dialplan_msg_handler);</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#aad8771c7e3b2170a749946f1a8b758aa">__ast_custom_function_register</a>(&amp;msg_function, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#aad8771c7e3b2170a749946f1a8b758aa">__ast_custom_function_register</a>(&amp;msg_data_function, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#a5fd926a7510f3d3fd0d69ae710ec1e89">ast_register_application2</a>(app_msg_send, <a class="code" href="../../d0/d6d/message_8c.html#a9f578efd386044ab116db578dbe189fb">msg_send_exec</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a1d34461b8a3210b19e66f06bcdebfeb3">ast_manager_register_xml_core</a>(<span class="stringliteral">&quot;MessageSend&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab85694f6b643f767a2d61c37c2b87753">EVENT_FLAG_MESSAGE</a>, <a class="code" href="../../d0/d6d/message_8c.html#ad17a1a2d3b629f3c8dc6048fe36d57ca">action_messagesend</a>);</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../d0/d6d/message_8c.html#a9611f0a1fb814d0a01b4d0b1fa322332">message_shutdown</a>);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;}</div><div class="ttc" id="structast__custom__function_html_afcd1706c9144e6d6eee6127661ae3be2"><div class="ttname"><a href="../../db/dc0/structast__custom__function.html#afcd1706c9144e6d6eee6127661ae3be2">ast_custom_function::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00119">pbx.h:119</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gafe0003d5c882180061f9da68d89840c5"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gafe0003d5c882180061f9da68d89840c5">ast_msg_data_get_length</a></div><div class="ttdeci">size_t ast_msg_data_get_length(struct ast_msg_data *msg)</div><div class="ttdoc">Get length of the structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01513">message.c:1513</a></div></div>
<div class="ttc" id="structast__datastore__info_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_datastore_info::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00032">datastore.h:32</a></div></div>
<div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="message_8c_html_af2608cbfce12316c5f57e528dcb073c6"><div class="ttname"><a href="../../d0/d6d/message_8c.html#af2608cbfce12316c5f57e528dcb073c6">AST_VECTOR</a></div><div class="ttdeci">AST_VECTOR(const struct ast_msg_tech *)</div><div class="ttdoc">Vector of message technologies. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00258">message.c:258</a></div></div>
<div class="ttc" id="structast__pbx__args_html"><div class="ttname"><a href="../../da/db8/structast__pbx__args.html">ast_pbx_args</a></div><div class="ttdoc">Options for ast_pbx_run() </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00391">pbx.h:391</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22ad68ccac32a7d354861a476fe99a88f2c"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22ad68ccac32a7d354861a476fe99a88f2c">AST_MSG_DATA_ATTR_CONTENT_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00457">message.h:457</a></div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="lock_8h_html_a7330ac9d36b05bad68b188c2dcfa42d7"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a></div><div class="ttdeci">#define ast_rwlock_rdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00233">lock.h:233</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741">AST_FRAME_TEXT_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00137">include/asterisk/frame.h:137</a></div></div>
<div class="ttc" id="message_8c_html_ae332bf0860c6b752b8d4abae58592a4a"><div class="ttname"><a href="../../d0/d6d/message_8c.html#ae332bf0860c6b752b8d4abae58592a4a">dialplan_has_destination_cb</a></div><div class="ttdeci">static int dialplan_has_destination_cb(const struct ast_msg *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00883">message.c:883</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a8ff938fb2f815be425fd2859a21e6d61"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">ast_channel_tech::type</a></div><div class="ttdeci">const char *const type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00630">channel.h:630</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00458">message.h:458</a></div></div>
<div class="ttc" id="asterisk_8h_html"><div class="ttname"><a href="../../db/db2/asterisk_8h.html">asterisk.h</a></div><div class="ttdoc">Asterisk main include file. File version handling, generic pbx functions. </div></div>
<div class="ttc" id="message_8c_html_a9e2045ad672c0afd5fb2616fec6bc666"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a></div><div class="ttdeci">int ast_msg_set_context(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the dialplan context for this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00487">message.c:487</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_ga163fdfc6e33b995dc49e277d4b246ec8"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga163fdfc6e33b995dc49e277d4b246ec8">ast_msg_data_get_source_type</a></div><div class="ttdeci">enum ast_msg_data_source_type ast_msg_data_get_source_type(struct ast_msg_data *msg)</div><div class="ttdoc">Get &quot;source type&quot; from ast_msg_data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01523">message.c:1523</a></div></div>
<div class="ttc" id="message_8c_html_a1d5619ebb98bc129dfadf3a7a565f412"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a1d5619ebb98bc129dfadf3a7a565f412">ast_msg_shutdown</a></div><div class="ttdeci">void ast_msg_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01689">message.c:1689</a></div></div>
<div class="ttc" id="structouthead_html"><div class="ttname"><a href="../../d6/d88/structouthead.html">outhead</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00228">message.c:228</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="message_8c_html_afce4a6d662471cce51961b92f7b75cb2"><div class="ttname"><a href="../../d0/d6d/message_8c.html#afce4a6d662471cce51961b92f7b75cb2">msg_chan_tech_hack</a></div><div class="ttdeci">static struct ast_channel_tech msg_chan_tech_hack</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00314">message.c:314</a></div></div>
<div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="structast__msg__handler_html_a2dd0939e9aa5117cba237e5bdca0f39f"><div class="ttname"><a href="../../d5/d80/structast__msg__handler.html#a2dd0939e9aa5117cba237e5bdca0f39f">ast_msg_handler::handle_msg</a></div><div class="ttdeci">int(*const handle_msg)(struct ast_msg *msg)</div><div class="ttdoc">The function callback that will handle the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00112">message.h:112</a></div></div>
<div class="ttc" id="structast__msg__var__iterator_html_ad124a1fa9e80dc3b4cd9d537ba16d3d4"><div class="ttname"><a href="../../d6/d23/structast__msg__var__iterator.html#ad124a1fa9e80dc3b4cd9d537ba16d3d4">ast_msg_var_iterator::iter</a></div><div class="ttdeci">struct ao2_iterator iter</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00640">message.c:640</a></div></div>
<div class="ttc" id="structmsg__data_html"><div class="ttname"><a href="../../d3/d60/structmsg__data.html">msg_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00220">message.c:220</a></div></div>
<div class="ttc" id="strings_8h_html"><div class="ttname"><a href="../../d6/d90/strings_8h.html">strings.h</a></div><div class="ttdoc">String manipulation functions. </div></div>
<div class="ttc" id="structast__msg__data__attribute_html_a7274332d005eb44504af2efd26ed54dc"><div class="ttname"><a href="../../d7/d04/structast__msg__data__attribute.html#a7274332d005eb44504af2efd26ed54dc">ast_msg_data_attribute::type</a></div><div class="ttdeci">enum ast_msg_data_attribute_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00463">message.h:463</a></div></div>
<div class="ttc" id="message_8c_html_acb1ec128301413ebf9343f01b176b59f"><div class="ttname"><a href="../../d0/d6d/message_8c.html#acb1ec128301413ebf9343f01b176b59f">ast_msg_var_iterator_next_received</a></div><div class="ttdeci">int ast_msg_var_iterator_next_received(const struct ast_msg *msg, struct ast_msg_var_iterator *iter, const char **name, const char **value)</div><div class="ttdoc">Get the next variable name and value that was set on a received message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00694">message.c:694</a></div></div>
<div class="ttc" id="structmsg__data_html_a765533dfc643627999c751f7e1514664"><div class="ttname"><a href="../../d3/d60/structmsg__data.html#a765533dfc643627999c751f7e1514664">msg_data::from</a></div><div class="ttdeci">char * from</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d83/res__pjsip__messaging_8c_source.html#l01126">res_pjsip_messaging.c:1126</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_ga9c757943fd32c228f911b6f8e1e91046"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga9c757943fd32c228f911b6f8e1e91046">ast_msg_data_dup</a></div><div class="ttdeci">struct ast_msg_data * ast_msg_data_dup(struct ast_msg_data *msg)</div><div class="ttdoc">Clone an ast_msg_data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01495">message.c:1495</a></div></div>
<div class="ttc" id="vector_8h_html_a671c51a3e6202230ef9d2330624ea996"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a671c51a3e6202230ef9d2330624ea996">AST_VECTOR_REMOVE_CMP_UNORDERED</a></div><div class="ttdeci">#define AST_VECTOR_REMOVE_CMP_UNORDERED(vec, value, cmp, cleanup)</div><div class="ttdoc">Remove an element from a vector that matches the given comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00488">vector.h:488</a></div></div>
<div class="ttc" id="message_8c_html_aaafef9d7e5e9a814f6d481f531706ced"><div class="ttname"><a href="../../d0/d6d/message_8c.html#aaafef9d7e5e9a814f6d481f531706ced">msg_route</a></div><div class="ttdeci">static void msg_route(struct ast_channel *chan, struct ast_msg *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00756">message.c:756</a></div></div>
<div class="ttc" id="message_8c_html_a2bae004309095c8c0d7e60e038218476"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a2bae004309095c8c0d7e60e038218476">msg_data_cmp_fn</a></div><div class="ttdeci">static int msg_data_cmp_fn(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00398">message.c:398</a></div></div>
<div class="ttc" id="lock_8h_html_ab1d35b9611e8b5143ec695ead1b5d8d1"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab1d35b9611e8b5143ec695ead1b5d8d1">ast_rwlock_destroy</a></div><div class="ttdeci">#define ast_rwlock_destroy(rwlock)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00231">lock.h:231</a></div></div>
<div class="ttc" id="structast__msg__handler_html"><div class="ttname"><a href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a></div><div class="ttdoc">An external processor of received messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00098">message.h:98</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="message_8c_html_a0e4685c7cf1d71204087b992110e6357"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a></div><div class="ttdeci">struct ast_msg * ast_msg_alloc(void)</div><div class="ttdoc">Allocate a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00418">message.c:418</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2448088751e4d494d1981c7f4b84e8d0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a></div><div class="ttdeci">#define OBJ_POINTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01154">astobj2.h:1154</a></div></div>
<div class="ttc" id="channel_8h_html_a015abb5b26bfba6ca64f10fd9e0468ba"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a015abb5b26bfba6ca64f10fd9e0468ba">ast_channel_release</a></div><div class="ttdeci">struct ast_channel * ast_channel_release(struct ast_channel *chan)</div><div class="ttdoc">Unlink and release reference to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01584">channel.c:1584</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ac999cc9523590a29dff6acbd9cad24a9"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a></div><div class="ttdeci">struct ast_taskprocessor * ast_taskprocessor_get(const char *name, enum ast_tps_options create)</div><div class="ttdoc">Get a reference to a taskprocessor with the specified name and create the taskprocessor if necessary...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01044">taskprocessor.c:1044</a></div></div>
<div class="ttc" id="message_8c_html_a92ac04b958a264b71eb8a4a68a88058b"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a92ac04b958a264b71eb8a4a68a88058b">msg_data_destructor</a></div><div class="ttdeci">static void msg_data_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00404">message.c:404</a></div></div>
<div class="ttc" id="message_8c_html_abd98509b6e22ab33822ff3c7a2e35756"><div class="ttname"><a href="../../d0/d6d/message_8c.html#abd98509b6e22ab33822ff3c7a2e35756">ast_msg_get_body</a></div><div class="ttdeci">const char * ast_msg_get_body(const struct ast_msg *msg)</div><div class="ttdoc">Get the body of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00531">message.c:531</a></div></div>
<div class="ttc" id="astobj2_8h_html_add41bd9979cb8642f81dd38aa2dfcd6d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a></div><div class="ttdeci">#define ao2_container_alloc_list(ao2_options, container_options, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01335">astobj2.h:1335</a></div></div>
<div class="ttc" id="structast__msg_html_aa3d35b7db1e41abf114ef7c404ffb149"><div class="ttname"><a href="../../df/da1/structast__msg.html#aa3d35b7db1e41abf114ef7c404ffb149">ast_msg::to</a></div><div class="ttdeci">const ast_string_field to</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00249">message.c:249</a></div></div>
<div class="ttc" id="message_8c_html_a9b4a41f815fa2f37ed29ac32b3d5d3a3"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a></div><div class="ttdeci">int ast_msg_handler_register(const struct ast_msg_handler *handler)</div><div class="ttdoc">Register a ast_msg_handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01629">message.c:1629</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="message_8c_html_a8eeafc4ede747f5d2cbd093cc8060e00"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a8eeafc4ede747f5d2cbd093cc8060e00">msg_q_chan</a></div><div class="ttdeci">static struct ast_threadstorage msg_q_chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00849">message.c:849</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a></div><div class="ttdoc">return a reference to a taskprocessor, create one if it does not exist </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00075">taskprocessor.h:75</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga8e03c05d9a579130cae1af412fb6c580a711186ed6f4afa0cccc12908e40c511d"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga8e03c05d9a579130cae1af412fb6c580a711186ed6f4afa0cccc12908e40c511d">AST_MSG_DATA_SOURCE_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00447">message.h:447</a></div></div>
<div class="ttc" id="structast__msg__tech_html_acc128f98d9ceca227038c771308eff39"><div class="ttname"><a href="../../df/dfc/structast__msg__tech.html#acc128f98d9ceca227038c771308eff39">ast_msg_tech::name</a></div><div class="ttdeci">const char *const name</div><div class="ttdoc">Name of this message technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00061">message.h:61</a></div></div>
<div class="ttc" id="structast__datastore__info_html"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a></div><div class="ttdoc">Structure for a data store type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00031">datastore.h:31</a></div></div>
<div class="ttc" id="structast__msg__data_html"><div class="ttname"><a href="../../d9/d44/structast__msg__data.html">ast_msg_data</a></div><div class="ttdoc">Structure used to transport a message through the frame core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01406">message.c:1406</a></div></div>
<div class="ttc" id="message_8c_html_a35344e60cbd464b87c57fc74d072e255"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a></div><div class="ttdeci">int ast_msg_handler_unregister(const struct ast_msg_handler *handler)</div><div class="ttdoc">Unregister a ast_msg_handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01671">message.c:1671</a></div></div>
<div class="ttc" id="message_8c_html_ae8972ac2a270671ede66f2510b272b27"><div class="ttname"><a href="../../d0/d6d/message_8c.html#ae8972ac2a270671ede66f2510b272b27">destroy_msg_q_chan</a></div><div class="ttdeci">static void destroy_msg_q_chan(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00838">message.c:838</a></div></div>
<div class="ttc" id="message_8c_html_a9611f0a1fb814d0a01b4d0b1fa322332"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a9611f0a1fb814d0a01b4d0b1fa322332">message_shutdown</a></div><div class="ttdeci">static void message_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01704">message.c:1704</a></div></div>
<div class="ttc" id="structmsg__data_html_abd0d95fa707f8b31fe34c7172280c437"><div class="ttname"><a href="../../d3/d60/structmsg__data.html#abd0d95fa707f8b31fe34c7172280c437">msg_data::send</a></div><div class="ttdeci">unsigned int send</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00225">message.c:225</a></div></div>
<div class="ttc" id="message_8c_html_a36b93aa94088482efc94c9d13b19ae54"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a36b93aa94088482efc94c9d13b19ae54">msg_find_by_tech_name</a></div><div class="ttdeci">static const struct ast_msg_tech * msg_find_by_tech_name(const char *tech_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01181">message.c:1181</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="structast__msg_html_aa3522da32a7960126d5eb2ac0c1c6c36"><div class="ttname"><a href="../../df/da1/structast__msg.html#aa3522da32a7960126d5eb2ac0c1c6c36">ast_msg::endpoint</a></div><div class="ttdeci">const ast_string_field endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00249">message.c:249</a></div></div>
<div class="ttc" id="message_8c_html_ae4e2f99b86bfa94ce262544223359b8a"><div class="ttname"><a href="../../d0/d6d/message_8c.html#ae4e2f99b86bfa94ce262544223359b8a">msg_data_alloc</a></div><div class="ttdeci">static struct msg_data * msg_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00556">message.c:556</a></div></div>
<div class="ttc" id="stringfields_8h_html_a061580e89c55282a7140fa3fdfd52b6d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a061580e89c55282a7140fa3fdfd52b6d">AST_DECLARE_STRING_FIELDS</a></div><div class="ttdeci">#define AST_DECLARE_STRING_FIELDS(field_list)</div><div class="ttdoc">Declare the fields needed in a structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00337">stringfields.h:337</a></div></div>
<div class="ttc" id="pbx_8h_html_a9f840db4b5ef461ac2c0c975a57c9e89"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9f840db4b5ef461ac2c0c975a57c9e89">ast_explicit_goto</a></div><div class="ttdeci">int ast_explicit_goto(struct ast_channel *chan, const char *context, const char *exten, int priority)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l06987">pbx.c:6987</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_ga0f7d3a1a337b48830c3531ed90594b3a"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga0f7d3a1a337b48830c3531ed90594b3a">ast_msg_data_alloc</a></div><div class="ttdeci">struct ast_msg_data * ast_msg_data_alloc(enum ast_msg_data_source_type source, struct ast_msg_data_attribute attributes[], size_t count)</div><div class="ttdoc">Allocates an ast_msg_data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01418">message.c:1418</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a7dd0190efe1c61151a9dbab078bdb263"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a></div><div class="ttdeci">static int match(struct ast_sockaddr *addr, unsigned short callno, unsigned short dcallno, const struct chan_iax2_pvt *cur, int check_dcallno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l02315">chan_iax2.c:2315</a></div></div>
<div class="ttc" id="res__pjsip__messaging_8c_html_adee47ce28cd17bbdc773df287fc062c5"><div class="ttname"><a href="../../da/d83/res__pjsip__messaging_8c.html#adee47ce28cd17bbdc773df287fc062c5">msg_tech</a></div><div class="ttdeci">static const struct ast_msg_tech msg_tech</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d83/res__pjsip__messaging_8c_source.html#l01373">res_pjsip_messaging.c:1373</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01032">astobj2.h:1032</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="channel_8h_html_aad1e09cd7c79237d05cffb45d6cdfd7c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a></div><div class="ttdeci">struct ast_datastore * ast_channel_datastore_find(struct ast_channel *chan, const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Find a datastore on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02404">channel.c:2404</a></div></div>
<div class="ttc" id="message_8c_html_a5e9d57452f36f2c594799b35d916c27b"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a5e9d57452f36f2c594799b35d916c27b">ast_msg_get_var</a></div><div class="ttdeci">const char * ast_msg_get_var(struct ast_msg *msg, const char *name)</div><div class="ttdoc">Get the specified variable on the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00620">message.c:620</a></div></div>
<div class="ttc" id="channel_8h_html_add6255866ea1651a90cf70d963c4920a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a></div><div class="ttdeci">struct varshead * ast_channel_varshead(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00932">channel_internal_api.c:932</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="message_8c_html_a50cdc29633f1425ce3951398e49df281"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a50cdc29633f1425ce3951398e49df281">msg_function</a></div><div class="ttdeci">static struct ast_custom_function msg_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00282">message.c:282</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__channel_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_channel::data</a></div><div class="ttdeci">const char * data</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00083">channel_internal_api.c:83</a></div></div>
<div class="ttc" id="structast__msg__handler_html_ae84a1fe264a104f27ccd5384ac9b63f5"><div class="ttname"><a href="../../d5/d80/structast__msg__handler.html#ae84a1fe264a104f27ccd5384ac9b63f5">ast_msg_handler::has_destination</a></div><div class="ttdeci">int(*const has_destination)(const struct ast_msg *msg)</div><div class="ttdoc">Return whether or not the message has a valid destination. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00127">message.h:127</a></div></div>
<div class="ttc" id="manager_8h_html_a1d34461b8a3210b19e66f06bcdebfeb3"><div class="ttname"><a href="../../db/d45/manager_8h.html#a1d34461b8a3210b19e66f06bcdebfeb3">ast_manager_register_xml_core</a></div><div class="ttdeci">#define ast_manager_register_xml_core(action, authority, func)</div><div class="ttdoc">Register a manager callback using XML documentation to describe the manager. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00197">manager.h:197</a></div></div>
<div class="ttc" id="message_8h_html"><div class="ttname"><a href="../../d2/d0d/message_8h.html">message.h</a></div><div class="ttdoc">Out-of-call text message support. </div></div>
<div class="ttc" id="structmsg__data_html_a74fb4a11550524adcccccbb455da8ece"><div class="ttname"><a href="../../d3/d60/structmsg__data.html#a74fb4a11550524adcccccbb455da8ece">msg_data::msg</a></div><div class="ttdeci">struct ast_msg * msg</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d83/res__pjsip__messaging_8c_source.html#l01124">res_pjsip_messaging.c:1124</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="message_8c_html_a4d93b78cb49cb749e4c013bcef8a36db"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a4d93b78cb49cb749e4c013bcef8a36db">msg_data_func_read</a></div><div class="ttdeci">static int msg_data_func_read(struct ast_channel *chan, const char *function, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01102">message.c:1102</a></div></div>
<div class="ttc" id="module_8h_html_ad2ca15621101154f29748cf1dac3c3cf"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a></div><div class="ttdeci">int ast_unregister_application(const char *app)</div><div class="ttdoc">Unregister an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00392">pbx_app.c:392</a></div></div>
<div class="ttc" id="message_8c_html_ad11b71dc312056abfcd80727fba68fa6"><div class="ttname"><a href="../../d0/d6d/message_8c.html#ad11b71dc312056abfcd80727fba68fa6">ast_msg_var_unref_current</a></div><div class="ttdeci">void ast_msg_var_unref_current(struct ast_msg_var_iterator *iter)</div><div class="ttdoc">Unref a message var from inside an iterator loop. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00700">message.c:700</a></div></div>
<div class="ttc" id="message_8c_html_aeae1100c0648a4bad17681fd59e24de1"><div class="ttname"><a href="../../d0/d6d/message_8c.html#aeae1100c0648a4bad17681fd59e24de1">msg_data_function</a></div><div class="ttdeci">static struct ast_custom_function msg_data_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00293">message.c:293</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="message_8c_html_a28934ed2a0553c29d7bbcecdb1adf1fb"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a28934ed2a0553c29d7bbcecdb1adf1fb">ast_msg_ref</a></div><div class="ttdeci">struct ast_msg * ast_msg_ref(struct ast_msg *msg)</div><div class="ttdoc">Bump a msg&amp;#39;s ref count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00442">message.c:442</a></div></div>
<div class="ttc" id="message_8c_html_a7e523b0180c095ebef1c7e7c754fee85"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a7e523b0180c095ebef1c7e7c754fee85">ast_msg_get_endpoint</a></div><div class="ttdeci">const char * ast_msg_get_endpoint(const struct ast_msg *msg)</div><div class="ttdoc">Retrieve the endpoint associated with this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00551">message.c:551</a></div></div>
<div class="ttc" id="pbx_8h_html_a965977ea9a3144bc203e0ce7a64680a1"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a></div><div class="ttdeci">int ast_custom_function_unregister(struct ast_custom_function *acf)</div><div class="ttdoc">Unregister a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00273">pbx_functions.c:273</a></div></div>
<div class="ttc" id="datastore_8h_html_aee27286888b30c6448a9bce928040a14"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a></div><div class="ttdeci">int ast_datastore_free(struct ast_datastore *datastore)</div><div class="ttdoc">Free a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00068">datastore.c:68</a></div></div>
<div class="ttc" id="structast__msg_html_aaee31f4cc48985167efcd38ab252dac8"><div class="ttname"><a href="../../df/da1/structast__msg.html#aaee31f4cc48985167efcd38ab252dac8">ast_msg::exten</a></div><div class="ttdeci">const ast_string_field exten</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00249">message.c:249</a></div></div>
<div class="ttc" id="message_8c_html_a6060c18710de4d3cc8bdc87152234450"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a6060c18710de4d3cc8bdc87152234450">ast_msg_var_iterator_next</a></div><div class="ttdeci">int ast_msg_var_iterator_next(const struct ast_msg *msg, struct ast_msg_var_iterator *iter, const char **name, const char **value)</div><div class="ttdoc">Get the next variable name and value that is set for sending outbound. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00689">message.c:689</a></div></div>
<div class="ttc" id="message_8c_html_aa8d0f8e413a94fa1ead06298b788f0f1"><div class="ttname"><a href="../../d0/d6d/message_8c.html#aa8d0f8e413a94fa1ead06298b788f0f1">msg_data_func_write</a></div><div class="ttdeci">static int msg_data_func_write(struct ast_channel *chan, const char *function, char *data, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01138">message.c:1138</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Get header from mananger transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_af0566a4937a5bb1323825e4ef89c0e5a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af0566a4937a5bb1323825e4ef89c0e5a">ast_channel_tech_set</a></div><div class="ttdeci">void ast_channel_tech_set(struct ast_channel *chan, const struct ast_channel_tech *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00773">channel_internal_api.c:773</a></div></div>
<div class="ttc" id="message_8c_html_a03aae7913c875caba36e0b1716a3d86a"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a03aae7913c875caba36e0b1716a3d86a">msg_destructor</a></div><div class="ttdeci">static void msg_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00410">message.c:410</a></div></div>
<div class="ttc" id="datastore_8h_html"><div class="ttname"><a href="../../d9/db6/datastore_8h.html">datastore.h</a></div><div class="ttdoc">Asterisk datastore objects. </div></div>
<div class="ttc" id="structast__msg__data__attribute_html_a4e9aec275e566b978a3ccb4e043d8c61"><div class="ttname"><a href="../../d7/d04/structast__msg__data__attribute.html#a4e9aec275e566b978a3ccb4e043d8c61">ast_msg_data_attribute::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00464">message.h:464</a></div></div>
<div class="ttc" id="message_8c_html_a80cbe1b7224b71fe992d2e22208587ef"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a80cbe1b7224b71fe992d2e22208587ef">msg_func_write</a></div><div class="ttdeci">static int msg_func_write(struct ast_channel *chan, const char *function, char *data, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01042">message.c:1042</a></div></div>
<div class="ttc" id="channel_8h_html_a717ed1e100d6d9057e958b541a9d8a21"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a717ed1e100d6d9057e958b541a9d8a21">ast_channel_internal_alert_flush</a></div><div class="ttdeci">ast_alert_status_t ast_channel_internal_alert_flush(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01115">channel_internal_api.c:1115</a></div></div>
<div class="ttc" id="utils_8h_html_a1e7e06bd20719ecfd58b67f230780ffa"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a></div><div class="ttdeci">int ast_base64decode(unsigned char *dst, const char *src, int max)</div><div class="ttdoc">Decode data from base64. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00294">main/utils.c:294</a></div></div>
<div class="ttc" id="channel_8h_html_ad89ab3133d87a496f63da917148d02be"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a></div><div class="ttdeci">struct ast_readq_list * ast_channel_readq(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00876">channel_internal_api.c:876</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="message_8c_html_a156e69ed5bb6764a00bece684013d3cb"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a156e69ed5bb6764a00bece684013d3cb">ast_msg_send</a></div><div class="ttdeci">int ast_msg_send(struct ast_msg *msg, const char *to, const char *from)</div><div class="ttdoc">Send a msg directly to an endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01369">message.c:1369</a></div></div>
<div class="ttc" id="options_8h_html_aab068d1d19325ebde561113748207756"><div class="ttname"><a href="../../d7/d5b/options_8h.html#aab068d1d19325ebde561113748207756">ast_opt_hide_messaging_ami_events</a></div><div class="ttdeci">#define ast_opt_hide_messaging_ami_events</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00137">options.h:137</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="message_8c_html_a1ffb43d10701fb44b3095172861cb654"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a1ffb43d10701fb44b3095172861cb654">msg_q_cb</a></div><div class="ttdeci">static int msg_q_cb(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00907">message.c:907</a></div></div>
<div class="ttc" id="structast__msg__data_html_a47d01f34a70933205aa514f418f70334"><div class="ttname"><a href="../../d9/d44/structast__msg__data.html#a47d01f34a70933205aa514f418f70334">ast_msg_data::source</a></div><div class="ttdeci">enum ast_msg_data_source_type source</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01409">message.c:1409</a></div></div>
<div class="ttc" id="structast__msg_html_a3493de2682f77ff3fe7314d092b721e4"><div class="ttname"><a href="../../df/da1/structast__msg.html#a3493de2682f77ff3fe7314d092b721e4">ast_msg::vars</a></div><div class="ttdeci">struct ao2_container * vars</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00251">message.c:251</a></div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="channel_8h_html_a21c057f81ff8b02eb1120410ae86e657"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a21c057f81ff8b02eb1120410ae86e657">ast_channel_clear_softhangup</a></div><div class="ttdeci">void ast_channel_clear_softhangup(struct ast_channel *chan, int flag)</div><div class="ttdoc">Clear a set of softhangup flags from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02437">channel.c:2437</a></div></div>
<div class="ttc" id="message_8c_html_a8cde310fda3077b3235e6beea16497de"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a8cde310fda3077b3235e6beea16497de">msg_ds_destroy</a></div><div class="ttdeci">static void msg_ds_destroy(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00391">message.c:391</a></div></div>
<div class="ttc" id="vector_8h_html_a1885c25b9d767a53d1df9b641f53951a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a></div><div class="ttdeci">#define AST_VECTOR_ELEM_CLEANUP_NOOP(elem)</div><div class="ttdoc">Vector element cleanup that does nothing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00573">vector.h:573</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="structast__custom__function_html"><div class="ttname"><a href="../../db/dc0/structast__custom__function.html">ast_custom_function</a></div><div class="ttdoc">Data structure associated with a custom dialplan function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00118">pbx.h:118</a></div></div>
<div class="ttc" id="astobj2_8h_html"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html">astobj2.h</a></div></div>
<div class="ttc" id="pbx_8h_html_a2c502c100b8b4791d9efe395e08d620b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a2c502c100b8b4791d9efe395e08d620b">ast_pbx_run_args</a></div><div class="ttdeci">enum ast_pbx_result ast_pbx_run_args(struct ast_channel *c, struct ast_pbx_args *args)</div><div class="ttdoc">Execute the PBX in the current thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04739">pbx.c:4739</a></div></div>
<div class="ttc" id="structast__msg_html_aedb87548f30bdffa5641eb5860806f2c"><div class="ttname"><a href="../../df/da1/structast__msg.html#aedb87548f30bdffa5641eb5860806f2c">ast_msg::body</a></div><div class="ttdeci">const ast_string_field body</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00249">message.c:249</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a5f36febd4b26a025856e994a4e189a20"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a5f36febd4b26a025856e994a4e189a20">ast_channel_tech::properties</a></div><div class="ttdeci">int properties</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00635">channel.h:635</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="message_8c_html_a4b9221812cead98396012724552386ec"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a4b9221812cead98396012724552386ec">msg_data_find</a></div><div class="ttdeci">static struct msg_data * msg_data_find(struct ao2_container *vars, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00572">message.c:572</a></div></div>
<div class="ttc" id="stringfields_8h_html_a51b5729220efb7cda4393ed35ecdfea2"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a></div><div class="ttdeci">#define AST_STRING_FIELD(name)</div><div class="ttdoc">Declare a string field. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00299">stringfields.h:299</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="channel_8h_html_aae56765bab2eed7bd11d8dca29b2975c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a></div><div class="ttdeci">struct ast_datastore_list * ast_channel_datastores(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00868">channel_internal_api.c:868</a></div></div>
<div class="ttc" id="structmansession_html"><div class="ttname"><a href="../../d2/d8a/structmansession.html">mansession</a></div><div class="ttdoc">In case you didn&amp;#39;t read that giant block of text above the mansession_session struct, the struct mansession is named this solely to keep the API the same in Asterisk. This structure really represents data that is different from Manager action to Manager action. The mansession_session pointer contained within points to session-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01625">manager.c:1625</a></div></div>
<div class="ttc" id="message_8c_html_a3b4febdf0d676e535d24331910d61dd3"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a3b4febdf0d676e535d24331910d61dd3">chan_msg_write</a></div><div class="ttdeci">static int chan_msg_write(struct ast_channel *chan, struct ast_frame *fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00343">message.c:343</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00455">message.h:455</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="message_8c_html_a71dd7465491023d1d7fd467f2920f2b8"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a></div><div class="ttdeci">int ast_msg_set_exten(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the dialplan extension for this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00498">message.c:498</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="message_8c_html_adcb3fd70677c50be8626deec545a42c1"><div class="ttname"><a href="../../d0/d6d/message_8c.html#adcb3fd70677c50be8626deec545a42c1">ast_msg_queue</a></div><div class="ttdeci">int ast_msg_queue(struct ast_msg *msg)</div><div class="ttdoc">Queue a message for routing through the dialplan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00958">message.c:958</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22aa5f25a8885c828f3dbae51ec91daec9d"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22aa5f25a8885c828f3dbae51ec91daec9d">__AST_MSG_DATA_ATTR_LAST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00459">message.h:459</a></div></div>
<div class="ttc" id="reqresp__parser_8h_html_a7e4aa55331b8292eff94249de72b807d"><div class="ttname"><a href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a></div><div class="ttdeci">AST_LIST_HEAD_NOLOCK(contactliststruct, contact)</div></div>
<div class="ttc" id="group__ast__msg__data_html_ga8e03c05d9a579130cae1af412fb6c580"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga8e03c05d9a579130cae1af412fb6c580">ast_msg_data_source_type</a></div><div class="ttdeci">ast_msg_data_source_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00446">message.h:446</a></div></div>
<div class="ttc" id="pbx_8h_html_a64a5b8fdc919806135ad427aca9e71b7"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a></div><div class="ttdeci">int ast_exists_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Determine whether an extension exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04179">pbx.c:4179</a></div></div>
<div class="ttc" id="message_8c_html_ab5bec0fc64b1603d3b60386025a24a87"><div class="ttname"><a href="../../d0/d6d/message_8c.html#ab5bec0fc64b1603d3b60386025a24a87">msg_datastore_find_or_create</a></div><div class="ttdeci">static struct ast_datastore * msg_datastore_find_or_create(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00979">message.c:979</a></div></div>
<div class="ttc" id="channel_8h_html_aa62371d642974c67a0c0efa77d54fcbda1cec91607109bb73e86c4fa1c2ae9344"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa62371d642974c67a0c0efa77d54fcbda1cec91607109bb73e86c4fa1c2ae9344">AST_CHAN_TP_INTERNAL</a></div><div class="ttdoc">Channels with this particular technology are an implementation detail of Asterisk and should generall...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00972">channel.h:972</a></div></div>
<div class="ttc" id="structast__channel__tech_html"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a></div><div class="ttdoc">Structure to describe a channel &quot;technology&quot;, ie a channel driver See for examples: ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00629">channel.h:629</a></div></div>
<div class="ttc" id="pbx_8h_html"><div class="ttname"><a href="../../db/de0/pbx_8h.html">pbx.h</a></div><div class="ttdoc">Core PBX routines and definitions. </div></div>
<div class="ttc" id="channel_8h_html_a6cbcba5661d55216968cde8fdf913c89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="manager_8h_html_a5622d5b2d0baf505daf7b2a1e99c1140a68beaf6e96b2e55b9301d1883add4c0a"><div class="ttname"><a href="../../db/d45/manager_8h.html#a5622d5b2d0baf505daf7b2a1e99c1140a68beaf6e96b2e55b9301d1883add4c0a">ORDER_NATURAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00283">manager.h:283</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="message_8c_html_a145b7cac3d609b5d9331da008fe726f7"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a145b7cac3d609b5d9331da008fe726f7">msg_set_var_full</a></div><div class="ttdeci">static int msg_set_var_full(struct ast_msg *msg, const char *name, const char *value, unsigned int outbound)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00580">message.c:580</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gafadf012f66a9fd7ecf985ec5b9dee101"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a></div><div class="ttdeci">int ast_manager_unregister(const char *action)</div><div class="ttdoc">Unregister a registered manager command. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07258">manager.c:7258</a></div></div>
<div class="ttc" id="message_8c_html_a4303d30986de10390f263dc640d41a99"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a4303d30986de10390f263dc640d41a99">ast_msg_var_iterator_destroy</a></div><div class="ttdeci">void ast_msg_var_iterator_destroy(struct ast_msg_var_iterator *iter)</div><div class="ttdoc">Destroy a message variable iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00706">message.c:706</a></div></div>
<div class="ttc" id="manager_8h_html"><div class="ttname"><a href="../../db/d45/manager_8h.html">manager.h</a></div><div class="ttdoc">The AMI - Asterisk Manager Interface - is a TCP protocol created to manage Asterisk with third-party ...</div></div>
<div class="ttc" id="group__ast__msg__data_html_gafd6d14befbb5e93cf537ef6052676362"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gafd6d14befbb5e93cf537ef6052676362">ast_msg_data_queue_frame</a></div><div class="ttdeci">int ast_msg_data_queue_frame(struct ast_channel *channel, struct ast_msg_data *msg)</div><div class="ttdoc">Queue an AST_FRAME_TEXT_DATA frame containing an ast_msg_data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01548">message.c:1548</a></div></div>
<div class="ttc" id="structmsg__data_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d3/d60/structmsg__data.html#ace9168767fc3707cf5f0a7d049682ba3">msg_data::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00224">message.c:224</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="message_8c_html_a2903b6879e5710a6226825c1a0b84bd7"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a2903b6879e5710a6226825c1a0b84bd7">ast_msg_var_iterator_init</a></div><div class="ttdeci">struct ast_msg_var_iterator * ast_msg_var_iterator_init(const struct ast_msg *msg)</div><div class="ttdoc">Create a new message variable iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00644">message.c:644</a></div></div>
<div class="ttc" id="message_8c_html_a6ddbc20e42c0631602984bc83506aaf2"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a6ddbc20e42c0631602984bc83506aaf2">ast_msg_get_to</a></div><div class="ttdeci">const char * ast_msg_get_to(const struct ast_msg *msg)</div><div class="ttdoc">Retrieve the destination of this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00541">message.c:541</a></div></div>
<div class="ttc" id="structast__msg__data_html_a9e5ae1aaeb5509d8d9c3be3613af179b"><div class="ttname"><a href="../../d9/d44/structast__msg__data.html#a9e5ae1aaeb5509d8d9c3be3613af179b">ast_msg_data::attribute_value_offsets</a></div><div class="ttdeci">int attribute_value_offsets[__AST_MSG_DATA_ATTR_LAST]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01411">message.c:1411</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="message_8c_html_ae6824ede2a0d0608e7beaabeabe6361a"><div class="ttname"><a href="../../d0/d6d/message_8c.html#ae6824ede2a0d0608e7beaabeabe6361a">ATTRIBUTE_UNSET</a></div><div class="ttdeci">#define ATTRIBUTE_UNSET</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01416">message.c:1416</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="message_8c_html_ae2624551959f03c57a27fb2f6a065c96"><div class="ttname"><a href="../../d0/d6d/message_8c.html#ae2624551959f03c57a27fb2f6a065c96">dialplan_handle_msg_cb</a></div><div class="ttdeci">static int dialplan_handle_msg_cb(struct ast_msg *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00852">message.c:852</a></div></div>
<div class="ttc" id="message_8c_html_a02a688837f4e91ea078c0b1b48017ef8"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a02a688837f4e91ea078c0b1b48017ef8">ast_msg_set_from</a></div><div class="ttdeci">int ast_msg_set_from(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;from&amp;#39; URI of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00465">message.c:465</a></div></div>
<div class="ttc" id="message_8c_html_a881685c8efc4c61993449bc32d7ff7fb"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a881685c8efc4c61993449bc32d7ff7fb">chan_msg_send_digit_end</a></div><div class="ttdeci">static int chan_msg_send_digit_end(struct ast_channel *chan, char digit, unsigned int duration)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00385">message.c:385</a></div></div>
<div class="ttc" id="lock_8h_html_a9b07039db138693d1ebe02c3e99ddcab"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a9b07039db138693d1ebe02c3e99ddcab">ast_rwlock_init</a></div><div class="ttdeci">#define ast_rwlock_init(rwlock)</div><div class="ttdoc">wrapper for rwlock with tracking enabled </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00222">lock.h:222</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00456">message.h:456</a></div></div>
<div class="ttc" id="chanvars_8h_html_ae19fa022349aa0481f982ccced85d7ba"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a></div><div class="ttdeci">void ast_var_delete(struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02473">extconf.c:2473</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_ga4edd2c0456a7d3f1658e48e2150c9665"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a></div><div class="ttdeci">const char * ast_msg_data_get_attribute(struct ast_msg_data *msg, enum ast_msg_data_attribute_type attribute_type)</div><div class="ttdoc">Get attribute from ast_msg_data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01533">message.c:1533</a></div></div>
<div class="ttc" id="structvarshead_html"><div class="ttname"><a href="../../dd/de6/structvarshead.html">varshead</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00034">chanvars.h:34</a></div></div>
<div class="ttc" id="structast__msg__tech_html"><div class="ttname"><a href="../../df/dfc/structast__msg__tech.html">ast_msg_tech</a></div><div class="ttdoc">A message technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00052">message.h:52</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="message_8c_html_a53573a834e1a26d67c26ba58a9ad8274"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a53573a834e1a26d67c26ba58a9ad8274">ast_msg_set_endpoint</a></div><div class="ttdeci">int ast_msg_set_endpoint(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the technology&amp;#39;s endpoint associated with this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00520">message.c:520</a></div></div>
<div class="ttc" id="message_8c_html_a393525170186b56f9e6bbcebb9968139"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a393525170186b56f9e6bbcebb9968139">ast_msg_get_from</a></div><div class="ttdeci">const char * ast_msg_get_from(const struct ast_msg *msg)</div><div class="ttdoc">Retrieve the source of this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00536">message.c:536</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structast__msg_html_a9649843650ff64b926c50f2fc2c93691"><div class="ttname"><a href="../../df/da1/structast__msg.html#a9649843650ff64b926c50f2fc2c93691">ast_msg::from</a></div><div class="ttdeci">const ast_string_field from</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00249">message.c:249</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="__private_8h_html"><div class="ttname"><a href="../../d4/d78/__private_8h.html">_private.h</a></div><div class="ttdoc">Prototypes for public functions only of internal interest,. </div></div>
<div class="ttc" id="message_8c_html_a9f578efd386044ab116db578dbe189fb"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a9f578efd386044ab116db578dbe189fb">msg_send_exec</a></div><div class="ttdeci">static int msg_send_exec(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01226">message.c:1226</a></div></div>
<div class="ttc" id="message_8c_html_a0d02014956ac1200c74dd897798b3216"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a0d02014956ac1200c74dd897798b3216">msg_handler_cmp</a></div><div class="ttdeci">static int msg_handler_cmp(const struct ast_msg_handler *vec_elem, const struct ast_msg_handler *srch)</div><div class="ttdoc">Comparison callback for ast_msg_handler vector removal. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01666">message.c:1666</a></div></div>
<div class="ttc" id="vector_8h_html"><div class="ttname"><a href="../../d6/d68/vector_8h.html">vector.h</a></div><div class="ttdoc">Vector container support. </div></div>
<div class="ttc" id="message_8c_html_a3e5c57832b4569f59921faa278002c3e"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a3e5c57832b4569f59921faa278002c3e">dialplan_msg_handler</a></div><div class="ttdeci">static struct ast_msg_handler dialplan_msg_handler</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00892">message.c:892</a></div></div>
<div class="ttc" id="structast__msg__data__attribute_html"><div class="ttname"><a href="../../d7/d04/structast__msg__data__attribute.html">ast_msg_data_attribute</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00462">message.h:462</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="taskprocessor_8h_html"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html">taskprocessor.h</a></div><div class="ttdoc">An API for managing task processing threads that can be shared across modules. </div></div>
<div class="ttc" id="group__ast__msg__data_html_ga44ac88ed1b656e254dcad5cf0dbd2a22"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga44ac88ed1b656e254dcad5cf0dbd2a22">ast_msg_data_attribute_type</a></div><div class="ttdeci">ast_msg_data_attribute_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00454">message.h:454</a></div></div>
<div class="ttc" id="message_8c_html_a580622ff291a435adb7f81cf0e1684f8"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a580622ff291a435adb7f81cf0e1684f8">create_msg_q_chan</a></div><div class="ttdeci">static struct ast_channel * create_msg_q_chan(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00715">message.c:715</a></div></div>
<div class="ttc" id="structmsg__data_html_ae98a0878a8abb793b89317d904f8c00a"><div class="ttname"><a href="../../d3/d60/structmsg__data.html#ae98a0878a8abb793b89317d904f8c00a">msg_data::destination</a></div><div class="ttdeci">char * destination</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d83/res__pjsip__messaging_8c_source.html#l01125">res_pjsip_messaging.c:1125</a></div></div>
<div class="ttc" id="structast__msg__data_html_ae809d5359ac030c60a30a8f0b2294b82"><div class="ttname"><a href="../../d9/d44/structast__msg__data.html#ae809d5359ac030c60a30a8f0b2294b82">ast_msg_data::length</a></div><div class="ttdeci">size_t length</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01408">message.c:1408</a></div></div>
<div class="ttc" id="message_8c_html_a8a1ffcfecf1ffbc22c526796cdf954a7"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a8a1ffcfecf1ffbc22c526796cdf954a7">ast_msg_tech_unregister</a></div><div class="ttdeci">int ast_msg_tech_unregister(const struct ast_msg_tech *tech)</div><div class="ttdoc">Unregister a message technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01610">message.c:1610</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a3c8b31e0185aad7285b6083e1a0c88c8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a3c8b31e0185aad7285b6083e1a0c88c8">AST_SOFTHANGUP_ALL</a></div><div class="ttdoc">All softhangup flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01162">channel.h:1162</a></div></div>
<div class="ttc" id="message_8c_html_a6e4a1280611c15758b2338f5588b7148"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a6e4a1280611c15758b2338f5588b7148">chan_msg_read</a></div><div class="ttdeci">static struct ast_frame * chan_msg_read(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00332">message.c:332</a></div></div>
<div class="ttc" id="message_8c_html_a926dc659d6f9d88782e9d0e463ba8c47"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a926dc659d6f9d88782e9d0e463ba8c47">ast_msg_set_var</a></div><div class="ttdeci">int ast_msg_set_var(struct ast_msg *msg, const char *name, const char *value)</div><div class="ttdoc">Set a variable on the message going to the dialplan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00615">message.c:615</a></div></div>
<div class="ttc" id="message_8c_html_a3144afa71134a44c6c6de90497281596"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a3144afa71134a44c6c6de90497281596">chan_msg_send_digit_begin</a></div><div class="ttdeci">static int chan_msg_send_digit_begin(struct ast_channel *chan, char digit)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00372">message.c:372</a></div></div>
<div class="ttc" id="message_8c_html_a340a5494b3830d82fa35daa30bf3a40f"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a340a5494b3830d82fa35daa30bf3a40f">msg_techs_lock</a></div><div class="ttdeci">static ast_rwlock_t msg_techs_lock</div><div class="ttdoc">Lock for msg_techs vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00255">message.c:255</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="threadstorage_8h_html_a3fb5391416c5bf7a18d5f7f7b84c4b81"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#a3fb5391416c5bf7a18d5f7f7b84c4b81">AST_THREADSTORAGE_CUSTOM</a></div><div class="ttdeci">#define AST_THREADSTORAGE_CUSTOM(a, b, c)</div><div class="ttdoc">Define a thread storage variable, with custom initialization and cleanup. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00109">threadstorage.h:109</a></div></div>
<div class="ttc" id="message_8c_html_a13b928949f293c3b6b9ba3ebe8d64075"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a13b928949f293c3b6b9ba3ebe8d64075">ast_msg_destroy</a></div><div class="ttdeci">struct ast_msg * ast_msg_destroy(struct ast_msg *msg)</div><div class="ttdoc">Destroy an ast_msg. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00448">message.c:448</a></div></div>
<div class="ttc" id="lock_8h_html_a045bd81ceab2de81e42af338ad7cf121"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a></div><div class="ttdeci">#define ast_rwlock_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00234">lock.h:234</a></div></div>
<div class="ttc" id="structast__msg__handler_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d5/d80/structast__msg__handler.html#a8f8f80d37794cde9472343e4487ba3eb">ast_msg_handler::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">Name of the message handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00102">message.h:102</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a6b2508ba0a6b8f43ae6d3963f3189585"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a></div><div class="ttdeci">int ast_taskprocessor_push(struct ast_taskprocessor *tps, int(*task_exe)(void *datap), void *datap) attribute_warn_unused_result</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01175">taskprocessor.c:1175</a></div></div>
<div class="ttc" id="message_8c_html_a0b8648c71871250896132e5ad57df1c8"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a0b8648c71871250896132e5ad57df1c8">chan_cleanup</a></div><div class="ttdeci">static void chan_cleanup(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00774">message.c:774</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gaa97739ea571e22b9dcd231658f6ce044"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gaa97739ea571e22b9dcd231658f6ce044">astman_get_variables_order</a></div><div class="ttdeci">struct ast_variable * astman_get_variables_order(const struct message *m, enum variable_orders order)</div><div class="ttdoc">Get a linked list of the Variable: headers with order specified. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02911">manager.c:2911</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="message_8c_html_a874827c03c7af053fb205162c1920bf3"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a874827c03c7af053fb205162c1920bf3">msg_tech_cmp</a></div><div class="ttdeci">static int msg_tech_cmp(const struct ast_msg_tech *vec_elem, const struct ast_msg_tech *srch)</div><div class="ttdoc">Comparison callback for ast_msg_tech vector removal. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01605">message.c:1605</a></div></div>
<div class="ttc" id="structast__rwlock__info_html"><div class="ttname"><a href="../../dc/d9e/structast__rwlock__info.html">ast_rwlock_info</a></div><div class="ttdoc">Structure for rwlock and tracking information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00156">lock.h:156</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gac19d5671ce7ad4db2a7df0d4784d4cd3"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gac19d5671ce7ad4db2a7df0d4784d4cd3">ast_msg_data_alloc2</a></div><div class="ttdeci">struct ast_msg_data * ast_msg_data_alloc2(enum ast_msg_data_source_type source_type, const char *to, const char *from, const char *content_type, const char *body)</div><div class="ttdoc">Allocates an ast_msg_data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01469">message.c:1469</a></div></div>
<div class="ttc" id="message_8c_html_a85c2e8d008f354ce1a5cc3c5264c49d4"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a85c2e8d008f354ce1a5cc3c5264c49d4">msg_func_read</a></div><div class="ttdeci">static int msg_func_read(struct ast_channel *chan, const char *function, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01001">message.c:1001</a></div></div>
<div class="ttc" id="test__ari_8c_html_a695cc202c7a2869aa8202bb20726ea3c"><div class="ttname"><a href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a></div><div class="ttdeci">static void handler(const char *name, int response_code, struct ast_variable *get_params, struct ast_variable *path_vars, struct ast_variable *headers, struct ast_json *body, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/test__ari_8c_source.html#l00059">test_ari.c:59</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="message_8c_html_a698f7bb2f1591726001330e95cc8950f"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a698f7bb2f1591726001330e95cc8950f">ast_msg_init</a></div><div class="ttdeci">int ast_msg_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01730">message.c:1730</a></div></div>
<div class="ttc" id="structast__msg__var__iterator_html_aad781d2cc5f4cbe3b5186b8aefef4d2e"><div class="ttname"><a href="../../d6/d23/structast__msg__var__iterator.html#aad781d2cc5f4cbe3b5186b8aefef4d2e">ast_msg_var_iterator::current_used</a></div><div class="ttdeci">struct msg_data * current_used</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00641">message.c:641</a></div></div>
<div class="ttc" id="message_8c_html_ac9a8163468646664e14338f6a34c6441"><div class="ttname"><a href="../../d0/d6d/message_8c.html#ac9a8163468646664e14338f6a34c6441">ast_msg_get_tech</a></div><div class="ttdeci">const char * ast_msg_get_tech(const struct ast_msg *msg)</div><div class="ttdoc">Retrieve the technology associated with this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00546">message.c:546</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="pbx_8h_html_aad8771c7e3b2170a749946f1a8b758aa"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aad8771c7e3b2170a749946f1a8b758aa">__ast_custom_function_register</a></div><div class="ttdeci">int __ast_custom_function_register(struct ast_custom_function *acf, struct ast_module *mod)</div><div class="ttdoc">Register a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00373">pbx_functions.c:373</a></div></div>
<div class="ttc" id="message_8c_html_a98ae66acbd6268c5010acf52be7e40a4"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a98ae66acbd6268c5010acf52be7e40a4">ast_msg_tech_register</a></div><div class="ttdeci">int ast_msg_tech_register(const struct ast_msg_tech *tech)</div><div class="ttdoc">Register a message technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01569">message.c:1569</a></div></div>
<div class="ttc" id="module_8h_html_a5fd926a7510f3d3fd0d69ae710ec1e89"><div class="ttname"><a href="../../d5/d16/module_8h.html#a5fd926a7510f3d3fd0d69ae710ec1e89">ast_register_application2</a></div><div class="ttdeci">int ast_register_application2(const char *app, int(*execute)(struct ast_channel *, const char *), const char *synopsis, const char *description, void *mod)</div><div class="ttdoc">Register an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00103">pbx_app.c:103</a></div></div>
<div class="ttc" id="structast__msg__data_html_a103a957b017f6b717767bba130a02694"><div class="ttname"><a href="../../d9/d44/structast__msg__data.html#a103a957b017f6b717767bba130a02694">ast_msg_data::buf</a></div><div class="ttdeci">char buf[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01413">message.c:1413</a></div></div>
<div class="ttc" id="structast__msg_html_a7faec841658b88ad0cfbc684853acad3"><div class="ttname"><a href="../../df/da1/structast__msg.html#a7faec841658b88ad0cfbc684853acad3">ast_msg::context</a></div><div class="ttdeci">const ast_string_field context</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00249">message.c:249</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="datastore_8h_html_a666afb07fd77d50782cc10f83e029159"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a></div><div class="ttdeci">#define ast_datastore_alloc(info, uid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00089">datastore.h:89</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structast__msg__var__iterator_html"><div class="ttname"><a href="../../d6/d23/structast__msg__var__iterator.html">ast_msg_var_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00639">message.c:639</a></div></div>
<div class="ttc" id="structast__msg__tech_html_a2a5acdb1cb93547c55bb532d5b761068"><div class="ttname"><a href="../../df/dfc/structast__msg__tech.html#a2a5acdb1cb93547c55bb532d5b761068">ast_msg_tech::msg_send</a></div><div class="ttdeci">int(*const msg_send)(const struct ast_msg *msg, const char *to, const char *from)</div><div class="ttdoc">Send a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00075">message.h:75</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="structast__msg_html"><div class="ttname"><a href="../../df/da1/structast__msg.html">ast_msg</a></div><div class="ttdoc">A message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00233">message.c:233</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="message_8c_html_aa21f081993590c1410b287d717a92282"><div class="ttname"><a href="../../d0/d6d/message_8c.html#aa21f081993590c1410b287d717a92282">ast_msg_set_body</a></div><div class="ttdeci">int ast_msg_set_body(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;body&amp;#39; text of a message (in UTF-8) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00476">message.c:476</a></div></div>
<div class="ttc" id="channel_8h_html_a2f18aafad0442206e71033ac6676dbb5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2f18aafad0442206e71033ac6676dbb5">ast_channel_alloc</a></div><div class="ttdeci">#define ast_channel_alloc(needqueue, state, cid_num, cid_name, acctcode, exten, context, assignedids, requestor, amaflag,...)</div><div class="ttdoc">Create a channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01259">channel.h:1259</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="module_8h_html"><div class="ttname"><a href="../../d5/d16/module_8h.html">module.h</a></div><div class="ttdoc">Asterisk module definitions. </div></div>
<div class="ttc" id="structast__pbx__args_html_a0449b0be05342e431e60937c47fc52f7"><div class="ttname"><a href="../../da/db8/structast__pbx__args.html#a0449b0be05342e431e60937c47fc52f7">ast_pbx_args::no_hangup_chan</a></div><div class="ttdeci">unsigned int no_hangup_chan</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00398">pbx.h:398</a></div></div>
<div class="ttc" id="message_8c_html_a6f22abc58303085be436c81bd598eeca"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a6f22abc58303085be436c81bd598eeca">msg_handler_find_by_tech_name</a></div><div class="ttdeci">static const struct ast_msg_handler * msg_handler_find_by_tech_name(const char *tech_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01207">message.c:1207</a></div></div>
<div class="ttc" id="message_8c_html_a76f3470a9ffec2c57a8a010b28ecafa3"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a76f3470a9ffec2c57a8a010b28ecafa3">chan_msg_indicate</a></div><div class="ttdeci">static int chan_msg_indicate(struct ast_channel *chan, int condition, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00358">message.c:358</a></div></div>
<div class="ttc" id="channel_8h_html_a1ed3e98d33d5587948a0e2ef67a81f52"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a></div><div class="ttdeci">int ast_channel_datastore_add(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Add a datastore to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02390">channel.c:2390</a></div></div>
<div class="ttc" id="message_8c_html_acf4073638cf23022399e3666c804e178"><div class="ttname"><a href="../../d0/d6d/message_8c.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a></div><div class="ttdeci">int ast_msg_set_to(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;to&amp;#39; URI of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00454">message.c:454</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html">app.h</a></div><div class="ttdoc">Application convenience functions, designed to give consistent look and feel to Asterisk apps...</div></div>
<div class="ttc" id="structast__msg_html_a6379def8cefd9afdea29d5ed673cf8a0"><div class="ttname"><a href="../../df/da1/structast__msg.html#a6379def8cefd9afdea29d5ed673cf8a0">ast_msg::tech</a></div><div class="ttdeci">const ast_string_field tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00249">message.c:249</a></div></div>
<div class="ttc" id="message_8c_html_a76b4f941b1f576c4373ff2251aeb919d"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a></div><div class="ttdeci">int ast_msg_has_destination(const struct ast_msg *msg)</div><div class="ttdoc">Determine if a particular message has a destination via some handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00937">message.c:937</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="channel_8h_html_a1ff1c62b6d50823da93a920575c9c0c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a></div><div class="ttdeci">int ast_channel_datastore_remove(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Remove a datastore from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02399">channel.c:2399</a></div></div>
<div class="ttc" id="message_8c_html_ad17a1a2d3b629f3c8dc6048fe36d57ca"><div class="ttname"><a href="../../d0/d6d/message_8c.html#ad17a1a2d3b629f3c8dc6048fe36d57ca">action_messagesend</a></div><div class="ttdeci">static int action_messagesend(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01306">message.c:1306</a></div></div>
<div class="ttc" id="message_8c_html_ad5ca4649880cd7535b381354a6d7b042"><div class="ttname"><a href="../../d0/d6d/message_8c.html#ad5ca4649880cd7535b381354a6d7b042">ast_msg_set_var_outbound</a></div><div class="ttdeci">int ast_msg_set_var_outbound(struct ast_msg *msg, const char *name, const char *value)</div><div class="ttdoc">Set a variable on the message being sent to a message tech directly. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00610">message.c:610</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="message_8c_html_a59105ea6bdc0e6c7219afab8d9d48745"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a59105ea6bdc0e6c7219afab8d9d48745">ast_msg_var_iterator_get_next</a></div><div class="ttdeci">static int ast_msg_var_iterator_get_next(const struct ast_msg *msg, struct ast_msg_var_iterator *iter, const char **name, const char **value, unsigned int send)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00658">message.c:658</a></div></div>
<div class="ttc" id="structmsg__data_html_ac835e96f4a17b5b7c61eef01a07670a8"><div class="ttname"><a href="../../d3/d60/structmsg__data.html#ac835e96f4a17b5b7c61eef01a07670a8">msg_data::value</a></div><div class="ttdeci">const ast_string_field value</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00224">message.c:224</a></div></div>
<div class="ttc" id="channel_8h_html_a3dda07b27527beb0e8b4c92b90810834"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dda07b27527beb0e8b4c92b90810834">ast_channel_unlink</a></div><div class="ttdeci">void ast_channel_unlink(struct ast_channel *chan)</div><div class="ttdoc">Remove a channel from the global channels container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10730">channel.c:10730</a></div></div>
<div class="ttc" id="stringfields_8h_html_a5dbef560766ab8260c045b54b1dfbccd"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a5dbef560766ab8260c045b54b1dfbccd">ast_string_field_build_va</a></div><div class="ttdeci">#define ast_string_field_build_va(x, field, fmt, args)</div><div class="ttdoc">Set a field to a complex (built) value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00588">stringfields.h:588</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
<div class="ttc" id="manager_8h_html_ab85694f6b643f767a2d61c37c2b87753"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab85694f6b643f767a2d61c37c2b87753">EVENT_FLAG_MESSAGE</a></div><div class="ttdeci">#define EVENT_FLAG_MESSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00091">manager.h:91</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
<div class="ttc" id="message_8c_html_a757a64be14a9fc2b47a37f5ce9e742d5"><div class="ttname"><a href="../../d0/d6d/message_8c.html#a757a64be14a9fc2b47a37f5ce9e742d5">ast_msg_set_tech</a></div><div class="ttdeci">int ast_msg_set_tech(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the technology associated with this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00509">message.c:509</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:43:53 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
